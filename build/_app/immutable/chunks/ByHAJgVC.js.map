{"version":3,"file":"ByHAJgVC.js","sources":["../../../../../../src/lib/components/common/ConfirmDialog.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport DOMPurify from 'dompurify';\n\n\timport { onMount, getContext, createEventDispatcher, onDestroy, tick } from 'svelte';\n\timport * as FocusTrap from 'focus-trap';\n\n\tconst i18n = getContext('i18n');\n\tconst dispatch = createEventDispatcher();\n\n\timport { fade } from 'svelte/transition';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport { marked } from 'marked';\n\n\texport let title = '';\n\texport let message = '';\n\n\texport let cancelLabel = $i18n.t('Cancel');\n\texport let confirmLabel = $i18n.t('Confirm');\n\n\texport let onConfirm = () => {};\n\n\texport let input = false;\n\texport let inputPlaceholder = '';\n\texport let inputValue = '';\n\n\texport let show = false;\n\n\t$: if (show) {\n\t\tinit();\n\t}\n\n\tlet modalElement = null;\n\tlet mounted = false;\n\n\tlet focusTrap: FocusTrap.FocusTrap | null = null;\n\n\tconst init = () => {\n\t\tinputValue = '';\n\t};\n\n\tconst handleKeyDown = (event: KeyboardEvent) => {\n\t\tif (event.key === 'Escape') {\n\t\t\tconsole.log('Escape');\n\t\t\tshow = false;\n\t\t}\n\n\t\tif (event.key === 'Enter') {\n\t\t\tconsole.log('Enter');\n\t\t\tconfirmHandler();\n\t\t}\n\t};\n\n\tconst confirmHandler = async () => {\n\t\tshow = false;\n\t\tawait tick();\n\t\tawait onConfirm();\n\t\tdispatch('confirm', inputValue);\n\t};\n\n\tonMount(() => {\n\t\tmounted = true;\n\t});\n\n\t$: if (mounted) {\n\t\tif (show && modalElement) {\n\t\t\tdocument.body.appendChild(modalElement);\n\t\t\tfocusTrap = FocusTrap.createFocusTrap(modalElement);\n\t\t\tfocusTrap.activate();\n\n\t\t\twindow.addEventListener('keydown', handleKeyDown);\n\t\t\tdocument.body.style.overflow = 'hidden';\n\t\t} else if (modalElement) {\n\t\t\tfocusTrap.deactivate();\n\n\t\t\twindow.removeEventListener('keydown', handleKeyDown);\n\t\t\tdocument.body.removeChild(modalElement);\n\n\t\t\tdocument.body.style.overflow = 'unset';\n\t\t}\n\t}\n\n\tonDestroy(() => {\n\t\tshow = false;\n\t\tif (focusTrap) {\n\t\t\tfocusTrap.deactivate();\n\t\t}\n\t\tif (modalElement) {\n\t\t\tdocument.body.removeChild(modalElement);\n\t\t}\n\t});\n</script>\n\n{#if show}\n\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t<div\n\t\tbind:this={modalElement}\n\t\tclass=\" fixed top-0 right-0 left-0 bottom-0 bg-black/60 w-full h-screen max-h-[100dvh] flex justify-center z-99999999 overflow-hidden overscroll-contain\"\n\t\tin:fade={{ duration: 10 }}\n\t\ton:mousedown={() => {\n\t\t\tshow = false;\n\t\t}}\n\t>\n\t\t<div\n\t\t\tclass=\" m-auto max-w-full w-[32rem] mx-2 bg-white/95 dark:bg-gray-950/95 backdrop-blur-sm rounded-4xl max-h-[100dvh] shadow-3xl border border-white dark:border-gray-900\"\n\t\t\tin:flyAndScale\n\t\t\ton:mousedown={(e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t}}\n\t\t>\n\t\t\t<div class=\"px-[1.75rem] py-6 flex flex-col\">\n\t\t\t\t<div class=\" text-lg font-medium dark:text-gray-200 mb-2.5\">\n\t\t\t\t\t{#if title !== ''}\n\t\t\t\t\t\t{title}\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t{$i18n.t('Confirm your action')}\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\n\t\t\t\t<slot>\n\t\t\t\t\t<div class=\" text-sm text-gray-500 flex-1\">\n\t\t\t\t\t\t{#if message !== ''}\n\t\t\t\t\t\t\t{@const html = DOMPurify.sanitize(marked.parse(message))}\n\t\t\t\t\t\t\t{@html html}\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t{$i18n.t('This action cannot be undone. Do you wish to continue?')}\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{#if input}\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\tbind:value={inputValue}\n\t\t\t\t\t\t\t\tplaceholder={inputPlaceholder ? inputPlaceholder : $i18n.t('Enter your message')}\n\t\t\t\t\t\t\t\tclass=\"w-full mt-2 rounded-lg px-4 py-2 text-sm dark:text-gray-300 dark:bg-gray-900 outline-hidden resize-none\"\n\t\t\t\t\t\t\t\trows=\"3\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</slot>\n\n\t\t\t\t<div class=\"mt-6 flex justify-between gap-1.5\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"text-sm bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white font-medium w-full py-2 rounded-3xl transition\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tshow = false;\n\t\t\t\t\t\t\tdispatch('cancel');\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{cancelLabel}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"text-sm bg-gray-900 hover:bg-gray-850 text-gray-100 dark:bg-gray-100 dark:hover:bg-white dark:text-gray-800 font-medium w-full py-2 rounded-3xl transition\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tconfirmHandler();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{confirmLabel}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/if}\n\n<style>\n\t.modal-content {\n\t\tanimation: scaleUp 0.1s ease-out forwards;\n\t}\n\n\t@keyframes scaleUp {\n\t\tfrom {\n\t\t\ttransform: scale(0.985);\n\t\t\topacity: 0;\n\t\t}\n\t\tto {\n\t\t\ttransform: scale(1);\n\t\t\topacity: 1;\n\t\t}\n\t}\n</style>\n"],"names":["i18n","getContext","dispatch","createEventDispatcher","title","message","cancelLabel","$.prop","$$props","$i18n","confirmLabel","onConfirm","input","inputPlaceholder","inputValue","show","modalElement","mounted","focusTrap","init","handleKeyDown","event","confirmHandler","tick","onMount","$.set","onDestroy","$.get","FocusTrap.createFocusTrap","div","root_1","div_1","$.child","div_2","div_3","$$render","consequent","alternate","div_4","root_4","html","$.derived_safe_equal","DOMPurify","marked","$.untrack","consequent_1","alternate_1","textarea","root_7","$.remove_textarea_child","$.template_effect","$0","$.set_attribute","$.bind_value","$.append","$$anchor","consequent_2","div_5","$.sibling","node_2","button","text_3","$.reset","button_1","text_4","$$value","$.transition","flyAndScale","$.event","e","fade","consequent_3"],"mappings":"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"}