import{s as xe,r as zt,v as Ot,w as Ut,x as At,j as me,l as Pe,i as z,d as h,R as Gl,S as $t,T as Hn,B as _e,e as v,c as b,a as w,a0 as Wt,V as Cl,u as fe,F as Pt,I as kl,n as Se,G as el,q as Tl,t as ge,k as Z,b as pe,o as q,f as u,g as m,h as ye,A as qe,y as Ne,z as ze,E as Me,p as bt,H as xt,Y as Mt,N as Be,L as rl,C as Zt,D as Bn,J as Zl,K as us,W as Ln,m as Jn}from"./scheduler.Dz-NSSWT.js";import{S as Je,i as Ge,t as N,a as O,g as Re,c as Fe,j as Nn,h as ts,k as Ql,f as He,b as ee,d as te,m as le,e as se}from"./index.CVQtJBk6.js";import{g as Gn}from"./globals.D0QH3NT1.js";import{e as it}from"./each.CwcyO-D0.js";import{t as De}from"./Toaster.svelte_svelte_type_style_lang.Bxfrv8ue.js";import{ar as zn,as as xl,M as Qn,at as Kn}from"./Messages.DphpbSRH.js";import"./dayjs.min.CnqrW7zs.js";import{g as $l}from"./entry.DHDHOHwK.js";import{p as Yn}from"./stores.CvafcZCa.js";import{d as Vl,j as Xt,s as Kl,p as Xn,n as $n,m as Ul,t as On,u as Al,k as Un,g as Ol,F as Sl,b as er,S as tr,y as lr,W as An,h as wl,E as sr,f as nr,r as nl,l as rr,e as or,z as ar,v as dl}from"./index.D2mQNFJF.js";import{i as ls,m as Pn,r as Jl,n as ds,v as hs,p as ms,s as ir,o as ql,h as gs,a as cr}from"./index.C8OzP8zI.js";import{i as fr}from"./index.CBBgCOQU.js";import{A as ur,F as ps,z as dr,h as hl,G as _s,u as Dl,i as hr,b as mr}from"./index.BNHNJEox.js";import{g as gr}from"./index.BYJs7_s1.js";import{j as pr,k as _r,u as vr,p as br,l as wr}from"./index.CF_prFGd.js";import{T as kr,S as yr,U as Er,q as Ir}from"./ShareChatModal.DU5uPbpR.js";import{r as Dr,s as Sr,t as Cr,v as Tr,w as Vr,x as Mr}from"./index.DAXOC6bs.js";import{f as vs,s as Hr}from"./index.B19UeGvj.js";import{t as ss,s as Br}from"./index.GZY0tup4.js";import{T as qt}from"./create.BSJgY7P6.js";import{D as Yl,M as ml}from"./Dropdown.fFGB6AF7.js";import{s as Lr,c as Nr,u as zr,d as Or,b as Xl}from"./menu-trigger.BEfW-VTh.js";import{f as Pl}from"./index.DMdt0oYD.js";import{S as jn}from"./Switch.Bwda4Oct.js";import{A as Ur}from"./AddFilesPlaceholder.CiYjLXlh.js";import{S as Ar}from"./Selector.C9ksCfmi.js";import{d as Pr}from"./index.Cdp-PIBo.js";import{g as Ml}from"./spread.CgU5AtxT.js";import{c as Rn,d as jr}from"./updater.CHAP3bX5.js";import{f as Rr}from"./FileSaver.min.CimDdHIv.js";import{b as Fr}from"./index.q-Qs2qMV.js";import{M as Wr}from"./MenuLines.CNpVpPYp.js";import{M as Fn}from"./Modal.Cx3fPC8l.js";import{A as Zr}from"./AdvancedParams.C32wXVZZ.js";import{i as qr,j as xr,k as Jr}from"./index.B5apL5yh.js";import{j as Gr,k as Qr,l as Kr}from"./index.CVC43lEx.js";import{S as Yr}from"./Spinner.CTca_gHl.js";import{V as Xr}from"./Valves.Cby0x2Cz.js";import{C as $r}from"./ConfirmDialog.2fUkeJzy.js";const eo=n=>({subIds:n&1}),bs=n=>({subIds:n[0]});function to(n){let e;const t=n[6].default,l=zt(t,n,n[5],bs);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,o){l&&l.m(s,o),e=!0},p(s,[o]){l&&l.p&&(!e||o&33)&&Ot(l,t,s,s[5],e?At(t,s[5],o,eo):Ut(s[5]),bs)},i(s){e||(N(l,s),e=!0)},o(s){O(l,s),e=!1},d(s){l&&l.d(s)}}}function lo(n,e,t){let l,{$$slots:s={},$$scope:o}=e,{disabled:r=void 0}=e,{open:a=void 0}=e,{onOpenChange:i=void 0}=e;const{updateOption:c,ids:f,states:{subOpen:d}}=Lr({disabled:r,onOpenChange:({next:p})=>(a!==p&&(i==null||i(p),t(2,a=p)),p)}),g=Pr([f.menu,f.trigger],([p,y])=>({menu:p,trigger:y}));return me(n,g,p=>t(0,l=p)),n.$$set=p=>{"disabled"in p&&t(3,r=p.disabled),"open"in p&&t(2,a=p.open),"onOpenChange"in p&&t(4,i=p.onOpenChange),"$$scope"in p&&t(5,o=p.$$scope)},n.$$.update=()=>{n.$$.dirty&4&&a!==void 0&&d.set(a),n.$$.dirty&8&&c("disabled",r)},[l,g,a,r,i,o,s]}class so extends Je{constructor(e){super(),Ge(this,e,lo,to,xe,{disabled:3,open:2,onOpenChange:4})}}const no=n=>({builder:n[0]&256}),ws=n=>({builder:n[8]}),ro=n=>({builder:n[0]&256}),ks=n=>({builder:n[8]}),oo=n=>({builder:n[0]&256}),ys=n=>({builder:n[8]}),ao=n=>({builder:n[0]&256}),Es=n=>({builder:n[8]}),io=n=>({builder:n[0]&256}),Is=n=>({builder:n[8]}),co=n=>({builder:n[0]&256}),Ds=n=>({builder:n[8]});function fo(n){let e,t,l,s;const o=n[28].default,r=zt(o,n,n[27],ws);let a=[n[8],n[13]],i={};for(let c=0;c<a.length;c+=1)i=$t(i,a[c]);return{c(){e=v("div"),r&&r.c(),this.h()},l(c){e=b(c,"DIV",{});var f=w(e);r&&r.l(f),f.forEach(h),this.h()},h(){Wt(e,i)},m(c,f){z(c,e,f),r&&r.m(e,null),n[33](e),t=!0,l||(s=[Cl(n[8].action(e)),fe(e,"m-focusout",n[12]),fe(e,"m-keydown",n[12]),fe(e,"m-pointermove",n[12])],l=!0)},p(c,f){r&&r.p&&(!t||f[0]&134217984)&&Ot(r,o,c,c[27],t?At(o,c[27],f,no):Ut(c[27]),ws),Wt(e,i=Ml(a,[f[0]&256&&c[8],f[0]&8192&&c[13]]))},i(c){t||(N(r,c),t=!0)},o(c){O(r,c),t=!1},d(c){c&&h(e),r&&r.d(c),n[33](null),l=!1,Pt(s)}}}function uo(n){let e,t,l,s,o;const r=n[28].default,a=zt(r,n,n[27],ks);let i=[n[8],n[13]],c={};for(let f=0;f<i.length;f+=1)c=$t(c,i[f]);return{c(){e=v("div"),a&&a.c(),this.h()},l(f){e=b(f,"DIV",{});var d=w(e);a&&a.l(d),d.forEach(h),this.h()},h(){Wt(e,c)},m(f,d){z(f,e,d),a&&a.m(e,null),n[32](e),l=!0,s||(o=[Cl(n[8].action(e)),fe(e,"m-focusout",n[12]),fe(e,"m-keydown",n[12]),fe(e,"m-pointermove",n[12])],s=!0)},p(f,d){n=f,a&&a.p&&(!l||d[0]&134217984)&&Ot(a,r,n,n[27],l?At(r,n[27],d,ro):Ut(n[27]),ks),Wt(e,c=Ml(i,[d[0]&256&&n[8],d[0]&8192&&n[13]]))},i(f){l||(N(a,f),t&&t.end(1),l=!0)},o(f){O(a,f),f&&(t=Nn(e,n[5],n[6])),l=!1},d(f){f&&h(e),a&&a.d(f),n[32](null),f&&t&&t.end(),s=!1,Pt(o)}}}function ho(n){let e,t,l,s,o;const r=n[28].default,a=zt(r,n,n[27],ys);let i=[n[8],n[13]],c={};for(let f=0;f<i.length;f+=1)c=$t(c,i[f]);return{c(){e=v("div"),a&&a.c(),this.h()},l(f){e=b(f,"DIV",{});var d=w(e);a&&a.l(d),d.forEach(h),this.h()},h(){Wt(e,c)},m(f,d){z(f,e,d),a&&a.m(e,null),n[31](e),l=!0,s||(o=[Cl(n[8].action(e)),fe(e,"m-focusout",n[12]),fe(e,"m-keydown",n[12]),fe(e,"m-pointermove",n[12])],s=!0)},p(f,d){n=f,a&&a.p&&(!l||d[0]&134217984)&&Ot(a,r,n,n[27],l?At(r,n[27],d,oo):Ut(n[27]),ys),Wt(e,c=Ml(i,[d[0]&256&&n[8],d[0]&8192&&n[13]]))},i(f){l||(N(a,f),f&&(t||kl(()=>{t=ts(e,n[3],n[4]),t.start()})),l=!0)},o(f){O(a,f),l=!1},d(f){f&&h(e),a&&a.d(f),n[31](null),s=!1,Pt(o)}}}function mo(n){let e,t,l,s,o,r;const a=n[28].default,i=zt(a,n,n[27],Es);let c=[n[8],n[13]],f={};for(let d=0;d<c.length;d+=1)f=$t(f,c[d]);return{c(){e=v("div"),i&&i.c(),this.h()},l(d){e=b(d,"DIV",{});var g=w(e);i&&i.l(g),g.forEach(h),this.h()},h(){Wt(e,f)},m(d,g){z(d,e,g),i&&i.m(e,null),n[30](e),s=!0,o||(r=[Cl(n[8].action(e)),fe(e,"m-focusout",n[12]),fe(e,"m-keydown",n[12]),fe(e,"m-pointermove",n[12])],o=!0)},p(d,g){n=d,i&&i.p&&(!s||g[0]&134217984)&&Ot(i,a,n,n[27],s?At(a,n[27],g,ao):Ut(n[27]),Es),Wt(e,f=Ml(c,[g[0]&256&&n[8],g[0]&8192&&n[13]]))},i(d){s||(N(i,d),d&&kl(()=>{s&&(l&&l.end(1),t=ts(e,n[3],n[4]),t.start())}),s=!0)},o(d){O(i,d),t&&t.invalidate(),d&&(l=Nn(e,n[5],n[6])),s=!1},d(d){d&&h(e),i&&i.d(d),n[30](null),d&&l&&l.end(),o=!1,Pt(r)}}}function go(n){let e,t,l,s,o;const r=n[28].default,a=zt(r,n,n[27],Is);let i=[n[8],n[13]],c={};for(let f=0;f<i.length;f+=1)c=$t(c,i[f]);return{c(){e=v("div"),a&&a.c(),this.h()},l(f){e=b(f,"DIV",{});var d=w(e);a&&a.l(d),d.forEach(h),this.h()},h(){Wt(e,c)},m(f,d){z(f,e,d),a&&a.m(e,null),n[29](e),l=!0,s||(o=[Cl(n[8].action(e)),fe(e,"m-focusout",n[12]),fe(e,"m-keydown",n[12]),fe(e,"m-pointermove",n[12])],s=!0)},p(f,d){n=f,a&&a.p&&(!l||d[0]&134217984)&&Ot(a,r,n,n[27],l?At(r,n[27],d,io):Ut(n[27]),Is),Wt(e,c=Ml(i,[d[0]&256&&n[8],d[0]&8192&&n[13]]))},i(f){l||(N(a,f),f&&kl(()=>{l&&(t||(t=Ql(e,n[1],n[2],!0)),t.run(1))}),l=!0)},o(f){O(a,f),f&&(t||(t=Ql(e,n[1],n[2],!1)),t.run(0)),l=!1},d(f){f&&h(e),a&&a.d(f),n[29](null),f&&t&&t.end(),s=!1,Pt(o)}}}function po(n){let e;const t=n[28].default,l=zt(t,n,n[27],Ds);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,o){l&&l.m(s,o),e=!0},p(s,o){l&&l.p&&(!e||o[0]&134217984)&&Ot(l,t,s,s[27],e?At(t,s[27],o,co):Ut(s[27]),Ds)},i(s){e||(N(l,s),e=!0)},o(s){O(l,s),e=!1},d(s){l&&l.d(s)}}}function _o(n){let e,t,l,s;const o=[po,go,mo,ho,uo,fo],r=[];function a(i,c){return i[7]&&i[9]?0:i[1]&&i[9]?1:i[3]&&i[5]&&i[9]?2:i[3]&&i[9]?3:i[5]&&i[9]?4:i[9]?5:-1}return~(e=a(n))&&(t=r[e]=o[e](n)),{c(){t&&t.c(),l=Pe()},l(i){t&&t.l(i),l=Pe()},m(i,c){~e&&r[e].m(i,c),z(i,l,c),s=!0},p(i,c){let f=e;e=a(i),e===f?~e&&r[e].p(i,c):(t&&(Re(),O(r[f],1,1,()=>{r[f]=null}),Fe()),~e?(t=r[e],t?t.p(i,c):(t=r[e]=o[e](i),t.c()),N(t,1),t.m(l.parentNode,l)):t=null)},i(i){s||(N(t),s=!0)},o(i){O(t),s=!1},d(i){i&&h(l),~e&&r[e].d(i)}}}function vo(n,e,t){let l;const s=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","side","align","sideOffset","alignOffset","collisionPadding","avoidCollisions","collisionBoundary","sameWidth","fitViewport","strategy","overlap","el"];let o=Gl(e,s),r,a,{$$slots:i={},$$scope:c}=e,{transition:f=void 0}=e,{transitionConfig:d=void 0}=e,{inTransition:g=void 0}=e,{inTransitionConfig:p=void 0}=e,{outTransition:y=void 0}=e,{outTransitionConfig:S=void 0}=e,{asChild:k=!1}=e,{id:D=void 0}=e,{side:I="right"}=e,{align:B="start"}=e,{sideOffset:E=0}=e,{alignOffset:L=0}=e,{collisionPadding:T=8}=e,{avoidCollisions:U=!0}=e,{collisionBoundary:V=void 0}=e,{sameWidth:_=!1}=e,{fitViewport:H=!1}=e,{strategy:W="absolute"}=e,{overlap:R=!1}=e,{el:A=void 0}=e;const{elements:{subMenu:j},states:{subOpen:G},ids:x,getAttrs:F}=Nr();me(n,j,J=>t(26,r=J)),me(n,G,J=>t(9,a=J));const ae=Rn(),be=F("sub-content");function Ie(J){_e[J?"unshift":"push"](()=>{A=J,t(0,A)})}function X(J){_e[J?"unshift":"push"](()=>{A=J,t(0,A)})}function re(J){_e[J?"unshift":"push"](()=>{A=J,t(0,A)})}function tt(J){_e[J?"unshift":"push"](()=>{A=J,t(0,A)})}function Ue(J){_e[J?"unshift":"push"](()=>{A=J,t(0,A)})}return n.$$set=J=>{e=$t($t({},e),Hn(J)),t(13,o=Gl(e,s)),"transition"in J&&t(1,f=J.transition),"transitionConfig"in J&&t(2,d=J.transitionConfig),"inTransition"in J&&t(3,g=J.inTransition),"inTransitionConfig"in J&&t(4,p=J.inTransitionConfig),"outTransition"in J&&t(5,y=J.outTransition),"outTransitionConfig"in J&&t(6,S=J.outTransitionConfig),"asChild"in J&&t(7,k=J.asChild),"id"in J&&t(14,D=J.id),"side"in J&&t(15,I=J.side),"align"in J&&t(16,B=J.align),"sideOffset"in J&&t(17,E=J.sideOffset),"alignOffset"in J&&t(18,L=J.alignOffset),"collisionPadding"in J&&t(19,T=J.collisionPadding),"avoidCollisions"in J&&t(20,U=J.avoidCollisions),"collisionBoundary"in J&&t(21,V=J.collisionBoundary),"sameWidth"in J&&t(22,_=J.sameWidth),"fitViewport"in J&&t(23,H=J.fitViewport),"strategy"in J&&t(24,W=J.strategy),"overlap"in J&&t(25,R=J.overlap),"el"in J&&t(0,A=J.el),"$$scope"in J&&t(27,c=J.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&16384&&D&&x.menu.set(D),n.$$.dirty[0]&67108864&&t(8,l=r),n.$$.dirty[0]&256&&Object.assign(l,be),n.$$.dirty[0]&67076096&&zr({side:I,align:B,sideOffset:E,alignOffset:L,collisionPadding:T,avoidCollisions:U,collisionBoundary:V,sameWidth:_,fitViewport:H,strategy:W,overlap:R})},[A,f,d,g,p,y,S,k,l,a,j,G,ae,o,D,I,B,E,L,T,U,V,_,H,W,R,r,c,i,Ie,X,re,tt,Ue]}class bo extends Je{constructor(e){super(),Ge(this,e,vo,_o,xe,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:14,side:15,align:16,sideOffset:17,alignOffset:18,collisionPadding:19,avoidCollisions:20,collisionBoundary:21,sameWidth:22,fitViewport:23,strategy:24,overlap:25,el:0},null,[-1,-1])}}const wo=n=>({builder:n&4}),Ss=n=>({builder:n[2]}),ko=n=>({builder:n&4}),Cs=n=>({builder:n[2]});function yo(n){let e,t,l,s;const o=n[13].default,r=zt(o,n,n[12],Ss);let a=[n[2],n[6]],i={};for(let c=0;c<a.length;c+=1)i=$t(i,a[c]);return{c(){e=v("div"),r&&r.c(),this.h()},l(c){e=b(c,"DIV",{});var f=w(e);r&&r.l(f),f.forEach(h),this.h()},h(){Wt(e,i)},m(c,f){z(c,e,f),r&&r.m(e,null),n[14](e),t=!0,l||(s=[Cl(n[2].action(e)),fe(e,"m-click",n[5]),fe(e,"m-focusin",n[5]),fe(e,"m-focusout",n[5]),fe(e,"m-keydown",n[5]),fe(e,"m-pointerleave",n[5]),fe(e,"m-pointermove",n[5])],l=!0)},p(c,f){r&&r.p&&(!t||f&4100)&&Ot(r,o,c,c[12],t?At(o,c[12],f,wo):Ut(c[12]),Ss),Wt(e,i=Ml(a,[f&4&&c[2],f&64&&c[6]]))},i(c){t||(N(r,c),t=!0)},o(c){O(r,c),t=!1},d(c){c&&h(e),r&&r.d(c),n[14](null),l=!1,Pt(s)}}}function Eo(n){let e;const t=n[13].default,l=zt(t,n,n[12],Cs);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,o){l&&l.m(s,o),e=!0},p(s,o){l&&l.p&&(!e||o&4100)&&Ot(l,t,s,s[12],e?At(t,s[12],o,ko):Ut(s[12]),Cs)},i(s){e||(N(l,s),e=!0)},o(s){O(l,s),e=!1},d(s){l&&l.d(s)}}}function Io(n){let e,t,l,s;const o=[Eo,yo],r=[];function a(i,c){return i[1]?0:1}return e=a(n),t=r[e]=o[e](n),{c(){t.c(),l=Pe()},l(i){t.l(i),l=Pe()},m(i,c){r[e].m(i,c),z(i,l,c),s=!0},p(i,[c]){let f=e;e=a(i),e===f?r[e].p(i,c):(Re(),O(r[f],1,1,()=>{r[f]=null}),Fe(),t=r[e],t?t.p(i,c):(t=r[e]=o[e](i),t.c()),N(t,1),t.m(l.parentNode,l))},i(i){s||(N(t),s=!0)},o(i){O(t),s=!1},d(i){i&&h(l),r[e].d(i)}}}function Do(n,e,t){let l,s;const o=["disabled","asChild","id","el"];let r=Gl(e,o),a,i,{$$slots:c={},$$scope:f}=e,{disabled:d=!1}=e,{asChild:g=!1}=e,{id:p=void 0}=e,{el:y=void 0}=e;const{elements:{subTrigger:S},ids:k,getAttrs:D,options:I}=Or();me(n,S,T=>t(11,i=T));const{disabled:B}=I;me(n,B,T=>t(10,a=T));const E=Rn();function L(T){_e[T?"unshift":"push"](()=>{y=T,t(0,y)})}return n.$$set=T=>{e=$t($t({},e),Hn(T)),t(6,r=Gl(e,o)),"disabled"in T&&t(7,d=T.disabled),"asChild"in T&&t(1,g=T.asChild),"id"in T&&t(8,p=T.id),"el"in T&&t(0,y=T.el),"$$scope"in T&&t(12,f=T.$$scope)},n.$$.update=()=>{n.$$.dirty&256&&p&&k.trigger.set(p),n.$$.dirty&2048&&t(2,l=i),n.$$.dirty&1152&&t(9,s={...D("sub-trigger"),...jr(d||a)}),n.$$.dirty&516&&Object.assign(l,s)},[y,g,l,S,B,E,r,d,p,s,a,i,f,c,L]}class So extends Je{constructor(e){super(),Ge(this,e,Do,Io,xe,{disabled:7,asChild:1,id:8,el:0})}}function Co(n){let e,t,l,s,o,r,a;return i(),{feed:c,reset:i};function i(){e=!0,t="",l=0,s=-1,o=void 0,r=void 0,a=""}function c(d){t=t?t+d:d,e&&To(t)&&(t=t.slice(Wn.length)),e=!1;const g=t.length;let p=0,y=!1;for(;p<g;){y&&(t[p]===`
`&&++p,y=!1);let S=-1,k=s,D;for(let I=l;S<0&&I<g;++I)D=t[I],D===":"&&k<0?k=I-p:D==="\r"?(y=!0,S=I-p):D===`
`&&(S=I-p);if(S<0){l=g-p,s=k;break}else l=0,s=-1;f(t,p,k,S),p+=S+1}p===g?t="":p>0&&(t=t.slice(p))}function f(d,g,p,y){if(y===0){a.length>0&&(n({type:"event",id:o,event:r||void 0,data:a.slice(0,-1)}),a="",o=void 0),r=void 0;return}const S=p<0,k=d.slice(g,g+(S?y:p));let D=0;S?D=y:d[g+p+1]===" "?D=p+2:D=p+1;const I=g+D,B=y-D,E=d.slice(I,I+B).toString();if(k==="data")a+=E?"".concat(E,`
`):`
`;else if(k==="event")r=E;else if(k==="id"&&!E.includes("\0"))o=E;else if(k==="retry"){const L=parseInt(E,10);Number.isNaN(L)||n({type:"reconnect-interval",value:L})}}}const Wn=[239,187,191];function To(n){return Wn.every((e,t)=>n.charCodeAt(t)===e)}class Vo extends TransformStream{constructor(){let e;super({start(t){e=Co(l=>{l.type==="event"&&t.enqueue(l)})},transform(t){e.feed(t)}})}}async function Ts(n,e){const t=n.pipeThrough(new TextDecoderStream).pipeThrough(new Vo).getReader();let l=Mo(t);return e&&(l=Ho(l)),l}async function*Mo(n){var e,t,l;for(;;){const{value:s,done:o}=await n.read();if(o){yield{done:!0,value:""};break}if(!s)continue;const r=s.data;if(r.startsWith("[DONE]")){yield{done:!0,value:""};break}try{const a=JSON.parse(r);if(console.log(a),a.error){yield{done:!0,value:"",error:a.error};break}if(a.citations){yield{done:!1,value:"",citations:a.citations};continue}yield{done:!1,value:((l=(t=(e=a.choices)==null?void 0:e[0])==null?void 0:t.delta)==null?void 0:l.content)??"",usage:a.usage}}catch(a){console.error("Error extracting delta from SSE event:",a)}}}async function*Ho(n){for await(const e of n){if(e.done){yield e;return}if(e.citations){yield e;continue}let t=e.value;if(t.length<5){yield{done:!1,value:t};continue}for(;t!="";){const l=Math.min(Math.floor(Math.random()*3)+1,t.length);yield{done:!1,value:t.slice(0,l)},(document==null?void 0:document.visibilityState)!=="hidden"&&await Bo(5),t=t.slice(l)}}}const Bo=n=>new Promise(e=>setTimeout(e,n));function Vs(n){let e,t=n[2]&&Ms(n);return{c(){t&&t.c(),e=Pe()},l(l){t&&t.l(l),e=Pe()},m(l,s){t&&t.m(l,s),z(l,e,s)},p(l,s){l[2]?t?(t.p(l,s),s&4&&N(t,1)):(t=Ms(l),t.c(),N(t,1),t.m(e.parentNode,e)):t&&(Re(),O(t,1,1,()=>{t=null}),Fe())},d(l){l&&h(e),t&&t.d(l)}}}function Ms(n){let e,t,l,s,o=n[1].type+"",r,a,i,c,f,d=n[1].content+"",g,p,y,S,k,D,I=n[1].url&&Hs(),B=n[1].url&&Bs(),E=n[1].dismissible&&Ls(n);return{c(){e=v("div"),t=v("div"),l=v("div"),s=v("div"),r=ge(o),i=Z(),I&&I.c(),c=Z(),f=v("div"),g=ge(d),p=Z(),B&&B.c(),y=Z(),S=v("div"),E&&E.c(),this.h()},l(L){e=b(L,"DIV",{class:!0});var T=w(e);t=b(T,"DIV",{class:!0});var U=w(t);l=b(U,"DIV",{class:!0});var V=w(l);s=b(V,"DIV",{class:!0});var _=w(s);r=pe(_,o),_.forEach(h),i=q(V),I&&I.l(V),V.forEach(h),c=q(U),f=b(U,"DIV",{class:!0});var H=w(f);g=pe(H,d),H.forEach(h),U.forEach(h),p=q(T),B&&B.l(T),y=q(T),S=b(T,"DIV",{class:!0});var W=w(S);E&&E.l(W),W.forEach(h),T.forEach(h),this.h()},h(){u(s,"class",a="text-xs font-bold "+(n[3][n[1].type]??n[3].info)+" w-fit px-2 rounded uppercase line-clamp-1 mr-0.5"),u(l,"class","flex justify-between self-start"),u(f,"class","flex-1 text-xs text-gray-700 dark:text-white"),u(t,"class","flex flex-col md:flex-row md:items-center flex-1 text-sm w-fit gap-1.5"),u(S,"class","flex self-start"),u(e,"class","top-0 left-0 right-0 p-2 mx-4 px-3 flex justify-center items-center relative rounded-xl border border-gray-50 dark:border-gray-850 text-gray-800 dark:text-gary-100 bg-white dark:bg-gray-900 backdrop-blur-xl z-30")},m(L,T){z(L,e,T),m(e,t),m(t,l),m(l,s),m(s,r),m(l,i),I&&I.m(l,null),m(t,c),m(t,f),m(f,g),m(e,p),B&&B.m(e,null),m(e,y),m(e,S),E&&E.m(S,null),D=!0},p(L,T){(!D||T&2)&&o!==(o=L[1].type+"")&&ye(r,o),(!D||T&2&&a!==(a="text-xs font-bold "+(L[3][L[1].type]??L[3].info)+" w-fit px-2 rounded uppercase line-clamp-1 mr-0.5"))&&u(s,"class",a),L[1].url?I||(I=Hs(),I.c(),I.m(l,null)):I&&(I.d(1),I=null),(!D||T&2)&&d!==(d=L[1].content+"")&&ye(g,d),L[1].url?B||(B=Bs(),B.c(),B.m(e,y)):B&&(B.d(1),B=null),L[1].dismissible?E?E.p(L,T):(E=Ls(L),E.c(),E.m(S,null)):E&&(E.d(1),E=null)},i(L){D||(L&&kl(()=>{D&&(k||(k=Ql(e,vs,{delay:100,duration:300},!0)),k.run(1))}),D=!0)},o(L){L&&(k||(k=Ql(e,vs,{delay:100,duration:300},!1)),k.run(0)),D=!1},d(L){L&&h(e),I&&I.d(),B&&B.d(),E&&E.d(),L&&k&&k.end()}}}function Hs(n){let e,t='<a class="text-gray-700 dark:text-white text-xs font-semibold underline" href="/assets/files/whitepaper.pdf" target="_blank">Learn More</a> <div class="ml-1 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg></div>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(l){e=b(l,"DIV",{class:!0,"data-svelte-h":!0}),qe(e)!=="svelte-o2pz5m"&&(e.innerHTML=t),this.h()},h(){u(e,"class","flex md:hidden group w-fit md:items-center")},m(l,s){z(l,e,s)},d(l){l&&h(e)}}}function Bs(n){let e,t='<a class="text-gray-700 dark:text-white text-xs font-semibold underline" href="/" target="_blank">Learn More</a> <div class="ml-1 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg></div>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(l){e=b(l,"DIV",{class:!0,"data-svelte-h":!0}),qe(e)!=="svelte-1wr7se3"&&(e.innerHTML=t),this.h()},h(){u(e,"class","hidden md:flex group w-fit md:items-center")},m(l,s){z(l,e,s)},d(l){l&&h(e)}}}function Ls(n){let e,t="Ã—",l,s;return{c(){e=v("button"),e.textContent=t,this.h()},l(o){e=b(o,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(e)!=="svelte-o8kh4p"&&(e.textContent=t),this.h()},h(){u(e,"class","-mt-1 -mb-2 -translate-y-[1px] ml-1.5 mr-1 text-gray-400 dark:hover:text-white")},m(o,r){z(o,e,r),l||(s=fe(e,"click",n[5]),l=!0)},p:Se,d(o){o&&h(e),l=!1,s()}}}function Lo(n){let e,t=!n[0]&&Vs(n);return{c(){t&&t.c(),e=Pe()},l(l){t&&t.l(l),e=Pe()},m(l,s){t&&t.m(l,s),z(l,e,s)},p(l,[s]){l[0]?t&&(t.d(1),t=null):t?t.p(l,s):(t=Vs(l),t.c(),t.m(e.parentNode,e))},i:Se,o:Se,d(l){l&&h(e),t&&t.d(l)}}}function No(n,e,t){const l=el();let{banner:s={id:"",type:"info",title:"",content:"",url:"",dismissable:!0,timestamp:Math.floor(Date.now()/1e3)}}=e,{dismissed:o=!1}=e,r=!1;const a={info:"bg-blue-500/20 text-blue-700 dark:text-blue-200 ",success:"bg-green-500/20 text-green-700 dark:text-green-200",warning:"bg-yellow-500/20 text-yellow-700 dark:text-yellow-200",error:"bg-red-500/20 text-red-700 dark:text-red-200"},i=f=>{t(0,o=!0),l("dismiss",f)};Tl(()=>{t(2,r=!0)});const c=()=>{i(s.id)};return n.$$set=f=>{"banner"in f&&t(1,s=f.banner),"dismissed"in f&&t(0,o=f.dismissed)},[o,s,r,a,i,c]}class zo extends Je{constructor(e){super(),Ge(this,e,No,Lo,xe,{banner:1,dismissed:0})}}function Oo(n){let e,t,l;return{c(){e=Ne("svg"),t=Ne("path"),l=Ne("path"),this.h()},l(s){e=ze(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var o=w(e);t=ze(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),w(t).forEach(h),l=ze(o,"path",{d:!0}),w(l).forEach(h),o.forEach(h),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M5.625 1.5H9a3.75 3.75 0 0 1 3.75 3.75v1.875c0 1.036.84 1.875 1.875 1.875H16.5a3.75 3.75 0 0 1 3.75 3.75v7.875c0 1.035-.84 1.875-1.875 1.875H5.625a1.875 1.875 0 0 1-1.875-1.875V3.375c0-1.036.84-1.875 1.875-1.875Zm6.905 9.97a.75.75 0 0 0-1.06 0l-3 3a.75.75 0 1 0 1.06 1.06l1.72-1.72V18a.75.75 0 0 0 1.5 0v-4.19l1.72 1.72a.75.75 0 1 0 1.06-1.06l-3-3Z"),u(t,"clip-rule","evenodd"),u(l,"d","M14.25 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 16.5 7.5h-1.875a.375.375 0 0 1-.375-.375V5.25Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class",n[0])},m(s,o){z(s,e,o),m(e,t),m(e,l)},p(s,[o]){o&1&&u(e,"class",s[0])},i:Se,o:Se,d(s){s&&h(e)}}}function Uo(n,e,t){let{className:l="size-4"}=e;return n.$$set=s=>{"className"in s&&t(0,l=s.className)},[l]}class Ao extends Je{constructor(e){super(),Ge(this,e,Uo,Oo,xe,{className:0})}}function Po(n){let e,t;return{c(){e=Ne("svg"),t=Ne("path"),this.h()},l(l){e=ze(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var s=w(e);t=ze(s,"path",{d:!0}),w(t).forEach(h),s.forEach(h),this.h()},h(){u(t,"d","M21.721 12.752a9.711 9.711 0 0 0-.945-5.003 12.754 12.754 0 0 1-4.339 2.708 18.991 18.991 0 0 1-.214 4.772 17.165 17.165 0 0 0 5.498-2.477ZM14.634 15.55a17.324 17.324 0 0 0 .332-4.647c-.952.227-1.945.347-2.966.347-1.021 0-2.014-.12-2.966-.347a17.515 17.515 0 0 0 .332 4.647 17.385 17.385 0 0 0 5.268 0ZM9.772 17.119a18.963 18.963 0 0 0 4.456 0A17.182 17.182 0 0 1 12 21.724a17.18 17.18 0 0 1-2.228-4.605ZM7.777 15.23a18.87 18.87 0 0 1-.214-4.774 12.753 12.753 0 0 1-4.34-2.708 9.711 9.711 0 0 0-.944 5.004 17.165 17.165 0 0 0 5.498 2.477ZM21.356 14.752a9.765 9.765 0 0 1-7.478 6.817 18.64 18.64 0 0 0 1.988-4.718 18.627 18.627 0 0 0 5.49-2.098ZM2.644 14.752c1.682.971 3.53 1.688 5.49 2.099a18.64 18.64 0 0 0 1.988 4.718 9.765 9.765 0 0 1-7.478-6.816ZM13.878 2.43a9.755 9.755 0 0 1 6.116 3.986 11.267 11.267 0 0 1-3.746 2.504 18.63 18.63 0 0 0-2.37-6.49ZM12 2.276a17.152 17.152 0 0 1 2.805 7.121c-.897.23-1.837.353-2.805.353-.968 0-1.908-.122-2.805-.353A17.151 17.151 0 0 1 12 2.276ZM10.122 2.43a18.629 18.629 0 0 0-2.37 6.49 11.266 11.266 0 0 1-3.746-2.504 9.754 9.754 0 0 1 6.116-3.985Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class",n[0])},m(l,s){z(l,e,s),m(e,t)},p(l,[s]){s&1&&u(e,"class",l[0])},i:Se,o:Se,d(l){l&&h(e)}}}function jo(n,e,t){let{className:l="size-4"}=e;return n.$$set=s=>{"className"in s&&t(0,l=s.className)},[l]}class Ro extends Je{constructor(e){super(),Ge(this,e,jo,Po,xe,{className:0})}}function Fo(n){let e,t;return{c(){e=Ne("svg"),t=Ne("path"),this.h()},l(l){e=ze(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var s=w(e);t=ze(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),w(t).forEach(h),s.forEach(h),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M12 6.75a5.25 5.25 0 0 1 6.775-5.025.75.75 0 0 1 .313 1.248l-3.32 3.319c.063.475.276.934.641 1.299.365.365.824.578 1.3.64l3.318-3.319a.75.75 0 0 1 1.248.313 5.25 5.25 0 0 1-5.472 6.756c-1.018-.086-1.87.1-2.309.634L7.344 21.3A3.298 3.298 0 1 1 2.7 16.657l8.684-7.151c.533-.44.72-1.291.634-2.309A5.342 5.342 0 0 1 12 6.75ZM4.117 19.125a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75h-.008a.75.75 0 0 1-.75-.75v-.008Z"),u(t,"clip-rule","evenodd"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class",n[0])},m(l,s){z(l,e,s),m(e,t)},p(l,[s]){s&1&&u(e,"class",l[0])},i:Se,o:Se,d(l){l&&h(e)}}}function Wo(n,e,t){let{className:l="size-4"}=e;return n.$$set=s=>{"className"in s&&t(0,l=s.className)},[l]}class Zo extends Je{constructor(e){super(),Ge(this,e,Wo,Fo,xe,{className:0})}}function Ns(n,e,t){const l=n.slice();return l[17]=e[t],l[18]=e,l[19]=t,l}function qo(n){let e;const t=n[9].default,l=zt(t,n,n[16],null);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,o){l&&l.m(s,o),e=!0},p(s,o){l&&l.p&&(!e||o&65536)&&Ot(l,t,s,s[16],e?At(t,s[16],o,null):Ut(s[16]),null)},i(s){e||(N(l,s),e=!0)},o(s){O(l,s),e=!1},d(s){l&&l.d(s)}}}function xo(n){let e,t;return e=new qt({props:{content:n[7].t("More"),$$slots:{default:[qo]},$$scope:{ctx:n}}}),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,s){le(e,l,s),t=!0},p(l,s){const o={};s&128&&(o.content=l[7].t("More")),s&65536&&(o.$$scope={dirty:s,ctx:l}),e.$set(o)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function zs(n){let e,t,l,s,o=it(Object.keys(n[1])),r=[];for(let i=0;i<o.length;i+=1)r[i]=Os(Ns(n,o,i));const a=i=>O(r[i],1,1,()=>{r[i]=null});return{c(){e=v("div");for(let i=0;i<r.length;i+=1)r[i].c();t=Z(),l=v("hr"),this.h()},l(i){e=b(i,"DIV",{class:!0});var c=w(e);for(let f=0;f<r.length;f+=1)r[f].l(c);c.forEach(h),t=q(i),l=b(i,"HR",{class:!0}),this.h()},h(){u(e,"class","max-h-28 overflow-y-auto scrollbar-hidden"),u(l,"class","border-gray-100 dark:border-gray-800 my-1")},m(i,c){z(i,e,c);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(e,null);z(i,t,c),z(i,l,c),s=!0},p(i,c){if(c&3){o=it(Object.keys(i[1]));let f;for(f=0;f<o.length;f+=1){const d=Ns(i,o,f);r[f]?(r[f].p(d,c),N(r[f],1)):(r[f]=Os(d),r[f].c(),N(r[f],1),r[f].m(e,null))}for(Re(),f=o.length;f<r.length;f+=1)a(f);Fe()}},i(i){if(!s){for(let c=0;c<o.length;c+=1)N(r[c]);s=!0}},o(i){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)O(r[c]);s=!1},d(i){i&&(h(e),h(t),h(l)),xt(r,i)}}}function Jo(n){let e,t=n[1][n[17]].name+"",l;return{c(){e=v("div"),l=ge(t),this.h()},l(s){e=b(s,"DIV",{class:!0});var o=w(e);l=pe(o,t),o.forEach(h),this.h()},h(){u(e,"class","line-clamp-1")},m(s,o){z(s,e,o),m(e,l)},p(s,o){o&2&&t!==(t=s[1][s[17]].name+"")&&ye(l,t)},d(s){s&&h(e)}}}function Os(n){var y;let e,t,l,s,o,r,a,i,c,f;l=new Zo({}),o=new qt({props:{content:((y=n[1][n[17]])==null?void 0:y.description)??"",className:"flex-1",$$slots:{default:[Jo]},$$scope:{ctx:n}}});function d(S){n[10](S,n[17])}function g(...S){return n[11](n[17],...S)}let p={};return n[1][n[17]].enabled!==void 0&&(p.state=n[1][n[17]].enabled),a=new jn({props:p}),_e.push(()=>He(a,"state",d)),a.$on("change",g),{c(){e=v("div"),t=v("div"),ee(l.$$.fragment),s=Z(),ee(o.$$.fragment),r=Z(),ee(a.$$.fragment),c=Z(),this.h()},l(S){e=b(S,"DIV",{class:!0});var k=w(e);t=b(k,"DIV",{class:!0});var D=w(t);te(l.$$.fragment,D),s=q(D),te(o.$$.fragment,D),D.forEach(h),r=q(k),te(a.$$.fragment,k),c=q(k),k.forEach(h),this.h()},h(){u(t,"class","flex-1 flex items-center gap-2"),u(e,"class","flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer rounded-xl")},m(S,k){z(S,e,k),m(e,t),le(l,t,null),m(t,s),le(o,t,null),m(e,r),le(a,e,null),m(e,c),f=!0},p(S,k){var B;n=S;const D={};k&2&&(D.content=((B=n[1][n[17]])==null?void 0:B.description)??""),k&65538&&(D.$$scope={dirty:k,ctx:n}),o.$set(D);const I={};!i&&k&2&&(i=!0,I.state=n[1][n[17]].enabled,Me(()=>i=!1)),a.$set(I)},i(S){f||(N(l.$$.fragment,S),N(o.$$.fragment,S),N(a.$$.fragment,S),f=!0)},o(S){O(l.$$.fragment,S),O(o.$$.fragment,S),O(a.$$.fragment,S),f=!1},d(S){S&&h(e),se(l),se(o),se(a)}}}function Us(n){let e,t,l,s,o,r=n[7].t("Web Search")+"",a,i,c,f,d,g,p;l=new Ro({});function y(k){n[12](k)}let S={};return n[2]!==void 0&&(S.state=n[2]),c=new jn({props:S}),_e.push(()=>He(c,"state",y)),{c(){e=v("div"),t=v("div"),ee(l.$$.fragment),s=Z(),o=v("div"),a=ge(r),i=Z(),ee(c.$$.fragment),d=Z(),g=v("hr"),this.h()},l(k){e=b(k,"DIV",{class:!0});var D=w(e);t=b(D,"DIV",{class:!0});var I=w(t);te(l.$$.fragment,I),s=q(I),o=b(I,"DIV",{class:!0});var B=w(o);a=pe(B,r),B.forEach(h),I.forEach(h),i=q(D),te(c.$$.fragment,D),D.forEach(h),d=q(k),g=b(k,"HR",{class:!0}),this.h()},h(){u(o,"class","line-clamp-1"),u(t,"class","flex-1 flex items-center gap-2"),u(e,"class","flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer rounded-xl"),u(g,"class","border-gray-100 dark:border-gray-800 my-1")},m(k,D){z(k,e,D),m(e,t),le(l,t,null),m(t,s),m(t,o),m(o,a),m(e,i),le(c,e,null),z(k,d,D),z(k,g,D),p=!0},p(k,D){(!p||D&128)&&r!==(r=k[7].t("Web Search")+"")&&ye(a,r);const I={};!f&&D&4&&(f=!0,I.state=k[2],Me(()=>f=!1)),c.$set(I)},i(k){p||(N(l.$$.fragment,k),N(c.$$.fragment,k),p=!0)},o(k){O(l.$$.fragment,k),O(c.$$.fragment,k),p=!1},d(k){k&&(h(e),h(d),h(g)),se(l),se(c)}}}function Go(n){let e,t,l,s=n[7].t("Upload Files")+"",o,r;return e=new Ao({}),{c(){ee(e.$$.fragment),t=Z(),l=v("div"),o=ge(s),this.h()},l(a){te(e.$$.fragment,a),t=q(a),l=b(a,"DIV",{class:!0});var i=w(l);o=pe(i,s),i.forEach(h),this.h()},h(){u(l,"class","line-clamp-1")},m(a,i){le(e,a,i),z(a,t,i),z(a,l,i),m(l,o),r=!0},p(a,i){(!r||i&128)&&s!==(s=a[7].t("Upload Files")+"")&&ye(o,s)},i(a){r||(N(e.$$.fragment,a),r=!0)},o(a){O(e.$$.fragment,a),r=!1},d(a){a&&(h(t),h(l)),se(e,a)}}}function Qo(n){var i,c;let e=Object.keys(n[1]).length>0,t,l,s,o,r=e&&zs(n),a=((c=(i=n[6])==null?void 0:i.features)==null?void 0:c.enable_web_search)&&Us(n);return s=new ml({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl",$$slots:{default:[Go]},$$scope:{ctx:n}}}),s.$on("click",n[13]),{c(){r&&r.c(),t=Z(),a&&a.c(),l=Z(),ee(s.$$.fragment)},l(f){r&&r.l(f),t=q(f),a&&a.l(f),l=q(f),te(s.$$.fragment,f)},m(f,d){r&&r.m(f,d),z(f,t,d),a&&a.m(f,d),z(f,l,d),le(s,f,d),o=!0},p(f,d){var p,y;d&2&&(e=Object.keys(f[1]).length>0),e?r?(r.p(f,d),d&2&&N(r,1)):(r=zs(f),r.c(),N(r,1),r.m(t.parentNode,t)):r&&(Re(),O(r,1,1,()=>{r=null}),Fe()),(y=(p=f[6])==null?void 0:p.features)!=null&&y.enable_web_search?a?(a.p(f,d),d&64&&N(a,1)):(a=Us(f),a.c(),N(a,1),a.m(l.parentNode,l)):a&&(Re(),O(a,1,1,()=>{a=null}),Fe());const g={};d&65664&&(g.$$scope={dirty:d,ctx:f}),s.$set(g)},i(f){o||(N(r),N(a),N(s.$$.fragment,f),o=!0)},o(f){O(r),O(a),O(s.$$.fragment,f),o=!1},d(f){f&&(h(t),h(l)),r&&r.d(f),a&&a.d(f),se(s,f)}}}function Ko(n){let e,t,l;return t=new Xl({props:{class:"w-full max-w-[200px] rounded-xl px-1 py-1  border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow",sideOffset:15,alignOffset:-8,side:"top",align:"start",transition:Pl,$$slots:{default:[Qo]},$$scope:{ctx:n}}}),{c(){e=v("div"),ee(t.$$.fragment),this.h()},l(s){e=b(s,"DIV",{slot:!0});var o=w(e);te(t.$$.fragment,o),o.forEach(h),this.h()},h(){u(e,"slot","content")},m(s,o){z(s,e,o),le(t,e,null),l=!0},p(s,o){const r={};o&65743&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(s){l||(N(t.$$.fragment,s),l=!0)},o(s){O(t.$$.fragment,s),l=!1},d(s){s&&h(e),se(t)}}}function Yo(n){let e,t,l;function s(r){n[14](r)}let o={$$slots:{content:[Ko],default:[xo]},$$scope:{ctx:n}};return n[5]!==void 0&&(o.show=n[5]),e=new Yl({props:o}),_e.push(()=>He(e,"show",s)),e.$on("change",n[15]),{c(){ee(e.$$.fragment)},l(r){te(e.$$.fragment,r)},m(r,a){le(e,r,a),l=!0},p(r,[a]){const i={};a&65743&&(i.$$scope={dirty:a,ctx:r}),!t&&a&32&&(t=!0,i.show=r[5],Me(()=>t=!1)),e.$set(i)},i(r){l||(N(e.$$.fragment,r),l=!0)},o(r){O(e.$$.fragment,r),l=!1},d(r){se(e,r)}}}function Xo(n,e,t){let l,s;me(n,Vl,E=>t(6,l=E));let{$$slots:o={},$$scope:r}=e;const a=bt("i18n");me(n,a,E=>t(7,s=E));let{uploadFilesHandler:i}=e,{selectedToolIds:c=[]}=e,{webSearchEnabled:f}=e,{tools:d={}}=e,{onClose:g}=e,p=!1;function y(E,L){n.$$.not_equal(d[L].enabled,E)&&(d[L].enabled=E,t(1,d),t(0,c))}const S=(E,L)=>{t(0,c=L.detail?[...c,E]:c.filter(T=>T!==E))};function k(E){f=E,t(2,f)}const D=()=>{i()};function I(E){p=E,t(5,p)}const B=E=>{E.detail===!1&&g()};return n.$$set=E=>{"uploadFilesHandler"in E&&t(3,i=E.uploadFilesHandler),"selectedToolIds"in E&&t(0,c=E.selectedToolIds),"webSearchEnabled"in E&&t(2,f=E.webSearchEnabled),"tools"in E&&t(1,d=E.tools),"onClose"in E&&t(4,g=E.onClose),"$$scope"in E&&t(16,r=E.$$scope)},n.$$.update=()=>{n.$$.dirty&3&&t(1,d=Object.fromEntries(Object.keys(d).map(E=>[E,{...d[E],enabled:c.includes(E)}])))},[c,d,f,i,g,p,l,s,a,o,y,S,k,D,I,B,r]}class $o extends Je{constructor(e){super(),Ge(this,e,Xo,Yo,xe,{uploadFilesHandler:3,selectedToolIds:0,webSearchEnabled:2,tools:1,onClose:4})}}function ea(n){let e,t;return{c(){e=Ne("svg"),t=Ne("path"),this.h()},l(l){e=ze(l,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=w(e);t=ze(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),w(t).forEach(h),s.forEach(h),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M12 5a7 7 0 0 0-7 7v1.17c.313-.11.65-.17 1-.17h2a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H6a3 3 0 0 1-3-3v-6a9 9 0 0 1 18 0v6a3 3 0 0 1-3 3h-2a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h2c.35 0 .687.06 1 .17V12a7 7 0 0 0-7-7Z"),u(t,"clip-rule","evenodd"),u(e,"aria-hidden","true"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","currentColor"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width",n[1]),u(e,"stroke","currentColor"),u(e,"class",n[0])},m(l,s){z(l,e,s),m(e,t)},p(l,[s]){s&2&&u(e,"stroke-width",l[1]),s&1&&u(e,"class",l[0])},i:Se,o:Se,d(l){l&&h(e)}}}function ta(n,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:s="0"}=e;return n.$$set=o=>{"className"in o&&t(0,l=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[l,s]}class la extends Je{constructor(e){super(),Ge(this,e,ta,ea,xe,{className:0,strokeWidth:1})}}function As(n,e,t){const l=n.slice();return l[29]=e[t],l}function Ps(n){let e,t;return{c(){e=v("div"),this.h()},l(l){e=b(l,"DIV",{class:!0,style:!0}),w(e).forEach(h),this.h()},h(){u(e,"class",t="w-[2px] "+(n[0]?" bg-gray-500 dark:bg-gray-400   ":"bg-indigo-500 dark:bg-indigo-400  ")+" inline-block h-full"),Mt(e,"height",Math.min(100,Math.max(14,n[29]*100))+"%")},m(l,s){z(l,e,s)},p(l,s){s[0]&1&&t!==(t="w-[2px] "+(l[0]?" bg-gray-500 dark:bg-gray-400   ":"bg-indigo-500 dark:bg-indigo-400  ")+" inline-block h-full")&&u(e,"class",t),s[0]&4&&Mt(e,"height",Math.min(100,Math.max(14,l[29]*100))+"%")},d(l){l&&h(e)}}}function sa(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5"></path></svg>',l,s;return{c(){e=v("button"),e.innerHTML=t,this.h()},l(o){e=b(o,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),qe(e)!=="svelte-1qzkal"&&(e.innerHTML=t),this.h()},h(){u(e,"type","button"),u(e,"class","p-1.5 bg-indigo-500 text-white dark:bg-indigo-500 dark:text-blue-950 rounded-full")},m(o,r){z(o,e,r),l||(s=fe(e,"click",n[10]),l=!0)},p:Se,d(o){o&&h(e),l=!1,s()}}}function na(n){let e,t=`<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><style>.spinner_OSmW {
							transform-origin: center;
							animation: spinner_T6mA 0.75s step-end infinite;
						}
						@keyframes spinner_T6mA {
							8.3% {
								transform: rotate(30deg);
							}
							16.6% {
								transform: rotate(60deg);
							}
							25% {
								transform: rotate(90deg);
							}
							33.3% {
								transform: rotate(120deg);
							}
							41.6% {
								transform: rotate(150deg);
							}
							50% {
								transform: rotate(180deg);
							}
							58.3% {
								transform: rotate(210deg);
							}
							66.6% {
								transform: rotate(240deg);
							}
							75% {
								transform: rotate(270deg);
							}
							83.3% {
								transform: rotate(300deg);
							}
							91.6% {
								transform: rotate(330deg);
							}
							100% {
								transform: rotate(360deg);
							}
						}
					</style><g class="spinner_OSmW"><rect x="11" y="1" width="2" height="5" opacity=".14"></rect><rect x="11" y="1" width="2" height="5" transform="rotate(30 12 12)" opacity=".29"></rect><rect x="11" y="1" width="2" height="5" transform="rotate(60 12 12)" opacity=".43"></rect><rect x="11" y="1" width="2" height="5" transform="rotate(90 12 12)" opacity=".57"></rect><rect x="11" y="1" width="2" height="5" transform="rotate(120 12 12)" opacity=".71"></rect><rect x="11" y="1" width="2" height="5" transform="rotate(150 12 12)" opacity=".86"></rect><rect x="11" y="1" width="2" height="5" transform="rotate(180 12 12)"></rect></g></svg>`;return{c(){e=v("div"),e.innerHTML=t,this.h()},l(l){e=b(l,"DIV",{class:!0,"data-svelte-h":!0}),qe(e)!=="svelte-otpw2s"&&(e.innerHTML=t),this.h()},h(){u(e,"class","text-gray-500 rounded-full cursor-not-allowed")},m(l,s){z(l,e,s)},p:Se,d(l){l&&h(e)}}}function ra(n){let e,t,l,s,o,r,a,i,c,f,d,g,p=n[5](n[1])+"",y,S,k,D,I,B,E,L=it(n[2].slice().reverse()),T=[];for(let H=0;H<L.length;H+=1)T[H]=Ps(As(n,L,H));function U(H,W){return H[0]?na:sa}let V=U(n),_=V(n);return{c(){e=v("div"),t=v("div"),l=v("button"),s=Ne("svg"),o=Ne("path"),a=Z(),i=v("div"),c=v("div");for(let H=0;H<T.length;H+=1)T[H].c();f=Z(),d=v("div"),g=v("div"),y=ge(p),k=Z(),D=v("div"),_.c(),this.h()},l(H){e=b(H,"DIV",{class:!0});var W=w(e);t=b(W,"DIV",{class:!0});var R=w(t);l=b(R,"BUTTON",{type:!0,class:!0});var A=w(l);s=ze(A,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var j=w(s);o=ze(j,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(o).forEach(h),j.forEach(h),A.forEach(h),R.forEach(h),a=q(W),i=b(W,"DIV",{class:!0,dir:!0});var G=w(i);c=b(G,"DIV",{class:!0});var x=w(c);for(let Ie=0;Ie<T.length;Ie+=1)T[Ie].l(x);x.forEach(h),G.forEach(h),f=q(W),d=b(W,"DIV",{class:!0});var F=w(d);g=b(F,"DIV",{class:!0});var ae=w(g);y=pe(ae,p),ae.forEach(h),F.forEach(h),k=q(W),D=b(W,"DIV",{class:!0});var be=w(D);_.l(be),be.forEach(h),W.forEach(h),this.h()},h(){u(o,"stroke-linecap","round"),u(o,"stroke-linejoin","round"),u(o,"d","M6 18 18 6M6 6l12 12"),u(s,"xmlns","http://www.w3.org/2000/svg"),u(s,"fill","none"),u(s,"viewBox","0 0 24 24"),u(s,"stroke-width","3"),u(s,"stroke","currentColor"),u(s,"class","size-4"),u(l,"type","button"),u(l,"class",r="p-1.5 "+(n[0]?" bg-gray-200 dark:bg-gray-700/50":"bg-indigo-400/20 text-indigo-600 dark:text-indigo-300 ")+" rounded-full"),u(t,"class","flex items-center mr-1"),u(c,"class","flex-1 flex items-center gap-0.5 h-6"),u(i,"class","flex flex-1 self-center items-center justify-between ml-2 mx-1 overflow-hidden h-6"),u(i,"dir","rtl"),u(g,"class",S="text-sm "+(n[0]?" text-gray-500  dark:text-gray-400  ":" text-indigo-400 ")+" font-medium flex-1 mx-auto text-center"),u(d,"class","mx-1.5 pr-1 flex justify-center items-center"),u(D,"class","flex items-center mr-1"),u(e,"class",I=(n[0]?" bg-gray-100/50 dark:bg-gray-850/50":"bg-indigo-300/10 dark:bg-indigo-500/10 ")+" rounded-full flex p-2.5")},m(H,W){z(H,e,W),m(e,t),m(t,l),m(l,s),m(s,o),m(e,a),m(e,i),m(i,c);for(let R=0;R<T.length;R+=1)T[R]&&T[R].m(c,null);m(e,f),m(e,d),m(d,g),m(g,y),m(e,k),m(e,D),_.m(D,null),B||(E=fe(l,"click",n[9]),B=!0)},p(H,W){if(W[0]&1&&r!==(r="p-1.5 "+(H[0]?" bg-gray-200 dark:bg-gray-700/50":"bg-indigo-400/20 text-indigo-600 dark:text-indigo-300 ")+" rounded-full")&&u(l,"class",r),W[0]&5){L=it(H[2].slice().reverse());let R;for(R=0;R<L.length;R+=1){const A=As(H,L,R);T[R]?T[R].p(A,W):(T[R]=Ps(A),T[R].c(),T[R].m(c,null))}for(;R<T.length;R+=1)T[R].d(1);T.length=L.length}W[0]&2&&p!==(p=H[5](H[1])+"")&&ye(y,p),W[0]&1&&S!==(S="text-sm "+(H[0]?" text-gray-500  dark:text-gray-400  ":" text-indigo-400 ")+" font-medium flex-1 mx-auto text-center")&&u(g,"class",S),V===(V=U(H))&&_?_.p(H,W):(_.d(1),_=V(H),_&&(_.c(),_.m(D,null))),W[0]&1&&I!==(I=(H[0]?" bg-gray-100/50 dark:bg-gray-850/50":"bg-indigo-300/10 dark:bg-indigo-500/10 ")+" rounded-full flex p-2.5")&&u(e,"class",I)},i:Se,o:Se,d(H){H&&h(e),xt(T,H),_.d(),B=!1,E()}}}const js=300;function oa(n,e,t){let l,s,o;me(n,Xt,G=>t(18,s=G)),me(n,Vl,G=>t(19,o=G));const r=bt("i18n");me(n,r,G=>t(17,l=G));const a=el();let{recording:i=!1}=e,c=!1,f=!1,d=0,g=null,p="";const y=()=>{g=setInterval(()=>{t(1,d++,d)},1e3)},S=()=>{clearInterval(g),t(1,d=0)},k=G=>{const x=Math.floor(G/60),F=G%60,ae=F<10?`0${F}`:F;return`${x}:${ae}`};let D,I,B=[];const E=-45;let L=Array(js).fill(0);const T=G=>{let x=0;for(let F=0;F<G.length;F++){const ae=(G[F]-128)/128;x+=ae*ae}return Math.sqrt(x/G.length)},U=G=>{G=G*10;const F=Math.pow(G,1.5);return Math.min(1,Math.max(.01,F))},V=G=>{const x=new AudioContext,F=x.createMediaStreamSource(G),ae=x.createAnalyser();ae.minDecibels=E,F.connect(ae);const be=ae.frequencyBinCount,Ie=new Uint8Array(be),X=new Uint8Array(ae.fftSize);(()=>{const tt=()=>{if(!(!i||c)){if(i&&!c){ae.getByteTimeDomainData(X),ae.getByteFrequencyData(Ie);const Ue=T(X);L.push(U(Ue)),L.length>=js&&L.shift(),t(2,L)}window.requestAnimationFrame(tt)}};window.requestAnimationFrame(tt)})()},_=async G=>{await Be();const x=ls(G,"recording.wav"),F=await ss(localStorage.token,x).catch(ae=>(De.error(ae),null));F&&(console.log(F.text),a("confirm",F.text))},H=async()=>{var x,F;y();const G=await navigator.mediaDevices.getUserMedia({audio:!0});if(I=new MediaRecorder(G),I.onstart=()=>{console.log("Recording started"),B=[],V(G)},I.ondataavailable=ae=>B.push(ae.data),I.onstop=async()=>{var ae,be;if(console.log("Recording stopped"),(((be=(ae=s==null?void 0:s.audio)==null?void 0:ae.stt)==null?void 0:be.engine)??"")==="web")B=[];else{if(f){const Ie=new Blob(B,{type:"audio/wav"});await _(Ie),f=!1,t(0,c=!1)}B=[],t(8,i=!1)}},I.start(),(o.audio.stt.engine==="web"||(((F=(x=s==null?void 0:s.audio)==null?void 0:x.stt)==null?void 0:F.engine)??"")==="web")&&("SpeechRecognition"in window||"webkitSpeechRecognition"in window)){D=new(window.SpeechRecognition||window.webkitSpeechRecognition),D.continuous=!0;const ae=2e3;let be;D.start(),D.onresult=async Ie=>{var re;clearTimeout(be),console.log(Ie);const X=Ie.results[Object.keys(Ie.results).length-1][0].transcript;p=`${p}${X}`,await Be(),(re=document.getElementById("chat-textarea"))==null||re.focus(),be=setTimeout(()=>{console.log("Speech recognition turned off due to inactivity."),D.stop()},ae)},D.onend=function(){console.log("recognition ended"),R(),a("confirm",p),f=!1,t(0,c=!1)},D.onerror=function(Ie){console.log(Ie),De.error(l.t("Speech recognition error: {{error}}",{error:Ie.error})),a("cancel"),W()}}},W=async()=>{i&&I&&await I.stop(),S(),B=[]},R=async()=>{t(0,c=!0),f=!0,i&&I&&await I.stop(),clearInterval(g)},A=async()=>{a("cancel"),W()},j=async()=>{await R()};return n.$$set=G=>{"recording"in G&&t(8,i=G.recording)},n.$$.update=()=>{n.$$.dirty[0]&256&&(i?H():W())},[c,d,L,r,a,k,W,R,i,A,j]}class aa extends Je{constructor(e){super(),Ge(this,e,oa,ra,xe,{recording:8},null,[-1,-1])}}function Rs(n){let e,t,l,s,o,r,a;return o=new Ur({}),{c(){e=v("div"),t=v("div"),l=v("div"),s=v("div"),ee(o.$$.fragment),this.h()},l(i){e=b(i,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var c=w(e);t=b(c,"DIV",{class:!0});var f=w(t);l=b(f,"DIV",{class:!0});var d=w(l);s=b(d,"DIV",{class:!0});var g=w(s);te(o.$$.fragment,g),g.forEach(h),d.forEach(h),f.forEach(h),c.forEach(h),this.h()},h(){u(s,"class","max-w-md"),u(l,"class","m-auto pt-64 flex flex-col justify-center"),u(t,"class","absolute w-full h-full backdrop-blur bg-gray-800/40 flex justify-center"),u(e,"class",r="fixed "+(n[2]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" fixed top-0 right-0 bottom-0 w-full h-full flex z-[9999] touch-none pointer-events-none"),u(e,"id","dropzone"),u(e,"role","region"),u(e,"aria-label","Drag and Drop Container")},m(i,c){z(i,e,c),m(e,t),m(t,l),m(l,s),le(o,s,null),n[3](e),a=!0},p(i,c){(!a||c&4&&r!==(r="fixed "+(i[2]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" fixed top-0 right-0 bottom-0 w-full h-full flex z-[9999] touch-none pointer-events-none"))&&u(e,"class",r)},i(i){a||(N(o.$$.fragment,i),a=!0)},o(i){O(o.$$.fragment,i),a=!1},d(i){i&&h(e),se(o),n[3](null)}}}function ia(n){let e,t,l=n[0]&&Rs(n);return{c(){l&&l.c(),e=Pe()},l(s){l&&l.l(s),e=Pe()},m(s,o){l&&l.m(s,o),z(s,e,o),t=!0},p(s,[o]){s[0]?l?(l.p(s,o),o&1&&N(l,1)):(l=Rs(s),l.c(),N(l,1),l.m(e.parentNode,e)):l&&(Re(),O(l,1,1,()=>{l=null}),Fe())},i(s){t||(N(l),t=!0)},o(s){O(l),t=!1},d(s){s&&h(e),l&&l.d(s)}}}function ca(n,e,t){let l;me(n,Kl,a=>t(2,l=a));let{show:s=!1}=e,o=null;function r(a){_e[a?"unshift":"push"](()=>{o=a,t(1,o)})}return n.$$set=a=>{"show"in a&&t(0,s=a.show)},n.$$.update=()=>{n.$$.dirty&3&&(s&&o?(document.body.appendChild(o),document.body.style.overflow="hidden"):o&&(document.body.removeChild(o),document.body.style.overflow="unset"))},[s,o,l,r]}class fa extends Je{constructor(e){super(),Ge(this,e,ca,ia,xe,{show:0})}}function Fs(n,e,t){const l=n.slice();return l[0]=e[t],l[14]=t,l}function Ws(n){let e,t,l,s='<div class="text-lg font-semibold mt-2">/</div>',o,r,a,i,c,f,d='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg>',g,p,y=n[3].t("Tip: Update multiple variable slots consecutively by pressing the tab key in the chat input after each replacement.")+"",S,k=it(n[2]),D=[];for(let I=0;I<k.length;I+=1)D[I]=Zs(Fs(n,k,I));return{c(){e=v("div"),t=v("div"),l=v("div"),l.innerHTML=s,o=Z(),r=v("div"),a=v("div");for(let I=0;I<D.length;I+=1)D[I].c();i=Z(),c=v("div"),f=v("div"),f.innerHTML=d,g=Z(),p=v("div"),S=ge(y),this.h()},l(I){e=b(I,"DIV",{id:!0,class:!0});var B=w(e);t=b(B,"DIV",{class:!0});var E=w(t);l=b(E,"DIV",{class:!0,"data-svelte-h":!0}),qe(l)!=="svelte-17yak1f"&&(l.innerHTML=s),o=q(E),r=b(E,"DIV",{class:!0});var L=w(r);a=b(L,"DIV",{class:!0});var T=w(a);for(let _=0;_<D.length;_+=1)D[_].l(T);T.forEach(h),i=q(L),c=b(L,"DIV",{class:!0});var U=w(c);f=b(U,"DIV",{"data-svelte-h":!0}),qe(f)!=="svelte-cdi12d"&&(f.innerHTML=d),g=q(U),p=b(U,"DIV",{class:!0});var V=w(p);S=pe(V,y),V.forEach(h),U.forEach(h),L.forEach(h),E.forEach(h),B.forEach(h),this.h()},h(){u(l,"class","bg-gray-50 dark:bg-gray-850 w-10 rounded-l-lg text-center"),u(a,"class","m-1 overflow-y-auto p-1 rounded-r-lg space-y-0.5 scrollbar-hidden"),u(p,"class","line-clamp-1"),u(c,"class","px-2 pb-1 text-xs text-gray-600 dark:text-gray-100 bg-white dark:bg-gray-900 rounded-br-xl flex items-center space-x-1"),u(r,"class","max-h-60 flex flex-col w-full rounded-r-lg bg-white dark:bg-gray-900 dark:text-gray-100"),u(t,"class","flex w-full dark:border dark:border-gray-850 rounded-lg"),u(e,"id","commands-container"),u(e,"class","pl-1 pr-12 mb-3 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(I,B){z(I,e,B),m(e,t),m(t,l),m(t,o),m(t,r),m(r,a);for(let E=0;E<D.length;E+=1)D[E]&&D[E].m(a,null);m(r,i),m(r,c),m(c,f),m(c,g),m(c,p),m(p,S)},p(I,B){if(B&38){k=it(I[2]);let E;for(E=0;E<k.length;E+=1){const L=Fs(I,k,E);D[E]?D[E].p(L,B):(D[E]=Zs(L),D[E].c(),D[E].m(a,null))}for(;E<D.length;E+=1)D[E].d(1);D.length=k.length}B&8&&y!==(y=I[3].t("Tip: Update multiple variable slots consecutively by pressing the tab key in the chat input after each replacement.")+"")&&ye(S,y)},d(I){I&&h(e),xt(D,I)}}}function Zs(n){let e,t,l=n[0].command+"",s,o,r,a=n[0].title+"",i,c,f,d,g;function p(){return n[11](n[0])}function y(){return n[12](n[14])}return{c(){e=v("button"),t=v("div"),s=ge(l),o=Z(),r=v("div"),i=ge(a),c=Z(),this.h()},l(S){e=b(S,"BUTTON",{class:!0,type:!0});var k=w(e);t=b(k,"DIV",{class:!0});var D=w(t);s=pe(D,l),D.forEach(h),o=q(k),r=b(k,"DIV",{class:!0});var I=w(r);i=pe(I,a),I.forEach(h),c=q(k),k.forEach(h),this.h()},h(){u(t,"class","font-medium text-black dark:text-gray-100"),u(r,"class","text-xs text-gray-600 dark:text-gray-100"),u(e,"class",f="px-3 py-1.5 rounded-xl w-full text-left "+(n[14]===n[1]?"  bg-gray-50 dark:bg-gray-850 selected-command-option-button":"")),u(e,"type","button")},m(S,k){z(S,e,k),m(e,t),m(t,s),m(e,o),m(e,r),m(r,i),m(e,c),d||(g=[fe(e,"click",p),fe(e,"mousemove",y),fe(e,"focus",da)],d=!0)},p(S,k){n=S,k&4&&l!==(l=n[0].command+"")&&ye(s,l),k&4&&a!==(a=n[0].title+"")&&ye(i,a),k&2&&f!==(f="px-3 py-1.5 rounded-xl w-full text-left "+(n[14]===n[1]?"  bg-gray-50 dark:bg-gray-850 selected-command-option-button":""))&&u(e,"class",f)},d(S){S&&h(e),d=!1,Pt(g)}}}function ua(n){let e,t=n[2].length>0&&Ws(n);return{c(){t&&t.c(),e=Pe()},l(l){t&&t.l(l),e=Pe()},m(l,s){t&&t.m(l,s),z(l,e,s)},p(l,[s]){l[2].length>0?t?t.p(l,s):(t=Ws(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Se,o:Se,d(l){l&&h(e),t&&t.d(l)}}}const da=()=>{};function ha(n,e,t){let l,s;me(n,Xn,k=>t(10,s=k));const o=bt("i18n");me(n,o,k=>t(3,l=k));let{files:r}=e,{prompt:a=""}=e,{command:i=""}=e,c=0,f=[];const d=()=>{t(1,c=Math.max(0,c-1))},g=()=>{t(1,c=Math.min(c+1,f.length-1))},p=async k=>{let D=k.content;if(k.content.includes("{{CLIPBOARD}}")){const E=await navigator.clipboard.readText().catch(U=>(De.error(l.t("Failed to read clipboard contents")),"{{CLIPBOARD}}"));console.log(E);const L=await navigator.clipboard.read();let T=null;for(const U of L)for(const V of U.types)if(V.startsWith("image/")){const _=await U.getType(V);T=URL.createObjectURL(_),console.log(`Image URL (${V}): ${T}`)}T&&t(6,r=[...r,{type:"image",url:T}]),D=k.content.replaceAll("{{CLIPBOARD}}",E)}t(0,a=D);const I=document.getElementById("chat-textarea");await Be(),I.style.height="",I.style.height=Math.min(I.scrollHeight,200)+"px",I==null||I.focus(),await Be();const B=Pn(a);if(B.length>0){const E=B.at(0);I.setSelectionRange(E==null?void 0:E.startIndex,E.endIndex+1)}},y=k=>{p(k)},S=k=>{t(1,c=k)};return n.$$set=k=>{"files"in k&&t(6,r=k.files),"prompt"in k&&t(0,a=k.prompt),"command"in k&&t(7,i=k.command)},n.$$.update=()=>{n.$$.dirty&1152&&t(2,f=s.filter(k=>k.command.toLowerCase().includes(i.toLowerCase())).sort((k,D)=>k.title.localeCompare(D.title))),n.$$.dirty&128&&i&&t(1,c=0)},[a,c,f,l,o,p,r,i,d,g,s,y,S]}class ma extends Je{constructor(e){super(),Ge(this,e,ha,ua,xe,{files:6,prompt:0,command:7,selectUp:8,selectDown:9})}get selectUp(){return this.$$.ctx[8]}get selectDown(){return this.$$.ctx[9]}}function qs(n,e,t){const l=n.slice();return l[21]=e[t],l[23]=t,l}function xs(n){let e,t,l,s='<div class="text-lg font-semibold mt-2">#</div>',o,r,a,i,c,f,d=it(n[3]),g=[];for(let k=0;k<d.length;k+=1)g[k]=Js(qs(n,d,k));function p(k,D){var I,B;if(D&1&&(c=null),D&1&&(f=null),c==null&&(c=!!k[0].split(" ").some(wa)),c)return va;if(f==null&&(f=!!((B=(I=k[0].split(" "))==null?void 0:I.at(0))!=null&&B.substring(1).startsWith("http"))),f)return _a}let y=p(n,-1),S=y&&y(n);return{c(){e=v("div"),t=v("div"),l=v("div"),l.innerHTML=s,o=Z(),r=v("div"),a=v("div");for(let k=0;k<g.length;k+=1)g[k].c();i=Z(),S&&S.c(),this.h()},l(k){e=b(k,"DIV",{id:!0,class:!0});var D=w(e);t=b(D,"DIV",{class:!0});var I=w(t);l=b(I,"DIV",{class:!0,"data-svelte-h":!0}),qe(l)!=="svelte-1bz58rh"&&(l.innerHTML=s),o=q(I),r=b(I,"DIV",{class:!0});var B=w(r);a=b(B,"DIV",{class:!0});var E=w(a);for(let L=0;L<g.length;L+=1)g[L].l(E);i=q(E),S&&S.l(E),E.forEach(h),B.forEach(h),I.forEach(h),D.forEach(h),this.h()},h(){u(l,"class","bg-gray-50 dark:bg-gray-850 w-10 rounded-l-lg text-center"),u(a,"class","m-1 overflow-y-auto p-1 rounded-r-xl space-y-0.5 scrollbar-hidden"),u(r,"class","max-h-60 flex flex-col w-full rounded-r-xl bg-white dark:bg-gray-900 dark:text-gray-100"),u(t,"class","flex w-full dark:border dark:border-gray-850 rounded-lg"),u(e,"id","commands-container"),u(e,"class","pl-1 pr-12 mb-3 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(k,D){z(k,e,D),m(e,t),m(t,l),m(t,o),m(t,r),m(r,a);for(let I=0;I<g.length;I+=1)g[I]&&g[I].m(a,null);m(a,i),S&&S.m(a,null)},p(k,D){if(D&46){d=it(k[3]);let I;for(I=0;I<d.length;I+=1){const B=qs(k,d,I);g[I]?g[I].p(B,D):(g[I]=Js(B),g[I].c(),g[I].m(a,i))}for(;I<g.length;I+=1)g[I].d(1);g.length=d.length}y===(y=p(k,D))&&S?S.p(k,D):(S&&S.d(1),S=y&&y(k),S&&(S.c(),S.m(a,null)))},d(k){k&&h(e),xt(g,k),S&&S.d()}}}function ga(n){let e,t,l=n[21].name+"",s,o,r=n[21].filename+"",a,i,c,f,d=n[21].title+"",g;return{c(){e=v("div"),t=ge("#"),s=ge(l),o=ge(" ("),a=ge(r),i=ge(")"),c=Z(),f=v("div"),g=ge(d),this.h()},l(p){e=b(p,"DIV",{class:!0});var y=w(e);t=pe(y,"#"),s=pe(y,l),o=pe(y," ("),a=pe(y,r),i=pe(y,")"),y.forEach(h),c=q(p),f=b(p,"DIV",{class:!0});var S=w(f);g=pe(S,d),S.forEach(h),this.h()},h(){u(e,"class","font-medium text-black dark:text-gray-100 line-clamp-1"),u(f,"class","text-xs text-gray-600 dark:text-gray-100 line-clamp-1")},m(p,y){z(p,e,y),m(e,t),m(e,s),m(e,o),m(e,a),m(e,i),z(p,c,y),z(p,f,y),m(f,g)},p(p,y){y&8&&l!==(l=p[21].name+"")&&ye(s,l),y&8&&r!==(r=p[21].filename+"")&&ye(a,r),y&8&&d!==(d=p[21].title+"")&&ye(g,d)},d(p){p&&(h(e),h(c),h(f))}}}function pa(n){var i;let e,t=(((i=n[21])==null?void 0:i.title)??`#${n[21].name}`)+"",l,s,o,r=n[1].t("Collection")+"",a;return{c(){e=v("div"),l=ge(t),s=Z(),o=v("div"),a=ge(r),this.h()},l(c){e=b(c,"DIV",{class:!0});var f=w(e);l=pe(f,t),f.forEach(h),s=q(c),o=b(c,"DIV",{class:!0});var d=w(o);a=pe(d,r),d.forEach(h),this.h()},h(){u(e,"class","font-medium text-black dark:text-gray-100 line-clamp-1"),u(o,"class","text-xs text-gray-600 dark:text-gray-100 line-clamp-1")},m(c,f){z(c,e,f),m(e,l),z(c,s,f),z(c,o,f),m(o,a)},p(c,f){var d;f&8&&t!==(t=(((d=c[21])==null?void 0:d.title)??`#${c[21].name}`)+"")&&ye(l,t),f&2&&r!==(r=c[1].t("Collection")+"")&&ye(a,r)},d(c){c&&(h(e),h(s),h(o))}}}function Js(n){let e,t,l,s;function o(f,d){return f[21].type==="collection"?pa:ga}let r=o(n),a=r(n);function i(){return n[15](n[21])}function c(){return n[16](n[23])}return{c(){e=v("button"),a.c(),this.h()},l(f){e=b(f,"BUTTON",{class:!0,type:!0});var d=w(e);a.l(d),d.forEach(h),this.h()},h(){u(e,"class",t="px-3 py-1.5 rounded-xl w-full text-left "+(n[23]===n[2]?" bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button":"")),u(e,"type","button")},m(f,d){z(f,e,d),a.m(e,null),l||(s=[fe(e,"click",i),fe(e,"mousemove",c),fe(e,"focus",ka)],l=!0)},p(f,d){n=f,r===(r=o(n))&&a?a.p(n,d):(a.d(1),a=r(n),a&&(a.c(),a.m(e,null))),d&4&&t!==(t="px-3 py-1.5 rounded-xl w-full text-left "+(n[23]===n[2]?" bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button":""))&&u(e,"class",t)},d(f){f&&h(e),a.d(),l=!1,Pt(s)}}}function _a(n){var d,g;let e,t,l=((g=(d=n[0].split(" "))==null?void 0:d.at(0))==null?void 0:g.substring(1))+"",s,o,r,a=n[1].t("Web")+"",i,c,f;return{c(){e=v("button"),t=v("div"),s=ge(l),o=Z(),r=v("div"),i=ge(a),this.h()},l(p){e=b(p,"BUTTON",{class:!0,type:!0});var y=w(e);t=b(y,"DIV",{class:!0});var S=w(t);s=pe(S,l),S.forEach(h),o=q(y),r=b(y,"DIV",{class:!0});var k=w(r);i=pe(k,a),k.forEach(h),y.forEach(h),this.h()},h(){u(t,"class","font-medium text-black dark:text-gray-100 line-clamp-1"),u(r,"class","text-xs text-gray-600 line-clamp-1"),u(e,"class","px-3 py-1.5 rounded-xl w-full text-left bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button"),u(e,"type","button")},m(p,y){z(p,e,y),m(e,t),m(t,s),m(e,o),m(e,r),m(r,i),c||(f=fe(e,"click",n[18]),c=!0)},p(p,y){var S,k;y&1&&l!==(l=((k=(S=p[0].split(" "))==null?void 0:S.at(0))==null?void 0:k.substring(1))+"")&&ye(s,l),y&2&&a!==(a=p[1].t("Web")+"")&&ye(i,a)},d(p){p&&h(e),c=!1,f()}}}function va(n){var d,g;let e,t,l=((g=(d=n[0].split(" "))==null?void 0:d.at(0))==null?void 0:g.substring(1))+"",s,o,r,a=n[1].t("Youtube")+"",i,c,f;return{c(){e=v("button"),t=v("div"),s=ge(l),o=Z(),r=v("div"),i=ge(a),this.h()},l(p){e=b(p,"BUTTON",{class:!0,type:!0});var y=w(e);t=b(y,"DIV",{class:!0});var S=w(t);s=pe(S,l),S.forEach(h),o=q(y),r=b(y,"DIV",{class:!0});var k=w(r);i=pe(k,a),k.forEach(h),y.forEach(h),this.h()},h(){u(t,"class","font-medium text-black dark:text-gray-100 line-clamp-1"),u(r,"class","text-xs text-gray-600 line-clamp-1"),u(e,"class","px-3 py-1.5 rounded-xl w-full text-left bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button"),u(e,"type","button")},m(p,y){z(p,e,y),m(e,t),m(t,s),m(e,o),m(e,r),m(r,i),c||(f=fe(e,"click",n[17]),c=!0)},p(p,y){var S,k;y&1&&l!==(l=((k=(S=p[0].split(" "))==null?void 0:S.at(0))==null?void 0:k.substring(1))+"")&&ye(s,l),y&2&&a!==(a=p[1].t("Youtube")+"")&&ye(i,a)},d(p){p&&h(e),c=!1,f()}}}function ba(n){var s,o;let e=n[3].length>0||((o=(s=n[0].split(" "))==null?void 0:s.at(0))==null?void 0:o.substring(1).startsWith("http")),t,l=e&&xs(n);return{c(){l&&l.c(),t=Pe()},l(r){l&&l.l(r),t=Pe()},m(r,a){l&&l.m(r,a),z(r,t,a)},p(r,[a]){var i,c;a&9&&(e=r[3].length>0||((c=(i=r[0].split(" "))==null?void 0:i.at(0))==null?void 0:c.substring(1).startsWith("http"))),e?l?l.p(r,a):(l=xs(r),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:Se,o:Se,d(r){r&&h(t),l&&l.d(r)}}}const wa=n=>n.substring(1).startsWith("https://www.youtube.com")||n.substring(1).startsWith("https://youtu.be"),ka=()=>{};function ya(n,e,t){let l,s,o;me(n,$n,V=>t(14,s=V));const r=bt("i18n");me(n,r,V=>t(1,o=V));let{prompt:a=""}=e,{command:i=""}=e;const c=el();let f=0,d=[],g=[],p=[];const y=(V,_)=>{var W,R;return V.name.toLowerCase().includes(((R=(W=_.toLowerCase().split(" "))==null?void 0:W.at(0))==null?void 0:R.substring(1))??"")},S=()=>{t(2,f=Math.max(0,f-1))},k=()=>{t(2,f=Math.min(f+1,d.length-1))},D=async V=>{c("select",V),t(0,a=Jl(a,i));const _=document.getElementById("chat-textarea");await Be(),_==null||_.focus(),await Be()},I=async V=>{c("url",V),t(0,a=Jl(a,i));const _=document.getElementById("chat-textarea");await Be(),_==null||_.focus(),await Be()},B=async V=>{c("youtube",V),t(0,a=Jl(a,i));const _=document.getElementById("chat-textarea");await Be(),_==null||_.focus(),await Be()},E=V=>{console.log(V),D(V)},L=V=>{t(2,f=V)},T=()=>{var _,H;const V=(H=(_=a.split(" "))==null?void 0:_.at(0))==null?void 0:H.substring(1);ds(V)?B(V):De.error(o.t("Oops! Looks like the URL is invalid. Please double-check and try again."))},U=()=>{var _,H;const V=(H=(_=a.split(" "))==null?void 0:_.at(0))==null?void 0:H.substring(1);ds(V)?I(V):De.error(o.t("Oops! Looks like the URL is invalid. Please double-check and try again."))};return n.$$set=V=>{"prompt"in V&&t(0,a=V.prompt),"command"in V&&t(8,i=V.command)},n.$$.update=()=>{n.$$.dirty&16386&&t(12,p=[...s.length>0?[{name:"All Documents",type:"collection",title:o.t("All Documents"),collection_names:s.map(V=>V.collection_name)}]:[],...s.reduce((V,_,H,W)=>{var R;return[...new Set([...V,...(((R=_==null?void 0:_.content)==null?void 0:R.tags)??[]).map(A=>A.name)])]},[]).map(V=>({name:V,type:"collection",collection_names:s.filter(_=>{var H;return(((H=_==null?void 0:_.content)==null?void 0:H.tags)??[]).map(W=>W.name).includes(V)}).map(_=>_.collection_name)}))]),n.$$.dirty&4352&&t(13,l=p.filter(V=>y(V,i)).sort((V,_)=>V.name.localeCompare(_.name))),n.$$.dirty&16640&&t(11,g=s.filter(V=>y(V,i)).sort((V,_)=>V.title.localeCompare(_.title))),n.$$.dirty&10240&&t(3,d=[...l,...g]),n.$$.dirty&8448&&i&&(t(2,f=0),console.log(l))},[a,o,f,d,r,D,I,B,i,S,k,g,p,l,s,E,L,T,U]}class Ea extends Je{constructor(e){super(),Ge(this,e,ya,ba,xe,{prompt:0,command:8,selectUp:9,selectDown:10})}get selectUp(){return this.$$.ctx[9]}get selectDown(){return this.$$.ctx[10]}}function Gs(n,e,t){const l=n.slice();return l[11]=e[t],l[13]=t,l}function Qs(n){let e,t,l,s='<div class="text-lg font-semibold mt-2">@</div>',o,r,a,i=it(n[1]),c=[];for(let f=0;f<i.length;f+=1)c[f]=Ks(Gs(n,i,f));return{c(){e=v("div"),t=v("div"),l=v("div"),l.innerHTML=s,o=Z(),r=v("div"),a=v("div");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=b(f,"DIV",{id:!0,class:!0});var d=w(e);t=b(d,"DIV",{class:!0});var g=w(t);l=b(g,"DIV",{class:!0,"data-svelte-h":!0}),qe(l)!=="svelte-6hrplu"&&(l.innerHTML=s),o=q(g),r=b(g,"DIV",{class:!0});var p=w(r);a=b(p,"DIV",{class:!0});var y=w(a);for(let S=0;S<c.length;S+=1)c[S].l(y);y.forEach(h),p.forEach(h),g.forEach(h),d.forEach(h),this.h()},h(){u(l,"class","bg-gray-50 dark:bg-gray-850 w-10 rounded-l-lg text-center"),u(a,"class","m-1 overflow-y-auto p-1 rounded-r-lg space-y-0.5 scrollbar-hidden"),u(r,"class","max-h-60 flex flex-col w-full rounded-r-lg bg-white dark:bg-gray-900 dark:text-gray-100"),u(t,"class","flex w-full dark:border dark:border-gray-850 rounded-lg"),u(e,"id","commands-container"),u(e,"class","pl-1 pr-12 mb-3 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(f,d){z(f,e,d),m(e,t),m(t,l),m(t,o),m(t,r),m(r,a);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(a,null)},p(f,d){if(d&7){i=it(f[1]);let g;for(g=0;g<i.length;g+=1){const p=Gs(f,i,g);c[g]?c[g].p(p,d):(c[g]=Ks(p),c[g].c(),c[g].m(a,null))}for(;g<c.length;g+=1)c[g].d(1);c.length=i.length}},d(f){f&&h(e),xt(c,f)}}}function Ks(n){let e,t,l,s,o,r,a=n[11].name+"",i,c,f,d,g;function p(){return n[7](n[11])}function y(){return n[8](n[13])}return{c(){e=v("button"),t=v("div"),l=v("img"),r=Z(),i=ge(a),c=Z(),this.h()},l(S){e=b(S,"BUTTON",{class:!0,type:!0});var k=w(e);t=b(k,"DIV",{class:!0});var D=w(t);l=b(D,"IMG",{src:!0,alt:!0,class:!0}),r=q(D),i=pe(D,a),D.forEach(h),c=q(k),k.forEach(h),this.h()},h(){var S,k,D,I;rl(l.src,s=((D=(k=(S=n[11])==null?void 0:S.info)==null?void 0:k.meta)==null?void 0:D.profile_image_url)??"/static/favicon.png")||u(l,"src",s),u(l,"alt",o=((I=n[11])==null?void 0:I.name)??n[11].id),u(l,"class","rounded-full size-6 items-center mr-2"),u(t,"class","flex font-medium text-black dark:text-gray-100 line-clamp-1"),u(e,"class",f="px-3 py-1.5 rounded-xl w-full text-left "+(n[13]===n[0]?"bg-gray-50 dark:bg-gray-850 selected-command-option-button":"")),u(e,"type","button")},m(S,k){z(S,e,k),m(e,t),m(t,l),m(t,r),m(t,i),m(e,c),d||(g=[fe(e,"click",p),fe(e,"mousemove",y),fe(e,"focus",Da)],d=!0)},p(S,k){var D,I,B,E;n=S,k&2&&!rl(l.src,s=((B=(I=(D=n[11])==null?void 0:D.info)==null?void 0:I.meta)==null?void 0:B.profile_image_url)??"/static/favicon.png")&&u(l,"src",s),k&2&&o!==(o=((E=n[11])==null?void 0:E.name)??n[11].id)&&u(l,"alt",o),k&2&&a!==(a=n[11].name+"")&&ye(i,a),k&1&&f!==(f="px-3 py-1.5 rounded-xl w-full text-left "+(n[13]===n[0]?"bg-gray-50 dark:bg-gray-850 selected-command-option-button":""))&&u(e,"class",f)},d(S){S&&h(e),d=!1,Pt(g)}}}function Ia(n){let e,t=n[1].length>0&&Qs(n);return{c(){t&&t.c(),e=Pe()},l(l){t&&t.l(l),e=Pe()},m(l,s){t&&t.m(l,s),z(l,e,s)},p(l,[s]){l[1].length>0?t?t.p(l,s):(t=Qs(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Se,o:Se,d(l){l&&h(e),t&&t.d(l)}}}const Da=()=>{};function Sa(n,e,t){let l;me(n,Ul,p=>t(6,l=p)),bt("i18n");const s=el();let{command:o=""}=e,r=0,a=[];const i=()=>{t(0,r=Math.max(0,r-1))},c=()=>{t(0,r=Math.min(r+1,a.length-1))},f=async p=>{t(3,o=""),s("select",p)};Tl(async()=>{await Be();const p=document.getElementById("chat-textarea");await Be(),p==null||p.focus(),await Be()});const d=p=>{f(p)},g=p=>{t(0,r=p)};return n.$$set=p=>{"command"in p&&t(3,o=p.command)},n.$$.update=()=>{n.$$.dirty&72&&t(1,a=l.filter(p=>{var y,S;return p.name.toLowerCase().includes(((S=(y=o.toLowerCase().split(" "))==null?void 0:y.at(0))==null?void 0:S.substring(1))??"")}).sort((p,y)=>p.name.localeCompare(y.name))),n.$$.dirty&8&&o&&t(0,r=0)},[r,a,f,o,i,c,l,d,g]}class Ca extends Je{constructor(e){super(),Ge(this,e,Sa,Ia,xe,{command:3,selectUp:4,selectDown:5})}get selectUp(){return this.$$.ctx[4]}get selectDown(){return this.$$.ctx[5]}}function Ys(n){let e,t,l,s,o,r,a;const i=[Ma,Va,Ta],c=[];function f(d,g){var p,y,S;return g&8&&(e=null),g&8&&(t=null),g&8&&(l=null),e==null&&(e=((p=d[3])==null?void 0:p.charAt(0))==="/"),e?0:(t==null&&(t=((y=d[3])==null?void 0:y.charAt(0))==="#"),t?1:(l==null&&(l=((S=d[3])==null?void 0:S.charAt(0))==="@"),l?2:-1))}return~(s=f(n,-1))&&(o=c[s]=i[s](n)),{c(){o&&o.c(),r=Pe()},l(d){o&&o.l(d),r=Pe()},m(d,g){~s&&c[s].m(d,g),z(d,r,g),a=!0},p(d,g){let p=s;s=f(d,g),s===p?~s&&c[s].p(d,g):(o&&(Re(),O(c[p],1,1,()=>{c[p]=null}),Fe()),~s?(o=c[s],o?o.p(d,g):(o=c[s]=i[s](d),o.c()),N(o,1),o.m(r.parentNode,r)):o=null)},i(d){a||(N(o),a=!0)},o(d){O(o),a=!1},d(d){d&&h(r),~s&&c[s].d(d)}}}function Ta(n){let e,t,l={command:n[3]};return e=new Ca({props:l}),n[17](e),e.$on("select",n[18]),{c(){ee(e.$$.fragment)},l(s){te(e.$$.fragment,s)},m(s,o){le(e,s,o),t=!0},p(s,o){const r={};o&8&&(r.command=s[3]),e.$set(r)},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){O(e.$$.fragment,s),t=!1},d(s){n[17](null),se(e,s)}}}function Va(n){let e,t,l;function s(r){n[13](r)}let o={command:n[3]};return n[0]!==void 0&&(o.prompt=n[0]),e=new Ea({props:o}),n[12](e),_e.push(()=>He(e,"prompt",s)),e.$on("youtube",n[14]),e.$on("url",n[15]),e.$on("select",n[16]),{c(){ee(e.$$.fragment)},l(r){te(e.$$.fragment,r)},m(r,a){le(e,r,a),l=!0},p(r,a){const i={};a&8&&(i.command=r[3]),!t&&a&1&&(t=!0,i.prompt=r[0],Me(()=>t=!1)),e.$set(i)},i(r){l||(N(e.$$.fragment,r),l=!0)},o(r){O(e.$$.fragment,r),l=!1},d(r){n[12](null),se(e,r)}}}function Ma(n){let e,t,l,s;function o(i){n[10](i)}function r(i){n[11](i)}let a={command:n[3]};return n[0]!==void 0&&(a.prompt=n[0]),n[1]!==void 0&&(a.files=n[1]),e=new ma({props:a}),n[9](e),_e.push(()=>He(e,"prompt",o)),_e.push(()=>He(e,"files",r)),{c(){ee(e.$$.fragment)},l(i){te(e.$$.fragment,i)},m(i,c){le(e,i,c),s=!0},p(i,c){const f={};c&8&&(f.command=i[3]),!t&&c&1&&(t=!0,f.prompt=i[0],Me(()=>t=!1)),!l&&c&2&&(l=!0,f.files=i[1],Me(()=>l=!1)),e.$set(f)},i(i){s||(N(e.$$.fragment,i),s=!0)},o(i){O(e.$$.fragment,i),s=!1},d(i){n[9](null),se(e,i)}}}function Ha(n){var o;let e=["/","#","@"].includes((o=n[3])==null?void 0:o.charAt(0)),t,l,s=e&&Ys(n);return{c(){s&&s.c(),t=Pe()},l(r){s&&s.l(r),t=Pe()},m(r,a){s&&s.m(r,a),z(r,t,a),l=!0},p(r,[a]){var i;a&8&&(e=["/","#","@"].includes((i=r[3])==null?void 0:i.charAt(0))),e?s?(s.p(r,a),a&8&&N(s,1)):(s=Ys(r),s.c(),N(s,1),s.m(t.parentNode,t)):s&&(Re(),O(s,1,1,()=>{s=null}),Fe())},i(r){l||(N(s),l=!0)},o(r){O(s),l=!1},d(r){r&&h(t),s&&s.d(r)}}}function Ba(n,e,t){const l=el();let{prompt:s=""}=e,{files:o=[]}=e,r=null;const a=()=>{r==null||r.selectUp()},i=()=>{r==null||r.selectDown()};let c="";const f=async T=>{console.log(T);const U={type:"doc",name:T,collection_name:"",status:!1,url:T,error:""};try{t(1,o=[...o,U]);const V=await pr(localStorage.token,"",T);V&&(U.status="processed",U.collection_name=V.collection_name,t(1,o))}catch(V){t(1,o=o.filter(_=>_.name!==T)),De.error(V)}},d=async T=>{console.log(T);const U={type:"doc",name:T,collection_name:"",status:!1,url:T,error:""};try{t(1,o=[...o,U]);const V=await _r(localStorage.token,T);V&&(U.status="processed",U.collection_name=V.collection_name,t(1,o))}catch(V){t(1,o=o.filter(_=>_.name!==T)),De.error(V)}};function g(T){_e[T?"unshift":"push"](()=>{r=T,t(2,r)})}function p(T){s=T,t(0,s)}function y(T){o=T,t(1,o)}function S(T){_e[T?"unshift":"push"](()=>{r=T,t(2,r)})}function k(T){s=T,t(0,s)}const D=T=>{console.log(T),d(T.detail)},I=T=>{console.log(T),f(T.detail)},B=T=>{var U;console.log(T),t(1,o=[...o,{type:((U=T==null?void 0:T.detail)==null?void 0:U.type)??"file",...T.detail,status:"processed"}]),l("select")};function E(T){_e[T?"unshift":"push"](()=>{r=T,t(2,r)})}const L=T=>{t(0,s=Jl(s,c)),l("select",{type:"model",data:T.detail})};return n.$$set=T=>{"prompt"in T&&t(0,s=T.prompt),"files"in T&&t(1,o=T.files)},n.$$.update=()=>{var T;n.$$.dirty&1&&t(3,c=((T=((s==null?void 0:s.trim())??"").split(" "))==null?void 0:T.at(-1))??"")},[s,o,r,c,l,f,d,a,i,g,p,y,S,k,D,I,B,E,L]}class La extends Je{constructor(e){super(),Ge(this,e,Ba,Ha,xe,{prompt:0,files:1,selectUp:7,selectDown:8})}get selectUp(){return this.$$.ctx[7]}get selectDown(){return this.$$.ctx[8]}}function Na(n){let e,t;return{c(){e=Ne("svg"),t=Ne("path"),this.h()},l(l){e=ze(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=w(e);t=ze(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(t).forEach(h),s.forEach(h),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"d","M6 18 18 6M6 6l12 12"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width",n[1]),u(e,"stroke","currentColor"),u(e,"class",n[0])},m(l,s){z(l,e,s),m(e,t)},p(l,[s]){s&2&&u(e,"stroke-width",l[1]),s&1&&u(e,"class",l[0])},i:Se,o:Se,d(l){l&&h(e)}}}function za(n,e,t){let{className:l="size-3.5"}=e,{strokeWidth:s="2"}=e;return n.$$set=o=>{"className"in o&&t(0,l=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[l,s]}class Zn extends Je{constructor(e){super(),Ge(this,e,za,Na,xe,{className:0,strokeWidth:1})}}function Xs(n,e,t){const l=n.slice();return l[65]=e[t],l[67]=t,l}function $s(n){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M10 3a.75.75 0 01.75.75v10.638l3.96-4.158a.75.75 0 111.08 1.04l-5.25 5.5a.75.75 0 01-1.08 0l-5.25-5.5a.75.75 0 111.08-1.04l3.96 4.158V3.75A.75.75 0 0110 3z" clip-rule="evenodd"></path></svg>',s,o;return{c(){e=v("div"),t=v("button"),t.innerHTML=l,this.h()},l(r){e=b(r,"DIV",{class:!0});var a=w(e);t=b(a,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(t)!=="svelte-txgoc3"&&(t.innerHTML=l),a.forEach(h),this.h()},h(){u(t,"class","bg-white border border-gray-100 dark:border-none dark:bg-white/20 p-1.5 rounded-full pointer-events-auto"),u(e,"class","absolute -top-12 left-0 right-0 flex justify-center z-30 pointer-events-none")},m(r,a){z(r,e,a),m(e,t),s||(o=fe(t,"click",n[31]),s=!0)},p:Se,d(r){r&&h(e),s=!1,o()}}}function en(n){let e,t,l,s,o,r,a,i,c=n[0].name+"",f,d,g,p,y,S,k,D;return y=new Zn({}),{c(){e=v("div"),t=v("div"),l=v("img"),o=Z(),r=v("div"),a=ge("Talking to "),i=v("span"),f=ge(c),d=Z(),g=v("div"),p=v("button"),ee(y.$$.fragment),this.h()},l(I){e=b(I,"DIV",{class:!0});var B=w(e);t=b(B,"DIV",{class:!0});var E=w(t);l=b(E,"IMG",{crossorigin:!0,alt:!0,class:!0,src:!0}),o=q(E),r=b(E,"DIV",{});var L=w(r);a=pe(L,"Talking to "),i=b(L,"SPAN",{class:!0});var T=w(i);f=pe(T,c),T.forEach(h),L.forEach(h),E.forEach(h),d=q(B),g=b(B,"DIV",{});var U=w(g);p=b(U,"BUTTON",{class:!0});var V=w(p);te(y.$$.fragment,V),V.forEach(h),U.forEach(h),B.forEach(h),this.h()},h(){var I,B,E;u(l,"crossorigin","anonymous"),u(l,"alt","model profile"),u(l,"class","size-5 max-w-[28px] object-cover rounded-full"),rl(l.src,s=((E=(B=(I=n[13].find(n[32]))==null?void 0:I.info)==null?void 0:B.meta)==null?void 0:E.profile_image_url)??(n[21].language==="dg-DG"?"/doge.png":`${Ol}/static/favicon.png`))||u(l,"src",s),u(i,"class","font-medium"),u(t,"class","flex items-center gap-2 text-sm dark:text-gray-500"),u(p,"class","flex items-center"),u(e,"class","px-3 py-2.5 text-left w-full flex justify-between items-center absolute bottom-0.5 left-0 right-0 bg-gradient-to-t from-50% from-white dark:from-gray-900 z-10")},m(I,B){z(I,e,B),m(e,t),m(t,l),m(t,o),m(t,r),m(r,a),m(r,i),m(i,f),m(e,d),m(e,g),m(g,p),le(y,p,null),S=!0,k||(D=fe(p,"click",n[33]),k=!0)},p(I,B){var E,L,T;(!S||B[0]&2105345&&!rl(l.src,s=((T=(L=(E=I[13].find(I[32]))==null?void 0:E.info)==null?void 0:L.meta)==null?void 0:T.profile_image_url)??(I[21].language==="dg-DG"?"/doge.png":`${Ol}/static/favicon.png`)))&&u(l,"src",s),(!S||B[0]&1)&&c!==(c=I[0].name+"")&&ye(f,c)},i(I){S||(N(y.$$.fragment,I),S=!0)},o(I){O(y.$$.fragment,I),S=!1},d(I){I&&h(e),se(y),k=!1,D()}}}function Oa(n){let e,t,l,s,o,r,a,i,c,f,d,g,p,y=n[11].length==0||n[11].at(-1).done==!0,S,k,D,I,B,E,L,T,U,V=n[3].length>0&&tn(n);function _(x){n[50](x)}function H(x){n[51](x)}let W={tools:n[24].reduce(n[47],{}),uploadFilesHandler:n[48],onClose:n[49],$$slots:{default:[Ra]},$$scope:{ctx:n}};n[5]!==void 0&&(W.webSearchEnabled=n[5]),n[4]!==void 0&&(W.selectedToolIds=n[4]),r=new $o({props:W}),_e.push(()=>He(r,"webSearchEnabled",_)),_e.push(()=>He(r,"selectedToolIds",H));let R=y&&nn(n);const A=[Za,Wa],j=[];function G(x,F){return F[0]&2048&&(I=null),I==null&&(I=x[11].length==0||x[11].at(-1).done==!0),I?0:1}return B=G(n,[-1,-1,-1]),E=j[B]=A[B](n),{c(){e=v("form"),t=v("div"),V&&V.c(),l=Z(),s=v("div"),o=v("div"),ee(r.$$.fragment),c=Z(),f=v("textarea"),g=Z(),p=v("div"),R&&R.c(),k=Z(),D=v("div"),E.c(),this.h()},l(x){e=b(x,"FORM",{class:!0});var F=w(e);t=b(F,"DIV",{class:!0,dir:!0});var ae=w(t);V&&V.l(ae),l=q(ae),s=b(ae,"DIV",{class:!0});var be=w(s);o=b(be,"DIV",{class:!0});var Ie=w(o);te(r.$$.fragment,Ie),Ie.forEach(h),c=q(be),f=b(be,"TEXTAREA",{id:!0,class:!0,placeholder:!0,rows:!0}),w(f).forEach(h),g=q(be),p=b(be,"DIV",{class:!0});var X=w(p);R&&R.l(X),X.forEach(h),be.forEach(h),ae.forEach(h),k=q(F),D=b(F,"DIV",{class:!0});var re=w(D);E.l(re),re.forEach(h),F.forEach(h),this.h()},h(){var x;u(o,"class","ml-0.5 self-end mb-1.5 flex space-x-1"),u(f,"id","chat-textarea"),u(f,"class","scrollbar-hidden bg-gray-50 dark:bg-gray-850 dark:text-gray-100 outline-none w-full py-3 px-1 rounded-xl resize-none h-[48px] svelte-141e0sl"),u(f,"placeholder",d=n[21].t("Send a Message")),u(f,"rows","1"),u(p,"class","self-end mb-2 flex space-x-1 mr-1"),u(s,"class","flex"),u(t,"class","flex-1 flex flex-col relative w-full rounded-3xl px-1.5 bg-gray-50 dark:bg-gray-850 dark:text-gray-100"),u(t,"dir",S=((x=n[23])==null?void 0:x.chatDirection)??"LTR"),u(D,"class","flex items-end w-10"),u(e,"class","w-full flex gap-1.5")},m(x,F){z(x,e,F),m(e,t),V&&V.m(t,null),m(t,l),m(t,s),m(s,o),le(r,o,null),m(s,c),m(s,f),n[52](f),Zt(f,n[1]),m(s,g),m(s,p),R&&R.m(p,null),m(e,k),m(e,D),j[B].m(D,null),L=!0,T||(U=[fe(f,"input",n[53]),fe(f,"keypress",n[54]),fe(f,"keydown",n[55]),fe(f,"input",n[56]),fe(f,"focus",n[57]),fe(f,"paste",n[58]),fe(e,"submit",Bn(n[62]))],T=!0)},p(x,F){var Ie;x[3].length>0?V?(V.p(x,F),F[0]&8&&N(V,1)):(V=tn(x),V.c(),N(V,1),V.m(t,l)):V&&(Re(),O(V,1,1,()=>{V=null}),Fe());const ae={};F[0]&50332672&&(ae.tools=x[24].reduce(x[47],{})),F[0]&32768&&(ae.uploadFilesHandler=x[48]),F[0]&4096&&(ae.onClose=x[49]),F[2]&64&&(ae.$$scope={dirty:F,ctx:x}),!a&&F[0]&32&&(a=!0,ae.webSearchEnabled=x[5],Me(()=>a=!1)),!i&&F[0]&16&&(i=!0,ae.selectedToolIds=x[4],Me(()=>i=!1)),r.$set(ae),(!L||F[0]&2097152&&d!==(d=x[21].t("Send a Message")))&&u(f,"placeholder",d),F[0]&2&&Zt(f,x[1]),F[0]&2048&&(y=x[11].length==0||x[11].at(-1).done==!0),y?R?(R.p(x,F),F[0]&2048&&N(R,1)):(R=nn(x),R.c(),N(R,1),R.m(p,null)):R&&(Re(),O(R,1,1,()=>{R=null}),Fe()),(!L||F[0]&8388608&&S!==(S=((Ie=x[23])==null?void 0:Ie.chatDirection)??"LTR"))&&u(t,"dir",S);let be=B;B=G(x,F),B===be?j[B].p(x,F):(Re(),O(j[be],1,1,()=>{j[be]=null}),Fe(),E=j[B],E?E.p(x,F):(E=j[B]=A[B](x),E.c()),N(E,1),E.m(D,null))},i(x){L||(N(V),N(r.$$.fragment,x),N(R),N(E),L=!0)},o(x){O(V),O(r.$$.fragment,x),O(R),O(E),L=!1},d(x){x&&h(e),V&&V.d(),se(r),n[52](null),R&&R.d(),j[B].d(),T=!1,Pt(U)}}}function Ua(n){let e,t,l;function s(r){n[41](r)}let o={};return n[14]!==void 0&&(o.recording=n[14]),e=new aa({props:o}),_e.push(()=>He(e,"recording",s)),e.$on("cancel",n[42]),e.$on("confirm",n[43]),{c(){ee(e.$$.fragment)},l(r){te(e.$$.fragment,r)},m(r,a){le(e,r,a),l=!0},p(r,a){const i={};!t&&a[0]&16384&&(t=!0,i.recording=r[14],Me(()=>t=!1)),e.$set(i)},i(r){l||(N(e.$$.fragment,r),l=!0)},o(r){O(e.$$.fragment,r),l=!1},d(r){se(e,r)}}}function tn(n){let e,t,l=it(n[3]),s=[];for(let r=0;r<l.length;r+=1)s[r]=sn(Xs(n,l,r));const o=r=>O(s[r],1,1,()=>{s[r]=null});return{c(){e=v("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=b(r,"DIV",{class:!0});var a=w(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(h),this.h()},h(){u(e,"class","mx-1 mt-2.5 mb-1 flex flex-wrap gap-2")},m(r,a){z(r,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(r,a){if(a[0]&3146249){l=it(r[3]);let i;for(i=0;i<l.length;i+=1){const c=Xs(r,l,i);s[i]?(s[i].p(c,a),N(s[i],1)):(s[i]=sn(c),s[i].c(),N(s[i],1),s[i].m(e,null))}for(Re(),i=l.length;i<s.length;i+=1)o(i);Fe()}},i(r){if(!t){for(let a=0;a<l.length;a+=1)N(s[a]);t=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)O(s[a]);t=!1},d(r){r&&h(e),xt(s,r)}}}function Aa(n){var s;let e,t;function l(){return n[46](n[67])}return e=new zn({props:{name:n[65].name,type:n[65].type,size:(s=n[65])==null?void 0:s.size,status:n[65].status,dismissible:!0}}),e.$on("dismiss",l),{c(){ee(e.$$.fragment)},l(o){te(e.$$.fragment,o)},m(o,r){le(e,o,r),t=!0},p(o,r){var i;n=o;const a={};r[0]&8&&(a.name=n[65].name),r[0]&8&&(a.type=n[65].type),r[0]&8&&(a.size=(i=n[65])==null?void 0:i.size),r[0]&8&&(a.status=n[65].status),e.$set(a)},i(o){t||(N(e.$$.fragment,o),t=!0)},o(o){O(e.$$.fragment,o),t=!1},d(o){se(e,o)}}}function Pa(n){let e,t,l,s,o,r,a,i,c='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',f,d,g,p,y=(n[0]?n[20].length===0:n[9].length!==n[20].length)&&ln(n);function S(){return n[45](n[67])}return{c(){e=v("div"),t=v("div"),l=v("img"),o=Z(),y&&y.c(),r=Z(),a=v("div"),i=v("button"),i.innerHTML=c,f=Z(),this.h()},l(k){e=b(k,"DIV",{class:!0});var D=w(e);t=b(D,"DIV",{class:!0});var I=w(t);l=b(I,"IMG",{src:!0,alt:!0,class:!0}),o=q(I),y&&y.l(I),I.forEach(h),r=q(D),a=b(D,"DIV",{class:!0});var B=w(a);i=b(B,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),qe(i)!=="svelte-l5shih"&&(i.innerHTML=c),B.forEach(h),f=q(D),D.forEach(h),this.h()},h(){rl(l.src,s=n[65].url)||u(l,"src",s),u(l,"alt","input"),u(l,"class","h-16 w-16 rounded-xl object-cover"),u(t,"class","relative"),u(i,"class","bg-gray-400 text-white border border-white rounded-full group-hover:visible invisible transition"),u(i,"type","button"),u(a,"class","absolute -top-1 -right-1"),u(e,"class","relative group")},m(k,D){z(k,e,D),m(e,t),m(t,l),m(t,o),y&&y.m(t,null),m(e,r),m(e,a),m(a,i),m(e,f),d=!0,g||(p=fe(i,"click",S),g=!0)},p(k,D){n=k,(!d||D[0]&8&&!rl(l.src,s=n[65].url))&&u(l,"src",s),(n[0]?n[20].length===0:n[9].length!==n[20].length)?y?(y.p(n,D),D[0]&1049089&&N(y,1)):(y=ln(n),y.c(),N(y,1),y.m(t,null)):y&&(Re(),O(y,1,1,()=>{y=null}),Fe())},i(k){d||(N(y),d=!0)},o(k){O(y),d=!1},d(k){k&&h(e),y&&y.d(),g=!1,p()}}}function ln(n){let e,t;return e=new qt({props:{className:" absolute top-1 left-1",content:n[21].t("{{ models }}",{models:[...n[0]?[n[0]]:n[9]].filter(n[44]).join(", ")}),$$slots:{default:[ja]},$$scope:{ctx:n}}}),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,s){le(e,l,s),t=!0},p(l,s){const o={};s[0]&3146241&&(o.content=l[21].t("{{ models }}",{models:[...l[0]?[l[0]]:l[9]].filter(l[44]).join(", ")})),s[2]&64&&(o.$$scope={dirty:s,ctx:l}),e.$set(o)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function ja(n){let e,t;return{c(){e=Ne("svg"),t=Ne("path"),this.h()},l(l){e=ze(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var s=w(e);t=ze(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),w(t).forEach(h),s.forEach(h),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"),u(t,"clip-rule","evenodd"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class","size-4 fill-yellow-300")},m(l,s){z(l,e,s),m(e,t)},p:Se,d(l){l&&h(e)}}}function sn(n){let e,t,l,s;const o=[Pa,Aa],r=[];function a(i,c){return i[65].type==="image"?0:1}return e=a(n),t=r[e]=o[e](n),{c(){t.c(),l=Pe()},l(i){t.l(i),l=Pe()},m(i,c){r[e].m(i,c),z(i,l,c),s=!0},p(i,c){let f=e;e=a(i),e===f?r[e].p(i,c):(Re(),O(r[f],1,1,()=>{r[f]=null}),Fe(),t=r[e],t?t.p(i,c):(t=r[e]=o[e](i),t.c()),N(t,1),t.m(l.parentNode,l))},i(i){s||(N(t),s=!0)},o(i){O(t),s=!1},d(i){i&&h(l),r[e].d(i)}}}function Ra(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-5"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>';return{c(){e=v("button"),e.innerHTML=t,this.h()},l(l){e=b(l,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),qe(e)!=="svelte-1948p7i"&&(e.innerHTML=t),this.h()},h(){u(e,"class","bg-gray-50 hover:bg-gray-100 text-gray-800 dark:bg-gray-850 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-2 outline-none focus:outline-none"),u(e,"type","button")},m(l,s){z(l,e,s)},p:Se,d(l){l&&h(e)}}}function nn(n){let e,t;return e=new qt({props:{content:n[21].t("Record voice"),$$slots:{default:[Fa]},$$scope:{ctx:n}}}),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,s){le(e,l,s),t=!0},p(l,s){const o={};s[0]&2097152&&(o.content=l[21].t("Record voice")),s[0]&2113536|s[2]&64&&(o.$$scope={dirty:s,ctx:l}),e.$set(o)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function Fa(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 translate-y-[0.5px]"><path d="M7 4a3 3 0 016 0v6a3 3 0 11-6 0V4z"></path><path d="M5.5 9.643a.75.75 0 00-1.5 0V10c0 3.06 2.29 5.585 5.25 5.954V17.5h-1.5a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-1.5v-1.546A6.001 6.001 0 0016 10v-.357a.75.75 0 00-1.5 0V10a4.5 4.5 0 01-9 0v-.357z"></path></svg>',l,s;return{c(){e=v("button"),e.innerHTML=t,this.h()},l(o){e=b(o,"BUTTON",{id:!0,class:!0,type:!0,"data-svelte-h":!0}),qe(e)!=="svelte-k5moko"&&(e.innerHTML=t),this.h()},h(){u(e,"id","voice-input-button"),u(e,"class","text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-850 transition rounded-full p-1.5 mr-0.5 self-center"),u(e,"type","button")},m(o,r){z(o,e,r),l||(s=fe(e,"click",n[59]),l=!0)},p:Se,d(o){o&&h(e),l=!1,s()}}}function Wa(n){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6"><path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm6-2.438c0-.724.588-1.312 1.313-1.312h4.874c.725 0 1.313.588 1.313 1.313v4.874c0 .725-.588 1.313-1.313 1.313H9.564a1.312 1.312 0 01-1.313-1.313V9.564z" clip-rule="evenodd"></path></svg>',s,o;return{c(){e=v("div"),t=v("button"),t.innerHTML=l,this.h()},l(r){e=b(r,"DIV",{class:!0});var a=w(e);t=b(a,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(t)!=="svelte-5uu99u"&&(t.innerHTML=l),a.forEach(h),this.h()},h(){u(t,"class","bg-white hover:bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-1.5"),u(e,"class","flex items-center mb-1.5")},m(r,a){z(r,e,a),m(e,t),s||(o=fe(t,"click",n[61]),s=!0)},p:Se,i:Se,o:Se,d(r){r&&h(e),s=!1,o()}}}function Za(n){let e,t,l,s;const o=[xa,qa],r=[];function a(i,c){return i[1]===""?0:1}return e=a(n),t=r[e]=o[e](n),{c(){t.c(),l=Pe()},l(i){t.l(i),l=Pe()},m(i,c){r[e].m(i,c),z(i,l,c),s=!0},p(i,c){let f=e;e=a(i),e===f?r[e].p(i,c):(Re(),O(r[f],1,1,()=>{r[f]=null}),Fe(),t=r[e],t?t.p(i,c):(t=r[e]=o[e](i),t.c()),N(t,1),t.m(l.parentNode,l))},i(i){s||(N(t),s=!0)},o(i){O(t),s=!1},d(i){i&&h(l),r[e].d(i)}}}function qa(n){let e,t,l;return t=new qt({props:{content:n[21].t("Send message"),$$slots:{default:[Ja]},$$scope:{ctx:n}}}),{c(){e=v("div"),ee(t.$$.fragment),this.h()},l(s){e=b(s,"DIV",{class:!0});var o=w(e);te(t.$$.fragment,o),o.forEach(h),this.h()},h(){u(e,"class","flex items-center mb-1")},m(s,o){z(s,e,o),le(t,e,null),l=!0},p(s,o){const r={};o[0]&2097152&&(r.content=s[21].t("Send message")),o[0]&2|o[2]&64&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(s){l||(N(t.$$.fragment,s),l=!0)},o(s){O(t.$$.fragment,s),l=!1},d(s){s&&h(e),se(t)}}}function xa(n){let e,t,l;return t=new qt({props:{content:n[21].t("Call"),$$slots:{default:[Ga]},$$scope:{ctx:n}}}),{c(){e=v("div"),ee(t.$$.fragment),this.h()},l(s){e=b(s,"DIV",{class:!0});var o=w(e);te(t.$$.fragment,o),o.forEach(h),this.h()},h(){u(e,"class","flex items-center mb-1")},m(s,o){z(s,e,o),le(t,e,null),l=!0},p(s,o){const r={};o[0]&2097152&&(r.content=s[21].t("Call")),o[0]&6291968|o[2]&64&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(s){l||(N(t.$$.fragment,s),l=!0)},o(s){O(t.$$.fragment,s),l=!1},d(s){s&&h(e),se(t)}}}function Ja(n){let e,t,l,s,o;return{c(){e=v("button"),t=Ne("svg"),l=Ne("path"),this.h()},l(r){e=b(r,"BUTTON",{id:!0,class:!0,type:!0});var a=w(e);t=ze(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var i=w(t);l=ze(i,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),w(l).forEach(h),i.forEach(h),a.forEach(h),this.h()},h(){u(l,"fill-rule","evenodd"),u(l,"d","M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z"),u(l,"clip-rule","evenodd"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(t,"viewBox","0 0 16 16"),u(t,"fill","currentColor"),u(t,"class","size-6"),u(e,"id","send-message-button"),u(e,"class",s=(n[1]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled")+" transition rounded-full p-1.5 m-0.5 self-center"),u(e,"type","submit"),e.disabled=o=n[1]===""},m(r,a){z(r,e,a),m(e,t),m(t,l)},p(r,a){a[0]&2&&s!==(s=(r[1]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled")+" transition rounded-full p-1.5 m-0.5 self-center")&&u(e,"class",s),a[0]&2&&o!==(o=r[1]==="")&&(e.disabled=o)},d(r){r&&h(e)}}}function Ga(n){let e,t,l,s,o;return t=new la({props:{className:"size-6"}}),{c(){e=v("button"),ee(t.$$.fragment),this.h()},l(r){e=b(r,"BUTTON",{class:!0,type:!0});var a=w(e);te(t.$$.fragment,a),a.forEach(h),this.h()},h(){u(e,"class","text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-850 transition rounded-full p-2 self-center"),u(e,"type","button")},m(r,a){z(r,e,a),le(t,e,null),l=!0,s||(o=fe(e,"click",n[60]),s=!0)},p:Se,i(r){l||(N(t.$$.fragment,r),l=!0)},o(r){O(t.$$.fragment,r),l=!1},d(r){r&&h(e),se(t),s=!1,o()}}}function Qa(n){let e,t,l,s,o,r,a,i,c,f,d,g,p,y,S,k,D,I,B,E,L,T,U=n[21].t("LLMs can make mistakes. Verify important information.")+"",V,_,H,W,R;e=new fa({props:{show:n[18]}});let A=n[2]===!1&&n[11].length>0&&$s(n),j=n[0]!==void 0&&en(n);function G(X){n[35](X)}function x(X){n[36](X)}let F={};n[1]!==void 0&&(F.prompt=n[1]),n[3]!==void 0&&(F.files=n[3]),f=new La({props:F}),n[34](f),_e.push(()=>He(f,"prompt",G)),_e.push(()=>He(f,"files",x)),f.$on("select",n[37]);const ae=[Ua,Oa],be=[];function Ie(X,re){return X[14]?0:1}return B=Ie(n),E=be[B]=ae[B](n),{c(){ee(e.$$.fragment),t=Z(),l=v("div"),s=v("div"),o=v("div"),r=v("div"),A&&A.c(),a=Z(),i=v("div"),j&&j.c(),c=Z(),ee(f.$$.fragment),p=Z(),y=v("div"),S=v("div"),k=v("div"),D=v("input"),I=Z(),E.c(),L=Z(),T=v("div"),V=ge(U),this.h()},l(X){te(e.$$.fragment,X),t=q(X),l=b(X,"DIV",{class:!0});var re=w(l);s=b(re,"DIV",{class:!0});var tt=w(s);o=b(tt,"DIV",{class:!0});var Ue=w(o);r=b(Ue,"DIV",{class:!0});var J=w(r);A&&A.l(J),J.forEach(h),a=q(Ue),i=b(Ue,"DIV",{class:!0});var Qe=w(i);j&&j.l(Qe),c=q(Qe),te(f.$$.fragment,Qe),Qe.forEach(h),Ue.forEach(h),tt.forEach(h),p=q(re),y=b(re,"DIV",{class:!0});var ue=w(y);S=b(ue,"DIV",{class:!0});var K=w(S);k=b(K,"DIV",{class:!0});var $=w(k);D=b($,"INPUT",{type:!0}),I=q($),E.l($),L=q($),T=b($,"DIV",{class:!0});var rt=w(T);V=pe(rt,U),rt.forEach(h),$.forEach(h),K.forEach(h),ue.forEach(h),re.forEach(h),this.h()},h(){u(r,"class","relative"),u(i,"class","w-full relative"),u(o,"class","flex flex-col max-w-6xl px-2.5 md:px-6 w-full"),u(s,"class","-mb-0.5 mx-auto inset-x-0 bg-transparent flex justify-center"),u(D,"type","file"),D.hidden=!0,D.multiple=!0,u(T,"class","mt-1.5 text-xs text-gray-500 text-center line-clamp-1"),u(k,"class","pb-2"),u(S,"class","max-w-6xl px-2.5 md:px-6 mx-auto inset-x-0"),u(y,"class",_=n[6]?"bg-transparent":"bg-white dark:bg-gray-900"),u(l,"class","w-full font-primary")},m(X,re){le(e,X,re),z(X,t,re),z(X,l,re),m(l,s),m(s,o),m(o,r),A&&A.m(r,null),m(o,a),m(o,i),j&&j.m(i,null),m(i,c),le(f,i,null),m(l,p),m(l,y),m(y,S),m(S,k),m(k,D),n[38](D),m(k,I),be[B].m(k,null),m(k,L),m(k,T),m(T,V),H=!0,W||(R=[fe(D,"change",n[39]),fe(D,"change",n[40])],W=!0)},p(X,re){const tt={};re[0]&262144&&(tt.show=X[18]),e.$set(tt),X[2]===!1&&X[11].length>0?A?A.p(X,re):(A=$s(X),A.c(),A.m(r,null)):A&&(A.d(1),A=null),X[0]!==void 0?j?(j.p(X,re),re[0]&1&&N(j,1)):(j=en(X),j.c(),N(j,1),j.m(i,c)):j&&(Re(),O(j,1,1,()=>{j=null}),Fe());const Ue={};!d&&re[0]&2&&(d=!0,Ue.prompt=X[1],Me(()=>d=!1)),!g&&re[0]&8&&(g=!0,Ue.files=X[3],Me(()=>g=!1)),f.$set(Ue);let J=B;B=Ie(X),B===J?be[B].p(X,re):(Re(),O(be[J],1,1,()=>{be[J]=null}),Fe(),E=be[B],E?E.p(X,re):(E=be[B]=ae[B](X),E.c()),N(E,1),E.m(k,L)),(!H||re[0]&2097152)&&U!==(U=X[21].t("LLMs can make mistakes. Verify important information.")+"")&&ye(V,U),(!H||re[0]&64&&_!==(_=X[6]?"bg-transparent":"bg-white dark:bg-gray-900"))&&u(y,"class",_)},i(X){H||(N(e.$$.fragment,X),N(j),N(f.$$.fragment,X),N(E),H=!0)},o(X){O(e.$$.fragment,X),O(j),O(f.$$.fragment,X),O(E),H=!1},d(X){X&&(h(t),h(l)),se(e,X),A&&A.d(),j&&j.d(),n[34](null),se(f),n[38](null),be[B].d(),W=!1,Pt(R)}}}function Ka(n,e,t){let l,s,o,r,a,i,c;me(n,Vl,M=>t(22,s=M)),me(n,Ul,M=>t(13,o=M)),me(n,Xt,M=>t(23,r=M)),me(n,On,M=>t(24,a=M)),me(n,Al,M=>t(25,i=M)),me(n,Un,M=>t(26,c=M));const f=el(),d=bt("i18n");me(n,d,M=>t(21,l=M));let{transparentBackground:g=!1}=e,{submitPrompt:p}=e,{stopResponse:y}=e,{autoScroll:S=!1}=e,{atSelectedModel:k}=e,{selectedModels:D}=e,I=!1,B,E,L,T,U=!1,V=null,{files:_=[]}=e,{availableToolIds:H=[]}=e,{selectedToolIds:W=[]}=e,{webSearchEnabled:R=!1}=e,{prompt:A=""}=e,{messages:j=[]}=e,G=[];const x=()=>{const M=document.getElementById("messages-container");M.scrollTo({top:M.scrollHeight,behavior:"smooth"})},F=async M=>{if(console.log(M),["audio/mpeg","audio/wav"].includes(M.type)){const de=await ss(localStorage.token,M).catch(Te=>(De.error(Te),null));if(de){console.log(de);const Te=new Blob([de.text],{type:"text/plain"});M=ls(Te,`${M.name}.txt`)}}const ne={type:"file",file:"",id:null,url:"",name:M.name,collection_name:"",status:"",size:M.size,error:""};t(3,_=[..._,ne]);try{const de=await vr(localStorage.token,M);de?(ne.status="uploaded",ne.file=de,ne.id=de.id,ne.url=`${er}/files/${de.id}`,tr.includes(M.type)||lr.includes(M.name.split(".").at(-1))||De.error(l.t("Unknown file type '{{file_type}}'. Proceeding with the file upload anyway.",{file_type:M.type})),ae(ne)):t(3,_=_.filter(Te=>Te.status!==null))}catch(de){De.error(de),t(3,_=_.filter(Te=>Te.status!==null))}},ae=async M=>{try{const ne=await br(localStorage.token,M.id);ne&&(M.status="processed",M.collection_name=ne.collection_name,t(3,_))}catch(ne){De.error(ne),M.status="processed",t(3,_)}},be=async M=>{M.forEach(ne=>{var de,Te,Ve;if(console.log(ne,ne.name.split(".").at(-1)),(((de=s==null?void 0:s.file)==null?void 0:de.max_size)??null)!==null&&ne.size>(((Te=s==null?void 0:s.file)==null?void 0:Te.max_size)??0)*1024*1024){De.error(l.t("File size should not exceed {{maxSize}} MB.",{maxSize:(Ve=s==null?void 0:s.file)==null?void 0:Ve.max_size}));return}if(["image/gif","image/webp","image/jpeg","image/png"].includes(ne.type)){if(G.length===0){De.error(l.t("Selected model(s) do not support image inputs"));return}let Oe=new FileReader;Oe.onload=kt=>{t(3,_=[..._,{type:"image",url:`${kt.target.result}`}])},Oe.readAsDataURL(ne)}else F(ne)})};Tl(()=>{window.setTimeout(()=>B==null?void 0:B.focus(),0);const M=document.querySelector("body"),ne=Oe=>{Oe.key==="Escape"&&(console.log("Escape"),t(18,U=!1))},de=Oe=>{Oe.preventDefault(),t(18,U=!0)},Te=()=>{t(18,U=!1)},Ve=async Oe=>{var kt,Tt;if(Oe.preventDefault(),console.log(Oe),(kt=Oe.dataTransfer)!=null&&kt.files){const ll=Array.from((Tt=Oe.dataTransfer)==null?void 0:Tt.files);ll&&ll.length>0?(console.log(ll),be(ll)):De.error(l.t("File not found."))}t(18,U=!1)};return window.addEventListener("keydown",ne),M==null||M.addEventListener("dragover",de),M==null||M.addEventListener("drop",Ve),M==null||M.addEventListener("dragleave",Te),()=>{window.removeEventListener("keydown",ne),M==null||M.removeEventListener("dragover",de),M==null||M.removeEventListener("drop",Ve),M==null||M.removeEventListener("dragleave",Te)}});const Ie=()=>{t(2,S=!0),x()},X=M=>M.id===k.id,re=()=>{t(0,k=void 0)};function tt(M){_e[M?"unshift":"push"](()=>{L=M,t(16,L)})}function Ue(M){A=M,t(1,A)}function J(M){_=M,t(3,_)}const Qe=M=>{const ne=M.detail;(ne==null?void 0:ne.type)==="model"&&t(0,k=ne.data),B==null||B.focus()};function ue(M){_e[M?"unshift":"push"](()=>{E=M,t(15,E)})}function K(){T=this.files,t(17,T)}const $=async()=>{if(T&&T.length>0){const M=Array.from(T);be(M)}else De.error(l.t("File not found."));t(15,E.value="",E)};function rt(M){I=M,t(14,I)}const ht=async()=>{var M;t(14,I=!1),await Be(),(M=document.getElementById("chat-textarea"))==null||M.focus()},St=async M=>{var de;const ne=M.detail;t(1,A=`${A}${ne} `),t(14,I=!1),await Be(),(de=document.getElementById("chat-textarea"))==null||de.focus(),((r==null?void 0:r.speechAutoSend)??!1)&&p(A)},Ht=M=>!G.includes(M),ct=M=>{_.splice(M,1),t(3,_)},Ke=M=>{_.splice(M,1),t(3,_)},gt=(M,ne,de,Te)=>((H.includes(ne.id)||((i==null?void 0:i.role)??"user")==="admin")&&(M[ne.id]={name:ne.name,description:ne.meta.description,enabled:!1}),M),Y=()=>{E.click()},ve=async()=>{await Be(),B==null||B.focus()};function We(M){R=M,t(5,R)}function nt(M){W=M,t(4,W)}function Xe(M){_e[M?"unshift":"push"](()=>{B=M,t(12,B),t(1,A)})}function wt(){A=this.value,t(1,A)}const _t=M=>{(!c||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0))&&(M.key==="Enter"&&!M.shiftKey&&M.preventDefault(),A!==""&&M.key==="Enter"&&!M.shiftKey&&p(A))},Gt=async M=>{var Te;const ne=M.ctrlKey||M.metaKey,de=document.getElementById("commands-container");if(A===""&&ne&&M.key.toLowerCase()==="r"){M.preventDefault(),console.log("regenerate");const Ve=[...document.getElementsByClassName("regenerate-response-button")].at(-1);Ve==null||Ve.click()}if(A===""&&M.key=="ArrowUp"){M.preventDefault();const Ve=[...document.getElementsByClassName("user-message")].at(-1),Oe=[...document.getElementsByClassName("edit-user-message-button")].at(-1);console.log(Ve),Ve.scrollIntoView({block:"center"}),Oe==null||Oe.click()}if(de&&M.key==="ArrowUp"&&(M.preventDefault(),L.selectUp(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),de&&M.key==="ArrowDown"&&(M.preventDefault(),L.selectDown(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),de&&M.key==="Enter"){M.preventDefault();const Ve=[...document.getElementsByClassName("selected-command-option-button")].at(-1);M.shiftKey?t(1,A=`${A}
`):Ve?Ve==null||Ve.click():(Te=document.getElementById("send-message-button"))==null||Te.click()}if(de&&M.key==="Tab"){M.preventDefault();const Ve=[...document.getElementsByClassName("selected-command-option-button")].at(-1);Ve==null||Ve.click()}else if(M.key==="Tab"){const Ve=Pn(A);if(Ve.length>0){const Oe=Ve.at(0),kt=A;t(1,A=A.substring(0,(Oe==null?void 0:Oe.endIndex)+1)),await Be(),M.target.scrollTop=M.target.scrollHeight,t(1,A=kt),await Be(),M.preventDefault(),M.target.setSelectionRange(Oe==null?void 0:Oe.startIndex,Oe.endIndex+1)}M.target.style.height="",M.target.style.height=Math.min(M.target.scrollHeight,200)+"px"}M.key==="Escape"&&(console.log("Escape"),t(0,k=void 0))},tl=async M=>{M.target.style.height="",M.target.style.height=Math.min(M.target.scrollHeight,200)+"px",t(19,V=null)},Ct=async M=>{M.target.style.height="",M.target.style.height=Math.min(M.target.scrollHeight,200)+"px"},jt=async M=>{const ne=M.clipboardData||window.clipboardData;if(ne&&ne.items){for(const de of ne.items)if(de.type.indexOf("image")!==-1){const Te=de.getAsFile(),Ve=new FileReader;Ve.onload=function(Oe){t(3,_=[..._,{type:"image",url:`${Oe.target.result}`}])},Ve.readAsDataURL(Te)}}},Q=async()=>{try{let M=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(ne){return De.error(l.t("Permission denied when accessing microphone: {{error}}",{error:ne})),null});M&&(t(14,I=!0),M.getTracks().forEach(de=>de.stop())),M=null}catch{De.error(l.t("Permission denied when accessing microphone"))}},Ce=async()=>{if(D.length>1){De.error(l.t("Select only one model to call"));return}if(s.audio.stt.engine==="web"){De.error(l.t("Call feature is not supported when using Web STT engine"));return}try{let M=await navigator.mediaDevices.getUserMedia({audio:!0});M&&M.getTracks().forEach(de=>de.stop()),M=null,Sl.set(!0),f("call")}catch{De.error(l.t("Permission denied when accessing media devices"))}},we=()=>{y()},Ee=()=>{p(A)};return n.$$set=M=>{"transparentBackground"in M&&t(6,g=M.transparentBackground),"submitPrompt"in M&&t(7,p=M.submitPrompt),"stopResponse"in M&&t(8,y=M.stopResponse),"autoScroll"in M&&t(2,S=M.autoScroll),"atSelectedModel"in M&&t(0,k=M.atSelectedModel),"selectedModels"in M&&t(9,D=M.selectedModels),"files"in M&&t(3,_=M.files),"availableToolIds"in M&&t(10,H=M.availableToolIds),"selectedToolIds"in M&&t(4,W=M.selectedToolIds),"webSearchEnabled"in M&&t(5,R=M.webSearchEnabled),"prompt"in M&&t(1,A=M.prompt),"messages"in M&&t(11,j=M.messages)},n.$$.update=()=>{n.$$.dirty[0]&8705&&t(20,G=[...k?[k]:D].filter(M=>{var ne,de,Te,Ve;return((Ve=(Te=(de=(ne=o.find(Oe=>Oe.id===M))==null?void 0:ne.info)==null?void 0:de.meta)==null?void 0:Te.capabilities)==null?void 0:Ve.vision)??!0})),n.$$.dirty[0]&4098&&A&&B&&(t(12,B.style.height="",B),t(12,B.style.height=Math.min(B.scrollHeight,200)+"px",B))},[k,A,S,_,W,R,g,p,y,D,H,j,B,o,I,E,L,T,U,V,G,l,s,r,a,i,c,f,d,x,be,Ie,X,re,tt,Ue,J,Qe,ue,K,$,rt,ht,St,Ht,ct,Ke,gt,Y,ve,We,nt,Xe,wt,_t,Gt,tl,Ct,jt,Q,Ce,we,Ee]}class Ya extends Je{constructor(e){super(),Ge(this,e,Ka,Qa,xe,{transparentBackground:6,submitPrompt:7,stopResponse:8,autoScroll:2,atSelectedModel:0,selectedModels:9,files:3,availableToolIds:10,selectedToolIds:4,webSearchEnabled:5,prompt:1,messages:11},null,[-1,-1,-1])}}function rn(n,e,t){const l=n.slice();return l[14]=e[t],l[15]=e,l[16]=t,l}function Xa(n){let e,t,l;return t=new qt({props:{content:n[4].t("Remove Model"),$$slots:{default:[ei]},$$scope:{ctx:n}}}),{c(){e=v("div"),ee(t.$$.fragment),this.h()},l(s){e=b(s,"DIV",{class:!0});var o=w(e);te(t.$$.fragment,o),o.forEach(h),this.h()},h(){u(e,"class","self-center disabled:text-gray-600 disabled:hover:text-gray-600 mr-2")},m(s,o){z(s,e,o),le(t,e,null),l=!0},p(s,o){const r={};o&16&&(r.content=s[4].t("Remove Model")),o&131075&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(s){l||(N(t.$$.fragment,s),l=!0)},o(s){O(t.$$.fragment,s),l=!1},d(s){s&&h(e),se(t)}}}function $a(n){let e,t,l;return t=new qt({props:{content:n[4].t("Add Model"),$$slots:{default:[ti]},$$scope:{ctx:n}}}),{c(){e=v("div"),ee(t.$$.fragment),this.h()},l(s){e=b(s,"DIV",{class:!0});var o=w(e);te(t.$$.fragment,o),o.forEach(h),this.h()},h(){u(e,"class","self-center mr-2 disabled:text-gray-600 disabled:hover:text-gray-600")},m(s,o){z(s,e,o),le(t,e,null),l=!0},p(s,o){const r={};o&16&&(r.content=s[4].t("Add Model")),o&131075&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(s){l||(N(t.$$.fragment,s),l=!0)},o(s){O(t.$$.fragment,s),l=!1},d(s){s&&h(e),se(t)}}}function ei(n){let e,t,l,s,o;function r(){return n[12](n[16])}return{c(){e=v("button"),t=Ne("svg"),l=Ne("path"),this.h()},l(a){e=b(a,"BUTTON",{});var i=w(e);t=ze(i,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var c=w(t);l=ze(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(l).forEach(h),c.forEach(h),i.forEach(h),this.h()},h(){u(l,"stroke-linecap","round"),u(l,"stroke-linejoin","round"),u(l,"d","M19.5 12h-15"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(t,"fill","none"),u(t,"viewBox","0 0 24 24"),u(t,"stroke-width","2"),u(t,"stroke","currentColor"),u(t,"class","size-3.5"),e.disabled=n[1]},m(a,i){z(a,e,i),m(e,t),m(t,l),s||(o=fe(e,"click",r),s=!0)},p(a,i){n=a,i&2&&(e.disabled=n[1])},d(a){a&&h(e),s=!1,o()}}}function ti(n){let e,t,l,s,o;return{c(){e=v("button"),t=Ne("svg"),l=Ne("path"),this.h()},l(r){e=b(r,"BUTTON",{class:!0});var a=w(e);t=ze(a,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var i=w(t);l=ze(i,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(l).forEach(h),i.forEach(h),a.forEach(h),this.h()},h(){u(l,"stroke-linecap","round"),u(l,"stroke-linejoin","round"),u(l,"d","M12 6v12m6-6H6"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(t,"fill","none"),u(t,"viewBox","0 0 24 24"),u(t,"stroke-width","2"),u(t,"stroke","currentColor"),u(t,"class","size-3.5"),u(e,"class",""),e.disabled=n[1]},m(r,a){z(r,e,a),m(e,t),m(t,l),s||(o=fe(e,"click",n[11]),s=!0)},p(r,a){a&2&&(e.disabled=r[1])},d(r){r&&h(e),s=!1,o()}}}function on(n){var k,D,I;let e,t,l,s,o,r,a,i,c,f;function d(B){n[10](B,n[14],n[15],n[16])}let g={placeholder:n[4].t("Select a model"),items:n[3].map(cn),showTemporaryChatControl:n[5].role==="user"?((I=(D=(k=n[6])==null?void 0:k.permissions)==null?void 0:D.chat)==null?void 0:I.temporary)??!0:!0};n[14]!==void 0&&(g.value=n[14]),s=new Ar({props:g}),_e.push(()=>He(s,"value",d));const p=[$a,Xa],y=[];function S(B,E){return B[16]===0?0:1}return a=S(n),i=y[a]=p[a](n),{c(){e=v("div"),t=v("div"),l=v("div"),ee(s.$$.fragment),r=Z(),i.c(),c=Z(),this.h()},l(B){e=b(B,"DIV",{class:!0});var E=w(e);t=b(E,"DIV",{class:!0});var L=w(t);l=b(L,"DIV",{class:!0});var T=w(l);te(s.$$.fragment,T),T.forEach(h),L.forEach(h),r=q(E),i.l(E),c=q(E),E.forEach(h),this.h()},h(){u(l,"class","mr-1 max-w-full"),u(t,"class","overflow-hidden w-full"),u(e,"class","flex w-full max-w-fit")},m(B,E){z(B,e,E),m(e,t),m(t,l),le(s,l,null),m(e,r),y[a].m(e,null),m(e,c),f=!0},p(B,E){var T,U,V;n=B;const L={};E&16&&(L.placeholder=n[4].t("Select a model")),E&8&&(L.items=n[3].map(cn)),E&96&&(L.showTemporaryChatControl=n[5].role==="user"?((V=(U=(T=n[6])==null?void 0:T.permissions)==null?void 0:U.chat)==null?void 0:V.temporary)??!0:!0),!o&&E&1&&(o=!0,L.value=n[14],Me(()=>o=!1)),s.$set(L),i.p(n,E)},i(B){f||(N(s.$$.fragment,B),N(i),f=!0)},o(B){O(s.$$.fragment,B),O(i),f=!1},d(B){B&&h(e),se(s),y[a].d()}}}function an(n){let e,t,l=n[4].t("Set as default")+"",s,o,r;return{c(){e=v("div"),t=v("button"),s=ge(l),this.h()},l(a){e=b(a,"DIV",{class:!0});var i=w(e);t=b(i,"BUTTON",{});var c=w(t);s=pe(c,l),c.forEach(h),i.forEach(h),this.h()},h(){u(e,"class","text-left mt-0.5 ml-1 text-[0.7rem] text-gray-500 font-primary")},m(a,i){z(a,e,i),m(e,t),m(t,s),o||(r=fe(t,"click",n[9]),o=!0)},p(a,i){i&16&&l!==(l=a[4].t("Set as default")+"")&&ye(s,l)},d(a){a&&h(e),o=!1,r()}}}function li(n){let e,t,l,s,o=it(n[0]),r=[];for(let c=0;c<o.length;c+=1)r[c]=on(rn(n,o,c));const a=c=>O(r[c],1,1,()=>{r[c]=null});let i=n[2]&&!n[7]&&an(n);return{c(){e=v("div");for(let c=0;c<r.length;c+=1)r[c].c();t=Z(),i&&i.c(),l=Pe(),this.h()},l(c){e=b(c,"DIV",{class:!0});var f=w(e);for(let d=0;d<r.length;d+=1)r[d].l(f);f.forEach(h),t=q(c),i&&i.l(c),l=Pe(),this.h()},h(){u(e,"class","flex flex-col w-full items-start")},m(c,f){z(c,e,f);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(e,null);z(c,t,f),i&&i.m(c,f),z(c,l,f),s=!0},p(c,[f]){if(f&123){o=it(c[0]);let d;for(d=0;d<o.length;d+=1){const g=rn(c,o,d);r[d]?(r[d].p(g,f),N(r[d],1)):(r[d]=on(g),r[d].c(),N(r[d],1),r[d].m(e,null))}for(Re(),d=o.length;d<r.length;d+=1)a(d);Fe()}c[2]&&!c[7]?i?i.p(c,f):(i=an(c),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null)},i(c){if(!s){for(let f=0;f<o.length;f+=1)N(r[f]);s=!0}},o(c){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)O(r[f]);s=!1},d(c){c&&(h(e),h(t),h(l)),xt(r,c),i&&i.d(c)}}}const cn=n=>({value:n.id,label:n.name,model:n});function si(n,e,t){let l,s,o,r,a,i;me(n,Ul,D=>t(3,l=D)),me(n,Xt,D=>t(13,o=D)),me(n,Al,D=>t(5,r=D)),me(n,Vl,D=>t(6,a=D)),me(n,Un,D=>t(7,i=D));const c=bt("i18n");me(n,c,D=>t(4,s=D));let{selectedModels:f=[""]}=e,{disabled:d=!1}=e,{showSetDefault:g=!0}=e;const p=async()=>{if(f.filter(I=>I==="").length){De.error(s.t("Choose a model before saving..."));return}Xt.set({...o,models:f}),await ur(localStorage.token,{ui:o}),De.success(s.t("Default model updated"))};function y(D,I,B,E){B[E]=D,t(0,f),t(3,l)}const S=()=>{t(0,f=[...f,""])},k=D=>{f.splice(D,1),t(0,f),t(3,l)};return n.$$set=D=>{"selectedModels"in D&&t(0,f=D.selectedModels),"disabled"in D&&t(1,d=D.disabled),"showSetDefault"in D&&t(2,g=D.showSetDefault)},n.$$.update=()=>{n.$$.dirty&9&&f.length>0&&l.length>0&&t(0,f=f.map(D=>l.map(I=>I.id).includes(D)?D:""))},[f,d,g,l,s,r,a,i,c,p,y,S,k]}class ni extends Je{constructor(e){super(),Ge(this,e,si,li,xe,{selectedModels:0,disabled:1,showSetDefault:2})}}function ri(n){let e;const t=n[10].default,l=zt(t,n,n[16],null);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,o){l&&l.m(s,o),e=!0},p(s,o){l&&l.p&&(!e||o&65536)&&Ot(l,t,s,s[16],e?At(t,s[16],o,null):Ut(s[16]),null)},i(s){e||(N(l,s),e=!0)},o(s){O(l,s),e=!1},d(s){l&&l.d(s)}}}function oi(n){let e,t,l,s,o=n[3].t("Share")+"",r;return{c(){e=Ne("svg"),t=Ne("path"),l=Z(),s=v("div"),r=ge(o),this.h()},l(a){e=ze(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var i=w(e);t=ze(i,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),w(t).forEach(h),i.forEach(h),l=q(a),s=b(a,"DIV",{class:!0});var c=w(s);r=pe(c,o),c.forEach(h),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M15.75 4.5a3 3 0 1 1 .825 2.066l-8.421 4.679a3.002 3.002 0 0 1 0 1.51l8.421 4.679a3 3 0 1 1-.729 1.31l-8.421-4.678a3 3 0 1 1 0-4.132l8.421-4.679a3 3 0 0 1-.096-.755Z"),u(t,"clip-rule","evenodd"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"class","size-4"),u(s,"class","flex items-center")},m(a,i){z(a,e,i),m(e,t),z(a,l,i),z(a,s,i),m(s,r)},p(a,i){i&8&&o!==(o=a[3].t("Share")+"")&&ye(r,o)},d(a){a&&(h(e),h(l),h(s))}}}function ai(n){let e,t,l,s,o=n[3].t("Download")+"",r;return{c(){e=Ne("svg"),t=Ne("path"),l=Z(),s=v("div"),r=ge(o),this.h()},l(a){e=ze(a,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var i=w(e);t=ze(i,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(t).forEach(h),i.forEach(h),l=q(a),s=b(a,"DIV",{class:!0});var c=w(s);r=pe(c,o),c.forEach(h),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"d","M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width","1.5"),u(e,"stroke","currentColor"),u(e,"class","size-4"),u(s,"class","flex items-center")},m(a,i){z(a,e,i),m(e,t),z(a,l,i),z(a,s,i),m(s,r)},p(a,i){i&8&&o!==(o=a[3].t("Download")+"")&&ye(r,o)},d(a){a&&(h(e),h(l),h(s))}}}function ii(n){let e,t=n[3].t("Export chat (.json)")+"",l;return{c(){e=v("div"),l=ge(t),this.h()},l(s){e=b(s,"DIV",{class:!0});var o=w(e);l=pe(o,t),o.forEach(h),this.h()},h(){u(e,"class","flex items-center line-clamp-1")},m(s,o){z(s,e,o),m(e,l)},p(s,o){o&8&&t!==(t=s[3].t("Export chat (.json)")+"")&&ye(l,t)},d(s){s&&h(e)}}}function ci(n){let e,t=n[3].t("Plain text (.txt)")+"",l;return{c(){e=v("div"),l=ge(t),this.h()},l(s){e=b(s,"DIV",{class:!0});var o=w(e);l=pe(o,t),o.forEach(h),this.h()},h(){u(e,"class","flex items-center line-clamp-1")},m(s,o){z(s,e,o),m(e,l)},p(s,o){o&8&&t!==(t=s[3].t("Plain text (.txt)")+"")&&ye(l,t)},d(s){s&&h(e)}}}function fi(n){let e,t=n[3].t("PDF document (.pdf)")+"",l;return{c(){e=v("div"),l=ge(t),this.h()},l(s){e=b(s,"DIV",{class:!0});var o=w(e);l=pe(o,t),o.forEach(h),this.h()},h(){u(e,"class","flex items-center line-clamp-1")},m(s,o){z(s,e,o),m(e,l)},p(s,o){o&8&&t!==(t=s[3].t("PDF document (.pdf)")+"")&&ye(l,t)},d(s){s&&h(e)}}}function ui(n){let e,t,l,s,o,r;return e=new ml({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[ii]},$$scope:{ctx:n}}}),e.$on("click",n[12]),l=new ml({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[ci]},$$scope:{ctx:n}}}),l.$on("click",n[13]),o=new ml({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[fi]},$$scope:{ctx:n}}}),o.$on("click",n[14]),{c(){ee(e.$$.fragment),t=Z(),ee(l.$$.fragment),s=Z(),ee(o.$$.fragment)},l(a){te(e.$$.fragment,a),t=q(a),te(l.$$.fragment,a),s=q(a),te(o.$$.fragment,a)},m(a,i){le(e,a,i),z(a,t,i),le(l,a,i),z(a,s,i),le(o,a,i),r=!0},p(a,i){const c={};i&65544&&(c.$$scope={dirty:i,ctx:a}),e.$set(c);const f={};i&65544&&(f.$$scope={dirty:i,ctx:a}),l.$set(f);const d={};i&65544&&(d.$$scope={dirty:i,ctx:a}),o.$set(d)},i(a){r||(N(e.$$.fragment,a),N(l.$$.fragment,a),N(o.$$.fragment,a),r=!0)},o(a){O(e.$$.fragment,a),O(l.$$.fragment,a),O(o.$$.fragment,a),r=!1},d(a){a&&(h(t),h(s)),se(e,a),se(l,a),se(o,a)}}}function di(n){let e,t,l,s;return e=new So({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[ai]},$$scope:{ctx:n}}}),l=new bo({props:{class:"w-full rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",transition:Pl,sideOffset:8,$$slots:{default:[ui]},$$scope:{ctx:n}}}),{c(){ee(e.$$.fragment),t=Z(),ee(l.$$.fragment)},l(o){te(e.$$.fragment,o),t=q(o),te(l.$$.fragment,o)},m(o,r){le(e,o,r),z(o,t,r),le(l,o,r),s=!0},p(o,r){const a={};r&65544&&(a.$$scope={dirty:r,ctx:o}),e.$set(a);const i={};r&65544&&(i.$$scope={dirty:r,ctx:o}),l.$set(i)},i(o){s||(N(e.$$.fragment,o),N(l.$$.fragment,o),s=!0)},o(o){O(e.$$.fragment,o),O(l.$$.fragment,o),s=!1},d(o){o&&h(t),se(e,o),se(l,o)}}}function hi(n){let e,t,l,s,o,r,a,i,c;return e=new ml({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[oi]},$$scope:{ctx:n}}}),e.$on("click",n[11]),l=new so({props:{$$slots:{default:[di]},$$scope:{ctx:n}}}),i=new kr({props:{chatId:n[1].id}}),{c(){ee(e.$$.fragment),t=Z(),ee(l.$$.fragment),s=Z(),o=v("hr"),r=Z(),a=v("div"),ee(i.$$.fragment),this.h()},l(f){te(e.$$.fragment,f),t=q(f),te(l.$$.fragment,f),s=q(f),o=b(f,"HR",{class:!0}),r=q(f),a=b(f,"DIV",{class:!0});var d=w(a);te(i.$$.fragment,d),d.forEach(h),this.h()},h(){u(o,"class","border-gray-100 dark:border-gray-800 mt-2.5 mb-1.5"),u(a,"class","flex p-1")},m(f,d){le(e,f,d),z(f,t,d),le(l,f,d),z(f,s,d),z(f,o,d),z(f,r,d),z(f,a,d),le(i,a,null),c=!0},p(f,d){const g={};d&65544&&(g.$$scope={dirty:d,ctx:f}),e.$set(g);const p={};d&65544&&(p.$$scope={dirty:d,ctx:f}),l.$set(p);const y={};d&2&&(y.chatId=f[1].id),i.$set(y)},i(f){c||(N(e.$$.fragment,f),N(l.$$.fragment,f),N(i.$$.fragment,f),c=!0)},o(f){O(e.$$.fragment,f),O(l.$$.fragment,f),O(i.$$.fragment,f),c=!1},d(f){f&&(h(t),h(s),h(o),h(r),h(a)),se(e,f),se(l,f),se(i)}}}function mi(n){let e,t,l;return t=new Xl({props:{class:"w-full max-w-[200px] rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:8,side:"bottom",align:"end",transition:Pl,$$slots:{default:[hi]},$$scope:{ctx:n}}}),{c(){e=v("div"),ee(t.$$.fragment),this.h()},l(s){e=b(s,"DIV",{slot:!0});var o=w(e);te(t.$$.fragment,o),o.forEach(h),this.h()},h(){u(e,"slot","content")},m(s,o){z(s,e,o),le(t,e,null),l=!0},p(s,o){const r={};o&65547&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(s){l||(N(t.$$.fragment,s),l=!0)},o(s){O(t.$$.fragment,s),l=!1},d(s){s&&h(e),se(t)}}}function gi(n){let e,t;return e=new Yl({props:{$$slots:{content:[mi],default:[ri]},$$scope:{ctx:n}}}),e.$on("change",n[15]),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,s){le(e,l,s),t=!0},p(l,[s]){const o={};s&65547&&(o.$$scope={dirty:s,ctx:l}),e.$set(o)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function pi(n,e,t){let l,{$$slots:s={},$$scope:o}=e;const{saveAs:r}=Rr,a=bt("i18n");me(n,a,L=>t(3,l=L));let{shareEnabled:i=!1}=e,{shareHandler:c}=e,{downloadHandler:f}=e,{chat:d}=e,{onClose:g=()=>{}}=e;const p=async()=>{const L=d.chat;console.log("download",d);const T=L.messages.reduce((V,_,H,W)=>`${V}### ${_.role.toUpperCase()}
${_.content}

`,"");let U=new Blob([T],{type:"text/plain"});r(U,`chat-${L.title}.txt`)},y=async()=>{const L=d.chat;console.log("download",d);const T=await Fr(L),U=window.URL.createObjectURL(T),V=document.createElement("a");V.href=U,V.download=`chat-${L.title}.pdf`,document.body.appendChild(V),V.click(),document.body.removeChild(V),window.URL.revokeObjectURL(U)},S=async()=>{let L=new Blob([JSON.stringify([d])],{type:"application/json"});r(L,`chat-export-${Date.now()}.json`)},k=()=>{c()},D=()=>{S()},I=()=>{p()},B=()=>{y()},E=L=>{L.detail===!1&&g()};return n.$$set=L=>{"shareEnabled"in L&&t(8,i=L.shareEnabled),"shareHandler"in L&&t(0,c=L.shareHandler),"downloadHandler"in L&&t(9,f=L.downloadHandler),"chat"in L&&t(1,d=L.chat),"onClose"in L&&t(2,g=L.onClose),"$$scope"in L&&t(16,o=L.$$scope)},[c,d,g,l,a,p,y,S,i,f,s,k,D,I,B,E,o]}class _i extends Je{constructor(e){super(),Ge(this,e,pi,gi,xe,{shareEnabled:8,shareHandler:0,downloadHandler:9,chat:1,onClose:2})}}function vi(n){let e,t;return{c(){e=Ne("svg"),t=Ne("path"),this.h()},l(l){e=ze(l,"svg",{xmlns:!0,viewBox:!0,stroke:!0,fill:!0,class:!0,"stroke-width":!0});var s=w(e);t=ze(s,"path",{d:!0}),w(t).forEach(h),s.forEach(h),this.h()},h(){u(t,"d","M18.75 12.75h1.5a.75.75 0 0 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5ZM12 6a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 12 6ZM12 18a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 12 18ZM3.75 6.75h1.5a.75.75 0 1 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5ZM5.25 18.75h-1.5a.75.75 0 0 1 0-1.5h1.5a.75.75 0 0 1 0 1.5ZM3 12a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 3 12ZM9 3.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM12.75 12a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0ZM9 15.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 24 24"),u(e,"stroke","currentColor"),u(e,"fill","currentColor"),u(e,"class",n[0]),u(e,"stroke-width",n[1])},m(l,s){z(l,e,s),m(e,t)},p(l,[s]){s&1&&u(e,"class",l[0]),s&2&&u(e,"stroke-width",l[1])},i:Se,o:Se,d(l){l&&h(e)}}}function bi(n,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:s="1.5"}=e;return n.$$set=o=>{"className"in o&&t(0,l=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[l,s]}class wi extends Je{constructor(e){super(),Ge(this,e,bi,vi,xe,{className:0,strokeWidth:1})}}function fn(n){let e,t,l;function s(r){n[16](r)}let o={showSetDefault:!n[3]};return n[0]!==void 0&&(o.selectedModels=n[0]),e=new ni({props:o}),_e.push(()=>He(e,"selectedModels",s)),{c(){ee(e.$$.fragment)},l(r){te(e.$$.fragment,r)},m(r,a){le(e,r,a),l=!0},p(r,a){const i={};a&8&&(i.showSetDefault=!r[3]),!t&&a&1&&(t=!0,i.selectedModels=r[0],Me(()=>t=!1)),e.$set(i)},i(r){l||(N(e.$$.fragment,r),l=!0)},o(r){O(e.$$.fragment,r),l=!1},d(r){se(e,r)}}}function un(n){let e,t;return e=new _i({props:{chat:n[4],shareEnabled:n[3],shareHandler:n[17],downloadHandler:n[18],$$slots:{default:[ki]},$$scope:{ctx:n}}}),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,s){le(e,l,s),t=!0},p(l,s){const o={};s&16&&(o.chat=l[4]),s&8&&(o.shareEnabled=l[3]),s&64&&(o.shareHandler=l[17]),s&128&&(o.downloadHandler=l[18]),s&8388608&&(o.$$scope={dirty:s,ctx:l}),e.$set(o)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function ki(n){let e,t='<div class="m-auto self-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"></path></svg></div>';return{c(){e=v("button"),e.innerHTML=t,this.h()},l(l){e=b(l,"BUTTON",{class:!0,id:!0,"data-svelte-h":!0}),qe(e)!=="svelte-1st1t1k"&&(e.innerHTML=t),this.h()},h(){u(e,"class","hidden md:flex cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),u(e,"id","chat-context-menu-button")},m(l,s){z(l,e,s)},p:Se,d(l){l&&h(e)}}}function yi(n){let e,t,l,s,o,r;return l=new wi({props:{className:" size-5",strokeWidth:"0.5"}}),{c(){e=v("button"),t=v("div"),ee(l.$$.fragment),this.h()},l(a){e=b(a,"BUTTON",{class:!0});var i=w(e);t=b(i,"DIV",{class:!0});var c=w(t);te(l.$$.fragment,c),c.forEach(h),i.forEach(h),this.h()},h(){u(t,"class","m-auto self-center"),u(e,"class","flex cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition")},m(a,i){z(a,e,i),m(e,t),le(l,t,null),s=!0,o||(r=fe(e,"click",n[19]),o=!0)},p:Se,i(a){s||(N(l.$$.fragment,a),s=!0)},o(a){O(l.$$.fragment,a),s=!1},d(a){a&&h(e),se(l),o=!1,r()}}}function Ei(n){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z"></path><path d="M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z"></path></svg>',s,o,r;return{c(){e=v("button"),t=v("div"),t.innerHTML=l,this.h()},l(a){e=b(a,"BUTTON",{id:!0,class:!0});var i=w(e);t=b(i,"DIV",{class:!0,"data-svelte-h":!0}),qe(t)!=="svelte-1fcii9y"&&(t.innerHTML=l),i.forEach(h),this.h()},h(){u(t,"class","m-auto self-center"),u(e,"id","new-chat-button"),u(e,"class",s="flex "+(n[9]?"md:hidden":"")+" cursor-pointer px-2 py-2 rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-850 transition")},m(a,i){z(a,e,i),m(e,t),o||(r=fe(e,"click",n[20]),o=!0)},p(a,i){i&512&&s!==(s="flex "+(a[9]?"md:hidden":"")+" cursor-pointer px-2 py-2 rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-850 transition")&&u(e,"class",s)},d(a){a&&h(e),o=!1,r()}}}function dn(n){let e,t;return e=new Er({props:{className:"max-w-[200px]",role:n[11].role,$$slots:{default:[Ii]},$$scope:{ctx:n}}}),e.$on("show",n[21]),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,s){le(e,l,s),t=!0},p(l,s){const o={};s&2048&&(o.role=l[11].role),s&8390656&&(o.$$scope={dirty:s,ctx:l}),e.$set(o)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function Ii(n){let e,t,l,s;return{c(){e=v("button"),t=v("div"),l=v("img"),this.h()},l(o){e=b(o,"BUTTON",{class:!0,"aria-label":!0});var r=w(e);t=b(r,"DIV",{class:!0});var a=w(t);l=b(a,"IMG",{src:!0,class:!0,alt:!0,draggable:!0}),a.forEach(h),r.forEach(h),this.h()},h(){rl(l.src,s=n[11].profile_image_url)||u(l,"src",s),u(l,"class","size-6 object-cover rounded-full"),u(l,"alt","User profile"),u(l,"draggable","false"),u(t,"class","self-center"),u(e,"class","select-none flex rounded-xl p-1.5 w-full hover:bg-gray-50 dark:hover:bg-gray-850 transition"),u(e,"aria-label","User Menu")},m(o,r){z(o,e,r),m(e,t),m(t,l)},p(o,r){r&2048&&!rl(l.src,s=o[11].profile_image_url)&&u(l,"src",s)},d(o){o&&h(e)}}}function Di(n){let e,t,l,s,o,r,a,i,c,f,d,g,p,y,S,k,D,I,B,E,L,T,U;function V(A){n[14](A)}let _={chatId:n[8]};n[6]!==void 0&&(_.show=n[6]),e=new yr({props:_}),_e.push(()=>He(e,"show",V)),f=new Wr({});let H=n[5]&&fn(n),W=n[3]&&n[4]&&n[4].id&&un(n);D=new qt({props:{content:n[10].t("Controls"),$$slots:{default:[yi]},$$scope:{ctx:n}}}),B=new qt({props:{content:n[10].t("New Chat"),$$slots:{default:[Ei]},$$scope:{ctx:n}}});let R=n[11]!==void 0&&dn(n);return{c(){ee(e.$$.fragment),l=Z(),s=v("nav"),o=v("div"),r=v("div"),a=v("div"),i=v("button"),c=v("div"),ee(f.$$.fragment),g=Z(),p=v("div"),H&&H.c(),y=Z(),S=v("div"),W&&W.c(),k=Z(),ee(D.$$.fragment),I=Z(),ee(B.$$.fragment),E=Z(),R&&R.c(),this.h()},l(A){te(e.$$.fragment,A),l=q(A),s=b(A,"NAV",{id:!0,class:!0});var j=w(s);o=b(j,"DIV",{class:!0});var G=w(o);r=b(G,"DIV",{class:!0});var x=w(r);a=b(x,"DIV",{class:!0});var F=w(a);i=b(F,"BUTTON",{id:!0,class:!0});var ae=w(i);c=b(ae,"DIV",{class:!0});var be=w(c);te(f.$$.fragment,be),be.forEach(h),ae.forEach(h),F.forEach(h),g=q(x),p=b(x,"DIV",{class:!0});var Ie=w(p);H&&H.l(Ie),Ie.forEach(h),y=q(x),S=b(x,"DIV",{class:!0});var X=w(S);W&&W.l(X),k=q(X),te(D.$$.fragment,X),I=q(X),te(B.$$.fragment,X),E=q(X),R&&R.l(X),X.forEach(h),x.forEach(h),G.forEach(h),j.forEach(h),this.h()},h(){u(c,"class","m-auto self-center"),u(i,"id","sidebar-toggle-button"),u(i,"class","cursor-pointer px-2 py-2 flex rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),u(a,"class",d=(n[9]?"md:hidden":"")+" mr-3 self-start flex flex-none items-center text-gray-600 dark:text-gray-400"),u(p,"class","flex-1 overflow-hidden max-w-full"),u(S,"class","self-start flex flex-none items-center text-gray-600 dark:text-gray-400"),u(r,"class","flex items-center w-full max-w-full"),u(o,"class","flex max-w-full w-full mx-auto px-5 pt-0.5 md:px-[1rem]"),u(s,"id","nav"),u(s,"class","sticky py-2.5 top-0 flex flex-row justify-center z-10")},m(A,j){le(e,A,j),z(A,l,j),z(A,s,j),m(s,o),m(o,r),m(r,a),m(a,i),m(i,c),le(f,c,null),m(r,g),m(r,p),H&&H.m(p,null),m(r,y),m(r,S),W&&W.m(S,null),m(S,k),le(D,S,null),m(S,I),le(B,S,null),m(S,E),R&&R.m(S,null),L=!0,T||(U=fe(i,"click",n[15]),T=!0)},p(A,[j]){const G={};j&256&&(G.chatId=A[8]),!t&&j&64&&(t=!0,G.show=A[6],Me(()=>t=!1)),e.$set(G),(!L||j&512&&d!==(d=(A[9]?"md:hidden":"")+" mr-3 self-start flex flex-none items-center text-gray-600 dark:text-gray-400"))&&u(a,"class",d),A[5]?H?(H.p(A,j),j&32&&N(H,1)):(H=fn(A),H.c(),N(H,1),H.m(p,null)):H&&(Re(),O(H,1,1,()=>{H=null}),Fe()),A[3]&&A[4]&&A[4].id?W?(W.p(A,j),j&24&&N(W,1)):(W=un(A),W.c(),N(W,1),W.m(S,k)):W&&(Re(),O(W,1,1,()=>{W=null}),Fe());const x={};j&1024&&(x.content=A[10].t("Controls")),j&8388610&&(x.$$scope={dirty:j,ctx:A}),D.$set(x);const F={};j&1024&&(F.content=A[10].t("New Chat")),j&8389124&&(F.$$scope={dirty:j,ctx:A}),B.$set(F),A[11]!==void 0?R?(R.p(A,j),j&2048&&N(R,1)):(R=dn(A),R.c(),N(R,1),R.m(S,null)):R&&(Re(),O(R,1,1,()=>{R=null}),Fe())},i(A){L||(N(e.$$.fragment,A),N(f.$$.fragment,A),N(H),N(W),N(D.$$.fragment,A),N(B.$$.fragment,A),N(R),L=!0)},o(A){O(e.$$.fragment,A),O(f.$$.fragment,A),O(H),O(W),O(D.$$.fragment,A),O(B.$$.fragment,A),O(R),L=!1},d(A){A&&(h(l),h(s)),se(e,A),se(f),H&&H.d(),W&&W.d(),se(D),se(B),R&&R.d(),T=!1,U()}}}function Si(n,e,t){let l,s,o,r,a;me(n,An,H=>t(22,l=H)),me(n,wl,H=>t(8,s=H)),me(n,Kl,H=>t(9,o=H)),me(n,Al,H=>t(11,a=H));const i=bt("i18n");me(n,i,H=>t(10,r=H));let{initNewChat:c}=e,{title:f=l}=e,{shareEnabled:d=!1}=e,{chat:g}=e,{selectedModels:p}=e,{showModelSelector:y=!0}=e,{showControls:S=!1}=e,k=!1,D=!1;function I(H){k=H,t(6,k)}const B=()=>{Kl.set(!o)};function E(H){p=H,t(0,p)}const L=()=>{t(6,k=!k)},T=()=>{t(7,D=!D)},U=()=>{t(1,S=!S)},V=()=>{c()},_=H=>{H.detail==="archived-chat"&&sr.set(!0)};return n.$$set=H=>{"initNewChat"in H&&t(2,c=H.initNewChat),"title"in H&&t(13,f=H.title),"shareEnabled"in H&&t(3,d=H.shareEnabled),"chat"in H&&t(4,g=H.chat),"selectedModels"in H&&t(0,p=H.selectedModels),"showModelSelector"in H&&t(5,y=H.showModelSelector),"showControls"in H&&t(1,S=H.showControls)},[p,S,c,d,g,y,k,D,s,o,r,a,i,f,I,B,E,L,T,U,V,_]}class Ci extends Je{constructor(e){super(),Ge(this,e,Si,Di,xe,{initNewChat:2,title:13,shareEnabled:3,chat:4,selectedModels:0,showModelSelector:5,showControls:1})}}function hn(n,e,t){const l=n.slice();return l[23]=e[t],l[25]=t,l}function mn(n,e,t){const l=n.slice();return l[20]=e[t],l[22]=t,l}function Ti(n){let e,t=n[5].t("Select a function")+"",l,s,o=it(n[7]),r=[];for(let a=0;a<o.length;a+=1)r[a]=gn(hn(n,o,a));return{c(){e=v("option"),l=ge(t);for(let a=0;a<r.length;a+=1)r[a].c();s=Pe(),this.h()},l(a){e=b(a,"OPTION",{class:!0});var i=w(e);l=pe(i,t),i.forEach(h);for(let c=0;c<r.length;c+=1)r[c].l(a);s=Pe(),this.h()},h(){e.__value="",Zt(e,e.__value),e.selected=!0,e.disabled=!0,u(e,"class","bg-gray-100 dark:bg-gray-800")},m(a,i){z(a,e,i),m(e,l);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,i);z(a,s,i)},p(a,i){if(i&32&&t!==(t=a[5].t("Select a function")+"")&&ye(l,t),i&128){o=it(a[7]);let c;for(c=0;c<o.length;c+=1){const f=hn(a,o,c);r[c]?r[c].p(f,i):(r[c]=gn(f),r[c].c(),r[c].m(s.parentNode,s))}for(;c<r.length;c+=1)r[c].d(1);r.length=o.length}},d(a){a&&(h(e),h(s)),xt(r,a)}}}function Vi(n){let e,t=n[5].t("Select a tool")+"",l,s,o=it(n[6]),r=[];for(let a=0;a<o.length;a+=1)r[a]=pn(mn(n,o,a));return{c(){e=v("option"),l=ge(t);for(let a=0;a<r.length;a+=1)r[a].c();s=Pe(),this.h()},l(a){e=b(a,"OPTION",{class:!0});var i=w(e);l=pe(i,t),i.forEach(h);for(let c=0;c<r.length;c+=1)r[c].l(a);s=Pe(),this.h()},h(){e.__value="",Zt(e,e.__value),e.selected=!0,e.disabled=!0,u(e,"class","bg-gray-100 dark:bg-gray-800")},m(a,i){z(a,e,i),m(e,l);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,i);z(a,s,i)},p(a,i){if(i&32&&t!==(t=a[5].t("Select a tool")+"")&&ye(l,t),i&64){o=it(a[6]);let c;for(c=0;c<o.length;c+=1){const f=mn(a,o,c);r[c]?r[c].p(f,i):(r[c]=pn(f),r[c].c(),r[c].m(s.parentNode,s))}for(;c<r.length;c+=1)r[c].d(1);r.length=o.length}},d(a){a&&(h(e),h(s)),xt(r,a)}}}function gn(n){let e,t=n[23].name+"",l,s;return{c(){e=v("option"),l=ge(t),this.h()},l(o){e=b(o,"OPTION",{class:!0});var r=w(e);l=pe(r,t),r.forEach(h),this.h()},h(){e.__value=s=n[23].id,Zt(e,e.__value),u(e,"class","bg-gray-100 dark:bg-gray-800")},m(o,r){z(o,e,r),m(e,l)},p(o,r){r&128&&t!==(t=o[23].name+"")&&ye(l,t),r&128&&s!==(s=o[23].id)&&(e.__value=s,Zt(e,e.__value))},d(o){o&&h(e)}}}function pn(n){let e,t=n[20].name+"",l,s;return{c(){e=v("option"),l=ge(t),this.h()},l(o){e=b(o,"OPTION",{class:!0});var r=w(e);l=pe(r,t),r.forEach(h),this.h()},h(){e.__value=s=n[20].id,Zt(e,e.__value),u(e,"class","bg-gray-100 dark:bg-gray-800")},m(o,r){z(o,e,r),m(e,l)},p(o,r){r&64&&t!==(t=o[20].name+"")&&ye(l,t),r&64&&s!==(s=o[20].id)&&(e.__value=s,Zt(e,e.__value))},d(o){o&&h(e)}}}function _n(n){let e,t,l,s,o,r;const a=[Hi,Mi],i=[];function c(f,d){return f[2]?1:0}return s=c(n),o=i[s]=a[s](n),{c(){e=v("hr"),t=Z(),l=v("div"),o.c(),this.h()},l(f){e=b(f,"HR",{class:!0}),t=q(f),l=b(f,"DIV",{class:!0});var d=w(l);o.l(d),d.forEach(h),this.h()},h(){u(e,"class","dark:border-gray-800 my-1 w-full"),u(l,"class","my-2 text-xs")},m(f,d){z(f,e,d),z(f,t,d),z(f,l,d),i[s].m(l,null),r=!0},p(f,d){let g=s;s=c(f),s===g?i[s].p(f,d):(Re(),O(i[g],1,1,()=>{i[g]=null}),Fe(),o=i[s],o?o.p(f,d):(o=i[s]=a[s](f),o.c()),N(o,1),o.m(l,null))},i(f){r||(N(o),r=!0)},o(f){O(o),r=!1},d(f){f&&(h(e),h(t),h(l)),i[s].d()}}}function Mi(n){let e,t;return e=new Yr({props:{className:"size-5"}}),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,s){le(e,l,s),t=!0},p:Se,i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function Hi(n){let e,t,l;function s(r){n[15](r)}let o={valvesSpec:n[3]};return n[4]!==void 0&&(o.valves=n[4]),e=new Xr({props:o}),_e.push(()=>He(e,"valves",s)),e.$on("change",n[16]),{c(){ee(e.$$.fragment)},l(r){te(e.$$.fragment,r)},m(r,a){le(e,r,a),l=!0},p(r,a){const i={};a&8&&(i.valvesSpec=r[3]),!t&&a&16&&(t=!0,i.valves=r[4],Me(()=>t=!1)),e.$set(i)},i(r){l||(N(e.$$.fragment,r),l=!0)},o(r){O(e.$$.fragment,r),l=!1},d(r){se(e,r)}}}function Bi(n){let e,t,l,s,o,r,a,i=n[5].t("Tools")+"",c,f,d=n[5].t("Functions")+"",g,p,y,S,k,D,I,B;function E(V,_){if(V[0]==="tools")return Vi;if(V[0]==="functions")return Ti}let L=E(n),T=L&&L(n),U=n[1]&&_n(n);return{c(){e=v("form"),t=v("div"),l=v("div"),s=v("div"),o=v("div"),r=v("select"),a=v("option"),c=ge(i),f=v("option"),g=ge(d),p=Z(),y=v("div"),S=v("select"),T&&T.c(),k=Z(),U&&U.c(),this.h()},l(V){e=b(V,"FORM",{class:!0});var _=w(e);t=b(_,"DIV",{class:!0});var H=w(t);l=b(H,"DIV",{class:!0});var W=w(l);s=b(W,"DIV",{class:!0});var R=w(s);o=b(R,"DIV",{class:!0});var A=w(o);r=b(A,"SELECT",{class:!0,placeholder:!0});var j=w(r);a=b(j,"OPTION",{class:!0});var G=w(a);c=pe(G,i),G.forEach(h),f=b(j,"OPTION",{class:!0});var x=w(f);g=pe(x,d),x.forEach(h),j.forEach(h),A.forEach(h),p=q(R),y=b(R,"DIV",{class:!0});var F=w(y);S=b(F,"SELECT",{class:!0});var ae=w(S);T&&T.l(ae),ae.forEach(h),F.forEach(h),R.forEach(h),W.forEach(h),k=q(H),U&&U.l(H),H.forEach(h),_.forEach(h),this.h()},h(){a.__value="tools",Zt(a,a.__value),u(a,"class","bg-gray-100 dark:bg-gray-800"),f.__value="functions",Zt(f,f.__value),u(f,"class","bg-gray-100 dark:bg-gray-800"),u(r,"class","w-full rounded text-xs py-2 px-1 bg-transparent outline-none"),u(r,"placeholder","Select"),n[0]===void 0&&kl(()=>n[12].call(r)),u(o,"class","flex-1"),u(S,"class","w-full rounded py-2 px-1 text-xs bg-transparent outline-none"),n[1]===void 0&&kl(()=>n[13].call(S)),u(y,"class","flex-1"),u(s,"class","flex gap-2"),u(l,"class","space-y-1"),u(t,"class","flex flex-col"),u(e,"class","flex flex-col h-full justify-between space-y-3 text-sm")},m(V,_){z(V,e,_),m(e,t),m(t,l),m(l,s),m(s,o),m(o,r),m(r,a),m(a,c),m(r,f),m(f,g),Zl(r,n[0],!0),m(s,p),m(s,y),m(y,S),T&&T.m(S,null),Zl(S,n[1],!0),m(t,k),U&&U.m(t,null),D=!0,I||(B=[fe(r,"change",n[12]),fe(S,"change",n[13]),fe(S,"change",n[14]),fe(e,"submit",Bn(n[17]))],I=!0)},p(V,[_]){(!D||_&32)&&i!==(i=V[5].t("Tools")+"")&&ye(c,i),(!D||_&32)&&d!==(d=V[5].t("Functions")+"")&&ye(g,d),_&1&&Zl(r,V[0]),L===(L=E(V))&&T?T.p(V,_):(T&&T.d(1),T=L&&L(V),T&&(T.c(),T.m(S,null))),_&194&&Zl(S,V[1]),V[1]?U?(U.p(V,_),_&2&&N(U,1)):(U=_n(V),U.c(),N(U,1),U.m(t,null)):U&&(Re(),O(U,1,1,()=>{U=null}),Fe())},i(V){D||(N(U),D=!0)},o(V){O(U),D=!1},d(V){V&&h(e),T&&T.d(),U&&U.d(),I=!1,Pt(B)}}}function Li(n,e,t){let l,s,o;me(n,On,U=>t(6,s=U)),me(n,nr,U=>t(7,o=U));const r=el(),a=bt("i18n");me(n,a,U=>t(5,l=U));let i="tools",c="",f=!1,d=null,g={},p;const y=async()=>{p&&clearTimeout(p),p=setTimeout(()=>{k()},500)},S=async()=>{var U;if(t(2,f=!0),i==="tools"?(t(4,g=await qr(localStorage.token,c)),t(3,d=await xr(localStorage.token,c))):i==="functions"&&(t(4,g=await Gr(localStorage.token,c)),t(3,d=await Qr(localStorage.token,c))),d)for(const V in d.properties)((U=d.properties[V])==null?void 0:U.type)==="array"&&t(4,g[V]=(g[V]??[]).join(","),g);t(2,f=!1)},k=async()=>{var U;if(d){for(const V in d.properties)((U=d.properties[V])==null?void 0:U.type)==="array"&&t(4,g[V]=(g[V]??"").split(",").map(_=>_.trim()),g);if(i==="tools"){const V=await Jr(localStorage.token,c,g).catch(_=>(De.error(_),null));V&&(De.success(l.t("Valves updated")),t(4,g=V))}else if(i==="functions"){const V=await Kr(localStorage.token,c,g).catch(_=>(De.error(_),null));V&&(De.success(l.t("Valves updated")),t(4,g=V))}}};function D(){i=us(this),t(0,i)}function I(){c=us(this),t(1,c),t(0,i)}const B=async()=>{await Be()};function E(U){g=U,t(4,g)}const L=()=>{y()},T=()=>{k(),r("save")};return n.$$.update=()=>{n.$$.dirty&1&&i&&t(1,c=""),n.$$.dirty&2&&c&&S()},[i,c,f,d,g,l,s,o,r,a,y,k,D,I,B,E,L,T]}class Ni extends Je{constructor(e){super(),Ge(this,e,Li,Bi,xe,{})}}function vn(n,e,t){const l=n.slice();return l[11]=e[t],l[13]=t,l}function bn(n){let e,t,l,s;return e=new xl({props:{title:n[2].t("Files"),open:!0,$$slots:{content:[zi]},$$scope:{ctx:n}}}),{c(){ee(e.$$.fragment),t=Z(),l=v("hr"),this.h()},l(o){te(e.$$.fragment,o),t=q(o),l=b(o,"HR",{class:!0}),this.h()},h(){u(l,"class","my-2 border-gray-100 dark:border-gray-800")},m(o,r){le(e,o,r),z(o,t,r),z(o,l,r),s=!0},p(o,r){const a={};r&4&&(a.title=o[2].t("Files")),r&16385&&(a.$$scope={dirty:r,ctx:o}),e.$set(a)},i(o){s||(N(e.$$.fragment,o),s=!0)},o(o){O(e.$$.fragment,o),s=!1},d(o){o&&(h(t),h(l)),se(e,o)}}}function wn(n){var s,o;let e,t;function l(){return n[8](n[13])}return e=new zn({props:{className:"w-full",url:`${(s=n[11])==null?void 0:s.url}`,name:n[11].name,type:n[11].type,size:(o=n[11])==null?void 0:o.size,dismissible:!0}}),e.$on("dismiss",l),{c(){ee(e.$$.fragment)},l(r){te(e.$$.fragment,r)},m(r,a){le(e,r,a),t=!0},p(r,a){var c,f;n=r;const i={};a&1&&(i.url=`${(c=n[11])==null?void 0:c.url}`),a&1&&(i.name=n[11].name),a&1&&(i.type=n[11].type),a&1&&(i.size=(f=n[11])==null?void 0:f.size),e.$set(i)},i(r){t||(N(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){se(e,r)}}}function zi(n){let e,t,l=it(n[0]),s=[];for(let r=0;r<l.length;r+=1)s[r]=wn(vn(n,l,r));const o=r=>O(s[r],1,1,()=>{s[r]=null});return{c(){e=v("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=b(r,"DIV",{class:!0,slot:!0});var a=w(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(h),this.h()},h(){u(e,"class","flex flex-col gap-1 mt-1.5"),u(e,"slot","content")},m(r,a){z(r,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(r,a){if(a&1){l=it(r[0]);let i;for(i=0;i<l.length;i+=1){const c=vn(r,l,i);s[i]?(s[i].p(c,a),N(s[i],1)):(s[i]=wn(c),s[i].c(),N(s[i],1),s[i].m(e,null))}for(Re(),i=l.length;i<s.length;i+=1)o(i);Fe()}},i(r){if(!t){for(let a=0;a<l.length;a+=1)N(s[a]);t=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)O(s[a]);t=!1},d(r){r&&h(e),xt(s,r)}}}function Oi(n){let e,t,l;return t=new Ni({}),{c(){e=v("div"),ee(t.$$.fragment),this.h()},l(s){e=b(s,"DIV",{class:!0,slot:!0});var o=w(e);te(t.$$.fragment,o),o.forEach(h),this.h()},h(){u(e,"class","text-sm mt-1.5"),u(e,"slot","content")},m(s,o){z(s,e,o),le(t,e,null),l=!0},p:Se,i(s){l||(N(t.$$.fragment,s),l=!0)},o(s){O(t.$$.fragment,s),l=!1},d(s){s&&h(e),se(t)}}}function Ui(n){let e,t,l,s,o;return{c(){e=v("div"),t=v("textarea"),this.h()},l(r){e=b(r,"DIV",{class:!0,slot:!0});var a=w(e);t=b(a,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),w(t).forEach(h),a.forEach(h),this.h()},h(){u(t,"class","w-full rounded-lg px-3.5 py-2.5 text-sm dark:text-gray-300 dark:bg-gray-850 border border-gray-100 dark:border-gray-800 outline-none resize-none"),u(t,"rows","4"),u(t,"placeholder",l=n[2].t("Enter system prompt")),u(e,"class","mt-1.5"),u(e,"slot","content")},m(r,a){z(r,e,a),m(e,t),Zt(t,n[1].system),s||(o=fe(t,"input",n[9]),s=!0)},p(r,a){a&4&&l!==(l=r[2].t("Enter system prompt"))&&u(t,"placeholder",l),a&2&&Zt(t,r[1].system)},d(r){r&&h(e),s=!1,o()}}}function Ai(n){var i;let e,t,l,s,o;function r(c){n[10](c)}let a={admin:((i=n[3])==null?void 0:i.role)==="admin"};return n[1]!==void 0&&(a.params=n[1]),l=new Zr({props:a}),_e.push(()=>He(l,"params",r)),{c(){e=v("div"),t=v("div"),ee(l.$$.fragment),this.h()},l(c){e=b(c,"DIV",{class:!0,slot:!0});var f=w(e);t=b(f,"DIV",{});var d=w(t);te(l.$$.fragment,d),d.forEach(h),f.forEach(h),this.h()},h(){u(e,"class","text-sm mt-1.5"),u(e,"slot","content")},m(c,f){z(c,e,f),m(e,t),le(l,t,null),o=!0},p(c,f){var g;const d={};f&8&&(d.admin=((g=c[3])==null?void 0:g.role)==="admin"),!s&&f&2&&(s=!0,d.params=c[1],Me(()=>s=!1)),l.$set(d)},i(c){o||(N(l.$$.fragment,c),o=!0)},o(c){O(l.$$.fragment,c),o=!1},d(c){c&&h(e),se(l)}}}function Pi(n){let e,t,l,s=n[2].t("Chat Controls")+"",o,r,a,i,c,f,d,g,p,y,S,k,D,I,B,E,L,T,U;i=new Zn({props:{className:"size-4"}});let V=n[0].length>0&&bn(n);return g=new xl({props:{title:n[2].t("Valves"),$$slots:{content:[Oi]},$$scope:{ctx:n}}}),k=new xl({props:{title:n[2].t("System Prompt"),open:!0,$$slots:{content:[Ui]},$$scope:{ctx:n}}}),E=new xl({props:{title:n[2].t("Advanced Params"),open:!0,$$slots:{content:[Ai]},$$scope:{ctx:n}}}),{c(){e=v("div"),t=v("div"),l=v("div"),o=ge(s),r=Z(),a=v("button"),ee(i.$$.fragment),c=Z(),f=v("div"),V&&V.c(),d=Z(),ee(g.$$.fragment),p=Z(),y=v("hr"),S=Z(),ee(k.$$.fragment),D=Z(),I=v("hr"),B=Z(),ee(E.$$.fragment),this.h()},l(_){e=b(_,"DIV",{class:!0});var H=w(e);t=b(H,"DIV",{class:!0});var W=w(t);l=b(W,"DIV",{class:!0});var R=w(l);o=pe(R,s),R.forEach(h),r=q(W),a=b(W,"BUTTON",{class:!0});var A=w(a);te(i.$$.fragment,A),A.forEach(h),W.forEach(h),c=q(H),f=b(H,"DIV",{class:!0});var j=w(f);V&&V.l(j),d=q(j),te(g.$$.fragment,j),p=q(j),y=b(j,"HR",{class:!0}),S=q(j),te(k.$$.fragment,j),D=q(j),I=b(j,"HR",{class:!0}),B=q(j),te(E.$$.fragment,j),j.forEach(h),H.forEach(h),this.h()},h(){u(l,"class","text-lg font-medium self-center font-primary"),u(a,"class","self-center"),u(t,"class","flex justify-between dark:text-gray-100 mb-2"),u(y,"class","my-2 border-gray-100 dark:border-gray-800"),u(I,"class","my-2 border-gray-100 dark:border-gray-800"),u(f,"class","dark:text-gray-200 text-sm font-primary py-0.5"),u(e,"class","dark:text-white")},m(_,H){z(_,e,H),m(e,t),m(t,l),m(l,o),m(t,r),m(t,a),le(i,a,null),m(e,c),m(e,f),V&&V.m(f,null),m(f,d),le(g,f,null),m(f,p),m(f,y),m(f,S),le(k,f,null),m(f,D),m(f,I),m(f,B),le(E,f,null),L=!0,T||(U=fe(a,"click",n[7]),T=!0)},p(_,[H]){(!L||H&4)&&s!==(s=_[2].t("Chat Controls")+"")&&ye(o,s),_[0].length>0?V?(V.p(_,H),H&1&&N(V,1)):(V=bn(_),V.c(),N(V,1),V.m(f,d)):V&&(Re(),O(V,1,1,()=>{V=null}),Fe());const W={};H&4&&(W.title=_[2].t("Valves")),H&16384&&(W.$$scope={dirty:H,ctx:_}),g.$set(W);const R={};H&4&&(R.title=_[2].t("System Prompt")),H&16390&&(R.$$scope={dirty:H,ctx:_}),k.$set(R);const A={};H&4&&(A.title=_[2].t("Advanced Params")),H&16394&&(A.$$scope={dirty:H,ctx:_}),E.$set(A)},i(_){L||(N(i.$$.fragment,_),N(V),N(g.$$.fragment,_),N(k.$$.fragment,_),N(E.$$.fragment,_),L=!0)},o(_){O(i.$$.fragment,_),O(V),O(g.$$.fragment,_),O(k.$$.fragment,_),O(E.$$.fragment,_),L=!1},d(_){_&&h(e),se(i),V&&V.d(),se(g),se(k),se(E),T=!1,U()}}}function ji(n,e,t){let l,s;me(n,Al,y=>t(3,s=y));const o=el(),r=bt("i18n");me(n,r,y=>t(2,l=y));let{models:a=[]}=e,{chatFiles:i=[]}=e,{params:c={}}=e;const f=()=>{o("close")},d=y=>{i.splice(y,1),t(0,i)};function g(){c.system=this.value,t(1,c)}function p(y){c=y,t(1,c)}return n.$$set=y=>{"models"in y&&t(6,a=y.models),"chatFiles"in y&&t(0,i=y.chatFiles),"params"in y&&t(1,c=y.params)},[i,c,l,s,o,r,a,f,d,g,p]}class qn extends Je{constructor(e){super(),Ge(this,e,ji,Pi,xe,{models:6,chatFiles:0,params:1})}}function kn(n,e,t){const l=n.slice();return l[10]=e[t],l}function Ri(n){let e;const t=n[4].default,l=zt(t,n,n[8],null);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,o){l&&l.m(s,o),e=!0},p(s,o){l&&l.p&&(!e||o&256)&&Ot(l,t,s,s[8],e?At(t,s[8],o,null):Ut(s[8]),null)},i(s){e||(N(l,s),e=!0)},o(s){O(l,s),e=!1},d(s){l&&l.d(s)}}}function Fi(n){var r;let e,t,l=(((r=n[10])==null?void 0:r.label)??"Camera")+"",s,o;return{c(){e=v("div"),t=v("div"),s=ge(l),o=Z(),this.h()},l(a){e=b(a,"DIV",{class:!0});var i=w(e);t=b(i,"DIV",{class:!0});var c=w(t);s=pe(c,l),c.forEach(h),i.forEach(h),o=q(a),this.h()},h(){u(t,"class","line-clamp-1"),u(e,"class","flex items-center")},m(a,i){z(a,e,i),m(e,t),m(t,s),z(a,o,i)},p(a,i){var c;i&2&&l!==(l=(((c=a[10])==null?void 0:c.label)??"Camera")+"")&&ye(s,l)},d(a){a&&(h(e),h(o))}}}function yn(n){let e,t;function l(){return n[5](n[10])}return e=new ml({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Fi]},$$scope:{ctx:n}}}),e.$on("click",l),{c(){ee(e.$$.fragment)},l(s){te(e.$$.fragment,s)},m(s,o){le(e,s,o),t=!0},p(s,o){n=s;const r={};o&258&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){O(e.$$.fragment,s),t=!1},d(s){se(e,s)}}}function Wi(n){let e,t,l=it(n[1]),s=[];for(let r=0;r<l.length;r+=1)s[r]=yn(kn(n,l,r));const o=r=>O(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=Pe()},l(r){for(let a=0;a<s.length;a+=1)s[a].l(r);e=Pe()},m(r,a){for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(r,a);z(r,e,a),t=!0},p(r,a){if(a&10){l=it(r[1]);let i;for(i=0;i<l.length;i+=1){const c=kn(r,l,i);s[i]?(s[i].p(c,a),N(s[i],1)):(s[i]=yn(c),s[i].c(),N(s[i],1),s[i].m(e.parentNode,e))}for(Re(),i=l.length;i<s.length;i+=1)o(i);Fe()}},i(r){if(!t){for(let a=0;a<l.length;a+=1)N(s[a]);t=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)O(s[a]);t=!1},d(r){r&&h(e),xt(s,r)}}}function Zi(n){let e,t,l;return t=new Xl({props:{class:"w-full max-w-[180px] rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-[9999] bg-white dark:bg-gray-900 dark:text-white shadow-sm",sideOffset:6,side:"top",align:"start",transition:Pl,$$slots:{default:[Wi]},$$scope:{ctx:n}}}),{c(){e=v("div"),ee(t.$$.fragment),this.h()},l(s){e=b(s,"DIV",{slot:!0});var o=w(e);te(t.$$.fragment,o),o.forEach(h),this.h()},h(){u(e,"slot","content")},m(s,o){z(s,e,o),le(t,e,null),l=!0},p(s,o){const r={};o&258&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(s){l||(N(t.$$.fragment,s),l=!0)},o(s){O(t.$$.fragment,s),l=!1},d(s){s&&h(e),se(t)}}}function qi(n){let e,t,l;function s(r){n[6](r)}let o={$$slots:{content:[Zi],default:[Ri]},$$scope:{ctx:n}};return n[2]!==void 0&&(o.show=n[2]),e=new Yl({props:o}),_e.push(()=>He(e,"show",s)),e.$on("change",n[7]),{c(){ee(e.$$.fragment)},l(r){te(e.$$.fragment,r)},m(r,a){le(e,r,a),l=!0},p(r,[a]){const i={};a&258&&(i.$$scope={dirty:a,ctx:r}),!t&&a&4&&(t=!0,i.show=r[2],Me(()=>t=!1)),e.$set(i)},i(r){l||(N(e.$$.fragment,r),l=!0)},o(r){O(e.$$.fragment,r),l=!1},d(r){se(e,r)}}}function xi(n,e,t){let{$$slots:l={},$$scope:s}=e;bt("i18n");const o=el();let{onClose:r=()=>{}}=e,{devices:a}=e,i=!1;const c=g=>{o("change",g.deviceId)};function f(g){i=g,t(2,i)}const d=g=>{g.detail===!1&&r()};return n.$$set=g=>{"onClose"in g&&t(0,r=g.onClose),"devices"in g&&t(1,a=g.devices),"$$scope"in g&&t(8,s=g.$$scope)},[r,a,i,o,l,c,f,d,s]}class Ji extends Je{constructor(e){super(),Ge(this,e,xi,qi,xe,{onClose:0,devices:1})}}function En(n){let e,t,l,s,o,r,a,i,c,f,d,g,p,y,S,k='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"></path></svg>',D,I,B,E=n[4]&&In(n);function L(j,G){return j[4]?Yi:Xi}let T=L(n),U=T(n);const V=[sc,lc],_=[];function H(j,G){return j[4]?0:1}a=H(n),i=_[a]=V[a](n);function W(j,G){return j[1]?ic:j[2]?ac:oc}let R=W(n),A=R(n);return{c(){e=v("div"),E&&E.c(),t=Z(),l=v("div"),U.c(),s=Z(),o=v("div"),r=v("div"),i.c(),c=Z(),f=v("div"),d=v("button"),g=v("div"),A.c(),p=Z(),y=v("div"),S=v("button"),S.innerHTML=k,this.h()},l(j){e=b(j,"DIV",{class:!0});var G=w(e);E&&E.l(G),t=q(G),l=b(G,"DIV",{class:!0});var x=w(l);U.l(x),x.forEach(h),s=q(G),o=b(G,"DIV",{class:!0});var F=w(o);r=b(F,"DIV",{});var ae=w(r);i.l(ae),ae.forEach(h),c=q(F),f=b(F,"DIV",{});var be=w(f);d=b(be,"BUTTON",{type:!0});var Ie=w(d);g=b(Ie,"DIV",{class:!0});var X=w(g);A.l(X),X.forEach(h),Ie.forEach(h),be.forEach(h),p=q(F),y=b(F,"DIV",{});var re=w(y);S=b(re,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),qe(S)!=="svelte-tu8xeu"&&(S.innerHTML=k),re.forEach(h),F.forEach(h),G.forEach(h),this.h()},h(){u(l,"class","flex justify-center items-center flex-1 h-full w-full max-h-full"),u(g,"class","line-clamp-1 text-sm font-medium"),u(d,"type","button"),u(S,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),u(S,"type","button"),u(o,"class","flex justify-between items-center pb-2 w-full"),u(e,"class","max-w-lg w-full h-full max-h-[100dvh] flex flex-col justify-between p-3 md:p-6")},m(j,G){z(j,e,G),E&&E.m(e,null),m(e,t),m(e,l),U.m(l,null),m(e,s),m(e,o),m(o,r),_[a].m(r,null),m(o,c),m(o,f),m(f,d),m(d,g),A.m(g,null),m(o,p),m(o,y),m(y,S),D=!0,I||(B=[fe(d,"click",n[29]),fe(S,"click",n[30])],I=!0)},p(j,G){j[4]?E?E.p(j,G):(E=In(j),E.c(),E.m(e,t)):E&&(E.d(1),E=null),T===(T=L(j))&&U?U.p(j,G):(U.d(1),U=T(j),U&&(U.c(),U.m(l,null)));let x=a;a=H(j),a===x?_[a].p(j,G):(Re(),O(_[x],1,1,()=>{_[x]=null}),Fe(),i=_[a],i?i.p(j,G):(i=_[a]=V[a](j),i.c()),N(i,1),i.m(r,null)),R===(R=W(j))&&A?A.p(j,G):(A.d(1),A=R(j),A&&(A.c(),A.m(g,null)))},i(j){D||(N(i),D=!0)},o(j){O(i),D=!1},d(j){j&&h(e),E&&E.d(),U.d(),_[a].d(),A.d(),I=!1,Pt(B)}}}function In(n){let e,t,l;function s(a,i){return a[3]?Ki:a[1]||a[2]?Qi:Gi}let o=s(n),r=o(n);return{c(){e=v("button"),r.c(),this.h()},l(a){e=b(a,"BUTTON",{type:!0,class:!0});var i=w(e);r.l(i),i.forEach(h),this.h()},h(){u(e,"type","button"),u(e,"class","flex justify-center items-center w-full h-20 min-h-20")},m(a,i){z(a,e,i),r.m(e,null),t||(l=fe(e,"click",n[24]),t=!0)},p(a,i){o===(o=s(a))&&r?r.p(a,i):(r.d(1),r=o(a),r&&(r.c(),r.m(e,null)))},d(a){a&&h(e),r.d(),t=!1,l()}}}function Gi(n){let e,t,l;return{c(){e=v("div"),this.h()},l(s){e=b(s,"DIV",{class:!0,style:!0}),w(e).forEach(h),this.h()},h(){var s,o,r,a,i,c,f,d,g;u(e,"class",t=(n[5]*100>4?" size-[4.5rem]":n[5]*100>2?" size-16":n[5]*100>1?"size-14":"size-12")+" transition-all rounded-full "+((((r=(o=(s=n[0])==null?void 0:s.info)==null?void 0:o.meta)==null?void 0:r.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")+" bg-black dark:bg-white"),u(e,"style",l=(((c=(i=(a=n[0])==null?void 0:a.info)==null?void 0:i.meta)==null?void 0:c.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(g=(d=(f=n[0])==null?void 0:f.info)==null?void 0:d.meta)==null?void 0:g.profile_image_url}');`:"")},m(s,o){z(s,e,o)},p(s,o){var r,a,i,c,f,d,g,p,y;o[0]&33&&t!==(t=(s[5]*100>4?" size-[4.5rem]":s[5]*100>2?" size-16":s[5]*100>1?"size-14":"size-12")+" transition-all rounded-full "+((((i=(a=(r=s[0])==null?void 0:r.info)==null?void 0:a.meta)==null?void 0:i.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")+" bg-black dark:bg-white")&&u(e,"class",t),o[0]&1&&l!==(l=(((d=(f=(c=s[0])==null?void 0:c.info)==null?void 0:f.meta)==null?void 0:d.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(y=(p=(g=s[0])==null?void 0:g.info)==null?void 0:p.meta)==null?void 0:y.profile_image_url}');`:"")&&u(e,"style",l)},d(s){s&&h(e)}}}function Qi(n){let e,t,l,s,o,r;return{c(){e=Ne("svg"),t=Ne("style"),l=ge(`.spinner_qM83 {
								animation: spinner_8HQG 1.05s infinite;
							}
							.spinner_oXPr {
								animation-delay: 0.1s;
							}
							.spinner_ZTLf {
								animation-delay: 0.2s;
							}
							@keyframes spinner_8HQG {
								0%,
								57.14% {
									animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
									transform: translate(0);
								}
								28.57% {
									animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
									transform: translateY(-6px);
								}
								100% {
									transform: translate(0);
								}
							}
						`),s=Ne("circle"),o=Ne("circle"),r=Ne("circle"),this.h()},l(a){e=ze(a,"svg",{class:!0,viewBox:!0,fill:!0,xmlns:!0});var i=w(e);t=ze(i,"style",{});var c=w(t);l=pe(c,`.spinner_qM83 {
								animation: spinner_8HQG 1.05s infinite;
							}
							.spinner_oXPr {
								animation-delay: 0.1s;
							}
							.spinner_ZTLf {
								animation-delay: 0.2s;
							}
							@keyframes spinner_8HQG {
								0%,
								57.14% {
									animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
									transform: translate(0);
								}
								28.57% {
									animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
									transform: translateY(-6px);
								}
								100% {
									transform: translate(0);
								}
							}
						`),c.forEach(h),s=ze(i,"circle",{class:!0,cx:!0,cy:!0,r:!0}),w(s).forEach(h),o=ze(i,"circle",{class:!0,cx:!0,cy:!0,r:!0}),w(o).forEach(h),r=ze(i,"circle",{class:!0,cx:!0,cy:!0,r:!0}),w(r).forEach(h),i.forEach(h),this.h()},h(){u(s,"class","spinner_qM83"),u(s,"cx","4"),u(s,"cy","12"),u(s,"r","3"),u(o,"class","spinner_qM83 spinner_oXPr"),u(o,"cx","12"),u(o,"cy","12"),u(o,"r","3"),u(r,"class","spinner_qM83 spinner_ZTLf"),u(r,"cx","20"),u(r,"cy","12"),u(r,"r","3"),u(e,"class","size-12 text-gray-900 dark:text-gray-400"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"xmlns","http://www.w3.org/2000/svg")},m(a,i){z(a,e,i),m(e,t),m(t,l),m(e,s),m(e,o),m(e,r)},p:Se,d(a){a&&h(e)}}}function Ki(n){let e,t;return{c(){e=v("div"),t=ge(n[3]),this.h()},l(l){e=b(l,"DIV",{class:!0,style:!0});var s=w(e);t=pe(s,n[3]),s.forEach(h),this.h()},h(){u(e,"class","transition-all rounded-full"),Mt(e,"font-size",(n[5]*100>4?"4.5":n[5]*100>2?"4.25":n[5]*100>1?"3.75":"3.5")+"rem"),Mt(e,"width","100%"),Mt(e,"text-align","center")},m(l,s){z(l,e,s),m(e,t)},p(l,s){s[0]&8&&ye(t,l[3]),s[0]&32&&Mt(e,"font-size",(l[5]*100>4?"4.5":l[5]*100>2?"4.25":l[5]*100>1?"3.75":"3.5")+"rem")},d(l){l&&h(e)}}}function Yi(n){let e,t,l,s,o,r,a,i='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-6"><path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"></path></svg>',c,f;return{c(){e=v("div"),t=v("video"),l=Z(),s=v("canvas"),o=Z(),r=v("div"),a=v("button"),a.innerHTML=i,this.h()},l(d){e=b(d,"DIV",{class:!0});var g=w(e);t=b(g,"VIDEO",{id:!0,class:!0}),w(t).forEach(h),l=q(g),s=b(g,"CANVAS",{id:!0,style:!0}),w(s).forEach(h),o=q(g),r=b(g,"DIV",{class:!0});var p=w(r);a=b(p,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),qe(a)!=="svelte-16ul42n"&&(a.innerHTML=i),p.forEach(h),g.forEach(h),this.h()},h(){u(t,"id","camera-feed"),t.autoplay=!0,u(t,"class","rounded-2xl h-full min-w-full object-cover object-center"),t.playsInline=!0,u(s,"id","camera-canvas"),Mt(s,"display","none"),u(a,"type","button"),u(a,"class","p-1.5 text-white cursor-pointer backdrop-blur-xl bg-black/10 rounded-full"),u(r,"class","absolute top-4 md:top-8 left-4"),u(e,"class","relative flex video-container w-full max-h-full pt-2 pb-4 md:py-6 px-2 h-full")},m(d,g){z(d,e,g),m(e,t),m(e,l),m(e,s),m(e,o),m(e,r),m(r,a),c||(f=fe(a,"click",n[26]),c=!0)},p:Se,d(d){d&&h(e),c=!1,f()}}}function Xi(n){let e,t,l;function s(a,i){return a[3]?tc:a[1]||a[2]?ec:$i}let o=s(n),r=o(n);return{c(){e=v("button"),r.c(),this.h()},l(a){e=b(a,"BUTTON",{type:!0});var i=w(e);r.l(i),i.forEach(h),this.h()},h(){u(e,"type","button")},m(a,i){z(a,e,i),r.m(e,null),t||(l=fe(e,"click",n[25]),t=!0)},p(a,i){o===(o=s(a))&&r?r.p(a,i):(r.d(1),r=o(a),r&&(r.c(),r.m(e,null)))},d(a){a&&h(e),r.d(),t=!1,l()}}}function $i(n){let e,t,l;return{c(){e=v("div"),this.h()},l(s){e=b(s,"DIV",{class:!0,style:!0}),w(e).forEach(h),this.h()},h(){var s,o,r,a,i,c,f,d,g;u(e,"class",t=(n[5]*100>4?" size-52":n[5]*100>2?"size-48":n[5]*100>1?"size-44":"size-40")+" transition-all rounded-full "+((((r=(o=(s=n[0])==null?void 0:s.info)==null?void 0:o.meta)==null?void 0:r.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")),u(e,"style",l=(((c=(i=(a=n[0])==null?void 0:a.info)==null?void 0:i.meta)==null?void 0:c.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(g=(d=(f=n[0])==null?void 0:f.info)==null?void 0:d.meta)==null?void 0:g.profile_image_url}');`:"")},m(s,o){z(s,e,o)},p(s,o){var r,a,i,c,f,d,g,p,y;o[0]&33&&t!==(t=(s[5]*100>4?" size-52":s[5]*100>2?"size-48":s[5]*100>1?"size-44":"size-40")+" transition-all rounded-full "+((((i=(a=(r=s[0])==null?void 0:r.info)==null?void 0:a.meta)==null?void 0:i.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white"))&&u(e,"class",t),o[0]&1&&l!==(l=(((d=(f=(c=s[0])==null?void 0:c.info)==null?void 0:f.meta)==null?void 0:d.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(y=(p=(g=s[0])==null?void 0:g.info)==null?void 0:p.meta)==null?void 0:y.profile_image_url}');`:"")&&u(e,"style",l)},d(s){s&&h(e)}}}function ec(n){let e,t,l,s,o,r;return{c(){e=Ne("svg"),t=Ne("style"),l=ge(`.spinner_qM83 {
									animation: spinner_8HQG 1.05s infinite;
								}
								.spinner_oXPr {
									animation-delay: 0.1s;
								}
								.spinner_ZTLf {
									animation-delay: 0.2s;
								}
								@keyframes spinner_8HQG {
									0%,
									57.14% {
										animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
										transform: translate(0);
									}
									28.57% {
										animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
										transform: translateY(-6px);
									}
									100% {
										transform: translate(0);
									}
								}
							`),s=Ne("circle"),o=Ne("circle"),r=Ne("circle"),this.h()},l(a){e=ze(a,"svg",{class:!0,viewBox:!0,fill:!0,xmlns:!0});var i=w(e);t=ze(i,"style",{});var c=w(t);l=pe(c,`.spinner_qM83 {
									animation: spinner_8HQG 1.05s infinite;
								}
								.spinner_oXPr {
									animation-delay: 0.1s;
								}
								.spinner_ZTLf {
									animation-delay: 0.2s;
								}
								@keyframes spinner_8HQG {
									0%,
									57.14% {
										animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
										transform: translate(0);
									}
									28.57% {
										animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
										transform: translateY(-6px);
									}
									100% {
										transform: translate(0);
									}
								}
							`),c.forEach(h),s=ze(i,"circle",{class:!0,cx:!0,cy:!0,r:!0}),w(s).forEach(h),o=ze(i,"circle",{class:!0,cx:!0,cy:!0,r:!0}),w(o).forEach(h),r=ze(i,"circle",{class:!0,cx:!0,cy:!0,r:!0}),w(r).forEach(h),i.forEach(h),this.h()},h(){u(s,"class","spinner_qM83"),u(s,"cx","4"),u(s,"cy","12"),u(s,"r","3"),u(o,"class","spinner_qM83 spinner_oXPr"),u(o,"cx","12"),u(o,"cy","12"),u(o,"r","3"),u(r,"class","spinner_qM83 spinner_ZTLf"),u(r,"cx","20"),u(r,"cy","12"),u(r,"r","3"),u(e,"class","size-44 text-gray-900 dark:text-gray-400"),u(e,"viewBox","0 0 24 24"),u(e,"fill","currentColor"),u(e,"xmlns","http://www.w3.org/2000/svg")},m(a,i){z(a,e,i),m(e,t),m(t,l),m(e,s),m(e,o),m(e,r)},p:Se,d(a){a&&h(e)}}}function tc(n){let e,t;return{c(){e=v("div"),t=ge(n[3]),this.h()},l(l){e=b(l,"DIV",{class:!0,style:!0});var s=w(e);t=pe(s,n[3]),s.forEach(h),this.h()},h(){u(e,"class","transition-all rounded-full"),Mt(e,"font-size",(n[5]*100>4?"13":n[5]*100>2?"12":n[5]*100>1?"11.5":"11")+"rem"),Mt(e,"width","100%"),Mt(e,"text-align","center")},m(l,s){z(l,e,s),m(e,t)},p(l,s){s[0]&8&&ye(t,l[3]),s[0]&32&&Mt(e,"font-size",(l[5]*100>4?"13":l[5]*100>2?"12":l[5]*100>1?"11.5":"11")+"rem")},d(l){l&&h(e)}}}function lc(n){let e,t;return e=new qt({props:{content:n[9].t("Camera"),$$slots:{default:[nc]},$$scope:{ctx:n}}}),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,s){le(e,l,s),t=!0},p(l,s){const o={};s[0]&512&&(o.content=l[9].t("Camera")),s[2]&1&&(o.$$scope={dirty:s,ctx:l}),e.$set(o)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function sc(n){let e,t;return e=new Ji({props:{devices:n[6],$$slots:{default:[rc]},$$scope:{ctx:n}}}),e.$on("change",n[27]),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,s){le(e,l,s),t=!0},p(l,s){const o={};s[0]&64&&(o.devices=l[6]),s[2]&1&&(o.$$scope={dirty:s,ctx:l}),e.$set(o)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function nc(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"></path></svg>',l,s;return{c(){e=v("button"),e.innerHTML=t,this.h()},l(o){e=b(o,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),qe(e)!=="svelte-1n1gs9g"&&(e.innerHTML=t),this.h()},h(){u(e,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),u(e,"type","button")},m(o,r){z(o,e,r),l||(s=fe(e,"click",n[28]),l=!0)},p:Se,d(o){o&&h(e),l=!1,s()}}}function rc(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path fill-rule="evenodd" d="M15.312 11.424a5.5 5.5 0 0 1-9.201 2.466l-.312-.311h2.433a.75.75 0 0 0 0-1.5H3.989a.75.75 0 0 0-.75.75v4.242a.75.75 0 0 0 1.5 0v-2.43l.31.31a7 7 0 0 0 11.712-3.138.75.75 0 0 0-1.449-.39Zm1.23-3.723a.75.75 0 0 0 .219-.53V2.929a.75.75 0 0 0-1.5 0V5.36l-.31-.31A7 7 0 0 0 3.239 8.188a.75.75 0 1 0 1.448.389A5.5 5.5 0 0 1 13.89 6.11l.311.31h-2.432a.75.75 0 0 0 0 1.5h4.243a.75.75 0 0 0 .53-.219Z" clip-rule="evenodd"></path></svg>';return{c(){e=v("button"),e.innerHTML=t,this.h()},l(l){e=b(l,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),qe(e)!=="svelte-5e0pue"&&(e.innerHTML=t),this.h()},h(){u(e,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),u(e,"type","button")},m(l,s){z(l,e,s)},p:Se,d(l){l&&h(e)}}}function oc(n){let e=n[9].t("Listening...")+"",t;return{c(){t=ge(e)},l(l){t=pe(l,e)},m(l,s){z(l,t,s)},p(l,s){s[0]&512&&e!==(e=l[9].t("Listening...")+"")&&ye(t,e)},d(l){l&&h(t)}}}function ac(n){let e=n[9].t("Tap to interrupt")+"",t;return{c(){t=ge(e)},l(l){t=pe(l,e)},m(l,s){z(l,t,s)},p(l,s){s[0]&512&&e!==(e=l[9].t("Tap to interrupt")+"")&&ye(t,e)},d(l){l&&h(t)}}}function ic(n){let e=n[9].t("Thinking...")+"",t;return{c(){t=ge(e)},l(l){t=pe(l,e)},m(l,s){z(l,t,s)},p(l,s){s[0]&512&&e!==(e=l[9].t("Thinking...")+"")&&ye(t,e)},d(l){l&&h(t)}}}function cc(n){let e,t,l=n[8]&&En(n);return{c(){l&&l.c(),e=Pe()},l(s){l&&l.l(s),e=Pe()},m(s,o){l&&l.m(s,o),z(s,e,o),t=!0},p(s,o){s[8]?l?(l.p(s,o),o[0]&256&&N(l,1)):(l=En(s),l.c(),N(l,1),l.m(e.parentNode,e)):l&&(Re(),O(l,1,1,()=>{l=null}),Fe())},i(s){t||(N(l),t=!0)},o(s){O(l),t=!1},d(s){s&&h(e),l&&l.d(s)}}}function fc(n,e,t){let l,s,o,r,a;me(n,Ul,Q=>t(45,l=Q)),me(n,Vl,Q=>t(46,s=Q)),me(n,Xt,Q=>t(47,o=Q)),me(n,Sl,Q=>t(8,r=Q));const i=el(),c=bt("i18n");me(n,c,Q=>t(9,a=Q));let{eventTarget:f}=e,{submitPrompt:d}=e,{stopResponse:g}=e,{files:p}=e,{chatId:y}=e,{modelId:S}=e,k=null,D=null,I=!1,B=!1,E=!1,L=null,T=!1,U=null,V=!1,_=0,H=!1,W,R=null,A=[],j=[],G=null;const x=async()=>{const Q=await navigator.mediaDevices.enumerateDevices();t(6,j=Q.filter(Ce=>Ce.kind==="videoinput")),navigator.mediaDevices.getDisplayMedia&&t(6,j=[...j,{deviceId:"screen",label:"Screen Share"}]),console.log(j),G===null&&j.length>0&&t(7,G=j[0].deviceId)},F=async()=>{if(await x(),U===null){t(4,T=!0),await Be();try{await ae()}catch(Q){console.error("Error accessing webcam: ",Q)}}},ae=async()=>{const Q=document.getElementById("camera-feed");Q&&(G==="screen"?U=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:!1}):U=await navigator.mediaDevices.getUserMedia({video:{deviceId:G?{exact:G}:void 0}}),U&&(await x(),Q.srcObject=U,await Q.play()))},be=async()=>{U&&U.getTracks().forEach(Ce=>Ce.stop()),U=null},Ie=()=>{const Q=document.getElementById("camera-feed"),Ce=document.getElementById("camera-canvas");if(!Ce)return;const we=Ce.getContext("2d");Ce.width=Q.videoWidth,Ce.height=Q.videoHeight,we.drawImage(Q,0,0,Q.videoWidth,Q.videoHeight);const Ee=Ce.toDataURL("image/png");return console.log(Ee),Ee},X=async()=>{await be(),t(4,T=!1)},re=-55,tt=async Q=>{await Be();const Ce=ls(Q,"recording.wav"),we=await ss(localStorage.token,Ce).catch(Ee=>(De.error(Ee),null));if(we&&(console.log(we.text),we.text!=="")){const Ee=await d(we.text,{_raw:!0});console.log(Ee)}},Ue=async(Q=!0)=>{if(r){console.log("%c%s","color: red; font-size: 20px;","ðŸš¨ stopRecordingCallback ðŸš¨");const Ce=A.slice(0);if(A=[],W=!1,Q&&J(),B){if(t(1,I=!0),t(3,L=null),U){const Ee=Ie();t(18,p=[{type:"image",url:Ee}])}const we=new Blob(Ce,{type:"audio/wav"});await tt(we),B=!1,t(1,I=!1)}}else A=[],W=!1,R&&R.getTracks().forEach(we=>we.stop()),R=null},J=async()=>{R=await navigator.mediaDevices.getUserMedia({audio:!0}),W=new MediaRecorder(R),W.onstart=()=>{console.log("Recording started"),A=[],K(R)},W.ondataavailable=Q=>{H&&A.push(Q.data)},W.onstop=Q=>{console.log("Recording stopped",Q),Ue()},W.start()},Qe=async()=>{R&&R.getTracks().forEach(Ce=>Ce.stop()),R=null},ue=Q=>{let Ce=0;for(let we=0;we<Q.length;we++){const Ee=(Q[we]-128)/128;Ce+=Ee*Ee}return Math.sqrt(Ce/Q.length)},K=Q=>{const Ce=new AudioContext,we=Ce.createMediaStreamSource(Q),Ee=Ce.createAnalyser();Ee.minDecibels=re,we.connect(Ee);const M=Ee.frequencyBinCount,ne=new Uint8Array(M),de=new Uint8Array(Ee.fftSize);let Te=Date.now();H=!1,console.log("ðŸ”Š Sound detection started",Te,H),(()=>{const Oe=()=>{if(!W||!r)return;if(E&&!((o==null?void 0:o.voiceInterruption)??!1)?(Ee.maxDecibels=0,Ee.minDecibels=-1):(Ee.minDecibels=re,Ee.maxDecibels=-30),Ee.getByteTimeDomainData(de),Ee.getByteFrequencyData(ne),t(5,_=ue(de)),ne.some(Tt=>Tt>0)&&(console.log("%c%s","color: red; font-size: 20px;","ðŸ”Š Sound detected"),H||(H=!0,ct()),Te=Date.now()),H&&Date.now()-Te>2e3&&(B=!0,W)){console.log("%c%s","color: red; font-size: 20px;","ðŸ”‡ Silence detected"),W.stop();return}window.requestAnimationFrame(Oe)};window.requestAnimationFrame(Oe)})()};let $={},rt=null,ht=null;const St=Q=>r?new Promise(Ce=>{let we=[];const Ee=setInterval(async()=>{var M;if(we=await speechSynthesis.getVoices(),we.length>0){clearInterval(Ee);const ne=((M=we==null?void 0:we.filter(de=>{var Te,Ve,Oe,kt;return de.voiceURI===(((Ve=(Te=o==null?void 0:o.audio)==null?void 0:Te.tts)==null?void 0:Ve.voice)??((kt=(Oe=s==null?void 0:s.audio)==null?void 0:Oe.tts)==null?void 0:kt.voice))}))==null?void 0:M.at(0))??void 0;ht=new SpeechSynthesisUtterance(Q),ne&&(ht.voice=ne),speechSynthesis.speak(ht),ht.onend=async de=>{await new Promise(Te=>setTimeout(Te,200)),Ce(de)}}},100)}):Promise.resolve(),Ht=Q=>r?new Promise(Ce=>{const we=document.getElementById("audioElement");we&&(we.src=Q.src,we.muted=!0,we.play().then(()=>{we.muted=!1}).catch(Ee=>{console.error(Ee)}),we.onended=async Ee=>{await new Promise(M=>setTimeout(M,100)),Ce(Ee)})}):Promise.resolve(),ct=async()=>{t(2,E=!1),V&&g(),ht&&(speechSynthesis.cancel(),ht=null);const Q=document.getElementById("audioElement");Q&&(Q.muted=!0,Q.pause(),Q.currentTime=0)};let Ke=new AbortController;const gt=new Map,Y=new Map,ve=async Q=>{var Ce,we,Ee,M;if(!gt.has(Q))try{if((o==null?void 0:o.showEmojiInCall)??!1){const ne=await Dr(localStorage.token,S,Q,y);ne&&Y.set(Q,ne)}if(s.audio.tts.engine!==""){const ne=await Br(localStorage.token,((we=(Ce=o==null?void 0:o.audio)==null?void 0:Ce.tts)==null?void 0:we.voice)??((M=(Ee=s==null?void 0:s.audio)==null?void 0:Ee.tts)==null?void 0:M.voice),Q).catch(de=>(console.error(de),null));if(ne){const de=await ne.blob(),Te=URL.createObjectURL(de);gt.set(Q,new Audio(Te))}}else gt.set(Q,!0)}catch(ne){console.error("Error synthesizing speech:",ne)}return gt.get(Q)};let We={};const nt=async(Q,Ce)=>{for(;!Ce.aborted;)if(We[Q]&&We[Q].length>0){const we=We[Q].shift();if(gt.has(we))if(((o==null?void 0:o.showEmojiInCall)??!1)&&Y.has(we)?t(3,L=Y.get(we)):t(3,L=null),s.audio.tts.engine!=="")try{console.log("%c%s","color: red; font-size: 20px;",`Playing audio for content: ${we}`);const Ee=gt.get(we);await Ht(Ee),console.log(`Played audio for content: ${we}`),await new Promise(M=>setTimeout(M,200))}catch(Ee){console.error("Error playing audio:",Ee)}else await St(we);else We[Q].unshift(we),console.log(`Audio for "${we}" not yet available in the cache, re-queued...`),await new Promise(Ee=>setTimeout(Ee,200))}else if($[Q]&&We[Q]&&We[Q].length===0){t(2,E=!1);break}else await new Promise(we=>setTimeout(we,200));console.log(`Audio monitoring and playing stopped for message ID ${Q}`)};Tl(async()=>{const Q=async()=>{try{k=await navigator.wakeLock.request("screen")}catch(M){console.log(M)}k&&k.addEventListener("release",()=>{console.log("Wake Lock released")})};"wakeLock"in navigator&&(await Q(),document.addEventListener("visibilitychange",async()=>{k!==null&&document.visibilityState==="visible"&&await Q()})),t(0,D=l.find(M=>M.id===S)),J();const Ce=async M=>{const{id:ne}=M.detail;V=!0,rt!==ne&&(console.log(`Received chat start event for message ID ${ne}`),rt=ne,Ke&&Ke.abort(),Ke=new AbortController,t(2,E=!0),nt(ne,Ke.signal))},we=async M=>{const{id:ne,content:de}=M.detail;if(rt===ne){console.log(`Received chat event for message ID ${ne}: ${de}`);try{We[ne]===void 0?We[ne]=[de]:We[ne].push(de),console.log(de),ve(de)}catch(Te){console.error("Failed to fetch or play audio:",Te)}}},Ee=async M=>{const{id:ne,content:de}=M.detail;$[ne]=!0,V=!1};return f.addEventListener("chat:start",Ce),f.addEventListener("chat",we),f.addEventListener("chat:finish",Ee),async()=>{f.removeEventListener("chat:start",Ce),f.removeEventListener("chat",we),f.removeEventListener("chat:finish",Ee),Ke.abort(),await Be(),await ct(),await Ue(!1),await X()}}),Ln(async()=>{await ct(),await Ue(!1),await X()});const Xe=()=>{E&&ct()},wt=()=>{E&&ct()},_t=()=>{X()},Gt=async Q=>{console.log(Q.detail),t(7,G=Q.detail),await be(),await ae()},tl=async()=>{await navigator.mediaDevices.getUserMedia({video:!0}),F()},Ct=()=>{E&&ct()},jt=async()=>{Qe(),be(),Sl.set(!1),i("close")};return n.$$set=Q=>{"eventTarget"in Q&&t(19,f=Q.eventTarget),"submitPrompt"in Q&&t(20,d=Q.submitPrompt),"stopResponse"in Q&&t(21,g=Q.stopResponse),"files"in Q&&t(18,p=Q.files),"chatId"in Q&&t(22,y=Q.chatId),"modelId"in Q&&t(23,S=Q.modelId)},[D,I,E,L,T,_,j,G,r,a,i,c,F,ae,be,X,Qe,ct,p,f,d,g,y,S,Xe,wt,_t,Gt,tl,Ct,jt]}class xn extends Je{constructor(e){super(),Ge(this,e,fc,cc,xe,{eventTarget:19,submitPrompt:20,stopResponse:21,files:18,chatId:22,modelId:23},null,[-1,-1,-1])}}function uc(n){let e,t,l;function s(r){n[21](r)}let o={$$slots:{default:[mc]},$$scope:{ctx:n}};return n[0]!==void 0&&(o.show=n[0]),e=new Fn({props:o}),_e.push(()=>He(e,"show",s)),{c(){ee(e.$$.fragment)},l(r){te(e.$$.fragment,r)},m(r,a){le(e,r,a),l=!0},p(r,a){const i={};a&4194327&&(i.$$scope={dirty:a,ctx:r}),!t&&a&1&&(t=!0,i.show=r[0],Me(()=>t=!1)),e.$set(i)},i(r){l||(N(e.$$.fragment,r),l=!0)},o(r){O(e.$$.fragment,r),l=!1},d(r){se(e,r)}}}function dc(n){let e,t,l,s,o;function r(i){n[16](i)}let a={submitPrompt:n[7],stopResponse:n[8],modelId:n[9],chatId:n[5],eventTarget:n[6]};return n[3]!==void 0&&(a.files=n[3]),l=new xn({props:a}),_e.push(()=>He(l,"files",r)),l.$on("close",n[17]),{c(){e=v("div"),t=v("div"),ee(l.$$.fragment),this.h()},l(i){e=b(i,"DIV",{class:!0});var c=w(e);t=b(c,"DIV",{class:!0});var f=w(t);te(l.$$.fragment,f),f.forEach(h),c.forEach(h),this.h()},h(){u(t,"class","absolute w-full h-screen max-h-[100dvh] bg-white text-gray-700 dark:bg-black dark:text-gray-300 flex justify-center"),u(e,"class","absolute w-full h-screen max-h-[100dvh] flex z-[999] overflow-hidden")},m(i,c){z(i,e,c),m(e,t),le(l,t,null),o=!0},p(i,c){const f={};c&128&&(f.submitPrompt=i[7]),c&256&&(f.stopResponse=i[8]),c&512&&(f.modelId=i[9]),c&32&&(f.chatId=i[5]),c&64&&(f.eventTarget=i[6]),!s&&c&8&&(s=!0,f.files=i[3],Me(()=>s=!1)),l.$set(f)},i(i){o||(N(l.$$.fragment,i),o=!0)},o(i){O(l.$$.fragment,i),o=!1},d(i){i&&h(e),se(l)}}}function hc(n){let e,t,l=n[0]&&Dn(n);return{c(){l&&l.c(),e=Pe()},l(s){l&&l.l(s),e=Pe()},m(s,o){l&&l.m(s,o),z(s,e,o),t=!0},p(s,o){s[0]?l?(l.p(s,o),o&1&&N(l,1)):(l=Dn(s),l.c(),N(l,1),l.m(e.parentNode,e)):l&&(Re(),O(l,1,1,()=>{l=null}),Fe())},i(s){t||(N(l),t=!0)},o(s){O(l),t=!1},d(s){s&&h(e),l&&l.d(s)}}}function mc(n){let e,t,l,s,o;function r(c){n[18](c)}function a(c){n[19](c)}let i={models:n[4]};return n[1]!==void 0&&(i.chatFiles=n[1]),n[2]!==void 0&&(i.params=n[2]),t=new qn({props:i}),_e.push(()=>He(t,"chatFiles",r)),_e.push(()=>He(t,"params",a)),t.$on("close",n[20]),{c(){e=v("div"),ee(t.$$.fragment),this.h()},l(c){e=b(c,"DIV",{class:!0});var f=w(e);te(t.$$.fragment,f),f.forEach(h),this.h()},h(){u(e,"class","px-6 py-4 h-full")},m(c,f){z(c,e,f),le(t,e,null),o=!0},p(c,f){const d={};f&16&&(d.models=c[4]),!l&&f&2&&(l=!0,d.chatFiles=c[1],Me(()=>l=!1)),!s&&f&4&&(s=!0,d.params=c[2],Me(()=>s=!1)),t.$set(d)},i(c){o||(N(t.$$.fragment,c),o=!0)},o(c){O(t.$$.fragment,c),o=!1},d(c){c&&h(e),se(t)}}}function Dn(n){let e,t,l,s,o,r,a;const i=[pc,gc],c=[];function f(d,g){return d[11]?0:1}return s=f(n),o=c[s]=i[s](n),{c(){e=v("div"),t=v("div"),l=v("div"),o.c(),this.h()},l(d){e=b(d,"DIV",{class:!0});var g=w(e);t=b(g,"DIV",{class:!0});var p=w(t);l=b(p,"DIV",{class:!0});var y=w(l);o.l(y),y.forEach(h),p.forEach(h),g.forEach(h),this.h()},h(){u(l,"class","w-full h-full px-5 py-4 bg-white dark:shadow-lg dark:bg-gray-850 border border-gray-50 dark:border-gray-800 rounded-xl z-50 pointer-events-auto overflow-y-auto scrollbar-hidden"),u(t,"class","pr-4 pt-14 pb-8 w-[24rem] h-full"),u(e,"class","absolute bottom-0 right-0 z-20 h-full pointer-events-none")},m(d,g){z(d,e,g),m(e,t),m(t,l),c[s].m(l,null),a=!0},p(d,g){let p=s;s=f(d),s===p?c[s].p(d,g):(Re(),O(c[p],1,1,()=>{c[p]=null}),Fe(),o=c[s],o?o.p(d,g):(o=c[s]=i[s](d),o.c()),N(o,1),o.m(l,null))},i(d){a||(N(o),d&&(r||kl(()=>{r=ts(t,Hr,{duration:200,axis:"x"}),r.start()})),a=!0)},o(d){O(o),a=!1},d(d){d&&h(e),c[s].d()}}}function gc(n){let e,t,l,s;function o(i){n[13](i)}function r(i){n[14](i)}let a={models:n[4]};return n[1]!==void 0&&(a.chatFiles=n[1]),n[2]!==void 0&&(a.params=n[2]),e=new qn({props:a}),_e.push(()=>He(e,"chatFiles",o)),_e.push(()=>He(e,"params",r)),e.$on("close",n[15]),{c(){ee(e.$$.fragment)},l(i){te(e.$$.fragment,i)},m(i,c){le(e,i,c),s=!0},p(i,c){const f={};c&16&&(f.models=i[4]),!t&&c&2&&(t=!0,f.chatFiles=i[1],Me(()=>t=!1)),!l&&c&4&&(l=!0,f.params=i[2],Me(()=>l=!1)),e.$set(f)},i(i){s||(N(e.$$.fragment,i),s=!0)},o(i){O(e.$$.fragment,i),s=!1},d(i){se(e,i)}}}function pc(n){let e,t,l;function s(r){n[12](r)}let o={submitPrompt:n[7],stopResponse:n[8],modelId:n[9],chatId:n[5],eventTarget:n[6]};return n[3]!==void 0&&(o.files=n[3]),e=new xn({props:o}),_e.push(()=>He(e,"files",s)),{c(){ee(e.$$.fragment)},l(r){te(e.$$.fragment,r)},m(r,a){le(e,r,a),l=!0},p(r,a){const i={};a&128&&(i.submitPrompt=r[7]),a&256&&(i.stopResponse=r[8]),a&512&&(i.modelId=r[9]),a&32&&(i.chatId=r[5]),a&64&&(i.eventTarget=r[6]),!t&&a&8&&(t=!0,i.files=r[3],Me(()=>t=!1)),e.$set(i)},i(r){l||(N(e.$$.fragment,r),l=!0)},o(r){O(e.$$.fragment,r),l=!1},d(r){se(e,r)}}}function _c(n){let e,t,l,s;const o=[hc,dc,uc],r=[];function a(i,c){return i[10]?0:i[11]?1:2}return e=a(n),t=r[e]=o[e](n),{c(){t.c(),l=Pe()},l(i){t.l(i),l=Pe()},m(i,c){r[e].m(i,c),z(i,l,c),s=!0},p(i,[c]){let f=e;e=a(i),e===f?r[e].p(i,c):(Re(),O(r[f],1,1,()=>{r[f]=null}),Fe(),t=r[e],t?t.p(i,c):(t=r[e]=o[e](i),t.c()),N(t,1),t.m(l.parentNode,l))},i(i){s||(N(t),s=!0)},o(i){O(t),s=!1},d(i){i&&h(l),r[e].d(i)}}}function vc(n,e,t){let l;me(n,Sl,_=>t(11,l=_));let{show:s=!1}=e,{models:o=[]}=e,{chatId:r=null}=e,{chatFiles:a=[]}=e,{params:i={}}=e,{eventTarget:c}=e,{submitPrompt:f}=e,{stopResponse:d}=e,{files:g}=e,{modelId:p}=e,y=!1;Tl(()=>{const _=window.matchMedia("(min-width: 1024px)"),H=W=>{W.matches?t(10,y=!0):t(10,y=!1)};return _.addEventListener("change",H),H(_),()=>{_.removeEventListener("change",H)}});function S(_){g=_,t(3,g)}function k(_){a=_,t(1,a)}function D(_){i=_,t(2,i)}const I=()=>{t(0,s=!1)};function B(_){g=_,t(3,g)}const E=()=>{t(0,s=!1)};function L(_){a=_,t(1,a)}function T(_){i=_,t(2,i)}const U=()=>{t(0,s=!1)};function V(_){s=_,t(0,s)}return n.$$set=_=>{"show"in _&&t(0,s=_.show),"models"in _&&t(4,o=_.models),"chatId"in _&&t(5,r=_.chatId),"chatFiles"in _&&t(1,a=_.chatFiles),"params"in _&&t(2,i=_.params),"eventTarget"in _&&t(6,c=_.eventTarget),"submitPrompt"in _&&t(7,f=_.submitPrompt),"stopResponse"in _&&t(8,d=_.stopResponse),"files"in _&&t(3,g=_.files),"modelId"in _&&t(9,p=_.modelId)},[s,a,i,g,o,r,c,f,d,p,y,l,S,k,D,I,B,E,L,T,U,V]}class bc extends Je{constructor(e){super(),Ge(this,e,vc,_c,xe,{show:0,models:4,chatId:5,chatFiles:1,params:2,eventTarget:6,submitPrompt:7,stopResponse:8,files:3,modelId:9})}}const{document:es}=Gn;function Sn(n,e,t){const l=n.slice();return l[95]=e[t],l}function Cn(n){var Ke,gt;let e,t,l,s,o,r,a,i,c,f,d,g,p,y,S,k,D,I,B,E,L,T,U,V,_,H,W,R,A,j,G,x,F=(((Ke=n[26])==null?void 0:Ke.backgroundImageUrl)??null)&&Tn(n);function ae(Y){n[45](Y)}function be(Y){n[46](Y)}function Ie(Y){n[47](Y)}let X={title:n[20],shareEnabled:n[24].length>0,chat:n[19],initNewChat:n[34]};n[1]!==void 0&&(X.selectedModels=n[1]),n[15]!==void 0&&(X.showModelSelector=n[15]),n[5]!==void 0&&(X.showControls=n[5]),l=new Ci({props:X}),_e.push(()=>He(l,"selectedModels",ae)),_e.push(()=>He(l,"showModelSelector",be)),_e.push(()=>He(l,"showControls",Ie));let re=n[31].length>0&&n[24].length===0&&!n[27]&&n[1].length<=1&&Vn(n);function tt(Y){n[50](Y)}function Ue(Y){n[51](Y)}function J(Y){n[52](Y)}function Qe(Y){n[53](Y)}let ue={chatId:n[27],selectedModels:n[1],processing:kc,bottomPadding:n[23].length>0,sendPrompt:n[37],continueGeneration:n[40],regenerateResponse:n[39],mergeResponses:n[41],chatActionHandler:n[35]};n[3]!==void 0&&(ue.history=n[3]),n[24]!==void 0&&(ue.messages=n[24]),n[6]!==void 0&&(ue.autoScroll=n[6]),n[21]!==void 0&&(ue.prompt=n[21]),g=new Qn({props:ue}),_e.push(()=>He(g,"history",tt)),_e.push(()=>He(g,"messages",Ue)),_e.push(()=>He(g,"autoScroll",J)),_e.push(()=>He(g,"prompt",Qe));function K(Y){n[57](Y)}function $(Y){n[58](Y)}function rt(Y){n[59](Y)}function ht(Y){n[60](Y)}function St(Y){n[61](Y)}function Ht(Y){n[62](Y)}let ct={availableToolIds:n[16].reduce(n[56],[]),transparentBackground:((gt=n[26])==null?void 0:gt.backgroundImageUrl)??!1,selectedModels:n[1],messages:n[24],submitPrompt:n[36],stopResponse:n[38]};return n[23]!==void 0&&(ct.files=n[23]),n[21]!==void 0&&(ct.prompt=n[21]),n[6]!==void 0&&(ct.autoScroll=n[6]),n[17]!==void 0&&(ct.selectedToolIds=n[17]),n[18]!==void 0&&(ct.webSearchEnabled=n[18]),n[2]!==void 0&&(ct.atSelectedModel=n[2]),L=new Ya({props:ct}),_e.push(()=>He(L,"files",K)),_e.push(()=>He(L,"prompt",$)),_e.push(()=>He(L,"autoScroll",rt)),_e.push(()=>He(L,"selectedToolIds",ht)),_e.push(()=>He(L,"webSearchEnabled",St)),_e.push(()=>He(L,"atSelectedModel",Ht)),L.$on("call",n[63]),{c(){e=v("div"),F&&F.c(),t=Z(),ee(l.$$.fragment),a=Z(),re&&re.c(),i=Z(),c=v("div"),f=v("div"),d=v("div"),ee(g.$$.fragment),B=Z(),E=v("div"),ee(L.$$.fragment),this.h()},l(Y){e=b(Y,"DIV",{class:!0});var ve=w(e);F&&F.l(ve),t=q(ve),te(l.$$.fragment,ve),a=q(ve),re&&re.l(ve),i=q(ve),c=b(ve,"DIV",{class:!0});var We=w(c);f=b(We,"DIV",{class:!0,id:!0});var nt=w(f);d=b(nt,"DIV",{class:!0});var Xe=w(d);te(g.$$.fragment,Xe),Xe.forEach(h),nt.forEach(h),B=q(We),E=b(We,"DIV",{class:!0});var wt=w(E);te(L.$$.fragment,wt),wt.forEach(h),We.forEach(h),ve.forEach(h),this.h()},h(){u(d,"class",D="h-full w-full flex flex-col "+(n[0]?"py-4":"pt-2 pb-4")),u(f,"class",I="pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0 max-w-full z-10 scrollbar-hidden "+(n[5]?"lg:pr-[24rem]":"")),u(f,"id","messages-container"),u(E,"class",R=n[5]?"lg:pr-[24rem]":""),u(c,"class","flex flex-col flex-auto z-10"),u(e,"class",A="h-screen max-h-[100dvh] "+(n[30]?"md:max-w-[calc(100%-260px)]":"")+" w-full max-w-full flex flex-col")},m(Y,ve){z(Y,e,ve),F&&F.m(e,null),m(e,t),le(l,e,null),m(e,a),re&&re.m(e,null),m(e,i),m(e,c),m(c,f),m(f,d),le(g,d,null),n[54](f),m(c,B),m(c,E),le(L,E,null),j=!0,G||(x=fe(f,"scroll",n[55]),G=!0)},p(Y,ve){var wt,_t;((wt=Y[26])==null?void 0:wt.backgroundImageUrl)??null?F?F.p(Y,ve):(F=Tn(Y),F.c(),F.m(e,t)):F&&(F.d(1),F=null);const We={};ve[0]&1048576&&(We.title=Y[20]),ve[0]&16777216&&(We.shareEnabled=Y[24].length>0),ve[0]&524288&&(We.chat=Y[19]),!s&&ve[0]&2&&(s=!0,We.selectedModels=Y[1],Me(()=>s=!1)),!o&&ve[0]&32768&&(o=!0,We.showModelSelector=Y[15],Me(()=>o=!1)),!r&&ve[0]&32&&(r=!0,We.showControls=Y[5],Me(()=>r=!1)),l.$set(We),Y[31].length>0&&Y[24].length===0&&!Y[27]&&Y[1].length<=1?re?(re.p(Y,ve),ve[0]&150994946|ve[1]&1&&N(re,1)):(re=Vn(Y),re.c(),N(re,1),re.m(e,i)):re&&(Re(),O(re,1,1,()=>{re=null}),Fe());const nt={};ve[0]&134217728&&(nt.chatId=Y[27]),ve[0]&2&&(nt.selectedModels=Y[1]),ve[0]&8388608&&(nt.bottomPadding=Y[23].length>0),!p&&ve[0]&8&&(p=!0,nt.history=Y[3],Me(()=>p=!1)),!y&&ve[0]&16777216&&(y=!0,nt.messages=Y[24],Me(()=>y=!1)),!S&&ve[0]&64&&(S=!0,nt.autoScroll=Y[6],Me(()=>S=!1)),!k&&ve[0]&2097152&&(k=!0,nt.prompt=Y[21],Me(()=>k=!1)),g.$set(nt),(!j||ve[0]&1&&D!==(D="h-full w-full flex flex-col "+(Y[0]?"py-4":"pt-2 pb-4")))&&u(d,"class",D),(!j||ve[0]&32&&I!==(I="pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0 max-w-full z-10 scrollbar-hidden "+(Y[5]?"lg:pr-[24rem]":"")))&&u(f,"class",I);const Xe={};ve[0]&268500992&&(Xe.availableToolIds=Y[16].reduce(Y[56],[])),ve[0]&67108864&&(Xe.transparentBackground=((_t=Y[26])==null?void 0:_t.backgroundImageUrl)??!1),ve[0]&2&&(Xe.selectedModels=Y[1]),ve[0]&16777216&&(Xe.messages=Y[24]),!T&&ve[0]&8388608&&(T=!0,Xe.files=Y[23],Me(()=>T=!1)),!U&&ve[0]&2097152&&(U=!0,Xe.prompt=Y[21],Me(()=>U=!1)),!V&&ve[0]&64&&(V=!0,Xe.autoScroll=Y[6],Me(()=>V=!1)),!_&&ve[0]&131072&&(_=!0,Xe.selectedToolIds=Y[17],Me(()=>_=!1)),!H&&ve[0]&262144&&(H=!0,Xe.webSearchEnabled=Y[18],Me(()=>H=!1)),!W&&ve[0]&4&&(W=!0,Xe.atSelectedModel=Y[2],Me(()=>W=!1)),L.$set(Xe),(!j||ve[0]&32&&R!==(R=Y[5]?"lg:pr-[24rem]":""))&&u(E,"class",R),(!j||ve[0]&1073741824&&A!==(A="h-screen max-h-[100dvh] "+(Y[30]?"md:max-w-[calc(100%-260px)]":"")+" w-full max-w-full flex flex-col"))&&u(e,"class",A)},i(Y){j||(N(l.$$.fragment,Y),N(re),N(g.$$.fragment,Y),N(L.$$.fragment,Y),j=!0)},o(Y){O(l.$$.fragment,Y),O(re),O(g.$$.fragment,Y),O(L.$$.fragment,Y),j=!1},d(Y){Y&&h(e),F&&F.d(),se(l),re&&re.d(),se(g),n[54](null),se(L),G=!1,x()}}}function Tn(n){let e,t,l,s;return{c(){e=v("div"),l=Z(),s=v("div"),this.h()},l(o){e=b(o,"DIV",{class:!0,style:!0}),w(e).forEach(h),l=q(o),s=b(o,"DIV",{class:!0}),w(s).forEach(h),this.h()},h(){u(e,"class",t="absolute "+(n[30]?"md:max-w-[calc(100%-260px)] md:translate-x-[260px]":"")+" top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat"),Mt(e,"background-image","url("+n[26].backgroundImageUrl+")"),u(s,"class","absolute top-0 left-0 w-full h-full bg-gradient-to-t from-white to-white/85 dark:from-gray-900 dark:to-[#171717]/90 z-0")},m(o,r){z(o,e,r),z(o,l,r),z(o,s,r)},p(o,r){r[0]&1073741824&&t!==(t="absolute "+(o[30]?"md:max-w-[calc(100%-260px)] md:translate-x-[260px]":"")+" top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat")&&u(e,"class",t),r[0]&67108864&&Mt(e,"background-image","url("+o[26].backgroundImageUrl+")")},d(o){o&&(h(e),h(l),h(s))}}}function Vn(n){let e,t,l,s,o=it(n[31].filter(n[48])),r=[];for(let i=0;i<o.length;i+=1)r[i]=Mn(Sn(n,o,i));const a=i=>O(r[i],1,1,()=>{r[i]=null});return{c(){e=v("div"),t=v("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=b(i,"DIV",{class:!0});var c=w(e);t=b(c,"DIV",{class:!0});var f=w(t);for(let d=0;d<r.length;d+=1)r[d].l(f);f.forEach(h),c.forEach(h),this.h()},h(){u(t,"class","flex flex-col gap-1 w-full"),u(e,"class",l="absolute top-[4.25rem] w-full "+(n[30]?"md:max-w-[calc(100%-260px)]":"")+" "+(n[5]?"lg:pr-[24rem]":"")+" z-20")},m(i,c){z(i,e,c),m(e,t);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(t,null);s=!0},p(i,c){if(c[1]&1){o=it(i[31].filter(i[48]));let f;for(f=0;f<o.length;f+=1){const d=Sn(i,o,f);r[f]?(r[f].p(d,c),N(r[f],1)):(r[f]=Mn(d),r[f].c(),N(r[f],1),r[f].m(t,null))}for(Re(),f=o.length;f<r.length;f+=1)a(f);Fe()}(!s||c[0]&1073741856&&l!==(l="absolute top-[4.25rem] w-full "+(i[30]?"md:max-w-[calc(100%-260px)]":"")+" "+(i[5]?"lg:pr-[24rem]":"")+" z-20"))&&u(e,"class",l)},i(i){if(!s){for(let c=0;c<o.length;c+=1)N(r[c]);s=!0}},o(i){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)O(r[c]);s=!1},d(i){i&&h(e),xt(r,i)}}}function Mn(n){let e,t;return e=new zo({props:{banner:n[95]}}),e.$on("dismiss",n[49]),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,s){le(e,l,s),t=!0},p(l,s){const o={};s[1]&1&&(o.banner=l[95]),e.$set(o)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function wc(n){var V;let e,t,l,s,o,r,a,i,c,f,d,g,p,y,S;es.title=e=`
		`+(n[20]?`${n[20].length>30?`${n[20].slice(0,30)}...`:n[20]} | ${n[29]}`:`${n[29]}`)+`
	`;function k(_){n[42](_)}let D={title:n[9],message:n[10],input:n[11],inputPlaceholder:n[12],inputValue:n[13]};n[8]!==void 0&&(D.show=n[8]),r=new $r({props:D}),_e.push(()=>He(r,"show",k)),r.$on("confirm",n[43]),r.$on("cancel",n[44]);let I=(!n[0]||n[4]&&n[0])&&Cn(n);function B(_){n[65](_)}function E(_){n[66](_)}function L(_){n[67](_)}function T(_){n[68](_)}let U={models:n[16].reduce(n[64],[]),submitPrompt:n[36],stopResponse:n[38],modelId:((V=n[16])==null?void 0:V.at(0))??null,chatId:n[27],eventTarget:n[33]};return n[5]!==void 0&&(U.show=n[5]),n[22]!==void 0&&(U.chatFiles=n[22]),n[25]!==void 0&&(U.params=n[25]),n[23]!==void 0&&(U.files=n[23]),f=new bc({props:U}),_e.push(()=>He(f,"show",B)),_e.push(()=>He(f,"chatFiles",E)),_e.push(()=>He(f,"params",L)),_e.push(()=>He(f,"files",T)),{c(){t=Z(),l=v("audio"),o=Z(),ee(r.$$.fragment),i=Z(),I&&I.c(),c=Z(),ee(f.$$.fragment),this.h()},l(_){Jn("svelte-1123lr8",es.head).forEach(h),t=q(_),l=b(_,"AUDIO",{id:!0,src:!0,style:!0}),w(l).forEach(h),o=q(_),te(r.$$.fragment,_),i=q(_),I&&I.l(_),c=q(_),te(f.$$.fragment,_),this.h()},h(){u(l,"id","audioElement"),rl(l.src,s="")||u(l,"src",s),Mt(l,"display","none")},m(_,H){z(_,t,H),z(_,l,H),z(_,o,H),le(r,_,H),z(_,i,H),I&&I.m(_,H),z(_,c,H),le(f,_,H),S=!0},p(_,H){var A;(!S||H[0]&537919488)&&e!==(e=`
		`+(_[20]?`${_[20].length>30?`${_[20].slice(0,30)}...`:_[20]} | ${_[29]}`:`${_[29]}`)+`
	`)&&(es.title=e);const W={};H[0]&512&&(W.title=_[9]),H[0]&1024&&(W.message=_[10]),H[0]&2048&&(W.input=_[11]),H[0]&4096&&(W.inputPlaceholder=_[12]),H[0]&8192&&(W.inputValue=_[13]),!a&&H[0]&256&&(a=!0,W.show=_[8],Me(()=>a=!1)),r.$set(W),!_[0]||_[4]&&_[0]?I?(I.p(_,H),H[0]&17&&N(I,1)):(I=Cn(_),I.c(),N(I,1),I.m(c.parentNode,c)):I&&(Re(),O(I,1,1,()=>{I=null}),Fe());const R={};H[0]&268500992&&(R.models=_[16].reduce(_[64],[])),H[0]&65536&&(R.modelId=((A=_[16])==null?void 0:A.at(0))??null),H[0]&134217728&&(R.chatId=_[27]),!d&&H[0]&32&&(d=!0,R.show=_[5],Me(()=>d=!1)),!g&&H[0]&4194304&&(g=!0,R.chatFiles=_[22],Me(()=>g=!1)),!p&&H[0]&33554432&&(p=!0,R.params=_[25],Me(()=>p=!1)),!y&&H[0]&8388608&&(y=!0,R.files=_[23],Me(()=>y=!1)),f.$set(R)},i(_){S||(N(r.$$.fragment,_),N(I),N(f.$$.fragment,_),S=!0)},o(_){O(r.$$.fragment,_),O(I),O(f.$$.fragment,_),S=!1},d(_){_&&(h(t),h(l),h(o),h(i),h(c)),se(r,_),I&&I.d(_),se(f,_)}}}let kc="";function yc(n,e,t){let l,s,o,r,a,i,c,f,d,g,p,y,S,k;me(n,Xt,C=>t(26,l=C)),me(n,nl,C=>t(72,s=C)),me(n,rr,C=>t(73,o=C)),me(n,wl,C=>t(27,r=C)),me(n,Ul,C=>t(28,i=C)),me(n,Vl,C=>t(75,c=C)),me(n,Sl,C=>t(76,f=C)),me(n,or,C=>t(77,d=C)),me(n,Al,C=>t(78,g=C)),me(n,Yn,C=>t(79,p=C)),me(n,An,C=>t(29,y=C)),me(n,Kl,C=>t(30,S=C)),me(n,ar,C=>t(31,k=C));const D=bt("i18n");me(n,D,C=>t(74,a=C));let{chatIdProp:I=""}=e,B=!1;const E=new EventTarget;let L=!1,T=!1,U=!0,V,_=!1,H="",W="",R=!1,A="",j="",G=null,x=!0,F=[""],ae,be=[],Ie=[],X=!1,re=null,tt="",Ue="",J=[],Qe=[],ue=[],K={messages:{},currentId:null},$={},rt;const ht=async(C,oe)=>{var he,ce;if(C.chat_id===r){await Be(),console.log(C);let ke=K.messages[C.message_id];const P=((he=C==null?void 0:C.data)==null?void 0:he.type)??null,ie=((ce=C==null?void 0:C.data)==null?void 0:ce.data)??null;if(P==="status")ke!=null&&ke.statusHistory?ke.statusHistory.push(ie):ke.statusHistory=[ie];else if(P==="citation")ke!=null&&ke.citations?ke.citations.push(ie):ke.citations=[ie];else if(P==="message")ke.content+=ie.content;else if(P==="replace")ke.content=ie.content;else if(P==="action"){if(ie.action==="continue"){const je=document.getElementById("continue-response-button");je&&je.click()}}else P==="confirmation"?(t(14,G=oe),t(11,R=!1),t(8,_=!0),t(9,H=ie.title),t(10,W=ie.message)):P==="input"?(t(14,G=oe),t(11,R=!0),t(8,_=!0),t(9,H=ie.title),t(10,W=ie.message),t(12,A=ie.placeholder),t(13,j=(ie==null?void 0:ie.value)??"")):console.log("Unknown message type",ie);t(24,ue),t(3,K)}},St=async C=>{if(C.origin===window.origin){if(C.data.type==="input:prompt"){console.debug(C.data.text);const oe=document.getElementById("chat-textarea");oe&&(t(21,Ue=C.data.text),oe.focus())}C.data.type==="action:submit"&&(console.debug(C.data.text),Ue!==""&&(await Be(),nt(Ue))),C.data.type==="input:prompt:submit"&&(console.debug(C.data.text),Ue!==""&&(await Be(),nt(C.data.text)))}};Tl(async()=>{window.addEventListener("message",St),d==null||d.on("chat-events",ht),r?o&&await $l("/"):rt=wl.subscribe(async C=>{C||await Ht()})}),Ln(()=>{rt==null||rt(),window.removeEventListener("message",St),d==null||d.off("chat-events")});const Ht=async()=>{var he;p.url.pathname.includes("/c/")&&window.history.replaceState(K.state,"","/"),await wl.set(""),t(6,U=!0),t(20,tt=""),t(24,ue=[]),t(3,K={messages:{},currentId:null}),t(22,J=[]),t(25,$={}),p.url.searchParams.get("models")?t(1,F=(he=p.url.searchParams.get("models"))==null?void 0:he.split(",")):l!=null&&l.models?t(1,F=l==null?void 0:l.models):c!=null&&c.default_models?(console.log((c==null?void 0:c.default_models.split(","))??""),t(1,F=c==null?void 0:c.default_models.split(","))):t(1,F=[""]),p.url.searchParams.get("q")&&(t(21,Ue=p.url.searchParams.get("q")??""),t(17,Ie=(p.url.searchParams.get("tool_ids")??"").split(",").map(ce=>ce.trim()).filter(ce=>ce)),Ue&&(await Be(),nt(Ue))),p.url.searchParams.get("call")==="true"&&Sl.set(!0),t(1,F=F.map(ce=>i.map(ke=>ke.id).includes(ce)?ce:""));const C=await ps(localStorage.token);C?Xt.set(C.ui):Xt.set(JSON.parse(localStorage.getItem("settings")??"{}"));const oe=document.getElementById("chat-textarea");setTimeout(()=>oe==null?void 0:oe.focus(),0)},ct=async()=>{if(wl.set(I),t(19,re=await hr(localStorage.token,r).catch(async C=>(await $l("/"),null))),re){await Ee();const C=re.chat;if(C){console.log(C),t(1,F=((C==null?void 0:C.models)??void 0)!==void 0?C.models:[C.models??""]),t(3,K=((C==null?void 0:C.history)??void 0)!==void 0?C.history:cr(C.messages)),t(20,tt=C.title);const oe=await ps(localStorage.token);return oe?await Xt.set(oe.ui):await Xt.set(JSON.parse(localStorage.getItem("settings")??"{}")),t(25,$=(C==null?void 0:C.params)??{}),t(22,J=(C==null?void 0:C.files)??[]),t(6,U=!0),await Be(),ue.length>0&&t(3,K.messages[ue.at(-1).id].done=!0,K),await Be(),!0}else return null}},Ke=async()=>{await Be(),V&&t(7,V.scrollTop=V.scrollHeight,V)},gt=C=>{const oe=K.messages[C];return oe.parentId?[...gt(oe.parentId),oe]:[oe]},Y=async(C,oe,he,ce)=>{await Kn.run({querySelector:".mermaid"});const ke=await Cr(localStorage.token,{model:oe,messages:ce.map(P=>({id:P.id,role:P.role,content:P.content,info:P.info?P.info:void 0,timestamp:P.timestamp})),chat_id:C,session_id:d==null?void 0:d.id,id:he}).catch(P=>(De.error(P),ce.at(-1).error={content:P},null));if(ke!==null)for(const P of ke.messages)t(3,K.messages[P.id]={...K.messages[P.id],...K.messages[P.id].content!==P.content?{originalContent:K.messages[P.id].content}:{},...P},K);r==C&&(o||(t(19,re=await Dl(localStorage.token,C,{models:F,messages:ce,history:K,params:$,files:J})),nl.set(1),await dl.set(await hl(localStorage.token,s))))},ve=async(C,oe,he,ce,ke=null)=>{const P=await Tr(localStorage.token,oe,{model:he,messages:ue.map(ie=>({id:ie.id,role:ie.role,content:ie.content,info:ie.info?ie.info:void 0,timestamp:ie.timestamp})),...ke?{event:ke}:{},chat_id:C,session_id:d==null?void 0:d.id,id:ce}).catch(ie=>(De.error(ie),ue.at(-1).error={content:ie},null));if(P!==null)for(const ie of P.messages)t(3,K.messages[ie.id]={...K.messages[ie.id],...K.messages[ie.id].content!==ie.content?{originalContent:K.messages[ie.id].content}:{},...ie},K);r==C&&(o||(t(19,re=await Dl(localStorage.token,C,{models:F,messages:ue,history:K,params:$,files:J})),nl.set(1),await dl.set(await hl(localStorage.token,s))))},We=async(C,oe="")=>setInterval(()=>{d==null||d.emit("usage",{action:"chat",model:C,chat_id:oe})},1e3),nt=async(C,{_raw:oe=!1}={})=>{var ce,ke,P;let he=[];if(console.log("submitPrompt",r),t(1,F=F.map(ie=>i.map(je=>je.id).includes(ie)?ie:"")),F.includes(""))De.error(a.t("Model not selected"));else if(ue.length!=0&&ue.at(-1).done!=!0)console.log("wait");else if(ue.length!=0&&ue.at(-1).error)De.error(a.t("Oops! There was an error in the previous response. Please try again or contact admin."));else if(Qe.length>0&&Qe.filter(ie=>ie.type!=="image"&&ie.status!=="processed").length>0)De.error(a.t("Oops! Hold tight! Your files are still in the processing oven. We're cooking them up to perfection. Please be patient and we'll let you know once they're ready."));else if((((ce=c==null?void 0:c.file)==null?void 0:ce.max_count)??null)!==null&&Qe.length+J.length>((ke=c==null?void 0:c.file)==null?void 0:ke.max_count))console.log(J.length,Qe.length),De.error(a.t("You can only chat with a maximum of {{maxCount}} file(s) at a time.",{maxCount:(P=c==null?void 0:c.file)==null?void 0:P.max_count}));else{const ie=document.getElementById("chat-textarea");ie&&(ie.value="",ie.style.height="");const je=JSON.parse(JSON.stringify(Qe));J.push(...je.filter(st=>["doc","file","collection"].includes(st.type))),t(22,J=J.filter((st,Ye,at)=>at.findIndex(yt=>JSON.stringify(yt)===JSON.stringify(st))===Ye)),t(23,Qe=[]),t(21,Ue="");let lt=hs(),ot={id:lt,parentId:ue.length!==0?ue.at(-1).id:null,childrenIds:[],role:"user",content:C,files:je.length>0?je:void 0,timestamp:Math.floor(Date.now()/1e3),models:F};t(3,K.messages[lt]=ot,K),t(3,K.currentId=lt,K),ue.length!==0&&K.messages[ue.at(-1).id].childrenIds.push(lt),await Be(),he=await Xe(C,lt,{newChat:!0})}return he},Xe=async(C,oe,{modelId:he=null,modelIdx:ce=null,newChat:ke=!1}={})=>{let P=[],ie=he?[he]:ae!==void 0?[ae.id]:F;const je={};for(const[ot,st]of ie.entries()){const Ye=i.filter(at=>at.id===st).at(0);if(Ye){let at=hs(),yt={parentId:oe,id:at,childrenIds:[],role:"assistant",content:"",model:Ye.id,modelName:Ye.name??Ye.id,modelIdx:ce||ot,userContext:null,timestamp:Math.floor(Date.now()/1e3)};t(3,K.messages[at]=yt,K),t(3,K.currentId=at,K),oe!==null&&t(3,K.messages[oe].childrenIds=[...K.messages[oe].childrenIds,at],K),je[`${st}-${ce||ot}`]=at}}await Be(),ke&&ue.length==2&&(o?await wl.set("local"):(t(19,re=await dr(localStorage.token,{id:r,title:a.t("New Chat"),models:F,system:l.system??void 0,params:$,messages:ue,history:K,tags:[],timestamp:Date.now()})),nl.set(1),await dl.set(await hl(localStorage.token,s)),await wl.set(re.id)),await Be());const lt=JSON.parse(JSON.stringify(r));return await Promise.all(ie.map(async(ot,st)=>{var at,yt,$e;console.log("modelId",ot);const Ye=i.filter(Ze=>Ze.id===ot).at(0);if(Ye){ue.some(vt=>{var It;return(It=vt.files)==null?void 0:It.some(Vt=>Vt.type==="image")})&&!((($e=(yt=(at=Ye.info)==null?void 0:at.meta)==null?void 0:yt.capabilities)==null?void 0:$e.vision)??!0)&&De.error(a.t("Model {{modelName}} is not vision capable",{modelName:Ye.name??Ye.id}));let Et=je[`${ot}-${ce||st}`],Yt=K.messages[Et],Bt=null;if(((l==null?void 0:l.memory)??!1)&&Bt===null){const vt=await Ir(localStorage.token,C).catch(It=>(De.error(It),null));vt&&(vt.documents[0].length>0&&(Bt=vt.documents[0].reduce((It,Vt,Jt)=>{const Ft=vt.metadatas[0][Jt].created_at,Le=new Date(Ft*1e3).toISOString().split("T")[0];return`${It}${Jt+1}. [${Le}]. ${Vt}
`},"")),console.log(Bt))}Yt.userContext=Bt;const Lt=await We(Ye.id,lt);X&&await we(Ye.id,oe,Et);let pt=null;(Ye==null?void 0:Ye.owned_by)==="openai"?pt=await _t(Ye,C,Et,lt):Ye&&(pt=await wt(Ye,C,Et,lt)),P.push(pt),Lt&&clearInterval(Lt)}else De.error(a.t("Model {{modelId}} not found",{modelId:ot}))})),nl.set(1),dl.set(await hl(localStorage.token,s)),P},wt=async(C,oe,he,ce)=>{var yt,$e,Ze,Et,Yt,Bt,Lt,pt,vt,It,Vt,Jt,Ft;let ke=null;const P=K.messages[he],ie=K.messages[P.parentId];await Be(),Ke();const je=[$!=null&&$.system||l.system||((P==null?void 0:P.userContext)??null)?{role:"system",content:`${ms(($==null?void 0:$.system)??(l==null?void 0:l.system)??"",g.name,l!=null&&l.userLocation?await _s(localStorage.token):void 0)}${(P==null?void 0:P.userContext)??null?`

User Context:
${(P==null?void 0:P.userContext)??""}`:""}`}:void 0,...ue].filter(Le=>{var mt;return(mt=Le==null?void 0:Le.content)==null?void 0:mt.trim()}).map(Le=>{var dt;const mt={role:Le.role,content:Le.content},ft=(dt=Le.files)==null?void 0:dt.filter(Ae=>Ae.type==="image").map(Ae=>Ae.url.slice(Ae.url.indexOf(",")+1));return ft&&ft.length>0&&Le.role==="user"&&(mt.images=ft),mt});let lt=-1;je.forEach((Le,mt)=>{Le.images&&(lt=mt)}),je.forEach((Le,mt)=>{mt!==lt&&delete Le.images});let ot=JSON.parse(JSON.stringify(J));((($e=(yt=C==null?void 0:C.info)==null?void 0:yt.meta)==null?void 0:$e.knowledge)??!1)&&(P.statusHistory=[{action:"knowledge_search",description:a.t('Searching Knowledge for "{{searchQuery}}"',{searchQuery:ie.content}),done:!1}],ot.push(...C.info.meta.knowledge),t(24,ue),t(3,K)),ot.push(...((ie==null?void 0:ie.files)??[]).filter(Le=>["doc","file","collection"].includes(Le.type)),...((P==null?void 0:P.files)??[]).filter(Le=>["web_search_results"].includes(Le.type))),Ke(),E.dispatchEvent(new CustomEvent("chat:start",{detail:{id:he}})),await Be();const[st,Ye]=await fr(localStorage.token,{stream:!0,model:C.id,messages:je,options:{...$??l.params??{},stop:($==null?void 0:$.stop)??((Ze=l==null?void 0:l.params)==null?void 0:Ze.stop)??void 0?(($==null?void 0:$.stop.split(",").map(Le=>Le.trim()))??l.params.stop).map(Le=>decodeURIComponent(JSON.parse('"'+Le.replace(/\"/g,'\\"')+'"'))):void 0,num_predict:($==null?void 0:$.max_tokens)??((Et=l==null?void 0:l.params)==null?void 0:Et.max_tokens)??void 0,repeat_penalty:($==null?void 0:$.frequency_penalty)??((Yt=l==null?void 0:l.params)==null?void 0:Yt.frequency_penalty)??void 0},format:l.requestFormat??void 0,keep_alive:l.keepAlive??void 0,tool_ids:Ie.length>0?Ie:void 0,files:ot.length>0?ot:void 0,session_id:d==null?void 0:d.id,chat_id:r,id:he});if(st&&st.ok){console.log("controller",Ye);const Le=st.body.pipeThrough(new TextDecoderStream).pipeThrough(ir(`
`)).getReader();for(;;){const{value:mt,done:ft}=await Le.read();if(ft||T||ce!==r){if(P.done=!0,t(24,ue),t(3,K),T)Ye.abort("User: Stop Response");else{const dt=gt(he);await Y(ce,C.id,he,dt)}ke=P.content;break}try{let dt=mt.split(`
`);for(const Ae of dt)if(Ae!==""){console.log(Ae);let et=JSON.parse(Ae);if("citations"in et){P.citations=et.citations,(((Lt=(Bt=C==null?void 0:C.info)==null?void 0:Bt.meta)==null?void 0:Lt.knowledge)??!1)&&(P.statusHistory=P.statusHistory.filter(ut=>ut.action!=="knowledge_search"));continue}if("detail"in et)throw et;if(et.done==!1){if(P.content==""&&et.message.content==`
`)continue;{P.content+=et.message.content,navigator.vibrate&&((l==null?void 0:l.hapticFeedback)??!1)&&navigator.vibrate(5);const ut=ql(P.content,((vt=(pt=c==null?void 0:c.audio)==null?void 0:pt.tts)==null?void 0:vt.split_on)??"punctuation");ut.pop(),ut.length>0&&ut[ut.length-1]!==P.lastSentence&&(P.lastSentence=ut[ut.length-1],E.dispatchEvent(new CustomEvent("chat",{detail:{id:he,content:ut[ut.length-1]}}))),t(24,ue),t(3,K)}}else{if(P.done=!0,P.content==""&&(P.error={code:400,content:"Oops! No text generated from Ollama, Please try again."}),P.context=et.context??null,P.info={total_duration:et.total_duration,load_duration:et.load_duration,sample_count:et.sample_count,sample_duration:et.sample_duration,prompt_eval_count:et.prompt_eval_count,prompt_eval_duration:et.prompt_eval_duration,eval_count:et.eval_count,eval_duration:et.eval_duration},t(24,ue),t(3,K),l.notificationEnabled&&!document.hasFocus()){const ut=new Notification(`${C.id}`,{body:P.content,icon:`${Ol}/static/favicon.png`})}((l==null?void 0:l.responseAutoCopy)??!1)&&gs(P.content),l.responseAutoPlayback&&!f&&(await Be(),(It=document.getElementById(`speak-button-${P.id}`))==null||It.click())}}}catch(dt){console.log(dt),"detail"in dt&&De.error(dt.detail);break}U&&Ke()}r==ce&&(l.saveChatHistory??!0)&&(t(19,re=await Dl(localStorage.token,ce,{messages:ue,history:K,models:F,params:$,files:J})),nl.set(1),await dl.set(await hl(localStorage.token,s)))}else{if(st!==null){const Le=await st.json();console.log(Le),"detail"in Le?(De.error(Le.detail),P.error={content:Le.detail}):(De.error(Le.error),P.error={content:Le.error})}else De.error(a.t("Uh-oh! There was an issue connecting to {{provider}}.",{provider:"Ollama"})),P.error={content:a.t("Uh-oh! There was an issue connecting to {{provider}}.",{provider:"Ollama"})};P.done=!0,P.statusHistory&&(P.statusHistory=P.statusHistory.filter(Le=>Le.action!=="knowledge_search")),t(24,ue),t(3,K)}T=!1,await Be();let at=((Ft=ql(P.content,((Jt=(Vt=c==null?void 0:c.audio)==null?void 0:Vt.tts)==null?void 0:Jt.split_on)??"punctuation"))==null?void 0:Ft.at(-1))??"";if(at&&E.dispatchEvent(new CustomEvent("chat",{detail:{id:he,content:at}})),E.dispatchEvent(new CustomEvent("chat:finish",{detail:{id:he,content:P.content}})),U&&Ke(),ue.length==2&&ue.at(1).content!==""&&F[0]===C.id){window.history.replaceState(K.state,"",`/c/${ce}`);const Le=await Q(oe);await Ce(ce,Le)}return ke},_t=async(C,oe,he,ce)=>{var ot,st,Ye,at,yt,$e,Ze,Et,Yt,Bt,Lt,pt,vt,It,Vt,Jt,Ft,Le,mt;let ke=null;const P=K.messages[he],ie=K.messages[P.parentId];let je=JSON.parse(JSON.stringify(J));(((st=(ot=C==null?void 0:C.info)==null?void 0:ot.meta)==null?void 0:st.knowledge)??!1)&&(P.statusHistory=[{action:"knowledge_search",description:a.t('Searching Knowledge for "{{searchQuery}}"',{searchQuery:ie.content}),done:!1}],je.push(...C.info.meta.knowledge),t(24,ue),t(3,K)),je.push(...((ie==null?void 0:ie.files)??[]).filter(ft=>["doc","file","collection"].includes(ft.type)),...((P==null?void 0:P.files)??[]).filter(ft=>["web_search_results"].includes(ft.type))),Ke(),E.dispatchEvent(new CustomEvent("chat:start",{detail:{id:he}})),await Be();try{const[ft,dt]=await gr(localStorage.token,{stream:!0,model:C.id,stream_options:((yt=(at=(Ye=C.info)==null?void 0:Ye.meta)==null?void 0:at.capabilities)==null?void 0:yt.usage)??!1?{include_usage:!0}:void 0,messages:[$!=null&&$.system||l.system||((P==null?void 0:P.userContext)??null)?{role:"system",content:`${ms(($==null?void 0:$.system)??(l==null?void 0:l.system)??"",g.name,l!=null&&l.userLocation?await _s(localStorage.token):void 0)}${(P==null?void 0:P.userContext)??null?`

User Context:
${(P==null?void 0:P.userContext)??""}`:""}`}:void 0,...ue].filter(Ae=>{var et;return(et=Ae==null?void 0:Ae.content)==null?void 0:et.trim()}).map((Ae,et,ut)=>{var vl;return{role:Ae.role,...((vl=Ae.files)==null?void 0:vl.filter(Nt=>Nt.type==="image").length)>0&&Ae.role==="user"?{content:[{type:"text",text:ut.length-1!==et?Ae.content:(Ae==null?void 0:Ae.raContent)??Ae.content},...Ae.files.filter(Nt=>Nt.type==="image").map(Nt=>({type:"image_url",image_url:{url:Nt.url}}))]}:{content:ut.length-1!==et?Ae.content:(Ae==null?void 0:Ae.raContent)??Ae.content}}}),seed:($==null?void 0:$.seed)??(($e=l==null?void 0:l.params)==null?void 0:$e.seed)??void 0,stop:($==null?void 0:$.stop)??((Ze=l==null?void 0:l.params)==null?void 0:Ze.stop)??void 0?(($==null?void 0:$.stop.split(",").map(Ae=>Ae.trim()))??l.params.stop).map(Ae=>decodeURIComponent(JSON.parse('"'+Ae.replace(/\"/g,'\\"')+'"'))):void 0,temperature:($==null?void 0:$.temperature)??((Et=l==null?void 0:l.params)==null?void 0:Et.temperature)??void 0,top_p:($==null?void 0:$.top_p)??((Yt=l==null?void 0:l.params)==null?void 0:Yt.top_p)??void 0,frequency_penalty:($==null?void 0:$.frequency_penalty)??((Bt=l==null?void 0:l.params)==null?void 0:Bt.frequency_penalty)??void 0,max_tokens:($==null?void 0:$.max_tokens)??((Lt=l==null?void 0:l.params)==null?void 0:Lt.max_tokens)??void 0,tool_ids:Ie.length>0?Ie:void 0,files:je.length>0?je:void 0,session_id:d==null?void 0:d.id,chat_id:r,id:he},`${Ol}/api`);if(await Be(),Ke(),ft&&ft.ok&&ft.body){const Ae=await Ts(ft.body,l.splitLargeChunks);for await(const et of Ae){const{value:ut,done:vl,citations:Nt,error:zl,usage:bl}=et;if(zl){await Gt(zl,null,C,P);break}if(vl||T||ce!==r){if(P.done=!0,t(24,ue),t(3,K),T)dt.abort("User: Stop Response");else{const Dt=gt(he);await Y(ce,C.id,he,Dt)}ke=P.content;break}if(bl&&(P.info={...bl,openai:!0}),Nt){P.citations=Nt,(((vt=(pt=C==null?void 0:C.info)==null?void 0:pt.meta)==null?void 0:vt.knowledge)??!1)&&(P.statusHistory=P.statusHistory.filter(Dt=>Dt.action!=="knowledge_search"));continue}if(!(P.content==""&&ut==`
`)){{P.content+=ut,navigator.vibrate&&((l==null?void 0:l.hapticFeedback)??!1)&&navigator.vibrate(5);const Dt=ql(P.content,((Vt=(It=c==null?void 0:c.audio)==null?void 0:It.tts)==null?void 0:Vt.split_on)??"punctuation");Dt.pop(),Dt.length>0&&Dt[Dt.length-1]!==P.lastSentence&&(P.lastSentence=Dt[Dt.length-1],E.dispatchEvent(new CustomEvent("chat",{detail:{id:he,content:Dt[Dt.length-1]}}))),t(24,ue),t(3,K)}U&&Ke()}}if(l.notificationEnabled&&!document.hasFocus()){const et=new Notification(`${C.id}`,{body:P.content,icon:`${Ol}/static/favicon.png`})}l.responseAutoCopy&&gs(P.content),l.responseAutoPlayback&&!f&&(await Be(),(Jt=document.getElementById(`speak-button-${P.id}`))==null||Jt.click()),r==ce&&(l.saveChatHistory??!0)&&(t(19,re=await Dl(localStorage.token,ce,{models:F,messages:ue,history:K,params:$,files:J})),nl.set(1),await dl.set(await hl(localStorage.token,s)))}else await Gt(null,ft,C,P)}catch(ft){await Gt(ft,null,C,P)}t(24,ue),t(3,K),T=!1,await Be();let lt=((mt=ql(P.content,((Le=(Ft=c==null?void 0:c.audio)==null?void 0:Ft.tts)==null?void 0:Le.split_on)??"punctuation"))==null?void 0:mt.at(-1))??"";if(lt&&E.dispatchEvent(new CustomEvent("chat",{detail:{id:he,content:lt}})),E.dispatchEvent(new CustomEvent("chat:finish",{detail:{id:he,content:P.content}})),U&&Ke(),ue.length==2&&F[0]===C.id){window.history.replaceState(K.state,"",`/c/${ce}`);const ft=await Q(oe);await Ce(ce,ft)}return ke},Gt=async(C,oe,he,ce)=>{let ke="",P;C?P=C:oe!==null&&(P=await oe.json()),console.error(P),"detail"in P?(De.error(P.detail),ke=P.detail):"error"in P?"message"in P.error?(De.error(P.error.message),ke=P.error.message):(De.error(P.error),ke=P.error):"message"in P&&(De.error(P.message),ke=P.message),ce.error={content:a.t("Uh-oh! There was an issue connecting to {{provider}}.",{provider:he.name??he.id})+`
`+ke},ce.done=!0,ce.statusHistory&&(ce.statusHistory=ce.statusHistory.filter(ie=>ie.action!=="knowledge_search")),t(24,ue),t(3,K)},tl=()=>{T=!0,console.log("stopResponse")},Ct=async C=>{if(console.log("regenerateResponse"),ue.length!=0){let oe=K.messages[C.parentId],he=oe.content;((oe==null?void 0:oe.models)??[...F]).length==1?await Xe(he,oe.id):await Xe(he,oe.id,{modelId:C.model,modelIdx:C.modelIdx})}},jt=async()=>{console.log("continueGeneration");const C=JSON.parse(JSON.stringify(r));if(ue.length!=0&&ue.at(-1).done==!0){const oe=K.messages[K.currentId];oe.done=!1,await Be();const he=i.filter(ce=>ce.id===oe.model).at(0);he&&((he==null?void 0:he.owned_by)==="openai"?await _t(he,K.messages[oe.parentId].content,oe.id,C):await wt(he,K.messages[oe.parentId].content,oe.id,C))}else De.error(a.t("Model {{modelId}} not found",{modelId}))},Q=async C=>{var oe;return((oe=l==null?void 0:l.title)==null?void 0:oe.auto)??!0?await Sr(localStorage.token,F[0],C,r).catch(ce=>(console.error(ce),"New Chat")):`${C}`},Ce=async(C,oe)=>{C===r&&t(20,tt=oe),o||(t(19,re=await Dl(localStorage.token,C,{title:oe})),nl.set(1),await dl.set(await hl(localStorage.token,s)))},we=async(C,oe,he)=>{const ce=K.messages[he],ke=K.messages[oe];ce.statusHistory=[{done:!1,action:"web_search",description:a.t("Generating search query")}],t(24,ue),t(3,K);const P=ke.content;let ie=await Mr(localStorage.token,C,ue,P).catch(lt=>(console.log(lt),P));ie||(De.warning(a.t("No search query generated")),ce.statusHistory.push({done:!0,error:!0,action:"web_search",description:"No search query generated"}),t(24,ue),t(3,K)),ce.statusHistory.push({done:!1,action:"web_search",description:a.t('Searching "{{searchQuery}}"',{searchQuery:ie})}),t(24,ue),t(3,K);const je=await wr(localStorage.token,ie).catch(lt=>(console.log(lt),De.error(lt),null));je?(ce.statusHistory.push({done:!0,action:"web_search",description:a.t("Searched {{count}} sites",{count:je.filenames.length}),query:ie,urls:je.filenames}),((ce==null?void 0:ce.files)??!0)&&(ce.files=[]),ce.files.push({collection_name:je.collection_name,name:ie,type:"web_search_results",urls:je.filenames}),t(24,ue),t(3,K)):(ce.statusHistory.push({done:!0,error:!0,action:"web_search",description:"No search results found"}),t(24,ue),t(3,K))},Ee=async()=>await mr(localStorage.token,r).catch(async C=>[]),M=async C=>{r==C&&(o||(t(19,re=await Dl(localStorage.token,C,{messages:ue,history:K,models:F,params:$,files:J})),nl.set(1),await dl.set(await hl(localStorage.token,s))))},ne=async(C,oe,he)=>{console.log("mergeResponses",C,oe);const ce=K.messages[C],ke={status:!0,content:""};ce.merged=ke,t(24,ue),t(3,K);try{const[P,ie]=await Vr(localStorage.token,ce.model,K.messages[ce.parentId].content,oe);if(P&&P.ok&&P.body){const je=await Ts(P.body,l.splitLargeChunks);for await(const lt of je){const{value:ot,done:st,citations:Ye,error:at,usage:yt}=lt;if(at||st)break;ke.content==""&&ot==`
`||(ke.content+=ot,t(24,ue),t(3,K),U&&Ke())}await M(he)}else console.error(P)}catch(P){console.error(P)}};function de(C){_=C,t(8,_)}const Te=C=>{C.detail?G(C.detail):G(!0)},Ve=()=>{G(!1)};function Oe(C){F=C,t(1,F)}function kt(C){x=C,t(15,x)}function Tt(C){L=C,t(5,L)}const ll=C=>C.dismissible?!JSON.parse(localStorage.getItem("dismissedBannerIds")??"[]").includes(C.id):!0,Hl=C=>{const oe=C.detail;localStorage.setItem("dismissedBannerIds",JSON.stringify([oe,...JSON.parse(localStorage.getItem("dismissedBannerIds")??"[]")].filter(he=>k.find(ce=>ce.id===he))))};function ol(C){K=C,t(3,K)}function al(C){ue=C,t(24,ue),t(3,K)}function gl(C){U=C,t(6,U)}function yl(C){Ue=C,t(21,Ue)}function Bl(C){_e[C?"unshift":"push"](()=>{V=C,t(7,V)})}const il=C=>{t(6,U=V.scrollHeight-V.scrollTop<=V.clientHeight+5)},cl=(C,oe,he,ce)=>{var P,ie;const ke=i.find(je=>je.id===oe);return((ie=(P=ke==null?void 0:ke.info)==null?void 0:P.meta)==null?void 0:ie.toolIds)??!1?[...new Set([...C,...ke.info.meta.toolIds])]:C};function Rt(C){Qe=C,t(23,Qe)}function Qt(C){Ue=C,t(21,Ue)}function fl(C){U=C,t(6,U)}function pl(C){Ie=C,t(17,Ie)}function El(C){X=C,t(18,X)}function Ll(C){ae=C,t(2,ae)}const sl=()=>{t(5,L=!0)},jl=(C,oe,he,ce)=>{const ke=i.find(P=>P.id===oe);return ke?[...C,ke]:C};function Nl(C){L=C,t(5,L)}function Kt(C){J=C,t(22,J)}function ul(C){$=C,t(25,$)}function _l(C){Qe=C,t(23,Qe)}return n.$$set=C=>{"chatIdProp"in C&&t(0,I=C.chatIdProp)},n.$$.update=()=>{if(n.$$.dirty[0]&6&&t(16,be=ae!==void 0?[ae.id]:F),n.$$.dirty[0]&8)if(K.currentId!==null){let C=[],oe=K.messages[K.currentId];for(;oe!==null;)C.unshift({...oe}),oe=oe.parentId!==null?K.messages[oe.parentId]:null;t(24,ue=C)}else t(24,ue=[]);n.$$.dirty[0]&1&&I&&(async()=>{if(console.log(I),I&&await ct()){await Be(),t(4,B=!0),window.setTimeout(()=>Ke(),0);const C=document.getElementById("chat-textarea");C==null||C.focus()}else await $l("/")})()},[I,F,ae,K,B,L,U,V,_,H,W,R,A,j,G,x,be,Ie,X,re,tt,Ue,J,Qe,ue,$,l,r,i,y,S,k,D,E,Ht,ve,nt,Xe,tl,Ct,jt,ne,de,Te,Ve,Oe,kt,Tt,ll,Hl,ol,al,gl,yl,Bl,il,cl,Rt,Qt,fl,pl,El,Ll,sl,jl,Nl,Kt,ul,_l]}class Hf extends Je{constructor(e){super(),Ge(this,e,yc,wc,xe,{chatIdProp:0},null,[-1,-1,-1,-1])}}function Ec(n){let e,t,l,s=n[1].t("Keyboard shortcuts")+"",o,r,a,i='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',c,f,d,g,p,y,S=n[1].t("Open new chat")+"",k,D,I,B='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">O</div>',E,L,T,U=n[1].t("Focus chat input")+"",V,_,H,W='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Esc</div>',R,A,j,G=n[1].t("Copy last code block")+"",x,F,ae,be='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">;</div>',Ie,X,re,tt=n[1].t("Copy last response")+"",Ue,J,Qe,ue='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">C</div>',K,$,rt,ht,St=n[1].t("Toggle settings")+"",Ht,ct,Ke,gt='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">.</div>',Y,ve,We,nt=n[1].t("Toggle sidebar")+"",Xe,wt,_t,Gt='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">S</div>',tl,Ct,jt,Q=n[1].t("Delete chat")+"",Ce,we,Ee,M='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">âŒ«</div>',ne,de,Te,Ve=n[1].t("Show shortcuts")+"",Oe,kt,Tt,ll='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">/</div>',Hl,ol,al,gl=n[1].t("Input commands")+"",yl,Bl,il,cl,Rt,Qt,fl,pl=n[1].t("Attach file")+"",El,Ll,sl,jl='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">#</div>',Nl,Kt,ul,_l=n[1].t("Add custom prompt")+"",C,oe,he,ce='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">/</div>',ke,P,ie,je=n[1].t("Select model")+"",lt,ot,st,Ye='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">@</div>',at,yt;return{c(){e=v("div"),t=v("div"),l=v("div"),o=ge(s),r=Z(),a=v("button"),a.innerHTML=i,c=Z(),f=v("div"),d=v("div"),g=v("div"),p=v("div"),y=v("div"),k=ge(S),D=Z(),I=v("div"),I.innerHTML=B,E=Z(),L=v("div"),T=v("div"),V=ge(U),_=Z(),H=v("div"),H.innerHTML=W,R=Z(),A=v("div"),j=v("div"),x=ge(G),F=Z(),ae=v("div"),ae.innerHTML=be,Ie=Z(),X=v("div"),re=v("div"),Ue=ge(tt),J=Z(),Qe=v("div"),Qe.innerHTML=ue,K=Z(),$=v("div"),rt=v("div"),ht=v("div"),Ht=ge(St),ct=Z(),Ke=v("div"),Ke.innerHTML=gt,Y=Z(),ve=v("div"),We=v("div"),Xe=ge(nt),wt=Z(),_t=v("div"),_t.innerHTML=Gt,tl=Z(),Ct=v("div"),jt=v("div"),Ce=ge(Q),we=Z(),Ee=v("div"),Ee.innerHTML=M,ne=Z(),de=v("div"),Te=v("div"),Oe=ge(Ve),kt=Z(),Tt=v("div"),Tt.innerHTML=ll,Hl=Z(),ol=v("div"),al=v("div"),yl=ge(gl),Bl=Z(),il=v("div"),cl=v("div"),Rt=v("div"),Qt=v("div"),fl=v("div"),El=ge(pl),Ll=Z(),sl=v("div"),sl.innerHTML=jl,Nl=Z(),Kt=v("div"),ul=v("div"),C=ge(_l),oe=Z(),he=v("div"),he.innerHTML=ce,ke=Z(),P=v("div"),ie=v("div"),lt=ge(je),ot=Z(),st=v("div"),st.innerHTML=Ye,this.h()},l($e){e=b($e,"DIV",{class:!0});var Ze=w(e);t=b(Ze,"DIV",{class:!0});var Et=w(t);l=b(Et,"DIV",{class:!0});var Yt=w(l);o=pe(Yt,s),Yt.forEach(h),r=q(Et),a=b(Et,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(a)!=="svelte-745w2y"&&(a.innerHTML=i),Et.forEach(h),c=q(Ze),f=b(Ze,"DIV",{class:!0});var Bt=w(f);d=b(Bt,"DIV",{class:!0});var Lt=w(d);g=b(Lt,"DIV",{class:!0});var pt=w(g);p=b(pt,"DIV",{class:!0});var vt=w(p);y=b(vt,"DIV",{class:!0});var It=w(y);k=pe(It,S),It.forEach(h),D=q(vt),I=b(vt,"DIV",{class:!0,"data-svelte-h":!0}),qe(I)!=="svelte-lcmjz9"&&(I.innerHTML=B),vt.forEach(h),E=q(pt),L=b(pt,"DIV",{class:!0});var Vt=w(L);T=b(Vt,"DIV",{class:!0});var Jt=w(T);V=pe(Jt,U),Jt.forEach(h),_=q(Vt),H=b(Vt,"DIV",{class:!0,"data-svelte-h":!0}),qe(H)!=="svelte-1c7wvdz"&&(H.innerHTML=W),Vt.forEach(h),R=q(pt),A=b(pt,"DIV",{class:!0});var Ft=w(A);j=b(Ft,"DIV",{class:!0});var Le=w(j);x=pe(Le,G),Le.forEach(h),F=q(Ft),ae=b(Ft,"DIV",{class:!0,"data-svelte-h":!0}),qe(ae)!=="svelte-1vgtrzt"&&(ae.innerHTML=be),Ft.forEach(h),Ie=q(pt),X=b(pt,"DIV",{class:!0});var mt=w(X);re=b(mt,"DIV",{class:!0});var ft=w(re);Ue=pe(ft,tt),ft.forEach(h),J=q(mt),Qe=b(mt,"DIV",{class:!0,"data-svelte-h":!0}),qe(Qe)!=="svelte-m149u9"&&(Qe.innerHTML=ue),mt.forEach(h),pt.forEach(h),K=q(Lt),$=b(Lt,"DIV",{class:!0});var dt=w($);rt=b(dt,"DIV",{class:!0});var Ae=w(rt);ht=b(Ae,"DIV",{class:!0});var et=w(ht);Ht=pe(et,St),et.forEach(h),ct=q(Ae),Ke=b(Ae,"DIV",{class:!0,"data-svelte-h":!0}),qe(Ke)!=="svelte-1lfzi34"&&(Ke.innerHTML=gt),Ae.forEach(h),Y=q(dt),ve=b(dt,"DIV",{class:!0});var ut=w(ve);We=b(ut,"DIV",{class:!0});var vl=w(We);Xe=pe(vl,nt),vl.forEach(h),wt=q(ut),_t=b(ut,"DIV",{class:!0,"data-svelte-h":!0}),qe(_t)!=="svelte-1egz3pd"&&(_t.innerHTML=Gt),ut.forEach(h),tl=q(dt),Ct=b(dt,"DIV",{class:!0});var Nt=w(Ct);jt=b(Nt,"DIV",{class:!0});var zl=w(jt);Ce=pe(zl,Q),zl.forEach(h),we=q(Nt),Ee=b(Nt,"DIV",{class:!0,"data-svelte-h":!0}),qe(Ee)!=="svelte-1b065vn"&&(Ee.innerHTML=M),Nt.forEach(h),ne=q(dt),de=b(dt,"DIV",{class:!0});var bl=w(de);Te=b(bl,"DIV",{class:!0});var Dt=w(Te);Oe=pe(Dt,Ve),Dt.forEach(h),kt=q(bl),Tt=b(bl,"DIV",{class:!0,"data-svelte-h":!0}),qe(Tt)!=="svelte-714lzr"&&(Tt.innerHTML=ll),bl.forEach(h),dt.forEach(h),Lt.forEach(h),Bt.forEach(h),Hl=q(Ze),ol=b(Ze,"DIV",{class:!0});var ns=w(ol);al=b(ns,"DIV",{class:!0});var rs=w(al);yl=pe(rs,gl),rs.forEach(h),ns.forEach(h),Bl=q(Ze),il=b(Ze,"DIV",{class:!0});var os=w(il);cl=b(os,"DIV",{class:!0});var as=w(cl);Rt=b(as,"DIV",{class:!0});var Il=w(Rt);Qt=b(Il,"DIV",{class:!0});var Rl=w(Qt);fl=b(Rl,"DIV",{class:!0});var is=w(fl);El=pe(is,pl),is.forEach(h),Ll=q(Rl),sl=b(Rl,"DIV",{class:!0,"data-svelte-h":!0}),qe(sl)!=="svelte-11t0lmd"&&(sl.innerHTML=jl),Rl.forEach(h),Nl=q(Il),Kt=b(Il,"DIV",{class:!0});var Fl=w(Kt);ul=b(Fl,"DIV",{class:!0});var cs=w(ul);C=pe(cs,_l),cs.forEach(h),oe=q(Fl),he=b(Fl,"DIV",{class:!0,"data-svelte-h":!0}),qe(he)!=="svelte-1s9pky1"&&(he.innerHTML=ce),Fl.forEach(h),ke=q(Il),P=b(Il,"DIV",{class:!0});var Wl=w(P);ie=b(Wl,"DIV",{class:!0});var fs=w(ie);lt=pe(fs,je),fs.forEach(h),ot=q(Wl),st=b(Wl,"DIV",{class:!0,"data-svelte-h":!0}),qe(st)!=="svelte-oivy56"&&(st.innerHTML=Ye),Wl.forEach(h),Il.forEach(h),as.forEach(h),os.forEach(h),Ze.forEach(h),this.h()},h(){u(l,"class","text-lg font-medium self-center"),u(a,"class","self-center"),u(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4"),u(y,"class","text-sm"),u(I,"class","flex space-x-1 text-xs"),u(p,"class","w-full flex justify-between items-center"),u(T,"class","text-sm"),u(H,"class","flex space-x-1 text-xs"),u(L,"class","w-full flex justify-between items-center"),u(j,"class","text-sm"),u(ae,"class","flex space-x-1 text-xs"),u(A,"class","w-full flex justify-between items-center"),u(re,"class","text-sm"),u(Qe,"class","flex space-x-1 text-xs"),u(X,"class","w-full flex justify-between items-center"),u(g,"class","flex flex-col space-y-3 w-full self-start"),u(ht,"class","text-sm"),u(Ke,"class","flex space-x-1 text-xs"),u(rt,"class","w-full flex justify-between items-center"),u(We,"class","text-sm"),u(_t,"class","flex space-x-1 text-xs"),u(ve,"class","w-full flex justify-between items-center"),u(jt,"class","text-sm"),u(Ee,"class","flex space-x-1 text-xs"),u(Ct,"class","w-full flex justify-between items-center"),u(Te,"class","text-sm"),u(Tt,"class","flex space-x-1 text-xs"),u(de,"class","w-full flex justify-between items-center"),u($,"class","flex flex-col space-y-3 w-full self-start"),u(d,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),u(f,"class","flex flex-col md:flex-row w-full p-5 md:space-x-4 dark:text-gray-200"),u(al,"class","text-lg font-medium self-center"),u(ol,"class","flex justify-between dark:text-gray-300 px-5"),u(fl,"class","text-sm"),u(sl,"class","flex space-x-1 text-xs"),u(Qt,"class","w-full flex justify-between items-center"),u(ul,"class","text-sm"),u(he,"class","flex space-x-1 text-xs"),u(Kt,"class","w-full flex justify-between items-center"),u(ie,"class","text-sm"),u(st,"class","flex space-x-1 text-xs"),u(P,"class","w-full flex justify-between items-center"),u(Rt,"class","flex flex-col space-y-3 w-full self-start"),u(cl,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),u(il,"class","flex flex-col md:flex-row w-full p-5 md:space-x-4 dark:text-gray-200"),u(e,"class","text-gray-700 dark:text-gray-100")},m($e,Ze){z($e,e,Ze),m(e,t),m(t,l),m(l,o),m(t,r),m(t,a),m(e,c),m(e,f),m(f,d),m(d,g),m(g,p),m(p,y),m(y,k),m(p,D),m(p,I),m(g,E),m(g,L),m(L,T),m(T,V),m(L,_),m(L,H),m(g,R),m(g,A),m(A,j),m(j,x),m(A,F),m(A,ae),m(g,Ie),m(g,X),m(X,re),m(re,Ue),m(X,J),m(X,Qe),m(d,K),m(d,$),m($,rt),m(rt,ht),m(ht,Ht),m(rt,ct),m(rt,Ke),m($,Y),m($,ve),m(ve,We),m(We,Xe),m(ve,wt),m(ve,_t),m($,tl),m($,Ct),m(Ct,jt),m(jt,Ce),m(Ct,we),m(Ct,Ee),m($,ne),m($,de),m(de,Te),m(Te,Oe),m(de,kt),m(de,Tt),m(e,Hl),m(e,ol),m(ol,al),m(al,yl),m(e,Bl),m(e,il),m(il,cl),m(cl,Rt),m(Rt,Qt),m(Qt,fl),m(fl,El),m(Qt,Ll),m(Qt,sl),m(Rt,Nl),m(Rt,Kt),m(Kt,ul),m(ul,C),m(Kt,oe),m(Kt,he),m(Rt,ke),m(Rt,P),m(P,ie),m(ie,lt),m(P,ot),m(P,st),at||(yt=fe(a,"click",n[3]),at=!0)},p($e,Ze){Ze&2&&s!==(s=$e[1].t("Keyboard shortcuts")+"")&&ye(o,s),Ze&2&&S!==(S=$e[1].t("Open new chat")+"")&&ye(k,S),Ze&2&&U!==(U=$e[1].t("Focus chat input")+"")&&ye(V,U),Ze&2&&G!==(G=$e[1].t("Copy last code block")+"")&&ye(x,G),Ze&2&&tt!==(tt=$e[1].t("Copy last response")+"")&&ye(Ue,tt),Ze&2&&St!==(St=$e[1].t("Toggle settings")+"")&&ye(Ht,St),Ze&2&&nt!==(nt=$e[1].t("Toggle sidebar")+"")&&ye(Xe,nt),Ze&2&&Q!==(Q=$e[1].t("Delete chat")+"")&&ye(Ce,Q),Ze&2&&Ve!==(Ve=$e[1].t("Show shortcuts")+"")&&ye(Oe,Ve),Ze&2&&gl!==(gl=$e[1].t("Input commands")+"")&&ye(yl,gl),Ze&2&&pl!==(pl=$e[1].t("Attach file")+"")&&ye(El,pl),Ze&2&&_l!==(_l=$e[1].t("Add custom prompt")+"")&&ye(C,_l),Ze&2&&je!==(je=$e[1].t("Select model")+"")&&ye(lt,je)},d($e){$e&&h(e),at=!1,yt()}}}function Ic(n){let e,t,l;function s(r){n[4](r)}let o={$$slots:{default:[Ec]},$$scope:{ctx:n}};return n[0]!==void 0&&(o.show=n[0]),e=new Fn({props:o}),_e.push(()=>He(e,"show",s)),{c(){ee(e.$$.fragment)},l(r){te(e.$$.fragment,r)},m(r,a){le(e,r,a),l=!0},p(r,[a]){const i={};a&35&&(i.$$scope={dirty:a,ctx:r}),!t&&a&1&&(t=!0,i.show=r[0],Me(()=>t=!1)),e.$set(i)},i(r){l||(N(e.$$.fragment,r),l=!0)},o(r){O(e.$$.fragment,r),l=!1},d(r){se(e,r)}}}function Dc(n,e,t){let l;const s=bt("i18n");me(n,s,i=>t(1,l=i));let{show:o=!1}=e;const r=()=>{t(0,o=!1)};function a(i){o=i,t(0,o)}return n.$$set=i=>{"show"in i&&t(0,o=i.show)},[o,l,s,r,a]}class Sc extends Je{constructor(e){super(),Ge(this,e,Dc,Ic,xe,{show:0})}}function Cc(n){let e,t;return{c(){e=Ne("svg"),t=Ne("path"),this.h()},l(l){e=ze(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=w(e);t=ze(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(t).forEach(h),s.forEach(h),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"d","M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width",n[1]),u(e,"stroke","currentColor"),u(e,"class",n[0])},m(l,s){z(l,e,s),m(e,t)},p(l,[s]){s&2&&u(e,"stroke-width",l[1]),s&1&&u(e,"class",l[0])},i:Se,o:Se,d(l){l&&h(e)}}}function Tc(n,e,t){let{className:l="w-4 h-4"}=e,{strokeWidth:s="2"}=e;return n.$$set=o=>{"className"in o&&t(0,l=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[l,s]}class Vc extends Je{constructor(e){super(),Ge(this,e,Tc,Cc,xe,{className:0,strokeWidth:1})}}function Mc(n){let e,t;return{c(){e=Ne("svg"),t=Ne("path"),this.h()},l(l){e=ze(l,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,class:!0});var s=w(e);t=ze(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),w(t).forEach(h),s.forEach(h),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7Zm5.01 1H5v2.01h2.01V8Zm3 0H8v2.01h2.01V8Zm3 0H11v2.01h2.01V8Zm3 0H14v2.01h2.01V8Zm3 0H17v2.01h2.01V8Zm-12 3H5v2.01h2.01V11Zm3 0H8v2.01h2.01V11Zm3 0H11v2.01h2.01V11Zm3 0H14v2.01h2.01V11Zm3 0H17v2.01h2.01V11Zm-12 3H5v2.01h2.01V14ZM8 14l-.001 2 8.011.01V14H8Zm11.01 0H17v2.01h2.01V14Z"),u(t,"clip-rule","evenodd"),u(e,"aria-hidden","true"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","currentColor"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width",n[1]),u(e,"class",n[0])},m(l,s){z(l,e,s),m(e,t)},p(l,[s]){s&2&&u(e,"stroke-width",l[1]),s&1&&u(e,"class",l[0])},i:Se,o:Se,d(l){l&&h(e)}}}function Hc(n,e,t){let{className:l="size-4"}=e,{strokeWidth:s="2"}=e;return n.$$set=o=>{"className"in o&&t(0,l=o.className),"strokeWidth"in o&&t(1,s=o.strokeWidth)},[l,s]}class Bc extends Je{constructor(e){super(),Ge(this,e,Hc,Mc,xe,{className:0,strokeWidth:1})}}function Lc(n){let e;const t=n[5].default,l=zt(t,n,n[9],null);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,o){l&&l.m(s,o),e=!0},p(s,o){l&&l.p&&(!e||o&512)&&Ot(l,t,s,s[9],e?At(t,s[9],o,null):Ut(s[9]),null)},i(s){e||(N(l,s),e=!0)},o(s){O(l,s),e=!1},d(s){l&&l.d(s)}}}function Nc(n){let e,t,l,s=n[2].t("Documentation")+"",o,r;return e=new Vc({props:{className:"size-5"}}),{c(){ee(e.$$.fragment),t=Z(),l=v("div"),o=ge(s),this.h()},l(a){te(e.$$.fragment,a),t=q(a),l=b(a,"DIV",{class:!0});var i=w(l);o=pe(i,s),i.forEach(h),this.h()},h(){u(l,"class","flex items-center")},m(a,i){le(e,a,i),z(a,t,i),z(a,l,i),m(l,o),r=!0},p(a,i){(!r||i&4)&&s!==(s=a[2].t("Documentation")+"")&&ye(o,s)},i(a){r||(N(e.$$.fragment,a),r=!0)},o(a){O(e.$$.fragment,a),r=!1},d(a){a&&(h(t),h(l)),se(e,a)}}}function zc(n){let e,t,l,s=n[2].t("Keyboard shortcuts")+"",o,r;return e=new Bc({props:{className:"size-5"}}),{c(){ee(e.$$.fragment),t=Z(),l=v("div"),o=ge(s),this.h()},l(a){te(e.$$.fragment,a),t=q(a),l=b(a,"DIV",{class:!0});var i=w(l);o=pe(i,s),i.forEach(h),this.h()},h(){u(l,"class","flex items-center")},m(a,i){le(e,a,i),z(a,t,i),z(a,l,i),m(l,o),r=!0},p(a,i){(!r||i&4)&&s!==(s=a[2].t("Keyboard shortcuts")+"")&&ye(o,s)},i(a){r||(N(e.$$.fragment,a),r=!0)},o(a){O(e.$$.fragment,a),r=!1},d(a){a&&(h(t),h(l)),se(e,a)}}}function Oc(n){let e,t,l,s;return e=new ml({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[Nc]},$$scope:{ctx:n}}}),e.$on("click",n[6]),l=new ml({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[zc]},$$scope:{ctx:n}}}),l.$on("click",n[7]),{c(){ee(e.$$.fragment),t=Z(),ee(l.$$.fragment)},l(o){te(e.$$.fragment,o),t=q(o),te(l.$$.fragment,o)},m(o,r){le(e,o,r),z(o,t,r),le(l,o,r),s=!0},p(o,r){const a={};r&516&&(a.$$scope={dirty:r,ctx:o}),e.$set(a);const i={};r&516&&(i.$$scope={dirty:r,ctx:o}),l.$set(i)},i(o){s||(N(e.$$.fragment,o),N(l.$$.fragment,o),s=!0)},o(o){O(e.$$.fragment,o),O(l.$$.fragment,o),s=!1},d(o){o&&h(t),se(e,o),se(l,o)}}}function Uc(n){let e,t,l;return t=new Xl({props:{class:"w-full max-w-[200px] rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:4,side:"top",align:"end",transition:Pl,$$slots:{default:[Oc]},$$scope:{ctx:n}}}),{c(){e=v("div"),ee(t.$$.fragment),this.h()},l(s){e=b(s,"DIV",{slot:!0});var o=w(e);te(t.$$.fragment,o),o.forEach(h),this.h()},h(){u(e,"slot","content")},m(s,o){z(s,e,o),le(t,e,null),l=!0},p(s,o){const r={};o&517&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(s){l||(N(t.$$.fragment,s),l=!0)},o(s){O(t.$$.fragment,s),l=!1},d(s){s&&h(e),se(t)}}}function Ac(n){let e,t;return e=new Yl({props:{$$slots:{content:[Uc],default:[Lc]},$$scope:{ctx:n}}}),e.$on("change",n[8]),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,s){le(e,l,s),t=!0},p(l,[s]){const o={};s&517&&(o.$$scope={dirty:s,ctx:l}),e.$set(o)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function Pc(n,e,t){let l,{$$slots:s={},$$scope:o}=e;const r=bt("i18n");me(n,r,p=>t(2,l=p));let{showDocsHandler:a}=e,{showShortcutsHandler:i}=e,{onClose:c=()=>{}}=e;const f=()=>{window.open("https://docs.openwebui.com","_blank")},d=()=>{i()},g=p=>{p.detail===!1&&c()};return n.$$set=p=>{"showDocsHandler"in p&&t(4,a=p.showDocsHandler),"showShortcutsHandler"in p&&t(0,i=p.showShortcutsHandler),"onClose"in p&&t(1,c=p.onClose),"$$scope"in p&&t(9,o=p.$$scope)},[i,c,l,r,a,s,f,d,g,o]}class jc extends Je{constructor(e){super(),Ge(this,e,Pc,Ac,xe,{showDocsHandler:4,showShortcutsHandler:0,onClose:1})}}function Rc(n){let e,t="?";return{c(){e=v("button"),e.textContent=t,this.h()},l(l){e=b(l,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(e)!=="svelte-oq3opr"&&(e.textContent=t),this.h()},h(){u(e,"class","text-gray-600 dark:text-gray-300 bg-gray-300/20 size-5 flex items-center justify-center text-[0.7rem] rounded-full")},m(l,s){z(l,e,s)},p:Se,d(l){l&&h(e)}}}function Fc(n){let e,t;return e=new qt({props:{content:n[1].t("Help"),placement:"left",$$slots:{default:[Rc]},$$scope:{ctx:n}}}),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,s){le(e,l,s),t=!0},p(l,s){const o={};s&2&&(o.content=l[1].t("Help")),s&128&&(o.$$scope={dirty:s,ctx:l}),e.$set(o)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function Wc(n){let e,t,l,s,o,r,a,i,c,f;s=new jc({props:{showDocsHandler:n[4],showShortcutsHandler:n[5],$$slots:{default:[Fc]},$$scope:{ctx:n}}});function d(p){n[6](p)}let g={};return n[0]!==void 0&&(g.show=n[0]),r=new Sc({props:g}),_e.push(()=>He(r,"show",d)),{c(){e=v("div"),t=v("button"),l=Z(),ee(s.$$.fragment),o=Z(),ee(r.$$.fragment),this.h()},l(p){e=b(p,"DIV",{class:!0});var y=w(e);t=b(y,"BUTTON",{id:!0,class:!0}),w(t).forEach(h),l=q(y),te(s.$$.fragment,y),y.forEach(h),o=q(p),te(r.$$.fragment,p),this.h()},h(){u(t,"id","show-shortcuts-button"),u(t,"class","hidden"),u(e,"class","hidden lg:flex fixed bottom-0 right-0 px-2 py-2 z-20")},m(p,y){z(p,e,y),m(e,t),m(e,l),le(s,e,null),z(p,o,y),le(r,p,y),i=!0,c||(f=fe(t,"click",n[3]),c=!0)},p(p,[y]){const S={};y&1&&(S.showDocsHandler=p[4]),y&1&&(S.showShortcutsHandler=p[5]),y&130&&(S.$$scope={dirty:y,ctx:p}),s.$set(S);const k={};!a&&y&1&&(a=!0,k.show=p[0],Me(()=>a=!1)),r.$set(k)},i(p){i||(N(s.$$.fragment,p),N(r.$$.fragment,p),i=!0)},o(p){O(s.$$.fragment,p),O(r.$$.fragment,p),i=!1},d(p){p&&(h(e),h(o)),se(s),se(r,p),c=!1,f()}}}function Zc(n,e,t){let l;const s=bt("i18n");me(n,s,f=>t(1,l=f));let o=!1;const r=()=>{t(0,o=!o)},a=()=>{t(0,o=!o)},i=()=>{t(0,o=!o)};function c(f){o=f,t(0,o)}return[o,l,s,r,a,i,c]}class Bf extends Je{constructor(e){super(),Ge(this,e,Zc,Wc,xe,{})}}export{Hf as C,Bf as H};
//# sourceMappingURL=Help.C6yLL_H6.js.map
