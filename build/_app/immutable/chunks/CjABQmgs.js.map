{"version":3,"file":"CjABQmgs.js","sources":["../../../../../../src/lib/apis/audio/index.ts"],"sourcesContent":["import { AUDIO_API_BASE_URL } from '$lib/constants';\n\nexport const getAudioConfig = async (token: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${AUDIO_API_BASE_URL}/config`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\ntype OpenAIConfigForm = {\n\turl: string;\n\tkey: string;\n\tmodel: string;\n\tspeaker: string;\n};\n\nexport const updateAudioConfig = async (token: string, payload: OpenAIConfigForm) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${AUDIO_API_BASE_URL}/config/update`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\t...payload\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const transcribeAudio = async (token: string, file: File, language?: string) => {\n\tconst data = new FormData();\n\tdata.append('file', file);\n\tif (language) {\n\t\tdata.append('language', language);\n\t}\n\n\tlet error = null;\n\tconst res = await fetch(`${AUDIO_API_BASE_URL}/transcriptions`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: data\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const synthesizeOpenAISpeech = async (\n\ttoken: string = '',\n\tspeaker: string = 'alloy',\n\ttext: string = '',\n\tmodel?: string\n) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${AUDIO_API_BASE_URL}/speech`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAuthorization: `Bearer ${token}`,\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tinput: text,\n\t\t\tvoice: speaker,\n\t\t\t...(model && { model })\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\ninterface AvailableModelsResponse {\n\tmodels: { name: string; id: string }[] | { id: string }[];\n}\n\nexport const getModels = async (token: string = ''): Promise<AvailableModelsResponse> => {\n\tlet error = null;\n\n\tconst res = await fetch(`${AUDIO_API_BASE_URL}/models`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getVoices = async (token: string = '') => {\n\tlet error = null;\n\n\tconst res = await fetch(`${AUDIO_API_BASE_URL}/voices`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n"],"names":["getAudioConfig","token","error","res","AUDIO_API_BASE_URL","err","updateAudioConfig","payload","transcribeAudio","file","language","data","synthesizeOpenAISpeech","speaker","text","model","getModels","getVoices"],"mappings":"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"}