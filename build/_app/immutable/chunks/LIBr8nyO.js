import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as Fe,y as Ce,g as De,d as L,e as Q,u as c,w as o,a as d,b as Ne,f as h,c as v,k as $,j as e,r as n,t as S,s as z,l as E,z as ze,aP as Je,aR as Ke,n as We,q as Ye,v as Ze,m as _e,i as k,aQ as me}from"./0WpKKl27.js";import{i as y}from"./Cmf4RC8y.js";import{h as ea,d as aa,r as xe,a as be,e as ta,s as sa}from"./CZ1y6KaE.js";import{p as la}from"./Bfc47y5P.js";import{i as Te}from"./C3k0oZ3o.js";import{p as Y}from"./DpN1w328.js";import{s as He,a as Oe}from"./BVrWTcfB.js";import{t as W}from"./DYdr9DjX.js";import{M as ra}from"./CcreKc1w.js";import{b as ia,d as oa,e as na,f as va,h as da,i as ca}from"./Dcv_5MKS.js";import{b as ua,d as fa,e as ga,f as _a,h as ma,i as xa}from"./gENSTQXg.js";import{S as Me}from"./BO1efK8r.js";import"./BtReZMDb.js";import"./PCOILo-8.js";import"./B9ZVCkUG.js";import{e as Ae,i as Ee}from"./u5Cnd4mY.js";import{b as he}from"./kb1CvZ3a.js";import{S as ba}from"./NOxjCBoP.js";import{M as ha}from"./nTjNX7jx.js";import{X as ka}from"./CZmZoefv.js";var wa=h('<span class=" text-gray-500">*required</span>'),pa=h('<span class="ml-2 self-center"><!></span>'),ya=h('<span class="ml-2 self-center"> </span>'),Sa=h("<option> </option>"),Va=h('<select class="w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-hidden border border-gray-100/30 dark:border-gray-850/30"></select>'),Ba=h('<div class="flex justify-between items-center"><div class="text-xs text-gray-500"> </div> <div class=" pr-2"><!></div></div>'),Ia=h('<input class="w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-hidden border border-gray-100/30 dark:border-gray-850/30" type="text" autocomplete="off" required/>'),ja=h('<div class="flex items-center space-x-2"><div class="relative size-6"><input type="color" class="size-6 rounded cursor-pointer border border-gray-200 dark:border-gray-700"/></div> <input type="text" class="flex-1 rounded-lg py-2 text-sm dark:text-gray-300 dark:bg-gray-850 outline-hidden border border-gray-100/30 dark:border-gray-850/30" autocomplete="off" disabled/></div>'),qa=h('<input type="text" class=" w-full rounded-lg py-1 text-left text-sm dark:text-gray-300 dark:bg-gray-850 outline-hidden border border-gray-100/30 dark:border-gray-850/30" autocomplete="off"/>'),Ua=h('<div class="flex flex-col items-center gap-1"><!> <!></div>'),$a=h('<textarea class="w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-hidden border border-gray-100/30 dark:border-gray-850/30" autocomplete="off" required></textarea>'),za=h('<div class="flex mt-0.5 mb-0.5 space-x-2"><div class=" flex-1"><!></div></div>'),Ma=h('<div class="text-xs text-gray-500"> </div>'),Aa=h('<div class=" py-0.5 w-full justify-between"><div class="flex w-full justify-between"><div class=" self-center text-xs font-medium"> <!></div> <button class="p-1 px-3 text-xs flex rounded-sm transition" type="button"><!></button></div> <!> <!></div>'),Ea=h('<div class="text-xs"> </div>');function Fa(ke,M){Fe(M,!1);const g=()=>Oe(ye,"$i18n",we),[we,pe]=He(),I=Ce(),ye=De("i18n");let s=Y(M,"valvesSpec",8,null),t=Y(M,"valves",28,()=>({}));Te();var w=L(),ce=Q(w);{var H=m=>{var l=L(),ee=Q(l);Ae(ee,1,()=>(c(s()),o(()=>Object.keys(s().properties))),Ee,(ae,a)=>{var x=Aa(),f=v(x),j=v(f),R=v(j),Se=$(R);{var te=r=>{var i=wa();d(r,i)};y(Se,r=>{c(s()),e(a),o(()=>{var i;return(((i=s())==null?void 0:i.required)??[]).includes(e(a))})&&r(te)})}n(j);var se=$(j,2),ue=v(se);{var fe=r=>{var i=pa(),q=v(i);{var O=_=>{var u=ze();S(b=>z(u,b),[()=>(g(),o(()=>g().t("None")))]),d(_,u)},re=_=>{var u=ze();S(b=>z(u,b),[()=>(g(),o(()=>g().t("Default")))]),d(_,u)};y(q,_=>{c(s()),e(a),o(()=>{var u;return(((u=s())==null?void 0:u.required)??[]).includes(e(a))})?_(O):_(re,!1)})}n(i),d(r,i)},le=r=>{var i=ya(),q=v(i,!0);n(i),S(O=>z(q,O),[()=>(g(),o(()=>g().t("Custom")))]),d(r,i)};y(ue,r=>{c(t()),e(a),o(()=>(t()[e(a)]??null)===null)?r(fe):r(le,!1)})}n(se),n(f);var G=$(f,2);{var Ve=r=>{var i=za(),q=v(i),O=v(q);{var re=u=>{var b=Va();S(()=>{t(),Je(()=>{e(a),s()})}),Ae(b,5,()=>(c(s()),e(a),o(()=>s().properties[e(a)].enum)),Ee,(ie,P)=>{var F=Sa(),C=v(F,!0);n(F);var V={};S(()=>{ea(F,(e(P),c(t()),e(a),o(()=>e(P)===t()[e(a)]))),z(C,e(P)),V!==(V=e(P))&&(F.value=(F.__value=e(P))??"")}),d(ie,F)}),n(b),aa(b,()=>t()[e(a)],ie=>t(t()[e(a)]=ie,!0)),E("change",b,()=>{I("change")}),d(u,b)},_=u=>{var b=L(),ie=Q(b);{var P=C=>{var V=Ba(),oe=v(V),je=v(oe,!0);n(oe);var ge=$(oe,2),D=v(ge);ba(D,{get state(){return t()[e(a)]},set state(p){t(t()[e(a)]=p,!0)},$$events:{change:()=>{I("change")}},$$legacy:!0}),n(ge),n(V),S(p=>z(je,p),[()=>(c(t()),e(a),g(),o(()=>t()[e(a)]?g().t("Enabled"):g().t("Disabled")))]),d(C,V)},F=C=>{var V=L(),oe=Q(V);{var je=D=>{var p=Ia();xe(p),S(()=>be(p,"placeholder",(c(s()),e(a),o(()=>s().properties[e(a)].title)))),he(p,()=>t()[e(a)],qe=>t(t()[e(a)]=qe,!0)),E("change",p,()=>{I("change")}),d(D,p)},ge=D=>{var p=L(),qe=Q(p);{var Pe=J=>{var U=L(),Ue=Q(U);{var Le=K=>{var A=ja(),N=v(A),ne=v(N);xe(ne),n(N);var T=$(N,2);xe(T),n(A),S(B=>{ta(ne,(c(t()),e(a),o(()=>t()[e(a)]??"#000000"))),be(T,"placeholder",B)},[()=>(g(),o(()=>g().t("Enter hex color (e.g. #FF0000)")))]),E("input",ne,B=>{t(t()[e(a)]=B.target.value.toUpperCase(),!0),I("change")}),he(T,()=>t()[e(a)],B=>t(t()[e(a)]=B,!0)),E("change",T,()=>{I("change")}),d(K,A)},Qe=K=>{var A=L(),N=Q(A);{var ne=T=>{var B=Ua(),ve=v(B);{let de=We(()=>(c(t()),e(a),o(()=>(t()[e(a)]??"").includes(",")??!1?t()[e(a)].split(","):null)));ha(ve,{get setViewLocation(){return e(de)},onClick:X=>{t(t()[e(a)]=X,!0),I("change")}})}var Re=$(ve,2);{var Ge=de=>{var X=qa();xe(X),S($e=>be(X,"placeholder",$e),[()=>(g(),o(()=>g().t("Enter coordinates (e.g. 51.505, -0.09)")))]),he(X,()=>t()[e(a)],$e=>t(t()[e(a)]=$e,!0)),E("change",X,()=>{I("change")}),d(de,X)};y(Re,de=>{c(t()),e(a),o(()=>t()[e(a)])&&de(Ge)})}n(B),d(T,B)};y(N,T=>{c(s()),e(a),o(()=>{var B,ve;return((ve=(B=s().properties[e(a)])==null?void 0:B.input)==null?void 0:ve.type)==="map"})&&T(ne)},!0)}d(K,A)};y(Ue,K=>{c(s()),e(a),o(()=>{var A,N;return((N=(A=s().properties[e(a)])==null?void 0:A.input)==null?void 0:N.type)==="color"})?K(Le):K(Qe,!1)})}d(J,U)},Xe=J=>{var U=$a();Ke(U),S(()=>be(U,"placeholder",(c(s()),e(a),o(()=>s().properties[e(a)].title)))),he(U,()=>t()[e(a)],Ue=>t(t()[e(a)]=Ue,!0)),E("change",U,()=>{I("change")}),d(J,U)};y(qe,J=>{c(s()),e(a),o(()=>{var U;return((U=s().properties[e(a)])==null?void 0:U.input)??null})?J(Pe):J(Xe,!1)},!0)}d(D,p)};y(oe,D=>{c(s()),e(a),o(()=>{var p;return(((p=s().properties[e(a)])==null?void 0:p.type)??null)!=="string"})?D(je):D(ge,!1)},!0)}d(C,V)};y(ie,C=>{c(s()),e(a),o(()=>{var V;return(((V=s().properties[e(a)])==null?void 0:V.type)??null)==="boolean"})?C(P):C(F,!1)},!0)}d(u,b)};y(O,u=>{c(s()),e(a),o(()=>{var b;return((b=s().properties[e(a)])==null?void 0:b.enum)??null})?u(re):u(_,!1)})}n(q),n(i),d(r,i)};y(G,r=>{c(t()),e(a),o(()=>(t()[e(a)]??null)!==null)&&r(Ve)})}var Be=$(G,2);{var Ie=r=>{var i=Ma(),q=v(i,!0);n(i),S(()=>z(q,(c(s()),e(a),o(()=>s().properties[e(a)].description)))),d(r,i)};y(Be,r=>{c(s()),e(a),o(()=>{var i;return(((i=s().properties[e(a)])==null?void 0:i.description)??null)!==null})&&r(Ie)})}n(x),S(()=>z(R,`${c(s()),e(a),o(()=>s().properties[e(a)].title)??""} `)),E("click",se,()=>{const r=s().properties[e(a)]??{};if((t()[e(a)]??null)===null)if(((r==null?void 0:r.type)??null)==="array"){const i=(r==null?void 0:r.default)??[];t(t()[e(a)]=Array.isArray(i)?i.join(", "):"",!0)}else t(t()[e(a)]=(r==null?void 0:r.default)??"",!0);else t(t()[e(a)]=null,!0);I("change")}),d(ae,x)}),d(m,l)},Z=m=>{var l=Ea(),ee=v(l,!0);n(l),S(ae=>z(ee,ae),[()=>(g(),o(()=>g().t("No valves")))]),d(m,l)};y(ce,m=>{c(s()),o(()=>{var l;return s()&&Object.keys(((l=s())==null?void 0:l.properties)??{}).length})?m(H):m(Z,!1)})}d(ke,w),Ne(),pe()}var Ca=h('<div class="ml-2 self-center"><!></div>'),Da=h('<div><div class=" flex justify-between dark:text-gray-300 px-5 pt-4 pb-2"><div class=" text-lg font-medium self-center"> </div> <button class="self-center"><!></button></div> <div class="flex flex-col md:flex-row w-full px-5 pb-4 md:space-x-4 dark:text-gray-200"><div class=" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"><form class="flex flex-col w-full"><div class="px-1"><!></div> <div class="flex justify-end pt-3 text-sm font-medium"><button type="submit"> <!></button></div></form></div></div></div>');function ot(ke,M){Fe(M,!1);const g=()=>Oe(I,"$i18n",we),[we,pe]=He(),I=De("i18n"),ye=Ce();let s=Y(M,"show",12,!1),t=Y(M,"type",8,"tool"),w=Y(M,"id",8,null),ce=Y(M,"userValves",8,!1),H=_e(!1),Z=_e(!1),m=_e(null),l=_e({});const ee=async()=>{var a;if(k(H,!0),e(m)){for(const f in e(m).properties)((a=e(m).properties[f])==null?void 0:a.type)==="array"&&(typeof e(l)[f]=="string"?me(l,e(l)[f]=(e(l)[f]??"").split(",").map(j=>j.trim()).filter(j=>j.length>0)):e(l)[f]==null&&me(l,e(l)[f]=null));let x=null;ce()?t()==="tool"?x=await ua(localStorage.token,w(),e(l)).catch(f=>{W.error(`${f}`)}):t()==="function"&&(x=await ia(localStorage.token,w(),e(l)).catch(f=>{W.error(`${f}`)})):t()==="tool"?x=await fa(localStorage.token,w(),e(l)).catch(f=>{W.error(`${f}`)}):t()==="function"&&(x=await oa(localStorage.token,w(),e(l)).catch(f=>{W.error(`${f}`)})),x&&(W.success(g().t("Valves updated successfully")),ye("save"))}k(H,!1)},ae=async()=>{var a;k(Z,!0),k(l,{}),k(m,null);try{if(ce()?t()==="tool"?(k(l,await ga(localStorage.token,w())),k(m,await _a(localStorage.token,w()))):t()==="function"&&(k(l,await na(localStorage.token,w())),k(m,await va(localStorage.token,w()))):t()==="tool"?(k(l,await ma(localStorage.token,w())),k(m,await xa(localStorage.token,w()))):t()==="function"&&(k(l,await da(localStorage.token,w())),k(m,await ca(localStorage.token,w()))),e(l)||k(l,{}),e(m))for(const x in e(m).properties)((a=e(m).properties[x])==null?void 0:a.type)==="array"&&(e(l)[x]!=null?me(l,e(l)[x]=(Array.isArray(e(l)[x])?e(l)[x]:[]).join(",")):me(l,e(l)[x]=null));k(Z,!1)}catch{W.error("Error fetching valves"),s(!1)}};Ye(()=>c(s()),()=>{s()&&ae()}),Ze(),Te(),ra(ke,{size:"sm",get show(){return s()},set show(a){s(a)},children:(a,x)=>{var f=Da(),j=v(f),R=v(j),Se=v(R,!0);n(R);var te=$(R,2),se=v(te);ka(se,{className:"size-5"}),n(te),n(j);var ue=$(j,2),fe=v(ue),le=v(fe),G=v(le),Ve=v(G);{var Be=_=>{Fa(_,{get valvesSpec(){return e(m)},get valves(){return e(l)},set valves(u){k(l,u)},$$legacy:!0})},Ie=_=>{Me(_,{className:"size-5"})};y(Ve,_=>{e(Z)?_(Ie,!1):_(Be)})}n(G);var r=$(G,2),i=v(r),q=v(i),O=$(q);{var re=_=>{var u=Ca(),b=v(u);Me(b,{}),n(u),d(_,u)};y(O,_=>{e(H)&&_(re)})}n(i),n(r),n(le),n(fe),n(ue),n(f),S((_,u)=>{z(Se,_),sa(i,1,`px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full ${e(H)?" cursor-not-allowed":""}`),i.disabled=e(H),z(q,`${u??""} `)},[()=>(g(),o(()=>g().t("Valves"))),()=>(g(),o(()=>g().t("Save")))]),E("click",te,()=>{s(!1)}),E("submit",le,la(()=>{ee()})),d(a,f)},$$slots:{default:!0},$$legacy:!0}),Ne(),pe()}export{ot as V,Fa as a};
//# sourceMappingURL=LIBr8nyO.js.map
