{"version":3,"file":"CcreKc1w.js","sources":["../../../../../../src/lib/components/common/Modal.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { onDestroy, onMount } from 'svelte';\n\timport { fade } from 'svelte/transition';\n\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport * as FocusTrap from 'focus-trap';\n\texport let show = true;\n\texport let size = 'md';\n\texport let containerClassName = 'p-3';\n\texport let className = 'bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm rounded-4xl';\n\n\tlet modalElement = null;\n\tlet mounted = false;\n\t// Create focus trap to trap user tabs inside modal\n\t// https://www.w3.org/WAI/WCAG21/Understanding/focus-order.html\n\t// https://www.w3.org/WAI/WCAG21/Understanding/keyboard.html\n\tlet focusTrap: FocusTrap.FocusTrap | null = null;\n\n\tconst sizeToWidth = (size) => {\n\t\tif (size === 'full') {\n\t\t\treturn 'w-full';\n\t\t}\n\t\tif (size === 'xs') {\n\t\t\treturn 'w-[16rem]';\n\t\t} else if (size === 'sm') {\n\t\t\treturn 'w-[30rem]';\n\t\t} else if (size === 'md') {\n\t\t\treturn 'w-[42rem]';\n\t\t} else if (size === 'lg') {\n\t\t\treturn 'w-[56rem]';\n\t\t} else if (size === 'xl') {\n\t\t\treturn 'w-[70rem]';\n\t\t} else if (size === '2xl') {\n\t\t\treturn 'w-[84rem]';\n\t\t} else if (size === '3xl') {\n\t\t\treturn 'w-[100rem]';\n\t\t} else {\n\t\t\treturn 'w-[56rem]';\n\t\t}\n\t};\n\n\tconst handleKeyDown = (event: KeyboardEvent) => {\n\t\tif (event.key === 'Escape' && isTopModal()) {\n\t\t\tconsole.log('Escape');\n\t\t\tshow = false;\n\t\t}\n\t};\n\n\tconst isTopModal = () => {\n\t\tconst modals = document.getElementsByClassName('modal');\n\t\treturn modals.length && modals[modals.length - 1] === modalElement;\n\t};\n\n\tonMount(() => {\n\t\tmounted = true;\n\t});\n\n\t$: if (show && modalElement) {\n\t\tdocument.body.appendChild(modalElement);\n\t\tfocusTrap = FocusTrap.createFocusTrap(modalElement, {\n\t\t\tallowOutsideClick: (e) => {\n\t\t\t\treturn (\n\t\t\t\t\te.target.closest('[data-sonner-toast]') !== null ||\n\t\t\t\t\te.target.closest('.modal-content') === null\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\tfocusTrap.activate();\n\t\twindow.addEventListener('keydown', handleKeyDown);\n\t\tdocument.body.style.overflow = 'hidden';\n\t} else if (modalElement) {\n\t\tfocusTrap.deactivate();\n\t\twindow.removeEventListener('keydown', handleKeyDown);\n\t\tdocument.body.removeChild(modalElement);\n\t\tdocument.body.style.overflow = 'unset';\n\t}\n\n\tonDestroy(() => {\n\t\tshow = false;\n\t\tif (focusTrap) {\n\t\t\tfocusTrap.deactivate();\n\t\t}\n\t\tif (modalElement) {\n\t\t\tdocument.body.removeChild(modalElement);\n\t\t}\n\t});\n</script>\n\n{#if show}\n\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t<!-- svelte-ignore a11y-no-noninteractive-element-interactions -->\n\t<div\n\t\tbind:this={modalElement}\n\t\taria-modal=\"true\"\n\t\trole=\"dialog\"\n\t\tclass=\"modal fixed top-0 right-0 left-0 bottom-0 bg-black/30 dark:bg-black/60 w-full h-screen max-h-[100dvh] {containerClassName}  flex justify-center z-9999 overflow-y-auto overscroll-contain\"\n\t\tstyle=\"scrollbar-gutter: stable;\"\n\t\tin:fade={{ duration: 10 }}\n\t\ton:mousedown={() => {\n\t\t\tshow = false;\n\t\t}}\n\t>\n\t\t<div\n\t\t\tclass=\"m-auto max-w-full {sizeToWidth(size)} {size !== 'full'\n\t\t\t\t? 'mx-2'\n\t\t\t\t: ''} shadow-3xl min-h-fit scrollbar-hidden {className} border border-white dark:border-gray-850\"\n\t\t\tin:flyAndScale\n\t\t\ton:mousedown={(e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t}}\n\t\t>\n\t\t\t<slot />\n\t\t</div>\n\t</div>\n{/if}\n\n<style>\n\t.modal-content {\n\t\tanimation: scaleUp 0.1s ease-out forwards;\n\t}\n\n\t@keyframes scaleUp {\n\t\tfrom {\n\t\t\ttransform: scale(0.985);\n\t\t\topacity: 0;\n\t\t}\n\t\tto {\n\t\t\ttransform: scale(1);\n\t\t\topacity: 1;\n\t\t}\n\t}\n</style>\n"],"names":["show","size","containerClassName","className","modalElement","focusTrap","sizeToWidth","handleKeyDown","event","isTopModal","modals","$.get","onMount","onDestroy","$.set","FocusTrap.createFocusTrap","div","root_1","div_1","$.child","node_1","$.reset","$$value","$.set_class","$0","$.untrack","$.transition","flyAndScale","$.event","e","fade","$.append","$$anchor","$$render","consequent"],"mappings":"0pBAAA,SAMY,IAAAA,gBAAO,EAAI,EACXC,eAAO,IAAI,EACXC,6BAAqB,KAAK,EAC1BC,oBAAY,8DAA8D,EAEjFC,IAAe,IAAI,EAKnBC,IAAwC,IAAI,QAE1CC,EAAeL,GAChBA,IAAS,OACL,SAEJA,IAAS,KACL,YACGA,IAAS,KACZ,YACGA,IAAS,KACZ,YACGA,IAAS,KACZ,YACGA,IAAS,KACZ,YACGA,IAAS,MACZ,YACGA,IAAS,MACZ,aAEA,YAIHM,EAAiBC,GAAyB,CAC3CA,EAAM,MAAQ,UAAYC,EAAU,GAEvCT,EAAO,EAAK,CAEd,EAEMS,EAAU,IAAS,CAClB,MAAAC,EAAS,SAAS,uBAAuB,OAAO,SAC/CA,EAAO,QAAUA,EAAOA,EAAO,OAAS,CAAC,IAAAC,EAAMP,CAAY,CACnE,EAEAQ,EAAO,IAAO,CAEd,CAAC,EAsBDC,EAAS,IAAO,CACfb,EAAO,EAAK,EACRW,EAAAN,CAAS,GACZM,EAAAN,CAAS,EAAC,WAAU,EAEjBM,EAAAP,CAAY,GACf,SAAS,KAAK,cAAYA,CAAY,CAAA,CAExC,CAAC,kCA5BMJ,EAAI,GAAAW,EAAIP,CAAY,GAC1B,SAAS,KAAK,cAAYA,CAAY,CAAA,EACtCU,EAAAT,EAAYU,IAA0BX,CAAY,EAAA,CACjD,kBAAoB,GAElB,EAAE,OAAO,QAAQ,qBAAqB,IAAM,MAC5C,EAAE,OAAO,QAAQ,gBAAgB,IAAM,QAI1CO,EAAAN,CAAS,EAAC,SAAQ,EAClB,OAAO,iBAAiB,UAAWE,CAAa,EAChD,SAAS,KAAK,MAAM,SAAW,UAC/BI,EAAUP,CAAY,IACtBO,EAAAN,CAAS,EAAC,WAAU,EACpB,OAAO,oBAAoB,UAAWE,CAAa,EACnD,SAAS,KAAK,cAAYH,CAAY,CAAA,EACtC,SAAS,KAAK,MAAM,SAAW,+CAkB/B,IAAAY,EAAAC,EAAA,EAWCC,EAAAC,EAXDH,CAAA,EAWCI,EAAAD,EAAAD,CAAA,2BAAAG,EAAAH,CAAA,EAXDG,EAAAL,CAAA,IAAAA,EAAAM,GAAAR,EACWV,WAAAA,CAAY,CAAA,QADvBmB,EAAAP,EAAA,EAAA,yGAI8Gd,EAAkB,GAAA,EAAA,kEAAA,gBAAA,IAO/HgB,EAAA,EAAA,qBAAAM,GAAA,EAAA,IAC8CvB,EAAI,IAAK,OACpD,OACA,EAAE,0CAAyCE,EAAS,GAAA,EAAA,4CAAA,gBAAA,WAnG9CF,EAAI,CAAA,EAiGawB,EAAA,IAAAnB,EAAYL,GAAI,CAAA,KAD1CyB,EAAA,EAAAR,EAAA,IAAAS,CAAA,EAAAC,EAAA,YAAAV,EAKeW,GAAM,CACpBA,EAAE,gBAAe,CAClB,CAAC,MAlBFb,EAAA,IAAAc,EAAA,KAAA,CAMW,SAAU,EAAE,EAAA,gBANvBd,EAAA,IAOoB,CACnBhB,EAAO,EAAK,CACb,CAAC,EATD+B,EAAAC,EAAAhB,CAAA,WAJGhB,EAAI,GAAAiC,EAAAC,CAAA,cAFD"}