import{a as c}from"./DLhnqOlE.js";import{o as y}from"./cX8aofVu.js";import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{B as j,t as g,a as k}from"./0WpKKl27.js";import{a as $,s as B,c as S}from"./CZ1y6KaE.js";import{p as d}from"./DpN1w328.js";const _=async(o,a,r,t)=>{const e=new FormData;e.append("file",a),r&&e.append("metadata",JSON.stringify(r));const n=new URLSearchParams;t!=null&&n.append("process",String(t));let p=null;const s=await fetch(`${c}/files/?${n.toString()}`,{method:"POST",headers:{Accept:"application/json",authorization:`Bearer ${o}`},body:e}).then(async i=>{if(!i.ok)throw await i.json();return i.json()}).catch(i=>(p=i.detail||i.message,null));if(p)throw p;if(s){const i=await C(o,s.id);if(i&&i.ok){const f=i.body.pipeThrough(new TextDecoderStream).pipeThrough(y(`
`)).getReader();for(;;){const{value:w,done:m}=await f.read();if(m)break;try{let u=w.split(`
`);for(const h of u)if(h!==""&&h!=="data: [DONE]"){let l=JSON.parse(h.replace(/^data: /,""));l!=null&&l.error&&(l.error,s.error=l.error),s!=null&&s.data&&(s.data=l)}}catch{}}}}if(p)throw p;return s},C=async(o,a)=>{const r=new URLSearchParams;r.append("stream","true");let t=null;const e=await fetch(`${c}/files/${a}/process/status?${r}`,{method:"GET",headers:{Accept:"application/json",authorization:`Bearer ${o}`}}).catch(n=>(t=n.detail,null));if(t)throw t;return e},b=async(o,a)=>{let r=null;const t=await fetch(`${c}/files/${a}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${o}`}}).then(async e=>{if(!e.ok)throw await e.json();return e.json()}).then(e=>e).catch(e=>(r=e.detail,null));if(r)throw r;return t},z=async(o,a,r)=>{let t=null;const e=await fetch(`${c}/files/${a}/data/content/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${o}`},body:JSON.stringify({content:r})}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).then(n=>n).catch(n=>(t=n.detail,null));if(t)throw t;return e},N=async o=>{let a=null;const r=await fetch(`${c}/files/${o}/content`,{method:"GET",headers:{Accept:"application/json"},credentials:"include"}).then(async t=>{if(!t.ok)throw await t.json();return await t.arrayBuffer()}).catch(t=>(a=t.detail,null));if(a)throw a;return r},O=async o=>{let a=null;const r=await fetch(`${c}/files/all`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${o}`}}).then(async t=>{if(!t.ok)throw await t.json();return t.json()}).then(t=>t).catch(t=>(a=t.detail,null));if(a)throw a;return r};var T=j('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M4 21.4V2.6C4 2.26863 4.26863 2 4.6 2H16.2515C16.4106 2 16.5632 2.06321 16.6757 2.17574L19.8243 5.32426C19.9368 5.43679 20 5.5894 20 5.74853V21.4C20 21.7314 19.7314 22 19.4 22H4.6C4.26863 22 4 21.7314 4 21.4Z" stroke-linecap="round" stroke-linejoin="round"></path><path d="M8 10L16 10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M8 18L16 18" stroke-linecap="round" stroke-linejoin="round"></path><path d="M8 14L12 14" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16 2V5.4C16 5.73137 16.2686 6 16.6 6H20" stroke-linecap="round" stroke-linejoin="round"></path></svg>');function x(o,a){let r=d(a,"className",8,"size-4"),t=d(a,"strokeWidth",8,"1.5");var e=T();g(()=>{$(e,"stroke-width",t()),B(e,0,S(r()))}),k(o,e)}export{x as D,N as a,z as b,O as d,b as g,_ as u};
//# sourceMappingURL=CYBNiUQ7.js.map
