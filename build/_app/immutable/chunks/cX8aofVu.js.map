{"version":3,"mappings":"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","names":["getRandomValues","rnds8","rng","byteToHex","i","unsafeStringify","arr","offset","randomUUID","native","v4","options","buf","rnds","ERROR","WINDOW","root","WEB_WORKER","NODE_JS","global","COMMON_JS","module","ARRAY_BUFFER","HEX_CHARS","EXTRA","SHIFT","K","OUTPUT_TYPES","blocks","obj","createOutputMethod","outputType","is224","message","Sha256","createMethod","method","nodeWrap","type","crypto","require$$0","Buffer","require$$1","algorithm","bufferFrom","nodeMethod","createHmacOutputMethod","key","HmacSha256","createHmacMethod","sharedMemory","notString","code","index","length","a","b","c","e","g","h","j","s0","s1","maj","t1","t2","ch","ab","da","cd","bc","h0","h1","h2","h3","h4","h5","h6","h7","hex","buffer","dataView","bytes","oKeyPad","iKeyPad","innerHash","exports","o","this","t","n","r","TTS_RESPONSE_SPLIT","pdfWorkerUrl","_getDefaults","_defaults","changeDefaults","newDefaults","escapeTest","escapeReplace","escapeTestNoEncode","escapeReplaceNoEncode","escapeReplacements","getEscapeReplacement","escape","html","encode","unescapeTest","unescape","_","caret","edit","regex","opt","name","val","cleanUrl","href","noopTest","splitCells","tableRow","count","row","match","str","escaped","curr","cells","rtrim","invert","l","suffLen","findClosingBracket","level","outputLink","cap","link","raw","lexer","title","text","token","indentCodeCompensation","matchIndentToCode","indentToCode","node","matchIndentInNode","indentInNode","_Tokenizer","__publicField","src","trimmed","top","tokens","bull","isordered","list","itemRegex","itemContents","endsWithBlankLine","endEarly","line","nextLine","indent","blankLine","nextBulletRegex","hrRegex","fencesBeginRegex","headingBeginRegex","rawLine","istask","ischecked","spacers","hasMultipleLineBreaks","tag","item","k","align","trimmedUrl","rtrimSlash","lastParenIndex","linkLen","links","maskedSrc","prevChar","lLength","rDelim","rLength","delimTotal","midDelimTotal","endReg","lastCharLength","hasNonSpaceChars","hasSpaceCharsOnBothEnds","prevCapZero","block","inline","_Lexer","rules","next","leading","tabs","lastToken","cutSrc","lastParagraphClipped","extTokenizer","startIndex","tempSrc","tempStart","getStartIndex","errMsg","keepPrevChar","_Renderer","infostring","lang","_a","quote","body","ordered","start","startatt","task","checked","header","content","flags","cleanHref","out","_TextRenderer","_Parser","genericToken","ret","headingToken","codeToken","tableToken","cell","blockquoteToken","listToken","loose","itemBody","checkbox","htmlToken","paragraphToken","textToken","renderer","escapeToken","tagToken","linkToken","imageToken","strongToken","emToken","codespanToken","delToken","_Hooks","markdown","Marked","args","__privateAdd","_Marked_instances","__privateMethod","parseMarkdown_fn","callback","values","_b","childTokens","extensions","pack","opts","ext","prevRenderer","extLevel","prop","rendererFunc","rendererKey","tokenizer","tokenizerFunc","tokenizerKey","prevTokenizer","hooks","hooksFunc","hooksKey","prevHook","arg","walkTokens","packWalktokens","parser","origOpt","throwError","onError_fn","silent","async","msg","markedInstance","marked","findMatchingClosingTag","openTag","closeTag","depth","parseAttributes","attributes","attrRegex","detailsTokenizer","detailsRegex","summaryRegex","detailsMatch","endIndex","fullMatch","detailsTag","summary","summaryMatch","detailsStart","detailsRenderer","value","detailsExtension","markedExtension","DELIMITER_LIST","ALLOWED_SURROUNDING_CHARS","inlinePatterns","blockPatterns","escapeRegex","string","generateRegexRules","delimiters","delimiter","left","right","display","escapedLeft","escapedRight","inlineRule","blockRule","markedKatexExtension","inlineKatex","blockKatex","katexStart","displayMode","ruleReg","indexSrc","startDelimiter","endDelimiter","katexTokenizer","dayjs","relativeTime","isToday","isYesterday","localizedFormat","escapeRegExp","replaceTokens","char","user","fileId","WEBUI_BASE_URL","replacementFn","segment","replacement","sanitizeResponseContent","processResponseContent","processChineseContent","isChineseChar","processChineseDelimiters","symbol","leftSymbol","rightSymbol","escapedSymbol","unescapeHtml","capitalizeFirstLetter","splitStream","splitOn","chunk","controller","parts","part","convertMessagesToHistory","messages","history","parentMessageId","messageId","uuidv4","canvasPixelTest","canvas","ctx","imageData","pixelValues","p","compressImage","imageUrl","maxWidth","maxHeight","resolve","reject","img","width","height","mimeType","compressedUrl","error","generateInitialsImage","sanitizedName","initials","formatDate","inputDate","date","copyToClipboard","formatted","styledHtml","blob","data","result","textArea","compareVersion","latest","current","extractCurlyBraceWords","matches","getImportOrigin","_chats","getUserPosition","position","latitude","longitude","convertOpenAIMessages","convo","mapping","currentId","lastId","message_id","new_chat","_c","_f","_e","_d","_h","_g","validateChat","chat","convertOpenAIChats","chats","isValidHttpUrl","url","isYoutubeUrl","removeEmojis","emojiRegex","removeFormattings","cleanText","removeDetails","types","removeAllDetails","processDetails","attributesRegex","attributeMatch","codeBlockRegex","extractSentences","codeBlocks","placeholder","sentences","sentence","idx","extractParagraphsForAudio","paragraphs","paragraph","extractSentencesForAudio","mergedTexts","currentText","lastIndex","previousText","wordCount","charCount","getMessageContentParts","messageContentParts","blobToFile","fileName","getPromptVariables","user_name","user_location","getCurrentDateTime","getFormattedDate","getFormattedTime","getWeekday","getUserTimezone","getTimeRange","timestamp","now","diffDays","nowDate","nowMonth","nowYear","dateDate","dateMonth","dateYear","extractFrontmatter","frontmatter","frontmatterStarted","frontmatterEnded","frontmatterPattern","lines","bestMatchingLanguage","supportedLanguages","preferredLanguages","defaultLocale","languages","prefLang","year","month","day","createMessagesList","formatFileSize","size","units","unitIndex","getLineCount","resolveSchema","schemaRef","components","resolvedSchemas","schemaName","referencedSchema","schemaObj","propName","propSchema","convertOpenApiToToolPayload","openApiSpec","toolPayload","path","methods","operation","tool","param","description","requestSchema","resolvedRequestSchema","slugify","extractInputVariables","regularRegex","variables","varName","definition","parseVariableDefinition","splitProperties","inString","escapeNext","firstPart","propertyParts","properties","props","equalsParts","flagName","propertyName","valueParts","propertyValueRaw","parseJsonValue","ensurePDFjsLoaded","pdfjs","__vitePreload","extractContentFromFile","file","textExtensions","getExtension","filename","dot","extractPdfText","pdfjsLib","arrayBuffer","pdf","allText","pageNum","strings","readAsText","reader","extractDocxText","mammoth","getAge","birthDate","today","bDate","age","m","convertHeicToJpeg","heic2any","err","decodeString","initMermaid","mermaid","renderMermaidDiagram","svg","renderVegaVisualization","spec","i18n","vega","parsedSpec","vegaSpec","getCodeBlockContents","codeBlockContents","htmlContent","cssContent","jsContent","inlineHtml","inlineCss","inlineJs"],"ignoreList":[0,1,2,3,5,6,7,8,10,11],"sources":["../../../../../../node_modules/uuid/dist/esm-browser/rng.js","../../../../../../node_modules/uuid/dist/esm-browser/stringify.js","../../../../../../node_modules/uuid/dist/esm-browser/native.js","../../../../../../node_modules/uuid/dist/esm-browser/v4.js","../../../../../../__vite-browser-external","../../../../../../node_modules/js-sha256/src/sha256.js","../../../../../../node_modules/dayjs/plugin/isToday.js","../../../../../../node_modules/dayjs/plugin/isYesterday.js","../../../../../../node_modules/dayjs/plugin/localizedFormat.js","../../../../../../src/lib/types/index.ts","../../../../../../node_modules/pdfjs-dist/build/pdf.worker.mjs?url","../../../../../../node_modules/marked/lib/marked.esm.js","../../../../../../src/lib/utils/marked/extension.ts","../../../../../../src/lib/utils/marked/katex-extension.ts","../../../../../../src/lib/utils/index.ts"],"sourcesContent":["// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","export default {}","/**\n * [js-sha256]{@link https://github.com/emn178/js-sha256}\n *\n * @version 0.10.1\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2023\n * @license MIT\n */\n/*jslint bitwise: true */\n(function () {\n  'use strict';\n\n  var ERROR = 'input is invalid type';\n  var WINDOW = typeof window === 'object';\n  var root = WINDOW ? window : {};\n  if (root.JS_SHA256_NO_WINDOW) {\n    WINDOW = false;\n  }\n  var WEB_WORKER = !WINDOW && typeof self === 'object';\n  var NODE_JS = !root.JS_SHA256_NO_NODE_JS && typeof process === 'object' && process.versions && process.versions.node;\n  if (NODE_JS) {\n    root = global;\n  } else if (WEB_WORKER) {\n    root = self;\n  }\n  var COMMON_JS = !root.JS_SHA256_NO_COMMON_JS && typeof module === 'object' && module.exports;\n  var AMD = typeof define === 'function' && define.amd;\n  var ARRAY_BUFFER = !root.JS_SHA256_NO_ARRAY_BUFFER && typeof ArrayBuffer !== 'undefined';\n  var HEX_CHARS = '0123456789abcdef'.split('');\n  var EXTRA = [-2147483648, 8388608, 32768, 128];\n  var SHIFT = [24, 16, 8, 0];\n  var K = [\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n  ];\n  var OUTPUT_TYPES = ['hex', 'array', 'digest', 'arrayBuffer'];\n\n  var blocks = [];\n\n  if (root.JS_SHA256_NO_NODE_JS || !Array.isArray) {\n    Array.isArray = function (obj) {\n      return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n  }\n\n  if (ARRAY_BUFFER && (root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW || !ArrayBuffer.isView)) {\n    ArrayBuffer.isView = function (obj) {\n      return typeof obj === 'object' && obj.buffer && obj.buffer.constructor === ArrayBuffer;\n    };\n  }\n\n  var createOutputMethod = function (outputType, is224) {\n    return function (message) {\n      return new Sha256(is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createMethod = function (is224) {\n    var method = createOutputMethod('hex', is224);\n    if (NODE_JS) {\n      method = nodeWrap(method, is224);\n    }\n    method.create = function () {\n      return new Sha256(is224);\n    };\n    method.update = function (message) {\n      return method.create().update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  var nodeWrap = function (method, is224) {\n    var crypto = require('crypto')\n    var Buffer = require('buffer').Buffer;\n    var algorithm = is224 ? 'sha224' : 'sha256';\n    var bufferFrom;\n    if (Buffer.from && !root.JS_SHA256_NO_BUFFER_FROM) {\n      bufferFrom = Buffer.from;\n    } else {\n      bufferFrom = function (message) {\n        return new Buffer(message);\n      };\n    }\n    var nodeMethod = function (message) {\n      if (typeof message === 'string') {\n        return crypto.createHash(algorithm).update(message, 'utf8').digest('hex');\n      } else {\n        if (message === null || message === undefined) {\n          throw new Error(ERROR);\n        } else if (message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        }\n      }\n      if (Array.isArray(message) || ArrayBuffer.isView(message) ||\n        message.constructor === Buffer) {\n        return crypto.createHash(algorithm).update(bufferFrom(message)).digest('hex');\n      } else {\n        return method(message);\n      }\n    };\n    return nodeMethod;\n  };\n\n  var createHmacOutputMethod = function (outputType, is224) {\n    return function (key, message) {\n      return new HmacSha256(key, is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createHmacMethod = function (is224) {\n    var method = createHmacOutputMethod('hex', is224);\n    method.create = function (key) {\n      return new HmacSha256(key, is224);\n    };\n    method.update = function (key, message) {\n      return method.create(key).update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createHmacOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  function Sha256(is224, sharedMemory) {\n    if (sharedMemory) {\n      blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      this.blocks = blocks;\n    } else {\n      this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    }\n\n    if (is224) {\n      this.h0 = 0xc1059ed8;\n      this.h1 = 0x367cd507;\n      this.h2 = 0x3070dd17;\n      this.h3 = 0xf70e5939;\n      this.h4 = 0xffc00b31;\n      this.h5 = 0x68581511;\n      this.h6 = 0x64f98fa7;\n      this.h7 = 0xbefa4fa4;\n    } else { // 256\n      this.h0 = 0x6a09e667;\n      this.h1 = 0xbb67ae85;\n      this.h2 = 0x3c6ef372;\n      this.h3 = 0xa54ff53a;\n      this.h4 = 0x510e527f;\n      this.h5 = 0x9b05688c;\n      this.h6 = 0x1f83d9ab;\n      this.h7 = 0x5be0cd19;\n    }\n\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n    this.is224 = is224;\n  }\n\n  Sha256.prototype.update = function (message) {\n    if (this.finalized) {\n      return;\n    }\n    var notString, type = typeof message;\n    if (type !== 'string') {\n      if (type === 'object') {\n        if (message === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        } else if (!Array.isArray(message)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(message)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n      notString = true;\n    }\n    var code, index = 0, i, length = message.length, blocks = this.blocks;\n\n    while (index < length) {\n      if (this.hashed) {\n        this.hashed = false;\n        blocks[0] = this.block;\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n          blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n          blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n          blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      }\n\n      if (notString) {\n        for (i = this.start; index < length && i < 64; ++index) {\n          blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n        }\n      } else {\n        for (i = this.start; index < length && i < 64; ++index) {\n          code = message.charCodeAt(index);\n          if (code < 0x80) {\n            blocks[i >> 2] |= code << SHIFT[i++ & 3];\n          } else if (code < 0x800) {\n            blocks[i >> 2] |= (0xc0 | (code >> 6)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else if (code < 0xd800 || code >= 0xe000) {\n            blocks[i >> 2] |= (0xe0 | (code >> 12)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else {\n            code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n            blocks[i >> 2] |= (0xf0 | (code >> 18)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 12) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          }\n        }\n      }\n\n      this.lastByteIndex = i;\n      this.bytes += i - this.start;\n      if (i >= 64) {\n        this.block = blocks[16];\n        this.start = i - 64;\n        this.hash();\n        this.hashed = true;\n      } else {\n        this.start = i;\n      }\n    }\n    if (this.bytes > 4294967295) {\n      this.hBytes += this.bytes / 4294967296 << 0;\n      this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n  };\n\n  Sha256.prototype.finalize = function () {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n      if (!this.hashed) {\n        this.hash();\n      }\n      blocks[0] = this.block;\n      blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[15] = this.bytes << 3;\n    this.hash();\n  };\n\n  Sha256.prototype.hash = function () {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4, f = this.h5, g = this.h6,\n      h = this.h7, blocks = this.blocks, j, s0, s1, maj, t1, t2, ch, ab, da, cd, bc;\n\n    for (j = 16; j < 64; ++j) {\n      // rightrotate\n      t1 = blocks[j - 15];\n      s0 = ((t1 >>> 7) | (t1 << 25)) ^ ((t1 >>> 18) | (t1 << 14)) ^ (t1 >>> 3);\n      t1 = blocks[j - 2];\n      s1 = ((t1 >>> 17) | (t1 << 15)) ^ ((t1 >>> 19) | (t1 << 13)) ^ (t1 >>> 10);\n      blocks[j] = blocks[j - 16] + s0 + blocks[j - 7] + s1 << 0;\n    }\n\n    bc = b & c;\n    for (j = 0; j < 64; j += 4) {\n      if (this.first) {\n        if (this.is224) {\n          ab = 300032;\n          t1 = blocks[0] - 1413257819;\n          h = t1 - 150054599 << 0;\n          d = t1 + 24177077 << 0;\n        } else {\n          ab = 704751109;\n          t1 = blocks[0] - 210244248;\n          h = t1 - 1521486534 << 0;\n          d = t1 + 143694565 << 0;\n        }\n        this.first = false;\n      } else {\n        s0 = ((a >>> 2) | (a << 30)) ^ ((a >>> 13) | (a << 19)) ^ ((a >>> 22) | (a << 10));\n        s1 = ((e >>> 6) | (e << 26)) ^ ((e >>> 11) | (e << 21)) ^ ((e >>> 25) | (e << 7));\n        ab = a & b;\n        maj = ab ^ (a & c) ^ bc;\n        ch = (e & f) ^ (~e & g);\n        t1 = h + s1 + ch + K[j] + blocks[j];\n        t2 = s0 + maj;\n        h = d + t1 << 0;\n        d = t1 + t2 << 0;\n      }\n      s0 = ((d >>> 2) | (d << 30)) ^ ((d >>> 13) | (d << 19)) ^ ((d >>> 22) | (d << 10));\n      s1 = ((h >>> 6) | (h << 26)) ^ ((h >>> 11) | (h << 21)) ^ ((h >>> 25) | (h << 7));\n      da = d & a;\n      maj = da ^ (d & b) ^ ab;\n      ch = (h & e) ^ (~h & f);\n      t1 = g + s1 + ch + K[j + 1] + blocks[j + 1];\n      t2 = s0 + maj;\n      g = c + t1 << 0;\n      c = t1 + t2 << 0;\n      s0 = ((c >>> 2) | (c << 30)) ^ ((c >>> 13) | (c << 19)) ^ ((c >>> 22) | (c << 10));\n      s1 = ((g >>> 6) | (g << 26)) ^ ((g >>> 11) | (g << 21)) ^ ((g >>> 25) | (g << 7));\n      cd = c & d;\n      maj = cd ^ (c & a) ^ da;\n      ch = (g & h) ^ (~g & e);\n      t1 = f + s1 + ch + K[j + 2] + blocks[j + 2];\n      t2 = s0 + maj;\n      f = b + t1 << 0;\n      b = t1 + t2 << 0;\n      s0 = ((b >>> 2) | (b << 30)) ^ ((b >>> 13) | (b << 19)) ^ ((b >>> 22) | (b << 10));\n      s1 = ((f >>> 6) | (f << 26)) ^ ((f >>> 11) | (f << 21)) ^ ((f >>> 25) | (f << 7));\n      bc = b & c;\n      maj = bc ^ (b & d) ^ cd;\n      ch = (f & g) ^ (~f & h);\n      t1 = e + s1 + ch + K[j + 3] + blocks[j + 3];\n      t2 = s0 + maj;\n      e = a + t1 << 0;\n      a = t1 + t2 << 0;\n      this.chromeBugWorkAround = true;\n    }\n\n    this.h0 = this.h0 + a << 0;\n    this.h1 = this.h1 + b << 0;\n    this.h2 = this.h2 + c << 0;\n    this.h3 = this.h3 + d << 0;\n    this.h4 = this.h4 + e << 0;\n    this.h5 = this.h5 + f << 0;\n    this.h6 = this.h6 + g << 0;\n    this.h7 = this.h7 + h << 0;\n  };\n\n  Sha256.prototype.hex = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var hex = HEX_CHARS[(h0 >> 28) & 0x0F] + HEX_CHARS[(h0 >> 24) & 0x0F] +\n      HEX_CHARS[(h0 >> 20) & 0x0F] + HEX_CHARS[(h0 >> 16) & 0x0F] +\n      HEX_CHARS[(h0 >> 12) & 0x0F] + HEX_CHARS[(h0 >> 8) & 0x0F] +\n      HEX_CHARS[(h0 >> 4) & 0x0F] + HEX_CHARS[h0 & 0x0F] +\n      HEX_CHARS[(h1 >> 28) & 0x0F] + HEX_CHARS[(h1 >> 24) & 0x0F] +\n      HEX_CHARS[(h1 >> 20) & 0x0F] + HEX_CHARS[(h1 >> 16) & 0x0F] +\n      HEX_CHARS[(h1 >> 12) & 0x0F] + HEX_CHARS[(h1 >> 8) & 0x0F] +\n      HEX_CHARS[(h1 >> 4) & 0x0F] + HEX_CHARS[h1 & 0x0F] +\n      HEX_CHARS[(h2 >> 28) & 0x0F] + HEX_CHARS[(h2 >> 24) & 0x0F] +\n      HEX_CHARS[(h2 >> 20) & 0x0F] + HEX_CHARS[(h2 >> 16) & 0x0F] +\n      HEX_CHARS[(h2 >> 12) & 0x0F] + HEX_CHARS[(h2 >> 8) & 0x0F] +\n      HEX_CHARS[(h2 >> 4) & 0x0F] + HEX_CHARS[h2 & 0x0F] +\n      HEX_CHARS[(h3 >> 28) & 0x0F] + HEX_CHARS[(h3 >> 24) & 0x0F] +\n      HEX_CHARS[(h3 >> 20) & 0x0F] + HEX_CHARS[(h3 >> 16) & 0x0F] +\n      HEX_CHARS[(h3 >> 12) & 0x0F] + HEX_CHARS[(h3 >> 8) & 0x0F] +\n      HEX_CHARS[(h3 >> 4) & 0x0F] + HEX_CHARS[h3 & 0x0F] +\n      HEX_CHARS[(h4 >> 28) & 0x0F] + HEX_CHARS[(h4 >> 24) & 0x0F] +\n      HEX_CHARS[(h4 >> 20) & 0x0F] + HEX_CHARS[(h4 >> 16) & 0x0F] +\n      HEX_CHARS[(h4 >> 12) & 0x0F] + HEX_CHARS[(h4 >> 8) & 0x0F] +\n      HEX_CHARS[(h4 >> 4) & 0x0F] + HEX_CHARS[h4 & 0x0F] +\n      HEX_CHARS[(h5 >> 28) & 0x0F] + HEX_CHARS[(h5 >> 24) & 0x0F] +\n      HEX_CHARS[(h5 >> 20) & 0x0F] + HEX_CHARS[(h5 >> 16) & 0x0F] +\n      HEX_CHARS[(h5 >> 12) & 0x0F] + HEX_CHARS[(h5 >> 8) & 0x0F] +\n      HEX_CHARS[(h5 >> 4) & 0x0F] + HEX_CHARS[h5 & 0x0F] +\n      HEX_CHARS[(h6 >> 28) & 0x0F] + HEX_CHARS[(h6 >> 24) & 0x0F] +\n      HEX_CHARS[(h6 >> 20) & 0x0F] + HEX_CHARS[(h6 >> 16) & 0x0F] +\n      HEX_CHARS[(h6 >> 12) & 0x0F] + HEX_CHARS[(h6 >> 8) & 0x0F] +\n      HEX_CHARS[(h6 >> 4) & 0x0F] + HEX_CHARS[h6 & 0x0F];\n    if (!this.is224) {\n      hex += HEX_CHARS[(h7 >> 28) & 0x0F] + HEX_CHARS[(h7 >> 24) & 0x0F] +\n        HEX_CHARS[(h7 >> 20) & 0x0F] + HEX_CHARS[(h7 >> 16) & 0x0F] +\n        HEX_CHARS[(h7 >> 12) & 0x0F] + HEX_CHARS[(h7 >> 8) & 0x0F] +\n        HEX_CHARS[(h7 >> 4) & 0x0F] + HEX_CHARS[h7 & 0x0F];\n    }\n    return hex;\n  };\n\n  Sha256.prototype.toString = Sha256.prototype.hex;\n\n  Sha256.prototype.digest = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var arr = [\n      (h0 >> 24) & 0xFF, (h0 >> 16) & 0xFF, (h0 >> 8) & 0xFF, h0 & 0xFF,\n      (h1 >> 24) & 0xFF, (h1 >> 16) & 0xFF, (h1 >> 8) & 0xFF, h1 & 0xFF,\n      (h2 >> 24) & 0xFF, (h2 >> 16) & 0xFF, (h2 >> 8) & 0xFF, h2 & 0xFF,\n      (h3 >> 24) & 0xFF, (h3 >> 16) & 0xFF, (h3 >> 8) & 0xFF, h3 & 0xFF,\n      (h4 >> 24) & 0xFF, (h4 >> 16) & 0xFF, (h4 >> 8) & 0xFF, h4 & 0xFF,\n      (h5 >> 24) & 0xFF, (h5 >> 16) & 0xFF, (h5 >> 8) & 0xFF, h5 & 0xFF,\n      (h6 >> 24) & 0xFF, (h6 >> 16) & 0xFF, (h6 >> 8) & 0xFF, h6 & 0xFF\n    ];\n    if (!this.is224) {\n      arr.push((h7 >> 24) & 0xFF, (h7 >> 16) & 0xFF, (h7 >> 8) & 0xFF, h7 & 0xFF);\n    }\n    return arr;\n  };\n\n  Sha256.prototype.array = Sha256.prototype.digest;\n\n  Sha256.prototype.arrayBuffer = function () {\n    this.finalize();\n\n    var buffer = new ArrayBuffer(this.is224 ? 28 : 32);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    dataView.setUint32(20, this.h5);\n    dataView.setUint32(24, this.h6);\n    if (!this.is224) {\n      dataView.setUint32(28, this.h7);\n    }\n    return buffer;\n  };\n\n  function HmacSha256(key, is224, sharedMemory) {\n    var i, type = typeof key;\n    if (type === 'string') {\n      var bytes = [], length = key.length, index = 0, code;\n      for (i = 0; i < length; ++i) {\n        code = key.charCodeAt(i);\n        if (code < 0x80) {\n          bytes[index++] = code;\n        } else if (code < 0x800) {\n          bytes[index++] = (0xc0 | (code >> 6));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else if (code < 0xd800 || code >= 0xe000) {\n          bytes[index++] = (0xe0 | (code >> 12));\n          bytes[index++] = (0x80 | ((code >> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else {\n          code = 0x10000 + (((code & 0x3ff) << 10) | (key.charCodeAt(++i) & 0x3ff));\n          bytes[index++] = (0xf0 | (code >> 18));\n          bytes[index++] = (0x80 | ((code >> 12) & 0x3f));\n          bytes[index++] = (0x80 | ((code >> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        }\n      }\n      key = bytes;\n    } else {\n      if (type === 'object') {\n        if (key === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && key.constructor === ArrayBuffer) {\n          key = new Uint8Array(key);\n        } else if (!Array.isArray(key)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(key)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n    }\n\n    if (key.length > 64) {\n      key = (new Sha256(is224, true)).update(key).array();\n    }\n\n    var oKeyPad = [], iKeyPad = [];\n    for (i = 0; i < 64; ++i) {\n      var b = key[i] || 0;\n      oKeyPad[i] = 0x5c ^ b;\n      iKeyPad[i] = 0x36 ^ b;\n    }\n\n    Sha256.call(this, is224, sharedMemory);\n\n    this.update(iKeyPad);\n    this.oKeyPad = oKeyPad;\n    this.inner = true;\n    this.sharedMemory = sharedMemory;\n  }\n  HmacSha256.prototype = new Sha256();\n\n  HmacSha256.prototype.finalize = function () {\n    Sha256.prototype.finalize.call(this);\n    if (this.inner) {\n      this.inner = false;\n      var innerHash = this.array();\n      Sha256.call(this, this.is224, this.sharedMemory);\n      this.update(this.oKeyPad);\n      this.update(innerHash);\n      Sha256.prototype.finalize.call(this);\n    }\n  };\n\n  var exports = createMethod();\n  exports.sha256 = exports;\n  exports.sha224 = createMethod(true);\n  exports.sha256.hmac = createHmacMethod();\n  exports.sha224.hmac = createHmacMethod(true);\n\n  if (COMMON_JS) {\n    module.exports = exports;\n  } else {\n    root.sha256 = exports.sha256;\n    root.sha224 = exports.sha224;\n    if (AMD) {\n      define(function () {\n        return exports;\n      });\n    }\n  }\n})();\n","!function(e,o){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=o():\"function\"==typeof define&&define.amd?define(o):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_isToday=o()}(this,(function(){\"use strict\";return function(e,o,t){o.prototype.isToday=function(){var e=\"YYYY-MM-DD\",o=t();return this.format(e)===o.format(e)}}}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_isYesterday=t()}(this,(function(){\"use strict\";return function(e,t,n){t.prototype.isYesterday=function(){var e=\"YYYY-MM-DD\",t=n().subtract(1,\"day\");return this.format(e)===t.format(e)}}}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_localizedFormat=t()}(this,(function(){\"use strict\";var e={LTS:\"h:mm:ss A\",LT:\"h:mm A\",L:\"MM/DD/YYYY\",LL:\"MMMM D, YYYY\",LLL:\"MMMM D, YYYY h:mm A\",LLLL:\"dddd, MMMM D, YYYY h:mm A\"};return function(t,o,n){var r=o.prototype,i=r.format;n.en.formats=e,r.format=function(t){void 0===t&&(t=\"YYYY-MM-DDTHH:mm:ssZ\");var o=this.$locale().formats,n=function(t,o){return t.replace(/(\\[[^\\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,r){var i=r&&r.toUpperCase();return n||o[r]||e[r]||o[i].replace(/(\\[[^\\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,o){return t||o.slice(1)}))}))}(t,void 0===o?{}:o);return i.call(this,n)}}}));","export type Banner = {\n\tid: string;\n\ttype: string;\n\ttitle?: string;\n\tcontent: string;\n\turl?: string;\n\tdismissible?: boolean;\n\ttimestamp: number;\n};\n\nexport enum TTS_RESPONSE_SPLIT {\n\tPUNCTUATION = 'punctuation',\n\tPARAGRAPHS = 'paragraphs',\n\tNONE = 'none'\n}\n","export default \"__VITE_ASSET__dOxINKRE__\"","/**\n * marked v9.1.6 - a markdown parser\n * Copyright (c) 2011-2023, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\n/**\n * Gets the original marked default options.\n */\nfunction _getDefaults() {\n    return {\n        async: false,\n        breaks: false,\n        extensions: null,\n        gfm: true,\n        hooks: null,\n        pedantic: false,\n        renderer: null,\n        silent: false,\n        tokenizer: null,\n        walkTokens: null\n    };\n}\nlet _defaults = _getDefaults();\nfunction changeDefaults(newDefaults) {\n    _defaults = newDefaults;\n}\n\n/**\n * Helpers\n */\nconst escapeTest = /[&<>\"']/;\nconst escapeReplace = new RegExp(escapeTest.source, 'g');\nconst escapeTestNoEncode = /[<>\"']|&(?!(#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);)/;\nconst escapeReplaceNoEncode = new RegExp(escapeTestNoEncode.source, 'g');\nconst escapeReplacements = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n};\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\nfunction escape(html, encode) {\n    if (encode) {\n        if (escapeTest.test(html)) {\n            return html.replace(escapeReplace, getEscapeReplacement);\n        }\n    }\n    else {\n        if (escapeTestNoEncode.test(html)) {\n            return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n        }\n    }\n    return html;\n}\nconst unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\nfunction unescape(html) {\n    // explicitly match decimal, hex, and named HTML entities\n    return html.replace(unescapeTest, (_, n) => {\n        n = n.toLowerCase();\n        if (n === 'colon')\n            return ':';\n        if (n.charAt(0) === '#') {\n            return n.charAt(1) === 'x'\n                ? String.fromCharCode(parseInt(n.substring(2), 16))\n                : String.fromCharCode(+n.substring(1));\n        }\n        return '';\n    });\n}\nconst caret = /(^|[^\\[])\\^/g;\nfunction edit(regex, opt) {\n    regex = typeof regex === 'string' ? regex : regex.source;\n    opt = opt || '';\n    const obj = {\n        replace: (name, val) => {\n            val = typeof val === 'object' && 'source' in val ? val.source : val;\n            val = val.replace(caret, '$1');\n            regex = regex.replace(name, val);\n            return obj;\n        },\n        getRegex: () => {\n            return new RegExp(regex, opt);\n        }\n    };\n    return obj;\n}\nfunction cleanUrl(href) {\n    try {\n        href = encodeURI(href).replace(/%25/g, '%');\n    }\n    catch (e) {\n        return null;\n    }\n    return href;\n}\nconst noopTest = { exec: () => null };\nfunction splitCells(tableRow, count) {\n    // ensure that every cell-delimiting pipe has a space\n    // before it to distinguish it from an escaped pipe\n    const row = tableRow.replace(/\\|/g, (match, offset, str) => {\n        let escaped = false;\n        let curr = offset;\n        while (--curr >= 0 && str[curr] === '\\\\')\n            escaped = !escaped;\n        if (escaped) {\n            // odd number of slashes means | is escaped\n            // so we leave it alone\n            return '|';\n        }\n        else {\n            // add space before unescaped |\n            return ' |';\n        }\n    }), cells = row.split(/ \\|/);\n    let i = 0;\n    // First/last cell in a row cannot be empty if it has no leading/trailing pipe\n    if (!cells[0].trim()) {\n        cells.shift();\n    }\n    if (cells.length > 0 && !cells[cells.length - 1].trim()) {\n        cells.pop();\n    }\n    if (count) {\n        if (cells.length > count) {\n            cells.splice(count);\n        }\n        else {\n            while (cells.length < count)\n                cells.push('');\n        }\n    }\n    for (; i < cells.length; i++) {\n        // leading or trailing whitespace is ignored per the gfm spec\n        cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n    }\n    return cells;\n}\n/**\n * Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n * /c*$/ is vulnerable to REDOS.\n *\n * @param str\n * @param c\n * @param invert Remove suffix of non-c chars instead. Default falsey.\n */\nfunction rtrim(str, c, invert) {\n    const l = str.length;\n    if (l === 0) {\n        return '';\n    }\n    // Length of suffix matching the invert condition.\n    let suffLen = 0;\n    // Step left until we fail to match the invert condition.\n    while (suffLen < l) {\n        const currChar = str.charAt(l - suffLen - 1);\n        if (currChar === c && !invert) {\n            suffLen++;\n        }\n        else if (currChar !== c && invert) {\n            suffLen++;\n        }\n        else {\n            break;\n        }\n    }\n    return str.slice(0, l - suffLen);\n}\nfunction findClosingBracket(str, b) {\n    if (str.indexOf(b[1]) === -1) {\n        return -1;\n    }\n    let level = 0;\n    for (let i = 0; i < str.length; i++) {\n        if (str[i] === '\\\\') {\n            i++;\n        }\n        else if (str[i] === b[0]) {\n            level++;\n        }\n        else if (str[i] === b[1]) {\n            level--;\n            if (level < 0) {\n                return i;\n            }\n        }\n    }\n    return -1;\n}\n\nfunction outputLink(cap, link, raw, lexer) {\n    const href = link.href;\n    const title = link.title ? escape(link.title) : null;\n    const text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n    if (cap[0].charAt(0) !== '!') {\n        lexer.state.inLink = true;\n        const token = {\n            type: 'link',\n            raw,\n            href,\n            title,\n            text,\n            tokens: lexer.inlineTokens(text)\n        };\n        lexer.state.inLink = false;\n        return token;\n    }\n    return {\n        type: 'image',\n        raw,\n        href,\n        title,\n        text: escape(text)\n    };\n}\nfunction indentCodeCompensation(raw, text) {\n    const matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n    if (matchIndentToCode === null) {\n        return text;\n    }\n    const indentToCode = matchIndentToCode[1];\n    return text\n        .split('\\n')\n        .map(node => {\n        const matchIndentInNode = node.match(/^\\s+/);\n        if (matchIndentInNode === null) {\n            return node;\n        }\n        const [indentInNode] = matchIndentInNode;\n        if (indentInNode.length >= indentToCode.length) {\n            return node.slice(indentToCode.length);\n        }\n        return node;\n    })\n        .join('\\n');\n}\n/**\n * Tokenizer\n */\nclass _Tokenizer {\n    options;\n    // TODO: Fix this rules type\n    rules;\n    lexer;\n    constructor(options) {\n        this.options = options || _defaults;\n    }\n    space(src) {\n        const cap = this.rules.block.newline.exec(src);\n        if (cap && cap[0].length > 0) {\n            return {\n                type: 'space',\n                raw: cap[0]\n            };\n        }\n    }\n    code(src) {\n        const cap = this.rules.block.code.exec(src);\n        if (cap) {\n            const text = cap[0].replace(/^ {1,4}/gm, '');\n            return {\n                type: 'code',\n                raw: cap[0],\n                codeBlockStyle: 'indented',\n                text: !this.options.pedantic\n                    ? rtrim(text, '\\n')\n                    : text\n            };\n        }\n    }\n    fences(src) {\n        const cap = this.rules.block.fences.exec(src);\n        if (cap) {\n            const raw = cap[0];\n            const text = indentCodeCompensation(raw, cap[3] || '');\n            return {\n                type: 'code',\n                raw,\n                lang: cap[2] ? cap[2].trim().replace(this.rules.inline._escapes, '$1') : cap[2],\n                text\n            };\n        }\n    }\n    heading(src) {\n        const cap = this.rules.block.heading.exec(src);\n        if (cap) {\n            let text = cap[2].trim();\n            // remove trailing #s\n            if (/#$/.test(text)) {\n                const trimmed = rtrim(text, '#');\n                if (this.options.pedantic) {\n                    text = trimmed.trim();\n                }\n                else if (!trimmed || / $/.test(trimmed)) {\n                    // CommonMark requires space before trailing #s\n                    text = trimmed.trim();\n                }\n            }\n            return {\n                type: 'heading',\n                raw: cap[0],\n                depth: cap[1].length,\n                text,\n                tokens: this.lexer.inline(text)\n            };\n        }\n    }\n    hr(src) {\n        const cap = this.rules.block.hr.exec(src);\n        if (cap) {\n            return {\n                type: 'hr',\n                raw: cap[0]\n            };\n        }\n    }\n    blockquote(src) {\n        const cap = this.rules.block.blockquote.exec(src);\n        if (cap) {\n            const text = rtrim(cap[0].replace(/^ *>[ \\t]?/gm, ''), '\\n');\n            const top = this.lexer.state.top;\n            this.lexer.state.top = true;\n            const tokens = this.lexer.blockTokens(text);\n            this.lexer.state.top = top;\n            return {\n                type: 'blockquote',\n                raw: cap[0],\n                tokens,\n                text\n            };\n        }\n    }\n    list(src) {\n        let cap = this.rules.block.list.exec(src);\n        if (cap) {\n            let bull = cap[1].trim();\n            const isordered = bull.length > 1;\n            const list = {\n                type: 'list',\n                raw: '',\n                ordered: isordered,\n                start: isordered ? +bull.slice(0, -1) : '',\n                loose: false,\n                items: []\n            };\n            bull = isordered ? `\\\\d{1,9}\\\\${bull.slice(-1)}` : `\\\\${bull}`;\n            if (this.options.pedantic) {\n                bull = isordered ? bull : '[*+-]';\n            }\n            // Get next list item\n            const itemRegex = new RegExp(`^( {0,3}${bull})((?:[\\t ][^\\\\n]*)?(?:\\\\n|$))`);\n            let raw = '';\n            let itemContents = '';\n            let endsWithBlankLine = false;\n            // Check if current bullet point can start a new List Item\n            while (src) {\n                let endEarly = false;\n                if (!(cap = itemRegex.exec(src))) {\n                    break;\n                }\n                if (this.rules.block.hr.test(src)) { // End list if bullet was actually HR (possibly move into itemRegex?)\n                    break;\n                }\n                raw = cap[0];\n                src = src.substring(raw.length);\n                let line = cap[2].split('\\n', 1)[0].replace(/^\\t+/, (t) => ' '.repeat(3 * t.length));\n                let nextLine = src.split('\\n', 1)[0];\n                let indent = 0;\n                if (this.options.pedantic) {\n                    indent = 2;\n                    itemContents = line.trimStart();\n                }\n                else {\n                    indent = cap[2].search(/[^ ]/); // Find first non-space char\n                    indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\n                    itemContents = line.slice(indent);\n                    indent += cap[1].length;\n                }\n                let blankLine = false;\n                if (!line && /^ *$/.test(nextLine)) { // Items begin with at most one blank line\n                    raw += nextLine + '\\n';\n                    src = src.substring(nextLine.length + 1);\n                    endEarly = true;\n                }\n                if (!endEarly) {\n                    const nextBulletRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\\\d{1,9}[.)])((?:[ \\t][^\\\\n]*)?(?:\\\\n|$))`);\n                    const hrRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)`);\n                    const fencesBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:\\`\\`\\`|~~~)`);\n                    const headingBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}#`);\n                    // Check if following lines should be included in List Item\n                    while (src) {\n                        const rawLine = src.split('\\n', 1)[0];\n                        nextLine = rawLine;\n                        // Re-align to follow commonmark nesting rules\n                        if (this.options.pedantic) {\n                            nextLine = nextLine.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\n                        }\n                        // End list item if found code fences\n                        if (fencesBeginRegex.test(nextLine)) {\n                            break;\n                        }\n                        // End list item if found start of new heading\n                        if (headingBeginRegex.test(nextLine)) {\n                            break;\n                        }\n                        // End list item if found start of new bullet\n                        if (nextBulletRegex.test(nextLine)) {\n                            break;\n                        }\n                        // Horizontal rule found\n                        if (hrRegex.test(src)) {\n                            break;\n                        }\n                        if (nextLine.search(/[^ ]/) >= indent || !nextLine.trim()) { // Dedent if possible\n                            itemContents += '\\n' + nextLine.slice(indent);\n                        }\n                        else {\n                            // not enough indentation\n                            if (blankLine) {\n                                break;\n                            }\n                            // paragraph continuation unless last line was a different block level element\n                            if (line.search(/[^ ]/) >= 4) { // indented code block\n                                break;\n                            }\n                            if (fencesBeginRegex.test(line)) {\n                                break;\n                            }\n                            if (headingBeginRegex.test(line)) {\n                                break;\n                            }\n                            if (hrRegex.test(line)) {\n                                break;\n                            }\n                            itemContents += '\\n' + nextLine;\n                        }\n                        if (!blankLine && !nextLine.trim()) { // Check if current line is blank\n                            blankLine = true;\n                        }\n                        raw += rawLine + '\\n';\n                        src = src.substring(rawLine.length + 1);\n                        line = nextLine.slice(indent);\n                    }\n                }\n                if (!list.loose) {\n                    // If the previous item ended with a blank line, the list is loose\n                    if (endsWithBlankLine) {\n                        list.loose = true;\n                    }\n                    else if (/\\n *\\n *$/.test(raw)) {\n                        endsWithBlankLine = true;\n                    }\n                }\n                let istask = null;\n                let ischecked;\n                // Check for task list items\n                if (this.options.gfm) {\n                    istask = /^\\[[ xX]\\] /.exec(itemContents);\n                    if (istask) {\n                        ischecked = istask[0] !== '[ ] ';\n                        itemContents = itemContents.replace(/^\\[[ xX]\\] +/, '');\n                    }\n                }\n                list.items.push({\n                    type: 'list_item',\n                    raw,\n                    task: !!istask,\n                    checked: ischecked,\n                    loose: false,\n                    text: itemContents,\n                    tokens: []\n                });\n                list.raw += raw;\n            }\n            // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\n            list.items[list.items.length - 1].raw = raw.trimEnd();\n            list.items[list.items.length - 1].text = itemContents.trimEnd();\n            list.raw = list.raw.trimEnd();\n            // Item child tokens handled here at end because we needed to have the final item to trim it first\n            for (let i = 0; i < list.items.length; i++) {\n                this.lexer.state.top = false;\n                list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\n                if (!list.loose) {\n                    // Check if list should be loose\n                    const spacers = list.items[i].tokens.filter(t => t.type === 'space');\n                    const hasMultipleLineBreaks = spacers.length > 0 && spacers.some(t => /\\n.*\\n/.test(t.raw));\n                    list.loose = hasMultipleLineBreaks;\n                }\n            }\n            // Set all items to loose if list is loose\n            if (list.loose) {\n                for (let i = 0; i < list.items.length; i++) {\n                    list.items[i].loose = true;\n                }\n            }\n            return list;\n        }\n    }\n    html(src) {\n        const cap = this.rules.block.html.exec(src);\n        if (cap) {\n            const token = {\n                type: 'html',\n                block: true,\n                raw: cap[0],\n                pre: cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style',\n                text: cap[0]\n            };\n            return token;\n        }\n    }\n    def(src) {\n        const cap = this.rules.block.def.exec(src);\n        if (cap) {\n            const tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n            const href = cap[2] ? cap[2].replace(/^<(.*)>$/, '$1').replace(this.rules.inline._escapes, '$1') : '';\n            const title = cap[3] ? cap[3].substring(1, cap[3].length - 1).replace(this.rules.inline._escapes, '$1') : cap[3];\n            return {\n                type: 'def',\n                tag,\n                raw: cap[0],\n                href,\n                title\n            };\n        }\n    }\n    table(src) {\n        const cap = this.rules.block.table.exec(src);\n        if (cap) {\n            if (!/[:|]/.test(cap[2])) {\n                // delimiter row must have a pipe (|) or colon (:) otherwise it is a setext heading\n                return;\n            }\n            const item = {\n                type: 'table',\n                raw: cap[0],\n                header: splitCells(cap[1]).map(c => {\n                    return { text: c, tokens: [] };\n                }),\n                align: cap[2].replace(/^\\||\\| *$/g, '').split('|'),\n                rows: cap[3] && cap[3].trim() ? cap[3].replace(/\\n[ \\t]*$/, '').split('\\n') : []\n            };\n            if (item.header.length === item.align.length) {\n                let l = item.align.length;\n                let i, j, k, row;\n                for (i = 0; i < l; i++) {\n                    const align = item.align[i];\n                    if (align) {\n                        if (/^ *-+: *$/.test(align)) {\n                            item.align[i] = 'right';\n                        }\n                        else if (/^ *:-+: *$/.test(align)) {\n                            item.align[i] = 'center';\n                        }\n                        else if (/^ *:-+ *$/.test(align)) {\n                            item.align[i] = 'left';\n                        }\n                        else {\n                            item.align[i] = null;\n                        }\n                    }\n                }\n                l = item.rows.length;\n                for (i = 0; i < l; i++) {\n                    item.rows[i] = splitCells(item.rows[i], item.header.length).map(c => {\n                        return { text: c, tokens: [] };\n                    });\n                }\n                // parse child tokens inside headers and cells\n                // header child tokens\n                l = item.header.length;\n                for (j = 0; j < l; j++) {\n                    item.header[j].tokens = this.lexer.inline(item.header[j].text);\n                }\n                // cell child tokens\n                l = item.rows.length;\n                for (j = 0; j < l; j++) {\n                    row = item.rows[j];\n                    for (k = 0; k < row.length; k++) {\n                        row[k].tokens = this.lexer.inline(row[k].text);\n                    }\n                }\n                return item;\n            }\n        }\n    }\n    lheading(src) {\n        const cap = this.rules.block.lheading.exec(src);\n        if (cap) {\n            return {\n                type: 'heading',\n                raw: cap[0],\n                depth: cap[2].charAt(0) === '=' ? 1 : 2,\n                text: cap[1],\n                tokens: this.lexer.inline(cap[1])\n            };\n        }\n    }\n    paragraph(src) {\n        const cap = this.rules.block.paragraph.exec(src);\n        if (cap) {\n            const text = cap[1].charAt(cap[1].length - 1) === '\\n'\n                ? cap[1].slice(0, -1)\n                : cap[1];\n            return {\n                type: 'paragraph',\n                raw: cap[0],\n                text,\n                tokens: this.lexer.inline(text)\n            };\n        }\n    }\n    text(src) {\n        const cap = this.rules.block.text.exec(src);\n        if (cap) {\n            return {\n                type: 'text',\n                raw: cap[0],\n                text: cap[0],\n                tokens: this.lexer.inline(cap[0])\n            };\n        }\n    }\n    escape(src) {\n        const cap = this.rules.inline.escape.exec(src);\n        if (cap) {\n            return {\n                type: 'escape',\n                raw: cap[0],\n                text: escape(cap[1])\n            };\n        }\n    }\n    tag(src) {\n        const cap = this.rules.inline.tag.exec(src);\n        if (cap) {\n            if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\n                this.lexer.state.inLink = true;\n            }\n            else if (this.lexer.state.inLink && /^<\\/a>/i.test(cap[0])) {\n                this.lexer.state.inLink = false;\n            }\n            if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n                this.lexer.state.inRawBlock = true;\n            }\n            else if (this.lexer.state.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n                this.lexer.state.inRawBlock = false;\n            }\n            return {\n                type: 'html',\n                raw: cap[0],\n                inLink: this.lexer.state.inLink,\n                inRawBlock: this.lexer.state.inRawBlock,\n                block: false,\n                text: cap[0]\n            };\n        }\n    }\n    link(src) {\n        const cap = this.rules.inline.link.exec(src);\n        if (cap) {\n            const trimmedUrl = cap[2].trim();\n            if (!this.options.pedantic && /^</.test(trimmedUrl)) {\n                // commonmark requires matching angle brackets\n                if (!(/>$/.test(trimmedUrl))) {\n                    return;\n                }\n                // ending angle bracket cannot be escaped\n                const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\');\n                if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n                    return;\n                }\n            }\n            else {\n                // find closing parenthesis\n                const lastParenIndex = findClosingBracket(cap[2], '()');\n                if (lastParenIndex > -1) {\n                    const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n                    const linkLen = start + cap[1].length + lastParenIndex;\n                    cap[2] = cap[2].substring(0, lastParenIndex);\n                    cap[0] = cap[0].substring(0, linkLen).trim();\n                    cap[3] = '';\n                }\n            }\n            let href = cap[2];\n            let title = '';\n            if (this.options.pedantic) {\n                // split pedantic href and title\n                const link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n                if (link) {\n                    href = link[1];\n                    title = link[3];\n                }\n            }\n            else {\n                title = cap[3] ? cap[3].slice(1, -1) : '';\n            }\n            href = href.trim();\n            if (/^</.test(href)) {\n                if (this.options.pedantic && !(/>$/.test(trimmedUrl))) {\n                    // pedantic allows starting angle bracket without ending angle bracket\n                    href = href.slice(1);\n                }\n                else {\n                    href = href.slice(1, -1);\n                }\n            }\n            return outputLink(cap, {\n                href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n                title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n            }, cap[0], this.lexer);\n        }\n    }\n    reflink(src, links) {\n        let cap;\n        if ((cap = this.rules.inline.reflink.exec(src))\n            || (cap = this.rules.inline.nolink.exec(src))) {\n            let link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n            link = links[link.toLowerCase()];\n            if (!link) {\n                const text = cap[0].charAt(0);\n                return {\n                    type: 'text',\n                    raw: text,\n                    text\n                };\n            }\n            return outputLink(cap, link, cap[0], this.lexer);\n        }\n    }\n    emStrong(src, maskedSrc, prevChar = '') {\n        let match = this.rules.inline.emStrong.lDelim.exec(src);\n        if (!match)\n            return;\n        // _ can't be between two alphanumerics. \\p{L}\\p{N} includes non-english alphabet/numbers as well\n        if (match[3] && prevChar.match(/[\\p{L}\\p{N}]/u))\n            return;\n        const nextChar = match[1] || match[2] || '';\n        if (!nextChar || !prevChar || this.rules.inline.punctuation.exec(prevChar)) {\n            // unicode Regex counts emoji as 1 char; spread into array for proper count (used multiple times below)\n            const lLength = [...match[0]].length - 1;\n            let rDelim, rLength, delimTotal = lLength, midDelimTotal = 0;\n            const endReg = match[0][0] === '*' ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;\n            endReg.lastIndex = 0;\n            // Clip maskedSrc to same section of string as src (move to lexer?)\n            maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\n            while ((match = endReg.exec(maskedSrc)) != null) {\n                rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\n                if (!rDelim)\n                    continue; // skip single * in __abc*abc__\n                rLength = [...rDelim].length;\n                if (match[3] || match[4]) { // found another Left Delim\n                    delimTotal += rLength;\n                    continue;\n                }\n                else if (match[5] || match[6]) { // either Left or Right Delim\n                    if (lLength % 3 && !((lLength + rLength) % 3)) {\n                        midDelimTotal += rLength;\n                        continue; // CommonMark Emphasis Rules 9-10\n                    }\n                }\n                delimTotal -= rLength;\n                if (delimTotal > 0)\n                    continue; // Haven't found enough closing delimiters\n                // Remove extra characters. *a*** -> *a*\n                rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal);\n                // char length can be >1 for unicode characters;\n                const lastCharLength = [...match[0]][0].length;\n                const raw = src.slice(0, lLength + match.index + lastCharLength + rLength);\n                // Create `em` if smallest delimiter has odd char count. *a***\n                if (Math.min(lLength, rLength) % 2) {\n                    const text = raw.slice(1, -1);\n                    return {\n                        type: 'em',\n                        raw,\n                        text,\n                        tokens: this.lexer.inlineTokens(text)\n                    };\n                }\n                // Create 'strong' if smallest delimiter has even char count. **a***\n                const text = raw.slice(2, -2);\n                return {\n                    type: 'strong',\n                    raw,\n                    text,\n                    tokens: this.lexer.inlineTokens(text)\n                };\n            }\n        }\n    }\n    codespan(src) {\n        const cap = this.rules.inline.code.exec(src);\n        if (cap) {\n            let text = cap[2].replace(/\\n/g, ' ');\n            const hasNonSpaceChars = /[^ ]/.test(text);\n            const hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);\n            if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n                text = text.substring(1, text.length - 1);\n            }\n            text = escape(text, true);\n            return {\n                type: 'codespan',\n                raw: cap[0],\n                text\n            };\n        }\n    }\n    br(src) {\n        const cap = this.rules.inline.br.exec(src);\n        if (cap) {\n            return {\n                type: 'br',\n                raw: cap[0]\n            };\n        }\n    }\n    del(src) {\n        const cap = this.rules.inline.del.exec(src);\n        if (cap) {\n            return {\n                type: 'del',\n                raw: cap[0],\n                text: cap[2],\n                tokens: this.lexer.inlineTokens(cap[2])\n            };\n        }\n    }\n    autolink(src) {\n        const cap = this.rules.inline.autolink.exec(src);\n        if (cap) {\n            let text, href;\n            if (cap[2] === '@') {\n                text = escape(cap[1]);\n                href = 'mailto:' + text;\n            }\n            else {\n                text = escape(cap[1]);\n                href = text;\n            }\n            return {\n                type: 'link',\n                raw: cap[0],\n                text,\n                href,\n                tokens: [\n                    {\n                        type: 'text',\n                        raw: text,\n                        text\n                    }\n                ]\n            };\n        }\n    }\n    url(src) {\n        let cap;\n        if (cap = this.rules.inline.url.exec(src)) {\n            let text, href;\n            if (cap[2] === '@') {\n                text = escape(cap[0]);\n                href = 'mailto:' + text;\n            }\n            else {\n                // do extended autolink path validation\n                let prevCapZero;\n                do {\n                    prevCapZero = cap[0];\n                    cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\n                } while (prevCapZero !== cap[0]);\n                text = escape(cap[0]);\n                if (cap[1] === 'www.') {\n                    href = 'http://' + cap[0];\n                }\n                else {\n                    href = cap[0];\n                }\n            }\n            return {\n                type: 'link',\n                raw: cap[0],\n                text,\n                href,\n                tokens: [\n                    {\n                        type: 'text',\n                        raw: text,\n                        text\n                    }\n                ]\n            };\n        }\n    }\n    inlineText(src) {\n        const cap = this.rules.inline.text.exec(src);\n        if (cap) {\n            let text;\n            if (this.lexer.state.inRawBlock) {\n                text = cap[0];\n            }\n            else {\n                text = escape(cap[0]);\n            }\n            return {\n                type: 'text',\n                raw: cap[0],\n                text\n            };\n        }\n    }\n}\n\n/**\n * Block-Level Grammar\n */\n// Not all rules are defined in the object literal\n// @ts-expect-error\nconst block = {\n    newline: /^(?: *(?:\\n|$))+/,\n    code: /^( {4}[^\\n]+(?:\\n(?: *(?:\\n|$))*)?)+/,\n    fences: /^ {0,3}(`{3,}(?=[^`\\n]*(?:\\n|$))|~{3,})([^\\n]*)(?:\\n|$)(?:|([\\s\\S]*?)(?:\\n|$))(?: {0,3}\\1[~`]* *(?=\\n|$)|$)/,\n    hr: /^ {0,3}((?:-[\\t ]*){3,}|(?:_[ \\t]*){3,}|(?:\\*[ \\t]*){3,})(?:\\n+|$)/,\n    heading: /^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/,\n    blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n    list: /^( {0,3}bull)([ \\t][^\\n]+?)?(?:\\n|$)/,\n    html: '^ {0,3}(?:' // optional indentation\n        + '<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n        + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n        + '|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)' // (3)\n        + '|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)' // (4)\n        + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)' // (5)\n        + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (6)\n        + '|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) open tag\n        + '|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) closing tag\n        + ')',\n    def: /^ {0,3}\\[(label)\\]: *(?:\\n *)?([^<\\s][^\\s]*|<.*?>)(?:(?: +(?:\\n *)?| *\\n *)(title))? *(?:\\n+|$)/,\n    table: noopTest,\n    lheading: /^(?!bull )((?:.|\\n(?!\\s*?\\n|bull ))+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n    // regex template, placeholders will be replaced according to different paragraph\n    // interruption rules of commonmark and the original markdown spec:\n    _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\\n)[^\\n]+)*)/,\n    text: /^[^\\n]+/\n};\nblock._label = /(?!\\s*\\])(?:\\\\.|[^\\[\\]\\\\])+/;\nblock._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\nblock.def = edit(block.def)\n    .replace('label', block._label)\n    .replace('title', block._title)\n    .getRegex();\nblock.bullet = /(?:[*+-]|\\d{1,9}[.)])/;\nblock.listItemStart = edit(/^( *)(bull) */)\n    .replace('bull', block.bullet)\n    .getRegex();\nblock.list = edit(block.list)\n    .replace(/bull/g, block.bullet)\n    .replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))')\n    .replace('def', '\\\\n+(?=' + block.def.source + ')')\n    .getRegex();\nblock._tag = 'address|article|aside|base|basefont|blockquote|body|caption'\n    + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption'\n    + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe'\n    + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option'\n    + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr'\n    + '|track|ul';\nblock._comment = /<!--(?!-?>)[\\s\\S]*?(?:-->|$)/;\nblock.html = edit(block.html, 'i')\n    .replace('comment', block._comment)\n    .replace('tag', block._tag)\n    .replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/)\n    .getRegex();\nblock.lheading = edit(block.lheading)\n    .replace(/bull/g, block.bullet) // lists can interrupt\n    .getRegex();\nblock.paragraph = edit(block._paragraph)\n    .replace('hr', block.hr)\n    .replace('heading', ' {0,3}#{1,6}(?:\\\\s|$)')\n    .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n    .replace('|table', '')\n    .replace('blockquote', ' {0,3}>')\n    .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n    .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n    .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n    .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n    .getRegex();\nblock.blockquote = edit(block.blockquote)\n    .replace('paragraph', block.paragraph)\n    .getRegex();\n/**\n * Normal Block Grammar\n */\nblock.normal = { ...block };\n/**\n * GFM Block Grammar\n */\nblock.gfm = {\n    ...block.normal,\n    table: '^ *([^\\\\n ].*)\\\\n' // Header\n        + ' {0,3}((?:\\\\| *)?:?-+:? *(?:\\\\| *:?-+:? *)*(?:\\\\| *)?)' // Align\n        + '(?:\\\\n((?:(?! *\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)' // Cells\n};\nblock.gfm.table = edit(block.gfm.table)\n    .replace('hr', block.hr)\n    .replace('heading', ' {0,3}#{1,6}(?:\\\\s|$)')\n    .replace('blockquote', ' {0,3}>')\n    .replace('code', ' {4}[^\\\\n]')\n    .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n    .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n    .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n    .replace('tag', block._tag) // tables can be interrupted by type (6) html blocks\n    .getRegex();\nblock.gfm.paragraph = edit(block._paragraph)\n    .replace('hr', block.hr)\n    .replace('heading', ' {0,3}#{1,6}(?:\\\\s|$)')\n    .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n    .replace('table', block.gfm.table) // interrupt paragraphs with table\n    .replace('blockquote', ' {0,3}>')\n    .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n    .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n    .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n    .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n    .getRegex();\n/**\n * Pedantic grammar (original John Gruber's loose markdown specification)\n */\nblock.pedantic = {\n    ...block.normal,\n    html: edit('^ *(?:comment *(?:\\\\n|\\\\s*$)'\n        + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n        + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))')\n        .replace('comment', block._comment)\n        .replace(/tag/g, '(?!(?:'\n        + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub'\n        + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)'\n        + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b')\n        .getRegex(),\n    def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n    heading: /^(#{1,6})(.*)(?:\\n+|$)/,\n    fences: noopTest,\n    lheading: /^(.+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n    paragraph: edit(block.normal._paragraph)\n        .replace('hr', block.hr)\n        .replace('heading', ' *#{1,6} *[^\\n]')\n        .replace('lheading', block.lheading)\n        .replace('blockquote', ' {0,3}>')\n        .replace('|fences', '')\n        .replace('|list', '')\n        .replace('|html', '')\n        .getRegex()\n};\n/**\n * Inline-Level Grammar\n */\n// Not all rules are defined in the object literal\n// @ts-expect-error\nconst inline = {\n    escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n    autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n    url: noopTest,\n    tag: '^comment'\n        + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n        + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n        + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n        + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n        + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>',\n    link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n    reflink: /^!?\\[(label)\\]\\[(ref)\\]/,\n    nolink: /^!?\\[(ref)\\](?:\\[\\])?/,\n    reflinkSearch: 'reflink|nolink(?!\\\\()',\n    emStrong: {\n        lDelim: /^(?:\\*+(?:((?!\\*)[punct])|[^\\s*]))|^_+(?:((?!_)[punct])|([^\\s_]))/,\n        //         (1) and (2) can only be a Right Delimiter. (3) and (4) can only be Left.  (5) and (6) can be either Left or Right.\n        //         | Skip orphan inside strong      | Consume to delim | (1) #***              | (2) a***#, a***                    | (3) #***a, ***a                  | (4) ***#                 | (5) #***#                         | (6) a***a\n        rDelimAst: /^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])/,\n        rDelimUnd: /^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/ // ^- Not allowed for _\n    },\n    code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n    br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n    del: noopTest,\n    text: /^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/,\n    punctuation: /^((?![*_])[\\spunctuation])/\n};\n// list of unicode punctuation marks, plus any missing characters from CommonMark spec\ninline._punctuation = '\\\\p{P}$+<=>`^|~';\ninline.punctuation = edit(inline.punctuation, 'u').replace(/punctuation/g, inline._punctuation).getRegex();\n// sequences em should skip over [title](link), `code`, <html>\ninline.blockSkip = /\\[[^[\\]]*?\\]\\([^\\(\\)]*?\\)|`[^`]*?`|<[^<>]*?>/g;\ninline.anyPunctuation = /\\\\[punct]/g;\ninline._escapes = /\\\\([punct])/g;\ninline._comment = edit(block._comment).replace('(?:-->|$)', '-->').getRegex();\ninline.emStrong.lDelim = edit(inline.emStrong.lDelim, 'u')\n    .replace(/punct/g, inline._punctuation)\n    .getRegex();\ninline.emStrong.rDelimAst = edit(inline.emStrong.rDelimAst, 'gu')\n    .replace(/punct/g, inline._punctuation)\n    .getRegex();\ninline.emStrong.rDelimUnd = edit(inline.emStrong.rDelimUnd, 'gu')\n    .replace(/punct/g, inline._punctuation)\n    .getRegex();\ninline.anyPunctuation = edit(inline.anyPunctuation, 'gu')\n    .replace(/punct/g, inline._punctuation)\n    .getRegex();\ninline._escapes = edit(inline._escapes, 'gu')\n    .replace(/punct/g, inline._punctuation)\n    .getRegex();\ninline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\ninline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\ninline.autolink = edit(inline.autolink)\n    .replace('scheme', inline._scheme)\n    .replace('email', inline._email)\n    .getRegex();\ninline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\ninline.tag = edit(inline.tag)\n    .replace('comment', inline._comment)\n    .replace('attribute', inline._attribute)\n    .getRegex();\ninline._label = /(?:\\[(?:\\\\.|[^\\[\\]\\\\])*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\ninline._href = /<(?:\\\\.|[^\\n<>\\\\])+>|[^\\s\\x00-\\x1f]*/;\ninline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\ninline.link = edit(inline.link)\n    .replace('label', inline._label)\n    .replace('href', inline._href)\n    .replace('title', inline._title)\n    .getRegex();\ninline.reflink = edit(inline.reflink)\n    .replace('label', inline._label)\n    .replace('ref', block._label)\n    .getRegex();\ninline.nolink = edit(inline.nolink)\n    .replace('ref', block._label)\n    .getRegex();\ninline.reflinkSearch = edit(inline.reflinkSearch, 'g')\n    .replace('reflink', inline.reflink)\n    .replace('nolink', inline.nolink)\n    .getRegex();\n/**\n * Normal Inline Grammar\n */\ninline.normal = { ...inline };\n/**\n * Pedantic Inline Grammar\n */\ninline.pedantic = {\n    ...inline.normal,\n    strong: {\n        start: /^__|\\*\\*/,\n        middle: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n        endAst: /\\*\\*(?!\\*)/g,\n        endUnd: /__(?!_)/g\n    },\n    em: {\n        start: /^_|\\*/,\n        middle: /^()\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)|^_(?=\\S)([\\s\\S]*?\\S)_(?!_)/,\n        endAst: /\\*(?!\\*)/g,\n        endUnd: /_(?!_)/g\n    },\n    link: edit(/^!?\\[(label)\\]\\((.*?)\\)/)\n        .replace('label', inline._label)\n        .getRegex(),\n    reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/)\n        .replace('label', inline._label)\n        .getRegex()\n};\n/**\n * GFM Inline Grammar\n */\ninline.gfm = {\n    ...inline.normal,\n    escape: edit(inline.escape).replace('])', '~|])').getRegex(),\n    _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n    url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n    _backpedal: /(?:[^?!.,:;*_'\"~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'\"~)]+(?!$))+/,\n    del: /^(~~?)(?=[^\\s~])([\\s\\S]*?[^\\s~])\\1(?=[^~]|$)/,\n    text: /^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/\n};\ninline.gfm.url = edit(inline.gfm.url, 'i')\n    .replace('email', inline.gfm._extended_email)\n    .getRegex();\n/**\n * GFM + Line Breaks Inline Grammar\n */\ninline.breaks = {\n    ...inline.gfm,\n    br: edit(inline.br).replace('{2,}', '*').getRegex(),\n    text: edit(inline.gfm.text)\n        .replace('\\\\b_', '\\\\b_| {2,}\\\\n')\n        .replace(/\\{2,\\}/g, '*')\n        .getRegex()\n};\n\n/**\n * Block Lexer\n */\nclass _Lexer {\n    tokens;\n    options;\n    state;\n    tokenizer;\n    inlineQueue;\n    constructor(options) {\n        // TokenList cannot be created in one go\n        // @ts-expect-error\n        this.tokens = [];\n        this.tokens.links = Object.create(null);\n        this.options = options || _defaults;\n        this.options.tokenizer = this.options.tokenizer || new _Tokenizer();\n        this.tokenizer = this.options.tokenizer;\n        this.tokenizer.options = this.options;\n        this.tokenizer.lexer = this;\n        this.inlineQueue = [];\n        this.state = {\n            inLink: false,\n            inRawBlock: false,\n            top: true\n        };\n        const rules = {\n            block: block.normal,\n            inline: inline.normal\n        };\n        if (this.options.pedantic) {\n            rules.block = block.pedantic;\n            rules.inline = inline.pedantic;\n        }\n        else if (this.options.gfm) {\n            rules.block = block.gfm;\n            if (this.options.breaks) {\n                rules.inline = inline.breaks;\n            }\n            else {\n                rules.inline = inline.gfm;\n            }\n        }\n        this.tokenizer.rules = rules;\n    }\n    /**\n     * Expose Rules\n     */\n    static get rules() {\n        return {\n            block,\n            inline\n        };\n    }\n    /**\n     * Static Lex Method\n     */\n    static lex(src, options) {\n        const lexer = new _Lexer(options);\n        return lexer.lex(src);\n    }\n    /**\n     * Static Lex Inline Method\n     */\n    static lexInline(src, options) {\n        const lexer = new _Lexer(options);\n        return lexer.inlineTokens(src);\n    }\n    /**\n     * Preprocessing\n     */\n    lex(src) {\n        src = src\n            .replace(/\\r\\n|\\r/g, '\\n');\n        this.blockTokens(src, this.tokens);\n        let next;\n        while (next = this.inlineQueue.shift()) {\n            this.inlineTokens(next.src, next.tokens);\n        }\n        return this.tokens;\n    }\n    blockTokens(src, tokens = []) {\n        if (this.options.pedantic) {\n            src = src.replace(/\\t/g, '    ').replace(/^ +$/gm, '');\n        }\n        else {\n            src = src.replace(/^( *)(\\t+)/gm, (_, leading, tabs) => {\n                return leading + '    '.repeat(tabs.length);\n            });\n        }\n        let token;\n        let lastToken;\n        let cutSrc;\n        let lastParagraphClipped;\n        while (src) {\n            if (this.options.extensions\n                && this.options.extensions.block\n                && this.options.extensions.block.some((extTokenizer) => {\n                    if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n                        src = src.substring(token.raw.length);\n                        tokens.push(token);\n                        return true;\n                    }\n                    return false;\n                })) {\n                continue;\n            }\n            // newline\n            if (token = this.tokenizer.space(src)) {\n                src = src.substring(token.raw.length);\n                if (token.raw.length === 1 && tokens.length > 0) {\n                    // if there's a single \\n as a spacer, it's terminating the last line,\n                    // so move it there so that we don't get unnecessary paragraph tags\n                    tokens[tokens.length - 1].raw += '\\n';\n                }\n                else {\n                    tokens.push(token);\n                }\n                continue;\n            }\n            // code\n            if (token = this.tokenizer.code(src)) {\n                src = src.substring(token.raw.length);\n                lastToken = tokens[tokens.length - 1];\n                // An indented code block cannot interrupt a paragraph.\n                if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n                    lastToken.raw += '\\n' + token.raw;\n                    lastToken.text += '\\n' + token.text;\n                    this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n                }\n                else {\n                    tokens.push(token);\n                }\n                continue;\n            }\n            // fences\n            if (token = this.tokenizer.fences(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // heading\n            if (token = this.tokenizer.heading(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // hr\n            if (token = this.tokenizer.hr(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // blockquote\n            if (token = this.tokenizer.blockquote(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // list\n            if (token = this.tokenizer.list(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // html\n            if (token = this.tokenizer.html(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // def\n            if (token = this.tokenizer.def(src)) {\n                src = src.substring(token.raw.length);\n                lastToken = tokens[tokens.length - 1];\n                if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n                    lastToken.raw += '\\n' + token.raw;\n                    lastToken.text += '\\n' + token.raw;\n                    this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n                }\n                else if (!this.tokens.links[token.tag]) {\n                    this.tokens.links[token.tag] = {\n                        href: token.href,\n                        title: token.title\n                    };\n                }\n                continue;\n            }\n            // table (gfm)\n            if (token = this.tokenizer.table(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // lheading\n            if (token = this.tokenizer.lheading(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // top-level paragraph\n            // prevent paragraph consuming extensions by clipping 'src' to extension start\n            cutSrc = src;\n            if (this.options.extensions && this.options.extensions.startBlock) {\n                let startIndex = Infinity;\n                const tempSrc = src.slice(1);\n                let tempStart;\n                this.options.extensions.startBlock.forEach((getStartIndex) => {\n                    tempStart = getStartIndex.call({ lexer: this }, tempSrc);\n                    if (typeof tempStart === 'number' && tempStart >= 0) {\n                        startIndex = Math.min(startIndex, tempStart);\n                    }\n                });\n                if (startIndex < Infinity && startIndex >= 0) {\n                    cutSrc = src.substring(0, startIndex + 1);\n                }\n            }\n            if (this.state.top && (token = this.tokenizer.paragraph(cutSrc))) {\n                lastToken = tokens[tokens.length - 1];\n                if (lastParagraphClipped && lastToken.type === 'paragraph') {\n                    lastToken.raw += '\\n' + token.raw;\n                    lastToken.text += '\\n' + token.text;\n                    this.inlineQueue.pop();\n                    this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n                }\n                else {\n                    tokens.push(token);\n                }\n                lastParagraphClipped = (cutSrc.length !== src.length);\n                src = src.substring(token.raw.length);\n                continue;\n            }\n            // text\n            if (token = this.tokenizer.text(src)) {\n                src = src.substring(token.raw.length);\n                lastToken = tokens[tokens.length - 1];\n                if (lastToken && lastToken.type === 'text') {\n                    lastToken.raw += '\\n' + token.raw;\n                    lastToken.text += '\\n' + token.text;\n                    this.inlineQueue.pop();\n                    this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n                }\n                else {\n                    tokens.push(token);\n                }\n                continue;\n            }\n            if (src) {\n                const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n                if (this.options.silent) {\n                    console.error(errMsg);\n                    break;\n                }\n                else {\n                    throw new Error(errMsg);\n                }\n            }\n        }\n        this.state.top = true;\n        return tokens;\n    }\n    inline(src, tokens = []) {\n        this.inlineQueue.push({ src, tokens });\n        return tokens;\n    }\n    /**\n     * Lexing/Compiling\n     */\n    inlineTokens(src, tokens = []) {\n        let token, lastToken, cutSrc;\n        // String with links masked to avoid interference with em and strong\n        let maskedSrc = src;\n        let match;\n        let keepPrevChar, prevChar;\n        // Mask out reflinks\n        if (this.tokens.links) {\n            const links = Object.keys(this.tokens.links);\n            if (links.length > 0) {\n                while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\n                    if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\n                        maskedSrc = maskedSrc.slice(0, match.index) + '[' + 'a'.repeat(match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\n                    }\n                }\n            }\n        }\n        // Mask out other blocks\n        while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\n            maskedSrc = maskedSrc.slice(0, match.index) + '[' + 'a'.repeat(match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n        }\n        // Mask out escaped characters\n        while ((match = this.tokenizer.rules.inline.anyPunctuation.exec(maskedSrc)) != null) {\n            maskedSrc = maskedSrc.slice(0, match.index) + '++' + maskedSrc.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);\n        }\n        while (src) {\n            if (!keepPrevChar) {\n                prevChar = '';\n            }\n            keepPrevChar = false;\n            // extensions\n            if (this.options.extensions\n                && this.options.extensions.inline\n                && this.options.extensions.inline.some((extTokenizer) => {\n                    if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n                        src = src.substring(token.raw.length);\n                        tokens.push(token);\n                        return true;\n                    }\n                    return false;\n                })) {\n                continue;\n            }\n            // escape\n            if (token = this.tokenizer.escape(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // tag\n            if (token = this.tokenizer.tag(src)) {\n                src = src.substring(token.raw.length);\n                lastToken = tokens[tokens.length - 1];\n                if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n                    lastToken.raw += token.raw;\n                    lastToken.text += token.text;\n                }\n                else {\n                    tokens.push(token);\n                }\n                continue;\n            }\n            // link\n            if (token = this.tokenizer.link(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // reflink, nolink\n            if (token = this.tokenizer.reflink(src, this.tokens.links)) {\n                src = src.substring(token.raw.length);\n                lastToken = tokens[tokens.length - 1];\n                if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n                    lastToken.raw += token.raw;\n                    lastToken.text += token.text;\n                }\n                else {\n                    tokens.push(token);\n                }\n                continue;\n            }\n            // em & strong\n            if (token = this.tokenizer.emStrong(src, maskedSrc, prevChar)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // code\n            if (token = this.tokenizer.codespan(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // br\n            if (token = this.tokenizer.br(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // del (gfm)\n            if (token = this.tokenizer.del(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // autolink\n            if (token = this.tokenizer.autolink(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // url (gfm)\n            if (!this.state.inLink && (token = this.tokenizer.url(src))) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // text\n            // prevent inlineText consuming extensions by clipping 'src' to extension start\n            cutSrc = src;\n            if (this.options.extensions && this.options.extensions.startInline) {\n                let startIndex = Infinity;\n                const tempSrc = src.slice(1);\n                let tempStart;\n                this.options.extensions.startInline.forEach((getStartIndex) => {\n                    tempStart = getStartIndex.call({ lexer: this }, tempSrc);\n                    if (typeof tempStart === 'number' && tempStart >= 0) {\n                        startIndex = Math.min(startIndex, tempStart);\n                    }\n                });\n                if (startIndex < Infinity && startIndex >= 0) {\n                    cutSrc = src.substring(0, startIndex + 1);\n                }\n            }\n            if (token = this.tokenizer.inlineText(cutSrc)) {\n                src = src.substring(token.raw.length);\n                if (token.raw.slice(-1) !== '_') { // Track prevChar before string of ____ started\n                    prevChar = token.raw.slice(-1);\n                }\n                keepPrevChar = true;\n                lastToken = tokens[tokens.length - 1];\n                if (lastToken && lastToken.type === 'text') {\n                    lastToken.raw += token.raw;\n                    lastToken.text += token.text;\n                }\n                else {\n                    tokens.push(token);\n                }\n                continue;\n            }\n            if (src) {\n                const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n                if (this.options.silent) {\n                    console.error(errMsg);\n                    break;\n                }\n                else {\n                    throw new Error(errMsg);\n                }\n            }\n        }\n        return tokens;\n    }\n}\n\n/**\n * Renderer\n */\nclass _Renderer {\n    options;\n    constructor(options) {\n        this.options = options || _defaults;\n    }\n    code(code, infostring, escaped) {\n        const lang = (infostring || '').match(/^\\S*/)?.[0];\n        code = code.replace(/\\n$/, '') + '\\n';\n        if (!lang) {\n            return '<pre><code>'\n                + (escaped ? code : escape(code, true))\n                + '</code></pre>\\n';\n        }\n        return '<pre><code class=\"language-'\n            + escape(lang)\n            + '\">'\n            + (escaped ? code : escape(code, true))\n            + '</code></pre>\\n';\n    }\n    blockquote(quote) {\n        return `<blockquote>\\n${quote}</blockquote>\\n`;\n    }\n    html(html, block) {\n        return html;\n    }\n    heading(text, level, raw) {\n        // ignore IDs\n        return `<h${level}>${text}</h${level}>\\n`;\n    }\n    hr() {\n        return '<hr>\\n';\n    }\n    list(body, ordered, start) {\n        const type = ordered ? 'ol' : 'ul';\n        const startatt = (ordered && start !== 1) ? (' start=\"' + start + '\"') : '';\n        return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n    }\n    listitem(text, task, checked) {\n        return `<li>${text}</li>\\n`;\n    }\n    checkbox(checked) {\n        return '<input '\n            + (checked ? 'checked=\"\" ' : '')\n            + 'disabled=\"\" type=\"checkbox\">';\n    }\n    paragraph(text) {\n        return `<p>${text}</p>\\n`;\n    }\n    table(header, body) {\n        if (body)\n            body = `<tbody>${body}</tbody>`;\n        return '<table>\\n'\n            + '<thead>\\n'\n            + header\n            + '</thead>\\n'\n            + body\n            + '</table>\\n';\n    }\n    tablerow(content) {\n        return `<tr>\\n${content}</tr>\\n`;\n    }\n    tablecell(content, flags) {\n        const type = flags.header ? 'th' : 'td';\n        const tag = flags.align\n            ? `<${type} align=\"${flags.align}\">`\n            : `<${type}>`;\n        return tag + content + `</${type}>\\n`;\n    }\n    /**\n     * span level renderer\n     */\n    strong(text) {\n        return `<strong>${text}</strong>`;\n    }\n    em(text) {\n        return `<em>${text}</em>`;\n    }\n    codespan(text) {\n        return `<code>${text}</code>`;\n    }\n    br() {\n        return '<br>';\n    }\n    del(text) {\n        return `<del>${text}</del>`;\n    }\n    link(href, title, text) {\n        const cleanHref = cleanUrl(href);\n        if (cleanHref === null) {\n            return text;\n        }\n        href = cleanHref;\n        let out = '<a href=\"' + href + '\"';\n        if (title) {\n            out += ' title=\"' + title + '\"';\n        }\n        out += '>' + text + '</a>';\n        return out;\n    }\n    image(href, title, text) {\n        const cleanHref = cleanUrl(href);\n        if (cleanHref === null) {\n            return text;\n        }\n        href = cleanHref;\n        let out = `<img src=\"${href}\" alt=\"${text}\"`;\n        if (title) {\n            out += ` title=\"${title}\"`;\n        }\n        out += '>';\n        return out;\n    }\n    text(text) {\n        return text;\n    }\n}\n\n/**\n * TextRenderer\n * returns only the textual part of the token\n */\nclass _TextRenderer {\n    // no need for block level renderers\n    strong(text) {\n        return text;\n    }\n    em(text) {\n        return text;\n    }\n    codespan(text) {\n        return text;\n    }\n    del(text) {\n        return text;\n    }\n    html(text) {\n        return text;\n    }\n    text(text) {\n        return text;\n    }\n    link(href, title, text) {\n        return '' + text;\n    }\n    image(href, title, text) {\n        return '' + text;\n    }\n    br() {\n        return '';\n    }\n}\n\n/**\n * Parsing & Compiling\n */\nclass _Parser {\n    options;\n    renderer;\n    textRenderer;\n    constructor(options) {\n        this.options = options || _defaults;\n        this.options.renderer = this.options.renderer || new _Renderer();\n        this.renderer = this.options.renderer;\n        this.renderer.options = this.options;\n        this.textRenderer = new _TextRenderer();\n    }\n    /**\n     * Static Parse Method\n     */\n    static parse(tokens, options) {\n        const parser = new _Parser(options);\n        return parser.parse(tokens);\n    }\n    /**\n     * Static Parse Inline Method\n     */\n    static parseInline(tokens, options) {\n        const parser = new _Parser(options);\n        return parser.parseInline(tokens);\n    }\n    /**\n     * Parse Loop\n     */\n    parse(tokens, top = true) {\n        let out = '';\n        for (let i = 0; i < tokens.length; i++) {\n            const token = tokens[i];\n            // Run any renderer extensions\n            if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n                const genericToken = token;\n                const ret = this.options.extensions.renderers[genericToken.type].call({ parser: this }, genericToken);\n                if (ret !== false || !['space', 'hr', 'heading', 'code', 'table', 'blockquote', 'list', 'html', 'paragraph', 'text'].includes(genericToken.type)) {\n                    out += ret || '';\n                    continue;\n                }\n            }\n            switch (token.type) {\n                case 'space': {\n                    continue;\n                }\n                case 'hr': {\n                    out += this.renderer.hr();\n                    continue;\n                }\n                case 'heading': {\n                    const headingToken = token;\n                    out += this.renderer.heading(this.parseInline(headingToken.tokens), headingToken.depth, unescape(this.parseInline(headingToken.tokens, this.textRenderer)));\n                    continue;\n                }\n                case 'code': {\n                    const codeToken = token;\n                    out += this.renderer.code(codeToken.text, codeToken.lang, !!codeToken.escaped);\n                    continue;\n                }\n                case 'table': {\n                    const tableToken = token;\n                    let header = '';\n                    // header\n                    let cell = '';\n                    for (let j = 0; j < tableToken.header.length; j++) {\n                        cell += this.renderer.tablecell(this.parseInline(tableToken.header[j].tokens), { header: true, align: tableToken.align[j] });\n                    }\n                    header += this.renderer.tablerow(cell);\n                    let body = '';\n                    for (let j = 0; j < tableToken.rows.length; j++) {\n                        const row = tableToken.rows[j];\n                        cell = '';\n                        for (let k = 0; k < row.length; k++) {\n                            cell += this.renderer.tablecell(this.parseInline(row[k].tokens), { header: false, align: tableToken.align[k] });\n                        }\n                        body += this.renderer.tablerow(cell);\n                    }\n                    out += this.renderer.table(header, body);\n                    continue;\n                }\n                case 'blockquote': {\n                    const blockquoteToken = token;\n                    const body = this.parse(blockquoteToken.tokens);\n                    out += this.renderer.blockquote(body);\n                    continue;\n                }\n                case 'list': {\n                    const listToken = token;\n                    const ordered = listToken.ordered;\n                    const start = listToken.start;\n                    const loose = listToken.loose;\n                    let body = '';\n                    for (let j = 0; j < listToken.items.length; j++) {\n                        const item = listToken.items[j];\n                        const checked = item.checked;\n                        const task = item.task;\n                        let itemBody = '';\n                        if (item.task) {\n                            const checkbox = this.renderer.checkbox(!!checked);\n                            if (loose) {\n                                if (item.tokens.length > 0 && item.tokens[0].type === 'paragraph') {\n                                    item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n                                    if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                                        item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\n                                    }\n                                }\n                                else {\n                                    item.tokens.unshift({\n                                        type: 'text',\n                                        text: checkbox + ' '\n                                    });\n                                }\n                            }\n                            else {\n                                itemBody += checkbox + ' ';\n                            }\n                        }\n                        itemBody += this.parse(item.tokens, loose);\n                        body += this.renderer.listitem(itemBody, task, !!checked);\n                    }\n                    out += this.renderer.list(body, ordered, start);\n                    continue;\n                }\n                case 'html': {\n                    const htmlToken = token;\n                    out += this.renderer.html(htmlToken.text, htmlToken.block);\n                    continue;\n                }\n                case 'paragraph': {\n                    const paragraphToken = token;\n                    out += this.renderer.paragraph(this.parseInline(paragraphToken.tokens));\n                    continue;\n                }\n                case 'text': {\n                    let textToken = token;\n                    let body = textToken.tokens ? this.parseInline(textToken.tokens) : textToken.text;\n                    while (i + 1 < tokens.length && tokens[i + 1].type === 'text') {\n                        textToken = tokens[++i];\n                        body += '\\n' + (textToken.tokens ? this.parseInline(textToken.tokens) : textToken.text);\n                    }\n                    out += top ? this.renderer.paragraph(body) : body;\n                    continue;\n                }\n                default: {\n                    const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n                    if (this.options.silent) {\n                        console.error(errMsg);\n                        return '';\n                    }\n                    else {\n                        throw new Error(errMsg);\n                    }\n                }\n            }\n        }\n        return out;\n    }\n    /**\n     * Parse Inline Tokens\n     */\n    parseInline(tokens, renderer) {\n        renderer = renderer || this.renderer;\n        let out = '';\n        for (let i = 0; i < tokens.length; i++) {\n            const token = tokens[i];\n            // Run any renderer extensions\n            if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n                const ret = this.options.extensions.renderers[token.type].call({ parser: this }, token);\n                if (ret !== false || !['escape', 'html', 'link', 'image', 'strong', 'em', 'codespan', 'br', 'del', 'text'].includes(token.type)) {\n                    out += ret || '';\n                    continue;\n                }\n            }\n            switch (token.type) {\n                case 'escape': {\n                    const escapeToken = token;\n                    out += renderer.text(escapeToken.text);\n                    break;\n                }\n                case 'html': {\n                    const tagToken = token;\n                    out += renderer.html(tagToken.text);\n                    break;\n                }\n                case 'link': {\n                    const linkToken = token;\n                    out += renderer.link(linkToken.href, linkToken.title, this.parseInline(linkToken.tokens, renderer));\n                    break;\n                }\n                case 'image': {\n                    const imageToken = token;\n                    out += renderer.image(imageToken.href, imageToken.title, imageToken.text);\n                    break;\n                }\n                case 'strong': {\n                    const strongToken = token;\n                    out += renderer.strong(this.parseInline(strongToken.tokens, renderer));\n                    break;\n                }\n                case 'em': {\n                    const emToken = token;\n                    out += renderer.em(this.parseInline(emToken.tokens, renderer));\n                    break;\n                }\n                case 'codespan': {\n                    const codespanToken = token;\n                    out += renderer.codespan(codespanToken.text);\n                    break;\n                }\n                case 'br': {\n                    out += renderer.br();\n                    break;\n                }\n                case 'del': {\n                    const delToken = token;\n                    out += renderer.del(this.parseInline(delToken.tokens, renderer));\n                    break;\n                }\n                case 'text': {\n                    const textToken = token;\n                    out += renderer.text(textToken.text);\n                    break;\n                }\n                default: {\n                    const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n                    if (this.options.silent) {\n                        console.error(errMsg);\n                        return '';\n                    }\n                    else {\n                        throw new Error(errMsg);\n                    }\n                }\n            }\n        }\n        return out;\n    }\n}\n\nclass _Hooks {\n    options;\n    constructor(options) {\n        this.options = options || _defaults;\n    }\n    static passThroughHooks = new Set([\n        'preprocess',\n        'postprocess'\n    ]);\n    /**\n     * Process markdown before marked\n     */\n    preprocess(markdown) {\n        return markdown;\n    }\n    /**\n     * Process HTML after marked is finished\n     */\n    postprocess(html) {\n        return html;\n    }\n}\n\nclass Marked {\n    defaults = _getDefaults();\n    options = this.setOptions;\n    parse = this.#parseMarkdown(_Lexer.lex, _Parser.parse);\n    parseInline = this.#parseMarkdown(_Lexer.lexInline, _Parser.parseInline);\n    Parser = _Parser;\n    Renderer = _Renderer;\n    TextRenderer = _TextRenderer;\n    Lexer = _Lexer;\n    Tokenizer = _Tokenizer;\n    Hooks = _Hooks;\n    constructor(...args) {\n        this.use(...args);\n    }\n    /**\n     * Run callback for every token\n     */\n    walkTokens(tokens, callback) {\n        let values = [];\n        for (const token of tokens) {\n            values = values.concat(callback.call(this, token));\n            switch (token.type) {\n                case 'table': {\n                    const tableToken = token;\n                    for (const cell of tableToken.header) {\n                        values = values.concat(this.walkTokens(cell.tokens, callback));\n                    }\n                    for (const row of tableToken.rows) {\n                        for (const cell of row) {\n                            values = values.concat(this.walkTokens(cell.tokens, callback));\n                        }\n                    }\n                    break;\n                }\n                case 'list': {\n                    const listToken = token;\n                    values = values.concat(this.walkTokens(listToken.items, callback));\n                    break;\n                }\n                default: {\n                    const genericToken = token;\n                    if (this.defaults.extensions?.childTokens?.[genericToken.type]) {\n                        this.defaults.extensions.childTokens[genericToken.type].forEach((childTokens) => {\n                            values = values.concat(this.walkTokens(genericToken[childTokens], callback));\n                        });\n                    }\n                    else if (genericToken.tokens) {\n                        values = values.concat(this.walkTokens(genericToken.tokens, callback));\n                    }\n                }\n            }\n        }\n        return values;\n    }\n    use(...args) {\n        const extensions = this.defaults.extensions || { renderers: {}, childTokens: {} };\n        args.forEach((pack) => {\n            // copy options to new object\n            const opts = { ...pack };\n            // set async to true if it was set to true before\n            opts.async = this.defaults.async || opts.async || false;\n            // ==-- Parse \"addon\" extensions --== //\n            if (pack.extensions) {\n                pack.extensions.forEach((ext) => {\n                    if (!ext.name) {\n                        throw new Error('extension name required');\n                    }\n                    if ('renderer' in ext) { // Renderer extensions\n                        const prevRenderer = extensions.renderers[ext.name];\n                        if (prevRenderer) {\n                            // Replace extension with func to run new extension but fall back if false\n                            extensions.renderers[ext.name] = function (...args) {\n                                let ret = ext.renderer.apply(this, args);\n                                if (ret === false) {\n                                    ret = prevRenderer.apply(this, args);\n                                }\n                                return ret;\n                            };\n                        }\n                        else {\n                            extensions.renderers[ext.name] = ext.renderer;\n                        }\n                    }\n                    if ('tokenizer' in ext) { // Tokenizer Extensions\n                        if (!ext.level || (ext.level !== 'block' && ext.level !== 'inline')) {\n                            throw new Error(\"extension level must be 'block' or 'inline'\");\n                        }\n                        const extLevel = extensions[ext.level];\n                        if (extLevel) {\n                            extLevel.unshift(ext.tokenizer);\n                        }\n                        else {\n                            extensions[ext.level] = [ext.tokenizer];\n                        }\n                        if (ext.start) { // Function to check for start of token\n                            if (ext.level === 'block') {\n                                if (extensions.startBlock) {\n                                    extensions.startBlock.push(ext.start);\n                                }\n                                else {\n                                    extensions.startBlock = [ext.start];\n                                }\n                            }\n                            else if (ext.level === 'inline') {\n                                if (extensions.startInline) {\n                                    extensions.startInline.push(ext.start);\n                                }\n                                else {\n                                    extensions.startInline = [ext.start];\n                                }\n                            }\n                        }\n                    }\n                    if ('childTokens' in ext && ext.childTokens) { // Child tokens to be visited by walkTokens\n                        extensions.childTokens[ext.name] = ext.childTokens;\n                    }\n                });\n                opts.extensions = extensions;\n            }\n            // ==-- Parse \"overwrite\" extensions --== //\n            if (pack.renderer) {\n                const renderer = this.defaults.renderer || new _Renderer(this.defaults);\n                for (const prop in pack.renderer) {\n                    const rendererFunc = pack.renderer[prop];\n                    const rendererKey = prop;\n                    const prevRenderer = renderer[rendererKey];\n                    // Replace renderer with func to run extension, but fall back if false\n                    renderer[rendererKey] = (...args) => {\n                        let ret = rendererFunc.apply(renderer, args);\n                        if (ret === false) {\n                            ret = prevRenderer.apply(renderer, args);\n                        }\n                        return ret || '';\n                    };\n                }\n                opts.renderer = renderer;\n            }\n            if (pack.tokenizer) {\n                const tokenizer = this.defaults.tokenizer || new _Tokenizer(this.defaults);\n                for (const prop in pack.tokenizer) {\n                    const tokenizerFunc = pack.tokenizer[prop];\n                    const tokenizerKey = prop;\n                    const prevTokenizer = tokenizer[tokenizerKey];\n                    // Replace tokenizer with func to run extension, but fall back if false\n                    tokenizer[tokenizerKey] = (...args) => {\n                        let ret = tokenizerFunc.apply(tokenizer, args);\n                        if (ret === false) {\n                            ret = prevTokenizer.apply(tokenizer, args);\n                        }\n                        return ret;\n                    };\n                }\n                opts.tokenizer = tokenizer;\n            }\n            // ==-- Parse Hooks extensions --== //\n            if (pack.hooks) {\n                const hooks = this.defaults.hooks || new _Hooks();\n                for (const prop in pack.hooks) {\n                    const hooksFunc = pack.hooks[prop];\n                    const hooksKey = prop;\n                    const prevHook = hooks[hooksKey];\n                    if (_Hooks.passThroughHooks.has(prop)) {\n                        hooks[hooksKey] = (arg) => {\n                            if (this.defaults.async) {\n                                return Promise.resolve(hooksFunc.call(hooks, arg)).then(ret => {\n                                    return prevHook.call(hooks, ret);\n                                });\n                            }\n                            const ret = hooksFunc.call(hooks, arg);\n                            return prevHook.call(hooks, ret);\n                        };\n                    }\n                    else {\n                        hooks[hooksKey] = (...args) => {\n                            let ret = hooksFunc.apply(hooks, args);\n                            if (ret === false) {\n                                ret = prevHook.apply(hooks, args);\n                            }\n                            return ret;\n                        };\n                    }\n                }\n                opts.hooks = hooks;\n            }\n            // ==-- Parse WalkTokens extensions --== //\n            if (pack.walkTokens) {\n                const walkTokens = this.defaults.walkTokens;\n                const packWalktokens = pack.walkTokens;\n                opts.walkTokens = function (token) {\n                    let values = [];\n                    values.push(packWalktokens.call(this, token));\n                    if (walkTokens) {\n                        values = values.concat(walkTokens.call(this, token));\n                    }\n                    return values;\n                };\n            }\n            this.defaults = { ...this.defaults, ...opts };\n        });\n        return this;\n    }\n    setOptions(opt) {\n        this.defaults = { ...this.defaults, ...opt };\n        return this;\n    }\n    lexer(src, options) {\n        return _Lexer.lex(src, options ?? this.defaults);\n    }\n    parser(tokens, options) {\n        return _Parser.parse(tokens, options ?? this.defaults);\n    }\n    #parseMarkdown(lexer, parser) {\n        return (src, options) => {\n            const origOpt = { ...options };\n            const opt = { ...this.defaults, ...origOpt };\n            // Show warning if an extension set async to true but the parse was called with async: false\n            if (this.defaults.async === true && origOpt.async === false) {\n                if (!opt.silent) {\n                    console.warn('marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored.');\n                }\n                opt.async = true;\n            }\n            const throwError = this.#onError(!!opt.silent, !!opt.async);\n            // throw error in case of non string input\n            if (typeof src === 'undefined' || src === null) {\n                return throwError(new Error('marked(): input parameter is undefined or null'));\n            }\n            if (typeof src !== 'string') {\n                return throwError(new Error('marked(): input parameter is of type '\n                    + Object.prototype.toString.call(src) + ', string expected'));\n            }\n            if (opt.hooks) {\n                opt.hooks.options = opt;\n            }\n            if (opt.async) {\n                return Promise.resolve(opt.hooks ? opt.hooks.preprocess(src) : src)\n                    .then(src => lexer(src, opt))\n                    .then(tokens => opt.walkTokens ? Promise.all(this.walkTokens(tokens, opt.walkTokens)).then(() => tokens) : tokens)\n                    .then(tokens => parser(tokens, opt))\n                    .then(html => opt.hooks ? opt.hooks.postprocess(html) : html)\n                    .catch(throwError);\n            }\n            try {\n                if (opt.hooks) {\n                    src = opt.hooks.preprocess(src);\n                }\n                const tokens = lexer(src, opt);\n                if (opt.walkTokens) {\n                    this.walkTokens(tokens, opt.walkTokens);\n                }\n                let html = parser(tokens, opt);\n                if (opt.hooks) {\n                    html = opt.hooks.postprocess(html);\n                }\n                return html;\n            }\n            catch (e) {\n                return throwError(e);\n            }\n        };\n    }\n    #onError(silent, async) {\n        return (e) => {\n            e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n            if (silent) {\n                const msg = '<p>An error occurred:</p><pre>'\n                    + escape(e.message + '', true)\n                    + '</pre>';\n                if (async) {\n                    return Promise.resolve(msg);\n                }\n                return msg;\n            }\n            if (async) {\n                return Promise.reject(e);\n            }\n            throw e;\n        };\n    }\n}\n\nconst markedInstance = new Marked();\nfunction marked(src, opt) {\n    return markedInstance.parse(src, opt);\n}\n/**\n * Sets the default options.\n *\n * @param options Hash of options\n */\nmarked.options =\n    marked.setOptions = function (options) {\n        markedInstance.setOptions(options);\n        marked.defaults = markedInstance.defaults;\n        changeDefaults(marked.defaults);\n        return marked;\n    };\n/**\n * Gets the original marked default options.\n */\nmarked.getDefaults = _getDefaults;\nmarked.defaults = _defaults;\n/**\n * Use Extension\n */\nmarked.use = function (...args) {\n    markedInstance.use(...args);\n    marked.defaults = markedInstance.defaults;\n    changeDefaults(marked.defaults);\n    return marked;\n};\n/**\n * Run callback for every token\n */\nmarked.walkTokens = function (tokens, callback) {\n    return markedInstance.walkTokens(tokens, callback);\n};\n/**\n * Compiles markdown to HTML without enclosing `p` tag.\n *\n * @param src String of markdown source to be compiled\n * @param options Hash of options\n * @return String of compiled HTML\n */\nmarked.parseInline = markedInstance.parseInline;\n/**\n * Expose\n */\nmarked.Parser = _Parser;\nmarked.parser = _Parser.parse;\nmarked.Renderer = _Renderer;\nmarked.TextRenderer = _TextRenderer;\nmarked.Lexer = _Lexer;\nmarked.lexer = _Lexer.lex;\nmarked.Tokenizer = _Tokenizer;\nmarked.Hooks = _Hooks;\nmarked.parse = marked;\nconst options = marked.options;\nconst setOptions = marked.setOptions;\nconst use = marked.use;\nconst walkTokens = marked.walkTokens;\nconst parseInline = marked.parseInline;\nconst parse = marked;\nconst parser = _Parser.parse;\nconst lexer = _Lexer.lex;\n\nexport { _Hooks as Hooks, _Lexer as Lexer, Marked, _Parser as Parser, _Renderer as Renderer, _TextRenderer as TextRenderer, _Tokenizer as Tokenizer, _defaults as defaults, _getDefaults as getDefaults, lexer, marked, options, parse, parseInline, parser, setOptions, use, walkTokens };\n//# sourceMappingURL=marked.esm.js.map\n","// Helper function to find matching closing tag\nfunction findMatchingClosingTag(src: string, openTag: string, closeTag: string): number {\n\tlet depth = 1;\n\tlet index = openTag.length;\n\twhile (depth > 0 && index < src.length) {\n\t\tif (src.startsWith(openTag, index)) {\n\t\t\tdepth++;\n\t\t} else if (src.startsWith(closeTag, index)) {\n\t\t\tdepth--;\n\t\t}\n\t\tif (depth > 0) {\n\t\t\tindex++;\n\t\t}\n\t}\n\treturn depth === 0 ? index + closeTag.length : -1;\n}\n\n// Function to parse attributes from tag\nfunction parseAttributes(tag: string): { [key: string]: string } {\n\tconst attributes: { [key: string]: string } = {};\n\tconst attrRegex = /(\\w+)=\"(.*?)\"/g;\n\tlet match;\n\twhile ((match = attrRegex.exec(tag)) !== null) {\n\t\tattributes[match[1]] = match[2];\n\t}\n\treturn attributes;\n}\n\nfunction detailsTokenizer(src: string) {\n\t// Updated regex to capture attributes inside <details>\n\tconst detailsRegex = /^<details(\\s+[^>]*)?>\\n/;\n\tconst summaryRegex = /^<summary>(.*?)<\\/summary>\\n/;\n\n\tconst detailsMatch = detailsRegex.exec(src);\n\tif (detailsMatch) {\n\t\tconst endIndex = findMatchingClosingTag(src, '<details', '</details>');\n\t\tif (endIndex === -1) return;\n\n\t\tconst fullMatch = src.slice(0, endIndex);\n\t\tconst detailsTag = detailsMatch[0];\n\t\tconst attributes = parseAttributes(detailsTag); // Parse attributes from <details>\n\n\t\tlet content = fullMatch.slice(detailsTag.length, -10).trim(); // Remove <details> and </details>\n\t\tlet summary = '';\n\n\t\tconst summaryMatch = summaryRegex.exec(content);\n\t\tif (summaryMatch) {\n\t\t\tsummary = summaryMatch[1].trim();\n\t\t\tcontent = content.slice(summaryMatch[0].length).trim();\n\t\t}\n\n\t\treturn {\n\t\t\ttype: 'details',\n\t\t\traw: fullMatch,\n\t\t\tsummary: summary,\n\t\t\ttext: content,\n\t\t\tattributes: attributes // Include extracted attributes from <details>\n\t\t};\n\t}\n}\n\nfunction detailsStart(src: string) {\n\treturn src.match(/^<details>/) ? 0 : -1;\n}\n\nfunction detailsRenderer(token: any) {\n\tconst attributesString = token.attributes\n\t\t? Object.entries(token.attributes)\n\t\t\t\t.map(([key, value]) => `${key}=\"${value}\"`)\n\t\t\t\t.join(' ')\n\t\t: '';\n\n\treturn `<details ${attributesString}>\n  ${token.summary ? `<summary>${token.summary}</summary>` : ''}\n  ${token.text}\n  </details>`;\n}\n\n// Extension wrapper function\nfunction detailsExtension() {\n\treturn {\n\t\tname: 'details',\n\t\tlevel: 'block',\n\t\tstart: detailsStart,\n\t\ttokenizer: detailsTokenizer,\n\t\trenderer: detailsRenderer\n\t};\n}\n\nexport default function (options = {}) {\n\treturn {\n\t\textensions: [detailsExtension(options)]\n\t};\n}\n","const DELIMITER_LIST = [\n\t{ left: '$$', right: '$$', display: true },\n\t{ left: '$', right: '$', display: false },\n\t{ left: '\\\\pu{', right: '}', display: false },\n\t{ left: '\\\\ce{', right: '}', display: false },\n\t{ left: '\\\\(', right: '\\\\)', display: false },\n\t{ left: '\\\\[', right: '\\\\]', display: true },\n\t{ left: '\\\\begin{equation}', right: '\\\\end{equation}', display: true }\n];\n\n// Defines characters that are allowed to immediately precede or follow a math delimiter.\nconst ALLOWED_SURROUNDING_CHARS =\n\t'\\\\s;:?!-\\\\/:-@\\\\[-`{-~\\\\p{Script=Han}\\\\p{Script=Hiragana}\\\\p{Script=Katakana}\\\\p{Script=Hangul}';\n// Modified to fit more formats in different languages. Originally: '\\\\s?!-\\\\/:-@\\\\[-`{-~\\\\p{Script=Han}\\\\p{Script=Hiragana}\\\\p{Script=Katakana}\\\\p{Script=Hangul}';\n\n// const DELIMITER_LIST = [\n//     { left: '$$', right: '$$', display: false },\n//     { left: '$', right: '$', display: false },\n// ];\n\n// const inlineRule = /^(\\${1,2})(?!\\$)((?:\\\\.|[^\\\\\\n])*?(?:\\\\.|[^\\\\\\n\\$]))\\1(?=[\\s?!\\.,:]|$)/;\n// const blockRule = /^(\\${1,2})\\n((?:\\\\[^]|[^\\\\])+?)\\n\\1(?:\\n|$)/;\n\nconst inlinePatterns = [];\nconst blockPatterns = [];\n\nfunction escapeRegex(string) {\n\treturn string.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n}\n\nfunction generateRegexRules(delimiters) {\n\tdelimiters.forEach((delimiter) => {\n\t\tconst { left, right, display } = delimiter;\n\t\t// Ensure regex-safe delimiters\n\t\tconst escapedLeft = escapeRegex(left);\n\t\tconst escapedRight = escapeRegex(right);\n\n\t\tif (!display) {\n\t\t\t// For inline delimiters, we match everything\n\t\t\tinlinePatterns.push(`${escapedLeft}((?:\\\\\\\\[^]|[^\\\\\\\\])+?)${escapedRight}`);\n\t\t} else {\n\t\t\t// Block delimiters doubles as inline delimiters when not followed by a newline\n\t\t\tinlinePatterns.push(`${escapedLeft}(?!\\\\n)((?:\\\\\\\\[^]|[^\\\\\\\\])+?)(?!\\\\n)${escapedRight}`);\n\t\t\tblockPatterns.push(`${escapedLeft}\\\\n((?:\\\\\\\\[^]|[^\\\\\\\\])+?)\\\\n${escapedRight}`);\n\t\t}\n\t});\n\n\t// Math formulas can end in special characters\n\tconst inlineRule = new RegExp(\n\t\t`^(${inlinePatterns.join('|')})(?=[${ALLOWED_SURROUNDING_CHARS}]|$)`,\n\t\t'u'\n\t);\n\tconst blockRule = new RegExp(\n\t\t`^(${blockPatterns.join('|')})(?=[${ALLOWED_SURROUNDING_CHARS}]|$)`,\n\t\t'u'\n\t);\n\n\treturn { inlineRule, blockRule };\n}\n\nconst { inlineRule, blockRule } = generateRegexRules(DELIMITER_LIST);\n\nexport default function (options = {}) {\n\treturn {\n\t\textensions: [inlineKatex(options), blockKatex(options)]\n\t};\n}\n\nfunction katexStart(src, displayMode: boolean) {\n\tconst ruleReg = displayMode ? blockRule : inlineRule;\n\n\tlet indexSrc = src;\n\n\twhile (indexSrc) {\n\t\tlet index = -1;\n\t\tlet startIndex = -1;\n\t\tlet startDelimiter = '';\n\t\tlet endDelimiter = '';\n\t\tfor (const delimiter of DELIMITER_LIST) {\n\t\t\tif (delimiter.display !== displayMode) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tstartIndex = indexSrc.indexOf(delimiter.left);\n\t\t\tif (startIndex === -1) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tindex = startIndex;\n\t\t\tstartDelimiter = delimiter.left;\n\t\t\tendDelimiter = delimiter.right;\n\t\t}\n\n\t\tif (index === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if the delimiter is preceded by a special character.\n\t\t// If it does, then it's potentially a math formula.\n\t\tconst f =\n\t\t\tindex === 0 ||\n\t\t\tindexSrc.charAt(index - 1).match(new RegExp(`[${ALLOWED_SURROUNDING_CHARS}]`, 'u'));\n\t\tif (f) {\n\t\t\tconst possibleKatex = indexSrc.substring(index);\n\n\t\t\tif (possibleKatex.match(ruleReg)) {\n\t\t\t\treturn index;\n\t\t\t}\n\t\t}\n\n\t\tindexSrc = indexSrc.substring(index + startDelimiter.length).replace(endDelimiter, '');\n\t}\n}\n\nfunction katexTokenizer(src, tokens, displayMode: boolean) {\n\tconst ruleReg = displayMode ? blockRule : inlineRule;\n\tconst type = displayMode ? 'blockKatex' : 'inlineKatex';\n\n\tconst match = src.match(ruleReg);\n\n\tif (match) {\n\t\tconst text = match\n\t\t\t.slice(2)\n\t\t\t.filter((item) => item)\n\t\t\t.find((item) => item.trim());\n\n\t\treturn {\n\t\t\ttype,\n\t\t\traw: match[0],\n\t\t\ttext: text,\n\t\t\tdisplayMode\n\t\t};\n\t}\n}\n\nfunction inlineKatex(options) {\n\treturn {\n\t\tname: 'inlineKatex',\n\t\tlevel: 'inline',\n\t\tstart(src) {\n\t\t\treturn katexStart(src, false);\n\t\t},\n\t\ttokenizer(src, tokens) {\n\t\t\treturn katexTokenizer(src, tokens, false);\n\t\t},\n\t\trenderer(token) {\n\t\t\treturn `${token?.text ?? ''}`;\n\t\t}\n\t};\n}\n\nfunction blockKatex(options) {\n\treturn {\n\t\tname: 'blockKatex',\n\t\tlevel: 'block',\n\t\tstart(src) {\n\t\t\treturn katexStart(src, true);\n\t\t},\n\t\ttokenizer(src, tokens) {\n\t\t\treturn katexTokenizer(src, tokens, true);\n\t\t},\n\t\trenderer(token) {\n\t\t\treturn `${token?.text ?? ''}`;\n\t\t}\n\t};\n}\n","import { v4 as uuidv4 } from 'uuid';\nimport sha256 from 'js-sha256';\nimport { WEBUI_BASE_URL } from '$lib/constants';\n\nimport dayjs from 'dayjs';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport isToday from 'dayjs/plugin/isToday';\nimport isYesterday from 'dayjs/plugin/isYesterday';\nimport localizedFormat from 'dayjs/plugin/localizedFormat';\n\ndayjs.extend(relativeTime);\ndayjs.extend(isToday);\ndayjs.extend(isYesterday);\ndayjs.extend(localizedFormat);\n\nimport { TTS_RESPONSE_SPLIT } from '$lib/types';\n\nimport pdfWorkerUrl from 'pdfjs-dist/build/pdf.worker.mjs?url';\n\nimport { marked } from 'marked';\nimport markedExtension from '$lib/utils/marked/extension';\nimport markedKatexExtension from '$lib/utils/marked/katex-extension';\nimport hljs from 'highlight.js';\n\n//////////////////////////\n// Helper functions\n//////////////////////////\n\nexport const sleep = (ms: number) => new Promise((resolve) => setTimeout(resolve, ms));\n\nfunction escapeRegExp(string: string): string {\n\treturn string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\nexport const replaceTokens = (content, char, user) => {\n\tconst tokens = [\n\t\t{ regex: /{{char}}/gi, replacement: char },\n\t\t{ regex: /{{user}}/gi, replacement: user },\n\t\t{\n\t\t\tregex: /{{VIDEO_FILE_ID_([a-f0-9-]+)}}/gi,\n\t\t\treplacement: (_, fileId) =>\n\t\t\t\t`<video src=\"${WEBUI_BASE_URL}/api/v1/files/${fileId}/content\" controls></video>`\n\t\t},\n\t\t{\n\t\t\tregex: /{{HTML_FILE_ID_([a-f0-9-]+)}}/gi,\n\t\t\treplacement: (_, fileId) => `<file type=\"html\" id=\"${fileId}\" />`\n\t\t}\n\t];\n\n\t// Replace tokens outside code blocks only\n\tconst processOutsideCodeBlocks = (text, replacementFn) => {\n\t\treturn text\n\t\t\t.split(/(```[\\s\\S]*?```|`[\\s\\S]*?`)/)\n\t\t\t.map((segment) => {\n\t\t\t\treturn segment.startsWith('```') || segment.startsWith('`')\n\t\t\t\t\t? segment\n\t\t\t\t\t: replacementFn(segment);\n\t\t\t})\n\t\t\t.join('');\n\t};\n\n\t// Apply replacements\n\tcontent = processOutsideCodeBlocks(content, (segment) => {\n\t\ttokens.forEach(({ regex, replacement }) => {\n\t\t\tif (replacement !== undefined && replacement !== null) {\n\t\t\t\tsegment = segment.replace(regex, replacement);\n\t\t\t}\n\t\t});\n\n\t\treturn segment;\n\t});\n\n\treturn content;\n};\n\nexport const sanitizeResponseContent = (content: string) => {\n\treturn content\n\t\t.replace(/<\\|[a-z]*$/, '')\n\t\t.replace(/<\\|[a-z]+\\|$/, '')\n\t\t.replace(/<$/, '')\n\t\t.replaceAll('<', '&lt;')\n\t\t.replaceAll('>', '&gt;')\n\t\t.replaceAll(/<\\|[a-z]+\\|>/g, ' ')\n\t\t.trim();\n};\n\nexport const processResponseContent = (content: string) => {\n\tcontent = processChineseContent(content);\n\treturn content.trim();\n};\n\nfunction isChineseChar(char: string): boolean {\n\treturn /\\p{Script=Han}/u.test(char);\n}\n\n// Tackle \"Model output issue not following the standard Markdown/LaTeX format\" in Chinese.\nfunction processChineseContent(content: string): string {\n\t// This function is used to process the response content before the response content is rendered.\n\tconst lines = content.split('\\n');\n\tconst processedLines = lines.map((line) => {\n\t\tif (/[\\u4e00-\\u9fa5]/.test(line)) {\n\t\t\t// Problems caused by Chinese parentheses\n\t\t\t/* Discription:\n\t\t\t *   When `*` has Chinese delimiters on the inside, markdown parser ignore bold or italic style.\n\t\t\t *   - e.g. `**English**` will be parsed directly,\n\t\t\t *          instead of `<strong>English</strong>`.\n\t\t\t * Solution:\n\t\t\t *   Adding a `space` before and after the bold/italic part can solve the problem.\n\t\t\t *   - e.g. `**English**` -> ` **English** `\n\t\t\t * Note:\n\t\t\t *   Similar problem was found with English parentheses and other full delimiters,\n\t\t\t *   but they are not handled here because they are less likely to appear in LLM output.\n\t\t\t *   Change the behavior in future if needed.\n\t\t\t */\n\t\t\tif (line.includes('*')) {\n\t\t\t\t// Handle **bold** and *italic*\n\t\t\t\t// 1. With Chinese parentheses\n\t\t\t\tif (/|/.test(line)) {\n\t\t\t\t\tline = processChineseDelimiters(line, '**', '', '');\n\t\t\t\t\tline = processChineseDelimiters(line, '*', '', '');\n\t\t\t\t}\n\t\t\t\t// 2. With Chinese quotations\n\t\t\t\tif (/|/.test(line)) {\n\t\t\t\t\tline = processChineseDelimiters(line, '**', '', '');\n\t\t\t\t\tline = processChineseDelimiters(line, '*', '', '');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn line;\n\t});\n\tcontent = processedLines.join('\\n');\n\n\treturn content;\n}\n\n// Helper function for `processChineseContent`\nfunction processChineseDelimiters(\n\tline: string,\n\tsymbol: string,\n\tleftSymbol: string,\n\trightSymbol: string\n): string {\n\t// NOTE: If needed, with a little modification, this function can be applied to more cases.\n\tconst escapedSymbol = escapeRegExp(symbol);\n\tconst regex = new RegExp(\n\t\t`(.?)(?<!${escapedSymbol})(${escapedSymbol})([^${escapedSymbol}]+)(${escapedSymbol})(?!${escapedSymbol})(.)`,\n\t\t'g'\n\t);\n\treturn line.replace(regex, (match, l, left, content, right, r) => {\n\t\tconst result =\n\t\t\t(content.startsWith(leftSymbol) && l && l.length > 0 && isChineseChar(l[l.length - 1])) ||\n\t\t\t(content.endsWith(rightSymbol) && r && r.length > 0 && isChineseChar(r[0]));\n\n\t\tif (result) {\n\t\t\treturn `${l} ${left}${content}${right} ${r}`;\n\t\t} else {\n\t\t\treturn match;\n\t\t}\n\t});\n}\n\nexport function unescapeHtml(html: string) {\n\tconst doc = new DOMParser().parseFromString(html, 'text/html');\n\treturn doc.documentElement.textContent;\n}\n\nexport const capitalizeFirstLetter = (string) => {\n\treturn string.charAt(0).toUpperCase() + string.slice(1);\n};\n\nexport const splitStream = (splitOn) => {\n\tlet buffer = '';\n\treturn new TransformStream({\n\t\ttransform(chunk, controller) {\n\t\t\tbuffer += chunk;\n\t\t\tconst parts = buffer.split(splitOn);\n\t\t\tparts.slice(0, -1).forEach((part) => controller.enqueue(part));\n\t\t\tbuffer = parts[parts.length - 1];\n\t\t},\n\t\tflush(controller) {\n\t\t\tif (buffer) controller.enqueue(buffer);\n\t\t}\n\t});\n};\n\nexport const convertMessagesToHistory = (messages) => {\n\tconst history = {\n\t\tmessages: {},\n\t\tcurrentId: null\n\t};\n\n\tlet parentMessageId = null;\n\tlet messageId = null;\n\n\tfor (const message of messages) {\n\t\tmessageId = uuidv4();\n\n\t\tif (parentMessageId !== null) {\n\t\t\thistory.messages[parentMessageId].childrenIds = [\n\t\t\t\t...history.messages[parentMessageId].childrenIds,\n\t\t\t\tmessageId\n\t\t\t];\n\t\t}\n\n\t\thistory.messages[messageId] = {\n\t\t\t...message,\n\t\t\tid: messageId,\n\t\t\tparentId: parentMessageId,\n\t\t\tchildrenIds: []\n\t\t};\n\n\t\tparentMessageId = messageId;\n\t}\n\n\thistory.currentId = messageId;\n\treturn history;\n};\n\nexport const getGravatarURL = (email) => {\n\t// Trim leading and trailing whitespace from\n\t// an email address and force all characters\n\t// to lower case\n\tconst address = String(email).trim().toLowerCase();\n\n\t// Create a SHA256 hash of the final string\n\tconst hash = sha256(address);\n\n\t// Grab the actual image URL\n\treturn `https://www.gravatar.com/avatar/${hash}`;\n};\n\nexport const canvasPixelTest = () => {\n\t// Test a 1x1 pixel to potentially identify browser/plugin fingerprint blocking or spoofing\n\t// Inspiration: https://github.com/kkapsner/CanvasBlocker/blob/master/test/detectionTest.js\n\tconst canvas = document.createElement('canvas');\n\tconst ctx = canvas.getContext('2d');\n\tcanvas.height = 1;\n\tcanvas.width = 1;\n\tconst imageData = new ImageData(canvas.width, canvas.height);\n\tconst pixelValues = imageData.data;\n\n\t// Generate RGB test data\n\tfor (let i = 0; i < imageData.data.length; i += 1) {\n\t\tif (i % 4 !== 3) {\n\t\t\tpixelValues[i] = Math.floor(256 * Math.random());\n\t\t} else {\n\t\t\tpixelValues[i] = 255;\n\t\t}\n\t}\n\n\tctx.putImageData(imageData, 0, 0);\n\tconst p = ctx.getImageData(0, 0, canvas.width, canvas.height).data;\n\n\t// Read RGB data and fail if unmatched\n\tfor (let i = 0; i < p.length; i += 1) {\n\t\tif (p[i] !== pixelValues[i]) {\n\t\t\tconsole.log(\n\t\t\t\t'canvasPixelTest: Wrong canvas pixel RGB value detected:',\n\t\t\t\tp[i],\n\t\t\t\t'at:',\n\t\t\t\ti,\n\t\t\t\t'expected:',\n\t\t\t\tpixelValues[i]\n\t\t\t);\n\t\t\tconsole.log('canvasPixelTest: Canvas blocking or spoofing is likely');\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n};\n\nexport const compressImage = async (imageUrl, maxWidth, maxHeight) => {\n\treturn new Promise((resolve, reject) => {\n\t\tconst img = new Image();\n\t\timg.onload = () => {\n\t\t\tconst canvas = document.createElement('canvas');\n\t\t\tlet width = img.width;\n\t\t\tlet height = img.height;\n\n\t\t\t// Maintain aspect ratio while resizing\n\n\t\t\tif (maxWidth && maxHeight) {\n\t\t\t\t// Resize with both dimensions defined (preserves aspect ratio)\n\n\t\t\t\tif (width <= maxWidth && height <= maxHeight) {\n\t\t\t\t\tresolve(imageUrl);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (width / height > maxWidth / maxHeight) {\n\t\t\t\t\theight = Math.round((maxWidth * height) / width);\n\t\t\t\t\twidth = maxWidth;\n\t\t\t\t} else {\n\t\t\t\t\twidth = Math.round((maxHeight * width) / height);\n\t\t\t\t\theight = maxHeight;\n\t\t\t\t}\n\t\t\t} else if (maxWidth) {\n\t\t\t\t// Only maxWidth defined\n\n\t\t\t\tif (width <= maxWidth) {\n\t\t\t\t\tresolve(imageUrl);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\theight = Math.round((maxWidth * height) / width);\n\t\t\t\twidth = maxWidth;\n\t\t\t} else if (maxHeight) {\n\t\t\t\t// Only maxHeight defined\n\n\t\t\t\tif (height <= maxHeight) {\n\t\t\t\t\tresolve(imageUrl);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\twidth = Math.round((maxHeight * width) / height);\n\t\t\t\theight = maxHeight;\n\t\t\t}\n\n\t\t\tcanvas.width = width;\n\t\t\tcanvas.height = height;\n\n\t\t\tconst context = canvas.getContext('2d');\n\t\t\tcontext.drawImage(img, 0, 0, width, height);\n\n\t\t\t// Get compressed image URL\n\t\t\tconst mimeType = imageUrl.match(/^data:([^;]+);/)?.[1];\n\t\t\tconst compressedUrl = canvas.toDataURL(mimeType);\n\t\t\tresolve(compressedUrl);\n\t\t};\n\t\timg.onerror = (error) => reject(error);\n\t\timg.src = imageUrl;\n\t});\n};\nexport const generateInitialsImage = (name) => {\n\tconst canvas = document.createElement('canvas');\n\tconst ctx = canvas.getContext('2d');\n\tcanvas.width = 100;\n\tcanvas.height = 100;\n\n\tif (!canvasPixelTest()) {\n\t\tconsole.log(\n\t\t\t'generateInitialsImage: failed pixel test, fingerprint evasion is likely. Using default image.'\n\t\t);\n\t\treturn `${WEBUI_BASE_URL}/user.png`;\n\t}\n\n\tctx.fillStyle = '#F39C12';\n\tctx.fillRect(0, 0, canvas.width, canvas.height);\n\n\tctx.fillStyle = '#FFFFFF';\n\tctx.font = '40px Helvetica';\n\tctx.textAlign = 'center';\n\tctx.textBaseline = 'middle';\n\n\tconst sanitizedName = name.trim();\n\tconst initials =\n\t\tsanitizedName.length > 0\n\t\t\t? sanitizedName[0] +\n\t\t\t\t(sanitizedName.split(' ').length > 1\n\t\t\t\t\t? sanitizedName[sanitizedName.lastIndexOf(' ') + 1]\n\t\t\t\t\t: '')\n\t\t\t: '';\n\n\tctx.fillText(initials.toUpperCase(), canvas.width / 2, canvas.height / 2);\n\n\treturn canvas.toDataURL();\n};\n\nexport const formatDate = (inputDate) => {\n\tconst date = dayjs(inputDate);\n\n\tif (date.isToday()) {\n\t\treturn `Today at {{LOCALIZED_TIME}}`;\n\t} else if (date.isYesterday()) {\n\t\treturn `Yesterday at {{LOCALIZED_TIME}}`;\n\t} else {\n\t\treturn `{{LOCALIZED_DATE}} at {{LOCALIZED_TIME}}`;\n\t}\n};\n\nexport const copyToClipboard = async (text, html = null, formatted = false) => {\n\tif (formatted) {\n\t\tlet styledHtml = '';\n\t\tif (!html) {\n\t\t\tconst options = {\n\t\t\t\tthrowOnError: false,\n\t\t\t\thighlight: function (code, lang) {\n\t\t\t\t\tconst language = hljs.getLanguage(lang) ? lang : 'plaintext';\n\t\t\t\t\treturn hljs.highlight(code, { language }).value;\n\t\t\t\t}\n\t\t\t};\n\t\t\tmarked.use(markedKatexExtension(options));\n\t\t\tmarked.use(markedExtension(options));\n\t\t\t// DEVELOPER NOTE: Go to `$lib/components/chat/Messages/Markdown.svelte` to add extra markdown extensions for rendering.\n\n\t\t\tconst htmlContent = marked.parse(text);\n\n\t\t\t// Add basic styling to make the content look better when pasted\n\t\t\tstyledHtml = `\n\t\t\t<div>\n\t\t\t\t<style>\n\t\t\t\t\tpre {\n\t\t\t\t\t\tbackground-color: #f6f8fa;\n\t\t\t\t\t\tborder-radius: 6px;\n\t\t\t\t\t\tpadding: 16px;\n\t\t\t\t\t\toverflow: auto;\n\t\t\t\t\t}\n\t\t\t\t\tcode {\n\t\t\t\t\t\tfont-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;\n\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t}\n\t\t\t\t\t.hljs-keyword { color: #d73a49; }\n\t\t\t\t\t.hljs-string { color: #032f62; }\n\t\t\t\t\t.hljs-comment { color: #6a737d; }\n\t\t\t\t\t.hljs-function { color: #6f42c1; }\n\t\t\t\t\t.hljs-number { color: #005cc5; }\n\t\t\t\t\t.hljs-operator { color: #d73a49; }\n\t\t\t\t\t.hljs-class { color: #6f42c1; }\n\t\t\t\t\t.hljs-title { color: #6f42c1; }\n\t\t\t\t\t.hljs-params { color: #24292e; }\n\t\t\t\t\t.hljs-built_in { color: #005cc5; }\n\t\t\t\t\tblockquote {\n\t\t\t\t\t\tborder-left: 4px solid #dfe2e5;\n\t\t\t\t\t\tpadding-left: 16px;\n\t\t\t\t\t\tcolor: #6a737d;\n\t\t\t\t\t\tmargin-left: 0;\n\t\t\t\t\t\tmargin-right: 0;\n\t\t\t\t\t}\n\t\t\t\t\ttable {\n\t\t\t\t\t\tborder-collapse: collapse;\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\tmargin-bottom: 16px;\n\t\t\t\t\t}\n\t\t\t\t\ttable, th, td {\n\t\t\t\t\t\tborder: 1px solid #dfe2e5;\n\t\t\t\t\t}\n\t\t\t\t\tth, td {\n\t\t\t\t\t\tpadding: 8px 12px;\n\t\t\t\t\t}\n\t\t\t\t\tth {\n\t\t\t\t\t\tbackground-color: #f6f8fa;\n\t\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t\t${htmlContent}\n\t\t\t</div>\n\t\t`;\n\t\t} else {\n\t\t\t// If HTML is provided, use it directly\n\t\t\tstyledHtml = html;\n\t\t}\n\n\t\t// Create a blob with HTML content\n\t\tconst blob = new Blob([styledHtml], { type: 'text/html' });\n\n\t\ttry {\n\t\t\t// Create a ClipboardItem with HTML content\n\t\t\tconst data = new ClipboardItem({\n\t\t\t\t'text/html': blob,\n\t\t\t\t'text/plain': new Blob([text], { type: 'text/plain' })\n\t\t\t});\n\n\t\t\t// Write to clipboard\n\t\t\tawait navigator.clipboard.write([data]);\n\t\t\treturn true;\n\t\t} catch (err) {\n\t\t\tconsole.error('Error copying formatted content:', err);\n\t\t\t// Fallback to plain text\n\t\t\treturn await copyToClipboard(text);\n\t\t}\n\t} else {\n\t\tlet result = false;\n\t\tif (!navigator.clipboard) {\n\t\t\tconst textArea = document.createElement('textarea');\n\t\t\ttextArea.value = text;\n\n\t\t\t// Avoid scrolling to bottom\n\t\t\ttextArea.style.top = '0';\n\t\t\ttextArea.style.left = '0';\n\t\t\ttextArea.style.position = 'fixed';\n\n\t\t\tdocument.body.appendChild(textArea);\n\t\t\ttextArea.focus();\n\t\t\ttextArea.select();\n\n\t\t\ttry {\n\t\t\t\tconst successful = document.execCommand('copy');\n\t\t\t\tconst msg = successful ? 'successful' : 'unsuccessful';\n\t\t\t\tconsole.log('Fallback: Copying text command was ' + msg);\n\t\t\t\tresult = true;\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('Fallback: Oops, unable to copy', err);\n\t\t\t}\n\n\t\t\tdocument.body.removeChild(textArea);\n\t\t\treturn result;\n\t\t}\n\n\t\tresult = await navigator.clipboard\n\t\t\t.writeText(text)\n\t\t\t.then(() => {\n\t\t\t\tconsole.log('Async: Copying to clipboard was successful!');\n\t\t\t\treturn true;\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error('Async: Could not copy text: ', error);\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\treturn result;\n\t}\n};\n\nexport const compareVersion = (latest, current) => {\n\treturn current === '0.0.0'\n\t\t? false\n\t\t: current.localeCompare(latest, undefined, {\n\t\t\t\tnumeric: true,\n\t\t\t\tsensitivity: 'case',\n\t\t\t\tcaseFirst: 'upper'\n\t\t\t}) < 0;\n};\n\nexport const extractCurlyBraceWords = (text) => {\n\tconst regex = /\\{\\{([^}]+)\\}\\}/g;\n\tconst matches = [];\n\tlet match;\n\n\twhile ((match = regex.exec(text)) !== null) {\n\t\tmatches.push({\n\t\t\tword: match[1].trim(),\n\t\t\tstartIndex: match.index,\n\t\t\tendIndex: regex.lastIndex - 1\n\t\t});\n\t}\n\n\treturn matches;\n};\n\nexport const removeLastWordFromString = (inputString, wordString) => {\n\tconsole.log('inputString', inputString);\n\t// Split the string by newline characters to handle lines separately\n\tconst lines = inputString.split('\\n');\n\n\t// Take the last line to operate only on it\n\tconst lastLine = lines.pop();\n\n\t// Split the last line into an array of words\n\tconst words = lastLine.split(' ');\n\n\t// Conditional to check for the last word removal\n\tif (words.at(-1) === wordString || (wordString === '' && words.at(-1) === '\\\\#')) {\n\t\twords.pop(); // Remove last word if condition is satisfied\n\t}\n\n\t// Join the remaining words back into a string and handle space correctly\n\tlet updatedLastLine = words.join(' ');\n\n\t// Add a trailing space to the updated last line if there are still words\n\tif (updatedLastLine !== '') {\n\t\tupdatedLastLine += ' ';\n\t}\n\n\t// Combine the lines together again, placing the updated last line back in\n\tconst resultString = [...lines, updatedLastLine].join('\\n');\n\n\t// Return the final string\n\tconsole.log('resultString', resultString);\n\n\treturn resultString;\n};\n\nexport const removeFirstHashWord = (inputString) => {\n\t// Split the string into an array of words\n\tconst words = inputString.split(' ');\n\n\t// Find the index of the first word that starts with #\n\tconst index = words.findIndex((word) => word.startsWith('#'));\n\n\t// Remove the first word with #\n\tif (index !== -1) {\n\t\twords.splice(index, 1);\n\t}\n\n\t// Join the remaining words back into a string\n\tconst resultString = words.join(' ');\n\n\treturn resultString;\n};\n\nexport const transformFileName = (fileName) => {\n\t// Convert to lowercase\n\tconst lowerCaseFileName = fileName.toLowerCase();\n\n\t// Remove special characters using regular expression\n\tconst sanitizedFileName = lowerCaseFileName.replace(/[^\\w\\s]/g, '');\n\n\t// Replace spaces with dashes\n\tconst finalFileName = sanitizedFileName.replace(/\\s+/g, '-');\n\n\treturn finalFileName;\n};\n\nexport const calculateSHA256 = async (file) => {\n\t// Create a FileReader to read the file asynchronously\n\tconst reader = new FileReader();\n\n\t// Define a promise to handle the file reading\n\tconst readFile = new Promise((resolve, reject) => {\n\t\treader.onload = () => resolve(reader.result);\n\t\treader.onerror = reject;\n\t});\n\n\t// Read the file as an ArrayBuffer\n\treader.readAsArrayBuffer(file);\n\n\ttry {\n\t\t// Wait for the FileReader to finish reading the file\n\t\tconst buffer = await readFile;\n\n\t\t// Convert the ArrayBuffer to a Uint8Array\n\t\tconst uint8Array = new Uint8Array(buffer);\n\n\t\t// Calculate the SHA-256 hash using Web Crypto API\n\t\tconst hashBuffer = await crypto.subtle.digest('SHA-256', uint8Array);\n\n\t\t// Convert the hash to a hexadecimal string\n\t\tconst hashArray = Array.from(new Uint8Array(hashBuffer));\n\t\tconst hashHex = hashArray.map((byte) => byte.toString(16).padStart(2, '0')).join('');\n\n\t\treturn `${hashHex}`;\n\t} catch (error) {\n\t\tconsole.error('Error calculating SHA-256 hash:', error);\n\t\tthrow error;\n\t}\n};\n\nexport const getImportOrigin = (_chats) => {\n\t// Check what external service chat imports are from\n\tif ('mapping' in _chats[0]) {\n\t\treturn 'openai';\n\t}\n\treturn 'webui';\n};\n\nexport const getUserPosition = async (raw = false) => {\n\t// Get the user's location using the Geolocation API\n\tconst position = await new Promise((resolve, reject) => {\n\t\tnavigator.geolocation.getCurrentPosition(resolve, reject);\n\t}).catch((error) => {\n\t\tconsole.error('Error getting user location:', error);\n\t\tthrow error;\n\t});\n\n\tif (!position) {\n\t\treturn 'Location not available';\n\t}\n\n\t// Extract the latitude and longitude from the position\n\tconst { latitude, longitude } = position.coords;\n\n\tif (raw) {\n\t\treturn { latitude, longitude };\n\t} else {\n\t\treturn `${latitude.toFixed(3)}, ${longitude.toFixed(3)} (lat, long)`;\n\t}\n};\n\nconst convertOpenAIMessages = (convo) => {\n\t// Parse OpenAI chat messages and create chat dictionary for creating new chats\n\tconst mapping = convo['mapping'];\n\tconst messages = [];\n\tlet currentId = '';\n\tlet lastId = null;\n\n\tfor (const message_id in mapping) {\n\t\tconst message = mapping[message_id];\n\t\tcurrentId = message_id;\n\t\ttry {\n\t\t\tif (\n\t\t\t\tmessages.length == 0 &&\n\t\t\t\t(message['message'] == null ||\n\t\t\t\t\t(message['message']['content']['parts']?.[0] == '' &&\n\t\t\t\t\t\tmessage['message']['content']['text'] == null))\n\t\t\t) {\n\t\t\t\t// Skip chat messages with no content\n\t\t\t\tcontinue;\n\t\t\t} else {\n\t\t\t\tconst new_chat = {\n\t\t\t\t\tid: message_id,\n\t\t\t\t\tparentId: lastId,\n\t\t\t\t\tchildrenIds: message['children'] || [],\n\t\t\t\t\trole: message['message']?.['author']?.['role'] !== 'user' ? 'assistant' : 'user',\n\t\t\t\t\tcontent:\n\t\t\t\t\t\tmessage['message']?.['content']?.['parts']?.[0] ||\n\t\t\t\t\t\tmessage['message']?.['content']?.['text'] ||\n\t\t\t\t\t\t'',\n\t\t\t\t\tmodel: 'gpt-3.5-turbo',\n\t\t\t\t\tdone: true,\n\t\t\t\t\tcontext: null\n\t\t\t\t};\n\t\t\t\tmessages.push(new_chat);\n\t\t\t\tlastId = currentId;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.log('Error with', message, '\\nError:', error);\n\t\t}\n\t}\n\n\tconst history: Record<PropertyKey, (typeof messages)[number]> = {};\n\tmessages.forEach((obj) => (history[obj.id] = obj));\n\n\tconst chat = {\n\t\thistory: {\n\t\t\tcurrentId: currentId,\n\t\t\tmessages: history // Need to convert this to not a list and instead a json object\n\t\t},\n\t\tmodels: ['gpt-3.5-turbo'],\n\t\tmessages: messages,\n\t\toptions: {},\n\t\ttimestamp: convo['create_time'],\n\t\ttitle: convo['title'] ?? 'New Chat'\n\t};\n\treturn chat;\n};\n\nconst validateChat = (chat) => {\n\t// Because ChatGPT sometimes has features we can't use like DALL-E or might have corrupted messages, need to validate\n\tconst messages = chat.messages;\n\n\t// Check if messages array is empty\n\tif (messages.length === 0) {\n\t\treturn false;\n\t}\n\n\t// Last message's children should be an empty array\n\tconst lastMessage = messages[messages.length - 1];\n\tif (lastMessage.childrenIds.length !== 0) {\n\t\treturn false;\n\t}\n\n\t// First message's parent should be null\n\tconst firstMessage = messages[0];\n\tif (firstMessage.parentId !== null) {\n\t\treturn false;\n\t}\n\n\t// Every message's content should be a string\n\tfor (const message of messages) {\n\t\tif (typeof message.content !== 'string') {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n};\n\nexport const convertOpenAIChats = (_chats) => {\n\t// Create a list of dictionaries with each conversation from import\n\tconst chats = [];\n\tlet failed = 0;\n\tfor (const convo of _chats) {\n\t\tconst chat = convertOpenAIMessages(convo);\n\n\t\tif (validateChat(chat)) {\n\t\t\tchats.push({\n\t\t\t\tid: convo['id'],\n\t\t\t\tuser_id: '',\n\t\t\t\ttitle: convo['title'],\n\t\t\t\tchat: chat,\n\t\t\t\ttimestamp: convo['create_time']\n\t\t\t});\n\t\t} else {\n\t\t\tfailed++;\n\t\t}\n\t}\n\tconsole.log(failed, 'Conversations could not be imported');\n\treturn chats;\n};\n\nexport const isValidHttpUrl = (string: string) => {\n\tlet url;\n\n\ttry {\n\t\turl = new URL(string);\n\t} catch (_) {\n\t\treturn false;\n\t}\n\n\treturn url.protocol === 'http:' || url.protocol === 'https:';\n};\n\nexport const isYoutubeUrl = (url: string) => {\n\treturn (\n\t\turl.startsWith('https://www.youtube.com') ||\n\t\turl.startsWith('https://youtu.be') ||\n\t\turl.startsWith('https://youtube.com') ||\n\t\turl.startsWith('https://m.youtube.com')\n\t);\n};\n\nexport const removeEmojis = (str: string) => {\n\t// Regular expression to match emojis\n\tconst emojiRegex = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|\\uD83C[\\uDC00-\\uDFFF]|\\uD83D[\\uDC00-\\uDE4F]/g;\n\n\t// Replace emojis with an empty string\n\treturn str.replace(emojiRegex, '');\n};\n\nexport const removeFormattings = (str: string) => {\n\treturn (\n\t\tstr\n\t\t\t// Block elements (remove completely)\n\t\t\t.replace(/(```[\\s\\S]*?```)/g, '') // Code blocks\n\t\t\t.replace(/^\\|.*\\|$/gm, '') // Tables\n\t\t\t// Inline elements (preserve content)\n\t\t\t.replace(/(?:\\*\\*|__)(.*?)(?:\\*\\*|__)/g, '$1') // Bold\n\t\t\t.replace(/(?:[*_])(.*?)(?:[*_])/g, '$1') // Italic\n\t\t\t.replace(/~~(.*?)~~/g, '$1') // Strikethrough\n\t\t\t.replace(/`([^`]+)`/g, '$1') // Inline code\n\n\t\t\t// Links and images\n\t\t\t.replace(/!?\\[([^\\]]*)\\](?:\\([^)]+\\)|\\[[^\\]]*\\])/g, '$1') // Links & images\n\t\t\t.replace(/^\\[[^\\]]+\\]:\\s*.*$/gm, '') // Reference definitions\n\n\t\t\t// Block formatting\n\t\t\t.replace(/^#{1,6}\\s+/gm, '') // Headers\n\t\t\t.replace(/^\\s*[-*+]\\s+/gm, '') // Lists\n\t\t\t.replace(/^\\s*(?:\\d+\\.)\\s+/gm, '') // Numbered lists\n\t\t\t.replace(/^\\s*>[> ]*/gm, '') // Blockquotes\n\t\t\t.replace(/^\\s*:\\s+/gm, '') // Definition lists\n\n\t\t\t// Cleanup\n\t\t\t.replace(/\\[\\^[^\\]]*\\]/g, '') // Footnotes\n\t\t\t.replace(/\\n{2,}/g, '\\n')\n\t); // Multiple newlines\n};\n\nexport const cleanText = (content: string) => {\n\treturn removeFormattings(removeEmojis(content.trim()));\n};\n\nexport const removeDetails = (content, types) => {\n\tfor (const type of types) {\n\t\tcontent = content.replace(\n\t\t\tnew RegExp(`<details\\\\s+type=\"${type}\"[^>]*>.*?<\\\\/details>`, 'gis'),\n\t\t\t''\n\t\t);\n\t}\n\n\treturn content;\n};\n\nexport const removeAllDetails = (content) => {\n\tcontent = content.replace(/<details[^>]*>.*?<\\/details>/gis, '');\n\treturn content;\n};\n\nexport const processDetails = (content) => {\n\tcontent = removeDetails(content, ['reasoning', 'code_interpreter']);\n\n\t// This regex matches <details> tags with type=\"tool_calls\" and captures their attributes to convert them to a string\n\tconst detailsRegex = /<details\\s+type=\"tool_calls\"([^>]*)>([\\s\\S]*?)<\\/details>/gis;\n\tconst matches = content.match(detailsRegex);\n\tif (matches) {\n\t\tfor (const match of matches) {\n\t\t\tconst attributesRegex = /(\\w+)=\"([^\"]*)\"/g;\n\t\t\tconst attributes = {};\n\t\t\tlet attributeMatch;\n\t\t\twhile ((attributeMatch = attributesRegex.exec(match)) !== null) {\n\t\t\t\tattributes[attributeMatch[1]] = attributeMatch[2];\n\t\t\t}\n\n\t\t\tif (attributes.result) {\n\t\t\t\tcontent = content.replace(match, `\"${attributes.result}\"`);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn content;\n};\n\n// This regular expression matches code blocks marked by triple backticks\nconst codeBlockRegex = /```[\\s\\S]*?```/g;\n\nexport const extractSentences = (text: string) => {\n\tconst codeBlocks: string[] = [];\n\tlet index = 0;\n\n\t// Temporarily replace code blocks with placeholders and store the blocks separately\n\ttext = text.replace(codeBlockRegex, (match) => {\n\t\tconst placeholder = `\\u0000${index}\\u0000`; // Use a unique placeholder\n\t\tcodeBlocks[index++] = match;\n\t\treturn placeholder;\n\t});\n\n\t// Split the modified text into sentences based on common punctuation marks or newlines, avoiding these blocks\n\tlet sentences = text.split(/(?<=[.!?])\\s+|\\n+/);\n\n\t// Restore code blocks and process sentences\n\tsentences = sentences.map((sentence) => {\n\t\t// Check if the sentence includes a placeholder for a code block\n\t\treturn sentence.replace(/\\u0000(\\d+)\\u0000/g, (_, idx) => codeBlocks[idx]);\n\t});\n\n\treturn sentences.map(cleanText).filter(Boolean);\n};\n\nexport const extractParagraphsForAudio = (text: string) => {\n\tconst codeBlocks: string[] = [];\n\tlet index = 0;\n\n\t// Temporarily replace code blocks with placeholders and store the blocks separately\n\ttext = text.replace(codeBlockRegex, (match) => {\n\t\tconst placeholder = `\\u0000${index}\\u0000`; // Use a unique placeholder\n\t\tcodeBlocks[index++] = match;\n\t\treturn placeholder;\n\t});\n\n\t// Split the modified text into paragraphs based on newlines, avoiding these blocks\n\tlet paragraphs = text.split(/\\n+/);\n\n\t// Restore code blocks and process paragraphs\n\tparagraphs = paragraphs.map((paragraph) => {\n\t\t// Check if the paragraph includes a placeholder for a code block\n\t\treturn paragraph.replace(/\\u0000(\\d+)\\u0000/g, (_, idx) => codeBlocks[idx]);\n\t});\n\n\treturn paragraphs.map(cleanText).filter(Boolean);\n};\n\nexport const extractSentencesForAudio = (text: string) => {\n\treturn extractSentences(text).reduce((mergedTexts, currentText) => {\n\t\tconst lastIndex = mergedTexts.length - 1;\n\t\tif (lastIndex >= 0) {\n\t\t\tconst previousText = mergedTexts[lastIndex];\n\t\t\tconst wordCount = previousText.split(/\\s+/).length;\n\t\t\tconst charCount = previousText.length;\n\t\t\tif (wordCount < 4 || charCount < 50) {\n\t\t\t\tmergedTexts[lastIndex] = previousText + ' ' + currentText;\n\t\t\t} else {\n\t\t\t\tmergedTexts.push(currentText);\n\t\t\t}\n\t\t} else {\n\t\t\tmergedTexts.push(currentText);\n\t\t}\n\t\treturn mergedTexts;\n\t}, [] as string[]);\n};\n\nexport const getMessageContentParts = (content: string, splitOn: string = 'punctuation') => {\n\tconst messageContentParts: string[] = [];\n\n\tswitch (splitOn) {\n\t\tdefault:\n\t\tcase TTS_RESPONSE_SPLIT.PUNCTUATION:\n\t\t\tmessageContentParts.push(...extractSentencesForAudio(content));\n\t\t\tbreak;\n\t\tcase TTS_RESPONSE_SPLIT.PARAGRAPHS:\n\t\t\tmessageContentParts.push(...extractParagraphsForAudio(content));\n\t\t\tbreak;\n\t\tcase TTS_RESPONSE_SPLIT.NONE:\n\t\t\tmessageContentParts.push(cleanText(content));\n\t\t\tbreak;\n\t}\n\n\treturn messageContentParts;\n};\n\nexport const blobToFile = (blob, fileName) => {\n\t// Create a new File object from the Blob\n\tconst file = new File([blob], fileName, { type: blob.type });\n\treturn file;\n};\n\nexport const getPromptVariables = (user_name, user_location) => {\n\treturn {\n\t\t'{{USER_NAME}}': user_name,\n\t\t'{{USER_LOCATION}}': user_location || 'Unknown',\n\t\t'{{CURRENT_DATETIME}}': getCurrentDateTime(),\n\t\t'{{CURRENT_DATE}}': getFormattedDate(),\n\t\t'{{CURRENT_TIME}}': getFormattedTime(),\n\t\t'{{CURRENT_WEEKDAY}}': getWeekday(),\n\t\t'{{CURRENT_TIMEZONE}}': getUserTimezone(),\n\t\t'{{USER_LANGUAGE}}': localStorage.getItem('locale') || 'en-US'\n\t};\n};\n\n/**\n * This function is used to replace placeholders in a template string with the provided prompt.\n * The placeholders can be in the following formats:\n * - `{{prompt}}`: This will be replaced with the entire prompt.\n * - `{{prompt:start:<length>}}`: This will be replaced with the first <length> characters of the prompt.\n * - `{{prompt:end:<length>}}`: This will be replaced with the last <length> characters of the prompt.\n * - `{{prompt:middletruncate:<length>}}`: This will be replaced with the prompt truncated to <length> characters, with '...' in the middle.\n *\n * @param {string} template - The template string containing placeholders.\n * @param {string} prompt - The string to replace the placeholders with.\n * @returns {string} The template string with the placeholders replaced by the prompt.\n */\nexport const titleGenerationTemplate = (template: string, prompt: string): string => {\n\ttemplate = template.replace(\n\t\t/{{prompt}}|{{prompt:start:(\\d+)}}|{{prompt:end:(\\d+)}}|{{prompt:middletruncate:(\\d+)}}/g,\n\t\t(match, startLength, endLength, middleLength) => {\n\t\t\tif (match === '{{prompt}}') {\n\t\t\t\treturn prompt;\n\t\t\t} else if (match.startsWith('{{prompt:start:')) {\n\t\t\t\treturn prompt.substring(0, startLength);\n\t\t\t} else if (match.startsWith('{{prompt:end:')) {\n\t\t\t\treturn prompt.slice(-endLength);\n\t\t\t} else if (match.startsWith('{{prompt:middletruncate:')) {\n\t\t\t\tif (prompt.length <= middleLength) {\n\t\t\t\t\treturn prompt;\n\t\t\t\t}\n\t\t\t\tconst start = prompt.slice(0, Math.ceil(middleLength / 2));\n\t\t\t\tconst end = prompt.slice(-Math.floor(middleLength / 2));\n\t\t\t\treturn `${start}...${end}`;\n\t\t\t}\n\t\t\treturn '';\n\t\t}\n\t);\n\n\treturn template;\n};\n\nexport const approximateToHumanReadable = (nanoseconds: number) => {\n\tconst seconds = Math.floor((nanoseconds / 1e9) % 60);\n\tconst minutes = Math.floor((nanoseconds / 6e10) % 60);\n\tconst hours = Math.floor((nanoseconds / 3.6e12) % 24);\n\n\tconst results: string[] = [];\n\n\tif (seconds >= 0) {\n\t\tresults.push(`${seconds}s`);\n\t}\n\n\tif (minutes > 0) {\n\t\tresults.push(`${minutes}m`);\n\t}\n\n\tif (hours > 0) {\n\t\tresults.push(`${hours}h`);\n\t}\n\n\treturn results.reverse().join(' ');\n};\n\nexport const getTimeRange = (timestamp) => {\n\tconst now = new Date();\n\tconst date = new Date(timestamp * 1000); // Convert Unix timestamp to milliseconds\n\n\t// Calculate the difference in milliseconds\n\tconst diffTime = now.getTime() - date.getTime();\n\tconst diffDays = diffTime / (1000 * 3600 * 24);\n\n\tconst nowDate = now.getDate();\n\tconst nowMonth = now.getMonth();\n\tconst nowYear = now.getFullYear();\n\n\tconst dateDate = date.getDate();\n\tconst dateMonth = date.getMonth();\n\tconst dateYear = date.getFullYear();\n\n\tif (nowYear === dateYear && nowMonth === dateMonth && nowDate === dateDate) {\n\t\treturn 'Today';\n\t} else if (nowYear === dateYear && nowMonth === dateMonth && nowDate - dateDate === 1) {\n\t\treturn 'Yesterday';\n\t} else if (diffDays <= 7) {\n\t\treturn 'Previous 7 days';\n\t} else if (diffDays <= 30) {\n\t\treturn 'Previous 30 days';\n\t} else if (nowYear === dateYear) {\n\t\treturn date.toLocaleString('default', { month: 'long' });\n\t} else {\n\t\treturn date.getFullYear().toString();\n\t}\n};\n\n/**\n * Extract frontmatter as a dictionary from the specified content string.\n * @param content {string} - The content string with potential frontmatter.\n * @returns {Object} - The extracted frontmatter as a dictionary.\n */\nexport const extractFrontmatter = (content) => {\n\tconst frontmatter = {};\n\tlet frontmatterStarted = false;\n\tlet frontmatterEnded = false;\n\tconst frontmatterPattern = /^\\s*([a-z_]+):\\s*(.*)\\s*$/i;\n\n\t// Split content into lines\n\tconst lines = content.split('\\n');\n\n\t// Check if the content starts with triple quotes\n\tif (lines[0].trim() !== '\"\"\"') {\n\t\treturn {};\n\t}\n\n\tfrontmatterStarted = true;\n\n\tfor (let i = 1; i < lines.length; i++) {\n\t\tconst line = lines[i];\n\n\t\tif (line.includes('\"\"\"')) {\n\t\t\tif (frontmatterStarted) {\n\t\t\t\tfrontmatterEnded = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (frontmatterStarted && !frontmatterEnded) {\n\t\t\tconst match = frontmatterPattern.exec(line);\n\t\t\tif (match) {\n\t\t\t\tconst [, key, value] = match;\n\t\t\t\tfrontmatter[key.trim()] = value.trim();\n\t\t\t}\n\t\t}\n\t}\n\n\treturn frontmatter;\n};\n\n// Function to determine the best matching language\nexport const bestMatchingLanguage = (supportedLanguages, preferredLanguages, defaultLocale) => {\n\tconst languages = supportedLanguages.map((lang) => lang.code);\n\n\tconst match = preferredLanguages\n\t\t.map((prefLang) => languages.find((lang) => lang.startsWith(prefLang)))\n\t\t.find(Boolean);\n\n\treturn match || defaultLocale;\n};\n\n// Get the date in the format YYYY-MM-DD\nexport const getFormattedDate = () => {\n\tconst date = new Date();\n\tconst year = date.getFullYear();\n\tconst month = String(date.getMonth() + 1).padStart(2, '0');\n\tconst day = String(date.getDate()).padStart(2, '0');\n\treturn `${year}-${month}-${day}`;\n};\n\n// Get the time in the format HH:MM:SS\nexport const getFormattedTime = () => {\n\tconst date = new Date();\n\treturn date.toTimeString().split(' ')[0];\n};\n\n// Get the current date and time in the format YYYY-MM-DD HH:MM:SS\nexport const getCurrentDateTime = () => {\n\treturn `${getFormattedDate()} ${getFormattedTime()}`;\n};\n\n// Get the user's timezone\nexport const getUserTimezone = () => {\n\treturn Intl.DateTimeFormat().resolvedOptions().timeZone;\n};\n\n// Get the weekday\nexport const getWeekday = () => {\n\tconst date = new Date();\n\tconst weekdays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n\treturn weekdays[date.getDay()];\n};\n\nexport const createMessagesList = (history, messageId) => {\n\tif (messageId === null) {\n\t\treturn [];\n\t}\n\n\tconst message = history.messages[messageId];\n\tif (message === undefined) {\n\t\treturn [];\n\t}\n\tif (message?.parentId) {\n\t\treturn [...createMessagesList(history, message.parentId), message];\n\t} else {\n\t\treturn [message];\n\t}\n};\n\nexport const formatFileSize = (size) => {\n\tif (size == null) return 'Unknown size';\n\tif (typeof size !== 'number' || size < 0) return 'Invalid size';\n\tif (size === 0) return '0 B';\n\tconst units = ['B', 'KB', 'MB', 'GB', 'TB'];\n\tlet unitIndex = 0;\n\n\twhile (size >= 1024 && unitIndex < units.length - 1) {\n\t\tsize /= 1024;\n\t\tunitIndex++;\n\t}\n\treturn `${size.toFixed(1)} ${units[unitIndex]}`;\n};\n\nexport const getLineCount = (text) => {\n\tconsole.log(typeof text);\n\treturn text ? text.split('\\n').length : 0;\n};\n\n// Helper function to recursively resolve OpenAPI schema into JSON schema format\nfunction resolveSchema(schemaRef, components, resolvedSchemas = new Set()) {\n\tif (!schemaRef) return {};\n\n\tif (schemaRef['$ref']) {\n\t\tconst refPath = schemaRef['$ref'];\n\t\tconst schemaName = refPath.split('/').pop();\n\n\t\tif (resolvedSchemas.has(schemaName)) {\n\t\t\t// Avoid infinite recursion on circular references\n\t\t\treturn {};\n\t\t}\n\t\tresolvedSchemas.add(schemaName);\n\t\tconst referencedSchema = components.schemas[schemaName];\n\t\treturn resolveSchema(referencedSchema, components, resolvedSchemas);\n\t}\n\n\tif (schemaRef.type) {\n\t\tconst schemaObj = { type: schemaRef.type };\n\n\t\tif (schemaRef.description) {\n\t\t\tschemaObj.description = schemaRef.description;\n\t\t}\n\n\t\tswitch (schemaRef.type) {\n\t\t\tcase 'object':\n\t\t\t\tschemaObj.properties = {};\n\t\t\t\tschemaObj.required = schemaRef.required || [];\n\t\t\t\tfor (const [propName, propSchema] of Object.entries(schemaRef.properties || {})) {\n\t\t\t\t\tschemaObj.properties[propName] = resolveSchema(propSchema, components);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'array':\n\t\t\t\tschemaObj.items = resolveSchema(schemaRef.items, components);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t// for primitive types (string, integer, etc.), just use as is\n\t\t\t\tbreak;\n\t\t}\n\t\treturn schemaObj;\n\t}\n\n\t// fallback for schemas without explicit type\n\treturn {};\n}\n\n// Main conversion function\nexport const convertOpenApiToToolPayload = (openApiSpec) => {\n\tconst toolPayload = [];\n\n\t// Guard against invalid or non-OpenAPI specs (e.g., MCP-style configs)\n\tif (!openApiSpec || !openApiSpec.paths) {\n\t\treturn toolPayload;\n\t}\n\n\tfor (const [path, methods] of Object.entries(openApiSpec.paths)) {\n\t\tfor (const [method, operation] of Object.entries(methods)) {\n\t\t\tif (operation?.operationId) {\n\t\t\t\tconst tool = {\n\t\t\t\t\tname: operation.operationId,\n\t\t\t\t\tdescription: operation.description || operation.summary || 'No description available.',\n\t\t\t\t\tparameters: {\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tproperties: {},\n\t\t\t\t\t\trequired: []\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// Extract path and query parameters\n\t\t\t\tif (operation.parameters) {\n\t\t\t\t\toperation.parameters.forEach((param) => {\n\t\t\t\t\t\tlet description = param.schema.description || param.description || '';\n\t\t\t\t\t\tif (param.schema.enum && Array.isArray(param.schema.enum)) {\n\t\t\t\t\t\t\tdescription += `. Possible values: ${param.schema.enum.join(', ')}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttool.parameters.properties[param.name] = {\n\t\t\t\t\t\t\ttype: param.schema.type,\n\t\t\t\t\t\t\tdescription: description\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (param.required) {\n\t\t\t\t\t\t\ttool.parameters.required.push(param.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Extract and recursively resolve requestBody if available\n\t\t\t\tif (operation.requestBody) {\n\t\t\t\t\tconst content = operation.requestBody.content;\n\t\t\t\t\tif (content && content['application/json']) {\n\t\t\t\t\t\tconst requestSchema = content['application/json'].schema;\n\t\t\t\t\t\tconst resolvedRequestSchema = resolveSchema(requestSchema, openApiSpec.components);\n\n\t\t\t\t\t\tif (resolvedRequestSchema.properties) {\n\t\t\t\t\t\t\ttool.parameters.properties = {\n\t\t\t\t\t\t\t\t...tool.parameters.properties,\n\t\t\t\t\t\t\t\t...resolvedRequestSchema.properties\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tif (resolvedRequestSchema.required) {\n\t\t\t\t\t\t\t\ttool.parameters.required = [\n\t\t\t\t\t\t\t\t\t...new Set([...tool.parameters.required, ...resolvedRequestSchema.required])\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (resolvedRequestSchema.type === 'array') {\n\t\t\t\t\t\t\ttool.parameters = resolvedRequestSchema; // special case when root schema is an array\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttoolPayload.push(tool);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn toolPayload;\n};\n\nexport const slugify = (str: string): string => {\n\treturn (\n\t\tstr\n\t\t\t// 1. Normalize: separate accented letters into base + combining marks\n\t\t\t.normalize('NFD')\n\t\t\t// 2. Remove all combining marks (the accents)\n\t\t\t.replace(/[\\u0300-\\u036f]/g, '')\n\t\t\t// 3. Replace any sequence of whitespace with a single hyphen\n\t\t\t.replace(/\\s+/g, '-')\n\t\t\t// 4. Remove all characters except alphanumeric characters, hyphens, and underscores\n\t\t\t.replace(/[^a-zA-Z0-9-_]/g, '')\n\t\t\t// 5. Convert to lowercase\n\t\t\t.toLowerCase()\n\t);\n};\n\nexport const extractInputVariables = (text: string): Record<string, any> => {\n\tconst regex = /{{\\s*([^|}\\s]+)\\s*\\|\\s*([^}]+)\\s*}}/g;\n\tconst regularRegex = /{{\\s*([^|}\\s]+)\\s*}}/g;\n\tconst variables: Record<string, any> = {};\n\tlet match;\n\t// Use exec() loop instead of matchAll() for better compatibility\n\twhile ((match = regex.exec(text)) !== null) {\n\t\tconst varName = match[1].trim();\n\t\tconst definition = match[2].trim();\n\t\tvariables[varName] = parseVariableDefinition(definition);\n\t}\n\t// Then, extract regular variables (without pipe) - only if not already processed\n\twhile ((match = regularRegex.exec(text)) !== null) {\n\t\tconst varName = match[1].trim();\n\t\t// Only add if not already processed as custom variable\n\t\tif (!variables.hasOwnProperty(varName)) {\n\t\t\tvariables[varName] = { type: 'text' }; // Default type for regular variables\n\t\t}\n\t}\n\treturn variables;\n};\n\nexport const splitProperties = (str: string, delimiter: string): string[] => {\n\tconst result: string[] = [];\n\tlet current = '';\n\tlet depth = 0;\n\tlet inString = false;\n\tlet escapeNext = false;\n\n\tfor (let i = 0; i < str.length; i++) {\n\t\tconst char = str[i];\n\n\t\tif (escapeNext) {\n\t\t\tcurrent += char;\n\t\t\tescapeNext = false;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (char === '\\\\') {\n\t\t\tcurrent += char;\n\t\t\tescapeNext = true;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (char === '\"' && !escapeNext) {\n\t\t\tinString = !inString;\n\t\t\tcurrent += char;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (!inString) {\n\t\t\tif (char === '{' || char === '[') {\n\t\t\t\tdepth++;\n\t\t\t} else if (char === '}' || char === ']') {\n\t\t\t\tdepth--;\n\t\t\t}\n\n\t\t\tif (char === delimiter && depth === 0) {\n\t\t\t\tresult.push(current.trim());\n\t\t\t\tcurrent = '';\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\n\t\tcurrent += char;\n\t}\n\n\tif (current.trim()) {\n\t\tresult.push(current.trim());\n\t}\n\n\treturn result;\n};\n\nexport const parseVariableDefinition = (definition: string): Record<string, any> => {\n\t// Use splitProperties for the main colon delimiter to handle quoted strings\n\tconst parts = splitProperties(definition, ':');\n\tconst [firstPart, ...propertyParts] = parts;\n\n\t// Parse type (explicit or implied)\n\tconst type = firstPart.startsWith('type=') ? firstPart.slice(5) : firstPart;\n\n\t// Parse properties; support both key=value and bare flags (e.g., \":required\")\n\tconst properties = propertyParts.reduce(\n\t\t(props, part) => {\n\t\t\tconst trimmed = part.trim();\n\t\t\tif (!trimmed) return props;\n\n\t\t\t// Use splitProperties for the equals sign as well, in case there are nested quotes\n\t\t\tconst equalsParts = splitProperties(trimmed, '=');\n\n\t\t\tif (equalsParts.length === 1) {\n\t\t\t\t// It's a flag with no value, e.g. \"required\" -> true\n\t\t\t\tconst flagName = equalsParts[0].trim();\n\t\t\t\tif (flagName.length > 0) {\n\t\t\t\t\treturn { ...props, [flagName]: true };\n\t\t\t\t}\n\t\t\t\treturn props;\n\t\t\t}\n\n\t\t\tconst [propertyName, ...valueParts] = equalsParts;\n\t\t\tconst propertyValueRaw = valueParts.join('='); // Handle values with extra '='\n\n\t\t\tif (!propertyName || propertyValueRaw == null) return props;\n\n\t\t\treturn {\n\t\t\t\t...props,\n\t\t\t\t[propertyName.trim()]: parseJsonValue(propertyValueRaw.trim())\n\t\t\t};\n\t\t},\n\t\t{} as Record<string, any>\n\t);\n\n\treturn { type, ...properties };\n};\nexport const parseJsonValue = (value: string): any => {\n\t// Remove surrounding quotes if present (for string values)\n\tif (value.startsWith('\"') && value.endsWith('\"')) {\n\t\treturn value.slice(1, -1);\n\t}\n\n\t// Check if it starts with square or curly brackets (JSON)\n\tif (/^[\\[{]/.test(value)) {\n\t\ttry {\n\t\t\treturn JSON.parse(value);\n\t\t} catch {\n\t\t\treturn value; // Return as string if JSON parsing fails\n\t\t}\n\t}\n\n\treturn value;\n};\n\nasync function ensurePDFjsLoaded() {\n\tif (!window.pdfjsLib) {\n\t\tconst pdfjs = await import('pdfjs-dist');\n\t\tpdfjs.GlobalWorkerOptions.workerSrc = pdfWorkerUrl;\n\t\tif (!window.pdfjsLib) {\n\t\t\tthrow new Error('pdfjsLib is required for PDF extraction');\n\t\t}\n\t}\n\treturn window.pdfjsLib;\n}\n\nexport const extractContentFromFile = async (file: File) => {\n\t// Known text file extensions for extra fallback\n\tconst textExtensions = [\n\t\t'.txt',\n\t\t'.md',\n\t\t'.csv',\n\t\t'.json',\n\t\t'.js',\n\t\t'.ts',\n\t\t'.css',\n\t\t'.html',\n\t\t'.xml',\n\t\t'.yaml',\n\t\t'.yml',\n\t\t'.rtf'\n\t];\n\n\tfunction getExtension(filename: string) {\n\t\tconst dot = filename.lastIndexOf('.');\n\t\treturn dot === -1 ? '' : filename.substr(dot).toLowerCase();\n\t}\n\n\t// Uses pdfjs to extract text from PDF\n\tasync function extractPdfText(file: File) {\n\t\tconst pdfjsLib = await ensurePDFjsLoaded();\n\t\tconst arrayBuffer = await file.arrayBuffer();\n\t\tconst pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;\n\t\tlet allText = '';\n\t\tfor (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {\n\t\t\tconst page = await pdf.getPage(pageNum);\n\t\t\tconst content = await page.getTextContent();\n\t\t\tconst strings = content.items.map((item: any) => item.str);\n\t\t\tallText += strings.join(' ') + '\\n';\n\t\t}\n\t\treturn allText;\n\t}\n\n\t// Reads file as text using FileReader\n\tfunction readAsText(file: File) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst reader = new FileReader();\n\t\t\treader.onload = () => resolve(reader.result);\n\t\t\treader.onerror = reject;\n\t\t\treader.readAsText(file);\n\t\t});\n\t}\n\n\tasync function extractDocxText(file: File) {\n\t\tconst [arrayBuffer, { default: mammoth }] = await Promise.all([\n\t\t\tfile.arrayBuffer(),\n\t\t\timport('mammoth')\n\t\t]);\n\t\tconst result = await mammoth.extractRawText({ arrayBuffer });\n\t\treturn result.value; // plain text\n\t}\n\n\tconst type = file.type || '';\n\tconst ext = getExtension(file.name);\n\n\t// PDF check\n\tif (type === 'application/pdf' || ext === '.pdf') {\n\t\treturn await extractPdfText(file);\n\t}\n\n\t// DOCX check\n\tif (\n\t\ttype === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' ||\n\t\text === '.docx'\n\t) {\n\t\treturn await extractDocxText(file);\n\t}\n\n\t// Text check (plain or common text-based)\n\tif (type.startsWith('text/') || textExtensions.includes(ext)) {\n\t\treturn await readAsText(file);\n\t}\n\n\t// Fallback: try to read as text, if decodable\n\ttry {\n\t\treturn await readAsText(file);\n\t} catch (err) {\n\t\tthrow new Error('Unsupported or non-text file type: ' + (file.name || type));\n\t}\n};\n\nexport const getAge = (birthDate) => {\n\tconst today = new Date();\n\tconst bDate = new Date(birthDate);\n\tlet age = today.getFullYear() - bDate.getFullYear();\n\tconst m = today.getMonth() - bDate.getMonth();\n\n\tif (m < 0 || (m === 0 && today.getDate() < bDate.getDate())) {\n\t\tage--;\n\t}\n\treturn age.toString();\n};\n\nexport const convertHeicToJpeg = async (file: File) => {\n\tconst { default: heic2any } = await import('heic2any');\n\ttry {\n\t\treturn await heic2any({ blob: file, toType: 'image/jpeg' });\n\t} catch (err: any) {\n\t\tif (err?.message?.includes('already browser readable')) {\n\t\t\treturn file;\n\t\t}\n\t\tthrow err;\n\t}\n};\n\nexport const decodeString = (str: string) => {\n\ttry {\n\t\treturn decodeURIComponent(str);\n\t} catch (e) {\n\t\treturn str;\n\t}\n};\n\nexport const initMermaid = async () => {\n\tconst { default: mermaid } = await import('mermaid');\n\tmermaid.initialize({\n\t\tstartOnLoad: false, // Should be false when using render API\n\t\ttheme: document.documentElement.classList.contains('dark') ? 'dark' : 'default',\n\t\tsecurityLevel: 'loose'\n\t});\n\treturn mermaid;\n};\n\nexport const renderMermaidDiagram = async (mermaid, code: string) => {\n\tconst parseResult = await mermaid.parse(code, { suppressErrors: false });\n\tif (parseResult) {\n\t\tconst { svg } = await mermaid.render(`mermaid-${uuidv4()}`, code);\n\t\treturn svg;\n\t}\n\treturn '';\n};\n\nexport const renderVegaVisualization = async (spec: string, i18n?: any) => {\n\tconst vega = await import('vega');\n\tconst parsedSpec = JSON.parse(spec);\n\tlet vegaSpec = parsedSpec;\n\tif (parsedSpec.$schema && parsedSpec.$schema.includes('vega-lite')) {\n\t\tconst vegaLite = await import('vega-lite');\n\t\tvegaSpec = vegaLite.compile(parsedSpec).spec;\n\t}\n\tconst view = new vega.View(vega.parse(vegaSpec), { renderer: 'none' });\n\tconst svg = await view.toSVG();\n\treturn svg;\n};\n\nexport const getCodeBlockContents = (content: string): object => {\n\tconst codeBlockContents = content.match(/```[\\s\\S]*?```/g);\n\n\tlet codeBlocks = [];\n\n\tlet htmlContent = '';\n\tlet cssContent = '';\n\tlet jsContent = '';\n\n\tif (codeBlockContents) {\n\t\tcodeBlockContents.forEach((block) => {\n\t\t\tconst lang = block.split('\\n')[0].replace('```', '').trim().toLowerCase();\n\t\t\tconst code = block.replace(/```[\\s\\S]*?\\n/, '').replace(/```$/, '');\n\t\t\tcodeBlocks.push({ lang, code });\n\t\t});\n\n\t\tcodeBlocks.forEach((block) => {\n\t\t\tconst { lang, code } = block;\n\n\t\t\tif (lang === 'html') {\n\t\t\t\thtmlContent += code + '\\n';\n\t\t\t} else if (lang === 'css') {\n\t\t\t\tcssContent += code + '\\n';\n\t\t\t} else if (lang === 'javascript' || lang === 'js') {\n\t\t\t\tjsContent += code + '\\n';\n\t\t\t}\n\t\t});\n\t} else {\n\t\tconst inlineHtml = content.match(/<html>[\\s\\S]*?<\\/html>/gi);\n\t\tconst inlineCss = content.match(/<style>[\\s\\S]*?<\\/style>/gi);\n\t\tconst inlineJs = content.match(/<script>[\\s\\S]*?<\\/script>/gi);\n\n\t\tif (inlineHtml) {\n\t\t\tinlineHtml.forEach((block) => {\n\t\t\t\tconst content = block.replace(/<\\/?html>/gi, ''); // Remove <html> tags\n\t\t\t\thtmlContent += content + '\\n';\n\t\t\t});\n\t\t}\n\t\tif (inlineCss) {\n\t\t\tinlineCss.forEach((block) => {\n\t\t\t\tconst content = block.replace(/<\\/?style>/gi, ''); // Remove <style> tags\n\t\t\t\tcssContent += content + '\\n';\n\t\t\t});\n\t\t}\n\t\tif (inlineJs) {\n\t\t\tinlineJs.forEach((block) => {\n\t\t\t\tconst content = block.replace(/<\\/?script>/gi, ''); // Remove <script> tags\n\t\t\t\tjsContent += content + '\\n';\n\t\t\t});\n\t\t}\n\t}\n\n\treturn {\n\t\tcodeBlocks: codeBlocks,\n\t\thtml: htmlContent.trim(),\n\t\tcss: cssContent.trim(),\n\t\tjs: jsContent.trim()\n\t};\n};\n"],"file":"_app/immutable/chunks/cX8aofVu.js"}