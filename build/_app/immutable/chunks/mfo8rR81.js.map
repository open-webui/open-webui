{"version":3,"mappings":"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","names":["getTabbableNodes","container","nodes","walker","node","name","createElHelpers","defaults","linkPreviewIdParts","createLinkPreview","props","withDefaults","openWritable","writable","open","overridable","hasSelection","withGet","isPointerDownOnContent","containSelection","activeTrigger","options","toWritableStores","omit","openDelay","closeDelay","positioning","arrowSize","closeOnOutsideClick","forceVisible","portal","closeOnEscape","onOutsideClick","ids","generateIds","timeout","originalBodyUserSelect","handleOpen","$openDelay","handleClose","$closeDelay","$isPointerDownOnContent","$hasSelection","trigger","makeElement","$open","$triggerId","$contentId","executeCallbacks","addMeltEventListener","e","isTouch","isElement","isFocusVisible","isVisible","derivedVisible","content","$isVisible","$portal","styleToString","portalAttr","unsub","noop","unsubTimers","unsubPopper","unsubDerived","effect","$activeTrigger","$positioning","$closeOnOutsideClick","$closeOnEscape","tick","usePopper","_a","isHTMLElement","getPortalDestination","currentTarget","target","arrow","$arrowSize","$containSelection","isBrowser","body","contentElement","originalContentUserSelect","safeOnMount","triggerEl","handlePointerUp","sleep","tabbable","getLinkPreviewData","setCtx","NAME","PARTS","getAttrs","createBitAttrs","linkPreview","removeUndefined","setContext","getOptionUpdater","getCtx","getContext","updatePositioning","getPositioningUpdater","onOpenChange","localOpen","updateOption","next","idValues","derived","$idValues","transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","side","align","sideOffset","alignOffset","collisionPadding","avoidCollisions","collisionBoundary","sameWidth","fitViewport","strategy","overlap","el","attrs","dispatch","createDispatcher","$.set","builder","$content","$.get","div","root_3","$$restProps","node_3","$.child","$.reset","$$value","$.action","$$node","$.effect","$.event","$.transition","$.append","$$anchor","div_1","root_5","node_5","div_2","root_7","node_7","div_3","root_9","node_9","div_4","root_11","node_11","$$render","consequent_5","consequent_4","alternate","consequent_3","alternate_1","consequent_2","alternate_2","consequent_1","alternate_3","consequent","alternate_4","$trigger","a","root_2","$.attribute_effect","node_2","wheelModule","addWheelListener","removeWheelListener","element","listener","useCapture","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentX","currentT","i","newtonRaphsonIterate","aGuessT","currentSlope","LinearEasing","x","src","mY1","mY2","sampleValues","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","BezierEasing","require$$0","animations","amatorModule","animate","makeAggregateRaf","source","start","diff","easing","step","done","scheduler","getScheduler","keys","key","durationInMs","durationInFrames","previousAnimationId","frame","loop","cancel","t","setValues","canRaf","rafScheduler","timeoutScheduler","cb","frontBuffer","backBuffer","frameToken","clearAll","callback","renderNextFrame","renderFrame","c","s","n","r","f","o","l","ngraph_events","kinetic_1","kinetic","getPoint","scroll","settings","minVelocity","amplitude","cancelAnimationFrame","getCancelAnimationFrame","requestAnimationFrame","getRequestAnimationFrame","lastPoint","timestamp","timeConstant","ticker","vx","targetX","ax","vy","targetY","ay","raf","stop","dispose","track","now","elapsed","currentPoint","dx","dy","dt","autoScroll","moving","handler","createTextSelectionInterceptor_1","createTextSelectionInterceptor","useFake","dragObject","prevSelectStart","prevDragStart","wasCaptured","capture","release","domObject","disabled","transform","Transform","svgControllerModule","makeSvgController","isSVGElement","svgElement","owner","api","getBBox","getScreenCTM","getOwner","applyTransform","initTransform","bbox","ctm","screenCTM","domControllerModule","makeDomController","isDomElement","domElement","elementValid","wheel","require$$1","eventify","require$$2","require$$3","require$$4","domTextSelectionInterceptor","fakeTextSelectorInterceptor","require$$5","require$$6","require$$7","defaultZoomSpeed","defaultDoubleTapZoomSpeed","doubleTapSpeedInMS","clickEventTimeInMS","panzoom","createPanZoom","panController","storedCTMResult","isDirty","filterKey","pinchSpeed","bounds","maxZoom","minZoom","boundsPadding","zoomDoubleClickSpeed","beforeWheel","beforeMouseDown","speed","transformOrigin","parseTransformOrigin","textSelection","validateBounds","autocenter","frameAnimation","lastTouchEndTime","lastTouchStartTime","pendingClickEventTimeout","lastMouseDownedEvent","lastMouseDownTime","lastSingleFingerOffset","touchInProgress","panstartFired","mouseX","mouseY","clickX","clickY","pinchZoomLength","smoothScroll","rigidScroll","moveByAnimation","zoomToAnimation","multiTouch","paused","listenForEvents","internalMoveBy","moveTo","smoothMoveTo","centerOn","publicZoomTo","zoomAbs","smoothZoom","smoothZoomAbs","showRectangle","pause","resume","isPaused","getTransformModel","getMinZoom","setMinZoom","getMaxZoom","setMaxZoom","getTransformOrigin","setTransformOrigin","getZoomSpeed","setZoomSpeed","initialX","initialY","initialZoom","releaseEvents","rect","clientRect","size","transformToScreen","rectWidth","rectHeight","dw","dh","scale","y","parentCTM","parentScaleX","parentScaleY","parentOffsetX","parentOffsetY","w","h","left","top","sceneBoundingBox","getBoundingBox","ownerRect","newMinZoom","newMaxZoom","newTransformOrigin","newSpeed","keepTransformInsideBounds","triggerEvent","makeDirty","moveBy","boundingBox","adjusted","getClientRect","sceneWidth","sceneHeight","leftTop","client","zoomByRatio","clientX","clientY","ratio","isNaN","newScale","transformAdjusted","zoomLevel","ui","parent","cx","cy","smooth","from","to","lastX","lastY","v","cancelZoomAnimation","onMouseDown","onDoubleClick","onTouch","onKeyDown","onMouseWheel","releaseDocumentMouse","releaseTouches","triggerPanEnd","z","offset","moveSpeedRatio","scaleMultiplier","getScaleMultiplier","getTransformOriginOffset","midPoint","beforeTouch","clearPendingClickEventTimeout","handleSingleFingerTouch","getPinchZoomLength","startTouchListenerIfNeeded","beforeDoubleClick","touch","getOffsetXY","point","handleTouchMove","handleTouchEnd","triggerPanStart","t1","t2","currentPinchLength","firstTouchPoint","secondTouchPoint","handlePotentialClickEvent","finger1","finger2","isLeftButton","onMouseMove","onMouseUp","delta","offsetX","offsetY","fromValue","triggerZoomEnd","toScaleValue","sign","deltaAdjustedSpeed","isNumber","failTransformOrigin","boundsType","validBounds","value","autoRun","scripts","panzoomScript","query","globalName","started","tryAttach","collectOptions","script","j","attr","nameValue","getPanzoomAttributeNameValue","isPanZoomAttribute","saveAs","fileSaver","show","alt","i18n","previewElement","instance","$.mutable_source","sceneElement","handleKeyDown","event","onMount","onDestroy","root_1","button","node_1","XMark","button_1","img","$.set_attribute","base64Data","blob","mimeType","fileName","$i18n","response","blobWithType","error","className","$.prop","$$props","$settings","imageClassName","dismissible","onDismiss","_src","showImagePreview","WEBUI_BASE_URL","ImagePreview","$.sibling","$.template_effect","$0","$.untrack","$.set_class","$.clsx","__assign","p","pairDivider","blockDivider","generateNamedReferences","input","prev","entities","characters","blocks","isOptionalBlock","entries","entity","character","fullEntity","bodyRegExps","namedReferences","numericUnicodeMap","fromCodePoint","astralCodePoint","allNamedReferences","defaultDecodeOptions","strict","attribute","baseDecodeRegExps","decodeRegExps","fromCharCode","outOfBoundsChar","getDecodedEntity","references","isAttribute","isStrict","decodeResult","decodeEntityLastChar","decodeResultByReference","decodeSecondChar","decodeCode","decode","text","_b","_c","level","_d","scope","decodeRegExp","strokeWidth","svg","root","sceneParentElement","resetPanZoomViewport","downloadAsSVG","svgBlob","DOMPurify","Tooltip","Download","node_4","Reset","node_6","button_2","root_4","Clipboard","copyToClipboard","toast","edit","onSave","onUpdate","onPreview","save","run","preview","collapsed","token","lang","code","attributes","editorClassName","stickyButtonsClassName","pyodideWorker","_code","updateCode","_token","renderHTML","renderError","executing","stdout","stderr","result","files","copied","saved","collapseCodeBlock","saveCode","copyCode","previewCode","checkPythonCode","str","pythonSyntax","syntax","executePython","$config","output","executeCode","stdoutLines","idx","line","resultLines","executePythonAsWorker","packages","PyodideWorker","data","mermaid","renderMermaid","initMermaid","renderMermaidDiagram","render","errorMsg","renderVegaVisualization","onAttributesUpdate","unescapeHtml","html","textArea","unescapedOutput","SvgPanZoom","pre","$.first_child","fragment_2","text_2","div_5","div_6","div_7","ChevronUpDown","div_8","div_9","text_4","div_10","root_10","text_6","consequent_6","button_3","text_7","node_8","button_4","div_11","div_12","CodeEditor","pre_1","root_14","code_1","hljs","consequent_8","div_13","root_15","span","consequent_9","node_12","div_14","fragment_7","node_13","div_15","root_17","node_14","div_16","root_18","div_17","div_18","div_19","root_20","div_20","div_21","text_13","$1","$.set_text","consequent_11","div_22","root_21","div_23","div_24","root_22","consequent_12","div_25","root_23","$.index","file","root_25","consequent_14","consequent_15","consequent_10","consequent_16","consequent_17","disableSingleTilde","doubleMatch","singleMatch","escapeHtml","mentionStart","mentionTokenizer","m","label","mentionRenderer","cls","extra","k","mentionExtension","opts","displayMode","renderToString","katex","title","onClick","getDomain","url","domain","getDisplayTitle","formattedTitle","decodeString","video","$.derived_safe_equal","videoSrc","video_1","audio","audioSrc","audio_1","match","ytId","iframe","iframeSrc","iframe_1","statusTitle","statusDone","text_3","fileId","iframe_2","br","root_24","texts","$.each","fade","text_1","user","directMessageHandler","res","getDMChannelByUserId","goto","fragment_1","span_1","root_6","Emoji","root_8","group","text_5","fragment_3","ChatBubbleOval","node_10","$_user","WEBUI_API_BASE_URL","getUserById","UserStatus","triggerChar","idType","init","_id","parts","channel","$channels","model","$models","UserStatusLinkPreview","sourceIds","containerElement","openPreview","identifier","Source","$$index","$$array","span_2","tokens","onSourceClick","handleLinkClick","href","HtmlToken","MarkdownInlineTokens","a_1","Image","strong","root_12","em","CodespanToken","del","KatexRenderer","MentionToken","SourceToken","TextToken","alternate_7","alternate_8","alternate_10","alternate_12","alternate_13","alternate_14","alertStyles","Info","LightBulb","Star","ArrowRightCircle","Bolt","alertComponent","regExpStr","regExp","matches","alertType","newText","newTokens","marked","alert","tokenIdx","onTaskClick","$.component","$$component","MarkdownTokens","paragraphTag","editCodeBlock","topPadding","headerComponent","depth","exportTableToCSVHandler","header","headerCell","rows","row","cell","csvData","csvContent","bom","hr","$$element","$2","$3","CodeBlock","table","thead","tr","headerIdx","th","$.set_style","tbody","rowIdx","tr_1","root_13","cellIdx","td","root_16","AlertRenderer","blockquote","node_15","ol","item","itemIdx","li","$.remove_input_defaults","$.set_checked","consequent_7","node_19","ul","root_26","li_1","root_27","input_1","fragment_15","node_21","node_22","Collapsible","root_32","node_24","root_36","root_39","node_29","root_40","node_30","p_1","root_43","alternate_5","consequent_18","alternate_6","consequent_20","consequent_22","root_56","consequent_24","consequent_19","alternate_11","alternate_16","alternate_18","alternate_19","alternate_21","footnoteExtension","escapedText","footnoteExtension$1","citationExtension","raw","groupRegex","citationIdentifiers","part","index","citationExtension$1","markedKatexExtension","markedExtension","replaceTokens","processResponseContent","$user","initialHeight","iframeClassName","args","allowScripts","allowForms","allowSameOrigin","allowPopups","allowDownloads","referrerPolicy","allowFullscreen","payload","iframeDoc","setIframeSrc","isUrl","processHtmlForDeps","alpineDirectives","scriptTags","dir","alpineCode","__vitePreload","alpineBlob","alpineTag","Chart","tags","resizeSameOrigin","doc","$.mutate","onMessage","onLoad","sandbox","dayjs","duration","relativeTime","loadLocale","locales","locale","buttonClassName","chevron","grow","hide","onChange","collapsibleId","uuidv4","parseJSONString","formatJSONString","parsed","embeds","embed","FullHeightIframe","Spinner","Markdown","ChevronUp","ChevronDown","slide","quintOut","root_41","root_42","consequent_25","root_46","node_35","consequent_26","consequent_27","consequent_23","root_48","consequent_28","consequent_29"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,18,19,20,21],"sources":["../../../../../../node_modules/@melt-ui/svelte/dist/internal/helpers/dom.js","../../../../../../node_modules/@melt-ui/svelte/dist/builders/link-preview/create.js","../../../../../../node_modules/bits-ui/dist/bits/link-preview/ctx.js","../../../../../../node_modules/bits-ui/dist/bits/link-preview/components/link-preview.svelte","../../../../../../node_modules/bits-ui/dist/bits/link-preview/components/link-preview-content.svelte","../../../../../../node_modules/bits-ui/dist/bits/link-preview/components/link-preview-trigger.svelte","../../../../../../node_modules/wheel/index.js","../../../../../../node_modules/bezier-easing/src/index.js","../../../../../../node_modules/amator/index.js","../../../../../../node_modules/ngraph.events/dist/ngraph.events.cjs","../../../../../../node_modules/panzoom/lib/kinetic.js","../../../../../../node_modules/panzoom/lib/createTextSelectionInterceptor.js","../../../../../../node_modules/panzoom/lib/transform.js","../../../../../../node_modules/panzoom/lib/svgController.js","../../../../../../node_modules/panzoom/lib/domController.js","../../../../../../node_modules/panzoom/index.js","../../../../../../src/lib/components/common/ImagePreview.svelte","../../../../../../src/lib/components/common/Image.svelte","../../../../../../node_modules/html-entities/dist/esm/named-references.js","../../../../../../node_modules/html-entities/dist/esm/numeric-unicode-map.js","../../../../../../node_modules/html-entities/dist/esm/surrogate-pairs.js","../../../../../../node_modules/html-entities/dist/esm/index.js","../../../../../../src/lib/components/icons/Clipboard.svelte","../../../../../../src/lib/components/icons/Reset.svelte","../../../../../../src/lib/components/common/SVGPanZoom.svelte","../../../../../../src/lib/components/icons/ChevronUpDown.svelte","../../../../../../src/lib/components/chat/Messages/CodeBlock.svelte","../../../../../../src/lib/utils/marked/strikethrough-extension.ts","../../../../../../src/lib/utils/marked/mention-extension.ts","../../../../../../src/lib/components/chat/Messages/Markdown/KatexRenderer.svelte","../../../../../../src/lib/components/chat/Messages/Markdown/Source.svelte","../../../../../../src/lib/components/chat/Messages/Markdown/HTMLToken.svelte","../../../../../../src/lib/components/chat/Messages/Markdown/MarkdownInlineTokens/TextToken.svelte","../../../../../../src/lib/components/chat/Messages/Markdown/MarkdownInlineTokens/CodespanToken.svelte","../../../../../../src/lib/components/icons/ChatBubbleOval.svelte","../../../../../../src/lib/components/channel/Messages/Message/UserStatus.svelte","../../../../../../src/lib/components/channel/Messages/Message/UserStatusLinkPreview.svelte","../../../../../../src/lib/components/chat/Messages/Markdown/MarkdownInlineTokens/MentionToken.svelte","../../../../../../src/lib/components/chat/Messages/Markdown/SourceToken.svelte","../../../../../../src/lib/components/chat/Messages/Markdown/MarkdownInlineTokens.svelte","../../../../../../src/lib/components/icons/Info.svelte","../../../../../../src/lib/components/icons/Star.svelte","../../../../../../src/lib/components/icons/LightBulb.svelte","../../../../../../src/lib/components/icons/Bolt.svelte","../../../../../../src/lib/components/chat/Messages/Markdown/AlertRenderer.svelte","../../../../../../src/lib/components/chat/Messages/Markdown/MarkdownTokens.svelte","../../../../../../src/lib/utils/marked/footnote-extension.ts","../../../../../../src/lib/utils/marked/citation-extension.ts","../../../../../../src/lib/components/chat/Messages/Markdown.svelte","../../../../../../src/lib/components/common/FullHeightIframe.svelte","../../../../../../src/lib/components/common/Collapsible.svelte"],"sourcesContent":["import { isHTMLElement } from './is.js';\nexport function focus(element) {\n    if (isHTMLElement(element)) {\n        element.focus();\n    }\n    else if (typeof element === 'string') {\n        const el = document.querySelector(element);\n        if (!el)\n            return;\n        el.focus();\n    }\n}\n/**\n * Returns a list of nodes that can be in the tab sequence.\n * @see: https://developer.mozilla.org/en-US/docs/Web/API/TreeWalker\n */\nexport function getTabbableNodes(container) {\n    const nodes = [];\n    const walker = document.createTreeWalker(container, NodeFilter.SHOW_ELEMENT, {\n        acceptNode: (node) => {\n            // `.tabIndex` is not the same as the `tabindex` attribute. It works on the\n            // runtime's understanding of tabbability, so this automatically accounts\n            // for any kind of element that could be tabbed to.\n            return node.tabIndex >= 0 ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;\n        },\n    });\n    while (walker.nextNode()) {\n        nodes.push(walker.currentNode);\n    }\n    return nodes;\n}\nexport function isHidden(el) {\n    return el.offsetParent === null;\n}\n","import { usePopper } from '../../internal/actions/index.js';\nimport { addMeltEventListener, makeElement, createElHelpers, derivedVisible, effect, executeCallbacks, getPortalDestination, getTabbableNodes, isBrowser, isElement, isFocusVisible, isHTMLElement, isTouch, noop, overridable, sleep, styleToString, toWritableStores, portalAttr, } from '../../internal/helpers/index.js';\nimport { safeOnMount } from '../../internal/helpers/lifecycle.js';\nimport { withGet } from '../../internal/helpers/withGet.js';\nimport { writable } from 'svelte/store';\nimport { generateIds } from '../../internal/helpers/id.js';\nimport { omit } from '../../internal/helpers/object.js';\nimport { tick } from 'svelte';\nconst { name } = createElHelpers('hover-card');\nconst defaults = {\n    defaultOpen: false,\n    openDelay: 1000,\n    closeDelay: 100,\n    positioning: {\n        placement: 'bottom',\n    },\n    arrowSize: 8,\n    closeOnOutsideClick: true,\n    forceVisible: false,\n    portal: undefined,\n    closeOnEscape: true,\n    onOutsideClick: undefined,\n};\nexport const linkPreviewIdParts = ['trigger', 'content'];\nexport function createLinkPreview(props = {}) {\n    const withDefaults = { ...defaults, ...props };\n    const openWritable = withDefaults.open ?? writable(withDefaults.defaultOpen);\n    const open = overridable(openWritable, withDefaults?.onOpenChange);\n    const hasSelection = withGet.writable(false);\n    const isPointerDownOnContent = withGet.writable(false);\n    const containSelection = writable(false);\n    const activeTrigger = writable(null);\n    // type OpenReason = 'pointer' | 'focus';\n    // const openReason = writable<null | OpenReason>(null);\n    const options = toWritableStores(omit(withDefaults, 'ids'));\n    const { openDelay, closeDelay, positioning, arrowSize, closeOnOutsideClick, forceVisible, portal, closeOnEscape, onOutsideClick, } = options;\n    const ids = toWritableStores({ ...generateIds(linkPreviewIdParts), ...withDefaults.ids });\n    let timeout = null;\n    let originalBodyUserSelect;\n    const handleOpen = withGet.derived(openDelay, ($openDelay) => {\n        return () => {\n            if (timeout) {\n                window.clearTimeout(timeout);\n                timeout = null;\n            }\n            timeout = window.setTimeout(() => {\n                open.set(true);\n            }, $openDelay);\n        };\n    });\n    const handleClose = withGet.derived([closeDelay, isPointerDownOnContent, hasSelection], ([$closeDelay, $isPointerDownOnContent, $hasSelection]) => {\n        return () => {\n            if (timeout) {\n                window.clearTimeout(timeout);\n                timeout = null;\n            }\n            if (!$isPointerDownOnContent && !$hasSelection) {\n                timeout = window.setTimeout(() => {\n                    open.set(false);\n                }, $closeDelay);\n            }\n        };\n    });\n    const trigger = makeElement(name('trigger'), {\n        stores: [open, ids.trigger, ids.content],\n        returned: ([$open, $triggerId, $contentId]) => {\n            return {\n                role: 'button',\n                'aria-haspopup': 'dialog',\n                'aria-expanded': $open,\n                'data-state': $open ? 'open' : 'closed',\n                'aria-controls': $contentId,\n                id: $triggerId,\n            };\n        },\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'pointerenter', (e) => {\n                if (isTouch(e))\n                    return;\n                handleOpen.get()();\n            }), addMeltEventListener(node, 'pointerleave', (e) => {\n                if (isTouch(e))\n                    return;\n                handleClose.get()();\n            }), addMeltEventListener(node, 'focus', (e) => {\n                if (!isElement(e.currentTarget) || !isFocusVisible(e.currentTarget))\n                    return;\n                handleOpen.get()();\n            }), addMeltEventListener(node, 'blur', () => handleClose.get()()));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const isVisible = derivedVisible({ open, forceVisible, activeTrigger });\n    const content = makeElement(name('content'), {\n        stores: [isVisible, portal, ids.content],\n        returned: ([$isVisible, $portal, $contentId]) => {\n            return {\n                hidden: $isVisible ? undefined : true,\n                tabindex: -1,\n                style: styleToString({\n                    'pointer-events': $isVisible ? undefined : 'none',\n                    opacity: $isVisible ? 1 : 0,\n                    userSelect: 'text',\n                    WebkitUserSelect: 'text',\n                }),\n                id: $contentId,\n                'data-state': $isVisible ? 'open' : 'closed',\n                'data-portal': portalAttr($portal),\n            };\n        },\n        action: (node) => {\n            let unsub = noop;\n            const unsubTimers = () => {\n                if (timeout) {\n                    window.clearTimeout(timeout);\n                }\n            };\n            let unsubPopper = noop;\n            const unsubDerived = effect([isVisible, activeTrigger, positioning, closeOnOutsideClick, portal, closeOnEscape], ([$isVisible, $activeTrigger, $positioning, $closeOnOutsideClick, $portal, $closeOnEscape,]) => {\n                unsubPopper();\n                if (!$isVisible || !$activeTrigger)\n                    return;\n                tick().then(() => {\n                    unsubPopper();\n                    unsubPopper = usePopper(node, {\n                        anchorElement: $activeTrigger,\n                        open: open,\n                        options: {\n                            floating: $positioning,\n                            modal: {\n                                closeOnInteractOutside: $closeOnOutsideClick,\n                                onClose: () => {\n                                    open.set(false);\n                                    $activeTrigger.focus();\n                                },\n                                shouldCloseOnInteractOutside: (e) => {\n                                    onOutsideClick.get()?.(e);\n                                    if (e.defaultPrevented)\n                                        return false;\n                                    if (isHTMLElement($activeTrigger) &&\n                                        $activeTrigger.contains(e.target))\n                                        return false;\n                                    return true;\n                                },\n                                open: $isVisible,\n                            },\n                            portal: getPortalDestination(node, $portal),\n                            focusTrap: null,\n                            escapeKeydown: $closeOnEscape ? undefined : null,\n                        },\n                    }).destroy;\n                });\n            });\n            unsub = executeCallbacks(addMeltEventListener(node, 'pointerdown', (e) => {\n                const currentTarget = e.currentTarget;\n                const target = e.target;\n                if (!isHTMLElement(currentTarget) || !isHTMLElement(target))\n                    return;\n                if (currentTarget.contains(target)) {\n                    containSelection.set(true);\n                }\n                hasSelection.set(false);\n                isPointerDownOnContent.set(true);\n            }), addMeltEventListener(node, 'pointerenter', (e) => {\n                if (isTouch(e))\n                    return;\n                handleOpen.get()();\n            }), addMeltEventListener(node, 'pointerleave', (e) => {\n                if (isTouch(e))\n                    return;\n                handleClose.get()();\n            }), addMeltEventListener(node, 'focusout', (e) => {\n                e.preventDefault();\n            }));\n            return {\n                destroy() {\n                    unsub();\n                    unsubPopper();\n                    unsubTimers();\n                    unsubDerived();\n                },\n            };\n        },\n    });\n    const arrow = makeElement(name('arrow'), {\n        stores: arrowSize,\n        returned: ($arrowSize) => ({\n            'data-arrow': true,\n            style: styleToString({\n                position: 'absolute',\n                width: `var(--arrow-size, ${$arrowSize}px)`,\n                height: `var(--arrow-size, ${$arrowSize}px)`,\n            }),\n        }),\n    });\n    effect([containSelection], ([$containSelection]) => {\n        if (!isBrowser || !$containSelection)\n            return;\n        const body = document.body;\n        const contentElement = document.getElementById(ids.content.get());\n        if (!contentElement)\n            return;\n        // prefix for safari\n        originalBodyUserSelect = body.style.userSelect || body.style.webkitUserSelect;\n        const originalContentUserSelect = contentElement.style.userSelect || contentElement.style.webkitUserSelect;\n        body.style.userSelect = 'none';\n        body.style.webkitUserSelect = 'none';\n        contentElement.style.userSelect = 'text';\n        contentElement.style.webkitUserSelect = 'text';\n        return () => {\n            body.style.userSelect = originalBodyUserSelect;\n            body.style.webkitUserSelect = originalBodyUserSelect;\n            contentElement.style.userSelect = originalContentUserSelect;\n            contentElement.style.webkitUserSelect = originalContentUserSelect;\n        };\n    });\n    safeOnMount(() => {\n        const triggerEl = document.getElementById(ids.trigger.get());\n        if (!triggerEl)\n            return;\n        activeTrigger.set(triggerEl);\n    });\n    effect([open], ([$open]) => {\n        if (!isBrowser || !$open) {\n            hasSelection.set(false);\n            return;\n        }\n        const handlePointerUp = () => {\n            containSelection.set(false);\n            isPointerDownOnContent.set(false);\n            sleep(1).then(() => {\n                const isSelection = document.getSelection()?.toString() !== '';\n                if (isSelection) {\n                    hasSelection.set(true);\n                }\n            });\n        };\n        document.addEventListener('pointerup', handlePointerUp);\n        const contentElement = document.getElementById(ids.content.get());\n        if (!contentElement)\n            return;\n        const tabbables = getTabbableNodes(contentElement);\n        tabbables.forEach((tabbable) => tabbable.setAttribute('tabindex', '-1'));\n        return () => {\n            document.removeEventListener('pointerup', handlePointerUp);\n            hasSelection.set(false);\n            isPointerDownOnContent.set(false);\n        };\n    });\n    return {\n        ids,\n        elements: {\n            trigger,\n            content,\n            arrow,\n        },\n        states: {\n            open,\n        },\n        options,\n    };\n}\n","import { createLinkPreview } from \"@melt-ui/svelte\";\nimport { getContext, setContext } from \"svelte\";\nimport { getPositioningUpdater } from \"../floating/helpers.js\";\nimport { createBitAttrs, getOptionUpdater, removeUndefined } from \"../../internal/index.js\";\nexport function getLinkPreviewData() {\n    const NAME = \"link-preview\";\n    const PARTS = [\"arrow\", \"content\", \"trigger\"];\n    return {\n        NAME,\n        PARTS,\n    };\n}\nexport function setCtx(props) {\n    const { NAME, PARTS } = getLinkPreviewData();\n    const getAttrs = createBitAttrs(NAME, PARTS);\n    const linkPreview = {\n        ...createLinkPreview({\n            ...removeUndefined(props),\n            forceVisible: true,\n        }),\n        getAttrs,\n    };\n    setContext(NAME, linkPreview);\n    return {\n        ...linkPreview,\n        updateOption: getOptionUpdater(linkPreview.options),\n    };\n}\nexport function getCtx() {\n    const { NAME } = getLinkPreviewData();\n    return getContext(NAME);\n}\nexport function setArrow(size = 8) {\n    const linkPreview = getCtx();\n    linkPreview.options.arrowSize.set(size);\n    return linkPreview;\n}\nexport function updatePositioning(props) {\n    const defaultPlacement = {\n        side: \"bottom\",\n        align: \"center\",\n    };\n    const withDefaults = { ...defaultPlacement, ...props };\n    const { options: { positioning }, } = getCtx();\n    const updater = getPositioningUpdater(positioning);\n    updater(withDefaults);\n}\n","<script>import { derived } from \"svelte/store\";\nimport { setCtx } from \"../ctx.js\";\nexport let open = void 0;\nexport let onOpenChange = void 0;\nexport let openDelay = 700;\nexport let closeDelay = 300;\nexport let closeOnOutsideClick = void 0;\nexport let closeOnEscape = void 0;\nexport let portal = void 0;\nexport let onOutsideClick = void 0;\nconst {\n  states: { open: localOpen },\n  updateOption,\n  ids\n} = setCtx({\n  defaultOpen: open,\n  openDelay,\n  closeDelay,\n  closeOnOutsideClick,\n  closeOnEscape,\n  portal,\n  onOutsideClick,\n  onOpenChange: ({ next }) => {\n    if (open !== next) {\n      onOpenChange?.(next);\n      open = next;\n    }\n    return next;\n  }\n});\nconst idValues = derived([ids.content, ids.trigger], ([$contentId, $triggerId]) => ({\n  content: $contentId,\n  trigger: $triggerId\n}));\n$: open !== void 0 && localOpen.set(open);\n$: updateOption(\"openDelay\", openDelay);\n$: updateOption(\"closeDelay\", closeDelay);\n$: updateOption(\"closeOnOutsideClick\", closeOnOutsideClick);\n$: updateOption(\"closeOnEscape\", closeOnEscape);\n$: updateOption(\"portal\", portal);\n$: updateOption(\"onOutsideClick\", onOutsideClick);\n</script>\n\n<slot ids={$idValues} />\n","<script>import { melt } from \"@melt-ui/svelte\";\nimport { getCtx, updatePositioning } from \"../ctx.js\";\nimport { createDispatcher } from \"../../../internal/index.js\";\nexport let transition = void 0;\nexport let transitionConfig = void 0;\nexport let inTransition = void 0;\nexport let inTransitionConfig = void 0;\nexport let outTransition = void 0;\nexport let outTransitionConfig = void 0;\nexport let asChild = false;\nexport let id = void 0;\nexport let side = \"bottom\";\nexport let align = \"center\";\nexport let sideOffset = 0;\nexport let alignOffset = 0;\nexport let collisionPadding = 8;\nexport let avoidCollisions = true;\nexport let collisionBoundary = void 0;\nexport let sameWidth = false;\nexport let fitViewport = false;\nexport let strategy = \"absolute\";\nexport let overlap = false;\nexport let el = void 0;\nconst {\n  elements: { content },\n  states: { open },\n  ids,\n  getAttrs\n} = getCtx();\n$: if (id) {\n  ids.content.set(id);\n}\nconst attrs = getAttrs(\"content\");\nconst dispatch = createDispatcher();\n$: builder = $content;\n$: Object.assign(builder, attrs);\n$: if ($open) {\n  updatePositioning({\n    side,\n    align,\n    sideOffset,\n    alignOffset,\n    collisionPadding,\n    avoidCollisions,\n    collisionBoundary,\n    sameWidth,\n    fitViewport,\n    strategy,\n    overlap\n  });\n}\n</script>\n\n{#if asChild && $open}\n\t<slot {builder} />\n{:else if transition && $open}\n\t<div\n\t\tbind:this={el}\n\t\ttransition:transition={transitionConfig}\n\t\t{...builder} use:builder.action\n\t\t{...$$restProps}\n\t\ton:m-focusout={dispatch}\n\t\ton:m-pointerdown={dispatch}\n\t\ton:m-pointerenter={dispatch}\n\t\ton:m-pointerleave={dispatch}\n\t>\n\t\t<slot {builder} />\n\t</div>\n{:else if inTransition && outTransition && $open}\n\t<div\n\t\tbind:this={el}\n\t\tin:inTransition={inTransitionConfig}\n\t\tout:outTransition={outTransitionConfig}\n\t\t{...builder} use:builder.action\n\t\t{...$$restProps}\n\t\ton:m-focusout={dispatch}\n\t\ton:m-pointerdown={dispatch}\n\t\ton:m-pointerenter={dispatch}\n\t\ton:m-pointerleave={dispatch}\n\t>\n\t\t<slot {builder} />\n\t</div>\n{:else if inTransition && $open}\n\t<div\n\t\tbind:this={el}\n\t\tin:inTransition={inTransitionConfig}\n\t\t{...builder} use:builder.action\n\t\t{...$$restProps}\n\t\ton:m-focusout={dispatch}\n\t\ton:m-pointerdown={dispatch}\n\t\ton:m-pointerenter={dispatch}\n\t\ton:m-pointerleave={dispatch}\n\t>\n\t\t<slot {builder} />\n\t</div>\n{:else if outTransition && $open}\n\t<div\n\t\tbind:this={el}\n\t\tout:outTransition={outTransitionConfig}\n\t\t{...builder} use:builder.action\n\t\t{...$$restProps}\n\t\ton:m-focusout={dispatch}\n\t\ton:m-pointerdown={dispatch}\n\t\ton:m-pointerenter={dispatch}\n\t\ton:m-pointerleave={dispatch}\n\t>\n\t\t<slot {builder} />\n\t</div>\n{:else if $open}\n\t<div\n\t\tbind:this={el}\n\t\t{...builder} use:builder.action\n\t\t{...$$restProps}\n\t\ton:m-focusout={dispatch}\n\t\ton:m-pointerdown={dispatch}\n\t\ton:m-pointerenter={dispatch}\n\t\ton:m-pointerleave={dispatch}\n\t>\n\t\t<slot {builder} />\n\t</div>\n{/if}\n","<script>import { melt } from \"@melt-ui/svelte\";\nimport { getCtx } from \"../ctx.js\";\nimport { createDispatcher } from \"../../../internal/events.js\";\nexport let asChild = false;\nexport let id = void 0;\nexport let el = void 0;\nconst {\n  elements: { trigger },\n  ids,\n  getAttrs\n} = getCtx();\nconst dispatch = createDispatcher();\nconst attrs = getAttrs(\"trigger\");\n$: if (id) {\n  ids.trigger.set(id);\n}\n$: builder = $trigger;\n$: Object.assign(builder, attrs);\n</script>\n\n{#if asChild}\n\t<slot {builder} />\n{:else}\n\t<!-- svelte-ignore a11y-missing-attribute a11y_missing_attribute -->\n\t<a\n\t\tbind:this={el}\n\t\t{...builder} use:builder.action\n\t\t{...$$restProps}\n\t\t{...attrs}\n\t\ton:m-blur={dispatch}\n\t\ton:m-focus={dispatch}\n\t\ton:m-pointerenter={dispatch}\n\t\ton:m-pointerleave={dispatch}\n\t>\n\t\t<slot {builder} />\n\t</a>\n{/if}\n","/**\n * This module used to unify mouse wheel behavior between different browsers in 2014\n * Now it's just a wrapper around addEventListener('wheel');\n *\n * Usage:\n *  var addWheelListener = require('wheel').addWheelListener;\n *  var removeWheelListener = require('wheel').removeWheelListener;\n *  addWheelListener(domElement, function (e) {\n *    // mouse wheel event\n *  });\n *  removeWheelListener(domElement, function);\n */\n\nmodule.exports = addWheelListener;\n\n// But also expose \"advanced\" api with unsubscribe:\nmodule.exports.addWheelListener = addWheelListener;\nmodule.exports.removeWheelListener = removeWheelListener;\n\n\nfunction addWheelListener(element, listener, useCapture) {\n  element.addEventListener('wheel', listener, useCapture);\n}\n\nfunction removeWheelListener( element, listener, useCapture ) {\n  element.removeEventListener('wheel', listener, useCapture);\n}","/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gatan Renaudeau 2014 - 2015  MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nvar float32ArraySupported = typeof Float32Array === 'function';\n\nfunction A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\nfunction B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\nfunction C (aA1)      { return 3.0 * aA1; }\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier (aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT; }\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope (aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1); }\n\nfunction binarySubdivide (aX, aA, aB, mX1, mX2) {\n  var currentX, currentT, i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\n for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n   var currentSlope = getSlope(aGuessT, mX1, mX2);\n   if (currentSlope === 0.0) {\n     return aGuessT;\n   }\n   var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n   aGuessT -= currentX / currentSlope;\n }\n return aGuessT;\n}\n\nfunction LinearEasing (x) {\n  return x;\n}\n\nmodule.exports = function bezier (mX1, mY1, mX2, mY2) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error('bezier x values must be in [0, 1] range');\n  }\n\n  if (mX1 === mY1 && mX2 === mY2) {\n    return LinearEasing;\n  }\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  for (var i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  function getTForX (aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing (x) {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (x === 0) {\n      return 0;\n    }\n    if (x === 1) {\n      return 1;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n};\n","var BezierEasing = require('bezier-easing')\n\n// Predefined set of animations. Similar to CSS easing functions\nvar animations = {\n  ease:  BezierEasing(0.25, 0.1, 0.25, 1),\n  easeIn: BezierEasing(0.42, 0, 1, 1),\n  easeOut: BezierEasing(0, 0, 0.58, 1),\n  easeInOut: BezierEasing(0.42, 0, 0.58, 1),\n  linear: BezierEasing(0, 0, 1, 1)\n}\n\n\nmodule.exports = animate;\nmodule.exports.makeAggregateRaf = makeAggregateRaf;\nmodule.exports.sharedScheduler = makeAggregateRaf();\n\n\nfunction animate(source, target, options) {\n  var start = Object.create(null)\n  var diff = Object.create(null)\n  options = options || {}\n  // We let clients specify their own easing function\n  var easing = (typeof options.easing === 'function') ? options.easing : animations[options.easing]\n\n  // if nothing is specified, default to ease (similar to CSS animations)\n  if (!easing) {\n    if (options.easing) {\n      console.warn('Unknown easing function in amator: ' + options.easing);\n    }\n    easing = animations.ease\n  }\n\n  var step = typeof options.step === 'function' ? options.step : noop\n  var done = typeof options.done === 'function' ? options.done : noop\n\n  var scheduler = getScheduler(options.scheduler)\n\n  var keys = Object.keys(target)\n  keys.forEach(function(key) {\n    start[key] = source[key]\n    diff[key] = target[key] - source[key]\n  })\n\n  var durationInMs = typeof options.duration === 'number' ? options.duration : 400\n  var durationInFrames = Math.max(1, durationInMs * 0.06) // 0.06 because 60 frames pers 1,000 ms\n  var previousAnimationId\n  var frame = 0\n\n  previousAnimationId = scheduler.next(loop)\n\n  return {\n    cancel: cancel\n  }\n\n  function cancel() {\n    scheduler.cancel(previousAnimationId)\n    previousAnimationId = 0\n  }\n\n  function loop() {\n    var t = easing(frame/durationInFrames)\n    frame += 1\n    setValues(t)\n    if (frame <= durationInFrames) {\n      previousAnimationId = scheduler.next(loop)\n      step(source)\n    } else {\n      previousAnimationId = 0\n      setTimeout(function() { done(source) }, 0)\n    }\n  }\n\n  function setValues(t) {\n    keys.forEach(function(key) {\n      source[key] = diff[key] * t + start[key]\n    })\n  }\n}\n\nfunction noop() { }\n\nfunction getScheduler(scheduler) {\n  if (!scheduler) {\n    var canRaf = typeof window !== 'undefined' && window.requestAnimationFrame\n    return canRaf ? rafScheduler() : timeoutScheduler()\n  }\n  if (typeof scheduler.next !== 'function') throw new Error('Scheduler is supposed to have next(cb) function')\n  if (typeof scheduler.cancel !== 'function') throw new Error('Scheduler is supposed to have cancel(handle) function')\n\n  return scheduler\n}\n\nfunction rafScheduler() {\n  return {\n    next: window.requestAnimationFrame.bind(window),\n    cancel: window.cancelAnimationFrame.bind(window)\n  }\n}\n\nfunction timeoutScheduler() {\n  return {\n    next: function(cb) {\n      return setTimeout(cb, 1000/60)\n    },\n    cancel: function (id) {\n      return clearTimeout(id)\n    }\n  }\n}\n\nfunction makeAggregateRaf() {\n  var frontBuffer = new Set();\n  var backBuffer = new Set();\n  var frameToken = 0;\n\n  return {\n    next: next,\n    cancel: next,\n    clearAll: clearAll\n  }\n\n  function clearAll() {\n    frontBuffer.clear();\n    backBuffer.clear();\n    cancelAnimationFrame(frameToken);\n    frameToken = 0;\n  }\n\n  function next(callback) {\n    backBuffer.add(callback);\n    renderNextFrame();\n  }\n\n  function renderNextFrame() {\n    if (!frameToken) frameToken = requestAnimationFrame(renderFrame);\n  }\n\n  function renderFrame() {\n    frameToken = 0;\n\n    var t = backBuffer;\n    backBuffer = frontBuffer;\n    frontBuffer = t;\r\n\n    frontBuffer.forEach(function(callback) {\n      callback();\n    });\n    frontBuffer.clear();\n  }\n\n  function cancel(callback) {\n    backBuffer.delete(callback);\n  }\n}\n","\"use strict\";function c(e){s(e);const t=a(e);return e.on=t.on,e.off=t.off,e.fire=t.fire,e}function a(e){let t=Object.create(null);return{on:function(n,r,f){if(typeof r!=\"function\")throw new Error(\"callback is expected to be a function\");let o=t[n];return o||(o=t[n]=[]),o.push({callback:r,ctx:f}),e},off:function(n,r){if(typeof n>\"u\")return t=Object.create(null),e;if(t[n])if(typeof r!=\"function\")delete t[n];else{const l=t[n];for(let i=0;i<l.length;++i)l[i].callback===r&&l.splice(i,1)}return e},fire:function(n){const r=t[n];if(!r)return e;let f;arguments.length>1&&(f=Array.prototype.slice.call(arguments,1));for(let o=0;o<r.length;++o){const l=r[o];l.callback.apply(l.ctx,f)}return e}}}function s(e){if(!e)throw new Error(\"Eventify cannot use falsy object as events subject\");const t=[\"on\",\"fire\",\"off\"];for(let n=0;n<t.length;++n)if(e.hasOwnProperty(t[n]))throw new Error(\"Subject cannot be eventified, since it already has property '\"+t[n]+\"'\")}module.exports=c;\n//# sourceMappingURL=ngraph.events.cjs.map\n","/**\n * Allows smooth kinetic scrolling of the surface\n */\nmodule.exports = kinetic;\n\nfunction kinetic(getPoint, scroll, settings) {\n  if (typeof settings !== 'object') {\n    // setting could come as boolean, we should ignore it, and use an object.\n    settings = {};\n  }\n\n  var minVelocity = typeof settings.minVelocity === 'number' ? settings.minVelocity : 5;\n  var amplitude = typeof settings.amplitude === 'number' ? settings.amplitude : 0.25;\n  var cancelAnimationFrame = typeof settings.cancelAnimationFrame === 'function' ? settings.cancelAnimationFrame : getCancelAnimationFrame();\n  var requestAnimationFrame = typeof settings.requestAnimationFrame === 'function' ? settings.requestAnimationFrame : getRequestAnimationFrame();\n\n  var lastPoint;\n  var timestamp;\n  var timeConstant = 342;\n\n  var ticker;\n  var vx, targetX, ax;\n  var vy, targetY, ay;\n\n  var raf;\n\n  return {\n    start: start,\n    stop: stop,\n    cancel: dispose\n  };\n\n  function dispose() {\n    cancelAnimationFrame(ticker);\n    cancelAnimationFrame(raf);\n  }\n\n  function start() {\n    lastPoint = getPoint();\n\n    ax = ay = vx = vy = 0;\n    timestamp = new Date();\n\n    cancelAnimationFrame(ticker);\n    cancelAnimationFrame(raf);\n\n    // we start polling the point position to accumulate velocity\n    // Once we stop(), we will use accumulated velocity to keep scrolling\n    // an object.\n    ticker = requestAnimationFrame(track);\n  }\n\n  function track() {\n    var now = Date.now();\n    var elapsed = now - timestamp;\n    timestamp = now;\n\n    var currentPoint = getPoint();\n\n    var dx = currentPoint.x - lastPoint.x;\n    var dy = currentPoint.y - lastPoint.y;\n\n    lastPoint = currentPoint;\n\n    var dt = 1000 / (1 + elapsed);\n\n    // moving average\n    vx = 0.8 * dx * dt + 0.2 * vx;\n    vy = 0.8 * dy * dt + 0.2 * vy;\n\n    ticker = requestAnimationFrame(track);\n  }\n\n  function stop() {\n    cancelAnimationFrame(ticker);\n    cancelAnimationFrame(raf);\n\n    var currentPoint = getPoint();\n\n    targetX = currentPoint.x;\n    targetY = currentPoint.y;\n    timestamp = Date.now();\n\n    if (vx < -minVelocity || vx > minVelocity) {\n      ax = amplitude * vx;\n      targetX += ax;\n    }\n\n    if (vy < -minVelocity || vy > minVelocity) {\n      ay = amplitude * vy;\n      targetY += ay;\n    }\n\n    raf = requestAnimationFrame(autoScroll);\n  }\n\n  function autoScroll() {\n    var elapsed = Date.now() - timestamp;\n\n    var moving = false;\n    var dx = 0;\n    var dy = 0;\n\n    if (ax) {\n      dx = -ax * Math.exp(-elapsed / timeConstant);\n\n      if (dx > 0.5 || dx < -0.5) moving = true;\n      else dx = ax = 0;\n    }\n\n    if (ay) {\n      dy = -ay * Math.exp(-elapsed / timeConstant);\n\n      if (dy > 0.5 || dy < -0.5) moving = true;\n      else dy = ay = 0;\n    }\n\n    if (moving) {\n      scroll(targetX + dx, targetY + dy);\n      raf = requestAnimationFrame(autoScroll);\n    }\n  }\n}\n\nfunction getCancelAnimationFrame() {\n  if (typeof cancelAnimationFrame === 'function') return cancelAnimationFrame;\n  return clearTimeout;\n}\n\nfunction getRequestAnimationFrame() {\n  if (typeof requestAnimationFrame === 'function') return requestAnimationFrame;\n\n  return function (handler) {\n    return setTimeout(handler, 16);\n  };\n}","/**\n * Disallows selecting text.\n */\nmodule.exports = createTextSelectionInterceptor;\n\nfunction createTextSelectionInterceptor(useFake) {\n  if (useFake) {\n    return {\n      capture: noop,\n      release: noop\n    };\n  }\n\n  var dragObject;\n  var prevSelectStart;\n  var prevDragStart;\n  var wasCaptured = false;\n\n  return {\n    capture: capture,\n    release: release\n  };\n\n  function capture(domObject) {\n    wasCaptured = true;\n    prevSelectStart = window.document.onselectstart;\n    prevDragStart = window.document.ondragstart;\n\n    window.document.onselectstart = disabled;\n\n    dragObject = domObject;\n    dragObject.ondragstart = disabled;\n  }\n\n  function release() {\n    if (!wasCaptured) return;\n    \n    wasCaptured = false;\n    window.document.onselectstart = prevSelectStart;\n    if (dragObject) dragObject.ondragstart = prevDragStart;\n  }\n}\n\nfunction disabled(e) {\n  e.stopPropagation();\n  return false;\n}\n\nfunction noop() {}\n","module.exports = Transform;\n\nfunction Transform() {\n  this.x = 0;\n  this.y = 0;\n  this.scale = 1;\n}\n","module.exports = makeSvgController;\nmodule.exports.canAttach = isSVGElement;\n\nfunction makeSvgController(svgElement, options) {\n  if (!isSVGElement(svgElement)) {\n    throw new Error('svg element is required for svg.panzoom to work');\n  }\n\n  var owner = svgElement.ownerSVGElement;\n  if (!owner) {\n    throw new Error(\n      'Do not apply panzoom to the root <svg> element. ' +\n      'Use its child instead (e.g. <g></g>). ' +\n      'As of March 2016 only FireFox supported transform on the root element');\n  }\n\n  if (!options.disableKeyboardInteraction) {\n    owner.setAttribute('tabindex', 0);\n  }\n\n  var api = {\n    getBBox: getBBox,\n    getScreenCTM: getScreenCTM,\n    getOwner: getOwner,\n    applyTransform: applyTransform,\n    initTransform: initTransform\n  };\n  \n  return api;\n\n  function getOwner() {\n    return owner;\n  }\n\n  function getBBox() {\n    var bbox =  svgElement.getBBox();\n    return {\n      left: bbox.x,\n      top: bbox.y,\n      width: bbox.width,\n      height: bbox.height,\n    };\n  }\n\n  function getScreenCTM() {\n    var ctm = owner.getCTM();\n    if (!ctm) {\n      // This is likely firefox: https://bugzilla.mozilla.org/show_bug.cgi?id=873106\n      // The code below is not entirely correct, but still better than nothing\n      return owner.getScreenCTM();\n    }\n    return ctm;\n  }\n\n  function initTransform(transform) {\n    var screenCTM = svgElement.getCTM();\n\n    // The above line returns null on Firefox\n    if (screenCTM === null) {\n      screenCTM = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\").createSVGMatrix();\n    }\n\n    transform.x = screenCTM.e;\n    transform.y = screenCTM.f;\n    transform.scale = screenCTM.a;\n    owner.removeAttributeNS(null, 'viewBox');\n  }\n\n  function applyTransform(transform) {\n    svgElement.setAttribute('transform', 'matrix(' +\n      transform.scale + ' 0 0 ' +\n      transform.scale + ' ' +\n      transform.x + ' ' + transform.y + ')');\n  }\n}\n\nfunction isSVGElement(element) {\n  return element && element.ownerSVGElement && element.getCTM;\n}","module.exports = makeDomController;\n\nmodule.exports.canAttach = isDomElement;\n\nfunction makeDomController(domElement, options) {\n  var elementValid = isDomElement(domElement); \n  if (!elementValid) {\n    throw new Error('panzoom requires DOM element to be attached to the DOM tree');\n  }\n\n  var owner = domElement.parentElement;\n  domElement.scrollTop = 0;\n  \n  if (!options.disableKeyboardInteraction) {\n    owner.setAttribute('tabindex', 0);\n  }\n\n  var api = {\n    getBBox: getBBox,\n    getOwner: getOwner,\n    applyTransform: applyTransform,\n  };\n  \n  return api;\n\n  function getOwner() {\n    return owner;\n  }\n\n  function getBBox() {\n    // TODO: We should probably cache this?\n    return  {\n      left: 0,\n      top: 0,\n      width: domElement.clientWidth,\n      height: domElement.clientHeight\n    };\n  }\n\n  function applyTransform(transform) {\n    // TODO: Should we cache this?\n    domElement.style.transformOrigin = '0 0 0';\n    domElement.style.transform = 'matrix(' +\n      transform.scale + ', 0, 0, ' +\n      transform.scale + ', ' +\n      transform.x + ', ' + transform.y + ')';\n  }\n}\n\nfunction isDomElement(element) {\n  return element && element.parentElement && element.style;\n}\n","'use strict';\n/**\n * Allows to drag and zoom svg elements\n */\nvar wheel = require('wheel');\nvar animate = require('amator');\nvar eventify = require('ngraph.events');\nvar kinetic = require('./lib/kinetic.js');\nvar createTextSelectionInterceptor = require('./lib/createTextSelectionInterceptor.js');\nvar domTextSelectionInterceptor = createTextSelectionInterceptor();\nvar fakeTextSelectorInterceptor = createTextSelectionInterceptor(true);\nvar Transform = require('./lib/transform.js');\nvar makeSvgController = require('./lib/svgController.js');\nvar makeDomController = require('./lib/domController.js');\n\nvar defaultZoomSpeed = 1;\nvar defaultDoubleTapZoomSpeed = 1.75;\nvar doubleTapSpeedInMS = 300;\nvar clickEventTimeInMS = 200;\n\nmodule.exports = createPanZoom;\n\n/**\n * Creates a new instance of panzoom, so that an object can be panned and zoomed\n *\n * @param {DOMElement} domElement where panzoom should be attached.\n * @param {Object} options that configure behavior.\n */\nfunction createPanZoom(domElement, options) {\n  options = options || {};\n\n  var panController = options.controller;\n\n  if (!panController) {\n    if (makeSvgController.canAttach(domElement)) {\n      panController = makeSvgController(domElement, options);\n    } else if (makeDomController.canAttach(domElement)) {\n      panController = makeDomController(domElement, options);\n    }\n  }\n\n  if (!panController) {\n    throw new Error(\n      'Cannot create panzoom for the current type of dom element'\n    );\n  }\n  var owner = panController.getOwner();\n  // just to avoid GC pressure, every time we do intermediate transform\n  // we return this object. For internal use only. Never give it back to the consumer of this library\n  var storedCTMResult = { x: 0, y: 0 };\n\n  var isDirty = false;\n  var transform = new Transform();\n\n  if (panController.initTransform) {\n    panController.initTransform(transform);\n  }\n\n  var filterKey = typeof options.filterKey === 'function' ? options.filterKey : noop;\n  // TODO: likely need to unite pinchSpeed with zoomSpeed\n  var pinchSpeed = typeof options.pinchSpeed === 'number' ? options.pinchSpeed : 1;\n  var bounds = options.bounds;\n  var maxZoom = typeof options.maxZoom === 'number' ? options.maxZoom : Number.POSITIVE_INFINITY;\n  var minZoom = typeof options.minZoom === 'number' ? options.minZoom : 0;\n\n  var boundsPadding = typeof options.boundsPadding === 'number' ? options.boundsPadding : 0.05;\n  var zoomDoubleClickSpeed = typeof options.zoomDoubleClickSpeed === 'number' ? options.zoomDoubleClickSpeed : defaultDoubleTapZoomSpeed;\n  var beforeWheel = options.beforeWheel || noop;\n  var beforeMouseDown = options.beforeMouseDown || noop;\n  var speed = typeof options.zoomSpeed === 'number' ? options.zoomSpeed : defaultZoomSpeed;\n  var transformOrigin = parseTransformOrigin(options.transformOrigin);\n  var textSelection = options.enableTextSelection ? fakeTextSelectorInterceptor : domTextSelectionInterceptor;\n\n  validateBounds(bounds);\n\n  if (options.autocenter) {\n    autocenter();\n  }\n\n  var frameAnimation;\n  var lastTouchEndTime = 0;\n  var lastTouchStartTime = 0;\n  var pendingClickEventTimeout = 0;\n  var lastMouseDownedEvent = null;\n  var lastMouseDownTime = new Date();\n  var lastSingleFingerOffset;\n  var touchInProgress = false;\n\n  // We only need to fire panstart when actual move happens\n  var panstartFired = false;\n\n  // cache mouse coordinates here\n  var mouseX;\n  var mouseY;\n\n  // Where the first click has happened, so that we can differentiate\n  // between pan and click\n  var clickX;\n  var clickY;\n\n  var pinchZoomLength;\n\n  var smoothScroll;\n  if ('smoothScroll' in options && !options.smoothScroll) {\n    // If user explicitly asked us not to use smooth scrolling, we obey\n    smoothScroll = rigidScroll();\n  } else {\n    // otherwise we use forward smoothScroll settings to kinetic API\n    // which makes scroll smoothing.\n    smoothScroll = kinetic(getPoint, scroll, options.smoothScroll);\n  }\n\n  var moveByAnimation;\n  var zoomToAnimation;\n\n  var multiTouch;\n  var paused = false;\n\n  listenForEvents();\n\n  var api = {\n    dispose: dispose,\n    moveBy: internalMoveBy,\n    moveTo: moveTo,\n    smoothMoveTo: smoothMoveTo, \n    centerOn: centerOn,\n    zoomTo: publicZoomTo,\n    zoomAbs: zoomAbs,\n    smoothZoom: smoothZoom,\n    smoothZoomAbs: smoothZoomAbs,\n    showRectangle: showRectangle,\n\n    pause: pause,\n    resume: resume,\n    isPaused: isPaused,\n\n    getTransform: getTransformModel,\n\n    getMinZoom: getMinZoom,\n    setMinZoom: setMinZoom,\n\n    getMaxZoom: getMaxZoom,\n    setMaxZoom: setMaxZoom,\n\n    getTransformOrigin: getTransformOrigin,\n    setTransformOrigin: setTransformOrigin,\n\n    getZoomSpeed: getZoomSpeed,\n    setZoomSpeed: setZoomSpeed\n  };\n\n  eventify(api);\n  \n  var initialX = typeof options.initialX === 'number' ? options.initialX : transform.x;\n  var initialY = typeof options.initialY === 'number' ? options.initialY : transform.y;\n  var initialZoom = typeof options.initialZoom === 'number' ? options.initialZoom : transform.scale;\n\n  if(initialX != transform.x || initialY != transform.y || initialZoom != transform.scale){\n    zoomAbs(initialX, initialY, initialZoom);\n  }\n\n  return api;\n\n  function pause() {\n    releaseEvents();\n    paused = true;\n  }\n\n  function resume() {\n    if (paused) {\n      listenForEvents();\n      paused = false;\n    }\n  }\n\n  function isPaused() {\n    return paused;\n  }\n\n  function showRectangle(rect) {\n    // TODO: this duplicates autocenter. I think autocenter should go.\n    var clientRect = owner.getBoundingClientRect();\n    var size = transformToScreen(clientRect.width, clientRect.height);\n\n    var rectWidth = rect.right - rect.left;\n    var rectHeight = rect.bottom - rect.top;\n    if (!Number.isFinite(rectWidth) || !Number.isFinite(rectHeight)) {\n      throw new Error('Invalid rectangle');\n    }\n\n    var dw = size.x / rectWidth;\n    var dh = size.y / rectHeight;\n    var scale = Math.min(dw, dh);\n    transform.x = -(rect.left + rectWidth / 2) * scale + size.x / 2;\n    transform.y = -(rect.top + rectHeight / 2) * scale + size.y / 2;\n    transform.scale = scale;\n  }\n\n  function transformToScreen(x, y) {\n    if (panController.getScreenCTM) {\n      var parentCTM = panController.getScreenCTM();\n      var parentScaleX = parentCTM.a;\n      var parentScaleY = parentCTM.d;\n      var parentOffsetX = parentCTM.e;\n      var parentOffsetY = parentCTM.f;\n      storedCTMResult.x = x * parentScaleX - parentOffsetX;\n      storedCTMResult.y = y * parentScaleY - parentOffsetY;\n    } else {\n      storedCTMResult.x = x;\n      storedCTMResult.y = y;\n    }\n\n    return storedCTMResult;\n  }\n\n  function autocenter() {\n    var w; // width of the parent\n    var h; // height of the parent\n    var left = 0;\n    var top = 0;\n    var sceneBoundingBox = getBoundingBox();\n    if (sceneBoundingBox) {\n      // If we have bounding box - use it.\n      left = sceneBoundingBox.left;\n      top = sceneBoundingBox.top;\n      w = sceneBoundingBox.right - sceneBoundingBox.left;\n      h = sceneBoundingBox.bottom - sceneBoundingBox.top;\n    } else {\n      // otherwise just use whatever space we have\n      var ownerRect = owner.getBoundingClientRect();\n      w = ownerRect.width;\n      h = ownerRect.height;\n    }\n    var bbox = panController.getBBox();\n    if (bbox.width === 0 || bbox.height === 0) {\n      // we probably do not have any elements in the SVG\n      // just bail out;\n      return;\n    }\n    var dh = h / bbox.height;\n    var dw = w / bbox.width;\n    var scale = Math.min(dw, dh);\n    transform.x = -(bbox.left + bbox.width / 2) * scale + w / 2 + left;\n    transform.y = -(bbox.top + bbox.height / 2) * scale + h / 2 + top;\n    transform.scale = scale;\n  }\n\n  function getTransformModel() {\n    // TODO: should this be read only?\n    return transform;\n  }\n\n  function getMinZoom() {\n    return minZoom;\n  }\n\n  function setMinZoom(newMinZoom) {\n    minZoom = newMinZoom;\n  }\n\n  function getMaxZoom() {\n    return maxZoom;\n  }\n\n  function setMaxZoom(newMaxZoom) {\n    maxZoom = newMaxZoom;\n  }\n\n  function getTransformOrigin() {\n    return transformOrigin;\n  }\n\n  function setTransformOrigin(newTransformOrigin) {\n    transformOrigin = parseTransformOrigin(newTransformOrigin);\n  }\n\n  function getZoomSpeed() {\n    return speed;\n  }\n\n  function setZoomSpeed(newSpeed) {\n    if (!Number.isFinite(newSpeed)) {\n      throw new Error('Zoom speed should be a number');\n    }\n    speed = newSpeed;\n  }\n\n  function getPoint() {\n    return {\n      x: transform.x,\n      y: transform.y\n    };\n  }\n\n  function moveTo(x, y) {\n    transform.x = x;\n    transform.y = y;\n\n    keepTransformInsideBounds();\n\n    triggerEvent('pan');\n    makeDirty();\n  }\n\n  function moveBy(dx, dy) {\n    moveTo(transform.x + dx, transform.y + dy);\n  }\n\n  function keepTransformInsideBounds() {\n    var boundingBox = getBoundingBox();\n    if (!boundingBox) return;\n\n    var adjusted = false;\n    var clientRect = getClientRect();\n\n    var diff = boundingBox.left - clientRect.right;\n    if (diff > 0) {\n      transform.x += diff;\n      adjusted = true;\n    }\n    // check the other side:\n    diff = boundingBox.right - clientRect.left;\n    if (diff < 0) {\n      transform.x += diff;\n      adjusted = true;\n    }\n\n    // y axis:\n    diff = boundingBox.top - clientRect.bottom;\n    if (diff > 0) {\n      // we adjust transform, so that it matches exactly our bounding box:\n      // transform.y = boundingBox.top - (boundingBox.height + boundingBox.y) * transform.scale =>\n      // transform.y = boundingBox.top - (clientRect.bottom - transform.y) =>\n      // transform.y = diff + transform.y =>\n      transform.y += diff;\n      adjusted = true;\n    }\n\n    diff = boundingBox.bottom - clientRect.top;\n    if (diff < 0) {\n      transform.y += diff;\n      adjusted = true;\n    }\n    return adjusted;\n  }\n\n  /**\n   * Returns bounding box that should be used to restrict scene movement.\n   */\n  function getBoundingBox() {\n    if (!bounds) return; // client does not want to restrict movement\n\n    if (typeof bounds === 'boolean') {\n      // for boolean type we use parent container bounds\n      var ownerRect = owner.getBoundingClientRect();\n      var sceneWidth = ownerRect.width;\n      var sceneHeight = ownerRect.height;\n\n      return {\n        left: sceneWidth * boundsPadding,\n        top: sceneHeight * boundsPadding,\n        right: sceneWidth * (1 - boundsPadding),\n        bottom: sceneHeight * (1 - boundsPadding)\n      };\n    }\n\n    return bounds;\n  }\n\n  function getClientRect() {\n    var bbox = panController.getBBox();\n    var leftTop = client(bbox.left, bbox.top);\n\n    return {\n      left: leftTop.x,\n      top: leftTop.y,\n      right: bbox.width * transform.scale + leftTop.x,\n      bottom: bbox.height * transform.scale + leftTop.y\n    };\n  }\n\n  function client(x, y) {\n    return {\n      x: x * transform.scale + transform.x,\n      y: y * transform.scale + transform.y\n    };\n  }\n\n  function makeDirty() {\n    isDirty = true;\n    frameAnimation = window.requestAnimationFrame(frame);\n  }\n\n  function zoomByRatio(clientX, clientY, ratio) {\n    if (isNaN(clientX) || isNaN(clientY) || isNaN(ratio)) {\n      throw new Error('zoom requires valid numbers');\n    }\n\n    var newScale = transform.scale * ratio;\n\n    if (newScale < minZoom) {\n      if (transform.scale === minZoom) return;\n\n      ratio = minZoom / transform.scale;\n    }\n    if (newScale > maxZoom) {\n      if (transform.scale === maxZoom) return;\n\n      ratio = maxZoom / transform.scale;\n    }\n\n    var size = transformToScreen(clientX, clientY);\n\n    transform.x = size.x - ratio * (size.x - transform.x);\n    transform.y = size.y - ratio * (size.y - transform.y);\n\n    // TODO: https://github.com/anvaka/panzoom/issues/112\n    if (bounds && boundsPadding === 1 && minZoom === 1) {\n      transform.scale *= ratio;\n      keepTransformInsideBounds();\n    } else {\n      var transformAdjusted = keepTransformInsideBounds();\n      if (!transformAdjusted) transform.scale *= ratio;\n    }\n\n    triggerEvent('zoom');\n\n    makeDirty();\n  }\n\n  function zoomAbs(clientX, clientY, zoomLevel) {\n    var ratio = zoomLevel / transform.scale;\n    zoomByRatio(clientX, clientY, ratio);\n  }\n\n  function centerOn(ui) {\n    var parent = ui.ownerSVGElement;\n    if (!parent)\n      throw new Error('ui element is required to be within the scene');\n\n    // TODO: should i use controller's screen CTM?\n    var clientRect = ui.getBoundingClientRect();\n    var cx = clientRect.left + clientRect.width / 2;\n    var cy = clientRect.top + clientRect.height / 2;\n\n    var container = parent.getBoundingClientRect();\n    var dx = container.width / 2 - cx;\n    var dy = container.height / 2 - cy;\n\n    internalMoveBy(dx, dy, true);\n  }\n\n  function smoothMoveTo(x, y){\n    internalMoveBy(x - transform.x, y - transform.y, true);\n  }\n\n  function internalMoveBy(dx, dy, smooth) {\n    if (!smooth) {\n      return moveBy(dx, dy);\n    }\n\n    if (moveByAnimation) moveByAnimation.cancel();\n\n    var from = { x: 0, y: 0 };\n    var to = { x: dx, y: dy };\n    var lastX = 0;\n    var lastY = 0;\n\n    moveByAnimation = animate(from, to, {\n      step: function (v) {\n        moveBy(v.x - lastX, v.y - lastY);\n\n        lastX = v.x;\n        lastY = v.y;\n      }\n    });\n  }\n\n  function scroll(x, y) {\n    cancelZoomAnimation();\n    moveTo(x, y);\n  }\n\n  function dispose() {\n    releaseEvents();\n  }\n\n  function listenForEvents() {\n    owner.addEventListener('mousedown', onMouseDown, { passive: false });\n    owner.addEventListener('dblclick', onDoubleClick, { passive: false });\n    owner.addEventListener('touchstart', onTouch, { passive: false });\n    owner.addEventListener('keydown', onKeyDown, { passive: false });\n\n    // Need to listen on the owner container, so that we are not limited\n    // by the size of the scrollable domElement\n    wheel.addWheelListener(owner, onMouseWheel, { passive: false });\n\n    makeDirty();\n  }\n\n  function releaseEvents() {\n    wheel.removeWheelListener(owner, onMouseWheel);\n    owner.removeEventListener('mousedown', onMouseDown);\n    owner.removeEventListener('keydown', onKeyDown);\n    owner.removeEventListener('dblclick', onDoubleClick);\n    owner.removeEventListener('touchstart', onTouch);\n\n    if (frameAnimation) {\n      window.cancelAnimationFrame(frameAnimation);\n      frameAnimation = 0;\n    }\n\n    smoothScroll.cancel();\n\n    releaseDocumentMouse();\n    releaseTouches();\n    textSelection.release();\n\n    triggerPanEnd();\n  }\n\n  function frame() {\n    if (isDirty) applyTransform();\n  }\n\n  function applyTransform() {\n    isDirty = false;\n\n    // TODO: Should I allow to cancel this?\n    panController.applyTransform(transform);\n\n    triggerEvent('transform');\n    frameAnimation = 0;\n  }\n\n  function onKeyDown(e) {\n    var x = 0,\n      y = 0,\n      z = 0;\n    if (e.keyCode === 38) {\n      y = 1; // up\n    } else if (e.keyCode === 40) {\n      y = -1; // down\n    } else if (e.keyCode === 37) {\n      x = 1; // left\n    } else if (e.keyCode === 39) {\n      x = -1; // right\n    } else if (e.keyCode === 189 || e.keyCode === 109) {\n      // DASH or SUBTRACT\n      z = 1; // `-` -  zoom out\n    } else if (e.keyCode === 187 || e.keyCode === 107) {\n      // EQUAL SIGN or ADD\n      z = -1; // `=` - zoom in (equal sign on US layout is under `+`)\n    }\n\n    if (filterKey(e, x, y, z)) {\n      // They don't want us to handle the key: https://github.com/anvaka/panzoom/issues/45\n      return;\n    }\n\n    if (x || y) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      var clientRect = owner.getBoundingClientRect();\n      // movement speed should be the same in both X and Y direction:\n      var offset = Math.min(clientRect.width, clientRect.height);\n      var moveSpeedRatio = 0.05;\n      var dx = offset * moveSpeedRatio * x;\n      var dy = offset * moveSpeedRatio * y;\n\n      // TODO: currently we do not animate this. It could be better to have animation\n      internalMoveBy(dx, dy);\n    }\n\n    if (z) {\n      var scaleMultiplier = getScaleMultiplier(z * 100);\n      var offset = transformOrigin ? getTransformOriginOffset() : midPoint();\n      publicZoomTo(offset.x, offset.y, scaleMultiplier);\n    }\n  }\n\n  function midPoint() {\n    var ownerRect = owner.getBoundingClientRect();\n    return {\n      x: ownerRect.width / 2,\n      y: ownerRect.height / 2\n    };\n  }\n\n  function onTouch(e) {\n    // let them override the touch behavior\n    beforeTouch(e);\n    clearPendingClickEventTimeout();\n\n    if (e.touches.length === 1) {\n      return handleSingleFingerTouch(e, e.touches[0]);\n    } else if (e.touches.length === 2) {\n      // handleTouchMove() will care about pinch zoom.\n      pinchZoomLength = getPinchZoomLength(e.touches[0], e.touches[1]);\n      multiTouch = true;\n      startTouchListenerIfNeeded();\n    }\n  }\n\n  function beforeTouch(e) {\n    // TODO: Need to unify this filtering names. E.g. use `beforeTouch`\n    if (options.onTouch && !options.onTouch(e)) {\n      // if they return `false` from onTouch, we don't want to stop\n      // events propagation. Fixes https://github.com/anvaka/panzoom/issues/12\n      return;\n    }\n\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  function beforeDoubleClick(e) {\n    clearPendingClickEventTimeout();\n\n    // TODO: Need to unify this filtering names. E.g. use `beforeDoubleClick``\n    if (options.onDoubleClick && !options.onDoubleClick(e)) {\n      // if they return `false` from onTouch, we don't want to stop\n      // events propagation. Fixes https://github.com/anvaka/panzoom/issues/46\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  function handleSingleFingerTouch(e) {\n    lastTouchStartTime = new Date();\n    var touch = e.touches[0];\n    var offset = getOffsetXY(touch);\n    lastSingleFingerOffset = offset;\n    var point = transformToScreen(offset.x, offset.y);\n    mouseX = point.x;\n    mouseY = point.y;\n    clickX = mouseX;\n    clickY = mouseY;\n\n    smoothScroll.cancel();\n    startTouchListenerIfNeeded();\n  }\n\n  function startTouchListenerIfNeeded() {\n    if (touchInProgress) {\n      // no need to do anything, as we already listen to events;\n      return;\n    }\n\n    touchInProgress = true;\n    document.addEventListener('touchmove', handleTouchMove);\n    document.addEventListener('touchend', handleTouchEnd);\n    document.addEventListener('touchcancel', handleTouchEnd);\n  }\n\n  function handleTouchMove(e) {\n    if (e.touches.length === 1) {\n      e.stopPropagation();\n      var touch = e.touches[0];\n\n      var offset = getOffsetXY(touch);\n      var point = transformToScreen(offset.x, offset.y);\n\n      var dx = point.x - mouseX;\n      var dy = point.y - mouseY;\n\n      if (dx !== 0 && dy !== 0) {\n        triggerPanStart();\n      }\n      mouseX = point.x;\n      mouseY = point.y;\n      internalMoveBy(dx, dy);\n    } else if (e.touches.length === 2) {\n      // it's a zoom, let's find direction\n      multiTouch = true;\n      var t1 = e.touches[0];\n      var t2 = e.touches[1];\n      var currentPinchLength = getPinchZoomLength(t1, t2);\n\n      // since the zoom speed is always based on distance from 1, we need to apply\n      // pinch speed only on that distance from 1:\n      var scaleMultiplier =\n        1 + (currentPinchLength / pinchZoomLength - 1) * pinchSpeed;\n\n      var firstTouchPoint = getOffsetXY(t1);\n      var secondTouchPoint = getOffsetXY(t2);\n      mouseX = (firstTouchPoint.x + secondTouchPoint.x) / 2;\n      mouseY = (firstTouchPoint.y + secondTouchPoint.y) / 2;\n      if (transformOrigin) {\n        var offset = getTransformOriginOffset();\n        mouseX = offset.x;\n        mouseY = offset.y;\n      }\n\n      publicZoomTo(mouseX, mouseY, scaleMultiplier);\n\n      pinchZoomLength = currentPinchLength;\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  }\n\n  function clearPendingClickEventTimeout() {\n    if (pendingClickEventTimeout) {\n      clearTimeout(pendingClickEventTimeout);\n      pendingClickEventTimeout = 0;\n    }\n  }\n\n  function handlePotentialClickEvent(e) {\n    // we could still be in the double tap mode, let's wait until double tap expires,\n    // and then notify:\n    if (!options.onClick) return;\n    clearPendingClickEventTimeout();\n    var dx = mouseX - clickX;\n    var dy = mouseY - clickY;\n    var l = Math.sqrt(dx * dx + dy * dy);\n    if (l > 5) return; // probably they are panning, ignore it\n\n    pendingClickEventTimeout = setTimeout(function() {\n      pendingClickEventTimeout = 0;\n      options.onClick(e);\n    }, doubleTapSpeedInMS);\n  }\n\n  function handleTouchEnd(e) {\n    clearPendingClickEventTimeout();\n    if (e.touches.length > 0) {\n      var offset = getOffsetXY(e.touches[0]);\n      var point = transformToScreen(offset.x, offset.y);\n      mouseX = point.x;\n      mouseY = point.y;\n    } else {\n      var now = new Date();\n      if (now - lastTouchEndTime < doubleTapSpeedInMS) {\n        // They did a double tap here\n        if (transformOrigin) {\n          var offset = getTransformOriginOffset();\n          smoothZoom(offset.x, offset.y, zoomDoubleClickSpeed);\n        } else {\n          // We want untransformed x/y here.\n          smoothZoom(lastSingleFingerOffset.x, lastSingleFingerOffset.y, zoomDoubleClickSpeed);\n        }\n      } else if (now - lastTouchStartTime < clickEventTimeInMS) {\n        handlePotentialClickEvent(e);\n      }\n\n      lastTouchEndTime = now;\n\n      triggerPanEnd();\n      releaseTouches();\n    }\n  }\n\n  function getPinchZoomLength(finger1, finger2) {\n    var dx = finger1.clientX - finger2.clientX;\n    var dy = finger1.clientY - finger2.clientY;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  function onDoubleClick(e) {\n    beforeDoubleClick(e);\n    var offset = getOffsetXY(e);\n    if (transformOrigin) {\n      // TODO: looks like this is duplicated in the file.\n      // Need to refactor\n      offset = getTransformOriginOffset();\n    }\n    smoothZoom(offset.x, offset.y, zoomDoubleClickSpeed);\n  }\n\n  function onMouseDown(e) {\n    clearPendingClickEventTimeout();\n\n    // if client does not want to handle this event - just ignore the call\n    if (beforeMouseDown(e)) return;\n\n    lastMouseDownedEvent = e;\n    lastMouseDownTime = new Date();\n\n    if (touchInProgress) {\n      // modern browsers will fire mousedown for touch events too\n      // we do not want this: touch is handled separately.\n      e.stopPropagation();\n      return false;\n    }\n    // for IE, left click == 1\n    // for Firefox, left click == 0\n    var isLeftButton =\n      (e.button === 1 && window.event !== null) || e.button === 0;\n    if (!isLeftButton) return;\n\n    smoothScroll.cancel();\n\n    var offset = getOffsetXY(e);\n    var point = transformToScreen(offset.x, offset.y);\n    clickX = mouseX = point.x;\n    clickY = mouseY = point.y;\n\n    // We need to listen on document itself, since mouse can go outside of the\n    // window, and we will loose it\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n    textSelection.capture(e.target || e.srcElement);\n\n    return false;\n  }\n\n  function onMouseMove(e) {\n    // no need to worry about mouse events when touch is happening\n    if (touchInProgress) return;\n\n    triggerPanStart();\n\n    var offset = getOffsetXY(e);\n    var point = transformToScreen(offset.x, offset.y);\n    var dx = point.x - mouseX;\n    var dy = point.y - mouseY;\n\n    mouseX = point.x;\n    mouseY = point.y;\n\n    internalMoveBy(dx, dy);\n  }\n\n  function onMouseUp() {\n    var now = new Date();\n    if (now - lastMouseDownTime < clickEventTimeInMS) handlePotentialClickEvent(lastMouseDownedEvent);\n    textSelection.release();\n    triggerPanEnd();\n    releaseDocumentMouse();\n  }\n\n  function releaseDocumentMouse() {\n    document.removeEventListener('mousemove', onMouseMove);\n    document.removeEventListener('mouseup', onMouseUp);\n    panstartFired = false;\n  }\n\n  function releaseTouches() {\n    document.removeEventListener('touchmove', handleTouchMove);\n    document.removeEventListener('touchend', handleTouchEnd);\n    document.removeEventListener('touchcancel', handleTouchEnd);\n    panstartFired = false;\n    multiTouch = false;\n    touchInProgress = false;\n  }\n\n  function onMouseWheel(e) {\n    // if client does not want to handle this event - just ignore the call\n    if (beforeWheel(e)) return;\n\n    smoothScroll.cancel();\n\n    var delta = e.deltaY;\n    if (e.deltaMode > 0) delta *= 100;\n\n    var scaleMultiplier = getScaleMultiplier(delta);\n\n    if (scaleMultiplier !== 1) {\n      var offset = transformOrigin\n        ? getTransformOriginOffset()\n        : getOffsetXY(e);\n      publicZoomTo(offset.x, offset.y, scaleMultiplier);\n      e.preventDefault();\n    }\n  }\n\n  function getOffsetXY(e) {\n    var offsetX, offsetY;\n    // I tried using e.offsetX, but that gives wrong results for svg, when user clicks on a path.\n    var ownerRect = owner.getBoundingClientRect();\n    offsetX = e.clientX - ownerRect.left;\n    offsetY = e.clientY - ownerRect.top;\n\n    return { x: offsetX, y: offsetY };\n  }\n\n  function smoothZoom(clientX, clientY, scaleMultiplier) {\n    var fromValue = transform.scale;\n    var from = { scale: fromValue };\n    var to = { scale: scaleMultiplier * fromValue };\n\n    smoothScroll.cancel();\n    cancelZoomAnimation();\n\n    zoomToAnimation = animate(from, to, {\n      step: function (v) {\n        zoomAbs(clientX, clientY, v.scale);\n      },\n      done: triggerZoomEnd\n    });\n  }\n\n  function smoothZoomAbs(clientX, clientY, toScaleValue) {\n    var fromValue = transform.scale;\n    var from = { scale: fromValue };\n    var to = { scale: toScaleValue };\n\n    smoothScroll.cancel();\n    cancelZoomAnimation();\n\n    zoomToAnimation = animate(from, to, {\n      step: function (v) {\n        zoomAbs(clientX, clientY, v.scale);\n      }\n    });\n  }\n\n  function getTransformOriginOffset() {\n    var ownerRect = owner.getBoundingClientRect();\n    return {\n      x: ownerRect.width * transformOrigin.x,\n      y: ownerRect.height * transformOrigin.y\n    };\n  }\n\n  function publicZoomTo(clientX, clientY, scaleMultiplier) {\n    smoothScroll.cancel();\n    cancelZoomAnimation();\n    return zoomByRatio(clientX, clientY, scaleMultiplier);\n  }\n\n  function cancelZoomAnimation() {\n    if (zoomToAnimation) {\n      zoomToAnimation.cancel();\n      zoomToAnimation = null;\n    }\n  }\n\n  function getScaleMultiplier(delta) {\n    var sign = Math.sign(delta);\n    var deltaAdjustedSpeed = Math.min(0.25, Math.abs(speed * delta / 128));\n    return 1 - sign * deltaAdjustedSpeed;\n  }\n\n  function triggerPanStart() {\n    if (!panstartFired) {\n      triggerEvent('panstart');\n      panstartFired = true;\n      smoothScroll.start();\n    }\n  }\n\n  function triggerPanEnd() {\n    if (panstartFired) {\n      // we should never run smooth scrolling if it was multiTouch (pinch zoom animation):\n      if (!multiTouch) smoothScroll.stop();\n      triggerEvent('panend');\n    }\n  }\n\n  function triggerZoomEnd() {\n    triggerEvent('zoomend');\n  }\n\n  function triggerEvent(name) {\n    api.fire(name, api);\n  }\n}\n\nfunction parseTransformOrigin(options) {\n  if (!options) return;\n  if (typeof options === 'object') {\n    if (!isNumber(options.x) || !isNumber(options.y))\n      failTransformOrigin(options);\n    return options;\n  }\n\n  failTransformOrigin();\n}\n\nfunction failTransformOrigin(options) {\n  console.error(options);\n  throw new Error(\n    [\n      'Cannot parse transform origin.',\n      'Some good examples:',\n      '  \"center center\" can be achieved with {x: 0.5, y: 0.5}',\n      '  \"top center\" can be achieved with {x: 0.5, y: 0}',\n      '  \"bottom right\" can be achieved with {x: 1, y: 1}'\n    ].join('\\n')\n  );\n}\n\nfunction noop() { }\n\nfunction validateBounds(bounds) {\n  var boundsType = typeof bounds;\n  if (boundsType === 'undefined' || boundsType === 'boolean') return; // this is okay\n  // otherwise need to be more thorough:\n  var validBounds =\n    isNumber(bounds.left) &&\n    isNumber(bounds.top) &&\n    isNumber(bounds.bottom) &&\n    isNumber(bounds.right);\n\n  if (!validBounds)\n    throw new Error(\n      'Bounds object is not valid. It can be: ' +\n      'undefined, boolean (true|false) or an object {left, top, right, bottom}'\n    );\n}\n\nfunction isNumber(x) {\n  return Number.isFinite(x);\n}\n\n// IE 11 does not support isNaN:\nfunction isNaN(value) {\n  if (Number.isNaN) {\n    return Number.isNaN(value);\n  }\n\n  return value !== value;\n}\n\nfunction rigidScroll() {\n  return {\n    start: noop,\n    stop: noop,\n    cancel: noop\n  };\n}\n\nfunction autoRun() {\n  if (typeof document === 'undefined') return;\n\n  var scripts = document.getElementsByTagName('script');\n  if (!scripts) return;\n  var panzoomScript;\n\n  for (var i = 0; i < scripts.length; ++i) {\n    var x = scripts[i];\n    if (x.src && x.src.match(/\\bpanzoom(\\.min)?\\.js/)) {\n      panzoomScript = x;\n      break;\n    }\n  }\n\n  if (!panzoomScript) return;\n\n  var query = panzoomScript.getAttribute('query');\n  if (!query) return;\n\n  var globalName = panzoomScript.getAttribute('name') || 'pz';\n  var started = Date.now();\n\n  tryAttach();\n\n  function tryAttach() {\n    var el = document.querySelector(query);\n    if (!el) {\n      var now = Date.now();\n      var elapsed = now - started;\n      if (elapsed < 2000) {\n        // Let's wait a bit\n        setTimeout(tryAttach, 100);\n        return;\n      }\n      // If we don't attach within 2 seconds to the target element, consider it a failure\n      console.error('Cannot find the panzoom element', globalName);\n      return;\n    }\n    var options = collectOptions(panzoomScript);\n    console.log(options);\n    window[globalName] = createPanZoom(el, options);\n  }\n\n  function collectOptions(script) {\n    var attrs = script.attributes;\n    var options = {};\n    for (var j = 0; j < attrs.length; ++j) {\n      var attr = attrs[j];\n      var nameValue = getPanzoomAttributeNameValue(attr);\n      if (nameValue) {\n        options[nameValue.name] = nameValue.value;\n      }\n    }\n\n    return options;\n  }\n\n  function getPanzoomAttributeNameValue(attr) {\n    if (!attr.name) return;\n    var isPanZoomAttribute =\n      attr.name[0] === 'p' && attr.name[1] === 'z' && attr.name[2] === '-';\n\n    if (!isPanZoomAttribute) return;\n\n    var name = attr.name.substr(3);\n    var value = JSON.parse(attr.value);\n    return { name: name, value: value };\n  }\n}\n\nautoRun();\n\t","<script lang=\"ts\">\n\timport { onDestroy, onMount, getContext } from 'svelte';\n\timport panzoom, { type PanZoom } from 'panzoom';\n\n\timport fileSaver from 'file-saver';\n\tconst { saveAs } = fileSaver;\n\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\n\texport let show = false;\n\texport let src = '';\n\texport let alt = '';\n\n\tconst i18n = getContext('i18n');\n\n\tlet mounted = false;\n\n\tlet previewElement = null;\n\n\tlet instance: PanZoom;\n\n\tlet sceneParentElement: HTMLElement;\n\tlet sceneElement: HTMLElement;\n\n\t$: if (sceneElement) {\n\t\tinstance = panzoom(sceneElement, {\n\t\t\tbounds: true,\n\t\t\tboundsPadding: 0.1,\n\n\t\t\tzoomSpeed: 0.065\n\t\t});\n\t}\n\tconst resetPanZoomViewport = () => {\n\t\tinstance.moveTo(0, 0);\n\t\tinstance.zoomAbs(0, 0, 1);\n\t\tconsole.log(instance.getTransform());\n\t};\n\n\tconst handleKeyDown = (event: KeyboardEvent) => {\n\t\tif (event.key === 'Escape') {\n\t\t\tconsole.log('Escape');\n\t\t\tshow = false;\n\t\t}\n\t};\n\n\tonMount(() => {\n\t\tmounted = true;\n\t});\n\n\t$: if (show && previewElement) {\n\t\tdocument.body.appendChild(previewElement);\n\t\twindow.addEventListener('keydown', handleKeyDown);\n\t\tdocument.body.style.overflow = 'hidden';\n\t} else if (previewElement) {\n\t\twindow.removeEventListener('keydown', handleKeyDown);\n\t\tdocument.body.removeChild(previewElement);\n\t\tdocument.body.style.overflow = 'unset';\n\t}\n\n\tonDestroy(() => {\n\t\tshow = false;\n\n\t\tif (previewElement) {\n\t\t\tdocument.body.removeChild(previewElement);\n\t\t}\n\t});\n</script>\n\n{#if show}\n\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t<div\n\t\tbind:this={previewElement}\n\t\tclass=\"modal fixed top-0 right-0 left-0 bottom-0 bg-black text-white w-full min-h-screen h-screen flex justify-center z-9999 overflow-hidden overscroll-contain\"\n\t>\n\t\t<div class=\" absolute left-0 w-full flex justify-between select-none z-20\">\n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\tclass=\" p-5\"\n\t\t\t\t\ton:pointerdown={(e) => {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tshow = false;\n\t\t\t\t\t}}\n\t\t\t\t\ton:click={(e) => {\n\t\t\t\t\t\tshow = false;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<XMark className={'size-6'} />\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\tclass=\" p-5 z-999\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tif (src.startsWith('data:image/')) {\n\t\t\t\t\t\t\tconst base64Data = src.split(',')[1];\n\t\t\t\t\t\t\tconst blob = new Blob([Uint8Array.from(atob(base64Data), (c) => c.charCodeAt(0))], {\n\t\t\t\t\t\t\t\ttype: 'image/png'\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tconst mimeType = blob.type || 'image/png';\n\t\t\t\t\t\t\t// create file name based on the MIME type, alt should be a valid file name with extension\n\t\t\t\t\t\t\tconst fileName = `${$i18n\n\t\t\t\t\t\t\t\t.t('Generated Image')\n\t\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t\t.replace(/ /g, '_')}.${mimeType.split('/')[1]}`;\n\n\t\t\t\t\t\t\t// Use FileSaver to save the blob\n\t\t\t\t\t\t\tsaveAs(blob, fileName);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else if (src.startsWith('blob:')) {\n\t\t\t\t\t\t\t// Handle blob URLs\n\t\t\t\t\t\t\tfetch(src)\n\t\t\t\t\t\t\t\t.then((response) => response.blob())\n\t\t\t\t\t\t\t\t.then((blob) => {\n\t\t\t\t\t\t\t\t\t// detect the MIME type from the blob\n\t\t\t\t\t\t\t\t\tconst mimeType = blob.type || 'image/png';\n\n\t\t\t\t\t\t\t\t\t// Create a new Blob with the correct MIME type\n\t\t\t\t\t\t\t\t\tconst blobWithType = new Blob([blob], { type: mimeType });\n\n\t\t\t\t\t\t\t\t\t// create file name based on the MIME type, alt should be a valid file name with extension\n\t\t\t\t\t\t\t\t\tconst fileName = `${$i18n\n\t\t\t\t\t\t\t\t\t\t.t('Generated Image')\n\t\t\t\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t\t\t\t.replace(/ /g, '_')}.${mimeType.split('/')[1]}`;\n\n\t\t\t\t\t\t\t\t\t// Use FileSaver to save the blob\n\t\t\t\t\t\t\t\t\tsaveAs(blobWithType, fileName);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\t\t\tconsole.error('Error downloading blob:', error);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\tsrc.startsWith('/') ||\n\t\t\t\t\t\t\tsrc.startsWith('http://') ||\n\t\t\t\t\t\t\tsrc.startsWith('https://')\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t// Handle remote URLs\n\t\t\t\t\t\t\tfetch(src)\n\t\t\t\t\t\t\t\t.then((response) => response.blob())\n\t\t\t\t\t\t\t\t.then((blob) => {\n\t\t\t\t\t\t\t\t\t// detect the MIME type from the blob\n\t\t\t\t\t\t\t\t\tconst mimeType = blob.type || 'image/png';\n\n\t\t\t\t\t\t\t\t\t// Create a new Blob with the correct MIME type\n\t\t\t\t\t\t\t\t\tconst blobWithType = new Blob([blob], { type: mimeType });\n\n\t\t\t\t\t\t\t\t\t// create file name based on the MIME type, alt should be a valid file name with extension\n\t\t\t\t\t\t\t\t\tconst fileName = `${$i18n\n\t\t\t\t\t\t\t\t\t\t.t('Generated Image')\n\t\t\t\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t\t\t\t.replace(/ /g, '_')}.${mimeType.split('/')[1]}`;\n\n\t\t\t\t\t\t\t\t\t// Use FileSaver to save the blob\n\t\t\t\t\t\t\t\t\tsaveAs(blobWithType, fileName);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\t\t\tconsole.error('Error downloading remote image:', error);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\tclass=\"w-6 h-6\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td=\"M10.75 2.75a.75.75 0 0 0-1.5 0v8.614L6.295 8.235a.75.75 0 1 0-1.09 1.03l4.25 4.5a.75.75 0 0 0 1.09 0l4.25-4.5a.75.75 0 0 0-1.09-1.03l-2.955 3.129V2.75Z\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td=\"M3.5 12.75a.75.75 0 0 0-1.5 0v2.5A2.75 2.75 0 0 0 4.75 18h10.5A2.75 2.75 0 0 0 18 15.25v-2.5a.75.75 0 0 0-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5Z\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"flex h-full max-h-full justify-center items-center z-0\">\n\t\t\t<img\n\t\t\t\tbind:this={sceneElement}\n\t\t\t\t{src}\n\t\t\t\t{alt}\n\t\t\t\tclass=\" mx-auto h-full object-scale-down select-none\"\n\t\t\t\tdraggable=\"false\"\n\t\t\t/>\n\t\t</div>\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\n\timport { settings } from '$lib/stores';\n\timport ImagePreview from './ImagePreview.svelte';\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\timport { getContext } from 'svelte';\n\n\texport let src = '';\n\texport let alt = '';\n\n\texport let className = ` w-full ${($settings?.highContrastMode ?? false) ? '' : 'outline-hidden focus:outline-hidden'}`;\n\n\texport let imageClassName = 'rounded-lg';\n\n\texport let dismissible = false;\n\texport let onDismiss = () => {};\n\n\tconst i18n = getContext('i18n');\n\n\tlet _src = '';\n\t$: _src = src.startsWith('/') ? `${WEBUI_BASE_URL}${src}` : src;\n\n\tlet showImagePreview = false;\n</script>\n\n<ImagePreview bind:show={showImagePreview} src={_src} {alt} />\n\n<div class=\" relative group w-fit flex items-center\">\n\t<button\n\t\tclass={className}\n\t\ton:click={() => {\n\t\t\tshowImagePreview = true;\n\t\t}}\n\t\taria-label={$i18n.t('Show image preview')}\n\t\ttype=\"button\"\n\t>\n\t\t<img src={_src} {alt} class={imageClassName} draggable=\"false\" data-cy=\"image\" />\n\t</button>\n\n\t{#if dismissible}\n\t\t<div class=\" absolute -top-1 -right-1\">\n\t\t\t<button\n\t\t\t\taria-label={$i18n.t('Remove image')}\n\t\t\t\tclass=\" bg-white text-black border border-white rounded-full group-hover:visible invisible transition\"\n\t\t\t\ttype=\"button\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tonDismiss();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<XMark className={'size-4'} />\n\t\t\t</button>\n\t\t</div>\n\t{/if}\n</div>\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// This file is autogenerated by tools/process-named-references.ts\nvar pairDivider = \"~\";\nvar blockDivider = \"~~\";\nfunction generateNamedReferences(input, prev) {\n    var entities = {};\n    var characters = {};\n    var blocks = input.split(blockDivider);\n    var isOptionalBlock = false;\n    for (var i = 0; blocks.length > i; i++) {\n        var entries = blocks[i].split(pairDivider);\n        for (var j = 0; j < entries.length; j += 2) {\n            var entity = entries[j];\n            var character = entries[j + 1];\n            var fullEntity = '&' + entity + ';';\n            entities[fullEntity] = character;\n            if (isOptionalBlock) {\n                entities['&' + entity] = character;\n            }\n            characters[character] = fullEntity;\n        }\n        isOptionalBlock = true;\n    }\n    return prev ?\n        { entities: __assign(__assign({}, entities), prev.entities), characters: __assign(__assign({}, characters), prev.characters) } :\n        { entities: entities, characters: characters };\n}\nexport var bodyRegExps = {\n    xml: /&(?:#\\d+|#[xX][\\da-fA-F]+|[0-9a-zA-Z]+);?/g,\n    html4: /&notin;|&(?:nbsp|iexcl|cent|pound|curren|yen|brvbar|sect|uml|copy|ordf|laquo|not|shy|reg|macr|deg|plusmn|sup2|sup3|acute|micro|para|middot|cedil|sup1|ordm|raquo|frac14|frac12|frac34|iquest|Agrave|Aacute|Acirc|Atilde|Auml|Aring|AElig|Ccedil|Egrave|Eacute|Ecirc|Euml|Igrave|Iacute|Icirc|Iuml|ETH|Ntilde|Ograve|Oacute|Ocirc|Otilde|Ouml|times|Oslash|Ugrave|Uacute|Ucirc|Uuml|Yacute|THORN|szlig|agrave|aacute|acirc|atilde|auml|aring|aelig|ccedil|egrave|eacute|ecirc|euml|igrave|iacute|icirc|iuml|eth|ntilde|ograve|oacute|ocirc|otilde|ouml|divide|oslash|ugrave|uacute|ucirc|uuml|yacute|thorn|yuml|quot|amp|lt|gt|#\\d+|#[xX][\\da-fA-F]+|[0-9a-zA-Z]+);?/g,\n    html5: /&centerdot;|&copysr;|&divideontimes;|&gtcc;|&gtcir;|&gtdot;|&gtlPar;|&gtquest;|&gtrapprox;|&gtrarr;|&gtrdot;|&gtreqless;|&gtreqqless;|&gtrless;|&gtrsim;|&ltcc;|&ltcir;|&ltdot;|&lthree;|&ltimes;|&ltlarr;|&ltquest;|&ltrPar;|&ltri;|&ltrie;|&ltrif;|&notin;|&notinE;|&notindot;|&notinva;|&notinvb;|&notinvc;|&notni;|&notniva;|&notnivb;|&notnivc;|&parallel;|&timesb;|&timesbar;|&timesd;|&(?:AElig|AMP|Aacute|Acirc|Agrave|Aring|Atilde|Auml|COPY|Ccedil|ETH|Eacute|Ecirc|Egrave|Euml|GT|Iacute|Icirc|Igrave|Iuml|LT|Ntilde|Oacute|Ocirc|Ograve|Oslash|Otilde|Ouml|QUOT|REG|THORN|Uacute|Ucirc|Ugrave|Uuml|Yacute|aacute|acirc|acute|aelig|agrave|amp|aring|atilde|auml|brvbar|ccedil|cedil|cent|copy|curren|deg|divide|eacute|ecirc|egrave|eth|euml|frac12|frac14|frac34|gt|iacute|icirc|iexcl|igrave|iquest|iuml|laquo|lt|macr|micro|middot|nbsp|not|ntilde|oacute|ocirc|ograve|ordf|ordm|oslash|otilde|ouml|para|plusmn|pound|quot|raquo|reg|sect|shy|sup1|sup2|sup3|szlig|thorn|times|uacute|ucirc|ugrave|uml|uuml|yacute|yen|yuml|#\\d+|#[xX][\\da-fA-F]+|[0-9a-zA-Z]+);?/g\n};\nexport var namedReferences = {};\nnamedReferences['xml'] = generateNamedReferences(\"lt~<~gt~>~quot~\\\"~apos~'~amp~&\");\nnamedReferences['html4'] = generateNamedReferences(\"apos~'~OElig~~oelig~~Scaron~~scaron~~Yuml~~circ~~tilde~~ensp~~emsp~~thinsp~~zwnj~~zwj~~lrm~~rlm~~ndash~~mdash~~lsquo~~rsquo~~sbquo~~ldquo~~rdquo~~bdquo~~dagger~~Dagger~~permil~~lsaquo~~rsaquo~~euro~~fnof~~Alpha~~Beta~~Gamma~~Delta~~Epsilon~~Zeta~~Eta~~Theta~~Iota~~Kappa~~Lambda~~Mu~~Nu~~Xi~~Omicron~~Pi~~Rho~~Sigma~~Tau~~Upsilon~~Phi~~Chi~~Psi~~Omega~~alpha~~beta~~gamma~~delta~~epsilon~~zeta~~eta~~theta~~iota~~kappa~~lambda~~mu~~nu~~xi~~omicron~~pi~~rho~~sigmaf~~sigma~~tau~~upsilon~~phi~~chi~~psi~~omega~~thetasym~~upsih~~piv~~bull~~hellip~~prime~~Prime~~oline~~frasl~~weierp~~image~~real~~trade~~alefsym~~larr~~uarr~~rarr~~darr~~harr~~crarr~~lArr~~uArr~~rArr~~dArr~~hArr~~forall~~part~~exist~~empty~~nabla~~isin~~notin~~ni~~prod~~sum~~minus~~lowast~~radic~~prop~~infin~~ang~~and~~or~~cap~~cup~~int~~there4~~sim~~cong~~asymp~~ne~~equiv~~le~~ge~~sub~~sup~~nsub~~sube~~supe~~oplus~~otimes~~perp~~sdot~~lceil~~rceil~~lfloor~~rfloor~~lang~~rang~~loz~~spades~~clubs~~hearts~~diams~~~nbsp~~iexcl~~cent~~pound~~curren~~yen~~brvbar~~sect~~uml~~copy~~ordf~~laquo~~not~~shy~~reg~~macr~~deg~~plusmn~~sup2~~sup3~~acute~~micro~~para~~middot~~cedil~~sup1~~ordm~~raquo~~frac14~~frac12~~frac34~~iquest~~Agrave~~Aacute~~Acirc~~Atilde~~Auml~~Aring~~AElig~~Ccedil~~Egrave~~Eacute~~Ecirc~~Euml~~Igrave~~Iacute~~Icirc~~Iuml~~ETH~~Ntilde~~Ograve~~Oacute~~Ocirc~~Otilde~~Ouml~~times~~Oslash~~Ugrave~~Uacute~~Ucirc~~Uuml~~Yacute~~THORN~~szlig~~agrave~~aacute~~acirc~~atilde~~auml~~aring~~aelig~~ccedil~~egrave~~eacute~~ecirc~~euml~~igrave~~iacute~~icirc~~iuml~~eth~~ntilde~~ograve~~oacute~~ocirc~~otilde~~ouml~~divide~~oslash~~ugrave~~uacute~~ucirc~~uuml~~yacute~~thorn~~yuml~~quot~\\\"~amp~&~lt~<~gt~>\");\nnamedReferences['html5'] = generateNamedReferences(\"Abreve~~Acy~~Afr~~Amacr~~And~~Aogon~~Aopf~~ApplyFunction~~Ascr~~Assign~~Backslash~~Barv~~Barwed~~Bcy~~Because~~Bernoullis~~Bfr~~Bopf~~Breve~~Bscr~~Bumpeq~~CHcy~~Cacute~~Cap~~CapitalDifferentialD~~Cayleys~~Ccaron~~Ccirc~~Cconint~~Cdot~~Cedilla~~CenterDot~~Cfr~~CircleDot~~CircleMinus~~CirclePlus~~CircleTimes~~ClockwiseContourIntegral~~CloseCurlyDoubleQuote~~CloseCurlyQuote~~Colon~~Colone~~Congruent~~Conint~~ContourIntegral~~Copf~~Coproduct~~CounterClockwiseContourIntegral~~Cross~~Cscr~~Cup~~CupCap~~DD~~DDotrahd~~DJcy~~DScy~~DZcy~~Darr~~Dashv~~Dcaron~~Dcy~~Del~~Dfr~~DiacriticalAcute~~DiacriticalDot~~DiacriticalDoubleAcute~~DiacriticalGrave~`~DiacriticalTilde~~Diamond~~DifferentialD~~Dopf~~Dot~~DotDot~~DotEqual~~DoubleContourIntegral~~DoubleDot~~DoubleDownArrow~~DoubleLeftArrow~~DoubleLeftRightArrow~~DoubleLeftTee~~DoubleLongLeftArrow~~DoubleLongLeftRightArrow~~DoubleLongRightArrow~~DoubleRightArrow~~DoubleRightTee~~DoubleUpArrow~~DoubleUpDownArrow~~DoubleVerticalBar~~DownArrow~~DownArrowBar~~DownArrowUpArrow~~DownBreve~~DownLeftRightVector~~DownLeftTeeVector~~DownLeftVector~~DownLeftVectorBar~~DownRightTeeVector~~DownRightVector~~DownRightVectorBar~~DownTee~~DownTeeArrow~~Downarrow~~Dscr~~Dstrok~~ENG~~Ecaron~~Ecy~~Edot~~Efr~~Element~~Emacr~~EmptySmallSquare~~EmptyVerySmallSquare~~Eogon~~Eopf~~Equal~~EqualTilde~~Equilibrium~~Escr~~Esim~~Exists~~ExponentialE~~Fcy~~Ffr~~FilledSmallSquare~~FilledVerySmallSquare~~Fopf~~ForAll~~Fouriertrf~~Fscr~~GJcy~~Gammad~~Gbreve~~Gcedil~~Gcirc~~Gcy~~Gdot~~Gfr~~Gg~~Gopf~~GreaterEqual~~GreaterEqualLess~~GreaterFullEqual~~GreaterGreater~~GreaterLess~~GreaterSlantEqual~~GreaterTilde~~Gscr~~Gt~~HARDcy~~Hacek~~Hat~^~Hcirc~~Hfr~~HilbertSpace~~Hopf~~HorizontalLine~~Hscr~~Hstrok~~HumpDownHump~~HumpEqual~~IEcy~~IJlig~~IOcy~~Icy~~Idot~~Ifr~~Im~~Imacr~~ImaginaryI~~Implies~~Int~~Integral~~Intersection~~InvisibleComma~~InvisibleTimes~~Iogon~~Iopf~~Iscr~~Itilde~~Iukcy~~Jcirc~~Jcy~~Jfr~~Jopf~~Jscr~~Jsercy~~Jukcy~~KHcy~~KJcy~~Kcedil~~Kcy~~Kfr~~Kopf~~Kscr~~LJcy~~Lacute~~Lang~~Laplacetrf~~Larr~~Lcaron~~Lcedil~~Lcy~~LeftAngleBracket~~LeftArrow~~LeftArrowBar~~LeftArrowRightArrow~~LeftCeiling~~LeftDoubleBracket~~LeftDownTeeVector~~LeftDownVector~~LeftDownVectorBar~~LeftFloor~~LeftRightArrow~~LeftRightVector~~LeftTee~~LeftTeeArrow~~LeftTeeVector~~LeftTriangle~~LeftTriangleBar~~LeftTriangleEqual~~LeftUpDownVector~~LeftUpTeeVector~~LeftUpVector~~LeftUpVectorBar~~LeftVector~~LeftVectorBar~~Leftarrow~~Leftrightarrow~~LessEqualGreater~~LessFullEqual~~LessGreater~~LessLess~~LessSlantEqual~~LessTilde~~Lfr~~Ll~~Lleftarrow~~Lmidot~~LongLeftArrow~~LongLeftRightArrow~~LongRightArrow~~Longleftarrow~~Longleftrightarrow~~Longrightarrow~~Lopf~~LowerLeftArrow~~LowerRightArrow~~Lscr~~Lsh~~Lstrok~~Lt~~Map~~Mcy~~MediumSpace~~Mellintrf~~Mfr~~MinusPlus~~Mopf~~Mscr~~NJcy~~Nacute~~Ncaron~~Ncedil~~Ncy~~NegativeMediumSpace~~NegativeThickSpace~~NegativeThinSpace~~NegativeVeryThinSpace~~NestedGreaterGreater~~NestedLessLess~~NewLine~\\n~Nfr~~NoBreak~~NonBreakingSpace~~Nopf~~Not~~NotCongruent~~NotCupCap~~NotDoubleVerticalBar~~NotElement~~NotEqual~~NotEqualTilde~~NotExists~~NotGreater~~NotGreaterEqual~~NotGreaterFullEqual~~NotGreaterGreater~~NotGreaterLess~~NotGreaterSlantEqual~~NotGreaterTilde~~NotHumpDownHump~~NotHumpEqual~~NotLeftTriangle~~NotLeftTriangleBar~~NotLeftTriangleEqual~~NotLess~~NotLessEqual~~NotLessGreater~~NotLessLess~~NotLessSlantEqual~~NotLessTilde~~NotNestedGreaterGreater~~NotNestedLessLess~~NotPrecedes~~NotPrecedesEqual~~NotPrecedesSlantEqual~~NotReverseElement~~NotRightTriangle~~NotRightTriangleBar~~NotRightTriangleEqual~~NotSquareSubset~~NotSquareSubsetEqual~~NotSquareSuperset~~NotSquareSupersetEqual~~NotSubset~~NotSubsetEqual~~NotSucceeds~~NotSucceedsEqual~~NotSucceedsSlantEqual~~NotSucceedsTilde~~NotSuperset~~NotSupersetEqual~~NotTilde~~NotTildeEqual~~NotTildeFullEqual~~NotTildeTilde~~NotVerticalBar~~Nscr~~Ocy~~Odblac~~Ofr~~Omacr~~Oopf~~OpenCurlyDoubleQuote~~OpenCurlyQuote~~Or~~Oscr~~Otimes~~OverBar~~OverBrace~~OverBracket~~OverParenthesis~~PartialD~~Pcy~~Pfr~~PlusMinus~~Poincareplane~~Popf~~Pr~~Precedes~~PrecedesEqual~~PrecedesSlantEqual~~PrecedesTilde~~Product~~Proportion~~Proportional~~Pscr~~Qfr~~Qopf~~Qscr~~RBarr~~Racute~~Rang~~Rarr~~Rarrtl~~Rcaron~~Rcedil~~Rcy~~Re~~ReverseElement~~ReverseEquilibrium~~ReverseUpEquilibrium~~Rfr~~RightAngleBracket~~RightArrow~~RightArrowBar~~RightArrowLeftArrow~~RightCeiling~~RightDoubleBracket~~RightDownTeeVector~~RightDownVector~~RightDownVectorBar~~RightFloor~~RightTee~~RightTeeArrow~~RightTeeVector~~RightTriangle~~RightTriangleBar~~RightTriangleEqual~~RightUpDownVector~~RightUpTeeVector~~RightUpVector~~RightUpVectorBar~~RightVector~~RightVectorBar~~Rightarrow~~Ropf~~RoundImplies~~Rrightarrow~~Rscr~~Rsh~~RuleDelayed~~SHCHcy~~SHcy~~SOFTcy~~Sacute~~Sc~~Scedil~~Scirc~~Scy~~Sfr~~ShortDownArrow~~ShortLeftArrow~~ShortRightArrow~~ShortUpArrow~~SmallCircle~~Sopf~~Sqrt~~Square~~SquareIntersection~~SquareSubset~~SquareSubsetEqual~~SquareSuperset~~SquareSupersetEqual~~SquareUnion~~Sscr~~Star~~Sub~~Subset~~SubsetEqual~~Succeeds~~SucceedsEqual~~SucceedsSlantEqual~~SucceedsTilde~~SuchThat~~Sum~~Sup~~Superset~~SupersetEqual~~Supset~~TRADE~~TSHcy~~TScy~~Tab~\\t~Tcaron~~Tcedil~~Tcy~~Tfr~~Therefore~~ThickSpace~~ThinSpace~~Tilde~~TildeEqual~~TildeFullEqual~~TildeTilde~~Topf~~TripleDot~~Tscr~~Tstrok~~Uarr~~Uarrocir~~Ubrcy~~Ubreve~~Ucy~~Udblac~~Ufr~~Umacr~~UnderBar~_~UnderBrace~~UnderBracket~~UnderParenthesis~~Union~~UnionPlus~~Uogon~~Uopf~~UpArrow~~UpArrowBar~~UpArrowDownArrow~~UpDownArrow~~UpEquilibrium~~UpTee~~UpTeeArrow~~Uparrow~~Updownarrow~~UpperLeftArrow~~UpperRightArrow~~Upsi~~Uring~~Uscr~~Utilde~~VDash~~Vbar~~Vcy~~Vdash~~Vdashl~~Vee~~Verbar~~Vert~~VerticalBar~~VerticalLine~|~VerticalSeparator~~VerticalTilde~~VeryThinSpace~~Vfr~~Vopf~~Vscr~~Vvdash~~Wcirc~~Wedge~~Wfr~~Wopf~~Wscr~~Xfr~~Xopf~~Xscr~~YAcy~~YIcy~~YUcy~~Ycirc~~Ycy~~Yfr~~Yopf~~Yscr~~ZHcy~~Zacute~~Zcaron~~Zcy~~Zdot~~ZeroWidthSpace~~Zfr~~Zopf~~Zscr~~abreve~~ac~~acE~~acd~~acy~~af~~afr~~aleph~~amacr~~amalg~~andand~~andd~~andslope~~andv~~ange~~angle~~angmsd~~angmsdaa~~angmsdab~~angmsdac~~angmsdad~~angmsdae~~angmsdaf~~angmsdag~~angmsdah~~angrt~~angrtvb~~angrtvbd~~angsph~~angst~~angzarr~~aogon~~aopf~~ap~~apE~~apacir~~ape~~apid~~approx~~approxeq~~ascr~~ast~*~asympeq~~awconint~~awint~~bNot~~backcong~~backepsilon~~backprime~~backsim~~backsimeq~~barvee~~barwed~~barwedge~~bbrk~~bbrktbrk~~bcong~~bcy~~becaus~~because~~bemptyv~~bepsi~~bernou~~beth~~between~~bfr~~bigcap~~bigcirc~~bigcup~~bigodot~~bigoplus~~bigotimes~~bigsqcup~~bigstar~~bigtriangledown~~bigtriangleup~~biguplus~~bigvee~~bigwedge~~bkarow~~blacklozenge~~blacksquare~~blacktriangle~~blacktriangledown~~blacktriangleleft~~blacktriangleright~~blank~~blk12~~blk14~~blk34~~block~~bne~=~bnequiv~~bnot~~bopf~~bot~~bottom~~bowtie~~boxDL~~boxDR~~boxDl~~boxDr~~boxH~~boxHD~~boxHU~~boxHd~~boxHu~~boxUL~~boxUR~~boxUl~~boxUr~~boxV~~boxVH~~boxVL~~boxVR~~boxVh~~boxVl~~boxVr~~boxbox~~boxdL~~boxdR~~boxdl~~boxdr~~boxh~~boxhD~~boxhU~~boxhd~~boxhu~~boxminus~~boxplus~~boxtimes~~boxuL~~boxuR~~boxul~~boxur~~boxv~~boxvH~~boxvL~~boxvR~~boxvh~~boxvl~~boxvr~~bprime~~breve~~bscr~~bsemi~~bsim~~bsime~~bsol~\\\\~bsolb~~bsolhsub~~bullet~~bump~~bumpE~~bumpe~~bumpeq~~cacute~~capand~~capbrcup~~capcap~~capcup~~capdot~~caps~~caret~~caron~~ccaps~~ccaron~~ccirc~~ccups~~ccupssm~~cdot~~cemptyv~~centerdot~~cfr~~chcy~~check~~checkmark~~cir~~cirE~~circeq~~circlearrowleft~~circlearrowright~~circledR~~circledS~~circledast~~circledcirc~~circleddash~~cire~~cirfnint~~cirmid~~cirscir~~clubsuit~~colon~:~colone~~coloneq~~comma~,~commat~@~comp~~compfn~~complement~~complexes~~congdot~~conint~~copf~~coprod~~copysr~~cross~~cscr~~csub~~csube~~csup~~csupe~~ctdot~~cudarrl~~cudarrr~~cuepr~~cuesc~~cularr~~cularrp~~cupbrcap~~cupcap~~cupcup~~cupdot~~cupor~~cups~~curarr~~curarrm~~curlyeqprec~~curlyeqsucc~~curlyvee~~curlywedge~~curvearrowleft~~curvearrowright~~cuvee~~cuwed~~cwconint~~cwint~~cylcty~~dHar~~daleth~~dash~~dashv~~dbkarow~~dblac~~dcaron~~dcy~~dd~~ddagger~~ddarr~~ddotseq~~demptyv~~dfisht~~dfr~~dharl~~dharr~~diam~~diamond~~diamondsuit~~die~~digamma~~disin~~div~~divideontimes~~divonx~~djcy~~dlcorn~~dlcrop~~dollar~$~dopf~~dot~~doteq~~doteqdot~~dotminus~~dotplus~~dotsquare~~doublebarwedge~~downarrow~~downdownarrows~~downharpoonleft~~downharpoonright~~drbkarow~~drcorn~~drcrop~~dscr~~dscy~~dsol~~dstrok~~dtdot~~dtri~~dtrif~~duarr~~duhar~~dwangle~~dzcy~~dzigrarr~~eDDot~~eDot~~easter~~ecaron~~ecir~~ecolon~~ecy~~edot~~ee~~efDot~~efr~~eg~~egs~~egsdot~~el~~elinters~~ell~~els~~elsdot~~emacr~~emptyset~~emptyv~~emsp13~~emsp14~~eng~~eogon~~eopf~~epar~~eparsl~~eplus~~epsi~~epsiv~~eqcirc~~eqcolon~~eqsim~~eqslantgtr~~eqslantless~~equals~=~equest~~equivDD~~eqvparsl~~erDot~~erarr~~escr~~esdot~~esim~~excl~!~expectation~~exponentiale~~fallingdotseq~~fcy~~female~~ffilig~~fflig~~ffllig~~ffr~~filig~~fjlig~fj~flat~~fllig~~fltns~~fopf~~fork~~forkv~~fpartint~~frac13~~frac15~~frac16~~frac18~~frac23~~frac25~~frac35~~frac38~~frac45~~frac56~~frac58~~frac78~~frown~~fscr~~gE~~gEl~~gacute~~gammad~~gap~~gbreve~~gcirc~~gcy~~gdot~~gel~~geq~~geqq~~geqslant~~ges~~gescc~~gesdot~~gesdoto~~gesdotol~~gesl~~gesles~~gfr~~gg~~ggg~~gimel~~gjcy~~gl~~glE~~gla~~glj~~gnE~~gnap~~gnapprox~~gne~~gneq~~gneqq~~gnsim~~gopf~~grave~`~gscr~~gsim~~gsime~~gsiml~~gtcc~~gtcir~~gtdot~~gtlPar~~gtquest~~gtrapprox~~gtrarr~~gtrdot~~gtreqless~~gtreqqless~~gtrless~~gtrsim~~gvertneqq~~gvnE~~hairsp~~half~~hamilt~~hardcy~~harrcir~~harrw~~hbar~~hcirc~~heartsuit~~hercon~~hfr~~hksearow~~hkswarow~~hoarr~~homtht~~hookleftarrow~~hookrightarrow~~hopf~~horbar~~hscr~~hslash~~hstrok~~hybull~~hyphen~~ic~~icy~~iecy~~iff~~ifr~~ii~~iiiint~~iiint~~iinfin~~iiota~~ijlig~~imacr~~imagline~~imagpart~~imath~~imof~~imped~~in~~incare~~infintie~~inodot~~intcal~~integers~~intercal~~intlarhk~~intprod~~iocy~~iogon~~iopf~~iprod~~iscr~~isinE~~isindot~~isins~~isinsv~~isinv~~it~~itilde~~iukcy~~jcirc~~jcy~~jfr~~jmath~~jopf~~jscr~~jsercy~~jukcy~~kappav~~kcedil~~kcy~~kfr~~kgreen~~khcy~~kjcy~~kopf~~kscr~~lAarr~~lAtail~~lBarr~~lE~~lEg~~lHar~~lacute~~laemptyv~~lagran~~langd~~langle~~lap~~larrb~~larrbfs~~larrfs~~larrhk~~larrlp~~larrpl~~larrsim~~larrtl~~lat~~latail~~late~~lates~~lbarr~~lbbrk~~lbrace~{~lbrack~[~lbrke~~lbrksld~~lbrkslu~~lcaron~~lcedil~~lcub~{~lcy~~ldca~~ldquor~~ldrdhar~~ldrushar~~ldsh~~leftarrow~~leftarrowtail~~leftharpoondown~~leftharpoonup~~leftleftarrows~~leftrightarrow~~leftrightarrows~~leftrightharpoons~~leftrightsquigarrow~~leftthreetimes~~leg~~leq~~leqq~~leqslant~~les~~lescc~~lesdot~~lesdoto~~lesdotor~~lesg~~lesges~~lessapprox~~lessdot~~lesseqgtr~~lesseqqgtr~~lessgtr~~lesssim~~lfisht~~lfr~~lg~~lgE~~lhard~~lharu~~lharul~~lhblk~~ljcy~~ll~~llarr~~llcorner~~llhard~~lltri~~lmidot~~lmoust~~lmoustache~~lnE~~lnap~~lnapprox~~lne~~lneq~~lneqq~~lnsim~~loang~~loarr~~lobrk~~longleftarrow~~longleftrightarrow~~longmapsto~~longrightarrow~~looparrowleft~~looparrowright~~lopar~~lopf~~loplus~~lotimes~~lowbar~_~lozenge~~lozf~~lpar~(~lparlt~~lrarr~~lrcorner~~lrhar~~lrhard~~lrtri~~lscr~~lsh~~lsim~~lsime~~lsimg~~lsqb~[~lsquor~~lstrok~~ltcc~~ltcir~~ltdot~~lthree~~ltimes~~ltlarr~~ltquest~~ltrPar~~ltri~~ltrie~~ltrif~~lurdshar~~luruhar~~lvertneqq~~lvnE~~mDDot~~male~~malt~~maltese~~map~~mapsto~~mapstodown~~mapstoleft~~mapstoup~~marker~~mcomma~~mcy~~measuredangle~~mfr~~mho~~mid~~midast~*~midcir~~minusb~~minusd~~minusdu~~mlcp~~mldr~~mnplus~~models~~mopf~~mp~~mscr~~mstpos~~multimap~~mumap~~nGg~~nGt~~nGtv~~nLeftarrow~~nLeftrightarrow~~nLl~~nLt~~nLtv~~nRightarrow~~nVDash~~nVdash~~nacute~~nang~~nap~~napE~~napid~~napos~~napprox~~natur~~natural~~naturals~~nbump~~nbumpe~~ncap~~ncaron~~ncedil~~ncong~~ncongdot~~ncup~~ncy~~neArr~~nearhk~~nearr~~nearrow~~nedot~~nequiv~~nesear~~nesim~~nexist~~nexists~~nfr~~ngE~~nge~~ngeq~~ngeqq~~ngeqslant~~nges~~ngsim~~ngt~~ngtr~~nhArr~~nharr~~nhpar~~nis~~nisd~~niv~~njcy~~nlArr~~nlE~~nlarr~~nldr~~nle~~nleftarrow~~nleftrightarrow~~nleq~~nleqq~~nleqslant~~nles~~nless~~nlsim~~nlt~~nltri~~nltrie~~nmid~~nopf~~notinE~~notindot~~notinva~~notinvb~~notinvc~~notni~~notniva~~notnivb~~notnivc~~npar~~nparallel~~nparsl~~npart~~npolint~~npr~~nprcue~~npre~~nprec~~npreceq~~nrArr~~nrarr~~nrarrc~~nrarrw~~nrightarrow~~nrtri~~nrtrie~~nsc~~nsccue~~nsce~~nscr~~nshortmid~~nshortparallel~~nsim~~nsime~~nsimeq~~nsmid~~nspar~~nsqsube~~nsqsupe~~nsubE~~nsube~~nsubset~~nsubseteq~~nsubseteqq~~nsucc~~nsucceq~~nsup~~nsupE~~nsupe~~nsupset~~nsupseteq~~nsupseteqq~~ntgl~~ntlg~~ntriangleleft~~ntrianglelefteq~~ntriangleright~~ntrianglerighteq~~num~#~numero~~numsp~~nvDash~~nvHarr~~nvap~~nvdash~~nvge~~nvgt~>~nvinfin~~nvlArr~~nvle~~nvlt~<~nvltrie~~nvrArr~~nvrtrie~~nvsim~~nwArr~~nwarhk~~nwarr~~nwarrow~~nwnear~~oS~~oast~~ocir~~ocy~~odash~~odblac~~odiv~~odot~~odsold~~ofcir~~ofr~~ogon~~ogt~~ohbar~~ohm~~oint~~olarr~~olcir~~olcross~~olt~~omacr~~omid~~ominus~~oopf~~opar~~operp~~orarr~~ord~~order~~orderof~~origof~~oror~~orslope~~orv~~oscr~~osol~~otimesas~~ovbar~~par~~parallel~~parsim~~parsl~~pcy~~percnt~%~period~.~pertenk~~pfr~~phiv~~phmmat~~phone~~pitchfork~~planck~~planckh~~plankv~~plus~+~plusacir~~plusb~~pluscir~~plusdo~~plusdu~~pluse~~plussim~~plustwo~~pm~~pointint~~popf~~pr~~prE~~prap~~prcue~~pre~~prec~~precapprox~~preccurlyeq~~preceq~~precnapprox~~precneqq~~precnsim~~precsim~~primes~~prnE~~prnap~~prnsim~~profalar~~profline~~profsurf~~propto~~prsim~~prurel~~pscr~~puncsp~~qfr~~qint~~qopf~~qprime~~qscr~~quaternions~~quatint~~quest~?~questeq~~rAarr~~rAtail~~rBarr~~rHar~~race~~racute~~raemptyv~~rangd~~range~~rangle~~rarrap~~rarrb~~rarrbfs~~rarrc~~rarrfs~~rarrhk~~rarrlp~~rarrpl~~rarrsim~~rarrtl~~rarrw~~ratail~~ratio~~rationals~~rbarr~~rbbrk~~rbrace~}~rbrack~]~rbrke~~rbrksld~~rbrkslu~~rcaron~~rcedil~~rcub~}~rcy~~rdca~~rdldhar~~rdquor~~rdsh~~realine~~realpart~~reals~~rect~~rfisht~~rfr~~rhard~~rharu~~rharul~~rhov~~rightarrow~~rightarrowtail~~rightharpoondown~~rightharpoonup~~rightleftarrows~~rightleftharpoons~~rightrightarrows~~rightsquigarrow~~rightthreetimes~~ring~~risingdotseq~~rlarr~~rlhar~~rmoust~~rmoustache~~rnmid~~roang~~roarr~~robrk~~ropar~~ropf~~roplus~~rotimes~~rpar~)~rpargt~~rppolint~~rrarr~~rscr~~rsh~~rsqb~]~rsquor~~rthree~~rtimes~~rtri~~rtrie~~rtrif~~rtriltri~~ruluhar~~rx~~sacute~~sc~~scE~~scap~~sccue~~sce~~scedil~~scirc~~scnE~~scnap~~scnsim~~scpolint~~scsim~~scy~~sdotb~~sdote~~seArr~~searhk~~searr~~searrow~~semi~;~seswar~~setminus~~setmn~~sext~~sfr~~sfrown~~sharp~~shchcy~~shcy~~shortmid~~shortparallel~~sigmav~~simdot~~sime~~simeq~~simg~~simgE~~siml~~simlE~~simne~~simplus~~simrarr~~slarr~~smallsetminus~~smashp~~smeparsl~~smid~~smile~~smt~~smte~~smtes~~softcy~~sol~/~solb~~solbar~~sopf~~spadesuit~~spar~~sqcap~~sqcaps~~sqcup~~sqcups~~sqsub~~sqsube~~sqsubset~~sqsubseteq~~sqsup~~sqsupe~~sqsupset~~sqsupseteq~~squ~~square~~squarf~~squf~~srarr~~sscr~~ssetmn~~ssmile~~sstarf~~star~~starf~~straightepsilon~~straightphi~~strns~~subE~~subdot~~subedot~~submult~~subnE~~subne~~subplus~~subrarr~~subset~~subseteq~~subseteqq~~subsetneq~~subsetneqq~~subsim~~subsub~~subsup~~succ~~succapprox~~succcurlyeq~~succeq~~succnapprox~~succneqq~~succnsim~~succsim~~sung~~supE~~supdot~~supdsub~~supedot~~suphsol~~suphsub~~suplarr~~supmult~~supnE~~supne~~supplus~~supset~~supseteq~~supseteqq~~supsetneq~~supsetneqq~~supsim~~supsub~~supsup~~swArr~~swarhk~~swarr~~swarrow~~swnwar~~target~~tbrk~~tcaron~~tcedil~~tcy~~tdot~~telrec~~tfr~~therefore~~thetav~~thickapprox~~thicksim~~thkap~~thksim~~timesb~~timesbar~~timesd~~tint~~toea~~top~~topbot~~topcir~~topf~~topfork~~tosa~~tprime~~triangle~~triangledown~~triangleleft~~trianglelefteq~~triangleq~~triangleright~~trianglerighteq~~tridot~~trie~~triminus~~triplus~~trisb~~tritime~~trpezium~~tscr~~tscy~~tshcy~~tstrok~~twixt~~twoheadleftarrow~~twoheadrightarrow~~uHar~~ubrcy~~ubreve~~ucy~~udarr~~udblac~~udhar~~ufisht~~ufr~~uharl~~uharr~~uhblk~~ulcorn~~ulcorner~~ulcrop~~ultri~~umacr~~uogon~~uopf~~uparrow~~updownarrow~~upharpoonleft~~upharpoonright~~uplus~~upsi~~upuparrows~~urcorn~~urcorner~~urcrop~~uring~~urtri~~uscr~~utdot~~utilde~~utri~~utrif~~uuarr~~uwangle~~vArr~~vBar~~vBarv~~vDash~~vangrt~~varepsilon~~varkappa~~varnothing~~varphi~~varpi~~varpropto~~varr~~varrho~~varsigma~~varsubsetneq~~varsubsetneqq~~varsupsetneq~~varsupsetneqq~~vartheta~~vartriangleleft~~vartriangleright~~vcy~~vdash~~vee~~veebar~~veeeq~~vellip~~verbar~|~vert~|~vfr~~vltri~~vnsub~~vnsup~~vopf~~vprop~~vrtri~~vscr~~vsubnE~~vsubne~~vsupnE~~vsupne~~vzigzag~~wcirc~~wedbar~~wedge~~wedgeq~~wfr~~wopf~~wp~~wr~~wreath~~wscr~~xcap~~xcirc~~xcup~~xdtri~~xfr~~xhArr~~xharr~~xlArr~~xlarr~~xmap~~xnis~~xodot~~xopf~~xoplus~~xotime~~xrArr~~xrarr~~xscr~~xsqcup~~xuplus~~xutri~~xvee~~xwedge~~yacy~~ycirc~~ycy~~yfr~~yicy~~yopf~~yscr~~yucy~~zacute~~zcaron~~zcy~~zdot~~zeetrf~~zfr~~zhcy~~zigrarr~~zopf~~zscr~~~AMP~&~COPY~~GT~>~LT~<~QUOT~\\\"~REG~\", namedReferences['html4']);\n//# sourceMappingURL=named-references.js.map","export var numericUnicodeMap = {\n    0: 65533,\n    128: 8364,\n    130: 8218,\n    131: 402,\n    132: 8222,\n    133: 8230,\n    134: 8224,\n    135: 8225,\n    136: 710,\n    137: 8240,\n    138: 352,\n    139: 8249,\n    140: 338,\n    142: 381,\n    145: 8216,\n    146: 8217,\n    147: 8220,\n    148: 8221,\n    149: 8226,\n    150: 8211,\n    151: 8212,\n    152: 732,\n    153: 8482,\n    154: 353,\n    155: 8250,\n    156: 339,\n    158: 382,\n    159: 376\n};\n//# sourceMappingURL=numeric-unicode-map.js.map","export var fromCodePoint = String.fromCodePoint ||\n    function (astralCodePoint) {\n        return String.fromCharCode(Math.floor((astralCodePoint - 0x10000) / 0x400) + 0xd800, ((astralCodePoint - 0x10000) % 0x400) + 0xdc00);\n    };\n// @ts-expect-error - String.prototype.codePointAt might not exist in older node versions\nexport var getCodePoint = String.prototype.codePointAt\n    ? function (input, position) {\n        return input.codePointAt(position);\n    }\n    : function (input, position) {\n        return (input.charCodeAt(position) - 0xd800) * 0x400 + input.charCodeAt(position + 1) - 0xdc00 + 0x10000;\n    };\nexport var highSurrogateFrom = 0xd800;\nexport var highSurrogateTo = 0xdbff;\n//# sourceMappingURL=surrogate-pairs.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { bodyRegExps, namedReferences } from './named-references.js';\nimport { numericUnicodeMap } from './numeric-unicode-map.js';\nimport { fromCodePoint, getCodePoint } from './surrogate-pairs.js';\nvar allNamedReferences = __assign(__assign({}, namedReferences), { all: namedReferences.html5 });\nvar encodeRegExps = {\n    specialChars: /[<>'\"&]/g,\n    nonAscii: /[<>'\"&\\u0080-\\uD7FF\\uE000-\\uFFFF\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]?/g,\n    nonAsciiPrintable: /[<>'\"&\\x01-\\x08\\x11-\\x15\\x17-\\x1F\\x7f-\\uD7FF\\uE000-\\uFFFF\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]?/g,\n    nonAsciiPrintableOnly: /[\\x01-\\x08\\x11-\\x15\\x17-\\x1F\\x7f-\\uD7FF\\uE000-\\uFFFF\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]?/g,\n    extensive: /[\\x01-\\x0c\\x0e-\\x1f\\x21-\\x2c\\x2e-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7d\\x7f-\\uD7FF\\uE000-\\uFFFF\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]?/g\n};\nvar defaultEncodeOptions = {\n    mode: 'specialChars',\n    level: 'all',\n    numeric: 'decimal'\n};\n/** Encodes all the necessary (specified by `level`) characters in the text */\nexport function encode(text, _a) {\n    var _b = _a === void 0 ? defaultEncodeOptions : _a, _c = _b.mode, mode = _c === void 0 ? 'specialChars' : _c, _d = _b.numeric, numeric = _d === void 0 ? 'decimal' : _d, _e = _b.level, level = _e === void 0 ? 'all' : _e;\n    if (!text) {\n        return '';\n    }\n    var encodeRegExp = encodeRegExps[mode];\n    var references = allNamedReferences[level].characters;\n    var isHex = numeric === 'hexadecimal';\n    return String.prototype.replace.call(text, encodeRegExp, function (input) {\n        var result = references[input];\n        if (!result) {\n            var code = input.length > 1 ? getCodePoint(input, 0) : input.charCodeAt(0);\n            result = (isHex ? '&#x' + code.toString(16) : '&#' + code) + ';';\n        }\n        return result;\n    });\n}\nvar defaultDecodeOptions = {\n    scope: 'body',\n    level: 'all'\n};\nvar strict = /&(?:#\\d+|#[xX][\\da-fA-F]+|[0-9a-zA-Z]+);/g;\nvar attribute = /&(?:#\\d+|#[xX][\\da-fA-F]+|[0-9a-zA-Z]+)[;=]?/g;\nvar baseDecodeRegExps = {\n    xml: {\n        strict: strict,\n        attribute: attribute,\n        body: bodyRegExps.xml\n    },\n    html4: {\n        strict: strict,\n        attribute: attribute,\n        body: bodyRegExps.html4\n    },\n    html5: {\n        strict: strict,\n        attribute: attribute,\n        body: bodyRegExps.html5\n    }\n};\nvar decodeRegExps = __assign(__assign({}, baseDecodeRegExps), { all: baseDecodeRegExps.html5 });\nvar fromCharCode = String.fromCharCode;\nvar outOfBoundsChar = fromCharCode(65533);\nvar defaultDecodeEntityOptions = {\n    level: 'all'\n};\nfunction getDecodedEntity(entity, references, isAttribute, isStrict) {\n    var decodeResult = entity;\n    var decodeEntityLastChar = entity[entity.length - 1];\n    if (isAttribute && decodeEntityLastChar === '=') {\n        decodeResult = entity;\n    }\n    else if (isStrict && decodeEntityLastChar !== ';') {\n        decodeResult = entity;\n    }\n    else {\n        var decodeResultByReference = references[entity];\n        if (decodeResultByReference) {\n            decodeResult = decodeResultByReference;\n        }\n        else if (entity[0] === '&' && entity[1] === '#') {\n            var decodeSecondChar = entity[2];\n            var decodeCode = decodeSecondChar == 'x' || decodeSecondChar == 'X'\n                ? parseInt(entity.substr(3), 16)\n                : parseInt(entity.substr(2));\n            decodeResult =\n                decodeCode >= 0x10ffff\n                    ? outOfBoundsChar\n                    : decodeCode > 65535\n                        ? fromCodePoint(decodeCode)\n                        : fromCharCode(numericUnicodeMap[decodeCode] || decodeCode);\n        }\n    }\n    return decodeResult;\n}\n/** Decodes a single entity */\nexport function decodeEntity(entity, _a) {\n    var _b = _a === void 0 ? defaultDecodeEntityOptions : _a, _c = _b.level, level = _c === void 0 ? 'all' : _c;\n    if (!entity) {\n        return '';\n    }\n    return getDecodedEntity(entity, allNamedReferences[level].entities, false, false);\n}\n/** Decodes all entities in the text */\nexport function decode(text, _a) {\n    var _b = _a === void 0 ? defaultDecodeOptions : _a, _c = _b.level, level = _c === void 0 ? 'all' : _c, _d = _b.scope, scope = _d === void 0 ? level === 'xml' ? 'strict' : 'body' : _d;\n    if (!text) {\n        return '';\n    }\n    var decodeRegExp = decodeRegExps[level][scope];\n    var references = allNamedReferences[level].entities;\n    var isAttribute = scope === 'attribute';\n    var isStrict = scope === 'strict';\n    return text.replace(decodeRegExp, function (entity) { return getDecodedEntity(entity, references, isAttribute, isStrict); });\n}\n//# sourceMappingURL=index.js.map","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '2';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '2';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport fileSaver from 'file-saver';\n\tconst { saveAs } = fileSaver;\n\n\timport { toast } from 'svelte-sonner';\n\n\timport panzoom, { type PanZoom } from 'panzoom';\n\timport DOMPurify from 'dompurify';\n\n\timport { onMount, getContext } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport { copyToClipboard } from '$lib/utils';\n\n\timport DocumentDuplicate from '../icons/DocumentDuplicate.svelte';\n\timport Tooltip from './Tooltip.svelte';\n\timport Clipboard from '../icons/Clipboard.svelte';\n\timport Reset from '../icons/Reset.svelte';\n\timport Download from '../icons/Download.svelte';\n\n\texport let className = '';\n\texport let svg = '';\n\texport let content = '';\n\n\tlet instance: PanZoom;\n\n\tlet sceneParentElement: HTMLElement;\n\tlet sceneElement: HTMLElement;\n\n\t$: if (sceneElement) {\n\t\tinstance = panzoom(sceneElement, {\n\t\t\tbounds: true,\n\t\t\tboundsPadding: 0.1,\n\n\t\t\tzoomSpeed: 0.065\n\t\t});\n\t}\n\tconst resetPanZoomViewport = () => {\n\t\tinstance.moveTo(0, 0);\n\t\tinstance.zoomAbs(0, 0, 1);\n\t\tconsole.log(instance.getTransform());\n\t};\n\n\tconst downloadAsSVG = () => {\n\t\tconst svgBlob = new Blob([svg], { type: 'image/svg+xml' });\n\t\tsaveAs(svgBlob, `diagram.svg`);\n\t};\n</script>\n\n<div bind:this={sceneParentElement} class=\"relative {className}\">\n\t<div bind:this={sceneElement} class=\"flex h-full max-h-full justify-center items-center\">\n\t\t{@html DOMPurify.sanitize(svg, {\n\t\t\tUSE_PROFILES: { svg: true, svgFilters: true }, // allow <svg>, <defs>, <filter>, etc.\n\t\t\tWHOLE_DOCUMENT: false,\n\t\t\tADD_TAGS: ['style', 'foreignObject'], // include foreignObject if using HTML labels\n\t\t\tADD_ATTR: [\n\t\t\t\t'class',\n\t\t\t\t'style',\n\t\t\t\t'id',\n\t\t\t\t'data-*',\n\t\t\t\t'viewBox',\n\t\t\t\t'preserveAspectRatio',\n\t\t\t\t// markers / arrows\n\t\t\t\t'markerWidth',\n\t\t\t\t'markerHeight',\n\t\t\t\t'markerUnits',\n\t\t\t\t'refX',\n\t\t\t\t'refY',\n\t\t\t\t'orient',\n\t\t\t\t// hrefs (for gradients, markers, etc.)\n\t\t\t\t'href',\n\t\t\t\t'xlink:href',\n\t\t\t\t// text positioning\n\t\t\t\t'dominant-baseline',\n\t\t\t\t'text-anchor',\n\t\t\t\t// pattern / clip / mask units\n\t\t\t\t'clipPathUnits',\n\t\t\t\t'filterUnits',\n\t\t\t\t'patternUnits',\n\t\t\t\t'patternContentUnits',\n\t\t\t\t'maskUnits',\n\t\t\t\t// a11y niceties\n\t\t\t\t'role',\n\t\t\t\t'aria-label',\n\t\t\t\t'aria-labelledby',\n\t\t\t\t'aria-hidden',\n\t\t\t\t'tabindex'\n\t\t\t],\n\t\t\tSANITIZE_DOM: true\n\t\t})}\n\t</div>\n\n\t{#if content}\n\t\t<div class=\" absolute top-2.5 right-2.5\">\n\t\t\t<div class=\"flex gap-1\">\n\t\t\t\t<Tooltip content={$i18n.t('Download as SVG')}>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"p-1.5 rounded-lg border border-gray-100 dark:border-none dark:bg-gray-850 hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tdownloadAsSVG();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Download className=\" size-4\" />\n\t\t\t\t\t</button>\n\t\t\t\t</Tooltip>\n\n\t\t\t\t<Tooltip content={$i18n.t('Reset view')}>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"p-1.5 rounded-lg border border-gray-100 dark:border-none dark:bg-gray-850 hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tresetPanZoomViewport();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Reset className=\" size-4\" />\n\t\t\t\t\t</button>\n\t\t\t\t</Tooltip>\n\n\t\t\t\t<Tooltip content={$i18n.t('Copy to clipboard')}>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"p-1.5 rounded-lg border border-gray-100 dark:border-none dark:bg-gray-850 hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tcopyToClipboard(content);\n\t\t\t\t\t\t\ttoast.success($i18n.t('Copied to clipboard'));\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Clipboard className=\" size-4\" strokeWidth=\"1.5\" />\n\t\t\t\t\t</button>\n\t\t\t\t</Tooltip>\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n</div>\n","<script lang=\"ts\">\n\texport let className = 'w-4 h-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport hljs from 'highlight.js';\n\timport { toast } from 'svelte-sonner';\n\timport { getContext, onMount, tick, onDestroy } from 'svelte';\n\timport { config } from '$lib/stores';\n\n\timport PyodideWorker from '$lib/workers/pyodide.worker?worker';\n\timport { executeCode } from '$lib/apis/utils';\n\timport {\n\t\tcopyToClipboard,\n\t\tinitMermaid,\n\t\trenderMermaidDiagram,\n\t\trenderVegaVisualization\n\t} from '$lib/utils';\n\n\timport 'highlight.js/styles/github-dark.min.css';\n\n\timport CodeEditor from '$lib/components/common/CodeEditor.svelte';\n\timport SvgPanZoom from '$lib/components/common/SVGPanZoom.svelte';\n\n\timport ChevronUp from '$lib/components/icons/ChevronUp.svelte';\n\timport ChevronUpDown from '$lib/components/icons/ChevronUpDown.svelte';\n\timport CommandLine from '$lib/components/icons/CommandLine.svelte';\n\timport Cube from '$lib/components/icons/Cube.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let id = '';\n\texport let edit = true;\n\n\texport let onSave = (e) => {};\n\texport let onUpdate = (e) => {};\n\texport let onPreview = (e) => {};\n\n\texport let save = false;\n\texport let run = true;\n\texport let preview = false;\n\texport let collapsed = false;\n\n\texport let token;\n\texport let lang = '';\n\texport let code = '';\n\texport let attributes = {};\n\n\texport let className = '';\n\texport let editorClassName = '';\n\texport let stickyButtonsClassName = 'top-0';\n\n\tlet pyodideWorker = null;\n\n\tlet _code = '';\n\t$: if (code) {\n\t\tupdateCode();\n\t}\n\n\tconst updateCode = () => {\n\t\t_code = code;\n\t};\n\n\tlet _token = null;\n\n\tlet renderHTML = null;\n\tlet renderError = null;\n\n\tlet highlightedCode = null;\n\tlet executing = false;\n\n\tlet stdout = null;\n\tlet stderr = null;\n\tlet result = null;\n\tlet files = null;\n\n\tlet copied = false;\n\tlet saved = false;\n\n\tconst collapseCodeBlock = () => {\n\t\tcollapsed = !collapsed;\n\t};\n\n\tconst saveCode = () => {\n\t\tsaved = true;\n\n\t\tcode = _code;\n\t\tonSave(code);\n\n\t\tsetTimeout(() => {\n\t\t\tsaved = false;\n\t\t}, 1000);\n\t};\n\n\tconst copyCode = async () => {\n\t\tcopied = true;\n\t\tawait copyToClipboard(_code);\n\n\t\tsetTimeout(() => {\n\t\t\tcopied = false;\n\t\t}, 1000);\n\t};\n\n\tconst previewCode = () => {\n\t\tonPreview(code);\n\t};\n\n\tconst checkPythonCode = (str) => {\n\t\t// Check if the string contains typical Python syntax characters\n\t\tconst pythonSyntax = [\n\t\t\t'def ',\n\t\t\t'else:',\n\t\t\t'elif ',\n\t\t\t'try:',\n\t\t\t'except:',\n\t\t\t'finally:',\n\t\t\t'yield ',\n\t\t\t'lambda ',\n\t\t\t'assert ',\n\t\t\t'nonlocal ',\n\t\t\t'del ',\n\t\t\t'True',\n\t\t\t'False',\n\t\t\t'None',\n\t\t\t' and ',\n\t\t\t' or ',\n\t\t\t' not ',\n\t\t\t' in ',\n\t\t\t' is ',\n\t\t\t' with '\n\t\t];\n\n\t\tfor (let syntax of pythonSyntax) {\n\t\t\tif (str.includes(syntax)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// If none of the above conditions met, it's probably not Python code\n\t\treturn false;\n\t};\n\n\tconst executePython = async (code) => {\n\t\tresult = null;\n\t\tstdout = null;\n\t\tstderr = null;\n\n\t\texecuting = true;\n\n\t\tif ($config?.code?.engine === 'jupyter') {\n\t\t\tconst output = await executeCode(localStorage.token, code).catch((error) => {\n\t\t\t\ttoast.error(`${error}`);\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\t\tif (output) {\n\t\t\t\tif (output['stdout']) {\n\t\t\t\t\tstdout = output['stdout'];\n\t\t\t\t\tconst stdoutLines = stdout.split('\\n');\n\n\t\t\t\t\tfor (const [idx, line] of stdoutLines.entries()) {\n\t\t\t\t\t\tif (line.startsWith('data:image/png;base64')) {\n\t\t\t\t\t\t\tif (files) {\n\t\t\t\t\t\t\t\tfiles.push({\n\t\t\t\t\t\t\t\t\ttype: 'image/png',\n\t\t\t\t\t\t\t\t\tdata: line\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfiles = [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttype: 'image/png',\n\t\t\t\t\t\t\t\t\t\tdata: line\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (stdout.includes(`${line}\\n`)) {\n\t\t\t\t\t\t\t\tstdout = stdout.replace(`${line}\\n`, ``);\n\t\t\t\t\t\t\t} else if (stdout.includes(`${line}`)) {\n\t\t\t\t\t\t\t\tstdout = stdout.replace(`${line}`, ``);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (output['result']) {\n\t\t\t\t\tresult = output['result'];\n\t\t\t\t\tconst resultLines = result.split('\\n');\n\n\t\t\t\t\tfor (const [idx, line] of resultLines.entries()) {\n\t\t\t\t\t\tif (line.startsWith('data:image/png;base64')) {\n\t\t\t\t\t\t\tif (files) {\n\t\t\t\t\t\t\t\tfiles.push({\n\t\t\t\t\t\t\t\t\ttype: 'image/png',\n\t\t\t\t\t\t\t\t\tdata: line\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfiles = [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttype: 'image/png',\n\t\t\t\t\t\t\t\t\t\tdata: line\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (result.includes(`${line}\\n`)) {\n\t\t\t\t\t\t\t\tresult = result.replace(`${line}\\n`, ``);\n\t\t\t\t\t\t\t} else if (result.includes(`${line}`)) {\n\t\t\t\t\t\t\t\tresult = result.replace(`${line}`, ``);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toutput['stderr'] && (stderr = output['stderr']);\n\t\t\t}\n\n\t\t\texecuting = false;\n\t\t} else {\n\t\t\texecutePythonAsWorker(code);\n\t\t}\n\t};\n\n\tconst executePythonAsWorker = async (code) => {\n\t\tlet packages = [\n\t\t\t/\\bimport\\s+requests\\b|\\bfrom\\s+requests\\b/.test(code) ? 'requests' : null,\n\t\t\t/\\bimport\\s+bs4\\b|\\bfrom\\s+bs4\\b/.test(code) ? 'beautifulsoup4' : null,\n\t\t\t/\\bimport\\s+numpy\\b|\\bfrom\\s+numpy\\b/.test(code) ? 'numpy' : null,\n\t\t\t/\\bimport\\s+pandas\\b|\\bfrom\\s+pandas\\b/.test(code) ? 'pandas' : null,\n\t\t\t/\\bimport\\s+matplotlib\\b|\\bfrom\\s+matplotlib\\b/.test(code) ? 'matplotlib' : null,\n\t\t\t/\\bimport\\s+seaborn\\b|\\bfrom\\s+seaborn\\b/.test(code) ? 'seaborn' : null,\n\t\t\t/\\bimport\\s+sklearn\\b|\\bfrom\\s+sklearn\\b/.test(code) ? 'scikit-learn' : null,\n\t\t\t/\\bimport\\s+scipy\\b|\\bfrom\\s+scipy\\b/.test(code) ? 'scipy' : null,\n\t\t\t/\\bimport\\s+re\\b|\\bfrom\\s+re\\b/.test(code) ? 'regex' : null,\n\t\t\t/\\bimport\\s+seaborn\\b|\\bfrom\\s+seaborn\\b/.test(code) ? 'seaborn' : null,\n\t\t\t/\\bimport\\s+sympy\\b|\\bfrom\\s+sympy\\b/.test(code) ? 'sympy' : null,\n\t\t\t/\\bimport\\s+tiktoken\\b|\\bfrom\\s+tiktoken\\b/.test(code) ? 'tiktoken' : null,\n\t\t\t/\\bimport\\s+pytz\\b|\\bfrom\\s+pytz\\b/.test(code) ? 'pytz' : null\n\t\t].filter(Boolean);\n\n\t\tconsole.log(packages);\n\n\t\tpyodideWorker = new PyodideWorker();\n\n\t\tpyodideWorker.postMessage({\n\t\t\tid: id,\n\t\t\tcode: code,\n\t\t\tpackages: packages\n\t\t});\n\n\t\tsetTimeout(() => {\n\t\t\tif (executing) {\n\t\t\t\texecuting = false;\n\t\t\t\tstderr = 'Execution Time Limit Exceeded';\n\t\t\t\tpyodideWorker.terminate();\n\t\t\t}\n\t\t}, 60000);\n\n\t\tpyodideWorker.onmessage = (event) => {\n\t\t\tconsole.log('pyodideWorker.onmessage', event);\n\t\t\tconst { id, ...data } = event.data;\n\n\t\t\tconsole.log(id, data);\n\n\t\t\tif (data['stdout']) {\n\t\t\t\tstdout = data['stdout'];\n\t\t\t\tconst stdoutLines = stdout.split('\\n');\n\n\t\t\t\tfor (const [idx, line] of stdoutLines.entries()) {\n\t\t\t\t\tif (line.startsWith('data:image/png;base64')) {\n\t\t\t\t\t\tif (files) {\n\t\t\t\t\t\t\tfiles.push({\n\t\t\t\t\t\t\t\ttype: 'image/png',\n\t\t\t\t\t\t\t\tdata: line\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfiles = [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: 'image/png',\n\t\t\t\t\t\t\t\t\tdata: line\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (stdout.includes(`${line}\\n`)) {\n\t\t\t\t\t\t\tstdout = stdout.replace(`${line}\\n`, ``);\n\t\t\t\t\t\t} else if (stdout.includes(`${line}`)) {\n\t\t\t\t\t\t\tstdout = stdout.replace(`${line}`, ``);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (data['result']) {\n\t\t\t\tresult = data['result'];\n\t\t\t\tconst resultLines = result.split('\\n');\n\n\t\t\t\tfor (const [idx, line] of resultLines.entries()) {\n\t\t\t\t\tif (line.startsWith('data:image/png;base64')) {\n\t\t\t\t\t\tif (files) {\n\t\t\t\t\t\t\tfiles.push({\n\t\t\t\t\t\t\t\ttype: 'image/png',\n\t\t\t\t\t\t\t\tdata: line\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfiles = [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: 'image/png',\n\t\t\t\t\t\t\t\t\tdata: line\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (result.startsWith(`${line}\\n`)) {\n\t\t\t\t\t\t\tresult = result.replace(`${line}\\n`, ``);\n\t\t\t\t\t\t} else if (result.startsWith(`${line}`)) {\n\t\t\t\t\t\t\tresult = result.replace(`${line}`, ``);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdata['stderr'] && (stderr = data['stderr']);\n\t\t\tdata['result'] && (result = data['result']);\n\n\t\t\texecuting = false;\n\t\t};\n\n\t\tpyodideWorker.onerror = (event) => {\n\t\t\tconsole.log('pyodideWorker.onerror', event);\n\t\t\texecuting = false;\n\t\t};\n\t};\n\n\tlet mermaid = null;\n\tconst renderMermaid = async (code) => {\n\t\tif (!mermaid) {\n\t\t\tmermaid = await initMermaid();\n\t\t}\n\t\treturn await renderMermaidDiagram(mermaid, code);\n\t};\n\n\tconst render = async () => {\n\t\tonUpdate(token);\n\t\tif (lang === 'mermaid' && (token?.raw ?? '').slice(-4).includes('```')) {\n\t\t\ttry {\n\t\t\t\trenderHTML = await renderMermaid(code);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Failed to render mermaid diagram:', error);\n\t\t\t\tconst errorMsg = error instanceof Error ? error.message : String(error);\n\t\t\t\trenderError = $i18n.t('Failed to render diagram') + `: ${errorMsg}`;\n\t\t\t\trenderHTML = null;\n\t\t\t}\n\t\t} else if (\n\t\t\t(lang === 'vega' || lang === 'vega-lite') &&\n\t\t\t(token?.raw ?? '').slice(-4).includes('```')\n\t\t) {\n\t\t\ttry {\n\t\t\t\trenderHTML = await renderVegaVisualization(code);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Failed to render Vega visualization:', error);\n\t\t\t\tconst errorMsg = error instanceof Error ? error.message : String(error);\n\t\t\t\trenderError = $i18n.t('Failed to render visualization') + `: ${errorMsg}`;\n\t\t\t\trenderHTML = null;\n\t\t\t}\n\t\t}\n\t};\n\n\t$: if (token) {\n\t\tif (JSON.stringify(token) !== JSON.stringify(_token)) {\n\t\t\t_token = token;\n\t\t}\n\t}\n\n\t$: if (_token) {\n\t\trender();\n\t}\n\n\t$: if (attributes) {\n\t\tonAttributesUpdate();\n\t}\n\n\tconst onAttributesUpdate = () => {\n\t\tif (attributes?.output) {\n\t\t\t// Create a helper function to unescape HTML entities\n\t\t\tconst unescapeHtml = (html) => {\n\t\t\t\tconst textArea = document.createElement('textarea');\n\t\t\t\ttextArea.innerHTML = html;\n\t\t\t\treturn textArea.value;\n\t\t\t};\n\n\t\t\ttry {\n\t\t\t\t// Unescape the HTML-encoded string\n\t\t\t\tconst unescapedOutput = unescapeHtml(attributes.output);\n\n\t\t\t\t// Parse the unescaped string into JSON\n\t\t\t\tconst output = JSON.parse(unescapedOutput);\n\n\t\t\t\t// Assign the parsed values to variables\n\t\t\t\tstdout = output.stdout;\n\t\t\t\tstderr = output.stderr;\n\t\t\t\tresult = output.result;\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error:', error);\n\t\t\t}\n\t\t}\n\t};\n\n\tonMount(async () => {\n\t\tif (token) {\n\t\t\tonUpdate(token);\n\t\t}\n\t});\n\n\tonDestroy(() => {\n\t\tif (pyodideWorker) {\n\t\t\tpyodideWorker.terminate();\n\t\t}\n\t});\n</script>\n\n<div>\n\t<div\n\t\tclass=\"relative {className} flex flex-col rounded-3xl border border-gray-100/30 dark:border-gray-850/30 my-0.5\"\n\t\tdir=\"ltr\"\n\t>\n\t\t{#if ['mermaid', 'vega', 'vega-lite'].includes(lang)}\n\t\t\t{#if renderHTML}\n\t\t\t\t<SvgPanZoom\n\t\t\t\t\tclassName=\" rounded-3xl max-h-fit overflow-hidden\"\n\t\t\t\t\tsvg={renderHTML}\n\t\t\t\t\tcontent={_token.text}\n\t\t\t\t/>\n\t\t\t{:else}\n\t\t\t\t<div class=\"p-3\">\n\t\t\t\t\t{#if renderError}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"flex gap-2.5 border px-4 py-3 border-red-600/10 bg-red-600/10 rounded-2xl mb-2\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{renderError}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t\t<pre>{code}</pre>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t{:else}\n\t\t\t<div\n\t\t\t\tclass=\"absolute left-0 right-0 py-2.5 pr-3 text-text-300 pl-4.5 text-xs font-medium dark:text-white\"\n\t\t\t>\n\t\t\t\t{lang}\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tclass=\"sticky {stickyButtonsClassName} left-0 right-0 py-2 pr-3 flex items-center justify-end w-full z-10 text-xs text-black dark:text-white\"\n\t\t\t>\n\t\t\t\t<div class=\"flex items-center gap-0.5\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"flex gap-1 items-center bg-none border-none transition rounded-md px-1.5 py-0.5 bg-white dark:bg-black\"\n\t\t\t\t\t\ton:click={collapseCodeBlock}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\" -translate-y-[0.5px]\">\n\t\t\t\t\t\t\t<ChevronUpDown className=\"size-3\" />\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{collapsed ? $i18n.t('Expand') : $i18n.t('Collapse')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</button>\n\n\t\t\t\t\t{#if ($config?.features?.enable_code_execution ?? true) && (lang.toLowerCase() === 'python' || lang.toLowerCase() === 'py' || (lang === '' && checkPythonCode(code)))}\n\t\t\t\t\t\t{#if executing}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"run-code-button bg-none border-none p-0.5 cursor-not-allowed bg-white dark:bg-black\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{$i18n.t('Running')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{:else if run}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"flex gap-1 items-center run-code-button bg-none border-none transition rounded-md px-1.5 py-0.5 bg-white dark:bg-black\"\n\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\tcode = _code;\n\t\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\t\texecutePython(code);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t{$i18n.t('Run')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if save}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"save-code-button bg-none border-none transition rounded-md px-1.5 py-0.5 bg-white dark:bg-black\"\n\t\t\t\t\t\t\ton:click={saveCode}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{saved ? $i18n.t('Saved') : $i18n.t('Save')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"copy-code-button bg-none border-none transition rounded-md px-1.5 py-0.5 bg-white dark:bg-black\"\n\t\t\t\t\t\ton:click={copyCode}>{copied ? $i18n.t('Copied') : $i18n.t('Copy')}</button\n\t\t\t\t\t>\n\n\t\t\t\t\t{#if preview && ['html', 'svg'].includes(lang)}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"flex gap-1 items-center run-code-button bg-none border-none transition rounded-md px-1.5 py-0.5 bg-white dark:bg-black\"\n\t\t\t\t\t\t\ton:click={previewCode}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{$i18n.t('Preview')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tclass=\"language-{lang} rounded-t-3xl -mt-9 {editorClassName\n\t\t\t\t\t? editorClassName\n\t\t\t\t\t: executing || stdout || stderr || result\n\t\t\t\t\t\t? ''\n\t\t\t\t\t\t: 'rounded-b-3xl'} overflow-hidden\"\n\t\t\t>\n\t\t\t\t<div class=\" pt-8 bg-white dark:bg-black\"></div>\n\n\t\t\t\t{#if !collapsed}\n\t\t\t\t\t{#if edit}\n\t\t\t\t\t\t<CodeEditor\n\t\t\t\t\t\t\tvalue={code}\n\t\t\t\t\t\t\t{id}\n\t\t\t\t\t\t\t{lang}\n\t\t\t\t\t\t\tonSave={() => {\n\t\t\t\t\t\t\t\tsaveCode();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\t\t\t_code = value;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<pre\n\t\t\t\t\t\t\tclass=\" hljs p-4 px-5 overflow-x-auto\"\n\t\t\t\t\t\t\tstyle=\"border-top-left-radius: 0px; border-top-right-radius: 0px; {(executing ||\n\t\t\t\t\t\t\t\tstdout ||\n\t\t\t\t\t\t\t\tstderr ||\n\t\t\t\t\t\t\t\tresult) &&\n\t\t\t\t\t\t\t\t'border-bottom-left-radius: 0px; border-bottom-right-radius: 0px;'}\"><code\n\t\t\t\t\t\t\t\tclass=\"language-{lang} rounded-t-none whitespace-pre text-sm\"\n\t\t\t\t\t\t\t\t>{@html hljs.highlightAuto(code, hljs.getLanguage(lang)?.aliases).value ||\n\t\t\t\t\t\t\t\t\tcode}</code\n\t\t\t\t\t\t\t></pre>\n\t\t\t\t\t{/if}\n\t\t\t\t{:else}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"bg-white dark:bg-black dark:text-white rounded-b-3xl! pt-0.5 pb-3 px-4 flex flex-col gap-2 text-xs\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"text-gray-500 italic\">\n\t\t\t\t\t\t\t{$i18n.t('{{COUNT}} hidden lines', {\n\t\t\t\t\t\t\t\tCOUNT: code.split('\\n').length\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t{#if !collapsed}\n\t\t\t\t<div\n\t\t\t\t\tid=\"plt-canvas-{id}\"\n\t\t\t\t\tclass=\"bg-gray-50 dark:bg-black dark:text-white max-w-full overflow-x-auto scrollbar-hidden\"\n\t\t\t\t/>\n\n\t\t\t\t{#if executing || stdout || stderr || result || files}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"bg-gray-50 dark:bg-black dark:text-white rounded-b-3xl! py-4 px-4 flex flex-col gap-2\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if executing}\n\t\t\t\t\t\t\t<div class=\" \">\n\t\t\t\t\t\t\t\t<div class=\" text-gray-500 text-sm mb-1\">{$i18n.t('STDOUT/STDERR')}</div>\n\t\t\t\t\t\t\t\t<div class=\"text-sm\">{$i18n.t('Running...')}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t{#if stdout || stderr}\n\t\t\t\t\t\t\t\t<div class=\" \">\n\t\t\t\t\t\t\t\t\t<div class=\" text-gray-500 text-sm mb-1\">{$i18n.t('STDOUT/STDERR')}</div>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclass=\"text-sm font-mono whitespace-pre-wrap {stdout?.split('\\n')?.length > 100\n\t\t\t\t\t\t\t\t\t\t\t? `max-h-96`\n\t\t\t\t\t\t\t\t\t\t\t: ''}  overflow-y-auto\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{stdout || stderr}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{#if result || files}\n\t\t\t\t\t\t\t\t<div class=\" \">\n\t\t\t\t\t\t\t\t\t<div class=\" text-gray-500 text-sm mb-1\">{$i18n.t('RESULT')}</div>\n\t\t\t\t\t\t\t\t\t{#if result}\n\t\t\t\t\t\t\t\t\t\t<div class=\"text-sm\">{`${JSON.stringify(result)}`}</div>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t{#if files}\n\t\t\t\t\t\t\t\t\t\t<div class=\"flex flex-col gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t{#each files as file}\n\t\t\t\t\t\t\t\t\t\t\t\t{#if file.type.startsWith('image')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img src={file.data} alt=\"Output\" class=\" w-full max-w-[36rem]\" />\n\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t{/if}\n\t\t{/if}\n\t</div>\n</div>\n","export const disableSingleTilde = {\n\ttokenizer: {\n\t\tdel(src) {\n\t\t\t// 1. First check for the REAL strikethrough: ~~text~~\n\t\t\tconst doubleMatch = /^~~(?=\\S)([\\s\\S]*?\\S)~~/.exec(src);\n\t\t\tif (doubleMatch) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'del',\n\t\t\t\t\traw: doubleMatch[0],\n\t\t\t\t\ttext: doubleMatch[1],\n\t\t\t\t\ttokens: this.lexer.inlineTokens(doubleMatch[1])\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// 2. Check for single-tilde: ~text~\n\t\t\tconst singleMatch = /^~(?=\\S)([\\s\\S]*?\\S)~/.exec(src);\n\t\t\tif (singleMatch) {\n\t\t\t\t// return a plain-text token, NOT del\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'text',\n\t\t\t\t\traw: singleMatch[0],\n\t\t\t\t\ttext: singleMatch[0] // include both tildes as literal text\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\t}\n};\n","// mention-extension.ts\ntype MentionOptions = {\n\ttriggerChar?: string; // default \"@\"\n\tclassName?: string; // default \"mention\"\n\textraAttrs?: Record<string, string>; // additional HTML attrs\n};\n\nfunction escapeHtml(s: string) {\n\treturn s.replace(\n\t\t/[&<>\"']/g,\n\t\t(c) => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '\"': '&quot;', \"'\": '&#39;' })[c]!\n\t);\n}\n\nfunction mentionStart(src: string) {\n\t// Find the first \"<\" followed by trigger char\n\t// We'll refine inside tokenizer\n\treturn src.indexOf('<');\n}\n\nfunction mentionTokenizer(this: any, src: string, options: MentionOptions = {}) {\n\tconst trigger = options.triggerChar ?? '@';\n\t// Build dynamic regex for `<@id>`, `<@id|label>`, `<@id|>`\n\t// Added forward slash (/) to the character class for IDs\n\tconst re = new RegExp(`^<\\\\${trigger}([\\\\w.\\\\-:/]+)(?:\\\\|([^>]*))?>`);\n\tconst m = re.exec(src);\n\tif (!m) return;\n\n\tconst [, id, label] = m;\n\treturn {\n\t\ttype: 'mention',\n\t\traw: m[0],\n\t\ttriggerChar: trigger,\n\t\tid,\n\t\tlabel: label && label.length > 0 ? label : id\n\t};\n}\n\nfunction mentionRenderer(token: any, options: MentionOptions = {}) {\n\tconst trigger = options.triggerChar ?? '@';\n\tconst cls = options.className ?? 'mention';\n\tconst extra = options.extraAttrs ?? {};\n\n\tconst attrs = Object.entries({\n\t\tclass: cls,\n\t\t'data-type': 'mention',\n\t\t'data-id': token.id,\n\t\t'data-mention-suggestion-char': trigger,\n\t\t...extra\n\t})\n\t\t.map(([k, v]) => `${k}=\"${escapeHtml(String(v))}\"`)\n\t\t.join(' ');\n\n\treturn `<span ${attrs}>${escapeHtml(trigger + token.label)}</span>`;\n}\n\nexport function mentionExtension(opts: MentionOptions = {}) {\n\treturn {\n\t\tname: 'mention',\n\t\tlevel: 'inline' as const,\n\t\tstart: mentionStart,\n\t\ttokenizer(src: string) {\n\t\t\treturn mentionTokenizer.call(this, src, opts);\n\t\t},\n\t\trenderer(token: any) {\n\t\t\treturn mentionRenderer(token, opts);\n\t\t}\n\t};\n}\n\n// Usage:\n// import { marked } from 'marked';\n// marked.use({ extensions: [mentionExtension({ triggerChar: '@' })] });\n","<script lang=\"ts\">\n\timport type { renderToString as katexRenderToString } from 'katex';\n\timport { onMount } from 'svelte';\n\n\texport let content: string;\n\texport let displayMode: boolean = false;\n\n\tlet renderToString: typeof katexRenderToString | null = null;\n\n\tonMount(async () => {\n\t\tconst [katex] = await Promise.all([\n\t\t\timport('katex'),\n\t\t\timport('katex/contrib/mhchem'),\n\t\t\timport('katex/dist/katex.min.css')\n\t\t]);\n\t\trenderToString = katex.renderToString;\n\t});\n</script>\n\n{#if renderToString}\n\t{@html renderToString(content, { displayMode, throwOnError: false })}\n{/if}\n","<script lang=\"ts\">\n\timport { decodeString } from '$lib/utils';\n\n\texport let id;\n\n\texport let title: string = 'N/A';\n\n\texport let onClick: Function = () => {};\n\n\t// Helper function to return only the domain from a URL\n\tfunction getDomain(url: string): string {\n\t\tconst domain = url.replace('http://', '').replace('https://', '').split(/[/?#]/)[0];\n\n\t\tif (domain.startsWith('www.')) {\n\t\t\treturn domain.slice(4);\n\t\t}\n\t\treturn domain;\n\t}\n\n\tconst getDisplayTitle = (title: string) => {\n\t\tif (!title) return 'N/A';\n\t\tif (title.length > 30) {\n\t\t\treturn title.slice(0, 15) + '...' + title.slice(-10);\n\t\t}\n\t\treturn title;\n\t};\n\n\t// Helper function to check if text is a URL and return the domain\n\tfunction formattedTitle(title: string): string {\n\t\tif (title.startsWith('http')) {\n\t\t\treturn getDomain(title);\n\t\t}\n\n\t\treturn title;\n\t}\n</script>\n\n{#if title !== 'N/A'}\n\t<button\n\t\tclass=\"text-[10px] w-fit translate-y-[2px] px-2 py-0.5 dark:bg-white/5 dark:text-white/80 dark:hover:text-white bg-gray-50 text-black/80 hover:text-black transition rounded-xl\"\n\t\ton:click={() => {\n\t\t\tonClick(id);\n\t\t}}\n\t>\n\t\t<span class=\"line-clamp-1\">\n\t\t\t{getDisplayTitle(formattedTitle(decodeString(title)))}\n\t\t</span>\n\t</button>\n{/if}\n","<script lang=\"ts\">\n\timport DOMPurify from 'dompurify';\n\timport type { Token } from 'marked';\n\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\timport { settings } from '$lib/stores';\n\n\texport let id: string;\n\texport let token: Token;\n\n\tlet html: string | null = null;\n\n\t$: if (token.type === 'html' && token?.text) {\n\t\thtml = DOMPurify.sanitize(token.text);\n\t} else {\n\t\thtml = null;\n\t}\n</script>\n\n{#if token.type === 'html'}\n\t{#if html && html.includes('<video')}\n\t\t{@const video = html.match(/<video[^>]*>([\\s\\S]*?)<\\/video>/)}\n\t\t{@const videoSrc = video && video[1]}\n\t\t{#if videoSrc}\n\t\t\t<!-- svelte-ignore a11y-media-has-caption -->\n\t\t\t<video\n\t\t\t\tclass=\"w-full my-2\"\n\t\t\t\tsrc={videoSrc.replaceAll('&amp;', '&')}\n\t\t\t\ttitle=\"Video player\"\n\t\t\t\tframeborder=\"0\"\n\t\t\t\treferrerpolicy=\"strict-origin-when-cross-origin\"\n\t\t\t\tcontrols\n\t\t\t\tallowfullscreen\n\t\t\t></video>\n\t\t{:else}\n\t\t\t{token.text}\n\t\t{/if}\n\t{:else if html && html.includes('<audio')}\n\t\t{@const audio = html.match(/<audio[^>]*>([\\s\\S]*?)<\\/audio>/)}\n\t\t{@const audioSrc = audio && audio[1]}\n\t\t{#if audioSrc}\n\t\t\t<!-- svelte-ignore a11y-media-has-caption -->\n\t\t\t<audio\n\t\t\t\tclass=\"w-full my-2\"\n\t\t\t\tsrc={audioSrc.replaceAll('&amp;', '&')}\n\t\t\t\ttitle=\"Audio player\"\n\t\t\t\tcontrols\n\t\t\t></audio>\n\t\t{:else}\n\t\t\t{token.text}\n\t\t{/if}\n\t{:else if token.text && token.text.match(/<iframe\\s+[^>]*src=\"https:\\/\\/www\\.youtube\\.com\\/embed\\/([a-zA-Z0-9_-]{11})(?:\\?[^\"]*)?\"[^>]*><\\/iframe>/)}\n\t\t{@const match = token.text.match(\n\t\t\t/<iframe\\s+[^>]*src=\"https:\\/\\/www\\.youtube\\.com\\/embed\\/([a-zA-Z0-9_-]{11})(?:\\?[^\"]*)?\"[^>]*><\\/iframe>/\n\t\t)}\n\t\t{@const ytId = match && match[1]}\n\t\t{#if ytId}\n\t\t\t<iframe\n\t\t\t\tclass=\"w-full aspect-video my-2\"\n\t\t\t\tsrc={`https://www.youtube.com/embed/${ytId}`}\n\t\t\t\ttitle=\"YouTube video player\"\n\t\t\t\tframeborder=\"0\"\n\t\t\t\tallow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n\t\t\t\treferrerpolicy=\"strict-origin-when-cross-origin\"\n\t\t\t\tallowfullscreen\n\t\t\t>\n\t\t\t</iframe>\n\t\t{/if}\n\t{:else if token.text && token.text.includes('<iframe')}\n\t\t{@const match = token.text.match(/<iframe\\s+[^>]*src=\"([^\"]+)\"[^>]*><\\/iframe>/)}\n\t\t{@const iframeSrc = match && match[1]}\n\t\t{#if iframeSrc}\n\t\t\t<iframe\n\t\t\t\tclass=\"w-full my-2\"\n\t\t\t\tsrc={iframeSrc}\n\t\t\t\ttitle=\"Embedded content\"\n\t\t\t\tframeborder=\"0\"\n\t\t\t\tsandbox\n\t\t\t\ton:load={(e) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\te.currentTarget.style.height =\n\t\t\t\t\t\t\te.currentTarget.contentWindow.document.body.scrollHeight + 20 + 'px';\n\t\t\t\t\t} catch {}\n\t\t\t\t}}\n\t\t\t></iframe>\n\t\t{:else}\n\t\t\t{token.text}\n\t\t{/if}\n\t{:else if token.text && token.text.includes('<status')}\n\t\t{@const match = token.text.match(/<status title=\"([^\"]+)\" done=\"(true|false)\" ?\\/?>/)}\n\t\t{@const statusTitle = match && match[1]}\n\t\t{@const statusDone = match && match[2] === 'true'}\n\t\t{#if statusTitle}\n\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"{statusDone === false\n\t\t\t\t\t\t? 'shimmer'\n\t\t\t\t\t\t: ''} text-gray-500 dark:text-gray-500 line-clamp-1 text-wrap\"\n\t\t\t\t>\n\t\t\t\t\t{statusTitle}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{:else}\n\t\t\t{token.text}\n\t\t{/if}\n\t{:else if token.text.includes(`<file type=\"html\"`)}\n\t\t{@const match = token.text.match(/<file type=\"html\" id=\"([^\"]+)\"/)}\n\t\t{@const fileId = match && match[1]}\n\t\t{#if fileId}\n\t\t\t<iframe\n\t\t\t\tclass=\"w-full my-2\"\n\t\t\t\tsrc={`${WEBUI_BASE_URL}/api/v1/files/${fileId}/content/html`}\n\t\t\t\ttitle=\"Content\"\n\t\t\t\tframeborder=\"0\"\n\t\t\t\tsandbox=\"allow-scripts allow-downloads{($settings?.iframeSandboxAllowForms ?? false)\n\t\t\t\t\t? ' allow-forms'\n\t\t\t\t\t: ''}{($settings?.iframeSandboxAllowSameOrigin ?? false) ? ' allow-same-origin' : ''}\"\n\t\t\t\treferrerpolicy=\"strict-origin-when-cross-origin\"\n\t\t\t\tallowfullscreen\n\t\t\t\twidth=\"100%\"\n\t\t\t\ton:load={(e) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\te.currentTarget.style.height =\n\t\t\t\t\t\t\te.currentTarget.contentWindow.document.body.scrollHeight + 20 + 'px';\n\t\t\t\t\t} catch {}\n\t\t\t\t}}\n\t\t\t></iframe>\n\t\t{/if}\n\t{:else if token.text.trim().match(/^<br\\s*\\/?>$/i)}\n\t\t<br />\n\t{:else}\n\t\t{token.text}\n\t{/if}\n{/if}\n","<script lang=\"ts\">\n\timport { fade } from 'svelte/transition';\n\n\texport let token;\n\texport let done = true;\n\n\tlet texts = [];\n\t$: texts = (token?.raw ?? '').split(' ');\n</script>\n\n{#if done}\n\t{token?.raw}\n{:else}\n\t{#each texts as text}\n\t\t<span class=\"\" transition:fade={{ duration: 100 }}>\n\t\t\t{text}{' '}\n\t\t</span>\n\t{/each}\n{/if}\n","<script lang=\"ts\">\n\timport { copyToClipboard, unescapeHtml } from '$lib/utils';\n\timport { toast } from 'svelte-sonner';\n\timport { fade } from 'svelte/transition';\n\n\timport { getContext } from 'svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let token;\n\texport let done = true;\n</script>\n\n<!-- svelte-ignore a11y-click-events-have-key-events -->\n<!-- svelte-ignore a11y-no-noninteractive-element-interactions -->\n{#if done}\n\t<code\n\t\tclass=\"codespan cursor-pointer\"\n\t\ton:click={() => {\n\t\t\tcopyToClipboard(unescapeHtml(token.text));\n\t\t\ttoast.success($i18n.t('Copied to clipboard'));\n\t\t}}>{unescapeHtml(token.text)}</code\n\t>\n{:else}\n\t<code\n\t\ttransition:fade={{ duration: 100 }}\n\t\tclass=\"codespan cursor-pointer\"\n\t\ton:click={() => {\n\t\t\tcopyToClipboard(unescapeHtml(token.text));\n\t\t\ttoast.success($i18n.t('Copied to clipboard'));\n\t\t}}>{unescapeHtml(token.text)}</code\n\t>\n{/if}\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\taria-hidden=\"true\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 0 1-.923 1.785A5.969 5.969 0 0 0 6 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337Z\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport { getContext, onMount } from 'svelte';\n\n\tconst i18n = getContext('i18n');\n\n\timport { user as _user, channels, socket } from '$lib/stores';\n\timport { WEBUI_API_BASE_URL, WEBUI_BASE_URL } from '$lib/constants';\n\timport { getChannels, getDMChannelByUserId } from '$lib/apis/channels';\n\n\timport ChatBubbles from '$lib/components/icons/ChatBubbles.svelte';\n\timport ChatBubble from '$lib/components/icons/ChatBubble.svelte';\n\timport ChatBubbleOval from '$lib/components/icons/ChatBubbleOval.svelte';\n\timport { goto } from '$app/navigation';\n\timport Emoji from '$lib/components/common/Emoji.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\n\texport let user = null;\n\n\tconst directMessageHandler = async () => {\n\t\tif (!user) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst res = await getDMChannelByUserId(localStorage.token, user.id).catch((error) => {\n\t\t\tconsole.error('Error fetching DM channel:', error);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (res) {\n\t\t\tgoto(`/channels/${res.id}`);\n\t\t}\n\t};\n</script>\n\n{#if user}\n\t<div class=\"py-3\">\n\t\t<div class=\" flex gap-3.5 w-full px-3 items-center\">\n\t\t\t<div class=\" items-center flex shrink-0\">\n\t\t\t\t<img\n\t\t\t\t\tsrc={`${WEBUI_API_BASE_URL}/users/${user?.id}/profile/image`}\n\t\t\t\t\tclass=\" size-14 object-cover rounded-xl\"\n\t\t\t\t\talt=\"profile\"\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<div class=\" flex flex-col w-full flex-1\">\n\t\t\t\t<div class=\"mb-0.5 font-medium line-clamp-1 pr-2\">\n\t\t\t\t\t{user.name}\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\" flex items-center gap-2\">\n\t\t\t\t\t{#if user?.is_active}\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span class=\"relative flex size-2\">\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span class=\"relative inline-flex rounded-full size-2 bg-green-500\" />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<span class=\"text-xs\"> {$i18n.t('Active')} </span>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span class=\"relative flex size-2\">\n\t\t\t\t\t\t\t\t<span class=\"relative inline-flex rounded-full size-2 bg-gray-500\" />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<span class=\"text-xs\"> {$i18n.t('Away')} </span>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t{#if user?.status_emoji || user?.status_message}\n\t\t\t<div class=\"mx-2 mt-2\">\n\t\t\t\t<Tooltip content={user?.status_message}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"w-full gap-2 px-2.5 py-1.5 rounded-xl bg-gray-50 dark:text-white dark:bg-gray-900/50 text-black transition text-xs flex items-center\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if user?.status_emoji}\n\t\t\t\t\t\t\t<div class=\" self-center shrink-0\">\n\t\t\t\t\t\t\t\t<Emoji className=\"size-4\" shortCode={user?.status_emoji} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t<div class=\" self-center line-clamp-2 flex-1 text-left\">\n\t\t\t\t\t\t\t{user?.status_message}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Tooltip>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t{#if user?.bio}\n\t\t\t<div class=\"mx-3.5 mt-2\">\n\t\t\t\t<Tooltip content={user?.bio}>\n\t\t\t\t\t<div class=\" self-center line-clamp-3 flex-1 text-left text-xs\">\n\t\t\t\t\t\t{user?.bio}\n\t\t\t\t\t</div>\n\t\t\t\t</Tooltip>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t{#if (user?.groups ?? []).length > 0}\n\t\t\t<div class=\"mx-3.5 mt-2 flex gap-0.5\">\n\t\t\t\t{#each user.groups as group}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"px-1.5 py-0.5 rounded-lg bg-gray-50 dark:text-white dark:bg-gray-900/50 text-black transition text-xs\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{group.name}\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t{/if}\n\n\t\t{#if $_user?.id !== user.id}\n\t\t\t<hr class=\"border-gray-100/50 dark:border-gray-800/50 my-2.5\" />\n\n\t\t\t<div class=\" flex flex-col w-full px-2.5 items-center\">\n\t\t\t\t<button\n\t\t\t\t\tclass=\"w-full text-left px-3 py-1.5 rounded-xl border border-gray-100/50 dark:border-gray-800/50 hover:bg-gray-50 dark:hover:bg-gray-850 transition flex items-center gap-2 text-sm\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tdirectMessageHandler();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<ChatBubbleOval className=\"size-4\" />\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"font-medium\">\n\t\t\t\t\t\t{$i18n.t('Message')}\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { getContext, onMount } from 'svelte';\n\timport { LinkPreview } from 'bits-ui';\n\n\tconst i18n = getContext('i18n');\n\timport { getUserById } from '$lib/apis/users';\n\n\timport UserStatus from './UserStatus.svelte';\n\n\texport let id = null;\n\n\texport let side = 'top';\n\texport let align = 'start';\n\texport let sideOffset = 6;\n\n\tlet user = null;\n\tonMount(async () => {\n\t\tif (id) {\n\t\t\tuser = await getUserById(localStorage.token, id).catch((error) => {\n\t\t\t\tconsole.error('Error fetching user by ID:', error);\n\t\t\t\treturn null;\n\t\t\t});\n\t\t}\n\t});\n</script>\n\n{#if user}\n\t<LinkPreview.Content\n\t\tclass=\"w-full max-w-[260px] rounded-2xl border border-gray-100  dark:border-gray-800 z-[9999] bg-white dark:bg-gray-850 dark:text-white shadow-lg transition\"\n\t\t{side}\n\t\t{align}\n\t\t{sideOffset}\n\t>\n\t\t<UserStatus {user} />\n\t</LinkPreview.Content>\n{/if}\n","<script lang=\"ts\">\n\timport type { Token } from 'marked';\n\timport { LinkPreview } from 'bits-ui';\n\n\timport { getContext } from 'svelte';\n\n\timport { goto } from '$app/navigation';\n\timport { channels, models } from '$lib/stores';\n\timport UserStatus from '$lib/components/channel/Messages/Message/UserStatus.svelte';\n\timport UserStatusLinkPreview from '$lib/components/channel/Messages/Message/UserStatusLinkPreview.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let token: Token;\n\n\tlet triggerChar = '';\n\tlet label = '';\n\n\tlet idType = null;\n\tlet id = '';\n\n\t$: if (token) {\n\t\tinit();\n\t}\n\n\tconst init = () => {\n\t\tconst _id = token?.id;\n\t\t// split by : and take first part as idType and second part as id\n\n\t\tconst parts = _id?.split(':');\n\t\tif (parts) {\n\t\t\tidType = parts[0];\n\t\t\tid = parts.slice(1).join(':'); // in case id contains ':'\n\t\t} else {\n\t\t\tidType = null;\n\t\t\tid = _id;\n\t\t}\n\n\t\tlabel = token?.label ?? id;\n\t\ttriggerChar = token?.triggerChar ?? '@';\n\n\t\tif (triggerChar === '#') {\n\t\t\tif (idType === 'C') {\n\t\t\t\t// Channel\n\t\t\t\tconst channel = $channels.find((c) => c.id === id);\n\t\t\t\tif (channel) {\n\t\t\t\t\tlabel = channel.name;\n\t\t\t\t} else {\n\t\t\t\t\tlabel = $i18n.t('Unknown');\n\t\t\t\t}\n\t\t\t} else if (idType === 'T') {\n\t\t\t\t// Thread\n\t\t\t}\n\t\t} else if (triggerChar === '@') {\n\t\t\tif (idType === 'U') {\n\t\t\t\t// User\n\t\t\t} else if (idType === 'M') {\n\t\t\t\t// Model\n\t\t\t\tconst model = $models.find((m) => m.id === id);\n\t\t\t\tif (model) {\n\t\t\t\t\tlabel = model.name;\n\t\t\t\t} else {\n\t\t\t\t\tlabel = $i18n.t('Unknown');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n</script>\n\n<LinkPreview.Root openDelay={0} closeDelay={0}>\n\t<LinkPreview.Trigger class=\" cursor-pointer no-underline! font-normal! \">\n\t\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\n\t\t<span\n\t\t\tclass=\"mention\"\n\t\t\ton:click={async () => {\n\t\t\t\tif (triggerChar === '@') {\n\t\t\t\t\tif (idType === 'U') {\n\t\t\t\t\t\t// Open user profile\n\t\t\t\t\t\tconsole.log('Clicked user mention', id);\n\t\t\t\t\t} else if (idType === 'M') {\n\t\t\t\t\t\tconsole.log('Clicked model mention', id);\n\t\t\t\t\t\tawait goto(`/?model=${id}`);\n\t\t\t\t\t}\n\t\t\t\t} else if (triggerChar === '#') {\n\t\t\t\t\tif (idType === 'C') {\n\t\t\t\t\t\t// Open channel\n\t\t\t\t\t\tif ($channels.find((c) => c.id === id)) {\n\t\t\t\t\t\t\tawait goto(`/channels/${id}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (idType === 'T') {\n\t\t\t\t\t\t// Open thread\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Unknown trigger char, just log\n\t\t\t\t\tconsole.log('Clicked mention', id);\n\t\t\t\t}\n\t\t\t}}\n\t\t>\n\t\t\t{triggerChar}{label}\n\t\t</span>\n\t</LinkPreview.Trigger>\n\n\t{#if triggerChar === '@' && idType === 'U'}\n\t\t<UserStatusLinkPreview {id} />\n\t{/if}\n</LinkPreview.Root>\n","<script lang=\"ts\">\n\timport { LinkPreview } from 'bits-ui';\n\timport { decodeString } from '$lib/utils';\n\timport Source from './Source.svelte';\n\n\texport let id;\n\texport let token;\n\texport let sourceIds = [];\n\texport let onClick: Function = () => {};\n\n\tlet containerElement;\n\tlet openPreview = false;\n\n\t// Helper function to return only the domain from a URL\n\tfunction getDomain(url: string): string {\n\t\tconst domain = url.replace('http://', '').replace('https://', '').split(/[/?#]/)[0];\n\n\t\tif (domain.startsWith('www.')) {\n\t\t\treturn domain.slice(4);\n\t\t}\n\t\treturn domain;\n\t}\n\n\t// Helper function to check if text is a URL and return the domain\n\tfunction formattedTitle(title: string): string {\n\t\tif (title.startsWith('http')) {\n\t\t\treturn getDomain(title);\n\t\t}\n\n\t\treturn title;\n\t}\n\n\tconst getDisplayTitle = (title: string) => {\n\t\tif (!title) return 'N/A';\n\t\tif (title.length > 30) {\n\t\t\treturn title.slice(0, 15) + '...' + title.slice(-10);\n\t\t}\n\t\treturn title;\n\t};\n</script>\n\n{#if sourceIds}\n\t{#if (token?.ids ?? []).length == 1}\n\t\t{@const id = token.ids[0]}\n\t\t{@const identifier = token.citationIdentifiers ? token.citationIdentifiers[0] : id - 1}\n\t\t<Source id={identifier} title={sourceIds[id - 1]} {onClick} />\n\t{:else}\n\t\t<LinkPreview.Root openDelay={0} bind:open={openPreview}>\n\t\t\t<LinkPreview.Trigger>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"text-[10px] w-fit translate-y-[2px] px-2 py-0.5 dark:bg-white/5 dark:text-white/80 dark:hover:text-white bg-gray-50 text-black/80 hover:text-black transition rounded-xl\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\topenPreview = !openPreview;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<span class=\"line-clamp-1\">\n\t\t\t\t\t\t{getDisplayTitle(formattedTitle(decodeString(sourceIds[token.ids[0] - 1])))}\n\t\t\t\t\t\t<span class=\"dark:text-white/50 text-black/50\">+{(token?.ids ?? []).length - 1}</span>\n\t\t\t\t\t</span>\n\t\t\t\t</button>\n\t\t\t</LinkPreview.Trigger>\n\t\t\t<LinkPreview.Content\n\t\t\t\tclass=\"z-[999]\"\n\t\t\t\talign=\"start\"\n\t\t\t\tstrategy=\"fixed\"\n\t\t\t\tsideOffset={6}\n\t\t\t\tel={containerElement}\n\t\t\t>\n\t\t\t\t<div class=\"bg-gray-50 dark:bg-gray-850 rounded-xl p-1 cursor-pointer\">\n\t\t\t\t\t{#each token.citationIdentifiers ?? token.ids as identifier}\n\t\t\t\t\t\t{@const id =\n\t\t\t\t\t\t\ttypeof identifier === 'string' ? parseInt(identifier.split('#')[0]) : identifier}\n\t\t\t\t\t\t<div class=\"\">\n\t\t\t\t\t\t\t<Source id={identifier} title={sourceIds[id - 1]} {onClick} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t</LinkPreview.Content>\n\t\t</LinkPreview.Root>\n\t{/if}\n{:else}\n\t<span>{token.raw}</span>\n{/if}\n","<script lang=\"ts\">\n\timport DOMPurify from 'dompurify';\n\timport { toast } from 'svelte-sonner';\n\n\timport type { Token } from 'marked';\n\timport { getContext } from 'svelte';\n\timport { goto } from '$app/navigation';\n\n\tconst i18n = getContext('i18n');\n\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\timport { copyToClipboard, unescapeHtml } from '$lib/utils';\n\n\timport Image from '$lib/components/common/Image.svelte';\n\timport KatexRenderer from './KatexRenderer.svelte';\n\timport Source from './Source.svelte';\n\timport HtmlToken from './HTMLToken.svelte';\n\timport TextToken from './MarkdownInlineTokens/TextToken.svelte';\n\timport CodespanToken from './MarkdownInlineTokens/CodespanToken.svelte';\n\timport MentionToken from './MarkdownInlineTokens/MentionToken.svelte';\n\timport SourceToken from './SourceToken.svelte';\n\n\texport let id: string;\n\texport let done = true;\n\texport let tokens: Token[];\n\texport let sourceIds = [];\n\texport let onSourceClick: Function = () => {};\n\n\t/**\n\t * Handle link clicks - intercept same-origin app URLs for in-app navigation\n\t */\n\tconst handleLinkClick = (e: MouseEvent, href: string) => {\n\t\ttry {\n\t\t\tconst url = new URL(href, window.location.origin);\n\t\t\t// Check if same origin and an in-app route\n\t\t\tif (\n\t\t\t\turl.origin === window.location.origin &&\n\t\t\t\t(url.pathname.startsWith('/notes/') ||\n\t\t\t\t\turl.pathname.startsWith('/c/') ||\n\t\t\t\t\turl.pathname.startsWith('/channels/'))\n\t\t\t) {\n\t\t\t\te.preventDefault();\n\t\t\t\tgoto(url.pathname + url.search + url.hash);\n\t\t\t}\n\t\t} catch {\n\t\t\t// Invalid URL, let browser handle it\n\t\t}\n\t};\n</script>\n\n{#each tokens as token, tokenIdx (tokenIdx)}\n\t{#if token.type === 'escape'}\n\t\t{unescapeHtml(token.text)}\n\t{:else if token.type === 'html'}\n\t\t<HtmlToken {id} {token} {onSourceClick} />\n\t{:else if token.type === 'link'}\n\t\t{#if token.tokens}\n\t\t\t<a\n\t\t\t\thref={token.href}\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\trel=\"nofollow\"\n\t\t\t\ttitle={token.title}\n\t\t\t\ton:click={(e) => handleLinkClick(e, token.href)}\n\t\t\t>\n\t\t\t\t<svelte:self id={`${id}-a`} tokens={token.tokens} {onSourceClick} {done} />\n\t\t\t</a>\n\t\t{:else}\n\t\t\t<a\n\t\t\t\thref={token.href}\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\trel=\"nofollow\"\n\t\t\t\ttitle={token.title}\n\t\t\t\ton:click={(e) => handleLinkClick(e, token.href)}>{token.text}</a\n\t\t\t>\n\t\t{/if}\n\t{:else if token.type === 'image'}\n\t\t<Image src={token.href} alt={token.text} />\n\t{:else if token.type === 'strong'}\n\t\t<strong><svelte:self id={`${id}-strong`} tokens={token.tokens} {onSourceClick} /></strong>\n\t{:else if token.type === 'em'}\n\t\t<em><svelte:self id={`${id}-em`} tokens={token.tokens} {onSourceClick} /></em>\n\t{:else if token.type === 'codespan'}\n\t\t<CodespanToken {token} {done} />\n\t{:else if token.type === 'br'}\n\t\t<br />\n\t{:else if token.type === 'del'}\n\t\t<del><svelte:self id={`${id}-del`} tokens={token.tokens} {onSourceClick} /></del>\n\t{:else if token.type === 'inlineKatex'}\n\t\t{#if token.text}\n\t\t\t<KatexRenderer content={token.text} displayMode={false} />\n\t\t{/if}\n\t{:else if token.type === 'iframe'}\n\t\t<iframe\n\t\t\tsrc=\"{WEBUI_BASE_URL}/api/v1/files/{token.fileId}/content\"\n\t\t\ttitle={token.fileId}\n\t\t\twidth=\"100%\"\n\t\t\tframeborder=\"0\"\n\t\t\ton:load={(e) => {\n\t\t\t\ttry {\n\t\t\t\t\te.currentTarget.style.height =\n\t\t\t\t\t\te.currentTarget.contentWindow.document.body.scrollHeight + 20 + 'px';\n\t\t\t\t} catch {}\n\t\t\t}}\n\t\t></iframe>\n\t{:else if token.type === 'mention'}\n\t\t<MentionToken {token} />\n\t{:else if token.type === 'footnote'}\n\t\t{@html DOMPurify.sanitize(\n\t\t\t`<sup class=\"footnote-ref footnote-ref-text\">${token.escapedText}</sup>`\n\t\t) || ''}\n\t{:else if token.type === 'citation'}\n\t\t{#if (sourceIds ?? []).length > 0}\n\t\t\t<SourceToken {id} {token} {sourceIds} onClick={onSourceClick} />\n\t\t{:else}\n\t\t\t<TextToken {token} {done} />\n\t\t{/if}\n\t{:else if token.type === 'text'}\n\t\t<TextToken {token} {done} />\n\t{/if}\n{/each}\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let className = 'w-4 h-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let className = 'w-4 h-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let className = 'size-3';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\taria-hidden=\"true\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z\"\n\t/>\n</svg>\n","<script lang=\"ts\" context=\"module\">\n\timport { marked, type Token } from 'marked';\n\n\ttype AlertType = 'NOTE' | 'TIP' | 'IMPORTANT' | 'WARNING' | 'CAUTION';\n\n\tinterface AlertTheme {\n\t\tborder: string;\n\t\ttext: string;\n\t\ticon: ComponentType;\n\t}\n\n\texport interface AlertData {\n\t\ttype: AlertType;\n\t\ttext: string;\n\t\ttokens: Token[];\n\t}\n\n\tconst alertStyles: Record<AlertType, AlertTheme> = {\n\t\tNOTE: {\n\t\t\tborder: 'border-sky-500',\n\t\t\ttext: 'text-sky-500',\n\t\t\ticon: Info\n\t\t},\n\t\tTIP: {\n\t\t\tborder: 'border-emerald-500',\n\t\t\ttext: 'text-emerald-500',\n\t\t\ticon: LightBulb\n\t\t},\n\t\tIMPORTANT: {\n\t\t\tborder: 'border-purple-500',\n\t\t\ttext: 'text-purple-500',\n\t\t\ticon: Star\n\t\t},\n\t\tWARNING: {\n\t\t\tborder: 'border-yellow-500',\n\t\t\ttext: 'text-yellow-500',\n\t\t\ticon: ArrowRightCircle\n\t\t},\n\t\tCAUTION: {\n\t\t\tborder: 'border-rose-500',\n\t\t\ttext: 'text-rose-500',\n\t\t\ticon: Bolt\n\t\t}\n\t};\n\n\texport function alertComponent(token: Token): AlertData | false {\n\t\tconst regExpStr = `^(?:\\\\[!(NOTE|TIP|IMPORTANT|WARNING|CAUTION)\\\\])\\\\s*?\\n*`;\n\t\tconst regExp = new RegExp(regExpStr);\n\t\tconst matches = token.text?.match(regExp);\n\n\t\tif (matches && matches.length) {\n\t\t\tconst alertType = matches[1] as AlertType;\n\t\t\tconst newText = token.text.replace(regExp, '');\n\t\t\tconst newTokens = marked.lexer(newText);\n\t\t\treturn {\n\t\t\t\ttype: alertType,\n\t\t\t\ttext: newText,\n\t\t\t\ttokens: newTokens\n\t\t\t};\n\t\t}\n\t\treturn false;\n\t}\n</script>\n\n<script lang=\"ts\">\n\timport Info from '$lib/components/icons/Info.svelte';\n\timport Star from '$lib/components/icons/Star.svelte';\n\timport LightBulb from '$lib/components/icons/LightBulb.svelte';\n\timport Bolt from '$lib/components/icons/Bolt.svelte';\n\timport ArrowRightCircle from '$lib/components/icons/ArrowRightCircle.svelte';\n\timport MarkdownTokens from './MarkdownTokens.svelte';\n\timport type { ComponentType } from 'svelte';\n\n\texport let token: Token;\n\texport let alert: AlertData;\n\texport let id = '';\n\texport let tokenIdx = 0;\n\texport let onTaskClick: ((event: MouseEvent) => void) | undefined = undefined;\n\texport let onSourceClick: ((event: MouseEvent) => void) | undefined = undefined;\n</script>\n\n<!--\n\nRenders the following Markdown as alerts:\n\n> [!NOTE]\n> Example note\n\n> [!TIP]\n> Example tip\n\n> [!IMPORTANT]\n> Example important\n\n> [!CAUTION]\n> Example caution\n\n> [!WARNING]\n> Example warning\n\n-->\n<div class={`border-l-4 pl-2.5 ${alertStyles[alert.type].border} my-0.5`}>\n\t<div class=\"{alertStyles[alert.type].text} items-center flex gap-1 py-1.5\">\n\t\t<svelte:component this={alertStyles[alert.type].icon} className=\"inline-block size-4\" />\n\t\t<span class=\" font-medium\">{alert.type}</span>\n\t</div>\n\t<div class=\"pb-2\">\n\t\t<MarkdownTokens id={`${id}-${tokenIdx}`} tokens={alert.tokens} {onTaskClick} {onSourceClick} />\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport { decode } from 'html-entities';\n\timport { onMount, getContext } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport fileSaver from 'file-saver';\n\tconst { saveAs } = fileSaver;\n\n\timport { marked, type Token } from 'marked';\n\timport { copyToClipboard, unescapeHtml } from '$lib/utils';\n\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\timport { settings } from '$lib/stores';\n\n\timport CodeBlock from '$lib/components/chat/Messages/CodeBlock.svelte';\n\timport MarkdownInlineTokens from '$lib/components/chat/Messages/Markdown/MarkdownInlineTokens.svelte';\n\timport KatexRenderer from './KatexRenderer.svelte';\n\timport AlertRenderer, { alertComponent } from './AlertRenderer.svelte';\n\timport Collapsible from '$lib/components/common/Collapsible.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport Download from '$lib/components/icons/Download.svelte';\n\n\timport HtmlToken from './HTMLToken.svelte';\n\timport Clipboard from '$lib/components/icons/Clipboard.svelte';\n\n\texport let id: string;\n\texport let tokens: Token[];\n\texport let top = true;\n\texport let attributes = {};\n\texport let sourceIds = [];\n\n\texport let done = true;\n\n\texport let save = false;\n\texport let preview = false;\n\n\texport let paragraphTag = 'p';\n\n\texport let editCodeBlock = true;\n\texport let topPadding = false;\n\n\texport let onSave: Function = () => {};\n\texport let onUpdate: Function = () => {};\n\texport let onPreview: Function = () => {};\n\n\texport let onTaskClick: Function = () => {};\n\texport let onSourceClick: Function = () => {};\n\n\tconst headerComponent = (depth: number) => {\n\t\treturn 'h' + depth;\n\t};\n\n\tconst exportTableToCSVHandler = (token, tokenIdx = 0) => {\n\t\tconsole.log('Exporting table to CSV');\n\n\t\t// Extract header row text and escape for CSV.\n\t\tconst header = token.header.map((headerCell) => `\"${headerCell.text.replace(/\"/g, '\"\"')}\"`);\n\n\t\t// Create an array for rows that will hold the mapped cell text.\n\t\tconst rows = token.rows.map((row) =>\n\t\t\trow.map((cell) => {\n\t\t\t\t// Map tokens into a single text\n\t\t\t\tconst cellContent = cell.tokens.map((token) => token.text).join('');\n\t\t\t\t// Escape double quotes and wrap the content in double quotes\n\t\t\t\treturn `\"${cellContent.replace(/\"/g, '\"\"')}\"`;\n\t\t\t})\n\t\t);\n\n\t\t// Combine header and rows\n\t\tconst csvData = [header, ...rows];\n\n\t\t// Join the rows using commas (,) as the separator and rows using newline (\\n).\n\t\tconst csvContent = csvData.map((row) => row.join(',')).join('\\n');\n\n\t\t// Log rows and CSV content to ensure everything is correct.\n\t\tconsole.log(csvData);\n\t\tconsole.log(csvContent);\n\n\t\t// To handle Unicode characters, you need to prefix the data with a BOM:\n\t\tconst bom = '\\uFEFF'; // BOM for UTF-8\n\n\t\t// Create a new Blob prefixed with the BOM to ensure proper Unicode encoding.\n\t\tconst blob = new Blob([bom + csvContent], { type: 'text/csv;charset=UTF-8' });\n\n\t\t// Use FileSaver.js's saveAs function to save the generated CSV file.\n\t\tsaveAs(blob, `table-${id}-${tokenIdx}.csv`);\n\t};\n</script>\n\n<!-- {JSON.stringify(tokens)} -->\n{#each tokens as token, tokenIdx (tokenIdx)}\n\t{#if token.type === 'hr'}\n\t\t<hr class=\" border-gray-100/30 dark:border-gray-850/30\" />\n\t{:else if token.type === 'heading'}\n\t\t<svelte:element this={headerComponent(token.depth)} dir=\"auto\">\n\t\t\t<MarkdownInlineTokens\n\t\t\t\tid={`${id}-${tokenIdx}-h`}\n\t\t\t\ttokens={token.tokens}\n\t\t\t\t{done}\n\t\t\t\t{sourceIds}\n\t\t\t\t{onSourceClick}\n\t\t\t/>\n\t\t</svelte:element>\n\t{:else if token.type === 'code'}\n\t\t{#if token.raw.includes('```')}\n\t\t\t<CodeBlock\n\t\t\t\tid={`${id}-${tokenIdx}`}\n\t\t\t\tcollapsed={$settings?.collapseCodeBlocks ?? false}\n\t\t\t\t{token}\n\t\t\t\tlang={token?.lang ?? ''}\n\t\t\t\tcode={token?.text ?? ''}\n\t\t\t\t{attributes}\n\t\t\t\t{save}\n\t\t\t\t{preview}\n\t\t\t\tedit={editCodeBlock}\n\t\t\t\tstickyButtonsClassName={topPadding ? 'top-10' : 'top-0'}\n\t\t\t\tonSave={(value) => {\n\t\t\t\t\tonSave({\n\t\t\t\t\t\traw: token.raw,\n\t\t\t\t\t\toldContent: token.text,\n\t\t\t\t\t\tnewContent: value\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\t{onUpdate}\n\t\t\t\t{onPreview}\n\t\t\t/>\n\t\t{:else}\n\t\t\t{token.text}\n\t\t{/if}\n\t{:else if token.type === 'table'}\n\t\t<div class=\"relative w-full group mb-2\">\n\t\t\t<div class=\"scrollbar-hidden relative overflow-x-auto max-w-full\">\n\t\t\t\t<table\n\t\t\t\t\tclass=\" w-full text-sm text-left text-gray-500 dark:text-gray-400 max-w-full rounded-xl\"\n\t\t\t\t>\n\t\t\t\t\t<thead\n\t\t\t\t\t\tclass=\"text-xs text-gray-700 uppercase bg-white dark:bg-gray-900 dark:text-gray-400 border-none\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<tr class=\"\">\n\t\t\t\t\t\t\t{#each token.header as header, headerIdx}\n\t\t\t\t\t\t\t\t<th\n\t\t\t\t\t\t\t\t\tscope=\"col\"\n\t\t\t\t\t\t\t\t\tclass=\"px-2.5! py-2! cursor-pointer border-b border-gray-100! dark:border-gray-800!\"\n\t\t\t\t\t\t\t\t\tstyle={token.align[headerIdx] ? '' : `text-align: ${token.align[headerIdx]}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div class=\"gap-1.5 text-left\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"shrink-0 break-normal\">\n\t\t\t\t\t\t\t\t\t\t\t<MarkdownInlineTokens\n\t\t\t\t\t\t\t\t\t\t\t\tid={`${id}-${tokenIdx}-header-${headerIdx}`}\n\t\t\t\t\t\t\t\t\t\t\t\ttokens={header.tokens}\n\t\t\t\t\t\t\t\t\t\t\t\t{done}\n\t\t\t\t\t\t\t\t\t\t\t\t{sourceIds}\n\t\t\t\t\t\t\t\t\t\t\t\t{onSourceClick}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{#each token.rows as row, rowIdx}\n\t\t\t\t\t\t\t<tr class=\"bg-white dark:bg-gray-900 text-xs\">\n\t\t\t\t\t\t\t\t{#each row ?? [] as cell, cellIdx}\n\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\tclass=\"px-3! py-2! text-gray-900 dark:text-white w-max {token.rows.length -\n\t\t\t\t\t\t\t\t\t\t\t1 ===\n\t\t\t\t\t\t\t\t\t\trowIdx\n\t\t\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t\t\t: 'border-b border-gray-50! dark:border-gray-850!'}\"\n\t\t\t\t\t\t\t\t\t\tstyle={token.align[cellIdx] ? `text-align: ${token.align[cellIdx]}` : ''}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div class=\"break-normal\">\n\t\t\t\t\t\t\t\t\t\t\t<MarkdownInlineTokens\n\t\t\t\t\t\t\t\t\t\t\t\tid={`${id}-${tokenIdx}-row-${rowIdx}-${cellIdx}`}\n\t\t\t\t\t\t\t\t\t\t\t\ttokens={cell.tokens}\n\t\t\t\t\t\t\t\t\t\t\t\t{done}\n\t\t\t\t\t\t\t\t\t\t\t\t{sourceIds}\n\t\t\t\t\t\t\t\t\t\t\t\t{onSourceClick}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\n\t\t\t<div class=\" absolute top-1 right-1.5 z-20 invisible group-hover:visible flex gap-0.5\">\n\t\t\t\t<Tooltip content={$i18n.t('Copy')}>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"p-1 rounded-lg bg-transparent transition\"\n\t\t\t\t\t\ton:click={(e) => {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tcopyToClipboard(token.raw.trim(), null, $settings?.copyFormatted ?? false);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Clipboard className=\" size-3.5\" strokeWidth=\"1.5\" />\n\t\t\t\t\t</button>\n\t\t\t\t</Tooltip>\n\n\t\t\t\t<Tooltip content={$i18n.t('Export to CSV')}>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"p-1 rounded-lg bg-transparent transition\"\n\t\t\t\t\t\ton:click={(e) => {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\texportTableToCSVHandler(token, tokenIdx);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Download className=\" size-3.5\" strokeWidth=\"1.5\" />\n\t\t\t\t\t</button>\n\t\t\t\t</Tooltip>\n\t\t\t</div>\n\t\t</div>\n\t{:else if token.type === 'blockquote'}\n\t\t{@const alert = alertComponent(token)}\n\t\t{#if alert}\n\t\t\t<AlertRenderer {token} {alert} />\n\t\t{:else}\n\t\t\t<blockquote dir=\"auto\">\n\t\t\t\t<svelte:self\n\t\t\t\t\tid={`${id}-${tokenIdx}`}\n\t\t\t\t\ttokens={token.tokens}\n\t\t\t\t\t{done}\n\t\t\t\t\t{editCodeBlock}\n\t\t\t\t\t{onTaskClick}\n\t\t\t\t\t{sourceIds}\n\t\t\t\t\t{onSourceClick}\n\t\t\t\t/>\n\t\t\t</blockquote>\n\t\t{/if}\n\t{:else if token.type === 'list'}\n\t\t{#if token.ordered}\n\t\t\t<ol start={token.start || 1} dir=\"auto\">\n\t\t\t\t{#each token.items as item, itemIdx}\n\t\t\t\t\t<li class=\"text-start\">\n\t\t\t\t\t\t{#if item?.task}\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclass=\" translate-y-[1px] -translate-x-1\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tchecked={item.checked}\n\t\t\t\t\t\t\t\ton:change={(e) => {\n\t\t\t\t\t\t\t\t\tonTaskClick({\n\t\t\t\t\t\t\t\t\t\tid: id,\n\t\t\t\t\t\t\t\t\t\ttoken: token,\n\t\t\t\t\t\t\t\t\t\ttokenIdx: tokenIdx,\n\t\t\t\t\t\t\t\t\t\titem: item,\n\t\t\t\t\t\t\t\t\t\titemIdx: itemIdx,\n\t\t\t\t\t\t\t\t\t\tchecked: e.target.checked\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t<svelte:self\n\t\t\t\t\t\t\tid={`${id}-${tokenIdx}-${itemIdx}`}\n\t\t\t\t\t\t\ttokens={item.tokens}\n\t\t\t\t\t\t\ttop={token.loose}\n\t\t\t\t\t\t\t{done}\n\t\t\t\t\t\t\t{editCodeBlock}\n\t\t\t\t\t\t\t{onTaskClick}\n\t\t\t\t\t\t\t{sourceIds}\n\t\t\t\t\t\t\t{onSourceClick}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</li>\n\t\t\t\t{/each}\n\t\t\t</ol>\n\t\t{:else}\n\t\t\t<ul dir=\"auto\" class=\"\">\n\t\t\t\t{#each token.items as item, itemIdx}\n\t\t\t\t\t<li class=\"text-start {item?.task ? 'flex -translate-x-6.5 gap-3 ' : ''}\">\n\t\t\t\t\t\t{#if item?.task}\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclass=\"\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tchecked={item.checked}\n\t\t\t\t\t\t\t\ton:change={(e) => {\n\t\t\t\t\t\t\t\t\tonTaskClick({\n\t\t\t\t\t\t\t\t\t\tid: id,\n\t\t\t\t\t\t\t\t\t\ttoken: token,\n\t\t\t\t\t\t\t\t\t\ttokenIdx: tokenIdx,\n\t\t\t\t\t\t\t\t\t\titem: item,\n\t\t\t\t\t\t\t\t\t\titemIdx: itemIdx,\n\t\t\t\t\t\t\t\t\t\tchecked: e.target.checked\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<svelte:self\n\t\t\t\t\t\t\t\t\tid={`${id}-${tokenIdx}-${itemIdx}`}\n\t\t\t\t\t\t\t\t\ttokens={item.tokens}\n\t\t\t\t\t\t\t\t\ttop={token.loose}\n\t\t\t\t\t\t\t\t\t{done}\n\t\t\t\t\t\t\t\t\t{editCodeBlock}\n\t\t\t\t\t\t\t\t\t{onTaskClick}\n\t\t\t\t\t\t\t\t\t{sourceIds}\n\t\t\t\t\t\t\t\t\t{onSourceClick}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<svelte:self\n\t\t\t\t\t\t\t\tid={`${id}-${tokenIdx}-${itemIdx}`}\n\t\t\t\t\t\t\t\ttokens={item.tokens}\n\t\t\t\t\t\t\t\ttop={token.loose}\n\t\t\t\t\t\t\t\t{done}\n\t\t\t\t\t\t\t\t{editCodeBlock}\n\t\t\t\t\t\t\t\t{onTaskClick}\n\t\t\t\t\t\t\t\t{sourceIds}\n\t\t\t\t\t\t\t\t{onSourceClick}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</li>\n\t\t\t\t{/each}\n\t\t\t</ul>\n\t\t{/if}\n\t{:else if token.type === 'details'}\n\t\t<Collapsible\n\t\t\ttitle={token.summary}\n\t\t\topen={$settings?.expandDetails ?? false}\n\t\t\tattributes={token?.attributes}\n\t\t\tclassName=\"w-full space-y-1\"\n\t\t\tdir=\"auto\"\n\t\t>\n\t\t\t<div class=\" mb-1.5\" slot=\"content\">\n\t\t\t\t<svelte:self\n\t\t\t\t\tid={`${id}-${tokenIdx}-d`}\n\t\t\t\t\ttokens={marked.lexer(decode(token.text))}\n\t\t\t\t\tattributes={token?.attributes}\n\t\t\t\t\t{done}\n\t\t\t\t\t{editCodeBlock}\n\t\t\t\t\t{onTaskClick}\n\t\t\t\t\t{sourceIds}\n\t\t\t\t\t{onSourceClick}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Collapsible>\n\t{:else if token.type === 'html'}\n\t\t<HtmlToken {id} {token} {onSourceClick} />\n\t{:else if token.type === 'iframe'}\n\t\t<iframe\n\t\t\tsrc=\"{WEBUI_BASE_URL}/api/v1/files/{token.fileId}/content\"\n\t\t\ttitle={token.fileId}\n\t\t\twidth=\"100%\"\n\t\t\tframeborder=\"0\"\n\t\t\ton:load={(e) => {\n\t\t\t\ttry {\n\t\t\t\t\te.currentTarget.style.height =\n\t\t\t\t\t\te.currentTarget.contentWindow.document.body.scrollHeight + 20 + 'px';\n\t\t\t\t} catch {}\n\t\t\t}}\n\t\t></iframe>\n\t{:else if token.type === 'paragraph'}\n\t\t{#if paragraphTag == 'span'}\n\t\t\t<span dir=\"auto\">\n\t\t\t\t<MarkdownInlineTokens\n\t\t\t\t\tid={`${id}-${tokenIdx}-p`}\n\t\t\t\t\ttokens={token.tokens ?? []}\n\t\t\t\t\t{done}\n\t\t\t\t\t{sourceIds}\n\t\t\t\t\t{onSourceClick}\n\t\t\t\t/>\n\t\t\t</span>\n\t\t{:else}\n\t\t\t<p dir=\"auto\">\n\t\t\t\t<MarkdownInlineTokens\n\t\t\t\t\tid={`${id}-${tokenIdx}-p`}\n\t\t\t\t\ttokens={token.tokens ?? []}\n\t\t\t\t\t{done}\n\t\t\t\t\t{sourceIds}\n\t\t\t\t\t{onSourceClick}\n\t\t\t\t/>\n\t\t\t</p>\n\t\t{/if}\n\t{:else if token.type === 'text'}\n\t\t{#if top}\n\t\t\t<p>\n\t\t\t\t{#if token.tokens}\n\t\t\t\t\t<MarkdownInlineTokens\n\t\t\t\t\t\tid={`${id}-${tokenIdx}-t`}\n\t\t\t\t\t\ttokens={token.tokens}\n\t\t\t\t\t\t{done}\n\t\t\t\t\t\t{sourceIds}\n\t\t\t\t\t\t{onSourceClick}\n\t\t\t\t\t/>\n\t\t\t\t{:else}\n\t\t\t\t\t{unescapeHtml(token.text)}\n\t\t\t\t{/if}\n\t\t\t</p>\n\t\t{:else if token.tokens}\n\t\t\t<MarkdownInlineTokens\n\t\t\t\tid={`${id}-${tokenIdx}-p`}\n\t\t\t\ttokens={token.tokens ?? []}\n\t\t\t\t{done}\n\t\t\t\t{sourceIds}\n\t\t\t\t{onSourceClick}\n\t\t\t/>\n\t\t{:else}\n\t\t\t{unescapeHtml(token.text)}\n\t\t{/if}\n\t{:else if token.type === 'inlineKatex'}\n\t\t{#if token.text}\n\t\t\t<KatexRenderer content={token.text} displayMode={token?.displayMode ?? false} />\n\t\t{/if}\n\t{:else if token.type === 'blockKatex'}\n\t\t{#if token.text}\n\t\t\t<KatexRenderer content={token.text} displayMode={token?.displayMode ?? false} />\n\t\t{/if}\n\t{:else if token.type === 'space'}\n\t\t<div class=\"my-2\" />\n\t{:else}\n\t\t{console.log('Unknown token', token)}\n\t{/if}\n{/each}\n","// footnote-extension.ts\n// Simple extension for marked to support footnote references like [^1], [^note]\n\nfunction escapeHtml(s: string) {\n\treturn s.replace(\n\t\t/[&<>\"']/g,\n\t\t(c) => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '\"': '&quot;', \"'\": '&#39;' })[c]!\n\t);\n}\n\nexport function footnoteExtension() {\n\treturn {\n\t\tname: 'footnote',\n\t\tlevel: 'inline' as const,\n\t\tstart(src: string) {\n\t\t\treturn src.search(/\\[\\^\\s*[a-zA-Z0-9_-]+\\s*\\]/);\n\t\t},\n\t\ttokenizer(src: string) {\n\t\t\tconst rule = /^\\[\\^\\s*([a-zA-Z0-9_-]+)\\s*\\]/;\n\t\t\tconst match = rule.exec(src);\n\t\t\tif (match) {\n\t\t\t\tconst escapedText = escapeHtml(match[1]);\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'footnote',\n\t\t\t\t\traw: match[0],\n\t\t\t\t\ttext: match[1],\n\t\t\t\t\tescapedText: escapedText\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t};\n}\n\nexport default function () {\n\treturn {\n\t\textensions: [footnoteExtension()]\n\t};\n}\n","export function citationExtension() {\n\treturn {\n\t\tname: 'citation',\n\t\tlevel: 'inline' as const,\n\n\t\tstart(src: string) {\n\t\t\t// Trigger on any [number] or [number#suffix]\n\t\t\t// We check for a digit immediately after [ to avoid matching arbitrary links\n\t\t\treturn src.search(/\\[\\d/);\n\t\t},\n\n\t\ttokenizer(src: string) {\n\t\t\t// Avoid matching footnotes\n\t\t\tif (/^\\[\\^/.test(src)) return;\n\n\t\t\t// Match ONE OR MORE adjacent [1], [1,2], or [1#foo] blocks\n\t\t\t// Example matched: \"[1][2,3][4#bar]\"\n\t\t\t// We allow: digits, commas, spaces, and # followed by non-control chars (excluding ] and ,)\n\t\t\tconst rule = /^(\\[(?:\\d+(?:#[^,\\]\\s]+)?(?:,\\s*\\d+(?:#[^,\\]\\s]+)?)*)\\])+/;\n\t\t\tconst match = rule.exec(src);\n\t\t\tif (!match) return;\n\n\t\t\tconst raw = match[0];\n\n\t\t\t// Extract ALL bracket groups inside the big match\n\t\t\tconst groupRegex = /\\[([^\\]]+)\\]/g;\n\t\t\tconst ids: number[] = [];\n\t\t\tconst citationIdentifiers: string[] = [];\n\t\t\tlet m: RegExpExecArray | null;\n\n\t\t\twhile ((m = groupRegex.exec(raw))) {\n\t\t\t\t// m[1] is the content inside brackets, e.g. \"1, 2#foo\"\n\t\t\t\tconst parts = m[1].split(',').map((p) => p.trim());\n\n\t\t\t\tparts.forEach((part) => {\n\t\t\t\t\t// Check if it starts with digit\n\t\t\t\t\tconst match = /^(\\d+)(?:#(.+))?$/.exec(part);\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\tconst index = parseInt(match[1], 10);\n\t\t\t\t\t\tif (!isNaN(index)) {\n\t\t\t\t\t\t\tids.push(index);\n\t\t\t\t\t\t\t// Store the full identifier (\"1#foo\" or \"1\")\n\t\t\t\t\t\t\tcitationIdentifiers.push(part);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (ids.length === 0) return;\n\n\t\t\treturn {\n\t\t\t\ttype: 'citation',\n\t\t\t\traw,\n\t\t\t\tids, // merged list of integers for legacy title lookup\n\t\t\t\tcitationIdentifiers // merged list of full identifiers for granular targeting\n\t\t\t};\n\t\t},\n\n\t\trenderer(token: any) {\n\t\t\t// fallback text\n\t\t\treturn token.raw;\n\t\t}\n\t};\n}\n\nexport default function () {\n\treturn {\n\t\textensions: [citationExtension()]\n\t};\n}\n","<script>\n\timport { marked } from 'marked';\n\timport { replaceTokens, processResponseContent } from '$lib/utils';\n\timport { user } from '$lib/stores';\n\n\timport markedExtension from '$lib/utils/marked/extension';\n\timport markedKatexExtension from '$lib/utils/marked/katex-extension';\n\timport { disableSingleTilde } from '$lib/utils/marked/strikethrough-extension';\n\timport { mentionExtension } from '$lib/utils/marked/mention-extension';\n\n\timport MarkdownTokens from './Markdown/MarkdownTokens.svelte';\n\timport footnoteExtension from '$lib/utils/marked/footnote-extension';\n\timport citationExtension from '$lib/utils/marked/citation-extension';\n\n\texport let id = '';\n\texport let content;\n\texport let done = true;\n\texport let model = null;\n\texport let save = false;\n\texport let preview = false;\n\n\texport let paragraphTag = 'p';\n\texport let editCodeBlock = true;\n\texport let topPadding = false;\n\n\texport let sourceIds = [];\n\n\texport let onSave = () => {};\n\texport let onUpdate = () => {};\n\n\texport let onPreview = () => {};\n\n\texport let onSourceClick = () => {};\n\texport let onTaskClick = () => {};\n\n\tlet tokens = [];\n\n\tconst options = {\n\t\tthrowOnError: false,\n\t\tbreaks: true\n\t};\n\n\tmarked.use(markedKatexExtension(options));\n\tmarked.use(markedExtension(options));\n\tmarked.use(citationExtension(options));\n\tmarked.use(footnoteExtension(options));\n\tmarked.use(disableSingleTilde);\n\tmarked.use({\n\t\textensions: [mentionExtension({ triggerChar: '@' }), mentionExtension({ triggerChar: '#' })]\n\t});\n\n\t$: (async () => {\n\t\tif (content) {\n\t\t\ttokens = marked.lexer(\n\t\t\t\treplaceTokens(processResponseContent(content), model?.name, $user?.name)\n\t\t\t);\n\t\t}\n\t})();\n</script>\n\n{#key id}\n\t<MarkdownTokens\n\t\t{tokens}\n\t\t{id}\n\t\t{done}\n\t\t{save}\n\t\t{preview}\n\t\t{paragraphTag}\n\t\t{editCodeBlock}\n\t\t{sourceIds}\n\t\t{topPadding}\n\t\t{onTaskClick}\n\t\t{onSourceClick}\n\t\t{onSave}\n\t\t{onUpdate}\n\t\t{onPreview}\n\t/>\n{/key}\n","<script lang=\"ts\">\n\timport { onDestroy, onMount, tick } from 'svelte';\n\n\t// Props\n\texport let src: string | null = null; // URL or raw HTML (auto-detected)\n\texport let title = 'Embedded Content';\n\texport let initialHeight: number | null = null; // initial height in px, null = auto\n\n\texport let iframeClassName = 'w-full rounded-2xl';\n\n\texport let args = null;\n\n\texport let allowScripts = true;\n\texport let allowForms = false;\n\n\texport let allowSameOrigin = false; // set to true only when you trust the content\n\texport let allowPopups = false;\n\texport let allowDownloads = true;\n\n\texport let referrerPolicy: HTMLIFrameElement['referrerPolicy'] =\n\t\t'strict-origin-when-cross-origin';\n\texport let allowFullscreen = true;\n\n\texport let payload = null; // payload to send into the iframe on request\n\n\tlet iframe: HTMLIFrameElement | null = null;\n\tlet iframeSrc: string | null = null;\n\tlet iframeDoc: string | null = null;\n\n\t// Derived: build sandbox attribute from flags\n\t$: sandbox =\n\t\t[\n\t\t\tallowScripts && 'allow-scripts',\n\t\t\tallowForms && 'allow-forms',\n\t\t\tallowSameOrigin && 'allow-same-origin',\n\t\t\tallowPopups && 'allow-popups',\n\t\t\tallowDownloads && 'allow-downloads'\n\t\t]\n\t\t\t.filter(Boolean)\n\t\t\t.join(' ') || undefined;\n\n\t// Detect URL vs raw HTML and prep src/srcdoc\n\t$: isUrl = typeof src === 'string' && /^(https?:)?\\/\\//i.test(src);\n\t$: if (src) {\n\t\tsetIframeSrc();\n\t}\n\n\tconst setIframeSrc = async () => {\n\t\tawait tick();\n\t\tif (isUrl) {\n\t\t\tiframeSrc = src as string;\n\t\t\tiframeDoc = null;\n\t\t} else {\n\t\t\tiframeDoc = await processHtmlForDeps(src as string);\n\t\t\tiframeSrc = null;\n\t\t}\n\t};\n\n\t// Alpine directives detection\n\tconst alpineDirectives = [\n\t\t'x-data',\n\t\t'x-init',\n\t\t'x-show',\n\t\t'x-bind',\n\t\t'x-on',\n\t\t'x-text',\n\t\t'x-html',\n\t\t'x-model',\n\t\t'x-modelable',\n\t\t'x-ref',\n\t\t'x-for',\n\t\t'x-if',\n\t\t'x-effect',\n\t\t'x-transition',\n\t\t'x-cloak',\n\t\t'x-ignore',\n\t\t'x-teleport',\n\t\t'x-id'\n\t];\n\n\tasync function processHtmlForDeps(html: string): Promise<string> {\n\t\tif (!allowSameOrigin) return html;\n\n\t\tconst scriptTags: string[] = [];\n\n\t\t// --- Alpine.js detection & injection ---\n\t\tconst hasAlpineDirectives = alpineDirectives.some((dir) => html.includes(dir));\n\t\tif (hasAlpineDirectives) {\n\t\t\ttry {\n\t\t\t\tconst { default: alpineCode } = await import('alpinejs/dist/cdn.min.js?raw');\n\t\t\t\tconst alpineBlob = new Blob([alpineCode], { type: 'text/javascript' });\n\t\t\t\tconst alpineUrl = URL.createObjectURL(alpineBlob);\n\t\t\t\tconst alpineTag = `<script src=\"${alpineUrl}\" defer><\\/script>`;\n\t\t\t\tscriptTags.push(alpineTag);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error processing Alpine for iframe:', error);\n\t\t\t}\n\t\t}\n\n\t\t// --- Chart.js detection & injection ---\n\t\tconst chartJsDirectives = ['new Chart(', 'Chart.'];\n\t\tconst hasChartJsDirectives = chartJsDirectives.some((dir) => html.includes(dir));\n\t\tif (hasChartJsDirectives) {\n\t\t\ttry {\n\t\t\t\t// import chartUrl from 'chart.js/auto?url';\n\t\t\t\tconst { default: Chart } = await import('chart.js/auto');\n\t\t\t\t(window as any).Chart = Chart;\n\n\t\t\t\tconst chartTag = `<script>\nwindow.Chart = parent.Chart; // Chart previously assigned on parent\n<\\/script>`;\n\t\t\t\tscriptTags.push(chartTag);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error processing Chart.js for iframe:', error);\n\t\t\t}\n\t\t}\n\n\t\t// If nothing to inject, return original HTML\n\t\tif (scriptTags.length === 0) return html;\n\n\t\tconst tags = scriptTags.join('\\n');\n\n\t\t// Prefer injecting into <head>, then before </body>, otherwise prepend\n\t\tif (html.includes('</head>')) {\n\t\t\treturn html.replace('</head>', `${tags}\\n</head>`);\n\t\t}\n\t\tif (html.includes('</body>')) {\n\t\t\treturn html.replace('</body>', `${tags}\\n</body>`);\n\t\t}\n\t\treturn `${tags}\\n${html}`;\n\t}\n\n\t// Try to measure same-origin content safely\n\tfunction resizeSameOrigin() {\n\t\tif (!iframe) return;\n\t\ttry {\n\t\t\tconst doc = iframe.contentDocument || iframe.contentWindow?.document;\n\t\t\tconsole.log('iframe doc:', doc);\n\t\t\tif (!doc) return;\n\t\t\tconst h = Math.max(doc.documentElement?.scrollHeight ?? 0, doc.body?.scrollHeight ?? 0);\n\t\t\tif (h > 0) iframe.style.height = h + 20 + 'px';\n\t\t} catch {\n\t\t\t// Cross-origin  rely on postMessage from inside the iframe\n\t\t}\n\t}\n\n\tfunction onMessage(e: MessageEvent) {\n\t\tif (!iframe || e.source !== iframe.contentWindow) return;\n\n\t\tconst data = e.data || {};\n\t\tif (data?.type === 'iframe:height' && typeof data.height === 'number') {\n\t\t\tiframe.style.height = Math.max(0, data.height) + 'px';\n\t\t}\n\n\t\t// Pong message for testing connectivity\n\t\tif (data?.type === 'pong') {\n\t\t\tconsole.log('Received pong from iframe:', data);\n\n\t\t\t// Optional: reply back\n\t\t\tiframe.contentWindow?.postMessage({ type: 'pong:ack' }, '*');\n\t\t}\n\n\t\t// Send payload data if requested\n\t\tif (data?.type === 'payload') {\n\t\t\tiframe.contentWindow?.postMessage(\n\t\t\t\t{ type: 'payload', requestId: data?.requestId ?? null, payload: payload },\n\t\t\t\t'*'\n\t\t\t);\n\t\t}\n\t}\n\n\t// When the iframe loads, try same-origin resize (cross-origin will noop)\n\tconst onLoad = async () => {\n\t\trequestAnimationFrame(resizeSameOrigin);\n\n\t\t// if arguments are provided, inject them into the iframe window\n\t\tif (args && iframe?.contentWindow) {\n\t\t\t(iframe.contentWindow as any).args = args;\n\t\t}\n\t};\n\n\t// Ensure event listener bound only while component lives\n\tonMount(() => {\n\t\twindow.addEventListener('message', onMessage);\n\t});\n\n\tonDestroy(() => {\n\t\twindow.removeEventListener('message', onMessage);\n\t});\n</script>\n\n{#if iframeDoc}\n\t<iframe\n\t\tbind:this={iframe}\n\t\tsrcdoc={iframeDoc}\n\t\t{title}\n\t\tclass={iframeClassName}\n\t\tstyle={`${initialHeight ? `height:${initialHeight}px;` : ''}`}\n\t\twidth=\"100%\"\n\t\tframeborder=\"0\"\n\t\t{sandbox}\n\t\t{allowFullscreen}\n\t\ton:load={onLoad}\n\t/>\n{:else if iframeSrc}\n\t<iframe\n\t\tbind:this={iframe}\n\t\tsrc={iframeSrc}\n\t\t{title}\n\t\tclass={iframeClassName}\n\t\tstyle={`${initialHeight ? `height:${initialHeight}px;` : ''}`}\n\t\twidth=\"100%\"\n\t\tframeborder=\"0\"\n\t\t{sandbox}\n\t\treferrerpolicy={referrerPolicy}\n\t\t{allowFullscreen}\n\t\ton:load={onLoad}\n\t/>\n{/if}\n","<script lang=\"ts\">\n\timport { decode } from 'html-entities';\n\timport { v4 as uuidv4 } from 'uuid';\n\n\timport { getContext } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport dayjs from '$lib/dayjs';\n\timport duration from 'dayjs/plugin/duration';\n\timport relativeTime from 'dayjs/plugin/relativeTime';\n\n\tdayjs.extend(duration);\n\tdayjs.extend(relativeTime);\n\n\tasync function loadLocale(locales) {\n\t\tif (!locales || !Array.isArray(locales)) {\n\t\t\treturn;\n\t\t}\n\t\tfor (const locale of locales) {\n\t\t\ttry {\n\t\t\t\tdayjs.locale(locale);\n\t\t\t\tbreak; // Stop after successfully loading the first available locale\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(`Could not load locale '${locale}':`, error);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Assuming $i18n.languages is an array of language codes\n\t$: loadLocale($i18n.languages);\n\n\timport { slide } from 'svelte/transition';\n\timport { quintOut } from 'svelte/easing';\n\n\timport ChevronUp from '../icons/ChevronUp.svelte';\n\timport ChevronDown from '../icons/ChevronDown.svelte';\n\timport Spinner from './Spinner.svelte';\n\timport CodeBlock from '../chat/Messages/CodeBlock.svelte';\n\timport Markdown from '../chat/Messages/Markdown.svelte';\n\timport Image from './Image.svelte';\n\timport FullHeightIframe from './FullHeightIframe.svelte';\n\timport { settings } from '$lib/stores';\n\n\texport let open = false;\n\n\texport let className = '';\n\texport let buttonClassName =\n\t\t'w-fit text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition';\n\n\texport let id = '';\n\texport let title = null;\n\texport let attributes = null;\n\n\texport let chevron = false;\n\texport let grow = false;\n\n\texport let disabled = false;\n\texport let hide = false;\n\n\texport let onChange: Function = () => {};\n\n\t$: onChange(open);\n\n\tconst collapsibleId = uuidv4();\n\n\tfunction parseJSONString(str) {\n\t\ttry {\n\t\t\treturn parseJSONString(JSON.parse(str));\n\t\t} catch (e) {\n\t\t\treturn str;\n\t\t}\n\t}\n\n\tfunction formatJSONString(str) {\n\t\ttry {\n\t\t\tconst parsed = parseJSONString(str);\n\t\t\t// If parsed is an object/array, then it's valid JSON\n\t\t\tif (typeof parsed === 'object') {\n\t\t\t\treturn JSON.stringify(parsed, null, 2);\n\t\t\t} else {\n\t\t\t\t// It's a primitive value like a number, boolean, etc.\n\t\t\t\treturn `${JSON.stringify(String(parsed))}`;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// Not valid JSON, return as-is\n\t\t\treturn str;\n\t\t}\n\t}\n</script>\n\n<div {id} class={className}>\n\t{#if attributes?.type === 'tool_calls'}\n\t\t{@const args = decode(attributes?.arguments)}\n\t\t{@const result = decode(attributes?.result ?? '')}\n\t\t{@const files = parseJSONString(decode(attributes?.files ?? ''))}\n\t\t{@const embeds = parseJSONString(decode(attributes?.embeds ?? ''))}\n\n\t\t{#if embeds && Array.isArray(embeds) && embeds.length > 0}\n\t\t\t<div class=\"py-1 w-full cursor-pointer\">\n\t\t\t\t<div class=\" w-full text-xs text-gray-500\">\n\t\t\t\t\t<div class=\"\">\n\t\t\t\t\t\t{attributes.name}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{#each embeds as embed, idx}\n\t\t\t\t\t<div class=\"my-2\" id={`${collapsibleId}-tool-calls-${attributes?.id}-embed-${idx}`}>\n\t\t\t\t\t\t<FullHeightIframe\n\t\t\t\t\t\t\tsrc={embed}\n\t\t\t\t\t\t\t{args}\n\t\t\t\t\t\t\tallowScripts={true}\n\t\t\t\t\t\t\tallowForms={true}\n\t\t\t\t\t\t\tallowSameOrigin={true}\n\t\t\t\t\t\t\tallowPopups={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<div\n\t\t\t\tclass=\"{buttonClassName} cursor-pointer\"\n\t\t\t\ton:pointerup={() => {\n\t\t\t\t\tif (!disabled) {\n\t\t\t\t\t\topen = !open;\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclass=\" w-full font-medium flex items-center justify-between gap-2 {attributes?.done &&\n\t\t\t\t\tattributes?.done !== 'true'\n\t\t\t\t\t\t? 'shimmer'\n\t\t\t\t\t\t: ''}\n\t\t\t\"\n\t\t\t\t>\n\t\t\t\t\t{#if attributes?.done && attributes?.done !== 'true'}\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Spinner className=\"size-4\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t<div class=\"\">\n\t\t\t\t\t\t{#if attributes?.done === 'true'}\n\t\t\t\t\t\t\t<Markdown\n\t\t\t\t\t\t\t\tid={`${collapsibleId}-tool-calls-${attributes?.id}`}\n\t\t\t\t\t\t\t\tcontent={$i18n.t('View Result from **{{NAME}}**', {\n\t\t\t\t\t\t\t\t\tNAME: attributes.name\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<Markdown\n\t\t\t\t\t\t\t\tid={`${collapsibleId}-tool-calls-${attributes?.id}-executing`}\n\t\t\t\t\t\t\t\tcontent={$i18n.t('Executing **{{NAME}}**...', {\n\t\t\t\t\t\t\t\t\tNAME: attributes.name\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"flex self-center translate-y-[1px]\">\n\t\t\t\t\t\t{#if open}\n\t\t\t\t\t\t\t<ChevronUp strokeWidth=\"3.5\" className=\"size-3.5\" />\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<ChevronDown strokeWidth=\"3.5\" className=\"size-3.5\" />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{#if !grow}\n\t\t\t\t{#if open && !hide}\n\t\t\t\t\t<div transition:slide={{ duration: 300, easing: quintOut, axis: 'y' }}>\n\t\t\t\t\t\t{#if attributes?.type === 'tool_calls'}\n\t\t\t\t\t\t\t{#if attributes?.done === 'true'}\n\t\t\t\t\t\t\t\t<Markdown\n\t\t\t\t\t\t\t\t\tid={`${collapsibleId}-tool-calls-${attributes?.id}-result`}\n\t\t\t\t\t\t\t\t\tcontent={`> \\`\\`\\`json\n> ${formatJSONString(args)}\n> ${formatJSONString(result)}\n> \\`\\`\\``}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<Markdown\n\t\t\t\t\t\t\t\t\tid={`${collapsibleId}-tool-calls-${attributes?.id}-result`}\n\t\t\t\t\t\t\t\t\tcontent={`> \\`\\`\\`json\n> ${formatJSONString(args)}\n> \\`\\`\\``}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<slot name=\"content\" />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t{/if}\n\t\t{/if}\n\n\t\t{#if attributes?.done === 'true'}\n\t\t\t{#if typeof files === 'object'}\n\t\t\t\t{#each files ?? [] as file, idx}\n\t\t\t\t\t{#if typeof file === 'string'}\n\t\t\t\t\t\t{#if file.startsWith('data:image/')}\n\t\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\t\tid={`${collapsibleId}-tool-calls-${attributes?.id}-result-${idx}`}\n\t\t\t\t\t\t\t\tsrc={file}\n\t\t\t\t\t\t\t\talt=\"Image\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{:else if typeof file === 'object'}\n\t\t\t\t\t\t{#if (file.type === 'image' || (file?.content_type ?? '').startsWith('image/')) && file.url}\n\t\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\t\tid={`${collapsibleId}-tool-calls-${attributes?.id}-result-${idx}`}\n\t\t\t\t\t\t\t\tsrc={file.url}\n\t\t\t\t\t\t\t\talt=\"Image\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{/if}\n\t\t\t\t{/each}\n\t\t\t{/if}\n\t\t{/if}\n\t{:else}\n\t\t{#if title !== null}\n\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t\t\t<div\n\t\t\t\tclass=\"{buttonClassName} cursor-pointer\"\n\t\t\t\ton:pointerup={() => {\n\t\t\t\t\tif (!disabled) {\n\t\t\t\t\t\topen = !open;\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclass=\" w-full font-medium flex items-center justify-between gap-2 {attributes?.done &&\n\t\t\t\t\tattributes?.done !== 'true'\n\t\t\t\t\t\t? 'shimmer'\n\t\t\t\t\t\t: ''}\n\t\t\t\"\n\t\t\t\t>\n\t\t\t\t\t{#if attributes?.done && attributes?.done !== 'true'}\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Spinner className=\"size-4\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t<div class=\"\">\n\t\t\t\t\t\t{#if attributes?.type === 'reasoning'}\n\t\t\t\t\t\t\t{#if attributes?.done === 'true' && attributes?.duration}\n\t\t\t\t\t\t\t\t{#if attributes.duration < 1}\n\t\t\t\t\t\t\t\t\t{$i18n.t('Thought for less than a second')}\n\t\t\t\t\t\t\t\t{:else if attributes.duration < 60}\n\t\t\t\t\t\t\t\t\t{$i18n.t('Thought for {{DURATION}} seconds', {\n\t\t\t\t\t\t\t\t\t\tDURATION: attributes.duration\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t{$i18n.t('Thought for {{DURATION}}', {\n\t\t\t\t\t\t\t\t\t\tDURATION: dayjs.duration(attributes.duration, 'seconds').humanize()\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t{$i18n.t('Thinking...')}\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{:else if attributes?.type === 'code_interpreter'}\n\t\t\t\t\t\t\t{#if attributes?.done === 'true'}\n\t\t\t\t\t\t\t\t{$i18n.t('Analyzed')}\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t{$i18n.t('Analyzing...')}\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"flex self-center translate-y-[1px]\">\n\t\t\t\t\t\t{#if open}\n\t\t\t\t\t\t\t<ChevronUp strokeWidth=\"3.5\" className=\"size-3.5\" />\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<ChevronDown strokeWidth=\"3.5\" className=\"size-3.5\" />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t\t\t<div\n\t\t\t\tclass=\"{buttonClassName} cursor-pointer\"\n\t\t\t\ton:click={(e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}}\n\t\t\t\ton:pointerup={(e) => {\n\t\t\t\t\tif (!disabled) {\n\t\t\t\t\t\topen = !open;\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"flex items-start justify-between\">\n\t\t\t\t\t\t<slot />\n\n\t\t\t\t\t\t{#if chevron}\n\t\t\t\t\t\t\t<div class=\"flex self-start translate-y-1\">\n\t\t\t\t\t\t\t\t{#if open}\n\t\t\t\t\t\t\t\t\t<ChevronUp strokeWidth=\"3.5\" className=\"size-3.5\" />\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<ChevronDown strokeWidth=\"3.5\" className=\"size-3.5\" />\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if grow}\n\t\t\t\t\t\t{#if open && !hide}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\ttransition:slide={{ duration: 300, easing: quintOut, axis: 'y' }}\n\t\t\t\t\t\t\t\ton:pointerup={(e) => {\n\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<slot name=\"content\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t{#if !grow}\n\t\t\t{#if open && !hide}\n\t\t\t\t<div transition:slide={{ duration: 300, easing: quintOut, axis: 'y' }}>\n\t\t\t\t\t<slot name=\"content\" />\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t{/if}\n\t{/if}\n</div>\n"],"file":"_app/immutable/chunks/mfo8rR81.js"}