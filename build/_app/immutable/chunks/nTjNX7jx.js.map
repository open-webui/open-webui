{"version":3,"mappings":";qXAAA,aAGKA,EACAC,EAAUC,EAAA,EAEHC,EAAeC,EAAAC,EAAA,0BAAI,OAAM,IAAO,GAChCC,EAAMF,EAAAC,EAAA,oBAENE,EAAOH,EAAAC,EAAA,YAAIG,GAAM,CAAC,CAAC,EAE1BC,EAAmB,KAEvBC,EAAO,SAAa,QACV,QAASC,CAAC,SAAY,QAAQ,IAAG,cAClC,eAAS,OAAAC,KAAA,2CAAAC,EAAA,uBACiB,yCAGlCb,EAAMW,EAAE,IAAGG,EAACb,CAAU,GAAE,QAAQE,EAAe,EAAGA,EAAe,GAAI,OAAM,IAAO,EAAG,EAAE,EAEnFA,EAAe,GAClBG,EAAM,EAEJ,OAAQH,EAAe,EACvB,gBAAiBA,IAAgB,CAAC,WAAWA,IAAgB,CAAC,OAKjEQ,EAAE,UAAU,qDAAoD,CAC/D,YACC,yFACC,SAAMX,CAAG,QAENe,EAAcT,GAAW,CAC1B,GAAAN,EAAK,CACJS,GACHT,EAAI,YAAYS,CAAgB,MAG7BO,EAAO,WACFC,KAASX,EAAQ,CACnB,MAAAY,EAASP,EAAE,OAAOM,EAAM,MAAM,EAAE,UAAUA,EAAM,OAAO,EAE7DD,EAAQ,KAAKE,CAAM,CACpB,CAEAT,EAAmBE,EAAE,aAAaK,CAAO,EAAE,MAAMhB,CAAG,EAEhD,IACHA,EAAI,UAAUS,EAAiB,UAAS,GACvC,QAAS,KAAK,IAAIT,EAAI,UAAW,EAAE,GAErC,MAAgB,CAAC,CAClB,CACD,EAEAe,EAAWT,EAAM,GAEjBN,EAAI,GAAG,QAAUQ,GAAM,CACVA,EAAE,OACdD,IAAO,GAAIC,EAAE,OAAO,GAAG,KAAKA,EAAE,OAAO,GAAG,IAExCO,EAAU,EAER,OAAM,CAAGP,EAAE,OAAO,IAAKA,EAAE,OAAO,GAAG,EACnC,QAAO,QAAUA,EAAE,OAAO,GAAG,UAAUA,EAAE,OAAO,GAAG,KAGtD,CAAC,CACF,CAAC,EAEDW,EAAS,SAAa,CACjBnB,GAEHA,EAAI,OAAM,CAEZ,CAAC,UAGDoB,EAAGC,EAAA,EACFC,IADDF,CAAG,IACFE,EAAGC,GAAAC,EAAYvB,EAAUsB,CAAA,MAAAT,EAAVb,CAAU,KAD1BmB,CAAG,MAAHA,CAAG,KAFI","names":["map","mapElement","$.mutable_source","setViewLocation","$.prop","$$props","points","onClick","e","markerGroupLayer","onMount","L","n","__vitePreload","$.get","setMarkers","markers","point","marker","onDestroy","div","root","div_1","$$value","$.set"],"ignoreList":[],"sources":["../../../../../../src/lib/components/common/Valves/MapSelector.svelte"],"sourcesContent":["<script>\n\timport { onMount, onDestroy } from 'svelte';\n\n\tlet map;\n\tlet mapElement;\n\n\texport let setViewLocation = [51.505, -0.09];\n\texport let points = [];\n\n\texport let onClick = (e) => {};\n\n\tlet markerGroupLayer = null;\n\n\tonMount(async () => {\n\t\tconst [{ default: L }] = await Promise.all([\n\t\t\timport('leaflet'),\n\t\t\timport('leaflet/dist/leaflet.css')\n\t\t]);\n\n\t\tmap = L.map(mapElement).setView(setViewLocation ? setViewLocation : [51.505, -0.09], 10);\n\n\t\tif (setViewLocation) {\n\t\t\tpoints = [\n\t\t\t\t{\n\t\t\t\t\tcoords: setViewLocation,\n\t\t\t\t\tcontent: `Lat: ${setViewLocation[0]}, Lng: ${setViewLocation[1]}`\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\n\t\tL.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n\t\t\tattribution:\n\t\t\t\t'&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n\t\t}).addTo(map);\n\n\t\tconst setMarkers = (points) => {\n\t\t\tif (map) {\n\t\t\t\tif (markerGroupLayer) {\n\t\t\t\t\tmap.removeLayer(markerGroupLayer);\n\t\t\t\t}\n\n\t\t\t\tlet markers = [];\n\t\t\t\tfor (let point of points) {\n\t\t\t\t\tconst marker = L.marker(point.coords).bindPopup(point.content);\n\n\t\t\t\t\tmarkers.push(marker);\n\t\t\t\t}\n\n\t\t\t\tmarkerGroupLayer = L.featureGroup(markers).addTo(map);\n\n\t\t\t\ttry {\n\t\t\t\t\tmap.fitBounds(markerGroupLayer.getBounds(), {\n\t\t\t\t\t\tmaxZoom: Math.max(map.getZoom(), 13)\n\t\t\t\t\t});\n\t\t\t\t} catch (error) {}\n\t\t\t}\n\t\t};\n\n\t\tsetMarkers(points);\n\n\t\tmap.on('click', (e) => {\n\t\t\tconsole.log(e.latlng);\n\t\t\tonClick(`${e.latlng.lat}, ${e.latlng.lng}`);\n\n\t\t\tsetMarkers([\n\t\t\t\t{\n\t\t\t\t\tcoords: [e.latlng.lat, e.latlng.lng],\n\t\t\t\t\tcontent: `Lat: ${e.latlng.lat}, Lng: ${e.latlng.lng}`\n\t\t\t\t}\n\t\t\t]);\n\t\t});\n\t});\n\n\tonDestroy(async () => {\n\t\tif (map) {\n\t\t\tconsole.log('Unloading Leaflet map.');\n\t\t\tmap.remove();\n\t\t}\n\t});\n</script>\n\n<div class=\" z-10 w-full\">\n\t<div bind:this={mapElement} class=\"h-96 z-10\" />\n</div>\n"],"file":"_app/immutable/chunks/nTjNX7jx.js"}