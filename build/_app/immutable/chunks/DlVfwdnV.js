import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as Te,g as Ue,o as Ye,q as Ze,v as $e,f as z,c as s,t as w,l as D,a as p,b as et,u as q,k as f,w as o,s as m,i as U,m as ge,r as a,B as he,z as me,d as tt,e as at,j as t,n as Y,aP as st}from"./0WpKKl27.js";import{i as y}from"./Cmf4RC8y.js";import{e as xe,i as be}from"./u5Cnd4mY.js";import{i as it,b as rt,s as lt,d as dt}from"./CZ1y6KaE.js";import{i as ot}from"./C3k0oZ3o.js";import{p as I}from"./DpN1w328.js";import{s as vt,a as nt}from"./BVrWTcfB.js";import{g as ct}from"./B4L42j3h.js";import"./B9ZVCkUG.js";import{X as ut}from"./CZmZoefv.js";import{B as we}from"./DUufguWK.js";var _t=he('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"></path></svg>'),pt=he('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.115 5.19l.319 1.913A6 6 0 008.11 10.36L9.75 12l-.387.775c-.217.433-.132.956.21 1.298l1.348 1.348c.21.21.329.497.329.795v1.089c0 .426.24.815.622 1.006l.153.076c.433.217.956.132 1.298-.21l.723-.723a8.7 8.7 0 002.288-4.042 1.087 1.087 0 00-.358-1.099l-1.33-1.108c-.251-.21-.582-.299-.905-.245l-1.17.195a1.125 1.125 0 01-.98-.314l-.295-.295a1.125 1.125 0 010-1.591l.13-.132a1.125 1.125 0 011.3-.21l.603.302a.809.809 0 001.086-1.086L14.25 7.5l1.256-.837a4.5 4.5 0 001.528-1.732l.146-.292M6.115 5.19A9 9 0 1017.18 4.64M6.115 5.19A8.965 8.965 0 0112 3c1.929 0 3.716.607 5.18 1.64"></path></svg>'),ft=z('<option class=" text-gray-700" selected> </option>'),gt=z('<div class="flex items-center gap-3 justify-between text-sm w-full transition"><div class="flex items-center gap-1.5 w-full"><div> <span class="text-xs text-gray-500"> </span></div></div> <div class="w-full flex justify-end items-center gap-0.5"><button type="button"><!></button> <button class=" rounded-full p-1 hover:bg-gray-100 dark:hover:bg-gray-850 transition" type="button"><!></button></div></div>'),mt=z('<div class="flex flex-col gap-1.5 mb-2 px-0.5 mx-0.5"></div>'),xt=z('<option class=" text-gray-700"> </option>'),bt=z('<div><div><div class="flex justify-between mb-2.5"><div class="text-xs font-medium text-gray-500"> </div></div> <!> <div class="mb-1"><div class="flex w-full"><div class="flex flex-1 items-center"><div class="w-full px-0.5"><select><option class=" text-gray-700" disabled selected> </option><!></select></div></div></div></div></div></div>'),wt=z('<div class=" rounded-lg flex flex-col gap-2"><div><div class=" text-xs font-medium mb-2.5 text-gray-500"> </div> <div class="flex gap-2.5 items-center mb-1"><div><div class=" p-2 bg-black/5 dark:bg-white/5 rounded-full"><!></div></div> <div><select id="models" class="dark:bg-gray-900 outline-hidden bg-transparent text-sm font-medium block w-fit pr-10 max-w-full placeholder-gray-400"><option class=" text-gray-700" selected> </option><!></select> <div class=" text-xs text-gray-400 font-medium"><!></div></div></div></div> <!></div>');function Lt(ye,k){Te(k,!1);const d=()=>nt(Ae,"$i18n",ke),[ke,Ce]=vt(),Ae=Ue("i18n");let C=I(k,"onChange",8,()=>{}),je=I(k,"accessRoles",24,()=>["read"]),e=I(k,"accessControl",28,()=>({})),Z=I(k,"share",8,!0),O=I(k,"sharePublic",8,!0),h=ge(""),A=ge([]);const $=()=>{!O()&&e()===null&&(e({read:{group_ids:[],user_ids:[]},write:{group_ids:[],user_ids:[]}}),C()(e()))};Ye(async()=>{var i,r,g,j,M,P,B,S;U(A,await ct(localStorage.token,!0)),e()===null?$():e({read:{group_ids:((r=(i=e())==null?void 0:i.read)==null?void 0:r.group_ids)??[],user_ids:((j=(g=e())==null?void 0:g.read)==null?void 0:j.user_ids)??[]},write:{group_ids:((P=(M=e())==null?void 0:M.write)==null?void 0:P.group_ids)??[],user_ids:((S=(B=e())==null?void 0:B.write)==null?void 0:S.user_ids)??[]}})}),Ze(()=>(q(O()),q(e())),()=>{!O()&&e()===null&&$()}),$e(),ot();var E=wt(),F=s(E),J=s(F),Me=s(J,!0);a(J);var ee=f(J,2),K=s(ee),te=s(K),Pe=s(te);{var Be=i=>{var r=_t();p(i,r)},Ge=i=>{var r=pt();p(i,r)};y(Pe,i=>{e()!==null?i(Be):i(Ge,!1)})}a(te),a(K);var ae=f(K,2),x=s(ae),L=s(x),Re=s(L,!0);a(L),L.value=L.__value="private";var qe=f(L);{var ze=i=>{var r=ft(),g=s(r,!0);a(r),r.value=r.__value="public",w(j=>m(g,j),[()=>(d(),o(()=>d().t("Public")))]),p(i,r)};y(qe,i=>{Z()&&O()&&i(ze)})}a(x);var se;it(x);var ie=f(x,2),Le=s(ie);{var Se=i=>{var r=me();w(g=>m(r,g),[()=>(d(),o(()=>d().t("Only select users and groups with permission can access")))]),p(i,r)},Ve=i=>{var r=me();w(g=>m(r,g),[()=>(d(),o(()=>d().t("Accessible to all users")))]),p(i,r)};y(Le,i=>{e()!==null?i(Se):i(Ve,!1)})}a(ie),a(ae),a(ee),a(F);var Xe=f(F,2);{var He=i=>{var r=tt(),g=at(r);{var j=M=>{const P=Y(()=>(t(A),q(e()),o(()=>t(A).filter(v=>{var l,c;return(((c=(l=e())==null?void 0:l.read)==null?void 0:c.group_ids)??[]).includes(v.id)}))));var B=bt(),S=s(B),N=s(S),re=s(N),Ie=s(re,!0);a(re),a(N);var le=f(N,2);{var Oe=v=>{var l=mt();xe(l,5,()=>t(P),be,(c,u)=>{var G=gt(),Q=s(G),ce=s(Q),ue=s(ce),_e=f(ue),Ee=s(_e,!0);a(_e),a(ce),a(Q);var pe=f(Q,2),W=s(pe),Fe=s(W);{var Je=n=>{{let _=Y(()=>(d(),o(()=>d().t("Write"))));we(n,{type:"success",get content(){return t(_)}})}},Ke=n=>{{let _=Y(()=>(d(),o(()=>d().t("Read"))));we(n,{type:"info",get content(){return t(_)}})}};y(Fe,n=>{q(e()),t(u),o(()=>{var _,b;return(((b=(_=e())==null?void 0:_.write)==null?void 0:b.group_ids)??[]).includes(t(u).id)})?n(Je):n(Ke,!1)})}a(W);var T=f(W,2),Ne=s(T);ut(Ne,{}),a(T),a(pe),a(G),w(()=>{m(ue,`${t(u),o(()=>t(u).name)??""} `),m(Ee,(t(u),o(()=>{var n;return(n=t(u))==null?void 0:n.member_count})))}),D("click",W,()=>{var n,_,b,H,R,fe;je().includes("write")&&((((_=(n=e())==null?void 0:n.write)==null?void 0:_.group_ids)??[]).includes(t(u).id)?e(e().write.group_ids=(((H=(b=e())==null?void 0:b.write)==null?void 0:H.group_ids)??[]).filter(Qe=>Qe!==t(u).id),!0):e(e().write.group_ids=[...((fe=(R=e())==null?void 0:R.write)==null?void 0:fe.group_ids)??[],t(u).id],!0),C()(e()))}),D("click",T,()=>{var n,_,b,H;e(e().read.group_ids=(((_=(n=e())==null?void 0:n.read)==null?void 0:_.group_ids)??[]).filter(R=>R!==t(u).id),!0),e(e().write.group_ids=(((H=(b=e())==null?void 0:b.write)==null?void 0:H.group_ids)??[]).filter(R=>R!==t(u).id),!0),C()(e())}),p(c,G)}),a(l),p(v,l)};y(le,v=>{q(t(P)),o(()=>t(P).length>0)&&v(Oe)})}var de=f(le,2),oe=s(de),ve=s(oe),ne=s(ve),V=s(ne);w(()=>{t(h),st(()=>{e(),C(),d(),t(A)})});var X=s(V),We=s(X,!0);a(X),X.value=X.__value="";var De=f(X);xe(De,1,()=>(t(A),q(e()),o(()=>t(A).filter(v=>{var l,c;return!(((c=(l=e())==null?void 0:l.read)==null?void 0:c.group_ids)??[]).includes(v.id)}))),be,(v,l)=>{var c=xt(),u=s(c,!0);a(c);var G={};w(()=>{m(u,(t(l),o(()=>t(l).name))),G!==(G=(t(l),o(()=>t(l).id)))&&(c.value=(c.__value=(t(l),o(()=>t(l).id)))??"")}),p(v,c)}),a(V),a(ne),a(ve),a(oe),a(de),a(S),a(B),w((v,l)=>{m(Ie,v),lt(V,1,` outline-hidden bg-transparent text-sm block w-full pr-10 max-w-full
									${t(h)?"":"text-gray-500"}
									dark:placeholder-gray-500`),m(We,l)},[()=>(d(),o(()=>d().t("Groups"))),()=>(d(),o(()=>d().t("Select a group")))]),dt(V,()=>t(h),v=>U(h,v)),D("change",V,()=>{var v,l;t(h)!==""&&(e(e().read.group_ids=[...((l=(v=e())==null?void 0:v.read)==null?void 0:l.group_ids)??[],t(h)],!0),U(h,""),C()(e()))}),p(M,B)};y(g,M=>{e()!==null&&M(j)})}p(i,r)};y(Xe,i=>{Z()&&i(He)})}a(E),w((i,r)=>{m(Me,i),m(Re,r),se!==(se=e()!==null?"private":"public")&&(x.value=x.__value=e()!==null?"private":"public",rt(x,e()!==null?"private":"public"))},[()=>(d(),o(()=>d().t("Visibility"))),()=>(d(),o(()=>d().t("Private")))]),D("change",x,i=>{i.target.value==="public"?e(null):e({read:{group_ids:[],user_ids:[]},write:{group_ids:[],user_ids:[]}}),C()(e())}),p(ye,E),et(),Ce()}export{Lt as A};
//# sourceMappingURL=DlVfwdnV.js.map
