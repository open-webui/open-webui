{"version":3,"file":"C-5A-I7X.js","sources":["../../../../../../src/lib/components/chat/Messages/RateComment.svelte","../../../../../../src/lib/components/chat/Messages/ResponseMessage/WebSearchResults.svelte","../../../../../../src/lib/components/chat/Messages/Error.svelte","../../../../../../src/lib/components/chat/Messages/Citations/CitationModal.svelte","../../../../../../src/lib/components/chat/Messages/Citations.svelte","../../../../../../src/lib/components/chat/Messages/CodeExecutionModal.svelte","../../../../../../src/lib/components/chat/Messages/CodeExecutions.svelte","../../../../../../src/lib/components/chat/ContentRenderer/FloatingButtons.svelte","../../../../../../src/lib/components/chat/Messages/ContentRenderer.svelte","../../../../../../src/lib/workers/KokoroWorker.ts","../../../../../../src/lib/components/chat/Messages/ResponseMessage/FollowUps.svelte","../../../../../../src/lib/components/icons/LineSpace.svelte","../../../../../../src/lib/components/icons/LineSpaceSmaller.svelte","../../../../../../src/lib/components/chat/Messages/ResponseMessage/RegenerateMenu.svelte","../../../../../../src/lib/components/chat/Messages/ResponseMessage/StatusHistory/StatusItem.svelte","../../../../../../src/lib/components/chat/Messages/ResponseMessage/StatusHistory.svelte","../../../../../../src/lib/components/chat/Messages/ResponseMessage.svelte","../../../../../../src/lib/components/icons/Merge.svelte","../../../../../../src/lib/components/chat/Messages/MultiResponseMessages.svelte","../../../../../../src/lib/components/chat/Messages/UserMessage.svelte","../../../../../../src/lib/components/chat/Messages/Message.svelte","../../../../../../src/lib/components/chat/Suggestions.svelte","../../../../../../src/lib/components/chat/ChatPlaceholder.svelte","../../../../../../src/lib/components/chat/Messages.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\n\timport { createEventDispatcher, onMount, getContext } from 'svelte';\n\timport { config, models, tags as _tags } from '$lib/stores';\n\timport Tags from '$lib/components/common/Tags.svelte';\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\tconst dispatch = createEventDispatcher();\n\n\texport let message;\n\texport let show = false;\n\n\tlet LIKE_REASONS = [\n\t\t'accurate_information',\n\t\t'followed_instructions_perfectly',\n\t\t'showcased_creativity',\n\t\t'positive_attitude',\n\t\t'attention_to_detail',\n\t\t'thorough_explanation',\n\t\t'other'\n\t];\n\tlet DISLIKE_REASONS = [\n\t\t'dont_like_the_style',\n\t\t'too_verbose',\n\t\t'not_helpful',\n\t\t'not_factually_correct',\n\t\t'didnt_fully_follow_instructions',\n\t\t'refused_when_it_shouldnt_have',\n\t\t'being_lazy',\n\t\t'other'\n\t];\n\n\tlet tags = [];\n\n\tlet reasons = [];\n\tlet selectedReason = null;\n\tlet comment = '';\n\n\tlet detailedRating = null;\n\tlet selectedModel = null;\n\n\t$: if (message?.annotation?.rating === 1) {\n\t\treasons = LIKE_REASONS;\n\t} else if (message?.annotation?.rating === -1) {\n\t\treasons = DISLIKE_REASONS;\n\t}\n\n\t$: if (message) {\n\t\tinit();\n\t}\n\n\tconst init = () => {\n\t\tif (!selectedReason) {\n\t\t\tselectedReason = message?.annotation?.reason ?? '';\n\t\t}\n\n\t\tif (!comment) {\n\t\t\tcomment = message?.annotation?.comment ?? '';\n\t\t}\n\n\t\ttags = (message?.annotation?.tags ?? []).map((tag) => ({\n\t\t\tname: tag\n\t\t}));\n\n\t\tif (!detailedRating) {\n\t\t\tdetailedRating = message?.annotation?.details?.rating ?? null;\n\t\t}\n\t};\n\n\tonMount(() => {\n\t\tif (message?.arena) {\n\t\t\tselectedModel = $models.find((m) => m.id === message.selectedModelId);\n\t\t\ttoast.success(\n\t\t\t\t$i18n.t('This response was generated by \"{{model}}\"', {\n\t\t\t\t\tmodel: selectedModel ? (selectedModel?.name ?? selectedModel.id) : message.selectedModelId\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t});\n\n\tconst saveHandler = () => {\n\t\tconsole.log('saveHandler');\n\t\t// if (!selectedReason) {\n\t\t// \ttoast.error($i18n.t('Please select a reason'));\n\t\t// \treturn;\n\t\t// }\n\n\t\tdispatch('save', {\n\t\t\treason: selectedReason,\n\t\t\tcomment: comment,\n\t\t\ttags: tags.map((tag) => tag.name),\n\t\t\tdetails: {\n\t\t\t\trating: detailedRating\n\t\t\t}\n\t\t});\n\n\t\ttoast.success($i18n.t('Thanks for your feedback!'));\n\t\tshow = false;\n\t};\n</script>\n\n{#if message?.arena}\n\t<div class=\"text-xs font-medium pt-1.5 -mb-0.5\">\n\t\t{$i18n.t('This response was generated by \"{{model}}\"', {\n\t\t\tmodel: selectedModel ? (selectedModel?.name ?? selectedModel.id) : message.selectedModelId\n\t\t})}\n\t</div>\n{/if}\n\n<div\n\tclass=\" my-2.5 rounded-xl px-4 py-3 border border-gray-100/30 dark:border-gray-850/30\"\n\tid=\"message-feedback-{message.id}\"\n>\n\t<div class=\"flex justify-between items-center\">\n\t\t<div class=\"text-sm font-medium\">{$i18n.t('How would you rate this response?')}</div>\n\n\t\t<!-- <div class=\" text-sm\">{$i18n.t('Tell us more:')}</div> -->\n\n\t\t<button\n\t\t\ton:click={() => {\n\t\t\t\tshow = false;\n\t\t\t}}\n\t\t>\n\t\t\t<XMark className={'size-4'} />\n\t\t</button>\n\t</div>\n\n\t<div class=\"w-full flex justify-center\">\n\t\t<div class=\" relative w-fit overflow-x-auto scrollbar-none\">\n\t\t\t<div class=\"mt-1.5 w-fit flex gap-1 pb-2\">\n\t\t\t\t<!-- 1-10 scale -->\n\t\t\t\t{#each Array.from({ length: 10 }).map((_, i) => i + 1) as rating}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"size-7 text-sm border border-gray-100/30 dark:border-gray-850/30 hover:bg-gray-50 dark:hover:bg-gray-850 {detailedRating ===\n\t\t\t\t\t\trating\n\t\t\t\t\t\t\t? 'bg-gray-100 dark:bg-gray-800'\n\t\t\t\t\t\t\t: ''} transition rounded-full disabled:cursor-not-allowed disabled:text-gray-500 disabled:bg-white dark:disabled:bg-gray-900\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tdetailedRating = rating;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisabled={message?.annotation?.rating === -1 ? rating > 5 : rating < 6}\n\t\t\t\t\t>\n\t\t\t\t\t\t{rating}\n\t\t\t\t\t</button>\n\t\t\t\t{/each}\n\t\t\t</div>\n\n\t\t\t<div class=\"sticky top-0 bottom-0 left-0 right-0 flex justify-between text-xs\">\n\t\t\t\t<div>\n\t\t\t\t\t1 - {$i18n.t('Awful')}\n\t\t\t\t</div>\n\n\t\t\t\t<div>\n\t\t\t\t\t10 - {$i18n.t('Amazing')}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div>\n\t\t{#if reasons.length > 0}\n\t\t\t<div class=\"text-sm mt-1.5 font-medium\">{$i18n.t('Why?')}</div>\n\n\t\t\t<div class=\"flex flex-wrap gap-1.5 text-sm mt-1.5\">\n\t\t\t\t{#each reasons as reason}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"px-3 py-0.5 border border-gray-100/30 dark:border-gray-850/30 hover:bg-gray-50 dark:hover:bg-gray-850 {selectedReason ===\n\t\t\t\t\t\treason\n\t\t\t\t\t\t\t? 'bg-gray-100 dark:bg-gray-800'\n\t\t\t\t\t\t\t: ''} transition rounded-xl\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tselectedReason = reason;\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if reason === 'accurate_information'}\n\t\t\t\t\t\t\t{$i18n.t('Accurate information')}\n\t\t\t\t\t\t{:else if reason === 'followed_instructions_perfectly'}\n\t\t\t\t\t\t\t{$i18n.t('Followed instructions perfectly')}\n\t\t\t\t\t\t{:else if reason === 'showcased_creativity'}\n\t\t\t\t\t\t\t{$i18n.t('Showcased creativity')}\n\t\t\t\t\t\t{:else if reason === 'positive_attitude'}\n\t\t\t\t\t\t\t{$i18n.t('Positive attitude')}\n\t\t\t\t\t\t{:else if reason === 'attention_to_detail'}\n\t\t\t\t\t\t\t{$i18n.t('Attention to detail')}\n\t\t\t\t\t\t{:else if reason === 'thorough_explanation'}\n\t\t\t\t\t\t\t{$i18n.t('Thorough explanation')}\n\t\t\t\t\t\t{:else if reason === 'dont_like_the_style'}\n\t\t\t\t\t\t\t{$i18n.t(\"Don't like the style\")}\n\t\t\t\t\t\t{:else if reason === 'too_verbose'}\n\t\t\t\t\t\t\t{$i18n.t('Too verbose')}\n\t\t\t\t\t\t{:else if reason === 'not_helpful'}\n\t\t\t\t\t\t\t{$i18n.t('Not helpful')}\n\t\t\t\t\t\t{:else if reason === 'not_factually_correct'}\n\t\t\t\t\t\t\t{$i18n.t('Not factually correct')}\n\t\t\t\t\t\t{:else if reason === 'didnt_fully_follow_instructions'}\n\t\t\t\t\t\t\t{$i18n.t(\"Didn't fully follow instructions\")}\n\t\t\t\t\t\t{:else if reason === 'refused_when_it_shouldnt_have'}\n\t\t\t\t\t\t\t{$i18n.t(\"Refused when it shouldn't have\")}\n\t\t\t\t\t\t{:else if reason === 'being_lazy'}\n\t\t\t\t\t\t\t{$i18n.t('Being lazy')}\n\t\t\t\t\t\t{:else if reason === 'other'}\n\t\t\t\t\t\t\t{$i18n.t('Other')}\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t{reason}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</button>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\n\t<div class=\"mt-2\">\n\t\t<textarea\n\t\t\tbind:value={comment}\n\t\t\tclass=\"w-full text-sm px-1 py-2 bg-transparent outline-hidden resize-none rounded-xl\"\n\t\t\tplaceholder={$i18n.t('Feel free to add specific details')}\n\t\t\trows=\"3\"\n\t\t/>\n\t</div>\n\n\t<div class=\"mt-2 gap-1.5 flex justify-between\">\n\t\t<div class=\"flex items-end group\">\n\t\t\t<Tags\n\t\t\t\t{tags}\n\t\t\t\tsuggestionTags={$_tags ?? []}\n\t\t\t\ton:delete={(e) => {\n\t\t\t\t\ttags = tags.filter(\n\t\t\t\t\t\t(tag) =>\n\t\t\t\t\t\t\ttag.name.replaceAll(' ', '_').toLowerCase() !==\n\t\t\t\t\t\t\te.detail.replaceAll(' ', '_').toLowerCase()\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t\ton:add={(e) => {\n\t\t\t\t\ttags = [...tags, { name: e.detail }];\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\n\t\t<button\n\t\t\tclass=\"px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full\"\n\t\t\ton:click={() => {\n\t\t\t\tsaveHandler();\n\t\t\t}}\n\t\t>\n\t\t\t{$i18n.t('Save')}\n\t\t</button>\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport ChevronDown from '$lib/components/icons/ChevronDown.svelte';\n\timport ChevronUp from '$lib/components/icons/ChevronUp.svelte';\n\timport Search from '$lib/components/icons/Search.svelte';\n\timport Collapsible from '$lib/components/common/Collapsible.svelte';\n\n\texport let status = { urls: [], query: '' };\n\tlet state = false;\n</script>\n\n<Collapsible grow={true} className=\"w-full\" buttonClassName=\"w-full\" bind:open={state}>\n\t<div class=\"flex items-center gap-2 text-gray-500 transition\">\n\t\t<slot />\n\t\t{#if state}\n\t\t\t<ChevronUp strokeWidth=\"2.5\" className=\"size-3.5 \" />\n\t\t{:else}\n\t\t\t<ChevronDown strokeWidth=\"2.5\" className=\"size-3.5 \" />\n\t\t{/if}\n\t</div>\n\n\t<div\n\t\tclass=\"text-sm border border-gray-50 dark:border-gray-850/30 rounded-xl my-1.5 p-2 w-full\"\n\t\tslot=\"content\"\n\t>\n\t\t{#if status?.query}\n\t\t\t<a\n\t\t\t\thref=\"https://www.google.com/search?q={status.query}\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\tclass=\"flex w-full items-center p-1 px-3 group/item justify-between text-gray-800 dark:text-gray-300 font-normal! no-underline!\"\n\t\t\t>\n\t\t\t\t<div class=\"flex gap-2 items-center\">\n\t\t\t\t\t<Search />\n\n\t\t\t\t\t<div class=\" line-clamp-1\">\n\t\t\t\t\t\t{status.query}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div\n\t\t\t\t\tclass=\" ml-1 text-white dark:text-gray-900 group-hover/item:text-gray-600 dark:group-hover/item:text-white transition\"\n\t\t\t\t>\n\t\t\t\t\t<!--  -->\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\td=\"M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z\"\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t{/if}\n\n\t\t{#if status?.items}\n\t\t\t{#each status.items as item, itemIdx}\n\t\t\t\t<a\n\t\t\t\t\thref={item.link}\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\tclass=\"flex w-full items-center p-1 px-3 group/item justify-between text-gray-800 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-850 rounded-lg font-normal! no-underline! mb-1\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\" flex justify-center items-center gap-3\">\n\t\t\t\t\t\t<div class=\"w-fit\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc=\"https://www.google.com/s2/favicons?sz=32&domain={item.link}\"\n\t\t\t\t\t\t\t\talt=\"favicon\"\n\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"w-full text-sm line-clamp-1\">\n\t\t\t\t\t\t\t{item?.title ?? item.link}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\" ml-1 text-white dark:text-gray-900 group-hover/item:text-gray-600 dark:group-hover/item:text-white transition\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<!--  -->\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\td=\"M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z\"\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t{/each}\n\t\t{:else if status?.urls}\n\t\t\t{#each status.urls as url, urlIdx}\n\t\t\t\t<a\n\t\t\t\t\thref={url}\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\tclass=\"flex w-full items-center p-1 px-3 group/item justify-between text-gray-800 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-850 rounded-lg no-underline mb-1\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\" flex justify-center items-center gap-3\">\n\t\t\t\t\t\t<div class=\"w-fit\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc=\"https://www.google.com/s2/favicons?sz=32&domain={url}\"\n\t\t\t\t\t\t\t\talt=\"favicon\"\n\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"w-full text-sm line-clamp-1\">\n\t\t\t\t\t\t\t{url}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\" ml-1 text-white dark:text-gray-900 group-hover/item:text-gray-600 dark:group-hover/item:text-white transition\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<!--  -->\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\td=\"M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z\"\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t{/each}\n\t\t{/if}\n\t</div>\n</Collapsible>\n","<script lang=\"ts\">\n\timport Info from '$lib/components/icons/Info.svelte';\n\n\texport let content = '';\n</script>\n\n<div class=\"flex my-2 gap-2.5 border px-4 py-3 border-red-600/10 bg-red-600/10 rounded-lg\">\n\t<div class=\" self-start mt-0.5\">\n\t\t<Info className=\"size-5 text-red-700 dark:text-red-400\" />\n\t</div>\n\n\t<div class=\" self-center text-sm\">\n\t\t{#if typeof content === 'string'}\n\t\t\t{content}\n\t\t{:else if typeof content === 'object' && content !== null}\n\t\t\t{#if content?.error && content?.error?.message}\n\t\t\t\t{content.error.message}\n\t\t\t{:else if content?.detail}\n\t\t\t\t{content.detail}\n\t\t\t{:else if content?.message}\n\t\t\t\t{content.message}\n\t\t\t{:else}\n\t\t\t\t{JSON.stringify(content)}\n\t\t\t{/if}\n\t\t{:else}\n\t\t\t{JSON.stringify(content)}\n\t\t{/if}\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport { getContext, onMount, tick } from 'svelte';\n\timport Modal from '$lib/components/common/Modal.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport { WEBUI_API_BASE_URL } from '$lib/constants';\n\timport { settings } from '$lib/stores';\n\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\timport Textarea from '$lib/components/common/Textarea.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let show = false;\n\texport let citation;\n\texport let showPercentage = false;\n\texport let showRelevance = true;\n\n\tlet mergedDocuments = [];\n\n\tfunction calculatePercentage(distance: number) {\n\t\tif (typeof distance !== 'number') return null;\n\t\tif (distance < 0) return 0;\n\t\tif (distance > 1) return 100;\n\t\treturn Math.round(distance * 10000) / 100;\n\t}\n\n\tfunction getRelevanceColor(percentage: number) {\n\t\tif (percentage >= 80)\n\t\t\treturn 'bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200';\n\t\tif (percentage >= 60)\n\t\t\treturn 'bg-yellow-200 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-200';\n\t\tif (percentage >= 40)\n\t\t\treturn 'bg-orange-200 dark:bg-orange-800 text-orange-800 dark:text-orange-200';\n\t\treturn 'bg-red-200 dark:bg-red-800 text-red-800 dark:text-red-200';\n\t}\n\n\t$: if (citation) {\n\t\tmergedDocuments = citation.document?.map((c, i) => {\n\t\t\treturn {\n\t\t\t\tsource: citation.source,\n\t\t\t\tdocument: c,\n\t\t\t\tmetadata: citation.metadata?.[i],\n\t\t\t\tdistance: citation.distances?.[i]\n\t\t\t};\n\t\t});\n\t\tif (mergedDocuments.every((doc) => doc.distance !== undefined)) {\n\t\t\tmergedDocuments = mergedDocuments.sort(\n\t\t\t\t(a, b) => (b.distance ?? Infinity) - (a.distance ?? Infinity)\n\t\t\t);\n\t\t}\n\t}\n\n\tconst decodeString = (str: string) => {\n\t\ttry {\n\t\t\treturn decodeURIComponent(str);\n\t\t} catch {\n\t\t\treturn str;\n\t\t}\n\t};\n\n\tconst getTextFragmentUrl = (doc: any): string | null => {\n\t\tconst { metadata, source, document: content } = doc ?? {};\n\t\tconst { file_id, page } = metadata ?? {};\n\t\tconst sourceUrl = source?.url;\n\n\t\tconst baseUrl = file_id\n\t\t\t? `${WEBUI_API_BASE_URL}/files/${file_id}/content${page !== undefined ? `#page=${page + 1}` : ''}`\n\t\t\t: sourceUrl?.includes('http')\n\t\t\t\t? sourceUrl\n\t\t\t\t: null;\n\n\t\tif (!baseUrl || !content) return baseUrl;\n\n\t\t// Extract first and last words for text fragment, filtering out URLs and emojis\n\t\tconst words = content\n\t\t\t.trim()\n\t\t\t.replace(/\\s+/g, ' ')\n\t\t\t.split(' ')\n\t\t\t.filter((w: string) => w.length > 0 && !/https?:\\/\\/|[\\u{1F300}-\\u{1F9FF}]/u.test(w));\n\n\t\tif (words.length === 0) return baseUrl;\n\n\t\tconst clean = (w: string) => w.replace(/[^\\w]/g, '');\n\t\tconst first = clean(words[0]);\n\t\tconst last = clean(words.at(-1));\n\t\tconst fragment = words.length === 1 ? first : `${first},${last}`;\n\n\t\treturn fragment ? `${baseUrl}#:~:text=${fragment}` : baseUrl;\n\t};\n</script>\n\n<Modal size=\"lg\" bind:show>\n\t<div>\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-4.5 pt-3 pb-2\">\n\t\t\t<div class=\" text-lg font-medium self-center flex items-center\">\n\t\t\t\t{#if citation?.source?.name}\n\t\t\t\t\t{@const document = mergedDocuments?.[0]}\n\t\t\t\t\t{#if document?.metadata?.file_id || document.source?.url?.includes('http')}\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\tclassName=\"w-fit\"\n\t\t\t\t\t\t\tcontent={document.source?.url?.includes('http')\n\t\t\t\t\t\t\t\t? $i18n.t('Open link')\n\t\t\t\t\t\t\t\t: $i18n.t('Open file')}\n\t\t\t\t\t\t\tplacement=\"top-start\"\n\t\t\t\t\t\t\ttippyOptions={{ duration: [500, 0] }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclass=\"hover:text-gray-500 dark:hover:text-gray-100 underline grow line-clamp-1\"\n\t\t\t\t\t\t\t\thref={document?.metadata?.file_id\n\t\t\t\t\t\t\t\t\t? `${WEBUI_API_BASE_URL}/files/${document?.metadata?.file_id}/content${document?.metadata?.page !== undefined ? `#page=${document.metadata.page + 1}` : ''}`\n\t\t\t\t\t\t\t\t\t: document.source?.url?.includes('http')\n\t\t\t\t\t\t\t\t\t\t? document.source.url\n\t\t\t\t\t\t\t\t\t\t: `#`}\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{decodeString(citation?.source?.name)}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t{decodeString(citation?.source?.name)}\n\t\t\t\t\t{/if}\n\t\t\t\t{:else}\n\t\t\t\t\t{$i18n.t('Citation')}\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t\t<button\n\t\t\t\tclass=\"self-center\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tshow = false;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<XMark className={'size-5'} />\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class=\"flex flex-col md:flex-row w-full px-5 pb-5 md:space-x-4\">\n\t\t\t<div\n\t\t\t\tclass=\"flex flex-col w-full dark:text-gray-200 overflow-y-scroll max-h-[22rem] scrollbar-thin gap-1\"\n\t\t\t>\n\t\t\t\t{#each mergedDocuments as document, documentIdx}\n\t\t\t\t\t<div class=\"flex flex-col w-full gap-2\">\n\t\t\t\t\t\t{#if document.metadata?.parameters}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class=\"text-sm font-medium dark:text-gray-300 mb-1\">\n\t\t\t\t\t\t\t\t\t{$i18n.t('Parameters')}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<Textarea readonly value={JSON.stringify(document.metadata.parameters, null, 2)}\n\t\t\t\t\t\t\t\t></Textarea>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\" text-sm font-medium dark:text-gray-300 flex items-center gap-2 w-fit mb-1\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{#if document.source?.url?.includes('http')}\n\t\t\t\t\t\t\t\t\t{@const snippetUrl = getTextFragmentUrl(document)}\n\t\t\t\t\t\t\t\t\t{#if snippetUrl}\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={snippetUrl}\n\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"underline hover:text-gray-500 dark:hover:text-gray-100\"\n\t\t\t\t\t\t\t\t\t\t\t>{$i18n.t('Content')}</a\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t{$i18n.t('Content')}\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t{$i18n.t('Content')}\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if showRelevance && document.distance !== undefined}\n\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-fit\"\n\t\t\t\t\t\t\t\t\t\tcontent={$i18n.t('Relevance')}\n\t\t\t\t\t\t\t\t\t\tplacement=\"top-start\"\n\t\t\t\t\t\t\t\t\t\ttippyOptions={{ duration: [500, 0] }}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div class=\"text-sm my-1 dark:text-gray-400 flex items-center gap-2 w-fit\">\n\t\t\t\t\t\t\t\t\t\t\t{#if showPercentage}\n\t\t\t\t\t\t\t\t\t\t\t\t{@const percentage = calculatePercentage(document.distance)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t{#if typeof percentage === 'number'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass={`px-1 rounded-sm font-medium ${getRelevanceColor(percentage)}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{percentage.toFixed(2)}%\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t{:else if typeof document?.distance === 'number'}\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-gray-500 dark:text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t({(document?.distance ?? 0).toFixed(4)})\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if Number.isInteger(document?.metadata?.page)}\n\t\t\t\t\t\t\t\t\t<span class=\"text-sm text-gray-500 dark:text-gray-400\">\n\t\t\t\t\t\t\t\t\t\t({$i18n.t('page')}\n\t\t\t\t\t\t\t\t\t\t{document.metadata.page + 1})\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{#if document.metadata?.html}\n\t\t\t\t\t\t\t\t<iframe\n\t\t\t\t\t\t\t\t\tclass=\"w-full border-0 h-auto rounded-none\"\n\t\t\t\t\t\t\t\t\tsandbox=\"allow-scripts allow-forms{($settings?.iframeSandboxAllowSameOrigin ??\n\t\t\t\t\t\t\t\t\tfalse)\n\t\t\t\t\t\t\t\t\t\t? ' allow-same-origin'\n\t\t\t\t\t\t\t\t\t\t: ''}\"\n\t\t\t\t\t\t\t\t\tsrcdoc={document.document}\n\t\t\t\t\t\t\t\t\ttitle={$i18n.t('Content')}\n\t\t\t\t\t\t\t\t></iframe>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<pre class=\"text-sm dark:text-gray-400 whitespace-pre-line\">{document.document\n\t\t\t\t\t\t\t\t\t\t.trim()\n\t\t\t\t\t\t\t\t\t\t.replace(/\\n\\n+/g, '\\n\\n')}</pre>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</Modal>\n","<script lang=\"ts\">\n\timport { getContext } from 'svelte';\n\timport { embed, showControls, showEmbeds } from '$lib/stores';\n\n\timport CitationModal from './Citations/CitationModal.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let id = '';\n\texport let chatId = '';\n\n\texport let sources = [];\n\texport let readOnly = false;\n\n\tlet citations = [];\n\tlet showPercentage = false;\n\tlet showRelevance = true;\n\n\tlet citationModal = null;\n\n\tlet showCitations = false;\n\tlet showCitationModal = false;\n\n\tlet selectedCitation: any = null;\n\n\texport const showSourceModal = (sourceId) => {\n\t\tlet index;\n\t\tlet suffix = null;\n\n\t\tif (typeof sourceId === 'string') {\n\t\t\tconst output = sourceId.split('#');\n\t\t\tindex = parseInt(output[0]) - 1;\n\n\t\t\tif (output.length > 1) {\n\t\t\t\tsuffix = output[1];\n\t\t\t}\n\t\t} else {\n\t\t\tindex = sourceId - 1;\n\t\t}\n\n\t\tif (citations[index]) {\n\t\t\tconsole.log('Showing citation modal for:', citations[index]);\n\n\t\t\tif (citations[index]?.source?.embed_url) {\n\t\t\t\tconst embedUrl = citations[index].source.embed_url;\n\t\t\t\tif (embedUrl) {\n\t\t\t\t\tif (readOnly) {\n\t\t\t\t\t\t// Open in new tab if readOnly\n\t\t\t\t\t\twindow.open(embedUrl, '_blank');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshowControls.set(true);\n\t\t\t\t\t\tshowEmbeds.set(true);\n\t\t\t\t\t\tembed.set({\n\t\t\t\t\t\t\turl: embedUrl,\n\t\t\t\t\t\t\ttitle: citations[index]?.source?.name || 'Embedded Content',\n\t\t\t\t\t\t\tsource: citations[index],\n\t\t\t\t\t\t\tchatId: chatId,\n\t\t\t\t\t\t\tmessageId: id,\n\t\t\t\t\t\t\tsourceId: sourceId\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tselectedCitation = citations[index];\n\t\t\t\t\tshowCitationModal = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tselectedCitation = citations[index];\n\t\t\t\tshowCitationModal = true;\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction calculateShowRelevance(sources: any[]) {\n\t\tconst distances = sources.flatMap((citation) => citation.distances ?? []);\n\t\tconst inRange = distances.filter((d) => d !== undefined && d >= -1 && d <= 1).length;\n\t\tconst outOfRange = distances.filter((d) => d !== undefined && (d < -1 || d > 1)).length;\n\n\t\tif (distances.length === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\t(inRange === distances.length - 1 && outOfRange === 1) ||\n\t\t\t(outOfRange === distances.length - 1 && inRange === 1)\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfunction shouldShowPercentage(sources: any[]) {\n\t\tconst distances = sources.flatMap((citation) => citation.distances ?? []);\n\t\treturn distances.every((d) => d !== undefined && d >= -1 && d <= 1);\n\t}\n\n\t$: {\n\t\tcitations = sources.reduce((acc, source) => {\n\t\t\tif (Object.keys(source).length === 0) {\n\t\t\t\treturn acc;\n\t\t\t}\n\n\t\t\tsource?.document?.forEach((document, index) => {\n\t\t\t\tconst metadata = source?.metadata?.[index];\n\t\t\t\tconst distance = source?.distances?.[index];\n\n\t\t\t\t// Within the same citation there could be multiple documents\n\t\t\t\tconst id = metadata?.source ?? source?.source?.id ?? 'N/A';\n\t\t\t\tlet _source = source?.source;\n\n\t\t\t\tif (metadata?.name) {\n\t\t\t\t\t_source = { ..._source, name: metadata.name };\n\t\t\t\t}\n\n\t\t\t\tif (id.startsWith('http://') || id.startsWith('https://')) {\n\t\t\t\t\t_source = { ..._source, name: id, url: id };\n\t\t\t\t}\n\n\t\t\t\tconst existingSource = acc.find((item) => item.id === id);\n\n\t\t\t\tif (existingSource) {\n\t\t\t\t\texistingSource.document.push(document);\n\t\t\t\t\texistingSource.metadata.push(metadata);\n\t\t\t\t\tif (distance !== undefined) existingSource.distances.push(distance);\n\t\t\t\t} else {\n\t\t\t\t\tacc.push({\n\t\t\t\t\t\tid: id,\n\t\t\t\t\t\tsource: _source,\n\t\t\t\t\t\tdocument: [document],\n\t\t\t\t\t\tmetadata: metadata ? [metadata] : [],\n\t\t\t\t\t\tdistances: distance !== undefined ? [distance] : []\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn acc;\n\t\t}, []);\n\t\tconsole.log('citations', citations);\n\n\t\tshowRelevance = calculateShowRelevance(citations);\n\t\tshowPercentage = shouldShowPercentage(citations);\n\t}\n\n\tconst decodeString = (str: string) => {\n\t\ttry {\n\t\t\treturn decodeURIComponent(str);\n\t\t} catch (e) {\n\t\t\treturn str;\n\t\t}\n\t};\n</script>\n\n<CitationModal\n\tbind:show={showCitationModal}\n\tcitation={selectedCitation}\n\t{showPercentage}\n\t{showRelevance}\n/>\n\n{#if citations.length > 0}\n\t{@const urlCitations = citations.filter((c) => c?.source?.name?.startsWith('http'))}\n\t<div class=\" py-1 -mx-0.5 w-full flex gap-1 items-center flex-wrap\">\n\t\t<button\n\t\t\tclass=\"text-xs font-medium text-gray-600 dark:text-gray-300 px-3.5 h-8 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition flex items-center gap-1 border border-gray-50 dark:border-gray-850/30\"\n\t\t\ton:click={() => {\n\t\t\t\tshowCitations = !showCitations;\n\t\t\t}}\n\t\t>\n\t\t\t{#if urlCitations.length > 0}\n\t\t\t\t<div class=\"flex -space-x-1 items-center\">\n\t\t\t\t\t{#each urlCitations.slice(0, 3) as citation, idx}\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc=\"https://www.google.com/s2/favicons?sz=32&domain={citation.source.name}\"\n\t\t\t\t\t\t\talt=\"favicon\"\n\t\t\t\t\t\t\tclass=\"size-4 rounded-full shrink-0 border border-white dark:border-gray-850 bg-white dark:bg-gray-900\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t\t<div>\n\t\t\t\t{#if citations.length === 1}\n\t\t\t\t\t{$i18n.t('1 Source')}\n\t\t\t\t{:else}\n\t\t\t\t\t{$i18n.t('{{COUNT}} Sources', {\n\t\t\t\t\t\tCOUNT: citations.length\n\t\t\t\t\t})}\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</button>\n\t</div>\n{/if}\n\n{#if showCitations}\n\t<div class=\"py-1.5\">\n\t\t<div class=\"text-xs gap-2 flex flex-col\">\n\t\t\t{#each citations as citation, idx}\n\t\t\t\t<button\n\t\t\t\t\tid={`source-${id}-${idx + 1}`}\n\t\t\t\t\tclass=\"no-toggle outline-hidden flex dark:text-gray-300 bg-transparent text-gray-600 rounded-xl gap-1.5 items-center\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tshowCitationModal = true;\n\t\t\t\t\t\tselectedCitation = citation;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\" font-medium bg-gray-50 dark:bg-gray-850 rounded-md px-1\">\n\t\t\t\t\t\t{idx + 1}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex-1 truncate hover:text-black dark:text-white/60 dark:hover:text-white transition text-left\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{decodeString(citation.source.name)}\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t{/each}\n\t\t</div>\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { getContext } from 'svelte';\n\timport CodeBlock from './CodeBlock.svelte';\n\timport Modal from '$lib/components/common/Modal.svelte';\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport Badge from '$lib/components/common/Badge.svelte';\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\tconst i18n = getContext('i18n');\n\n\texport let show = false;\n\texport let codeExecution = null;\n</script>\n\n<Modal size=\"lg\" bind:show>\n\t<div>\n\t\t<div class=\"flex justify-between dark:text-gray-300 px-5 pt-4 pb-2\">\n\t\t\t<div class=\"text-lg font-medium self-center flex flex-col gap-0.5 capitalize\">\n\t\t\t\t{#if codeExecution?.result}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{#if codeExecution.result?.error}\n\t\t\t\t\t\t\t<Badge type=\"error\" content=\"error\" />\n\t\t\t\t\t\t{:else if codeExecution.result?.output}\n\t\t\t\t\t\t\t<Badge type=\"success\" content=\"success\" />\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<Badge type=\"warning\" content=\"incomplete\" />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t<div class=\"flex gap-2 items-center\">\n\t\t\t\t\t{#if !codeExecution?.result}\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Spinner className=\"size-4\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{#if codeExecution?.name}\n\t\t\t\t\t\t\t{$i18n.t('Code execution')}: {codeExecution?.name}\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t{$i18n.t('Code execution')}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<button\n\t\t\t\tclass=\"self-center\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tshow = false;\n\t\t\t\t\tcodeExecution = null;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<XMark className={'size-5'} />\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class=\"flex flex-col md:flex-row w-full px-4 pb-5\">\n\t\t\t<div\n\t\t\t\tclass=\"flex flex-col w-full dark:text-gray-200 overflow-y-scroll max-h-[22rem] scrollbar-hidden\"\n\t\t\t>\n\t\t\t\t<div class=\"flex flex-col w-full\">\n\t\t\t\t\t<CodeBlock\n\t\t\t\t\t\tid=\"code-exec-{codeExecution?.id}-code\"\n\t\t\t\t\t\tlang={codeExecution?.language ?? ''}\n\t\t\t\t\t\tcode={codeExecution?.code ?? ''}\n\t\t\t\t\t\tclassName=\"\"\n\t\t\t\t\t\teditorClassName={codeExecution?.result &&\n\t\t\t\t\t\t(codeExecution?.result?.error || codeExecution?.result?.output)\n\t\t\t\t\t\t\t? 'rounded-b-none'\n\t\t\t\t\t\t\t: ''}\n\t\t\t\t\t\trun={false}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{#if codeExecution?.result && (codeExecution?.result?.error || codeExecution?.result?.output)}\n\t\t\t\t\t<div class=\"dark:bg-[#202123] dark:text-white px-4 py-4 rounded-b-lg flex flex-col gap-3\">\n\t\t\t\t\t\t{#if codeExecution?.result?.error}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class=\" text-gray-500 text-xs mb-1\">{$i18n.t('ERROR')}</div>\n\t\t\t\t\t\t\t\t<div class=\"text-sm\">{codeExecution?.result?.error}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{#if codeExecution?.result?.output}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class=\" text-gray-500 text-xs mb-1\">{$i18n.t('OUTPUT')}</div>\n\t\t\t\t\t\t\t\t<div class=\"text-sm\">{codeExecution?.result?.output}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t\t{#if codeExecution?.result?.files && codeExecution?.result?.files.length > 0}\n\t\t\t\t\t<div class=\"flex flex-col w-full\">\n\t\t\t\t\t\t<hr class=\"border-gray-100/30 dark:border-gray-850/30 my-2\" />\n\t\t\t\t\t\t<div class=\" text-sm font-medium dark:text-gray-300\">\n\t\t\t\t\t\t\t{$i18n.t('Files')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ul class=\"mt-1 list-disc pl-4 text-xs\">\n\t\t\t\t\t\t\t{#each codeExecution?.result?.files as file}\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href={file.url} target=\"_blank\">{file.name}</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</Modal>\n","<script lang=\"ts\">\n\timport CodeExecutionModal from './CodeExecutionModal.svelte';\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport Check from '$lib/components/icons/Check.svelte';\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\timport EllipsisHorizontal from '$lib/components/icons/EllipsisHorizontal.svelte';\n\n\texport let codeExecutions = [];\n\n\tlet selectedCodeExecution = null;\n\tlet showCodeExecutionModal = false;\n\n\t$: if (codeExecutions) {\n\t\tupdateSelectedCodeExecution();\n\t}\n\n\tconst updateSelectedCodeExecution = () => {\n\t\tif (selectedCodeExecution) {\n\t\t\tselectedCodeExecution = codeExecutions.find(\n\t\t\t\t(execution) => execution.id === selectedCodeExecution.id\n\t\t\t);\n\t\t}\n\t};\n</script>\n\n<CodeExecutionModal bind:show={showCodeExecutionModal} codeExecution={selectedCodeExecution} />\n\n{#if codeExecutions.length > 0}\n\t<div class=\"mt-1 mb-2 w-full flex gap-1 items-center flex-wrap\">\n\t\t{#each codeExecutions as execution (execution.id)}\n\t\t\t<div class=\"flex gap-1 text-xs font-semibold\">\n\t\t\t\t<button\n\t\t\t\t\tclass=\"flex dark:text-gray-300 py-1 px-1 bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-xl max-w-96\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tselectedCodeExecution = execution;\n\t\t\t\t\t\tshowCodeExecutionModal = true;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"bg-white dark:bg-gray-700 rounded-full size-4 flex items-center justify-center\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if execution?.result}\n\t\t\t\t\t\t\t{#if execution.result?.error}\n\t\t\t\t\t\t\t\t<XMark />\n\t\t\t\t\t\t\t{:else if execution.result?.output}\n\t\t\t\t\t\t\t\t<Check strokeWidth=\"3\" className=\"size-3\" />\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<EllipsisHorizontal />\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<Spinner className=\"size-4\" />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex-1 mx-2 line-clamp-1 code-execution-name {execution?.result ? '' : 'pulse'}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{execution.name}\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t{/each}\n\t</div>\n{/if}\n\n<style>\n\t@keyframes pulse {\n\t\t0%,\n\t\t100% {\n\t\t\topacity: 1;\n\t\t}\n\t\t50% {\n\t\t\topacity: 0.6;\n\t\t}\n\t}\n\n\t.pulse {\n\t\topacity: 1;\n\t\tanimation: pulse 1.5s ease;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\n\timport DOMPurify from 'dompurify';\n\timport { marked } from 'marked';\n\n\timport { getContext, tick, onDestroy } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport { chatCompletion } from '$lib/apis/openai';\n\n\timport ChatBubble from '$lib/components/icons/ChatBubble.svelte';\n\timport LightBulb from '$lib/components/icons/LightBulb.svelte';\n\timport Markdown from '../Messages/Markdown.svelte';\n\timport Skeleton from '../Messages/Skeleton.svelte';\n\timport { chatId, models, socket } from '$lib/stores';\n\n\texport let id = '';\n\texport let messageId = '';\n\n\texport let model = null;\n\texport let messages = [];\n\texport let actions = [];\n\texport let onAdd = (e) => {};\n\n\tlet floatingInput = false;\n\tlet selectedAction = null;\n\n\tlet selectedText = '';\n\tlet floatingInputValue = '';\n\n\tlet content = '';\n\tlet responseContent = null;\n\tlet responseDone = false;\n\tlet controller = null;\n\n\t$: if (actions.length === 0) {\n\t\tactions = DEFAULT_ACTIONS;\n\t}\n\n\tconst DEFAULT_ACTIONS = [\n\t\t{\n\t\t\tid: 'ask',\n\t\t\tlabel: $i18n.t('Ask'),\n\t\t\ticon: ChatBubble,\n\t\t\tinput: true,\n\t\t\tprompt: `{{SELECTED_CONTENT}}\\n\\n\\n{{INPUT_CONTENT}}`\n\t\t},\n\t\t{\n\t\t\tid: 'explain',\n\t\t\tlabel: $i18n.t('Explain'),\n\t\t\ticon: LightBulb,\n\t\t\tprompt: `{{SELECTED_CONTENT}}\\n\\n\\n${$i18n.t('Explain')}`\n\t\t}\n\t];\n\n\tconst autoScroll = async () => {\n\t\tconst responseContainer = document.getElementById('response-container');\n\t\tif (responseContainer) {\n\t\t\t// Scroll to bottom only if the scroll is at the bottom give 50px buffer\n\t\t\tif (\n\t\t\t\tresponseContainer.scrollHeight - responseContainer.clientHeight <=\n\t\t\t\tresponseContainer.scrollTop + 50\n\t\t\t) {\n\t\t\t\tresponseContainer.scrollTop = responseContainer.scrollHeight;\n\t\t\t}\n\t\t}\n\t};\n\n\tconst actionHandler = async (actionId) => {\n\t\tif (!model) {\n\t\t\ttoast.error($i18n.t('Model not selected'));\n\t\t\treturn;\n\t\t}\n\n\t\tlet selectedContent = selectedText\n\t\t\t.split('\\n')\n\t\t\t.map((line) => `> ${line}`)\n\t\t\t.join('\\n');\n\n\t\tlet selectedAction = actions.find((action) => action.id === actionId);\n\t\tif (!selectedAction) {\n\t\t\ttoast.error($i18n.t('Action not found'));\n\t\t\treturn;\n\t\t}\n\n\t\tlet prompt = selectedAction?.prompt ?? '';\n\t\tlet toolIds = [];\n\n\t\t// Handle: {{variableId|tool:id=\"toolId\"}} pattern\n\t\t// This regex captures variableId and toolId from {{variableId|tool:id=\"toolId\"}}\n\t\tconst varToolPattern = /\\{\\{(.*?)\\|tool:id=\"([^\"]+)\"\\}\\}/g;\n\t\tprompt = prompt.replace(varToolPattern, (match, variableId, toolId) => {\n\t\t\ttoolIds.push(toolId);\n\t\t\treturn variableId; // Replace with just variableId\n\t\t});\n\n\t\t// legacy {{TOOL:toolId}} pattern (for backward compatibility)\n\t\tlet toolIdPattern = /\\{\\{TOOL:([^\\}]+)\\}\\}/g;\n\t\tlet match;\n\t\twhile ((match = toolIdPattern.exec(prompt)) !== null) {\n\t\t\ttoolIds.push(match[1]);\n\t\t}\n\n\t\t// Remove all TOOL placeholders from the prompt\n\t\tprompt = prompt.replace(toolIdPattern, '');\n\n\t\tif (prompt.includes('{{INPUT_CONTENT}}') && floatingInput) {\n\t\t\tprompt = prompt.replace('{{INPUT_CONTENT}}', floatingInputValue);\n\t\t\tfloatingInputValue = '';\n\t\t}\n\n\t\tprompt = prompt.replace('{{CONTENT}}', selectedText);\n\t\tprompt = prompt.replace('{{SELECTED_CONTENT}}', selectedContent);\n\n\t\tcontent = prompt;\n\t\tresponseContent = '';\n\n\t\tlet res;\n\t\t[res, controller] = await chatCompletion(localStorage.token, {\n\t\t\tmodel: model,\n\t\t\tmodel_item: $models.find((m) => m.id === model),\n\t\t\tsession_id: $socket?.id,\n\t\t\tchat_id: $chatId,\n\t\t\tmessages: [\n\t\t\t\t...messages,\n\t\t\t\t{\n\t\t\t\t\trole: 'user',\n\t\t\t\t\tcontent: content\n\t\t\t\t}\n\t\t\t].map((message) => ({\n\t\t\t\trole: message.role,\n\t\t\t\tcontent: message.content\n\t\t\t})),\n\t\t\t...(toolIds.length > 0\n\t\t\t\t? {\n\t\t\t\t\t\ttool_ids: toolIds\n\t\t\t\t\t\t// params: {\n\t\t\t\t\t\t// \tfunction_calling: 'native'\n\t\t\t\t\t\t// }\n\t\t\t\t\t}\n\t\t\t\t: {}),\n\n\t\t\tstream: true // Enable streaming\n\t\t});\n\n\t\tif (res && res.ok) {\n\t\t\tconst reader = res.body.getReader();\n\t\t\tconst decoder = new TextDecoder();\n\n\t\t\tconst processStream = async () => {\n\t\t\t\twhile (true) {\n\t\t\t\t\t// Read data chunks from the response stream\n\t\t\t\t\tconst { done, value } = await reader.read();\n\t\t\t\t\tif (done) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Decode the received chunk\n\t\t\t\t\tconst chunk = decoder.decode(value, { stream: true });\n\n\t\t\t\t\t// Process lines within the chunk\n\t\t\t\t\tconst lines = chunk.split('\\n').filter((line) => line.trim() !== '');\n\n\t\t\t\t\tfor (const line of lines) {\n\t\t\t\t\t\tif (line.startsWith('data: ')) {\n\t\t\t\t\t\t\tif (line.startsWith('data: [DONE]')) {\n\t\t\t\t\t\t\t\tresponseDone = true;\n\n\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\tautoScroll();\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Parse the JSON chunk\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tconst data = JSON.parse(line.slice(6));\n\n\t\t\t\t\t\t\t\t\t// Append the `content` field from the \"choices\" object\n\t\t\t\t\t\t\t\t\tif (data.choices && data.choices[0]?.delta?.content) {\n\t\t\t\t\t\t\t\t\t\tresponseContent += data.choices[0].delta.content;\n\n\t\t\t\t\t\t\t\t\t\tautoScroll();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Process the stream in the background\n\t\t\ttry {\n\t\t\t\tawait processStream();\n\t\t\t} catch (e) {\n\t\t\t\tif (e.name !== 'AbortError') {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\ttoast.error($i18n.t('An error occurred while fetching the explanation'));\n\t\t}\n\t};\n\n\tconst addHandler = async () => {\n\t\tconst messages = [\n\t\t\t{\n\t\t\t\trole: 'user',\n\t\t\t\tcontent: content\n\t\t\t},\n\t\t\t{\n\t\t\t\trole: 'assistant',\n\t\t\t\tcontent: responseContent\n\t\t\t}\n\t\t];\n\n\t\tonAdd({\n\t\t\tmodelId: model,\n\t\t\tparentId: messageId,\n\t\t\tmessages: messages\n\t\t});\n\t};\n\n\texport const closeHandler = () => {\n\t\tif (controller) {\n\t\t\tcontroller.abort();\n\t\t}\n\n\t\tselectedAction = null;\n\t\tselectedText = '';\n\t\tresponseContent = null;\n\t\tresponseDone = false;\n\t\tfloatingInput = false;\n\t\tfloatingInputValue = '';\n\t};\n\n\tonDestroy(() => {\n\t\tif (controller) {\n\t\t\tcontroller.abort();\n\t\t}\n\t});\n</script>\n\n<div\n\tid={`floating-buttons-${id}`}\n\tclass=\"absolute rounded-lg mt-1 text-xs z-9999\"\n\tstyle=\"display: none\"\n>\n\t{#if responseContent === null}\n\t\t{#if !floatingInput}\n\t\t\t<div\n\t\t\t\tclass=\"flex flex-row shrink-0 p-0.5 bg-white dark:bg-gray-850 dark:text-gray-100 text-medium rounded-xl shadow-xl border border-gray-100 dark:border-gray-800\"\n\t\t\t>\n\t\t\t\t{#each actions as action}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"px-1.5 py-[1px] hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl flex items-center gap-1 min-w-fit transition\"\n\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\tselectedText = window.getSelection().toString();\n\t\t\t\t\t\t\tselectedAction = action;\n\n\t\t\t\t\t\t\tif (action.prompt.includes('{{INPUT_CONTENT}}')) {\n\t\t\t\t\t\t\t\tfloatingInput = true;\n\t\t\t\t\t\t\t\tfloatingInputValue = '';\n\n\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tconst input = document.getElementById('floating-message-input');\n\t\t\t\t\t\t\t\t\tif (input) {\n\t\t\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tactionHandler(action.id);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if action.icon}\n\t\t\t\t\t\t\t<svelte:component this={action.icon} className=\"size-3 shrink-0\" />\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t<div class=\"shrink-0\">{action.label}</div>\n\t\t\t\t\t</button>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<div\n\t\t\t\tclass=\"py-1 flex dark:text-gray-100 bg-white dark:bg-gray-850 border border-gray-100 dark:border-gray-800 w-72 rounded-full shadow-xl\"\n\t\t\t>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tid=\"floating-message-input\"\n\t\t\t\t\tclass=\"ml-5 bg-transparent outline-hidden w-full flex-1 text-sm\"\n\t\t\t\t\tplaceholder={$i18n.t('Ask a question')}\n\t\t\t\t\tbind:value={floatingInputValue}\n\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\tactionHandler(selectedAction?.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t<div class=\"ml-1 mr-1\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"{floatingInputValue !== ''\n\t\t\t\t\t\t\t? 'bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 '\n\t\t\t\t\t\t\t: 'text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled'} transition rounded-full p-1.5 m-0.5 self-center\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tactionHandler(selectedAction?.id);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\td=\"M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z\"\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\t{:else}\n\t\t<div\n\t\t\tclass=\"bg-white dark:bg-gray-850 dark:text-gray-100 rounded-3xl shadow-xl w-80 max-w-full border border-gray-100 dark:border-gray-800\"\n\t\t>\n\t\t\t<div\n\t\t\t\tclass=\"bg-white dark:bg-gray-850 dark:text-gray-100 text-medium rounded-3xl px-3.5 pt-3 w-full\"\n\t\t\t>\n\t\t\t\t<div class=\"font-medium\">\n\t\t\t\t\t<Markdown id={`${id}-float-prompt`} {content} />\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"bg-white dark:bg-gray-850 dark:text-gray-100 text-medium rounded-4xl w-full\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\" max-h-80 overflow-y-auto w-full markdown-prose-xs px-3.5 py-3\"\n\t\t\t\t\tid=\"response-container\"\n\t\t\t\t>\n\t\t\t\t\t{#if !responseContent || responseContent?.trim() === ''}\n\t\t\t\t\t\t<Skeleton size=\"sm\" />\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<Markdown id={`${id}-float-response`} content={responseContent} />\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if responseDone}\n\t\t\t\t\t\t<div class=\"flex justify-end pt-3 text-sm font-medium\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full\"\n\t\t\t\t\t\t\t\ton:click={addHandler}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{$i18n.t('Add')}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n</div>\n","<script>\n\timport { onDestroy, onMount, tick, getContext } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport Markdown from './Markdown.svelte';\n\timport {\n\t\tartifactCode,\n\t\tchatId,\n\t\tmobile,\n\t\tsettings,\n\t\tshowArtifacts,\n\t\tshowControls,\n\t\tshowEmbeds,\n\t\tshowOverview\n\t} from '$lib/stores';\n\timport FloatingButtons from '../ContentRenderer/FloatingButtons.svelte';\n\timport { createMessagesList } from '$lib/utils';\n\n\texport let id;\n\texport let content;\n\n\texport let history;\n\texport let messageId;\n\n\texport let selectedModels = [];\n\n\texport let done = true;\n\texport let model = null;\n\texport let sources = null;\n\n\texport let save = false;\n\texport let preview = false;\n\texport let floatingButtons = true;\n\n\texport let editCodeBlock = true;\n\texport let topPadding = false;\n\n\texport let onSave = (e) => {};\n\texport let onSourceClick = (e) => {};\n\texport let onTaskClick = (e) => {};\n\texport let onAddMessages = (e) => {};\n\n\tlet contentContainerElement;\n\tlet floatingButtonsElement;\n\n\tconst updateButtonPosition = (event) => {\n\t\tconst buttonsContainerElement = document.getElementById(`floating-buttons-${id}`);\n\t\tif (\n\t\t\t!contentContainerElement?.contains(event.target) &&\n\t\t\t!buttonsContainerElement?.contains(event.target)\n\t\t) {\n\t\t\tcloseFloatingButtons();\n\t\t\treturn;\n\t\t}\n\n\t\tsetTimeout(async () => {\n\t\t\tawait tick();\n\n\t\t\tif (!contentContainerElement?.contains(event.target)) return;\n\n\t\t\tlet selection = window.getSelection();\n\n\t\t\tif (selection.toString().trim().length > 0) {\n\t\t\t\tconst range = selection.getRangeAt(0);\n\t\t\t\tconst rect = range.getBoundingClientRect();\n\n\t\t\t\tconst parentRect = contentContainerElement.getBoundingClientRect();\n\n\t\t\t\t// Adjust based on parent rect\n\t\t\t\tconst top = rect.bottom - parentRect.top;\n\t\t\t\tconst left = rect.left - parentRect.left;\n\n\t\t\t\tif (buttonsContainerElement) {\n\t\t\t\t\tbuttonsContainerElement.style.display = 'block';\n\n\t\t\t\t\t// Calculate space available on the right\n\t\t\t\t\tconst spaceOnRight = parentRect.width - left;\n\t\t\t\t\tlet halfScreenWidth = $mobile ? window.innerWidth / 2 : window.innerWidth / 3;\n\n\t\t\t\t\tif (spaceOnRight < halfScreenWidth) {\n\t\t\t\t\t\tconst right = parentRect.right - rect.right;\n\t\t\t\t\t\tbuttonsContainerElement.style.right = `${right}px`;\n\t\t\t\t\t\tbuttonsContainerElement.style.left = 'auto'; // Reset left\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Enough space, position using 'left'\n\t\t\t\t\t\tbuttonsContainerElement.style.left = `${left}px`;\n\t\t\t\t\t\tbuttonsContainerElement.style.right = 'auto'; // Reset right\n\t\t\t\t\t}\n\t\t\t\t\tbuttonsContainerElement.style.top = `${top + 5}px`; // +5 to add some spacing\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcloseFloatingButtons();\n\t\t\t}\n\t\t}, 0);\n\t};\n\n\tconst closeFloatingButtons = () => {\n\t\tconst buttonsContainerElement = document.getElementById(`floating-buttons-${id}`);\n\t\tif (buttonsContainerElement) {\n\t\t\tbuttonsContainerElement.style.display = 'none';\n\t\t}\n\n\t\tif (floatingButtonsElement) {\n\t\t\t// check if closeHandler is defined\n\n\t\t\tif (typeof floatingButtonsElement?.closeHandler === 'function') {\n\t\t\t\t// call the closeHandler function\n\t\t\t\tfloatingButtonsElement?.closeHandler();\n\t\t\t}\n\t\t}\n\t};\n\n\tconst keydownHandler = (e) => {\n\t\tif (e.key === 'Escape') {\n\t\t\tcloseFloatingButtons();\n\t\t}\n\t};\n\n\tonMount(() => {\n\t\tif (floatingButtons) {\n\t\t\tcontentContainerElement?.addEventListener('mouseup', updateButtonPosition);\n\t\t\tdocument.addEventListener('mouseup', updateButtonPosition);\n\t\t\tdocument.addEventListener('keydown', keydownHandler);\n\t\t}\n\t});\n\n\tonDestroy(() => {\n\t\tif (floatingButtons) {\n\t\t\tcontentContainerElement?.removeEventListener('mouseup', updateButtonPosition);\n\t\t\tdocument.removeEventListener('mouseup', updateButtonPosition);\n\t\t\tdocument.removeEventListener('keydown', keydownHandler);\n\t\t}\n\t});\n</script>\n\n<div bind:this={contentContainerElement}>\n\t<Markdown\n\t\t{id}\n\t\t{content}\n\t\t{model}\n\t\t{save}\n\t\t{preview}\n\t\t{done}\n\t\t{editCodeBlock}\n\t\t{topPadding}\n\t\tsourceIds={(sources ?? []).reduce((acc, source) => {\n\t\t\tlet ids = [];\n\t\t\tsource.document.forEach((document, index) => {\n\t\t\t\tif (model?.info?.meta?.capabilities?.citations == false) {\n\t\t\t\t\tids.push('N/A');\n\t\t\t\t\treturn ids;\n\t\t\t\t}\n\n\t\t\t\tconst metadata = source.metadata?.[index];\n\t\t\t\tconst id = metadata?.source ?? 'N/A';\n\n\t\t\t\tif (metadata?.name) {\n\t\t\t\t\tids.push(metadata.name);\n\t\t\t\t\treturn ids;\n\t\t\t\t}\n\n\t\t\t\tif (id.startsWith('http://') || id.startsWith('https://')) {\n\t\t\t\t\tids.push(id);\n\t\t\t\t} else {\n\t\t\t\t\tids.push(source?.source?.name ?? id);\n\t\t\t\t}\n\n\t\t\t\treturn ids;\n\t\t\t});\n\n\t\t\tacc = [...acc, ...ids];\n\n\t\t\t// remove duplicates\n\t\t\treturn acc.filter((item, index) => acc.indexOf(item) === index);\n\t\t}, [])}\n\t\t{onSourceClick}\n\t\t{onTaskClick}\n\t\t{onSave}\n\t\tonUpdate={async (token) => {\n\t\t\tconst { lang, text: code } = token;\n\n\t\t\tif (\n\t\t\t\t($settings?.detectArtifacts ?? true) &&\n\t\t\t\t(['html', 'svg'].includes(lang) || (lang === 'xml' && code.includes('svg'))) &&\n\t\t\t\t!$mobile &&\n\t\t\t\t$chatId\n\t\t\t) {\n\t\t\t\tawait tick();\n\t\t\t\tshowArtifacts.set(true);\n\t\t\t\tshowControls.set(true);\n\t\t\t}\n\t\t}}\n\t\tonPreview={async (value) => {\n\t\t\tconsole.log('Preview', value);\n\t\t\tawait artifactCode.set(value);\n\t\t\tawait showControls.set(true);\n\t\t\tawait showArtifacts.set(true);\n\t\t\tawait showOverview.set(false);\n\t\t\tawait showEmbeds.set(false);\n\t\t}}\n\t/>\n</div>\n\n{#if floatingButtons && model}\n\t<FloatingButtons\n\t\tbind:this={floatingButtonsElement}\n\t\t{id}\n\t\t{messageId}\n\t\tactions={$settings?.floatingActionButtons ?? []}\n\t\tmodel={(selectedModels ?? []).includes(model?.id)\n\t\t\t? model?.id\n\t\t\t: (selectedModels ?? []).length > 0\n\t\t\t\t? selectedModels.at(0)\n\t\t\t\t: model?.id}\n\t\tmessages={createMessagesList(history, messageId)}\n\t\tonAdd={({ modelId, parentId, messages }) => {\n\t\t\tconsole.log(modelId, parentId, messages);\n\t\t\tonAddMessages({ modelId, parentId, messages });\n\t\t\tcloseFloatingButtons();\n\t\t}}\n\t/>\n{/if}\n","import WorkerInstance from '$lib/workers/kokoro.worker?worker';\n\nexport class KokoroWorker {\n\tprivate worker: Worker | null = null;\n\tprivate initialized: boolean = false;\n\tprivate dtype: string;\n\tprivate requestQueue: Array<{\n\t\ttext: string;\n\t\tvoice: string;\n\t\tresolve: (value: string) => void;\n\t\treject: (reason: any) => void;\n\t}> = [];\n\tprivate processing = false; // To track if a request is being processed\n\n\tconstructor(dtype: string = 'fp32') {\n\t\tthis.dtype = dtype;\n\t}\n\n\tpublic async init() {\n\t\tif (this.worker) {\n\t\t\tconsole.warn('KokoroWorker is already initialized.');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.worker = new WorkerInstance();\n\n\t\t// Handle worker messages\n\t\tthis.worker.onmessage = (event) => {\n\t\t\tconst { status, error, audioUrl } = event.data;\n\n\t\t\tif (status === 'init:complete') {\n\t\t\t\tthis.initialized = true;\n\t\t\t} else if (status === 'init:error') {\n\t\t\t\tconsole.error(error);\n\t\t\t\tthis.initialized = false;\n\t\t\t} else if (status === 'generate:complete') {\n\t\t\t\t// Resolve promise from queue\n\t\t\t\tconst request = this.requestQueue.shift();\n\t\t\t\tif (request) {\n\t\t\t\t\trequest.resolve(audioUrl);\n\t\t\t\t\tthis.processNextRequest(); // Process next request in queue\n\t\t\t\t}\n\t\t\t} else if (status === 'generate:error') {\n\t\t\t\tconst request = this.requestQueue.shift();\n\t\t\t\tif (request) {\n\t\t\t\t\trequest.reject(new Error(error));\n\t\t\t\t\tthis.processNextRequest(); // Continue processing next in queue\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\tthis.worker!.postMessage({\n\t\t\t\ttype: 'init',\n\t\t\t\tpayload: { dtype: this.dtype }\n\t\t\t});\n\n\t\t\tconst handleMessage = (event: MessageEvent) => {\n\t\t\t\tif (event.data.status === 'init:complete') {\n\t\t\t\t\tthis.worker!.removeEventListener('message', handleMessage);\n\t\t\t\t\tthis.initialized = true;\n\t\t\t\t\tresolve();\n\t\t\t\t} else if (event.data.status === 'init:error') {\n\t\t\t\t\tthis.worker!.removeEventListener('message', handleMessage);\n\t\t\t\t\treject(new Error(event.data.error));\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.worker!.addEventListener('message', handleMessage);\n\t\t});\n\t}\n\n\tpublic async generate({ text, voice }: { text: string; voice: string }): Promise<string> {\n\t\tif (!this.initialized || !this.worker) {\n\t\t\tthrow new Error('KokoroTTS Worker is not initialized yet.');\n\t\t}\n\n\t\treturn new Promise<string>((resolve, reject) => {\n\t\t\tthis.requestQueue.push({ text, voice, resolve, reject });\n\t\t\tif (!this.processing) {\n\t\t\t\tthis.processNextRequest();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate processNextRequest() {\n\t\tif (this.requestQueue.length === 0) {\n\t\t\tthis.processing = false;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.processing = true;\n\t\tconst { text, voice } = this.requestQueue[0]; // Get first request but don't remove yet\n\t\tthis.worker!.postMessage({ type: 'generate', payload: { text, voice } });\n\t}\n\n\tpublic terminate() {\n\t\tif (this.worker) {\n\t\t\tthis.worker.terminate();\n\t\t\tthis.worker = null;\n\t\t\tthis.initialized = false;\n\t\t\tthis.requestQueue = [];\n\t\t\tthis.processing = false;\n\t\t}\n\t}\n}\n","<script lang=\"ts\">\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport { onMount, tick, getContext } from 'svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let followUps: string[] = [];\n\texport let onClick: (followUp: string) => void = () => {};\n</script>\n\n<div class=\"mt-4\">\n\t<div class=\"text-sm font-medium\">\n\t\t{$i18n.t('Follow up')}\n\t</div>\n\n\t<div class=\"flex flex-col text-left gap-1 mt-1.5\">\n\t\t{#each followUps as followUp, idx (idx)}\n\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t\t\t<Tooltip content={followUp} placement=\"top-start\" className=\"line-clamp-1\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\" py-1.5 bg-transparent text-left text-sm flex items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white transition cursor-pointer\"\n\t\t\t\t\ton:click={() => onClick(followUp)}\n\t\t\t\t\taria-label={followUp}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"line-clamp-1\">\n\t\t\t\t\t\t{followUp}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Tooltip>\n\n\t\t\t{#if idx < followUps.length - 1}\n\t\t\t\t<hr class=\"border-gray-50 dark:border-gray-850/30\" />\n\t\t\t{/if}\n\t\t{/each}\n\t</div>\n</div>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n\t><path d=\"M11 6H21\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path\n\t\td=\"M11 12H21\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t></path><path d=\"M11 18H21\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path\n\t\td=\"M5 19V5M5 19L3 16.5M5 19L7 16.5M5 5L3 7M5 5L7 7\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t></path></svg\n>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path d=\"M11 6H21\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path\n\t\td=\"M11 12H21\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t></path>\n\t<path d=\"M11 18H21\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path\n\t\td=\"M5 19V5M5 10L3 8M5 10L7 8M5 14L3 16M5 14L7 16\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t></path>\n</svg>\n","<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport { getContext } from 'svelte';\n\n\timport Dropdown from '$lib/components/common/Dropdown.svelte';\n\timport LineSpace from '$lib/components/icons/LineSpace.svelte';\n\timport LineSpaceSmaller from '$lib/components/icons/LineSpaceSmaller.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let onRegenerate: Function = (prompt = null) => {};\n\texport let onClose: Function = () => {};\n\n\tlet show = false;\n\tlet inputValue = '';\n</script>\n\n<Dropdown\n\tbind:show\n\ton:change={(e) => {\n\t\tif (e.detail === false) {\n\t\t\tonClose();\n\t\t}\n\t}}\n\talign=\"end\"\n>\n\t<slot></slot>\n\n\t<div slot=\"content\">\n\t\t<DropdownMenu.Content\n\t\t\tclass=\"w-full max-w-[200px] rounded-2xl px-1 py-1 border border-gray-100 dark:border-gray-800 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg transition\"\n\t\t\tsideOffset={-2}\n\t\t\tside=\"bottom\"\n\t\t\talign=\"start\"\n\t\t\ttransition={flyAndScale}\n\t\t>\n\t\t\t<div class=\"py-1.5 px-2.5 flex dark:text-gray-100\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tid=\"floating-message-input\"\n\t\t\t\t\tclass=\"bg-transparent outline-hidden w-full flex-1 text-sm\"\n\t\t\t\t\tplaceholder={$i18n.t('Suggest a change')}\n\t\t\t\t\tbind:value={inputValue}\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\tonRegenerate(inputValue);\n\t\t\t\t\t\t\tshow = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t/>\n\n\t\t\t\t<div class=\"ml-2 self-center flex items-center\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"{inputValue !== ''\n\t\t\t\t\t\t\t? 'bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 '\n\t\t\t\t\t\t\t: 'text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled'} transition rounded-full p-1 self-center\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tonRegenerate(inputValue);\n\t\t\t\t\t\t\tshow = false;\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\td=\"M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z\"\n\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<hr class=\"border-gray-50/30 dark:border-gray-800/30 my-1 mx-2\" />\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tonRegenerate();\n\t\t\t\t\tshow = false;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\tstroke-width=\"2\"\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t>\n\t\t\t\t\t<path\n\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\td=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99\"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Try Again')}</div>\n\t\t\t</DropdownMenu.Item>\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tonRegenerate($i18n.t('Add Details'));\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<LineSpace strokeWidth=\"2\" />\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Add Details')}</div>\n\t\t\t</DropdownMenu.Item>\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tonRegenerate($i18n.t('More Concise'));\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<LineSpaceSmaller strokeWidth=\"2\" />\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('More Concise')}</div>\n\t\t\t</DropdownMenu.Item>\n\t\t</DropdownMenu.Content>\n\t</div>\n</Dropdown>\n","<script>\n\timport { getContext } from 'svelte';\n\tconst i18n = getContext('i18n');\n\timport WebSearchResults from '../WebSearchResults.svelte';\n\timport Search from '$lib/components/icons/Search.svelte';\n\timport { t } from 'i18next';\n\n\texport let status = null;\n\texport let done = false;\n</script>\n\n{#if !status?.hidden}\n\t<div class=\"status-description flex items-center gap-2 py-0.5 w-full text-left\">\n\t\t{#if status?.action === 'web_search' && (status?.urls || status?.items)}\n\t\t\t<WebSearchResults {status}>\n\t\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"{(done || status?.done) === false\n\t\t\t\t\t\t\t? 'shimmer'\n\t\t\t\t\t\t\t: ''} text-base line-clamp-1 text-wrap\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<!-- $i18n.t(\"Generating search query\") -->\n\t\t\t\t\t\t<!-- $i18n.t(\"No search query generated\") -->\n\t\t\t\t\t\t<!-- $i18n.t('Searched {{count}} sites') -->\n\t\t\t\t\t\t{#if status?.description?.includes('{{count}}')}\n\t\t\t\t\t\t\t{$i18n.t(status?.description, {\n\t\t\t\t\t\t\t\tcount: (status?.urls || status?.items).length\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t{:else if status?.description === 'No search query generated'}\n\t\t\t\t\t\t\t{$i18n.t('No search query generated')}\n\t\t\t\t\t\t{:else if status?.description === 'Generating search query'}\n\t\t\t\t\t\t\t{$i18n.t('Generating search query')}\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t{status?.description}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</WebSearchResults>\n\t\t{:else if status?.action === 'knowledge_search'}\n\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"{(done || status?.done) === false\n\t\t\t\t\t\t? 'shimmer'\n\t\t\t\t\t\t: ''} text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap\"\n\t\t\t\t>\n\t\t\t\t\t{$i18n.t(`Searching Knowledge for \"{{searchQuery}}\"`, {\n\t\t\t\t\t\tsearchQuery: status.query\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{:else if status?.action === 'web_search_queries_generated' && status?.queries}\n\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"{(done || status?.done) === false\n\t\t\t\t\t\t? 'shimmer'\n\t\t\t\t\t\t: ''} text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap\"\n\t\t\t\t>\n\t\t\t\t\t{$i18n.t(`Searching`)}\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\" flex gap-1 flex-wrap mt-2\">\n\t\t\t\t\t{#each status.queries as query, idx (query)}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"bg-gray-50 dark:bg-gray-850 flex rounded-lg py-1 px-2 items-center gap-1 text-xs\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Search className=\"size-3\" />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<span class=\"line-clamp-1\">\n\t\t\t\t\t\t\t\t{query}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{:else if status?.action === 'queries_generated' && status?.queries}\n\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"{(done || status?.done) === false\n\t\t\t\t\t\t? 'shimmer'\n\t\t\t\t\t\t: ''} text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap\"\n\t\t\t\t>\n\t\t\t\t\t{$i18n.t(`Querying`)}\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\" flex gap-1 flex-wrap mt-2\">\n\t\t\t\t\t{#each status.queries as query, idx (query)}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"bg-gray-50 dark:bg-gray-850 flex rounded-lg py-1 px-2 items-center gap-1 text-xs\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Search className=\"size-3\" />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<span class=\"line-clamp-1\">\n\t\t\t\t\t\t\t\t{query}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{:else if status?.action === 'sources_retrieved' && status?.count !== undefined}\n\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"{(done || status?.done) === false\n\t\t\t\t\t\t? 'shimmer'\n\t\t\t\t\t\t: ''} text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap\"\n\t\t\t\t>\n\t\t\t\t\t{#if status.count === 0}\n\t\t\t\t\t\t{$i18n.t('No sources found')}\n\t\t\t\t\t{:else if status.count === 1}\n\t\t\t\t\t\t{$i18n.t('Retrieved 1 source')}\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<!-- {$i18n.t('Source')} -->\n\t\t\t\t\t\t<!-- {$i18n.t('No source available')} -->\n\t\t\t\t\t\t<!-- {$i18n.t('No distance available')} -->\n\t\t\t\t\t\t<!-- {$i18n.t('Retrieved {{count}} sources')} -->\n\t\t\t\t\t\t{$i18n.t('Retrieved {{count}} sources', {\n\t\t\t\t\t\t\tcount: status.count\n\t\t\t\t\t\t})}\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"{(done || status?.done) === false\n\t\t\t\t\t\t? 'shimmer'\n\t\t\t\t\t\t: ''} text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap\"\n\t\t\t\t>\n\t\t\t\t\t<!-- $i18n.t(`Searching \"{{searchQuery}}\"`) -->\n\t\t\t\t\t{#if status?.description?.includes('{{searchQuery}}')}\n\t\t\t\t\t\t{$i18n.t(status?.description, {\n\t\t\t\t\t\t\tsearchQuery: status?.query\n\t\t\t\t\t\t})}\n\t\t\t\t\t{:else if status?.description === 'No search query generated'}\n\t\t\t\t\t\t{$i18n.t('No search query generated')}\n\t\t\t\t\t{:else if status?.description === 'Generating search query'}\n\t\t\t\t\t\t{$i18n.t('Generating search query')}\n\t\t\t\t\t{:else if status?.description === 'Searching the web'}\n\t\t\t\t\t\t{$i18n.t('Searching the web')}\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t{status?.description}\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n{/if}\n","<script>\n\timport { getContext } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport StatusItem from './StatusHistory/StatusItem.svelte';\n\texport let statusHistory = [];\n\texport let expand = false;\n\n\tlet showHistory = true;\n\n\t$: if (expand) {\n\t\tshowHistory = true;\n\t} else {\n\t\tshowHistory = false;\n\t}\n\n\tlet history = [];\n\tlet status = null;\n\n\t$: if (history && history.length > 0) {\n\t\tstatus = history.at(-1);\n\t}\n\n\t$: if (JSON.stringify(statusHistory) !== JSON.stringify(history)) {\n\t\thistory = statusHistory;\n\t}\n</script>\n\n{#if history && history.length > 0}\n\t{#if status?.hidden !== true}\n\t\t<div class=\"text-sm flex flex-col w-full\">\n\t\t\t<button\n\t\t\t\tclass=\"w-full\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tshowHistory = !showHistory;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div class=\"flex items-start gap-2\">\n\t\t\t\t\t<StatusItem {status} />\n\t\t\t\t</div>\n\t\t\t</button>\n\n\t\t\t{#if showHistory}\n\t\t\t\t<div class=\"flex flex-row\">\n\t\t\t\t\t{#if history.length > 1}\n\t\t\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t\t\t{#each history as status, idx}\n\t\t\t\t\t\t\t\t<div class=\"flex items-stretch gap-2 mb-1\">\n\t\t\t\t\t\t\t\t\t<div class=\" \">\n\t\t\t\t\t\t\t\t\t\t<div class=\"pt-3 px-1 mb-1.5\">\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"relative flex size-1.5 rounded-full justify-center items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"relative inline-flex size-1.5 rounded-full bg-gray-500 dark:bg-gray-400\"\n\t\t\t\t\t\t\t\t\t\t\t\t></span>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{#if idx !== history.length - 1}\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-[0.5px] ml-[6.5px] h-[calc(100%-14px)] bg-gray-300 dark:bg-gray-700\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<StatusItem {status} done={true} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t{/if}\n{/if}\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport dayjs from 'dayjs';\n\n\timport { createEventDispatcher, onDestroy } from 'svelte';\n\timport { onMount, tick, getContext } from 'svelte';\n\timport type { Writable } from 'svelte/store';\n\timport type { i18n as i18nType, t } from 'i18next';\n\n\tconst i18n = getContext<Writable<i18nType>>('i18n');\n\n\tconst dispatch = createEventDispatcher();\n\n\timport { createNewFeedback, getFeedbackById, updateFeedbackById } from '$lib/apis/evaluations';\n\timport { getChatById } from '$lib/apis/chats';\n\timport { generateTags } from '$lib/apis';\n\n\timport {\n\t\taudioQueue,\n\t\tconfig,\n\t\tmodels,\n\t\tsettings,\n\t\ttemporaryChatEnabled,\n\t\tTTSWorker,\n\t\tuser\n\t} from '$lib/stores';\n\timport { synthesizeOpenAISpeech } from '$lib/apis/audio';\n\timport { imageGenerations } from '$lib/apis/images';\n\timport {\n\t\tcopyToClipboard as _copyToClipboard,\n\t\tapproximateToHumanReadable,\n\t\tgetMessageContentParts,\n\t\tsanitizeResponseContent,\n\t\tcreateMessagesList,\n\t\tformatDate,\n\t\tremoveDetails,\n\t\tremoveAllDetails\n\t} from '$lib/utils';\n\timport { WEBUI_API_BASE_URL, WEBUI_BASE_URL } from '$lib/constants';\n\n\timport Name from './Name.svelte';\n\timport ProfileImage from './ProfileImage.svelte';\n\timport Skeleton from './Skeleton.svelte';\n\timport Image from '$lib/components/common/Image.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport RateComment from './RateComment.svelte';\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport WebSearchResults from './ResponseMessage/WebSearchResults.svelte';\n\timport Sparkles from '$lib/components/icons/Sparkles.svelte';\n\n\timport DeleteConfirmDialog from '$lib/components/common/ConfirmDialog.svelte';\n\n\timport Error from './Error.svelte';\n\timport Citations from './Citations.svelte';\n\timport CodeExecutions from './CodeExecutions.svelte';\n\timport ContentRenderer from './ContentRenderer.svelte';\n\timport { KokoroWorker } from '$lib/workers/KokoroWorker';\n\timport FileItem from '$lib/components/common/FileItem.svelte';\n\timport FollowUps from './ResponseMessage/FollowUps.svelte';\n\timport { fade } from 'svelte/transition';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport RegenerateMenu from './ResponseMessage/RegenerateMenu.svelte';\n\timport StatusHistory from './ResponseMessage/StatusHistory.svelte';\n\timport FullHeightIframe from '$lib/components/common/FullHeightIframe.svelte';\n\n\tinterface MessageType {\n\t\tid: string;\n\t\tmodel: string;\n\t\tcontent: string;\n\t\tfiles?: { type: string; url: string }[];\n\t\ttimestamp: number;\n\t\trole: string;\n\t\tstatusHistory?: {\n\t\t\tdone: boolean;\n\t\t\taction: string;\n\t\t\tdescription: string;\n\t\t\turls?: string[];\n\t\t\tquery?: string;\n\t\t}[];\n\t\tstatus?: {\n\t\t\tdone: boolean;\n\t\t\taction: string;\n\t\t\tdescription: string;\n\t\t\turls?: string[];\n\t\t\tquery?: string;\n\t\t};\n\t\tdone: boolean;\n\t\terror?: boolean | { content: string };\n\t\tsources?: string[];\n\t\tcode_executions?: {\n\t\t\tuuid: string;\n\t\t\tname: string;\n\t\t\tcode: string;\n\t\t\tlanguage?: string;\n\t\t\tresult?: {\n\t\t\t\terror?: string;\n\t\t\t\toutput?: string;\n\t\t\t\tfiles?: { name: string; url: string }[];\n\t\t\t};\n\t\t}[];\n\t\tinfo?: {\n\t\t\topenai?: boolean;\n\t\t\tprompt_tokens?: number;\n\t\t\tcompletion_tokens?: number;\n\t\t\ttotal_tokens?: number;\n\t\t\teval_count?: number;\n\t\t\teval_duration?: number;\n\t\t\tprompt_eval_count?: number;\n\t\t\tprompt_eval_duration?: number;\n\t\t\ttotal_duration?: number;\n\t\t\tload_duration?: number;\n\t\t\tusage?: unknown;\n\t\t};\n\t\tannotation?: { type: string; rating: number };\n\t}\n\n\texport let chatId = '';\n\texport let history;\n\texport let messageId;\n\texport let selectedModels = [];\n\n\tlet message: MessageType = JSON.parse(JSON.stringify(history.messages[messageId]));\n\t$: if (history.messages) {\n\t\tif (JSON.stringify(message) !== JSON.stringify(history.messages[messageId])) {\n\t\t\tmessage = JSON.parse(JSON.stringify(history.messages[messageId]));\n\t\t}\n\t}\n\n\texport let siblings;\n\n\texport let setInputText: Function = () => {};\n\texport let gotoMessage: Function = () => {};\n\texport let showPreviousMessage: Function;\n\texport let showNextMessage: Function;\n\n\texport let updateChat: Function;\n\texport let editMessage: Function;\n\texport let saveMessage: Function;\n\texport let rateMessage: Function;\n\texport let actionMessage: Function;\n\texport let deleteMessage: Function;\n\n\texport let submitMessage: Function;\n\texport let continueResponse: Function;\n\texport let regenerateResponse: Function;\n\n\texport let addMessages: Function;\n\n\texport let isLastMessage = true;\n\texport let readOnly = false;\n\texport let editCodeBlock = true;\n\texport let topPadding = false;\n\n\tlet citationsElement: HTMLDivElement;\n\n\tlet contentContainerElement: HTMLDivElement;\n\tlet buttonsContainerElement: HTMLDivElement;\n\tlet showDeleteConfirm = false;\n\n\tlet model = null;\n\t$: model = $models.find((m) => m.id === message.model);\n\n\tlet edit = false;\n\tlet editedContent = '';\n\tlet editTextAreaElement: HTMLTextAreaElement;\n\n\tlet messageIndexEdit = false;\n\n\tlet speaking = false;\n\tlet speakingIdx: number | undefined;\n\n\tlet loadingSpeech = false;\n\n\tlet showRateComment = false;\n\n\tconst copyToClipboard = async (text) => {\n\t\ttext = removeAllDetails(text);\n\n\t\tif (($config?.ui?.response_watermark ?? '').trim() !== '') {\n\t\t\ttext = `${text}\\n\\n${$config?.ui?.response_watermark}`;\n\t\t}\n\n\t\tconst res = await _copyToClipboard(text, null, $settings?.copyFormatted ?? false);\n\t\tif (res) {\n\t\t\ttoast.success($i18n.t('Copying to clipboard was successful!'));\n\t\t}\n\t};\n\n\tconst stopAudio = () => {\n\t\ttry {\n\t\t\tspeechSynthesis.cancel();\n\t\t\t$audioQueue.stop();\n\t\t} catch {}\n\n\t\tif (speaking) {\n\t\t\tspeaking = false;\n\t\t\tspeakingIdx = undefined;\n\t\t}\n\t};\n\n\tconst speak = async () => {\n\t\tif (!(message?.content ?? '').trim().length) {\n\t\t\ttoast.info($i18n.t('No content to speak'));\n\t\t\treturn;\n\t\t}\n\n\t\tspeaking = true;\n\t\tconst content = removeAllDetails(message.content);\n\n\t\t// Get voice: model-specific > user settings > config default\n\t\tconst getVoiceId = () => {\n\t\t\t// Check for model-specific TTS voice first\n\t\t\tif (model?.info?.meta?.tts?.voice) {\n\t\t\t\treturn model.info.meta.tts.voice;\n\t\t\t}\n\t\t\t// Fall back to user settings or config default\n\t\t\tif ($settings?.audio?.tts?.defaultVoice === $config.audio.tts.voice) {\n\t\t\t\treturn $settings?.audio?.tts?.voice ?? $config?.audio?.tts?.voice;\n\t\t\t}\n\t\t\treturn $config?.audio?.tts?.voice;\n\t\t};\n\n\t\tif ($config.audio.tts.engine === '') {\n\t\t\tlet voices = [];\n\t\t\tconst getVoicesLoop = setInterval(() => {\n\t\t\t\tvoices = speechSynthesis.getVoices();\n\t\t\t\tif (voices.length > 0) {\n\t\t\t\t\tclearInterval(getVoicesLoop);\n\n\t\t\t\t\tconst voiceId = getVoiceId();\n\t\t\t\t\tconst voice = voices?.filter((v) => v.voiceURI === voiceId)?.at(0) ?? undefined;\n\n\t\t\t\t\tconsole.log(voice);\n\n\t\t\t\t\tconst speech = new SpeechSynthesisUtterance(content);\n\t\t\t\t\tspeech.rate = $settings.audio?.tts?.playbackRate ?? 1;\n\n\t\t\t\t\tconsole.log(speech);\n\n\t\t\t\t\tspeech.onend = () => {\n\t\t\t\t\t\tspeaking = false;\n\t\t\t\t\t\tif ($settings.conversationMode) {\n\t\t\t\t\t\t\tdocument.getElementById('voice-input-button')?.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tif (voice) {\n\t\t\t\t\t\tspeech.voice = voice;\n\t\t\t\t\t}\n\n\t\t\t\t\tspeechSynthesis.speak(speech);\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t} else {\n\t\t\t$audioQueue.setId(`${message.id}`);\n\t\t\t$audioQueue.setPlaybackRate($settings.audio?.tts?.playbackRate ?? 1);\n\t\t\t$audioQueue.onStopped = () => {\n\t\t\t\tspeaking = false;\n\t\t\t\tspeakingIdx = undefined;\n\t\t\t};\n\n\t\t\tloadingSpeech = true;\n\t\t\tconst messageContentParts: string[] = getMessageContentParts(\n\t\t\t\tcontent,\n\t\t\t\t$config?.audio?.tts?.split_on ?? 'punctuation'\n\t\t\t);\n\n\t\t\tif (!messageContentParts.length) {\n\t\t\t\tconsole.log('No content to speak');\n\t\t\t\ttoast.info($i18n.t('No content to speak'));\n\n\t\t\t\tspeaking = false;\n\t\t\t\tloadingSpeech = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst voiceId = getVoiceId();\n\t\t\tconsole.debug('Prepared message content for TTS', messageContentParts, 'voice:', voiceId);\n\n\t\t\tif ($settings.audio?.tts?.engine === 'browser-kokoro') {\n\t\t\t\tif (!$TTSWorker) {\n\t\t\t\t\tawait TTSWorker.set(\n\t\t\t\t\t\tnew KokoroWorker({\n\t\t\t\t\t\t\tdtype: $settings.audio?.tts?.engineConfig?.dtype ?? 'fp32'\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\n\t\t\t\t\tawait $TTSWorker.init();\n\t\t\t\t}\n\n\t\t\t\tfor (const [idx, sentence] of messageContentParts.entries()) {\n\t\t\t\t\tconst url = await $TTSWorker\n\t\t\t\t\t\t.generate({\n\t\t\t\t\t\t\ttext: sentence,\n\t\t\t\t\t\t\tvoice: voiceId\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\t\ttoast.error(`${error}`);\n\n\t\t\t\t\t\t\tspeaking = false;\n\t\t\t\t\t\t\tloadingSpeech = false;\n\t\t\t\t\t\t});\n\n\t\t\t\t\tif (url && speaking) {\n\t\t\t\t\t\t$audioQueue.enqueue(url);\n\t\t\t\t\t\tloadingSpeech = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (const [idx, sentence] of messageContentParts.entries()) {\n\t\t\t\t\tconst res = await synthesizeOpenAISpeech(localStorage.token, voiceId, sentence).catch(\n\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\t\ttoast.error(`${error}`);\n\n\t\t\t\t\t\t\tspeaking = false;\n\t\t\t\t\t\t\tloadingSpeech = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\n\t\t\t\t\tif (res && speaking) {\n\t\t\t\t\t\tconst blob = await res.blob();\n\t\t\t\t\t\tconst url = URL.createObjectURL(blob);\n\n\t\t\t\t\t\t$audioQueue.enqueue(url);\n\t\t\t\t\t\tloadingSpeech = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tlet preprocessedDetailsCache = [];\n\n\tfunction preprocessForEditing(content: string): string {\n\t\t// Replace <details>...</details> with unique ID placeholder\n\t\tconst detailsBlocks = [];\n\t\tlet i = 0;\n\n\t\tcontent = content.replace(/<details[\\s\\S]*?<\\/details>/gi, (match) => {\n\t\t\tdetailsBlocks.push(match);\n\t\t\treturn `<details id=\"__DETAIL_${i++}__\"/>`;\n\t\t});\n\n\t\t// Store original blocks in the editedContent or globally (see merging later)\n\t\tpreprocessedDetailsCache = detailsBlocks;\n\n\t\treturn content;\n\t}\n\n\tfunction postprocessAfterEditing(content: string): string {\n\t\tconst restoredContent = content.replace(\n\t\t\t/<details id=\"__DETAIL_(\\d+)__\"\\/>/g,\n\t\t\t(_, index) => preprocessedDetailsCache[parseInt(index)] || ''\n\t\t);\n\n\t\treturn restoredContent;\n\t}\n\n\tconst editMessageHandler = async () => {\n\t\tedit = true;\n\n\t\teditedContent = preprocessForEditing(message.content);\n\n\t\tawait tick();\n\n\t\teditTextAreaElement.style.height = '';\n\t\teditTextAreaElement.style.height = `${editTextAreaElement.scrollHeight}px`;\n\t};\n\n\tconst editMessageConfirmHandler = async () => {\n\t\tconst messageContent = postprocessAfterEditing(editedContent ? editedContent : '');\n\t\teditMessage(message.id, { content: messageContent }, false);\n\n\t\tedit = false;\n\t\teditedContent = '';\n\n\t\tawait tick();\n\t};\n\n\tconst saveAsCopyHandler = async () => {\n\t\tconst messageContent = postprocessAfterEditing(editedContent ? editedContent : '');\n\n\t\teditMessage(message.id, { content: messageContent });\n\n\t\tedit = false;\n\t\teditedContent = '';\n\n\t\tawait tick();\n\t};\n\n\tconst cancelEditMessage = async () => {\n\t\tedit = false;\n\t\teditedContent = '';\n\t\tawait tick();\n\t};\n\n\tlet feedbackLoading = false;\n\n\tconst feedbackHandler = async (rating: number | null = null, details: object | null = null) => {\n\t\tfeedbackLoading = true;\n\t\tconsole.log('Feedback', rating, details);\n\n\t\tconst updatedMessage = {\n\t\t\t...message,\n\t\t\tannotation: {\n\t\t\t\t...(message?.annotation ?? {}),\n\t\t\t\t...(rating !== null ? { rating: rating } : {}),\n\t\t\t\t...(details ? details : {})\n\t\t\t}\n\t\t};\n\n\t\tconst chat = await getChatById(localStorage.token, chatId).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t});\n\t\tif (!chat) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst messages = createMessagesList(history, message.id);\n\n\t\tlet feedbackItem = {\n\t\t\ttype: 'rating',\n\t\t\tdata: {\n\t\t\t\t...(updatedMessage?.annotation ? updatedMessage.annotation : {}),\n\t\t\t\tmodel_id: message?.selectedModelId ?? message.model,\n\t\t\t\t...(history.messages[message.parentId].childrenIds.length > 1\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tsibling_model_ids: history.messages[message.parentId].childrenIds\n\t\t\t\t\t\t\t\t.filter((id) => id !== message.id)\n\t\t\t\t\t\t\t\t.map((id) => history.messages[id]?.selectedModelId ?? history.messages[id].model)\n\t\t\t\t\t\t}\n\t\t\t\t\t: {})\n\t\t\t},\n\t\t\tmeta: {\n\t\t\t\tarena: message ? message.arena : false,\n\t\t\t\tmodel_id: message.model,\n\t\t\t\tmessage_id: message.id,\n\t\t\t\tmessage_index: messages.length,\n\t\t\t\tchat_id: chatId\n\t\t\t},\n\t\t\tsnapshot: {\n\t\t\t\tchat: chat\n\t\t\t}\n\t\t};\n\n\t\tconst baseModels = [\n\t\t\tfeedbackItem.data.model_id,\n\t\t\t...(feedbackItem.data.sibling_model_ids ?? [])\n\t\t].reduce((acc, modelId) => {\n\t\t\tconst model = $models.find((m) => m.id === modelId);\n\t\t\tif (model) {\n\t\t\t\tacc[model.id] = model?.info?.base_model_id ?? null;\n\t\t\t} else {\n\t\t\t\t// Log or handle cases where corresponding model is not found\n\t\t\t\tconsole.warn(`Model with ID ${modelId} not found`);\n\t\t\t}\n\t\t\treturn acc;\n\t\t}, {});\n\t\tfeedbackItem.meta.base_models = baseModels;\n\n\t\tlet feedback = null;\n\t\tif (message?.feedbackId) {\n\t\t\tfeedback = await updateFeedbackById(\n\t\t\t\tlocalStorage.token,\n\t\t\t\tmessage.feedbackId,\n\t\t\t\tfeedbackItem\n\t\t\t).catch((error) => {\n\t\t\t\ttoast.error(`${error}`);\n\t\t\t});\n\t\t} else {\n\t\t\tfeedback = await createNewFeedback(localStorage.token, feedbackItem).catch((error) => {\n\t\t\t\ttoast.error(`${error}`);\n\t\t\t});\n\n\t\t\tif (feedback) {\n\t\t\t\tupdatedMessage.feedbackId = feedback.id;\n\t\t\t}\n\t\t}\n\n\t\tconsole.log(updatedMessage);\n\t\tsaveMessage(message.id, updatedMessage);\n\n\t\tawait tick();\n\n\t\tif (!details) {\n\t\t\tshowRateComment = true;\n\n\t\t\tif (!updatedMessage.annotation?.tags && (message?.content ?? '') !== '') {\n\t\t\t\t// attempt to generate tags\n\t\t\t\tconst tags = await generateTags(localStorage.token, message.model, messages, chatId).catch(\n\t\t\t\t\t(error) => {\n\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tconsole.log(tags);\n\n\t\t\t\tif (tags) {\n\t\t\t\t\tupdatedMessage.annotation.tags = tags;\n\t\t\t\t\tfeedbackItem.data.tags = tags;\n\n\t\t\t\t\tsaveMessage(message.id, updatedMessage);\n\t\t\t\t\tawait updateFeedbackById(\n\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\tupdatedMessage.feedbackId,\n\t\t\t\t\t\tfeedbackItem\n\t\t\t\t\t).catch((error) => {\n\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfeedbackLoading = false;\n\t};\n\n\tconst deleteMessageHandler = async () => {\n\t\tdeleteMessage(message.id);\n\t};\n\n\t$: if (!edit) {\n\t\t(async () => {\n\t\t\tawait tick();\n\t\t})();\n\t}\n\n\tconst buttonsWheelHandler = (event: WheelEvent) => {\n\t\tif (buttonsContainerElement) {\n\t\t\tif (buttonsContainerElement.scrollWidth <= buttonsContainerElement.clientWidth) {\n\t\t\t\t// If the container is not scrollable, horizontal scroll\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tif (event.deltaY !== 0) {\n\t\t\t\t\t// Adjust horizontal scroll position based on vertical scroll\n\t\t\t\t\tbuttonsContainerElement.scrollLeft += event.deltaY;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tconst contentCopyHandler = (e) => {\n\t\tif (contentContainerElement) {\n\t\t\te.preventDefault();\n\t\t\t// Get the selected HTML\n\t\t\tconst selection = window.getSelection();\n\t\t\tconst range = selection.getRangeAt(0);\n\t\t\tconst tempDiv = document.createElement('div');\n\n\t\t\t// Remove background, color, and font styles\n\t\t\ttempDiv.appendChild(range.cloneContents());\n\n\t\t\ttempDiv.querySelectorAll('table').forEach((table) => {\n\t\t\t\ttable.style.borderCollapse = 'collapse';\n\t\t\t\ttable.style.width = 'auto';\n\t\t\t\ttable.style.tableLayout = 'auto';\n\t\t\t});\n\n\t\t\ttempDiv.querySelectorAll('th').forEach((th) => {\n\t\t\t\tth.style.whiteSpace = 'nowrap';\n\t\t\t\tth.style.padding = '4px 8px';\n\t\t\t});\n\n\t\t\t// Put cleaned HTML + plain text into clipboard\n\t\t\te.clipboardData.setData('text/html', tempDiv.innerHTML);\n\t\t\te.clipboardData.setData('text/plain', selection.toString());\n\t\t}\n\t};\n\n\tonMount(async () => {\n\t\t// console.log('ResponseMessage mounted');\n\n\t\tawait tick();\n\t\tif (buttonsContainerElement) {\n\t\t\tbuttonsContainerElement.addEventListener('wheel', buttonsWheelHandler);\n\t\t}\n\n\t\tif (contentContainerElement) {\n\t\t\tcontentContainerElement.addEventListener('copy', contentCopyHandler);\n\t\t}\n\t});\n\n\tonDestroy(() => {\n\t\tif (buttonsContainerElement) {\n\t\t\tbuttonsContainerElement.removeEventListener('wheel', buttonsWheelHandler);\n\t\t}\n\n\t\tif (contentContainerElement) {\n\t\t\tcontentContainerElement.removeEventListener('copy', contentCopyHandler);\n\t\t}\n\t});\n</script>\n\n<DeleteConfirmDialog\n\tbind:show={showDeleteConfirm}\n\ttitle={$i18n.t('Delete message?')}\n\ton:confirm={() => {\n\t\tdeleteMessageHandler();\n\t}}\n/>\n\n{#key message.id}\n\t<div\n\t\tclass=\" flex w-full message-{message.id}\"\n\t\tid=\"message-{message.id}\"\n\t\tdir={$settings.chatDirection}\n\t>\n\t\t<div class={`shrink-0 ltr:mr-3 rtl:ml-3 hidden @lg:flex mt-1 `}>\n\t\t\t<ProfileImage\n\t\t\t\tsrc={`${WEBUI_API_BASE_URL}/models/model/profile/image?id=${model?.id}&lang=${$i18n.language}`}\n\t\t\t\tclassName={'size-8 assistant-message-profile-image'}\n\t\t\t/>\n\t\t</div>\n\n\t\t<div class=\"flex-auto w-0 pl-1 relative\">\n\t\t\t<Name>\n\t\t\t\t<Tooltip content={model?.name ?? message.model} placement=\"top-start\">\n\t\t\t\t\t<span id=\"response-message-model-name\" class=\"line-clamp-1 text-black dark:text-white\">\n\t\t\t\t\t\t{model?.name ?? message.model}\n\t\t\t\t\t</span>\n\t\t\t\t</Tooltip>\n\n\t\t\t\t{#if message.timestamp}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"self-center text-xs font-medium first-letter:capitalize ml-0.5 translate-y-[1px] {($settings?.highContrastMode ??\n\t\t\t\t\t\tfalse)\n\t\t\t\t\t\t\t? 'dark:text-gray-100 text-gray-900'\n\t\t\t\t\t\t\t: 'invisible group-hover:visible transition text-gray-400'}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tooltip content={dayjs(message.timestamp * 1000).format('LLLL')}>\n\t\t\t\t\t\t\t<span class=\"line-clamp-1\"\n\t\t\t\t\t\t\t\t>{$i18n.t(formatDate(message.timestamp * 1000), {\n\t\t\t\t\t\t\t\t\tLOCALIZED_TIME: dayjs(message.timestamp * 1000).format('LT'),\n\t\t\t\t\t\t\t\t\tLOCALIZED_DATE: dayjs(message.timestamp * 1000).format('L')\n\t\t\t\t\t\t\t\t})}</span\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</Name>\n\n\t\t\t<div>\n\t\t\t\t<div class=\"chat-{message.role} w-full min-w-full markdown-prose\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{#if model?.info?.meta?.capabilities?.status_updates ?? true}\n\t\t\t\t\t\t\t<StatusHistory statusHistory={message?.statusHistory} />\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{#if message?.files && message.files?.filter((f) => f.type === 'image').length > 0}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"my-1 w-full flex overflow-x-auto gap-2 flex-wrap\"\n\t\t\t\t\t\t\t\tdir={$settings?.chatDirection ?? 'auto'}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{#each message.files as file}\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t{#if file.type === 'image' || (file?.content_type ?? '').startsWith('image/')}\n\t\t\t\t\t\t\t\t\t\t\t<Image src={file.url} alt={message.content} />\n\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t<FileItem\n\t\t\t\t\t\t\t\t\t\t\t\titem={file}\n\t\t\t\t\t\t\t\t\t\t\t\turl={file.url}\n\t\t\t\t\t\t\t\t\t\t\t\tname={file.name}\n\t\t\t\t\t\t\t\t\t\t\t\ttype={file.type}\n\t\t\t\t\t\t\t\t\t\t\t\tsize={file?.size}\n\t\t\t\t\t\t\t\t\t\t\t\tsmall={true}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{#if message?.embeds && message.embeds.length > 0}\n\t\t\t\t\t\t\t<div class=\"my-1 w-full flex overflow-x-auto gap-2 flex-wrap\">\n\t\t\t\t\t\t\t\t{#each message.embeds as embed, idx}\n\t\t\t\t\t\t\t\t\t<div class=\"my-2 w-full\" id={`${message.id}-embeds-${idx}`}>\n\t\t\t\t\t\t\t\t\t\t<FullHeightIframe\n\t\t\t\t\t\t\t\t\t\t\tsrc={embed}\n\t\t\t\t\t\t\t\t\t\t\tallowScripts={true}\n\t\t\t\t\t\t\t\t\t\t\tallowForms={true}\n\t\t\t\t\t\t\t\t\t\t\tallowSameOrigin={$settings?.iframeSandboxAllowSameOrigin ?? false}\n\t\t\t\t\t\t\t\t\t\t\tallowPopups={true}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{#if edit === true}\n\t\t\t\t\t\t\t<div class=\"w-full bg-gray-50 dark:bg-gray-800 rounded-3xl px-5 py-3 my-2\">\n\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\tid=\"message-edit-{message.id}\"\n\t\t\t\t\t\t\t\t\tbind:this={editTextAreaElement}\n\t\t\t\t\t\t\t\t\tclass=\" bg-transparent outline-hidden w-full resize-none\"\n\t\t\t\t\t\t\t\t\tbind:value={editedContent}\n\t\t\t\t\t\t\t\t\ton:input={(e) => {\n\t\t\t\t\t\t\t\t\t\te.target.style.height = '';\n\t\t\t\t\t\t\t\t\t\te.target.style.height = `${e.target.scrollHeight}px`;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\t\t\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById('close-edit-message-button')?.click();\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tconst isCmdOrCtrlPressed = e.metaKey || e.ctrlKey;\n\t\t\t\t\t\t\t\t\t\tconst isEnterPressed = e.key === 'Enter';\n\n\t\t\t\t\t\t\t\t\t\tif (isCmdOrCtrlPressed && isEnterPressed) {\n\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById('confirm-edit-message-button')?.click();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t<div class=\" mt-2 mb-1 flex justify-between text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tid=\"save-new-message-button\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 border border-gray-100 dark:border-gray-700 text-gray-700 dark:text-gray-200 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tsaveAsCopyHandler();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('Save As Copy')}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class=\"flex space-x-1.5\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tid=\"close-edit-message-button\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 bg-white dark:bg-gray-900 hover:bg-gray-100 text-gray-800 dark:text-gray-100 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tcancelEditMessage();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('Cancel')}\n\t\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tid=\"confirm-edit-message-button\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 bg-gray-900 dark:bg-white hover:bg-gray-850 text-gray-100 dark:text-gray-800 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\teditMessageConfirmHandler();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('Save')}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tbind:this={contentContainerElement}\n\t\t\t\t\t\t\tclass=\"w-full flex flex-col relative {edit ? 'hidden' : ''}\"\n\t\t\t\t\t\t\tid=\"response-content-container\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{#if message.content === '' && !message.error && ((model?.info?.meta?.capabilities?.status_updates ?? true) ? (message?.statusHistory ?? [...(message?.status ? [message?.status] : [])]).length === 0 || (message?.statusHistory?.at(-1)?.hidden ?? false) : true)}\n\t\t\t\t\t\t\t\t<Skeleton />\n\t\t\t\t\t\t\t{:else if message.content && message.error !== true}\n\t\t\t\t\t\t\t\t<!-- always show message contents even if there's an error -->\n\t\t\t\t\t\t\t\t<!-- unless message.error === true which is legacy error handling, where the error message is stored in message.content -->\n\t\t\t\t\t\t\t\t<ContentRenderer\n\t\t\t\t\t\t\t\t\tid={`${chatId}-${message.id}`}\n\t\t\t\t\t\t\t\t\tmessageId={message.id}\n\t\t\t\t\t\t\t\t\t{history}\n\t\t\t\t\t\t\t\t\t{selectedModels}\n\t\t\t\t\t\t\t\t\tcontent={message.content}\n\t\t\t\t\t\t\t\t\tsources={message.sources}\n\t\t\t\t\t\t\t\t\tfloatingButtons={message?.done &&\n\t\t\t\t\t\t\t\t\t\t!readOnly &&\n\t\t\t\t\t\t\t\t\t\t($settings?.showFloatingActionButtons ?? true)}\n\t\t\t\t\t\t\t\t\tsave={!readOnly}\n\t\t\t\t\t\t\t\t\tpreview={!readOnly}\n\t\t\t\t\t\t\t\t\t{editCodeBlock}\n\t\t\t\t\t\t\t\t\t{topPadding}\n\t\t\t\t\t\t\t\t\tdone={($settings?.chatFadeStreamingText ?? true)\n\t\t\t\t\t\t\t\t\t\t? (message?.done ?? false)\n\t\t\t\t\t\t\t\t\t\t: true}\n\t\t\t\t\t\t\t\t\t{model}\n\t\t\t\t\t\t\t\t\tonTaskClick={async (e) => {\n\t\t\t\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonSourceClick={async (id) => {\n\t\t\t\t\t\t\t\t\t\tconsole.log(id);\n\n\t\t\t\t\t\t\t\t\t\tif (citationsElement) {\n\t\t\t\t\t\t\t\t\t\t\tcitationsElement?.showSourceModal(id);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonAddMessages={({ modelId, parentId, messages }) => {\n\t\t\t\t\t\t\t\t\t\taddMessages({ modelId, parentId, messages });\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonSave={({ raw, oldContent, newContent }) => {\n\t\t\t\t\t\t\t\t\t\thistory.messages[message.id].content = history.messages[\n\t\t\t\t\t\t\t\t\t\t\tmessage.id\n\t\t\t\t\t\t\t\t\t\t].content.replace(raw, raw.replace(oldContent, newContent));\n\n\t\t\t\t\t\t\t\t\t\tupdateChat();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if message?.error}\n\t\t\t\t\t\t\t\t<Error content={message?.error?.content ?? message.content} />\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if (message?.sources || message?.citations) && (model?.info?.meta?.capabilities?.citations ?? true)}\n\t\t\t\t\t\t\t\t<Citations\n\t\t\t\t\t\t\t\t\tbind:this={citationsElement}\n\t\t\t\t\t\t\t\t\tid={message?.id}\n\t\t\t\t\t\t\t\t\t{chatId}\n\t\t\t\t\t\t\t\t\tsources={message?.sources ?? message?.citations}\n\t\t\t\t\t\t\t\t\t{readOnly}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if message.code_executions}\n\t\t\t\t\t\t\t\t<CodeExecutions codeExecutions={message.code_executions} />\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{#if !edit}\n\t\t\t\t\t<div\n\t\t\t\t\t\tbind:this={buttonsContainerElement}\n\t\t\t\t\t\tclass=\"flex justify-start overflow-x-auto buttons text-gray-600 dark:text-gray-500 mt-0.5\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if message.done || siblings.length > 1}\n\t\t\t\t\t\t\t{#if siblings.length > 1}\n\t\t\t\t\t\t\t\t<div class=\"flex self-center min-w-fit\" dir=\"ltr\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Previous message')}\n\t\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tshowPreviousMessage(message);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M15.75 19.5 8.25 12l7.5-7.5\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t{#if messageIndexEdit}\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"text-sm flex justify-center font-semibold self-center dark:text-gray-100 min-w-fit\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"message-index-input-{message.id}\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={siblings.indexOf(message.id) + 1}\n\t\t\t\t\t\t\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\t\t\t\t\t\t\tmax={siblings.length}\n\t\t\t\t\t\t\t\t\t\t\t\ton:focus={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\te.target.select();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\ton:blur={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tgotoMessage(message, e.target.value - 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = false;\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgotoMessage(message, e.target.value - 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"bg-transparent font-semibold self-center dark:text-gray-100 min-w-fit outline-hidden\"\n\t\t\t\t\t\t\t\t\t\t\t/>/{siblings.length}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"text-sm tracking-widest font-semibold self-center dark:text-gray-100 min-w-fit\"\n\t\t\t\t\t\t\t\t\t\t\ton:dblclick={async () => {\n\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = true;\n\n\t\t\t\t\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\t\t\t\t\tconst input = document.getElementById(`message-index-input-${message.id}`);\n\t\t\t\t\t\t\t\t\t\t\t\tif (input) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t\t\t\t\t\t\tinput.select();\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{siblings.indexOf(message.id) + 1}/{siblings.length}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tshowNextMessage(message);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Next message')}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\td=\"m8.25 4.5 7.5 7.5-7.5 7.5\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if message.done}\n\t\t\t\t\t\t\t\t{#if !readOnly}\n\t\t\t\t\t\t\t\t\t{#if $user?.role === 'user' ? ($user?.permissions?.chat?.edit ?? true) : true}\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Edit')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Edit')}\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage || ($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\teditMessageHandler();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Copy')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Copy')}\n\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage || ($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition copy-response-button\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tcopyToClipboard(message.content);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t\t\t{#if $user?.role === 'admin' || ($user?.permissions?.chat?.tts ?? true)}\n\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Read Aloud')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Read Aloud')}\n\t\t\t\t\t\t\t\t\t\t\tid=\"speak-button-{message.id}\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage || ($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (!loadingSpeech) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (speaking) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstopAudio();\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tspeak();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{#if loadingSpeech}\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\" w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_S1WN {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation: spinner_MGfb 0.8s linear infinite;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.8s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_Km9P {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.65s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_JApP {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.5s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@keyframes spinner_MGfb {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t93.75%,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topacity: 0.2;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</style>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<circle class=\"spinner_S1WN\" cx=\"4\" cy=\"12\" r=\"3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<circle class=\"spinner_S1WN spinner_Km9P\" cx=\"12\" cy=\"12\" r=\"3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<circle class=\"spinner_S1WN spinner_JApP\" cx=\"20\" cy=\"12\" r=\"3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t{:else if speaking}\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M17.25 9.75 19.5 12m0 0 2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6 4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if message.usage}\n\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\tcontent={message.usage\n\t\t\t\t\t\t\t\t\t\t\t? `<pre>${sanitizeResponseContent(\n\t\t\t\t\t\t\t\t\t\t\t\t\tJSON.stringify(message.usage, null, 2)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.replace(/\"([^(\")\"]+)\":/g, '$1:')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice(1, -1)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split('\\n')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((line) => line.slice(2))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((line) => (line.endsWith(',') ? line.slice(0, -1) : line))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.join('\\n')\n\t\t\t\t\t\t\t\t\t\t\t\t)}</pre>`\n\t\t\t\t\t\t\t\t\t\t\t: ''}\n\t\t\t\t\t\t\t\t\t\tplacement=\"bottom\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\" {isLastMessage || ($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition whitespace-pre-wrap\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(message);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tid=\"info-{message.id}\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t{#if !readOnly}\n\t\t\t\t\t\t\t\t\t{#if !$temporaryChatEnabled && ($config?.features.enable_message_rating ?? true) && ($user?.role === 'admin' || ($user?.permissions?.chat?.rate_response ?? true))}\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Good Response')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Good Response')}\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage || ($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg {(\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage?.annotation?.rating ?? ''\n\t\t\t\t\t\t\t\t\t\t\t\t).toString() === '1'\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'bg-gray-100 dark:bg-gray-800'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: ''} dark:hover:text-white hover:text-black transition disabled:cursor-progress disabled:hover:bg-transparent\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={feedbackLoading}\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tawait feedbackHandler(1);\n\t\t\t\t\t\t\t\t\t\t\t\t\twindow.setTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdocument\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.getElementById(`message-feedback-${message.id}`)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t?.scrollIntoView();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Bad Response')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Bad Response')}\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage || ($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg {(\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage?.annotation?.rating ?? ''\n\t\t\t\t\t\t\t\t\t\t\t\t).toString() === '-1'\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'bg-gray-100 dark:bg-gray-800'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: ''} dark:hover:text-white hover:text-black transition disabled:cursor-progress disabled:hover:bg-transparent\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={feedbackLoading}\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tawait feedbackHandler(-1);\n\t\t\t\t\t\t\t\t\t\t\t\t\twindow.setTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdocument\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.getElementById(`message-feedback-${message.id}`)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t?.scrollIntoView();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t{#if isLastMessage && ($user?.role === 'admin' || ($user?.permissions?.chat?.continue_response ?? true))}\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Continue Response')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Continue Response')}\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"continue-response-button\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage || ($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontinueResponse();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t{#if $user?.role === 'admin' || ($user?.permissions?.chat?.regenerate_response ?? true)}\n\t\t\t\t\t\t\t\t\t\t{#if $settings?.regenerateMenu ?? true}\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"hidden regenerate-response-button\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowRateComment = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\tregenerateResponse(message);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t(model?.actions ?? []).forEach((action) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch('action', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: action.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tevent: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: 'regenerate-response',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessageId: message.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t\t<RegenerateMenu\n\t\t\t\t\t\t\t\t\t\t\t\tonRegenerate={(prompt = null) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowRateComment = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\tregenerateResponse(message, prompt);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t(model?.actions ?? []).forEach((action) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch('action', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: action.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tevent: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: 'regenerate-response',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessageId: message.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Regenerate')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Regenerate')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t</RegenerateMenu>\n\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Regenerate')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Regenerate')}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowRateComment = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tregenerateResponse(message);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(model?.actions ?? []).forEach((action) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch('action', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: action.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tevent: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: 'regenerate-response',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessageId: message.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t{#if $user?.role === 'admin' || ($user?.permissions?.chat?.delete_message ?? true)}\n\t\t\t\t\t\t\t\t\t\t{#if siblings.length > 1}\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Delete')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label={$i18n.t('Delete')}\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"delete-response-button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage || ($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowDeleteConfirm = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t{#each model?.actions ?? [] as action}\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={action.name} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={action.name}\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage || ($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tactionMessage(action.id, message);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{#if action?.icon}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"size-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={action.icon}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4 {action.icon.includes('svg')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'dark:invert-[80%]'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"fill: currentColor;\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={action.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Sparkles strokeWidth=\"2.1\" className=\"size-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if message.done && showRateComment}\n\t\t\t\t\t\t<RateComment\n\t\t\t\t\t\t\tbind:message\n\t\t\t\t\t\t\tbind:show={showRateComment}\n\t\t\t\t\t\t\ton:save={async (e) => {\n\t\t\t\t\t\t\t\tawait feedbackHandler(null, {\n\t\t\t\t\t\t\t\t\t...e.detail\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if (isLastMessage || ($settings?.keepFollowUpPrompts ?? false)) && message.done && !readOnly && (message?.followUps ?? []).length > 0}\n\t\t\t\t\t\t<div class=\"mt-2.5\" in:fade={{ duration: 100 }}>\n\t\t\t\t\t\t\t<FollowUps\n\t\t\t\t\t\t\t\tfollowUps={message?.followUps}\n\t\t\t\t\t\t\t\tonClick={(prompt) => {\n\t\t\t\t\t\t\t\t\tif ($settings?.insertFollowUpPrompt ?? false) {\n\t\t\t\t\t\t\t\t\t\t// Insert the follow-up prompt into the input box\n\t\t\t\t\t\t\t\t\t\tsetInputText(prompt);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// Submit the follow-up prompt directly\n\t\t\t\t\t\t\t\t\t\tsubmitMessage(message?.id, prompt);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/key}\n\n<style>\n\t.buttons::-webkit-scrollbar {\n\t\tdisplay: none; /* for Chrome, Safari and Opera */\n\t}\n\n\t.buttons {\n\t\t-ms-overflow-style: none; /* IE and Edge */\n\t\tscrollbar-width: none; /* Firefox */\n\t}\n</style>\n","<script lang=\"ts\">\n\texport let className = 'w-4 h-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M8 8v8m0-8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 8a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm6-2a2 2 0 1 1 4 0 2 2 0 0 1-4 0Zm0 0h-1a5 5 0 0 1-5-5v-.5\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport dayjs from 'dayjs';\n\timport { onMount, tick, getContext } from 'svelte';\n\timport { createEventDispatcher } from 'svelte';\n\n\timport { mobile, models, settings } from '$lib/stores';\n\n\timport { generateMoACompletion } from '$lib/apis';\n\timport { updateChatById } from '$lib/apis/chats';\n\timport { createOpenAITextStream } from '$lib/apis/streaming';\n\n\timport ResponseMessage from './ResponseMessage.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport Merge from '$lib/components/icons/Merge.svelte';\n\n\timport Markdown from './Markdown.svelte';\n\timport Name from './Name.svelte';\n\timport Skeleton from './Skeleton.svelte';\n\timport localizedFormat from 'dayjs/plugin/localizedFormat';\n\timport ProfileImage from './ProfileImage.svelte';\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\tconst i18n = getContext('i18n');\n\tdayjs.extend(localizedFormat);\n\n\texport let chatId;\n\texport let history;\n\texport let messageId;\n\texport let selectedModels = [];\n\n\texport let isLastMessage;\n\texport let readOnly = false;\n\texport let editCodeBlock = true;\n\n\texport let setInputText: Function = () => {};\n\texport let updateChat: Function;\n\texport let editMessage: Function;\n\texport let saveMessage: Function;\n\texport let rateMessage: Function;\n\texport let actionMessage: Function;\n\n\texport let submitMessage: Function;\n\texport let deleteMessage: Function;\n\n\texport let continueResponse: Function;\n\texport let regenerateResponse: Function;\n\texport let mergeResponses: Function;\n\n\texport let addMessages: Function;\n\n\texport let triggerScroll: Function;\n\n\texport let topPadding = false;\n\n\tconst dispatch = createEventDispatcher();\n\n\tlet currentMessageId;\n\tlet parentMessage;\n\tlet groupedMessageIds = {};\n\tlet groupedMessageIdsIdx = {};\n\n\tlet selectedModelIdx = null;\n\n\tlet message = JSON.parse(JSON.stringify(history.messages[messageId]));\n\t$: if (history.messages) {\n\t\tif (JSON.stringify(message) !== JSON.stringify(history.messages[messageId])) {\n\t\t\tmessage = JSON.parse(JSON.stringify(history.messages[messageId]));\n\t\t}\n\t}\n\n\tconst gotoMessage = async (modelIdx, messageIdx) => {\n\t\t// Clamp messageIdx to ensure it's within valid range\n\t\tgroupedMessageIdsIdx[modelIdx] = Math.max(\n\t\t\t0,\n\t\t\tMath.min(messageIdx, groupedMessageIds[modelIdx].messageIds.length - 1)\n\t\t);\n\n\t\t// Get the messageId at the specified index\n\t\tlet messageId = groupedMessageIds[modelIdx].messageIds[groupedMessageIdsIdx[modelIdx]];\n\t\tconsole.log(messageId);\n\n\t\t// Traverse the branch to find the deepest child message\n\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t}\n\n\t\t// Update the current message ID in history\n\t\thistory.currentId = messageId;\n\n\t\t// Await UI updates\n\t\tawait tick();\n\t\tawait updateChat();\n\n\t\t// Trigger scrolling after navigation\n\t\ttriggerScroll();\n\t};\n\n\tconst showPreviousMessage = async (modelIdx) => {\n\t\tgroupedMessageIdsIdx[modelIdx] = Math.max(0, groupedMessageIdsIdx[modelIdx] - 1);\n\n\t\tlet messageId = groupedMessageIds[modelIdx].messageIds[groupedMessageIdsIdx[modelIdx]];\n\t\tconsole.log(messageId);\n\n\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t}\n\n\t\thistory.currentId = messageId;\n\n\t\tawait tick();\n\t\tawait updateChat();\n\t\ttriggerScroll();\n\t};\n\n\tconst showNextMessage = async (modelIdx) => {\n\t\tgroupedMessageIdsIdx[modelIdx] = Math.min(\n\t\t\tgroupedMessageIds[modelIdx].messageIds.length - 1,\n\t\t\tgroupedMessageIdsIdx[modelIdx] + 1\n\t\t);\n\n\t\tlet messageId = groupedMessageIds[modelIdx].messageIds[groupedMessageIdsIdx[modelIdx]];\n\t\tconsole.log(messageId);\n\n\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t}\n\n\t\thistory.currentId = messageId;\n\n\t\tawait tick();\n\t\tawait updateChat();\n\t\ttriggerScroll();\n\t};\n\n\tconst initHandler = async () => {\n\t\tconsole.log('multiresponse:initHandler');\n\t\tawait tick();\n\n\t\tcurrentMessageId = messageId;\n\t\tparentMessage = history.messages[messageId].parentId\n\t\t\t? history.messages[history.messages[messageId].parentId]\n\t\t\t: null;\n\n\t\tgroupedMessageIds = parentMessage?.models.reduce((a, model, modelIdx) => {\n\t\t\t// Find all messages that are children of the parent message and have the same model\n\t\t\tlet modelMessageIds = parentMessage?.childrenIds\n\t\t\t\t.map((id) => history.messages[id])\n\t\t\t\t.filter((m) => m?.modelIdx === modelIdx)\n\t\t\t\t.map((m) => m.id);\n\n\t\t\t// Legacy support for messages that don't have a modelIdx\n\t\t\t// Find all messages that are children of the parent message and have the same model\n\t\t\tif (modelMessageIds.length === 0) {\n\t\t\t\tlet modelMessages = parentMessage?.childrenIds\n\t\t\t\t\t.map((id) => history.messages[id])\n\t\t\t\t\t.filter((m) => m?.model === model);\n\n\t\t\t\tmodelMessages.forEach((m) => {\n\t\t\t\t\tm.modelIdx = modelIdx;\n\t\t\t\t});\n\n\t\t\t\tmodelMessageIds = modelMessages.map((m) => m.id);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...a,\n\t\t\t\t[modelIdx]: { messageIds: modelMessageIds }\n\t\t\t};\n\t\t}, {});\n\n\t\tgroupedMessageIdsIdx = parentMessage?.models.reduce((a, model, modelIdx) => {\n\t\t\tconst idx = groupedMessageIds[modelIdx].messageIds.findIndex((id) => id === messageId);\n\t\t\tif (idx !== -1) {\n\t\t\t\treturn {\n\t\t\t\t\t...a,\n\t\t\t\t\t[modelIdx]: idx\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\t...a,\n\t\t\t\t\t[modelIdx]: groupedMessageIds[modelIdx].messageIds.length - 1\n\t\t\t\t};\n\t\t\t}\n\t\t}, {});\n\n\t\tselectedModelIdx = history.messages[messageId]?.modelIdx;\n\n\t\tconsole.log(groupedMessageIds, groupedMessageIdsIdx);\n\n\t\tawait tick();\n\t};\n\n\tconst onGroupClick = async (_messageId, modelIdx) => {\n\t\tif (messageId != _messageId) {\n\t\t\tlet currentMessageId = _messageId;\n\t\t\tlet messageChildrenIds = history.messages[currentMessageId].childrenIds;\n\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\tcurrentMessageId = messageChildrenIds.at(-1);\n\t\t\t\tmessageChildrenIds = history.messages[currentMessageId].childrenIds;\n\t\t\t}\n\t\t\thistory.currentId = currentMessageId;\n\t\t\tselectedModelIdx = modelIdx;\n\n\t\t\t// await tick();\n\t\t\t// await updateChat();\n\t\t\t// triggerScroll();\n\t\t}\n\t};\n\n\tconst mergeResponsesHandler = async () => {\n\t\tconst responses = Object.keys(groupedMessageIds).map((modelIdx) => {\n\t\t\tconst { messageIds } = groupedMessageIds[modelIdx];\n\t\t\tconst messageId = messageIds[groupedMessageIdsIdx[modelIdx]];\n\n\t\t\treturn history.messages[messageId].content;\n\t\t});\n\t\tmergeResponses(messageId, responses, chatId);\n\t};\n\n\tonMount(async () => {\n\t\tawait initHandler();\n\t\tawait tick();\n\n\t\tif ($settings?.scrollOnBranchChange ?? true) {\n\t\t\tconst messageElement = document.getElementById(`message-${messageId}`);\n\t\t\tif (messageElement) {\n\t\t\t\tmessageElement.scrollIntoView({ block: 'start' });\n\t\t\t}\n\t\t}\n\t});\n</script>\n\n{#if parentMessage}\n\t<div>\n\t\t<div\n\t\t\tclass=\"flex snap-x snap-mandatory overflow-x-auto scrollbar-hidden\"\n\t\t\tid=\"responses-container-{chatId}-{parentMessage.id}\"\n\t\t>\n\t\t\t{#if $settings?.displayMultiModelResponsesInTabs ?? false}\n\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t<div class=\" flex w-full mb-4.5 border-b border-gray-200 dark:border-gray-850\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"flex gap-2 scrollbar-none overflow-x-auto w-fit text-center font-medium bg-transparent pt-1 text-sm\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{#each Object.keys(groupedMessageIds) as modelIdx}\n\t\t\t\t\t\t\t\t{#if groupedMessageIdsIdx[modelIdx] !== undefined && (groupedMessageIds[modelIdx]?.messageIds ?? []).length > 0}\n\t\t\t\t\t\t\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t\t\t\t\t\t\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\n\t\t\t\t\t\t\t\t\t{@const _messageId =\n\t\t\t\t\t\t\t\t\t\tgroupedMessageIds[modelIdx].messageIds[groupedMessageIdsIdx[modelIdx]]}\n\n\t\t\t\t\t\t\t\t\t{@const model = $models.find((m) => m.id === history.messages[_messageId]?.model)}\n\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"min-w-fit {selectedModelIdx == modelIdx\n\t\t\t\t\t\t\t\t\t\t\t? ' dark:border-gray-300 '\n\t\t\t\t\t\t\t\t\t\t\t: ' opacity-35 border-transparent'} pb-1.5 px-2.5 transition border-b-2\"\n\t\t\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\t\t\tif (selectedModelIdx != modelIdx) {\n\t\t\t\t\t\t\t\t\t\t\t\tselectedModelIdx = modelIdx;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tonGroupClick(_messageId, modelIdx);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div class=\"flex items-center gap-1.5\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"-translate-y-[1px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t{model ? `${model.name}` : history.messages[_messageId]?.model}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if selectedModelIdx !== null}\n\t\t\t\t\t\t{#key history.currentId}\n\t\t\t\t\t\t\t{#if message}\n\t\t\t\t\t\t\t\t<ResponseMessage\n\t\t\t\t\t\t\t\t\t{chatId}\n\t\t\t\t\t\t\t\t\t{history}\n\t\t\t\t\t\t\t\t\tmessageId={message?.id}\n\t\t\t\t\t\t\t\t\t{selectedModels}\n\t\t\t\t\t\t\t\t\tisLastMessage={true}\n\t\t\t\t\t\t\t\t\tsiblings={groupedMessageIds[selectedModelIdx].messageIds}\n\t\t\t\t\t\t\t\t\tgotoMessage={(message, messageIdx) => gotoMessage(selectedModelIdx, messageIdx)}\n\t\t\t\t\t\t\t\t\tshowPreviousMessage={() => showPreviousMessage(selectedModelIdx)}\n\t\t\t\t\t\t\t\t\tshowNextMessage={() => showNextMessage(selectedModelIdx)}\n\t\t\t\t\t\t\t\t\t{setInputText}\n\t\t\t\t\t\t\t\t\t{updateChat}\n\t\t\t\t\t\t\t\t\t{editMessage}\n\t\t\t\t\t\t\t\t\t{saveMessage}\n\t\t\t\t\t\t\t\t\t{rateMessage}\n\t\t\t\t\t\t\t\t\t{deleteMessage}\n\t\t\t\t\t\t\t\t\t{actionMessage}\n\t\t\t\t\t\t\t\t\t{submitMessage}\n\t\t\t\t\t\t\t\t\t{continueResponse}\n\t\t\t\t\t\t\t\t\tregenerateResponse={async (message, prompt = null) => {\n\t\t\t\t\t\t\t\t\t\tregenerateResponse(message, prompt);\n\t\t\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\t\t\tgroupedMessageIdsIdx[selectedModelIdx] =\n\t\t\t\t\t\t\t\t\t\t\tgroupedMessageIds[selectedModelIdx].messageIds.length - 1;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t{addMessages}\n\t\t\t\t\t\t\t\t\t{readOnly}\n\t\t\t\t\t\t\t\t\t{topPadding}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{/key}\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{:else}\n\t\t\t\t{#each Object.keys(groupedMessageIds) as modelIdx}\n\t\t\t\t\t{#if groupedMessageIdsIdx[modelIdx] !== undefined && groupedMessageIds[modelIdx].messageIds.length > 0}\n\t\t\t\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t\t\t\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t\t\t\t\t\t{@const _messageId =\n\t\t\t\t\t\t\tgroupedMessageIds[modelIdx].messageIds[groupedMessageIdsIdx[modelIdx]]}\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\" snap-center w-full max-w-full m-1 border {history.messages[messageId]\n\t\t\t\t\t\t\t\t?.modelIdx == modelIdx\n\t\t\t\t\t\t\t\t? `bg-gray-50 dark:bg-gray-850 border-gray-100 dark:border-gray-800 border-2 ${\n\t\t\t\t\t\t\t\t\t\t$mobile ? 'min-w-full' : 'min-w-80'\n\t\t\t\t\t\t\t\t\t}`\n\t\t\t\t\t\t\t\t: `border-gray-100/30 dark:border-gray-850/30 border-dashed ${\n\t\t\t\t\t\t\t\t\t\t$mobile ? 'min-w-full' : 'min-w-80'\n\t\t\t\t\t\t\t\t\t}`} transition-all p-5 rounded-2xl\"\n\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\tonGroupClick(_messageId, modelIdx);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{#key history.currentId}\n\t\t\t\t\t\t\t\t{#if message}\n\t\t\t\t\t\t\t\t\t<ResponseMessage\n\t\t\t\t\t\t\t\t\t\t{chatId}\n\t\t\t\t\t\t\t\t\t\t{history}\n\t\t\t\t\t\t\t\t\t\tmessageId={_messageId}\n\t\t\t\t\t\t\t\t\t\t{selectedModels}\n\t\t\t\t\t\t\t\t\t\tisLastMessage={true}\n\t\t\t\t\t\t\t\t\t\tsiblings={groupedMessageIds[modelIdx].messageIds}\n\t\t\t\t\t\t\t\t\t\tgotoMessage={(message, messageIdx) => gotoMessage(modelIdx, messageIdx)}\n\t\t\t\t\t\t\t\t\t\tshowPreviousMessage={() => showPreviousMessage(modelIdx)}\n\t\t\t\t\t\t\t\t\t\tshowNextMessage={() => showNextMessage(modelIdx)}\n\t\t\t\t\t\t\t\t\t\t{setInputText}\n\t\t\t\t\t\t\t\t\t\t{updateChat}\n\t\t\t\t\t\t\t\t\t\t{editMessage}\n\t\t\t\t\t\t\t\t\t\t{saveMessage}\n\t\t\t\t\t\t\t\t\t\t{rateMessage}\n\t\t\t\t\t\t\t\t\t\t{deleteMessage}\n\t\t\t\t\t\t\t\t\t\t{actionMessage}\n\t\t\t\t\t\t\t\t\t\t{submitMessage}\n\t\t\t\t\t\t\t\t\t\t{continueResponse}\n\t\t\t\t\t\t\t\t\t\tregenerateResponse={async (message, prompt = null) => {\n\t\t\t\t\t\t\t\t\t\t\tregenerateResponse(message, prompt);\n\t\t\t\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\t\t\t\tgroupedMessageIdsIdx[modelIdx] =\n\t\t\t\t\t\t\t\t\t\t\t\tgroupedMessageIds[modelIdx].messageIds.length - 1;\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t{addMessages}\n\t\t\t\t\t\t\t\t\t\t{readOnly}\n\t\t\t\t\t\t\t\t\t\t{editCodeBlock}\n\t\t\t\t\t\t\t\t\t\t{topPadding}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{/key}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{/each}\n\t\t\t{/if}\n\t\t</div>\n\n\t\t{#if !readOnly}\n\t\t\t{#if !Object.keys(groupedMessageIds).find((modelIdx) => {\n\t\t\t\tconst { messageIds } = groupedMessageIds[modelIdx];\n\t\t\t\tconst _messageId = messageIds[groupedMessageIdsIdx[modelIdx]];\n\t\t\t\treturn !history.messages[_messageId]?.done ?? false;\n\t\t\t})}\n\t\t\t\t<div class=\"flex justify-end\">\n\t\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t\t{#if history.messages[messageId]?.merged?.status}\n\t\t\t\t\t\t\t{@const message = history.messages[messageId]?.merged}\n\n\t\t\t\t\t\t\t<div class=\"w-full rounded-xl pl-5 pr-2 py-2 mt-2\">\n\t\t\t\t\t\t\t\t<Name>\n\t\t\t\t\t\t\t\t\t{$i18n.t('Merged Response')}\n\n\t\t\t\t\t\t\t\t\t{#if message.timestamp}\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tclass=\" self-center invisible group-hover:visible text-gray-400 text-xs font-medium uppercase ml-0.5 -mt-0.5\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{dayjs(message.timestamp * 1000).format('LT')}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</Name>\n\n\t\t\t\t\t\t\t\t<div class=\"mt-1 markdown-prose w-full min-w-full\">\n\t\t\t\t\t\t\t\t\t{#if (message?.content ?? '') === ''}\n\t\t\t\t\t\t\t\t\t\t<Skeleton />\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<Markdown id={`merged`} content={message.content ?? ''} />\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if isLastMessage}\n\t\t\t\t\t\t<div class=\" shrink-0 text-gray-600 dark:text-gray-500 mt-1\">\n\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Merge Responses')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tid=\"merge-response-button\"\n\t\t\t\t\t\t\t\t\tclass=\"{true\n\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tmergeResponsesHandler();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Merge className=\" size-5 \" />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t{/if}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport dayjs from 'dayjs';\n\timport { toast } from 'svelte-sonner';\n\timport { tick, getContext, onMount } from 'svelte';\n\n\timport { models, settings } from '$lib/stores';\n\timport { user as _user } from '$lib/stores';\n\timport { copyToClipboard as _copyToClipboard, formatDate } from '$lib/utils';\n\timport { WEBUI_API_BASE_URL, WEBUI_BASE_URL } from '$lib/constants';\n\n\timport Name from './Name.svelte';\n\timport ProfileImage from './ProfileImage.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport FileItem from '$lib/components/common/FileItem.svelte';\n\timport Markdown from './Markdown.svelte';\n\timport Image from '$lib/components/common/Image.svelte';\n\timport DeleteConfirmDialog from '$lib/components/common/ConfirmDialog.svelte';\n\n\timport localizedFormat from 'dayjs/plugin/localizedFormat';\n\n\tconst i18n = getContext('i18n');\n\tdayjs.extend(localizedFormat);\n\n\texport let user;\n\n\texport let chatId;\n\texport let history;\n\texport let messageId;\n\n\texport let siblings;\n\n\texport let gotoMessage: Function;\n\texport let showPreviousMessage: Function;\n\texport let showNextMessage: Function;\n\n\texport let editMessage: Function;\n\texport let deleteMessage: Function;\n\n\texport let isFirstMessage: boolean;\n\texport let readOnly: boolean;\n\texport let editCodeBlock = true;\n\texport let topPadding = false;\n\n\tlet showDeleteConfirm = false;\n\n\tlet messageIndexEdit = false;\n\n\tlet edit = false;\n\tlet editedContent = '';\n\tlet editedFiles = [];\n\n\tlet messageEditTextAreaElement: HTMLTextAreaElement;\n\n\tlet message = JSON.parse(JSON.stringify(history.messages[messageId]));\n\t$: if (history.messages) {\n\t\tif (JSON.stringify(message) !== JSON.stringify(history.messages[messageId])) {\n\t\t\tmessage = JSON.parse(JSON.stringify(history.messages[messageId]));\n\t\t}\n\t}\n\n\tconst copyToClipboard = async (text) => {\n\t\tconst res = await _copyToClipboard(text);\n\t\tif (res) {\n\t\t\ttoast.success($i18n.t('Copying to clipboard was successful!'));\n\t\t}\n\t};\n\n\tconst editMessageHandler = async () => {\n\t\tedit = true;\n\t\teditedContent = message?.content ?? '';\n\t\teditedFiles = message.files;\n\n\t\tawait tick();\n\n\t\tif (messageEditTextAreaElement) {\n\t\t\tmessageEditTextAreaElement.style.height = '';\n\t\t\tmessageEditTextAreaElement.style.height = `${messageEditTextAreaElement.scrollHeight}px`;\n\n\t\t\tmessageEditTextAreaElement?.focus();\n\t\t}\n\t};\n\n\tconst editMessageConfirmHandler = async (submit = true) => {\n\t\tif (!editedContent && (editedFiles ?? []).length === 0) {\n\t\t\ttoast.error($i18n.t('Please enter a message or attach a file.'));\n\t\t\treturn;\n\t\t}\n\n\t\teditMessage(message.id, { content: editedContent, files: editedFiles }, submit);\n\n\t\tedit = false;\n\t\teditedContent = '';\n\t\teditedFiles = [];\n\t};\n\n\tconst cancelEditMessage = () => {\n\t\tedit = false;\n\t\teditedContent = '';\n\t\teditedFiles = [];\n\t};\n\n\tconst deleteMessageHandler = async () => {\n\t\tdeleteMessage(message.id);\n\t};\n\n\tonMount(() => {\n\t\t// console.log('UserMessage mounted');\n\t});\n</script>\n\n<DeleteConfirmDialog\n\tbind:show={showDeleteConfirm}\n\ttitle={$i18n.t('Delete message?')}\n\ton:confirm={() => {\n\t\tdeleteMessageHandler();\n\t}}\n/>\n\n<div\n\tclass=\" flex w-full user-message group\"\n\tdir={$settings.chatDirection}\n\tid=\"message-{message.id}\"\n>\n\t{#if !($settings?.chatBubble ?? true)}\n\t\t<div class={`shrink-0 ltr:mr-3 rtl:ml-3 mt-1`}>\n\t\t\t<ProfileImage\n\t\t\t\tsrc={`${WEBUI_API_BASE_URL}/users/${user.id}/profile/image`}\n\t\t\t\tclassName={'size-8 user-message-profile-image'}\n\t\t\t/>\n\t\t</div>\n\t{/if}\n\t<div class=\"flex-auto w-0 max-w-full pl-1\">\n\t\t{#if !($settings?.chatBubble ?? true)}\n\t\t\t<div>\n\t\t\t\t<Name>\n\t\t\t\t\t{#if message.user}\n\t\t\t\t\t\t{$i18n.t('You')}\n\t\t\t\t\t\t<span class=\" text-gray-500 text-sm font-medium\">{message?.user ?? ''}</span>\n\t\t\t\t\t{:else if $settings.showUsername || $_user.name !== user.name}\n\t\t\t\t\t\t{user.name}\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t{$i18n.t('You')}\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if message.timestamp}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"self-center text-xs font-medium first-letter:capitalize ml-0.5 translate-y-[1px] {($settings?.highContrastMode ??\n\t\t\t\t\t\t\tfalse)\n\t\t\t\t\t\t\t\t? 'dark:text-gray-900 text-gray-100'\n\t\t\t\t\t\t\t\t: 'invisible group-hover:visible transition'}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Tooltip content={dayjs(message.timestamp * 1000).format('LLLL')}>\n\t\t\t\t\t\t\t\t<!-- $i18n.t('Today at {{LOCALIZED_TIME}}') -->\n\t\t\t\t\t\t\t\t<!-- $i18n.t('Yesterday at {{LOCALIZED_TIME}}') -->\n\t\t\t\t\t\t\t\t<!-- $i18n.t('{{LOCALIZED_DATE}} at {{LOCALIZED_TIME}}') -->\n\n\t\t\t\t\t\t\t\t<span class=\"line-clamp-1\"\n\t\t\t\t\t\t\t\t\t>{$i18n.t(formatDate(message.timestamp * 1000), {\n\t\t\t\t\t\t\t\t\t\tLOCALIZED_TIME: dayjs(message.timestamp * 1000).format('LT'),\n\t\t\t\t\t\t\t\t\t\tLOCALIZED_DATE: dayjs(message.timestamp * 1000).format('L')\n\t\t\t\t\t\t\t\t\t})}</span\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</Name>\n\t\t\t</div>\n\t\t{:else if message.timestamp}\n\t\t\t<div class=\"flex justify-end pr-2 text-xs\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"text-[0.65rem] font-medium first-letter:capitalize mb-0.5 {($settings?.highContrastMode ??\n\t\t\t\t\tfalse)\n\t\t\t\t\t\t? 'dark:text-gray-100 text-gray-900'\n\t\t\t\t\t\t: 'invisible group-hover:visible transition text-gray-400'}\"\n\t\t\t\t>\n\t\t\t\t\t<Tooltip content={dayjs(message.timestamp * 1000).format('LLLL')}>\n\t\t\t\t\t\t<span class=\"line-clamp-1\"\n\t\t\t\t\t\t\t>{$i18n.t(formatDate(message.timestamp * 1000), {\n\t\t\t\t\t\t\t\tLOCALIZED_TIME: dayjs(message.timestamp * 1000).format('LT'),\n\t\t\t\t\t\t\t\tLOCALIZED_DATE: dayjs(message.timestamp * 1000).format('L')\n\t\t\t\t\t\t\t})}</span\n\t\t\t\t\t\t>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<div class=\"chat-{message.role} w-full min-w-full markdown-prose\">\n\t\t\t{#if edit !== true}\n\t\t\t\t{#if message.files}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"mb-1 w-full flex flex-col justify-end overflow-x-auto gap-1 flex-wrap\"\n\t\t\t\t\t\tdir={$settings?.chatDirection ?? 'auto'}\n\t\t\t\t\t>\n\t\t\t\t\t\t{#each message.files as file}\n\t\t\t\t\t\t\t{@const fileUrl =\n\t\t\t\t\t\t\t\tfile.url?.startsWith('data') || file.url?.startsWith('http')\n\t\t\t\t\t\t\t\t\t? file.url\n\t\t\t\t\t\t\t\t\t: `${WEBUI_API_BASE_URL}/files/${file.url}${file?.content_type ? '/content' : ''}`}\n\t\t\t\t\t\t\t<div class={($settings?.chatBubble ?? true) ? 'self-end' : ''}>\n\t\t\t\t\t\t\t\t{#if file.type === 'image' || (file?.content_type ?? '').startsWith('image/')}\n\t\t\t\t\t\t\t\t\t<Image src={fileUrl} imageClassName=\" max-h-96 rounded-lg\" />\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<FileItem\n\t\t\t\t\t\t\t\t\t\titem={file}\n\t\t\t\t\t\t\t\t\t\turl={file.url}\n\t\t\t\t\t\t\t\t\t\tname={file.name}\n\t\t\t\t\t\t\t\t\t\ttype={file.type}\n\t\t\t\t\t\t\t\t\t\tsize={file?.size}\n\t\t\t\t\t\t\t\t\t\tsmall={true}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t{/if}\n\n\t\t\t{#if edit === true}\n\t\t\t\t<div class=\" w-full bg-gray-50 dark:bg-gray-800 rounded-3xl px-5 py-3 mb-2\">\n\t\t\t\t\t{#if (editedFiles ?? []).length > 0}\n\t\t\t\t\t\t<div class=\"flex items-center flex-wrap gap-2 -mx-2 mb-1\">\n\t\t\t\t\t\t\t{#each editedFiles as file, fileIdx}\n\t\t\t\t\t\t\t\t{#if file.type === 'image' || (file?.content_type ?? '').startsWith('image/')}\n\t\t\t\t\t\t\t\t\t{@const fileUrl =\n\t\t\t\t\t\t\t\t\t\tfile.url?.startsWith('data') || file.url?.startsWith('http')\n\t\t\t\t\t\t\t\t\t\t\t? file.url\n\t\t\t\t\t\t\t\t\t\t\t: `${WEBUI_API_BASE_URL}/files/${file.url}${file?.content_type ? '/content' : ''}`}\n\t\t\t\t\t\t\t\t\t<div class=\" relative group\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"relative flex items-center\">\n\t\t\t\t\t\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={fileUrl}\n\t\t\t\t\t\t\t\t\t\t\t\talt=\"input\"\n\t\t\t\t\t\t\t\t\t\t\t\timageClassName=\" size-14 rounded-xl object-cover\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\" absolute -top-1 -right-1\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\" bg-white text-black border border-white rounded-full {($settings?.highContrastMode ??\n\t\t\t\t\t\t\t\t\t\t\t\tfalse)\n\t\t\t\t\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'group-hover:visible invisible transition'}\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\teditedFiles.splice(fileIdx, 1);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\teditedFiles = editedFiles;\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<FileItem\n\t\t\t\t\t\t\t\t\t\titem={file}\n\t\t\t\t\t\t\t\t\t\tname={file.name}\n\t\t\t\t\t\t\t\t\t\ttype={file.type}\n\t\t\t\t\t\t\t\t\t\tsize={file?.size}\n\t\t\t\t\t\t\t\t\t\tloading={file.status === 'uploading'}\n\t\t\t\t\t\t\t\t\t\tdismissible={true}\n\t\t\t\t\t\t\t\t\t\tedit={true}\n\t\t\t\t\t\t\t\t\t\ton:dismiss={async () => {\n\t\t\t\t\t\t\t\t\t\t\teditedFiles.splice(fileIdx, 1);\n\n\t\t\t\t\t\t\t\t\t\t\teditedFiles = editedFiles;\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(file);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t<div class=\"max-h-96 overflow-auto\">\n\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\tid=\"message-edit-{message.id}\"\n\t\t\t\t\t\t\tbind:this={messageEditTextAreaElement}\n\t\t\t\t\t\t\tclass=\" bg-transparent outline-hidden w-full resize-none\"\n\t\t\t\t\t\t\tbind:value={editedContent}\n\t\t\t\t\t\t\ton:input={(e) => {\n\t\t\t\t\t\t\t\te.target.style.height = '';\n\t\t\t\t\t\t\t\te.target.style.height = `${e.target.scrollHeight}px`;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\t\t\t\t\tdocument.getElementById('close-edit-message-button')?.click();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst isCmdOrCtrlPressed = e.metaKey || e.ctrlKey;\n\t\t\t\t\t\t\t\tconst isEnterPressed = e.key === 'Enter';\n\n\t\t\t\t\t\t\t\tif (isCmdOrCtrlPressed && isEnterPressed) {\n\t\t\t\t\t\t\t\t\tdocument.getElementById('confirm-edit-message-button')?.click();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\" mt-2 mb-1 flex justify-between text-sm font-medium\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tid=\"save-edit-message-button\"\n\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 border border-gray-100 dark:border-gray-700 text-gray-700 dark:text-gray-200 transition rounded-3xl\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\teditMessageConfirmHandler(false);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{$i18n.t('Save')}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"flex space-x-1.5\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tid=\"close-edit-message-button\"\n\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 bg-white dark:bg-gray-900 hover:bg-gray-100 text-gray-800 dark:text-gray-100 transition rounded-3xl\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tcancelEditMessage();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{$i18n.t('Cancel')}\n\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tid=\"confirm-edit-message-button\"\n\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 bg-gray-900 dark:bg-white hover:bg-gray-850 text-gray-100 dark:text-gray-800 transition rounded-3xl\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\teditMessageConfirmHandler();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{$i18n.t('Send')}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{:else if message.content !== ''}\n\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t<div class=\"flex {($settings?.chatBubble ?? true) ? 'justify-end pb-1' : 'w-full'}\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"rounded-3xl {($settings?.chatBubble ?? true)\n\t\t\t\t\t\t\t\t? `max-w-[90%] px-4 py-1.5  bg-gray-50 dark:bg-gray-850 ${\n\t\t\t\t\t\t\t\t\t\tmessage.files ? 'rounded-tr-lg' : ''\n\t\t\t\t\t\t\t\t\t}`\n\t\t\t\t\t\t\t\t: ' w-full'}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{#if message.content}\n\t\t\t\t\t\t\t\t<Markdown\n\t\t\t\t\t\t\t\t\tid={`${chatId}-${message.id}`}\n\t\t\t\t\t\t\t\t\tcontent={message.content}\n\t\t\t\t\t\t\t\t\t{editCodeBlock}\n\t\t\t\t\t\t\t\t\t{topPadding}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t{#if edit !== true}\n\t\t\t\t<div\n\t\t\t\t\tclass=\" flex {($settings?.chatBubble ?? true)\n\t\t\t\t\t\t? 'justify-end'\n\t\t\t\t\t\t: ''}  text-gray-600 dark:text-gray-500\"\n\t\t\t\t>\n\t\t\t\t\t{#if !($settings?.chatBubble ?? true)}\n\t\t\t\t\t\t{#if siblings.length > 1}\n\t\t\t\t\t\t\t<div class=\"flex self-center\" dir=\"ltr\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tshowPreviousMessage(message);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M15.75 19.5 8.25 12l7.5-7.5\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t{#if messageIndexEdit}\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclass=\"text-sm flex justify-center font-semibold self-center dark:text-gray-100 min-w-fit\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tid=\"message-index-input-{message.id}\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={siblings.indexOf(message.id) + 1}\n\t\t\t\t\t\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tmax={siblings.length}\n\t\t\t\t\t\t\t\t\t\t\ton:focus={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\te.target.select();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\ton:blur={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tgotoMessage(message, e.target.value - 1);\n\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = false;\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\t\t\t\t\t\t\tgotoMessage(message, e.target.value - 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = false;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tclass=\"bg-transparent font-semibold self-center dark:text-gray-100 min-w-fit outline-hidden\"\n\t\t\t\t\t\t\t\t\t\t/>/{siblings.length}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclass=\"text-sm tracking-widest font-semibold self-center dark:text-gray-100 min-w-fit\"\n\t\t\t\t\t\t\t\t\t\ton:dblclick={async () => {\n\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = true;\n\n\t\t\t\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\t\t\t\tconst input = document.getElementById(`message-index-input-${message.id}`);\n\t\t\t\t\t\t\t\t\t\t\tif (input) {\n\t\t\t\t\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t\t\t\t\t\tinput.select();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{siblings.indexOf(message.id) + 1}/{siblings.length}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tshowNextMessage(message);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\td=\"m8.25 4.5 7.5 7.5-7.5 7.5\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{/if}\n\t\t\t\t\t{#if !readOnly}\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Edit')} placement=\"bottom\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"{($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition edit-user-message-button\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\teditMessageHandler();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\td=\"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if message?.content}\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Copy')} placement=\"bottom\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"{($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tcopyToClipboard(message.content);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\td=\"M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if $_user?.role === 'admin' || ($_user?.permissions?.chat?.delete_message ?? false)}\n\t\t\t\t\t\t{#if !readOnly && (!isFirstMessage || siblings.length > 1)}\n\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Delete')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"{($settings?.highContrastMode ?? false)\n\t\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1 rounded-sm dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tshowDeleteConfirm = true;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\tstroke-width=\"2\"\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\td=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if $settings?.chatBubble ?? true}\n\t\t\t\t\t\t{#if siblings.length > 1}\n\t\t\t\t\t\t\t<div class=\"flex self-center\" dir=\"ltr\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tshowPreviousMessage(message);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M15.75 19.5 8.25 12l7.5-7.5\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t{#if messageIndexEdit}\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclass=\"text-sm flex justify-center font-semibold self-center dark:text-gray-100 min-w-fit\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tid=\"message-index-input-{message.id}\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={siblings.indexOf(message.id) + 1}\n\t\t\t\t\t\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\t\t\t\t\t\tmax={siblings.length}\n\t\t\t\t\t\t\t\t\t\t\ton:focus={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\te.target.select();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\ton:blur={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tgotoMessage(message, e.target.value - 1);\n\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = false;\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\t\t\t\t\t\t\tgotoMessage(message, e.target.value - 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = false;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tclass=\"bg-transparent font-semibold self-center dark:text-gray-100 min-w-fit outline-hidden\"\n\t\t\t\t\t\t\t\t\t\t/>/{siblings.length}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclass=\"text-sm tracking-widest font-semibold self-center dark:text-gray-100 min-w-fit\"\n\t\t\t\t\t\t\t\t\t\ton:dblclick={async () => {\n\t\t\t\t\t\t\t\t\t\t\tmessageIndexEdit = true;\n\n\t\t\t\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\t\t\t\tconst input = document.getElementById(`message-index-input-${message.id}`);\n\t\t\t\t\t\t\t\t\t\t\tif (input) {\n\t\t\t\t\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t\t\t\t\t\tinput.select();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{siblings.indexOf(message.id) + 1}/{siblings.length}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tshowNextMessage(message);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\td=\"m8.25 4.5 7.5 7.5-7.5 7.5\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\n\timport { tick, getContext, onMount, createEventDispatcher } from 'svelte';\n\tconst dispatch = createEventDispatcher();\n\tconst i18n = getContext('i18n');\n\n\timport { settings } from '$lib/stores';\n\timport { copyToClipboard } from '$lib/utils';\n\n\timport MultiResponseMessages from './MultiResponseMessages.svelte';\n\timport ResponseMessage from './ResponseMessage.svelte';\n\timport UserMessage from './UserMessage.svelte';\n\n\texport let chatId;\n\texport let selectedModels = [];\n\texport let idx = 0;\n\n\texport let history;\n\texport let messageId;\n\n\texport let user;\n\n\texport let setInputText: Function = () => {};\n\texport let gotoMessage;\n\texport let showPreviousMessage;\n\texport let showNextMessage;\n\texport let updateChat;\n\n\texport let editMessage;\n\texport let saveMessage;\n\texport let deleteMessage;\n\texport let rateMessage;\n\texport let actionMessage;\n\texport let submitMessage;\n\n\texport let regenerateResponse;\n\texport let continueResponse;\n\texport let mergeResponses;\n\n\texport let addMessages;\n\texport let triggerScroll;\n\texport let readOnly = false;\n\texport let editCodeBlock = true;\n\texport let topPadding = false;\n</script>\n\n<div\n\trole=\"listitem\"\n\tclass=\"flex flex-col justify-between px-5 mb-3 w-full {($settings?.widescreenMode ?? null)\n\t\t? 'max-w-full'\n\t\t: 'max-w-5xl'} mx-auto rounded-lg group\"\n>\n\t{#if history.messages[messageId]}\n\t\t{#if history.messages[messageId].role === 'user'}\n\t\t\t<UserMessage\n\t\t\t\t{user}\n\t\t\t\t{chatId}\n\t\t\t\t{history}\n\t\t\t\t{messageId}\n\t\t\t\tisFirstMessage={idx === 0}\n\t\t\t\tsiblings={history.messages[messageId].parentId !== null\n\t\t\t\t\t? (history.messages[history.messages[messageId].parentId]?.childrenIds ?? [])\n\t\t\t\t\t: (Object.values(history.messages)\n\t\t\t\t\t\t\t.filter((message) => message.parentId === null)\n\t\t\t\t\t\t\t.map((message) => message.id) ?? [])}\n\t\t\t\t{gotoMessage}\n\t\t\t\t{showPreviousMessage}\n\t\t\t\t{showNextMessage}\n\t\t\t\t{editMessage}\n\t\t\t\t{deleteMessage}\n\t\t\t\t{readOnly}\n\t\t\t\t{editCodeBlock}\n\t\t\t\t{topPadding}\n\t\t\t/>\n\t\t{:else if (history.messages[history.messages[messageId].parentId]?.models?.length ?? 1) === 1}\n\t\t\t<ResponseMessage\n\t\t\t\t{chatId}\n\t\t\t\t{history}\n\t\t\t\t{messageId}\n\t\t\t\t{selectedModels}\n\t\t\t\tisLastMessage={messageId === history.currentId}\n\t\t\t\tsiblings={history.messages[history.messages[messageId].parentId]?.childrenIds ?? []}\n\t\t\t\t{setInputText}\n\t\t\t\t{gotoMessage}\n\t\t\t\t{showPreviousMessage}\n\t\t\t\t{showNextMessage}\n\t\t\t\t{updateChat}\n\t\t\t\t{editMessage}\n\t\t\t\t{saveMessage}\n\t\t\t\t{rateMessage}\n\t\t\t\t{actionMessage}\n\t\t\t\t{submitMessage}\n\t\t\t\t{deleteMessage}\n\t\t\t\t{continueResponse}\n\t\t\t\t{regenerateResponse}\n\t\t\t\t{addMessages}\n\t\t\t\t{readOnly}\n\t\t\t\t{editCodeBlock}\n\t\t\t\t{topPadding}\n\t\t\t/>\n\t\t{:else}\n\t\t\t{#key messageId}\n\t\t\t\t<MultiResponseMessages\n\t\t\t\t\tbind:history\n\t\t\t\t\t{chatId}\n\t\t\t\t\t{messageId}\n\t\t\t\t\t{selectedModels}\n\t\t\t\t\tisLastMessage={messageId === history?.currentId}\n\t\t\t\t\t{setInputText}\n\t\t\t\t\t{updateChat}\n\t\t\t\t\t{editMessage}\n\t\t\t\t\t{saveMessage}\n\t\t\t\t\t{rateMessage}\n\t\t\t\t\t{actionMessage}\n\t\t\t\t\t{submitMessage}\n\t\t\t\t\t{deleteMessage}\n\t\t\t\t\t{continueResponse}\n\t\t\t\t\t{regenerateResponse}\n\t\t\t\t\t{mergeResponses}\n\t\t\t\t\t{triggerScroll}\n\t\t\t\t\t{addMessages}\n\t\t\t\t\t{readOnly}\n\t\t\t\t\t{editCodeBlock}\n\t\t\t\t\t{topPadding}\n\t\t\t\t/>\n\t\t\t{/key}\n\t\t{/if}\n\t{/if}\n</div>\n","<script lang=\"ts\">\n\timport Fuse from 'fuse.js';\n\timport Bolt from '$lib/components/icons/Bolt.svelte';\n\timport { onMount, getContext } from 'svelte';\n\timport { settings, WEBUI_NAME } from '$lib/stores';\n\timport { WEBUI_VERSION } from '$lib/constants';\n\n\tconst i18n = getContext('i18n');\n\n\texport let suggestionPrompts = [];\n\texport let className = '';\n\texport let inputValue = '';\n\texport let onSelect = (e) => {};\n\n\tlet sortedPrompts = [];\n\n\tconst fuseOptions = {\n\t\tkeys: ['content', 'title'],\n\t\tthreshold: 0.5\n\t};\n\n\tlet fuse;\n\tlet filteredPrompts = [];\n\n\t// Initialize Fuse\n\t$: fuse = new Fuse(sortedPrompts, fuseOptions);\n\n\t// Update the filteredPrompts if inputValue changes\n\t// Only increase version if something wirklich gendert hat\n\t$: getFilteredPrompts(inputValue);\n\n\t// Helper function to check if arrays are the same\n\t// (based on unique IDs oder content)\n\tfunction arraysEqual(a, b) {\n\t\tif (a.length !== b.length) return false;\n\t\tfor (let i = 0; i < a.length; i++) {\n\t\t\tif ((a[i].id ?? a[i].content) !== (b[i].id ?? b[i].content)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tconst getFilteredPrompts = (inputValue) => {\n\t\tif (inputValue.length > 500) {\n\t\t\tfilteredPrompts = [];\n\t\t} else {\n\t\t\tconst newFilteredPrompts =\n\t\t\t\tinputValue.trim() && fuse\n\t\t\t\t\t? fuse.search(inputValue.trim()).map((result) => result.item)\n\t\t\t\t\t: sortedPrompts;\n\n\t\t\t// Compare with the oldFilteredPrompts\n\t\t\t// If there's a difference, update array + version\n\t\t\tif (!arraysEqual(filteredPrompts, newFilteredPrompts)) {\n\t\t\t\tfilteredPrompts = newFilteredPrompts;\n\t\t\t}\n\t\t}\n\t};\n\n\t$: if (suggestionPrompts) {\n\t\tsortedPrompts = [...(suggestionPrompts ?? [])].sort(() => Math.random() - 0.5);\n\t\tgetFilteredPrompts(inputValue);\n\t}\n</script>\n\n<div class=\"mb-1 flex gap-1 text-xs font-medium items-center text-gray-600 dark:text-gray-400\">\n\t{#if filteredPrompts.length > 0}\n\t\t<Bolt />\n\t\t{$i18n.t('Suggested')}\n\t{:else}\n\t\t<!-- Keine Vorschlge -->\n\n\t\t<div\n\t\t\tclass=\"flex w-full {$settings?.landingPageMode === 'chat'\n\t\t\t\t? ' -mt-1'\n\t\t\t\t: 'text-center items-center justify-center'}  self-start text-gray-600 dark:text-gray-400\"\n\t\t>\n\t\t\t{$WEBUI_NAME}  v{WEBUI_VERSION}\n\t\t</div>\n\t{/if}\n</div>\n\n<div class=\"h-40 w-full\">\n\t{#if filteredPrompts.length > 0}\n\t\t<div role=\"list\" class=\"max-h-40 overflow-auto scrollbar-none items-start {className}\">\n\t\t\t{#each filteredPrompts as prompt, idx (prompt.id || `${prompt.content}-${idx}`)}\n\t\t\t\t<!-- svelte-ignore a11y-no-interactive-element-to-noninteractive-role -->\n\t\t\t\t<button\n\t\t\t\t\trole=\"listitem\"\n\t\t\t\t\tclass=\"waterfall flex flex-col flex-1 shrink-0 w-full justify-between\n\t\t\t\t       px-3 py-2 rounded-xl bg-transparent hover:bg-black/5\n\t\t\t\t       dark:hover:bg-white/5 transition group\"\n\t\t\t\t\tstyle=\"animation-delay: {idx * 60}ms\"\n\t\t\t\t\ton:click={() => onSelect({ type: 'prompt', data: prompt.content })}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"flex flex-col text-left\">\n\t\t\t\t\t\t{#if prompt.title && prompt.title[0] !== ''}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"font-medium dark:text-gray-300 dark:group-hover:text-gray-200 transition line-clamp-1\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{prompt.title[0]}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"text-xs text-gray-600 dark:text-gray-400 font-normal line-clamp-1\">\n\t\t\t\t\t\t\t\t{prompt.title[1]}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"font-medium dark:text-gray-300 dark:group-hover:text-gray-200 transition line-clamp-1\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{prompt.content}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"text-xs text-gray-600 dark:text-gray-400 font-normal line-clamp-1\">\n\t\t\t\t\t\t\t\t{$i18n.t('Prompt')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t{/each}\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t/* Waterfall animation for the suggestions */\n\t@keyframes fadeInUp {\n\t\t0% {\n\t\t\topacity: 0;\n\t\t\ttransform: translateY(20px);\n\t\t}\n\t\t100% {\n\t\t\topacity: 1;\n\t\t\ttransform: translateY(0);\n\t\t}\n\t}\n\n\t.waterfall {\n\t\topacity: 0;\n\t\tanimation-name: fadeInUp;\n\t\tanimation-duration: 200ms;\n\t\tanimation-fill-mode: forwards;\n\t\tanimation-timing-function: ease;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { WEBUI_API_BASE_URL, WEBUI_BASE_URL } from '$lib/constants';\n\timport { marked } from 'marked';\n\n\timport { config, user, models as _models, temporaryChatEnabled } from '$lib/stores';\n\timport { onMount, getContext } from 'svelte';\n\n\timport { blur, fade } from 'svelte/transition';\n\n\timport Suggestions from './Suggestions.svelte';\n\timport { sanitizeResponseContent } from '$lib/utils';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport EyeSlash from '$lib/components/icons/EyeSlash.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let modelIds = [];\n\texport let models = [];\n\texport let atSelectedModel;\n\n\texport let onSelect = (e) => {};\n\n\tlet mounted = false;\n\tlet selectedModelIdx = 0;\n\n\t$: if (modelIds.length > 0) {\n\t\tselectedModelIdx = models.length - 1;\n\t}\n\n\t$: models = modelIds.map((id) => $_models.find((m) => m.id === id));\n\n\tonMount(() => {\n\t\tmounted = true;\n\t});\n</script>\n\n{#key mounted}\n\t<div class=\"m-auto w-full max-w-6xl px-8 lg:px-20\">\n\t\t<div class=\"flex justify-start\">\n\t\t\t<div class=\"flex -space-x-4 mb-0.5\" in:fade={{ duration: 200 }}>\n\t\t\t\t{#each models as model, modelIdx}\n\t\t\t\t\t<button\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tselectedModelIdx = modelIdx;\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\tcontent={marked.parse(\n\t\t\t\t\t\t\t\tsanitizeResponseContent(\n\t\t\t\t\t\t\t\t\tmodels[selectedModelIdx]?.info?.meta?.description ?? ''\n\t\t\t\t\t\t\t\t).replaceAll('\\n', '<br>')\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tplacement=\"right\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={`${WEBUI_API_BASE_URL}/models/model/profile/image?id=${model?.id}&lang=${$i18n.language}`}\n\t\t\t\t\t\t\t\tclass=\" size-[2.7rem] rounded-full border-[1px] border-gray-100 dark:border-none\"\n\t\t\t\t\t\t\t\talt=\"logo\"\n\t\t\t\t\t\t\t\tdraggable=\"false\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</button>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t</div>\n\n\t\t{#if $temporaryChatEnabled}\n\t\t\t<Tooltip\n\t\t\t\tcontent={$i18n.t(\"This chat won't appear in history and your messages will not be saved.\")}\n\t\t\t\tclassName=\"w-full flex justify-start mb-0.5\"\n\t\t\t\tplacement=\"top\"\n\t\t\t>\n\t\t\t\t<div class=\"flex items-center gap-2 text-gray-500 text-lg mt-2 w-fit\">\n\t\t\t\t\t<EyeSlash strokeWidth=\"2.5\" className=\"size-5\" />{$i18n.t('Temporary Chat')}\n\t\t\t\t</div>\n\t\t\t</Tooltip>\n\t\t{/if}\n\n\t\t<div\n\t\t\tclass=\" mt-2 mb-4 text-3xl text-gray-800 dark:text-gray-100 text-left flex items-center gap-4 font-primary\"\n\t\t>\n\t\t\t<div>\n\t\t\t\t<div class=\" capitalize line-clamp-1\" in:fade={{ duration: 200 }}>\n\t\t\t\t\t{#if models[selectedModelIdx]?.name}\n\t\t\t\t\t\t{models[selectedModelIdx]?.name}\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t{$i18n.t('Hello, {{name}}', { name: $user?.name })}\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\n\t\t\t\t<div in:fade={{ duration: 200, delay: 200 }}>\n\t\t\t\t\t{#if models[selectedModelIdx]?.info?.meta?.description ?? null}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"mt-0.5 text-base font-normal text-gray-500 dark:text-gray-400 line-clamp-3 markdown\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{@html marked.parse(\n\t\t\t\t\t\t\t\tsanitizeResponseContent(\n\t\t\t\t\t\t\t\t\tmodels[selectedModelIdx]?.info?.meta?.description\n\t\t\t\t\t\t\t\t).replaceAll('\\n', '<br>')\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{#if models[selectedModelIdx]?.info?.meta?.user}\n\t\t\t\t\t\t\t<div class=\"mt-0.5 text-sm font-normal text-gray-400 dark:text-gray-500\">\n\t\t\t\t\t\t\t\tBy\n\t\t\t\t\t\t\t\t{#if models[selectedModelIdx]?.info?.meta?.user.community}\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref=\"https://openwebui.com/m/{models[selectedModelIdx]?.info?.meta?.user\n\t\t\t\t\t\t\t\t\t\t\t.username}\"\n\t\t\t\t\t\t\t\t\t\t>{models[selectedModelIdx]?.info?.meta?.user.name\n\t\t\t\t\t\t\t\t\t\t\t? models[selectedModelIdx]?.info?.meta?.user.name\n\t\t\t\t\t\t\t\t\t\t\t: `@${models[selectedModelIdx]?.info?.meta?.user.username}`}</a\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t{models[selectedModelIdx]?.info?.meta?.user.name}\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<div class=\" text-gray-400 dark:text-gray-500 line-clamp-1 font-p\">\n\t\t\t\t\t\t\t{$i18n.t('How can I help you today?')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\" w-full font-primary\" in:fade={{ duration: 200, delay: 300 }}>\n\t\t\t<Suggestions\n\t\t\t\tclassName=\"grid grid-cols-2\"\n\t\t\t\tsuggestionPrompts={atSelectedModel?.info?.meta?.suggestion_prompts ??\n\t\t\t\t\tmodels[selectedModelIdx]?.info?.meta?.suggestion_prompts ??\n\t\t\t\t\t$config?.default_prompt_suggestions ??\n\t\t\t\t\t[]}\n\t\t\t\t{onSelect}\n\t\t\t/>\n\t\t</div>\n\t</div>\n{/key}\n","<script lang=\"ts\">\n\timport { v4 as uuidv4 } from 'uuid';\n\timport {\n\t\tchats,\n\t\tconfig,\n\t\tsettings,\n\t\tuser as _user,\n\t\tmobile,\n\t\tcurrentChatPage,\n\t\ttemporaryChatEnabled\n\t} from '$lib/stores';\n\timport { tick, getContext, onMount, createEventDispatcher } from 'svelte';\n\tconst dispatch = createEventDispatcher();\n\n\timport { toast } from 'svelte-sonner';\n\timport { getChatList, updateChatById } from '$lib/apis/chats';\n\timport { copyToClipboard, extractCurlyBraceWords } from '$lib/utils';\n\n\timport Message from './Messages/Message.svelte';\n\timport Loader from '../common/Loader.svelte';\n\timport Spinner from '../common/Spinner.svelte';\n\n\timport ChatPlaceholder from './ChatPlaceholder.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let className = 'h-full flex pt-8';\n\n\texport let chatId = '';\n\texport let user = $_user;\n\n\texport let prompt;\n\texport let history = {};\n\texport let selectedModels;\n\texport let atSelectedModel;\n\n\tlet messages = [];\n\n\texport let setInputText: Function = () => {};\n\n\texport let sendMessage: Function;\n\texport let continueResponse: Function;\n\texport let regenerateResponse: Function;\n\texport let mergeResponses: Function;\n\n\texport let chatActionHandler: Function;\n\texport let showMessage: Function = () => {};\n\texport let submitMessage: Function = () => {};\n\texport let addMessages: Function = () => {};\n\n\texport let readOnly = false;\n\texport let editCodeBlock = true;\n\n\texport let topPadding = false;\n\texport let bottomPadding = false;\n\texport let autoScroll;\n\n\texport let onSelect = (e) => {};\n\n\texport let messagesCount: number | null = 20;\n\tlet messagesLoading = false;\n\n\tconst loadMoreMessages = async () => {\n\t\t// scroll slightly down to disable continuous loading\n\t\tconst element = document.getElementById('messages-container');\n\t\telement.scrollTop = element.scrollTop + 100;\n\n\t\tmessagesLoading = true;\n\t\tmessagesCount += 20;\n\n\t\tawait tick();\n\n\t\tmessagesLoading = false;\n\t};\n\n\t$: if (history.currentId) {\n\t\tlet _messages = [];\n\n\t\tlet message = history.messages[history.currentId];\n\t\tconst visitedMessageIds = new Set();\n\n\t\twhile (message && (messagesCount !== null ? _messages.length <= messagesCount : true)) {\n\t\t\tif (visitedMessageIds.has(message.id)) {\n\t\t\t\tconsole.warn('Circular dependency detected in message history', message.id);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvisitedMessageIds.add(message.id);\n\n\t\t\t_messages.unshift({ ...message });\n\t\t\tmessage = message.parentId !== null ? history.messages[message.parentId] : null;\n\t\t}\n\n\t\tmessages = _messages;\n\t} else {\n\t\tmessages = [];\n\t}\n\n\t$: if (autoScroll && bottomPadding) {\n\t\t(async () => {\n\t\t\tawait tick();\n\t\t\tscrollToBottom();\n\t\t})();\n\t}\n\n\tconst scrollToBottom = () => {\n\t\tconst element = document.getElementById('messages-container');\n\t\telement.scrollTop = element.scrollHeight;\n\t};\n\n\tconst updateChat = async () => {\n\t\tif (!$temporaryChatEnabled) {\n\t\t\thistory = history;\n\t\t\tawait tick();\n\t\t\tawait updateChatById(localStorage.token, chatId, {\n\t\t\t\thistory: history,\n\t\t\t\tmessages: messages\n\t\t\t});\n\n\t\t\tcurrentChatPage.set(1);\n\t\t\tawait chats.set(await getChatList(localStorage.token, $currentChatPage));\n\t\t}\n\t};\n\n\tconst gotoMessage = async (message, idx) => {\n\t\t// Determine the correct sibling list (either parent's children or root messages)\n\t\tlet siblings;\n\t\tif (message.parentId !== null) {\n\t\t\tsiblings = history.messages[message.parentId].childrenIds;\n\t\t} else {\n\t\t\tsiblings = Object.values(history.messages)\n\t\t\t\t.filter((msg) => msg.parentId === null)\n\t\t\t\t.map((msg) => msg.id);\n\t\t}\n\n\t\t// Clamp index to a valid range\n\t\tidx = Math.max(0, Math.min(idx, siblings.length - 1));\n\n\t\tlet messageId = siblings[idx];\n\n\t\t// If we're navigating to a different message\n\t\tif (message.id !== messageId) {\n\t\t\t// Drill down to the deepest child of that branch\n\t\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\t}\n\n\t\t\thistory.currentId = messageId;\n\t\t}\n\n\t\tawait tick();\n\n\t\t// Optional auto-scroll\n\t\tif ($settings?.scrollOnBranchChange ?? true) {\n\t\t\tconst element = document.getElementById('messages-container');\n\t\t\tautoScroll = element.scrollHeight - element.scrollTop <= element.clientHeight + 50;\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tscrollToBottom();\n\t\t\t}, 100);\n\t\t}\n\t};\n\n\tconst showPreviousMessage = async (message) => {\n\t\tif (message.parentId !== null) {\n\t\t\tlet messageId =\n\t\t\t\thistory.messages[message.parentId].childrenIds[\n\t\t\t\t\tMath.max(history.messages[message.parentId].childrenIds.indexOf(message.id) - 1, 0)\n\t\t\t\t];\n\n\t\t\tif (message.id !== messageId) {\n\t\t\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\t\t}\n\n\t\t\t\thistory.currentId = messageId;\n\t\t\t}\n\t\t} else {\n\t\t\tlet childrenIds = Object.values(history.messages)\n\t\t\t\t.filter((message) => message.parentId === null)\n\t\t\t\t.map((message) => message.id);\n\t\t\tlet messageId = childrenIds[Math.max(childrenIds.indexOf(message.id) - 1, 0)];\n\n\t\t\tif (message.id !== messageId) {\n\t\t\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\t\t}\n\n\t\t\t\thistory.currentId = messageId;\n\t\t\t}\n\t\t}\n\n\t\tawait tick();\n\n\t\tif ($settings?.scrollOnBranchChange ?? true) {\n\t\t\tconst element = document.getElementById('messages-container');\n\t\t\tautoScroll = element.scrollHeight - element.scrollTop <= element.clientHeight + 50;\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tscrollToBottom();\n\t\t\t}, 100);\n\t\t}\n\t};\n\n\tconst showNextMessage = async (message) => {\n\t\tif (message.parentId !== null) {\n\t\t\tlet messageId =\n\t\t\t\thistory.messages[message.parentId].childrenIds[\n\t\t\t\t\tMath.min(\n\t\t\t\t\t\thistory.messages[message.parentId].childrenIds.indexOf(message.id) + 1,\n\t\t\t\t\t\thistory.messages[message.parentId].childrenIds.length - 1\n\t\t\t\t\t)\n\t\t\t\t];\n\n\t\t\tif (message.id !== messageId) {\n\t\t\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\t\t}\n\n\t\t\t\thistory.currentId = messageId;\n\t\t\t}\n\t\t} else {\n\t\t\tlet childrenIds = Object.values(history.messages)\n\t\t\t\t.filter((message) => message.parentId === null)\n\t\t\t\t.map((message) => message.id);\n\t\t\tlet messageId =\n\t\t\t\tchildrenIds[Math.min(childrenIds.indexOf(message.id) + 1, childrenIds.length - 1)];\n\n\t\t\tif (message.id !== messageId) {\n\t\t\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\t\t}\n\n\t\t\t\thistory.currentId = messageId;\n\t\t\t}\n\t\t}\n\n\t\tawait tick();\n\n\t\tif ($settings?.scrollOnBranchChange ?? true) {\n\t\t\tconst element = document.getElementById('messages-container');\n\t\t\tautoScroll = element.scrollHeight - element.scrollTop <= element.clientHeight + 50;\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tscrollToBottom();\n\t\t\t}, 100);\n\t\t}\n\t};\n\n\tconst rateMessage = async (messageId, rating) => {\n\t\thistory.messages[messageId].annotation = {\n\t\t\t...history.messages[messageId].annotation,\n\t\t\trating: rating\n\t\t};\n\n\t\tawait updateChat();\n\t};\n\n\tconst editMessage = async (messageId, { content, files }, submit = true) => {\n\t\tif ((selectedModels ?? []).filter((id) => id).length === 0) {\n\t\t\ttoast.error($i18n.t('Model not selected'));\n\t\t\treturn;\n\t\t}\n\t\tif (history.messages[messageId].role === 'user') {\n\t\t\tif (submit) {\n\t\t\t\t// New user message\n\t\t\t\tlet userPrompt = content;\n\t\t\t\tlet userMessageId = uuidv4();\n\n\t\t\t\tlet userMessage = {\n\t\t\t\t\tid: userMessageId,\n\t\t\t\t\tparentId: history.messages[messageId].parentId,\n\t\t\t\t\tchildrenIds: [],\n\t\t\t\t\trole: 'user',\n\t\t\t\t\tcontent: userPrompt,\n\t\t\t\t\t...(files && { files: files }),\n\t\t\t\t\tmodels: selectedModels,\n\t\t\t\t\ttimestamp: Math.floor(Date.now() / 1000) // Unix epoch\n\t\t\t\t};\n\n\t\t\t\tlet messageParentId = history.messages[messageId].parentId;\n\n\t\t\t\tif (messageParentId !== null) {\n\t\t\t\t\thistory.messages[messageParentId].childrenIds = [\n\t\t\t\t\t\t...history.messages[messageParentId].childrenIds,\n\t\t\t\t\t\tuserMessageId\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\thistory.messages[userMessageId] = userMessage;\n\t\t\t\thistory.currentId = userMessageId;\n\n\t\t\t\tawait tick();\n\t\t\t\tawait sendMessage(history, userMessageId);\n\t\t\t} else {\n\t\t\t\t// Edit user message\n\t\t\t\thistory.messages[messageId].content = content;\n\t\t\t\thistory.messages[messageId].files = files;\n\t\t\t\tawait updateChat();\n\t\t\t}\n\t\t} else {\n\t\t\tif (submit) {\n\t\t\t\t// New response message\n\t\t\t\tconst responseMessageId = uuidv4();\n\t\t\t\tconst message = history.messages[messageId];\n\t\t\t\tconst parentId = message.parentId;\n\n\t\t\t\tconst responseMessage = {\n\t\t\t\t\t...message,\n\t\t\t\t\tid: responseMessageId,\n\t\t\t\t\tparentId: parentId,\n\t\t\t\t\tchildrenIds: [],\n\t\t\t\t\tfiles: undefined,\n\t\t\t\t\tcontent: content,\n\t\t\t\t\ttimestamp: Math.floor(Date.now() / 1000) // Unix epoch\n\t\t\t\t};\n\n\t\t\t\thistory.messages[responseMessageId] = responseMessage;\n\t\t\t\thistory.currentId = responseMessageId;\n\n\t\t\t\t// Append messageId to childrenIds of parent message\n\t\t\t\tif (parentId !== null) {\n\t\t\t\t\thistory.messages[parentId].childrenIds = [\n\t\t\t\t\t\t...history.messages[parentId].childrenIds,\n\t\t\t\t\t\tresponseMessageId\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\tawait updateChat();\n\t\t\t} else {\n\t\t\t\t// Edit response message\n\t\t\t\thistory.messages[messageId].originalContent = history.messages[messageId].content;\n\t\t\t\thistory.messages[messageId].content = content;\n\t\t\t\tawait updateChat();\n\t\t\t}\n\t\t}\n\t};\n\n\tconst actionMessage = async (actionId, message, event = null) => {\n\t\tawait chatActionHandler(chatId, actionId, message.model, message.id, event);\n\t};\n\n\tconst saveMessage = async (messageId, message) => {\n\t\tif (!history.messages?.[messageId]) {\n\t\t\treturn;\n\t\t}\n\n\t\thistory.messages[messageId] = message;\n\t\tawait updateChat();\n\t};\n\n\tconst deleteMessage = async (messageId) => {\n\t\tconst messageToDelete = history.messages[messageId];\n\t\tconst parentMessageId = messageToDelete.parentId;\n\t\tconst childMessageIds = messageToDelete.childrenIds ?? [];\n\n\t\t// Collect all grandchildren\n\t\tconst grandchildrenIds = childMessageIds.flatMap(\n\t\t\t(childId) => history.messages[childId]?.childrenIds ?? []\n\t\t);\n\n\t\t// Update parent's children\n\t\tif (parentMessageId && history.messages[parentMessageId]) {\n\t\t\thistory.messages[parentMessageId].childrenIds = [\n\t\t\t\t...history.messages[parentMessageId].childrenIds.filter((id) => id !== messageId),\n\t\t\t\t...grandchildrenIds\n\t\t\t];\n\t\t}\n\n\t\t// Update grandchildren's parent\n\t\tgrandchildrenIds.forEach((grandchildId) => {\n\t\t\tif (history.messages[grandchildId]) {\n\t\t\t\thistory.messages[grandchildId].parentId = parentMessageId;\n\t\t\t}\n\t\t});\n\n\t\t// Delete the message and its children\n\t\t[messageId, ...childMessageIds].forEach((id) => {\n\t\t\tdelete history.messages[id];\n\t\t});\n\n\t\tawait tick();\n\n\t\tshowMessage({ id: parentMessageId });\n\n\t\t// Update the chat\n\t\tawait updateChat();\n\t};\n\n\tconst triggerScroll = () => {\n\t\tif (autoScroll) {\n\t\t\tconst element = document.getElementById('messages-container');\n\t\t\tautoScroll = element.scrollHeight - element.scrollTop <= element.clientHeight + 50;\n\t\t\tsetTimeout(() => {\n\t\t\t\tscrollToBottom();\n\t\t\t}, 100);\n\t\t}\n\t};\n</script>\n\n<div class={className}>\n\t{#if Object.keys(history?.messages ?? {}).length == 0}\n\t\t<ChatPlaceholder modelIds={selectedModels} {atSelectedModel} {onSelect} />\n\t{:else}\n\t\t<div class=\"w-full pt-2\">\n\t\t\t{#key chatId}\n\t\t\t\t<section class=\"w-full\" aria-labelledby=\"chat-conversation\">\n\t\t\t\t\t<h2 class=\"sr-only\" id=\"chat-conversation\">{$i18n.t('Chat Conversation')}</h2>\n\t\t\t\t\t{#if messages.at(0)?.parentId !== null}\n\t\t\t\t\t\t<Loader\n\t\t\t\t\t\t\ton:visible={(e) => {\n\t\t\t\t\t\t\t\tconsole.log('visible');\n\t\t\t\t\t\t\t\tif (!messagesLoading) {\n\t\t\t\t\t\t\t\t\tloadMoreMessages();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"w-full flex justify-center py-1 text-xs animate-pulse items-center gap-2\">\n\t\t\t\t\t\t\t\t<Spinner className=\" size-4\" />\n\t\t\t\t\t\t\t\t<div class=\" \">{$i18n.t('Loading...')}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Loader>\n\t\t\t\t\t{/if}\n\t\t\t\t\t<ul role=\"log\" aria-live=\"polite\" aria-relevant=\"additions\" aria-atomic=\"false\">\n\t\t\t\t\t\t{#each messages as message, messageIdx (message.id)}\n\t\t\t\t\t\t\t<Message\n\t\t\t\t\t\t\t\t{chatId}\n\t\t\t\t\t\t\t\tbind:history\n\t\t\t\t\t\t\t\t{selectedModels}\n\t\t\t\t\t\t\t\tmessageId={message.id}\n\t\t\t\t\t\t\t\tidx={messageIdx}\n\t\t\t\t\t\t\t\t{user}\n\t\t\t\t\t\t\t\t{setInputText}\n\t\t\t\t\t\t\t\t{gotoMessage}\n\t\t\t\t\t\t\t\t{showPreviousMessage}\n\t\t\t\t\t\t\t\t{showNextMessage}\n\t\t\t\t\t\t\t\t{updateChat}\n\t\t\t\t\t\t\t\t{editMessage}\n\t\t\t\t\t\t\t\t{deleteMessage}\n\t\t\t\t\t\t\t\t{rateMessage}\n\t\t\t\t\t\t\t\t{actionMessage}\n\t\t\t\t\t\t\t\t{saveMessage}\n\t\t\t\t\t\t\t\t{submitMessage}\n\t\t\t\t\t\t\t\t{regenerateResponse}\n\t\t\t\t\t\t\t\t{continueResponse}\n\t\t\t\t\t\t\t\t{mergeResponses}\n\t\t\t\t\t\t\t\t{addMessages}\n\t\t\t\t\t\t\t\t{triggerScroll}\n\t\t\t\t\t\t\t\t{readOnly}\n\t\t\t\t\t\t\t\t{editCodeBlock}\n\t\t\t\t\t\t\t\t{topPadding}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</ul>\n\t\t\t\t</section>\n\t\t\t\t<div class=\"pb-18\" />\n\t\t\t\t{#if bottomPadding}\n\t\t\t\t\t<div class=\"  pb-6\" />\n\t\t\t\t{/if}\n\t\t\t{/key}\n\t\t</div>\n\t{/if}\n</div>\n"],"names":["i18n","getContext","dispatch","createEventDispatcher","message","$.prop","$$props","show","LIKE_REASONS","DISLIKE_REASONS","tags","$.mutable_source","reasons","selectedReason","comment","detailedRating","selectedModel","init","$.get","$.set","_b","_a","_d","_c","_f","_e","tag","_i","_h","_g","onMount","$models","m","toast","$i18n","saveHandler","div","root_1","$.untrack","div_1","$.sibling","node","div_2","$.child","div_3","button","node_1","XMark","$.reset","div_4","div_5","div_6","_","i","rating","button_1","root_2","text_2","$.set_class","$.append","$$anchor","div_7","div_8","div_9","div_10","div_11","$.first_child","fragment_1","div_12","$.index","reason","button_2","root_4","node_3","$$render","consequent_14","alternate","consequent_13","alternate_1","consequent_12","alternate_2","consequent_11","alternate_3","consequent_10","alternate_4","consequent_9","alternate_5","consequent_8","alternate_6","consequent_7","alternate_7","consequent_6","alternate_8","consequent_5","alternate_9","consequent_4","alternate_10","consequent_3","alternate_11","consequent_2","alternate_12","consequent_1","alternate_13","$.template_effect","consequent_15","div_13","textarea","$.remove_textarea_child","div_14","div_15","$_tags","Tags","node_17","e","button_3","text_21","$.set_attribute","$.deep_read_state","$3","$$value","status","state","Collapsible","ChevronUp","ChevronDown","consequent","node_2","a","root_5","Search","$.each","node_5","item","a_1","root_7","img","node_7","url","a_2","root_10","img_1","content","root","Info","citation","showPercentage","showRelevance","mergedDocuments","calculatePercentage","distance","getRelevanceColor","percentage","decodeString","str","getTextFragmentUrl","doc","metadata","source","file_id","page","sourceUrl","baseUrl","WEBUI_API_BASE_URL","words","w","clean","first","last","fragment","c","b","Modal","document","$.derived_safe_equal","Tooltip","text","$0","root_8","Textarea","node_4","snippetUrl","text_4","root_14","span","root_16","text_7","span_1","root_18","span_2","root_19","node_12","iframe","root_20","$settings","pre","root_21","id","chatId","sources","readOnly","citations","showCitations","showCitationModal","selectedCitation","showSourceModal","sourceId","index","output","embedUrl","showControls","showEmbeds","embed","calculateShowRelevance","distances","inRange","d","outOfRange","shouldShowPercentage","acc","_source","existingSource","CitationModal","urlCitations","root_3","root_6","idx","codeExecution","Badge","Spinner","node_6","CodeBlock","root_11","root_12","div_16","div_17","root_13","div_18","ul","file","li","codeExecutions","selectedCodeExecution","showCodeExecutionModal","updateSelectedCodeExecution","execution","CodeExecutionModal","Check","EllipsisHorizontal","messageId","model","messages","actions","onAdd","floatingInput","selectedAction","selectedText","floatingInputValue","responseContent","responseDone","controller","DEFAULT_ACTIONS","ChatBubble","LightBulb","autoScroll","responseContainer","actionHandler","actionId","selectedContent","line","action","prompt","toolIds","varToolPattern","match","variableId","toolId","toolIdPattern","res","chatCompletion","$socket","$chatId","reader","decoder","processStream","done","value","lines","tick","data","addHandler","closeHandler","onDestroy","$.component","$$component","input","input_1","$.remove_input_defaults","$.event","Markdown","Skeleton","root_9","text_1","history","selectedModels","save","preview","floatingButtons","editCodeBlock","topPadding","onSave","onSourceClick","onTaskClick","onAddMessages","contentContainerElement","floatingButtonsElement","updateButtonPosition","event","buttonsContainerElement","closeFloatingButtons","selection","rect","parentRect","top","left","spaceOnRight","halfScreenWidth","$mobile","right","keydownHandler","ids","token","lang","code","showArtifacts","artifactCode","showOverview","createMessagesList","FloatingButtons","modelId","parentId","KokoroWorker","dtype","__publicField","WorkerInstance","error","audioUrl","request","resolve","reject","handleMessage","voice","followUps","onClick","followUp","hr","className","strokeWidth","svg","$.clsx","onRegenerate","onClose","inputValue","Dropdown","flyAndScale","fragment_2","fragment_3","LineSpace","LineSpaceSmaller","WebSearchResults","text_5","query","root_17","node_9","node_11","root_24","node_13","statusHistory","expand","showHistory","StatusItem","$$array","siblings","setInputText","gotoMessage","showPreviousMessage","showNextMessage","updateChat","editMessage","saveMessage","actionMessage","deleteMessage","submitMessage","continueResponse","regenerateResponse","addMessages","isLastMessage","citationsElement","showDeleteConfirm","edit","editedContent","editTextAreaElement","messageIndexEdit","speaking","loadingSpeech","showRateComment","copyToClipboard","removeAllDetails","$config","_copyToClipboard","stopAudio","$audioQueue","speak","getVoiceId","_j","_m","_l","_k","_p","_o","_n","voices","getVoicesLoop","voiceId","v","speech","messageContentParts","getMessageContentParts","$TTSWorker","TTSWorker","sentence","synthesizeOpenAISpeech","blob","preprocessedDetailsCache","preprocessForEditing","detailsBlocks","postprocessAfterEditing","editMessageHandler","$.mutate","editMessageConfirmHandler","messageContent","saveAsCopyHandler","cancelEditMessage","feedbackLoading","feedbackHandler","details","updatedMessage","chat","getChatById","feedbackItem","baseModels","feedback","updateFeedbackById","createNewFeedback","generateTags","deleteMessageHandler","buttonsWheelHandler","contentCopyHandler","range","tempDiv","table","th","DeleteConfirmDialog","ProfileImage","Name","dayjs","formatDate","StatusHistory","Image","FileItem","f","FullHeightIframe","text_3","isCmdOrCtrlPressed","isEnterPressed","ContentRenderer","raw","oldContent","newContent","Error","Citations","CodeExecutions","fragment_11","node_19","root_22","node_21","root_23","text_6","$.set_value","div_19","button_4","$1","button_5","root_28","$user","node_25","button_6","root_29","button_7","root_31","node_27","root_32","svg_1","root_34","svg_2","root_35","consequent_16","sanitizeResponseContent","button_8","root_37","consequent_18","node_32","button_9","root_40","node_33","button_10","root_41","$temporaryChatEnabled","button_11","root_43","button_12","fragment_23","node_37","RegenerateMenu","div_20","root_47","button_13","root_49","button_14","root_52","node_40","button_15","root_54","node_41","div_21","root_55","Sparkles","consequent_25","consequent_26","consequent_27","node_42","RateComment","div_22","root_58","FollowUps","node_44","fade","consequent_31","localizedFormat","rateMessage","mergeResponses","triggerScroll","parentMessage","groupedMessageIds","groupedMessageIdsIdx","selectedModelIdx","modelIdx","messageIdx","messageChildrenIds","initHandler","modelMessageIds","modelMessages","onGroupClick","_messageId","currentMessageId","mergeResponsesHandler","responses","messageIds","messageElement","ResponseMessage","node_8","node_10","root_15","node_18","Merge","user","isFirstMessage","editedFiles","messageEditTextAreaElement","submit","$.set_text","$_user","fileUrl","fileIdx","node_15","text_8","text_9","root_26","div_23","node_23","div_24","text_10","div_25","root_30","text_11","consequent_17","div_26","root_39","node_30","div_27","input_2","text_12","div_28","text_13","consequent_21","consequent_24","UserMessage","MultiResponseMessages","suggestionPrompts","onSelect","sortedPrompts","fuseOptions","fuse","filteredPrompts","arraysEqual","getFilteredPrompts","newFilteredPrompts","result","Fuse","Bolt","$WEBUI_NAME","WEBUI_VERSION","modelIds","models","atSelectedModel","mounted","$_models","marked","EyeSlash","fragment_4","Suggestions","$.transition","sendMessage","chatActionHandler","showMessage","bottomPadding","messagesCount","messagesLoading","loadMoreMessages","element","scrollToBottom","updateChatById","currentChatPage","chats","getChatList","$currentChatPage","msg","childrenIds","files","userPrompt","userMessageId","uuidv4","userMessage","messageParentId","responseMessageId","responseMessage","messageToDelete","parentMessageId","childMessageIds","grandchildrenIds","childId","grandchildId","_messages","visitedMessageIds","ChatPlaceholder","section","h2","Loader","Message"],"mappings":"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"}