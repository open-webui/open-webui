{"version":3,"file":"B4oLWPTI.js","sources":["../../../../../../node_modules/classcat/index.js","../../../../../../node_modules/d3-selection/src/sourceEvent.js","../../../../../../node_modules/d3-selection/src/pointer.js","../../../../../../node_modules/d3-drag/src/noevent.js","../../../../../../node_modules/d3-drag/src/nodrag.js","../../../../../../node_modules/d3-drag/src/constant.js","../../../../../../node_modules/d3-drag/src/event.js","../../../../../../node_modules/d3-drag/src/drag.js","../../../../../../node_modules/d3-zoom/src/constant.js","../../../../../../node_modules/d3-zoom/src/event.js","../../../../../../node_modules/d3-zoom/src/noevent.js","../../../../../../node_modules/d3-zoom/src/zoom.js","../../../../../../node_modules/@xyflow/system/dist/esm/index.js","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/Handle/Handle.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/nodes/DefaultNode.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/nodes/InputNode.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/nodes/OutputNode.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/nodes/GroupNode.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/actions/portal/index.js","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/EdgeLabelRenderer/EdgeLabelRenderer.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/hooks/useHandleEdgeSelect.js","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/EdgeLabel/EdgeLabel.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/BaseEdge/BaseEdge.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/edges/BezierEdgeInternal.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/edges/SmoothStepEdgeInternal.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/edges/StraightEdgeInternal.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/edges/StepEdgeInternal.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/store/utils.js","../../../../../../node_modules/@xyflow/svelte/dist/lib/store/initial-store.js","../../../../../../node_modules/@xyflow/svelte/dist/lib/store/visible-edges.js","../../../../../../node_modules/@xyflow/svelte/dist/lib/store/visible-nodes.js","../../../../../../node_modules/@xyflow/svelte/dist/lib/store/index.js","../../../../../../node_modules/@xyflow/svelte/dist/lib/actions/zoom/index.js","../../../../../../node_modules/@xyflow/svelte/dist/lib/container/Zoom/Zoom.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/container/Pane/Pane.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/container/Viewport/Viewport.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/actions/drag/index.js","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/NodeWrapper/utils.js","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/NodeWrapper/NodeWrapper.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/container/NodeRenderer/NodeRenderer.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/EdgeWrapper/EdgeWrapper.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/CallOnMount/CallOnMount.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/container/EdgeRenderer/MarkerDefinition/MarkerDefinition.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/container/EdgeRenderer/MarkerDefinition/Marker.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/container/EdgeRenderer/EdgeRenderer.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/Selection/Selection.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/UserSelection/UserSelection.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/NodeSelection/NodeSelection.svelte","../../../../../../node_modules/@svelte-put/shortcut/src/shortcut.js","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/KeyHandler/KeyHandler.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/ConnectionLine/ConnectionLine.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/container/Panel/Panel.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/Attribution/Attribution.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/container/SvelteFlow/utils.js","../../../../../../node_modules/@xyflow/svelte/dist/lib/hooks/useColorModeClass.js","../../../../../../node_modules/@xyflow/svelte/dist/lib/container/SvelteFlow/SvelteFlow.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/components/SvelteFlowProvider/SvelteFlowProvider.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/ControlButton.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/Icons/Plus.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/Icons/Minus.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/Icons/Fit.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/Icons/Lock.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/Icons/Unlock.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/plugins/Controls/Controls.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/plugins/Background/types.js","../../../../../../node_modules/@xyflow/svelte/dist/lib/plugins/Background/DotPattern.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/plugins/Background/LinePattern.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/plugins/Background/Background.svelte","../../../../../../node_modules/@xyflow/svelte/dist/lib/utils/index.js","../../../../../../node_modules/@xyflow/svelte/dist/lib/hooks/useSvelteFlow.js","../../../../../../node_modules/@xyflow/svelte/dist/lib/hooks/useInitialized.js","../../../../../../src/lib/components/icons/ArrowLeft.svelte","../../../../../../src/lib/components/chat/Overview/Node.svelte","../../../../../../src/lib/components/icons/AlignVertical.svelte","../../../../../../src/lib/components/icons/AlignHorizontal.svelte","../../../../../../src/lib/components/chat/Overview/Flow.svelte","../../../../../../src/lib/components/chat/Overview/View.svelte","../../../../../../src/lib/components/chat/Overview.svelte"],"sourcesContent":["export default function cc(names) {\n  if (typeof names === \"string\" || typeof names === \"number\") return \"\" + names\n\n  let out = \"\"\n\n  if (Array.isArray(names)) {\n    for (let i = 0, tmp; i < names.length; i++) {\n      if ((tmp = cc(names[i])) !== \"\") {\n        out += (out && \" \") + tmp\n      }\n    }\n  } else {\n    for (let k in names) {\n      if (names[k]) out += (out && \" \") + k\n    }\n  }\n\n  return out\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default x => () => x;\n","export default function DragEvent(type, {\n  sourceEvent,\n  subject,\n  target,\n  identifier,\n  active,\n  x, y, dx, dy,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    subject: {value: subject, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    identifier: {value: identifier, enumerable: true, configurable: true},\n    active: {value: active, enumerable: true, configurable: true},\n    x: {value: x, enumerable: true, configurable: true},\n    y: {value: y, enumerable: true, configurable: true},\n    dx: {value: dx, enumerable: true, configurable: true},\n    dy: {value: dy, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {dispatch} from \"d3-dispatch\";\nimport {select, pointer} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nonpassive, nonpassivecapture, nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(event, d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved, nonpassive)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned(event, d) {\n    if (touchending || !filter.call(this, event, d)) return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture) return;\n    select(event.view)\n      .on(\"mousemove.drag\", mousemoved, nonpassivecapture)\n      .on(\"mouseup.drag\", mouseupped, nonpassivecapture);\n    nodrag(event.view);\n    nopropagation(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n\n  function mousemoved(event) {\n    noevent(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent(event);\n    gestures.mouse(\"end\", event);\n  }\n\n  function touchstarted(event, d) {\n    if (!filter.call(this, event, d)) return;\n    var touches = event.changedTouches,\n        c = container.call(this, event, d),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchmoved(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchended(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n\n  function beforestart(that, container, event, d, identifier, touch) {\n    var dispatch = listeners.copy(),\n        p = pointer(touch || event, container), dx, dy,\n        s;\n\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n        sourceEvent: event,\n        target: drag,\n        identifier,\n        active,\n        x: p[0],\n        y: p[1],\n        dx: 0,\n        dy: 0,\n        dispatch\n      }), d)) == null) return;\n\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n\n    return function gesture(type, event, touch) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[identifier] = gesture, n = active++; break;\n        case \"end\": delete gestures[identifier], --active; // falls through\n        case \"drag\": p = pointer(touch || event, container), n = active; break;\n      }\n      dispatch.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event,\n          subject: s,\n          target: drag,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch\n        }),\n        d\n      );\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n","export default x => () => x;\n","export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event wonâ€™t trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n","import { drag } from 'd3-drag';\nimport { select, pointer } from 'd3-selection';\nimport { zoom, zoomIdentity, zoomTransform } from 'd3-zoom';\n\nconst errorMessages = {\n    error001: () => '[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001',\n    error002: () => \"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.\",\n    error003: (nodeType) => `Node type \"${nodeType}\" not found. Using fallback type \"default\".`,\n    error004: () => 'The React Flow parent container needs a width and a height to render the graph.',\n    error005: () => 'Only child nodes can use a parent extent.',\n    error006: () => \"Can't create edge. An edge needs a source and a target.\",\n    error007: (id) => `The old edge with id=${id} does not exist.`,\n    error009: (type) => `Marker type \"${type}\" doesn't exist.`,\n    error008: (handleType, { id, sourceHandle, targetHandle }) => `Couldn't create edge for ${handleType} handle id: \"${handleType === 'source' ? sourceHandle : targetHandle}\", edge id: ${id}.`,\n    error010: () => 'Handle: No node id found. Make sure to only use a Handle inside a custom Node.',\n    error011: (edgeType) => `Edge type \"${edgeType}\" not found. Using fallback type \"default\".`,\n    error012: (id) => `Node with id \"${id}\" does not exist, it may have been removed. This can happen when a node is deleted before the \"onNodeClick\" handler is called.`,\n    error013: (lib = 'react') => `It seems that you haven't loaded the styles. Please import '@xyflow/${lib}/dist/style.css' or base.css to make sure everything is working properly.`,\n    error014: () => 'useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.',\n    error015: () => 'It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs.',\n};\nconst infiniteExtent = [\n    [Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY],\n    [Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY],\n];\nconst elementSelectionKeys = ['Enter', ' ', 'Escape'];\n\n/**\n * The `ConnectionMode` is used to set the mode of connection between nodes.\n * The `Strict` mode is the default one and only allows source to target edges.\n * `Loose` mode allows source to source and target to target edges as well.\n *\n * @public\n */\nvar ConnectionMode;\n(function (ConnectionMode) {\n    ConnectionMode[\"Strict\"] = \"strict\";\n    ConnectionMode[\"Loose\"] = \"loose\";\n})(ConnectionMode || (ConnectionMode = {}));\n/**\n * This enum is used to set the different modes of panning the viewport when the\n * user scrolls. The `Free` mode allows the user to pan in any direction by scrolling\n * with a device like a trackpad. The `Vertical` and `Horizontal` modes restrict\n * scroll panning to only the vertical or horizontal axis, respectively.\n *\n * @public\n */\nvar PanOnScrollMode;\n(function (PanOnScrollMode) {\n    PanOnScrollMode[\"Free\"] = \"free\";\n    PanOnScrollMode[\"Vertical\"] = \"vertical\";\n    PanOnScrollMode[\"Horizontal\"] = \"horizontal\";\n})(PanOnScrollMode || (PanOnScrollMode = {}));\nvar SelectionMode;\n(function (SelectionMode) {\n    SelectionMode[\"Partial\"] = \"partial\";\n    SelectionMode[\"Full\"] = \"full\";\n})(SelectionMode || (SelectionMode = {}));\nconst initialConnection = {\n    inProgress: false,\n    isValid: null,\n    from: null,\n    fromHandle: null,\n    fromPosition: null,\n    fromNode: null,\n    to: null,\n    toHandle: null,\n    toPosition: null,\n    toNode: null,\n};\n\n/**\n * If you set the `connectionLineType` prop on your [`<ReactFlow />`](/api-reference/react-flow#connection-connectionLineType)\n *component, it will dictate the style of connection line rendered when creating\n *new edges.\n *\n * @public\n *\n * @remarks If you choose to render a custom connection line component, this value will be\n *passed to your component as part of its [`ConnectionLineComponentProps`](/api-reference/types/connection-line-component-props).\n */\nvar ConnectionLineType;\n(function (ConnectionLineType) {\n    ConnectionLineType[\"Bezier\"] = \"default\";\n    ConnectionLineType[\"Straight\"] = \"straight\";\n    ConnectionLineType[\"Step\"] = \"step\";\n    ConnectionLineType[\"SmoothStep\"] = \"smoothstep\";\n    ConnectionLineType[\"SimpleBezier\"] = \"simplebezier\";\n})(ConnectionLineType || (ConnectionLineType = {}));\n/**\n * Edges may optionally have a marker on either end. The MarkerType type enumerates\n * the options available to you when configuring a given marker.\n *\n * @public\n */\nvar MarkerType;\n(function (MarkerType) {\n    MarkerType[\"Arrow\"] = \"arrow\";\n    MarkerType[\"ArrowClosed\"] = \"arrowclosed\";\n})(MarkerType || (MarkerType = {}));\n\n/**\n * While [`PanelPosition`](/api-reference/types/panel-position) can be used to place a\n * component in the corners of a container, the `Position` enum is less precise and used\n * primarily in relation to edges and handles.\n *\n * @public\n */\nvar Position;\n(function (Position) {\n    Position[\"Left\"] = \"left\";\n    Position[\"Top\"] = \"top\";\n    Position[\"Right\"] = \"right\";\n    Position[\"Bottom\"] = \"bottom\";\n})(Position || (Position = {}));\nconst oppositePosition = {\n    [Position.Left]: Position.Right,\n    [Position.Right]: Position.Left,\n    [Position.Top]: Position.Bottom,\n    [Position.Bottom]: Position.Top,\n};\n\n/**\n * @internal\n */\nfunction areConnectionMapsEqual(a, b) {\n    if (!a && !b) {\n        return true;\n    }\n    if (!a || !b || a.size !== b.size) {\n        return false;\n    }\n    if (!a.size && !b.size) {\n        return true;\n    }\n    for (const key of a.keys()) {\n        if (!b.has(key)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * We call the callback for all connections in a that are not in b\n *\n * @internal\n */\nfunction handleConnectionChange(a, b, cb) {\n    if (!cb) {\n        return;\n    }\n    const diff = [];\n    a.forEach((connection, key) => {\n        if (!b?.has(key)) {\n            diff.push(connection);\n        }\n    });\n    if (diff.length) {\n        cb(diff);\n    }\n}\nfunction getConnectionStatus(isValid) {\n    return isValid === null ? null : isValid ? 'valid' : 'invalid';\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Test whether an object is usable as an Edge\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Edge if it returns true\n * @param element - The element to test\n * @returns A boolean indicating whether the element is an Edge\n */\nconst isEdgeBase = (element) => 'id' in element && 'source' in element && 'target' in element;\n/**\n * Test whether an object is usable as a Node\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Node if it returns true\n * @param element - The element to test\n * @returns A boolean indicating whether the element is an Node\n */\nconst isNodeBase = (element) => 'id' in element && 'position' in element && !('source' in element) && !('target' in element);\nconst isInternalNodeBase = (element) => 'id' in element && 'internals' in element && !('source' in element) && !('target' in element);\n/**\n * This util is used to tell you what nodes, if any, are connected to the given node\n * as the _target_ of an edge.\n * @public\n * @param node - The node to get the connected nodes from.\n * @param nodes - The array of all nodes.\n * @param edges - The array of all edges.\n * @returns An array of nodes that are connected over edges where the source is the given node.\n *\n * @example\n * ```ts\n *import { getOutgoers } from '@xyflow/react';\n *\n *const nodes = [];\n *const edges = [];\n *\n *const outgoers = getOutgoers(\n *  { id: '1', position: { x: 0, y: 0 }, data: { label: 'node' } },\n *  nodes,\n *  edges,\n *);\n *```\n */\nconst getOutgoers = (node, nodes, edges) => {\n    if (!node.id) {\n        return [];\n    }\n    const outgoerIds = new Set();\n    edges.forEach((edge) => {\n        if (edge.source === node.id) {\n            outgoerIds.add(edge.target);\n        }\n    });\n    return nodes.filter((n) => outgoerIds.has(n.id));\n};\n/**\n * This util is used to tell you what nodes, if any, are connected to the given node\n * as the _source_ of an edge.\n * @public\n * @param node - The node to get the connected nodes from.\n * @param nodes - The array of all nodes.\n * @param edges - The array of all edges.\n * @returns An array of nodes that are connected over edges where the target is the given node.\n *\n * @example\n * ```ts\n *import { getIncomers } from '@xyflow/react';\n *\n *const nodes = [];\n *const edges = [];\n *\n *const incomers = getIncomers(\n *  { id: '1', position: { x: 0, y: 0 }, data: { label: 'node' } },\n *  nodes,\n *  edges,\n *);\n *```\n */\nconst getIncomers = (node, nodes, edges) => {\n    if (!node.id) {\n        return [];\n    }\n    const incomersIds = new Set();\n    edges.forEach((edge) => {\n        if (edge.target === node.id) {\n            incomersIds.add(edge.source);\n        }\n    });\n    return nodes.filter((n) => incomersIds.has(n.id));\n};\nconst getNodePositionWithOrigin = (node, nodeOrigin = [0, 0]) => {\n    const { width, height } = getNodeDimensions(node);\n    const origin = node.origin ?? nodeOrigin;\n    const offsetX = width * origin[0];\n    const offsetY = height * origin[1];\n    return {\n        x: node.position.x - offsetX,\n        y: node.position.y - offsetY,\n    };\n};\n/**\n * Returns the bounding box that contains all the given nodes in an array. This can\n * be useful when combined with [`getViewportForBounds`](/api-reference/utils/get-viewport-for-bounds)\n * to calculate the correct transform to fit the given nodes in a viewport.\n * @public\n * @remarks Useful when combined with {@link getViewportForBounds} to calculate the correct transform to fit the given nodes in a viewport.\n * @param nodes - Nodes to calculate the bounds for.\n * @returns Bounding box enclosing all nodes.\n *\n * @remarks This function was previously called `getRectOfNodes`\n *\n * @example\n * ```js\n *import { getNodesBounds } from '@xyflow/react';\n *\n *const nodes = [\n *  {\n *    id: 'a',\n *    position: { x: 0, y: 0 },\n *    data: { label: 'a' },\n *    width: 50,\n *    height: 25,\n *  },\n *  {\n *    id: 'b',\n *    position: { x: 100, y: 100 },\n *    data: { label: 'b' },\n *    width: 50,\n *    height: 25,\n *  },\n *];\n *\n *const bounds = getNodesBounds(nodes);\n *```\n */\nconst getNodesBounds = (nodes, params = { nodeOrigin: [0, 0] }) => {\n    if (process.env.NODE_ENV === 'development' && !params.nodeLookup) {\n        console.warn('Please use `getNodesBounds` from `useReactFlow`/`useSvelteFlow` hook to ensure correct values for sub flows. If not possible, you have to provide a nodeLookup to support sub flows.');\n    }\n    if (nodes.length === 0) {\n        return { x: 0, y: 0, width: 0, height: 0 };\n    }\n    const box = nodes.reduce((currBox, nodeOrId) => {\n        const isId = typeof nodeOrId === 'string';\n        let currentNode = !params.nodeLookup && !isId ? nodeOrId : undefined;\n        if (params.nodeLookup) {\n            currentNode = isId\n                ? params.nodeLookup.get(nodeOrId)\n                : !isInternalNodeBase(nodeOrId)\n                    ? params.nodeLookup.get(nodeOrId.id)\n                    : nodeOrId;\n        }\n        const nodeBox = currentNode ? nodeToBox(currentNode, params.nodeOrigin) : { x: 0, y: 0, x2: 0, y2: 0 };\n        return getBoundsOfBoxes(currBox, nodeBox);\n    }, { x: Infinity, y: Infinity, x2: -Infinity, y2: -Infinity });\n    return boxToRect(box);\n};\n/**\n * Determines a bounding box that contains all given nodes in an array\n * @internal\n */\nconst getInternalNodesBounds = (nodeLookup, params = {}) => {\n    if (nodeLookup.size === 0) {\n        return { x: 0, y: 0, width: 0, height: 0 };\n    }\n    let box = { x: Infinity, y: Infinity, x2: -Infinity, y2: -Infinity };\n    nodeLookup.forEach((node) => {\n        if (params.filter === undefined || params.filter(node)) {\n            const nodeBox = nodeToBox(node);\n            box = getBoundsOfBoxes(box, nodeBox);\n        }\n    });\n    return boxToRect(box);\n};\nconst getNodesInside = (nodes, rect, [tx, ty, tScale] = [0, 0, 1], partially = false, \n// set excludeNonSelectableNodes if you want to pay attention to the nodes \"selectable\" attribute\nexcludeNonSelectableNodes = false) => {\n    const paneRect = {\n        ...pointToRendererPoint(rect, [tx, ty, tScale]),\n        width: rect.width / tScale,\n        height: rect.height / tScale,\n    };\n    const visibleNodes = [];\n    for (const node of nodes.values()) {\n        const { measured, selectable = true, hidden = false } = node;\n        if ((excludeNonSelectableNodes && !selectable) || hidden) {\n            continue;\n        }\n        const width = measured.width ?? node.width ?? node.initialWidth ?? null;\n        const height = measured.height ?? node.height ?? node.initialHeight ?? null;\n        const overlappingArea = getOverlappingArea(paneRect, nodeToRect(node));\n        const area = (width ?? 0) * (height ?? 0);\n        const partiallyVisible = partially && overlappingArea > 0;\n        const forceInitialRender = !node.internals.handleBounds;\n        const isVisible = forceInitialRender || partiallyVisible || overlappingArea >= area;\n        if (isVisible || node.dragging) {\n            visibleNodes.push(node);\n        }\n    }\n    return visibleNodes;\n};\n/**\n * This utility filters an array of edges, keeping only those where either the source or target\n * node is present in the given array of nodes.\n * @public\n * @param nodes - Nodes you want to get the connected edges for.\n * @param edges - All edges.\n * @returns Array of edges that connect any of the given nodes with each other.\n *\n * @example\n * ```js\n *import { getConnectedEdges } from '@xyflow/react';\n *\n *const nodes = [\n *  { id: 'a', position: { x: 0, y: 0 } },\n *  { id: 'b', position: { x: 100, y: 0 } },\n *];\n *\n *const edges = [\n *  { id: 'a->c', source: 'a', target: 'c' },\n *  { id: 'c->d', source: 'c', target: 'd' },\n *];\n *\n *const connectedEdges = getConnectedEdges(nodes, edges);\n * // => [{ id: 'a->c', source: 'a', target: 'c' }]\n *```\n */\nconst getConnectedEdges = (nodes, edges) => {\n    const nodeIds = new Set();\n    nodes.forEach((node) => {\n        nodeIds.add(node.id);\n    });\n    return edges.filter((edge) => nodeIds.has(edge.source) || nodeIds.has(edge.target));\n};\nfunction getFitViewNodes(nodeLookup, options) {\n    const fitViewNodes = new Map();\n    const optionNodeIds = options?.nodes ? new Set(options.nodes.map((node) => node.id)) : null;\n    nodeLookup.forEach((n) => {\n        const isVisible = n.measured.width && n.measured.height && (options?.includeHiddenNodes || !n.hidden);\n        if (isVisible && (!optionNodeIds || optionNodeIds.has(n.id))) {\n            fitViewNodes.set(n.id, n);\n        }\n    });\n    return fitViewNodes;\n}\nasync function fitViewport({ nodes, width, height, panZoom, minZoom, maxZoom }, options) {\n    if (nodes.size === 0) {\n        return Promise.resolve(true);\n    }\n    const nodesToFit = getFitViewNodes(nodes, options);\n    const bounds = getInternalNodesBounds(nodesToFit);\n    const viewport = getViewportForBounds(bounds, width, height, options?.minZoom ?? minZoom, options?.maxZoom ?? maxZoom, options?.padding ?? 0.1);\n    await panZoom.setViewport(viewport, { duration: options?.duration });\n    return Promise.resolve(true);\n}\n/**\n * This function calculates the next position of a node, taking into account the node's extent, parent node, and origin.\n *\n * @internal\n * @returns position, positionAbsolute\n */\nfunction calculateNodePosition({ nodeId, nextPosition, nodeLookup, nodeOrigin = [0, 0], nodeExtent, onError, }) {\n    const node = nodeLookup.get(nodeId);\n    const parentNode = node.parentId ? nodeLookup.get(node.parentId) : undefined;\n    const { x: parentX, y: parentY } = parentNode ? parentNode.internals.positionAbsolute : { x: 0, y: 0 };\n    const origin = node.origin ?? nodeOrigin;\n    let extent = nodeExtent;\n    if (node.extent === 'parent' && !node.expandParent) {\n        if (!parentNode) {\n            onError?.('005', errorMessages['error005']());\n        }\n        else {\n            const parentWidth = parentNode.measured.width;\n            const parentHeight = parentNode.measured.height;\n            if (parentWidth && parentHeight) {\n                extent = [\n                    [parentX, parentY],\n                    [parentX + parentWidth, parentY + parentHeight],\n                ];\n            }\n        }\n    }\n    else if (parentNode && isCoordinateExtent(node.extent)) {\n        extent = [\n            [node.extent[0][0] + parentX, node.extent[0][1] + parentY],\n            [node.extent[1][0] + parentX, node.extent[1][1] + parentY],\n        ];\n    }\n    const positionAbsolute = isCoordinateExtent(extent)\n        ? clampPosition(nextPosition, extent, node.measured)\n        : nextPosition;\n    if (node.measured.width === undefined || node.measured.height === undefined) {\n        onError?.('015', errorMessages['error015']());\n    }\n    return {\n        position: {\n            x: positionAbsolute.x - parentX + (node.measured.width ?? 0) * origin[0],\n            y: positionAbsolute.y - parentY + (node.measured.height ?? 0) * origin[1],\n        },\n        positionAbsolute,\n    };\n}\n/**\n * Pass in nodes & edges to delete, get arrays of nodes and edges that actually can be deleted\n * @internal\n * @param param.nodesToRemove - The nodes to remove\n * @param param.edgesToRemove - The edges to remove\n * @param param.nodes - All nodes\n * @param param.edges - All edges\n * @param param.onBeforeDelete - Callback to check which nodes and edges can be deleted\n * @returns nodes: nodes that can be deleted, edges: edges that can be deleted\n */\nasync function getElementsToRemove({ nodesToRemove = [], edgesToRemove = [], nodes, edges, onBeforeDelete, }) {\n    const nodeIds = new Set(nodesToRemove.map((node) => node.id));\n    const matchingNodes = [];\n    for (const node of nodes) {\n        if (node.deletable === false) {\n            continue;\n        }\n        const isIncluded = nodeIds.has(node.id);\n        const parentHit = !isIncluded && node.parentId && matchingNodes.find((n) => n.id === node.parentId);\n        if (isIncluded || parentHit) {\n            matchingNodes.push(node);\n        }\n    }\n    const edgeIds = new Set(edgesToRemove.map((edge) => edge.id));\n    const deletableEdges = edges.filter((edge) => edge.deletable !== false);\n    const connectedEdges = getConnectedEdges(matchingNodes, deletableEdges);\n    const matchingEdges = connectedEdges;\n    for (const edge of deletableEdges) {\n        const isIncluded = edgeIds.has(edge.id);\n        if (isIncluded && !matchingEdges.find((e) => e.id === edge.id)) {\n            matchingEdges.push(edge);\n        }\n    }\n    if (!onBeforeDelete) {\n        return {\n            edges: matchingEdges,\n            nodes: matchingNodes,\n        };\n    }\n    const onBeforeDeleteResult = await onBeforeDelete({\n        nodes: matchingNodes,\n        edges: matchingEdges,\n    });\n    if (typeof onBeforeDeleteResult === 'boolean') {\n        return onBeforeDeleteResult ? { edges: matchingEdges, nodes: matchingNodes } : { edges: [], nodes: [] };\n    }\n    return onBeforeDeleteResult;\n}\n\nconst clamp = (val, min = 0, max = 1) => Math.min(Math.max(val, min), max);\nconst clampPosition = (position = { x: 0, y: 0 }, extent, dimensions) => ({\n    x: clamp(position.x, extent[0][0], extent[1][0] - (dimensions?.width ?? 0)),\n    y: clamp(position.y, extent[0][1], extent[1][1] - (dimensions?.height ?? 0)),\n});\nfunction clampPositionToParent(childPosition, childDimensions, parent) {\n    const { width: parentWidth, height: parentHeight } = getNodeDimensions(parent);\n    const { x: parentX, y: parentY } = parent.internals.positionAbsolute;\n    return clampPosition(childPosition, [\n        [parentX, parentY],\n        [parentX + parentWidth, parentY + parentHeight],\n    ], childDimensions);\n}\n/**\n * Calculates the velocity of panning when the mouse is close to the edge of the canvas\n * @internal\n * @param value - One dimensional poition of the mouse (x or y)\n * @param min - Minimal position on canvas before panning starts\n * @param max - Maximal position on canvas before panning starts\n * @returns - A number between 0 and 1 that represents the velocity of panning\n */\nconst calcAutoPanVelocity = (value, min, max) => {\n    if (value < min) {\n        return clamp(Math.abs(value - min), 1, min) / min;\n    }\n    else if (value > max) {\n        return -clamp(Math.abs(value - max), 1, min) / min;\n    }\n    return 0;\n};\nconst calcAutoPan = (pos, bounds, speed = 15, distance = 40) => {\n    const xMovement = calcAutoPanVelocity(pos.x, distance, bounds.width - distance) * speed;\n    const yMovement = calcAutoPanVelocity(pos.y, distance, bounds.height - distance) * speed;\n    return [xMovement, yMovement];\n};\nconst getBoundsOfBoxes = (box1, box2) => ({\n    x: Math.min(box1.x, box2.x),\n    y: Math.min(box1.y, box2.y),\n    x2: Math.max(box1.x2, box2.x2),\n    y2: Math.max(box1.y2, box2.y2),\n});\nconst rectToBox = ({ x, y, width, height }) => ({\n    x,\n    y,\n    x2: x + width,\n    y2: y + height,\n});\nconst boxToRect = ({ x, y, x2, y2 }) => ({\n    x,\n    y,\n    width: x2 - x,\n    height: y2 - y,\n});\nconst nodeToRect = (node, nodeOrigin = [0, 0]) => {\n    const { x, y } = isInternalNodeBase(node)\n        ? node.internals.positionAbsolute\n        : getNodePositionWithOrigin(node, nodeOrigin);\n    return {\n        x,\n        y,\n        width: node.measured?.width ?? node.width ?? node.initialWidth ?? 0,\n        height: node.measured?.height ?? node.height ?? node.initialHeight ?? 0,\n    };\n};\nconst nodeToBox = (node, nodeOrigin = [0, 0]) => {\n    const { x, y } = isInternalNodeBase(node)\n        ? node.internals.positionAbsolute\n        : getNodePositionWithOrigin(node, nodeOrigin);\n    return {\n        x,\n        y,\n        x2: x + (node.measured?.width ?? node.width ?? node.initialWidth ?? 0),\n        y2: y + (node.measured?.height ?? node.height ?? node.initialHeight ?? 0),\n    };\n};\nconst getBoundsOfRects = (rect1, rect2) => boxToRect(getBoundsOfBoxes(rectToBox(rect1), rectToBox(rect2)));\nconst getOverlappingArea = (rectA, rectB) => {\n    const xOverlap = Math.max(0, Math.min(rectA.x + rectA.width, rectB.x + rectB.width) - Math.max(rectA.x, rectB.x));\n    const yOverlap = Math.max(0, Math.min(rectA.y + rectA.height, rectB.y + rectB.height) - Math.max(rectA.y, rectB.y));\n    return Math.ceil(xOverlap * yOverlap);\n};\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst isRectObject = (obj) => isNumeric(obj.width) && isNumeric(obj.height) && isNumeric(obj.x) && isNumeric(obj.y);\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\nconst isNumeric = (n) => !isNaN(n) && isFinite(n);\n// used for a11y key board controls for nodes and edges\nconst devWarn = (id, message) => {\n    if (process.env.NODE_ENV === 'development') {\n        console.warn(`[React Flow]: ${message} Help: https://reactflow.dev/error#${id}`);\n    }\n};\nconst snapPosition = (position, snapGrid = [1, 1]) => {\n    return {\n        x: snapGrid[0] * Math.round(position.x / snapGrid[0]),\n        y: snapGrid[1] * Math.round(position.y / snapGrid[1]),\n    };\n};\nconst pointToRendererPoint = ({ x, y }, [tx, ty, tScale], snapToGrid = false, snapGrid = [1, 1]) => {\n    const position = {\n        x: (x - tx) / tScale,\n        y: (y - ty) / tScale,\n    };\n    return snapToGrid ? snapPosition(position, snapGrid) : position;\n};\nconst rendererPointToPoint = ({ x, y }, [tx, ty, tScale]) => {\n    return {\n        x: x * tScale + tx,\n        y: y * tScale + ty,\n    };\n};\n/**\n * Parses a single padding value to a number\n * @internal\n * @param padding - Padding to parse\n * @param viewport - Width or height of the viewport\n * @returns The padding in pixels\n */\nfunction parsePadding(padding, viewport) {\n    if (typeof padding === 'number') {\n        return Math.floor((viewport - viewport / (1 + padding)) * 0.5);\n    }\n    if (typeof padding === 'string' && padding.endsWith('px')) {\n        const paddingValue = parseFloat(padding);\n        if (!Number.isNaN(paddingValue)) {\n            return Math.floor(paddingValue);\n        }\n    }\n    if (typeof padding === 'string' && padding.endsWith('%')) {\n        const paddingValue = parseFloat(padding);\n        if (!Number.isNaN(paddingValue)) {\n            return Math.floor(viewport * paddingValue * 0.01);\n        }\n    }\n    console.error(`[React Flow] The padding value \"${padding}\" is invalid. Please provide a number or a string with a valid unit (px or %).`);\n    return 0;\n}\n/**\n * Parses the paddings to an object with top, right, bottom, left, x and y paddings\n * @internal\n * @param padding - Padding to parse\n * @param width - Width of the viewport\n * @param height - Height of the viewport\n * @returns An object with the paddings in pixels\n */\nfunction parsePaddings(padding, width, height) {\n    if (typeof padding === 'string' || typeof padding === 'number') {\n        const paddingY = parsePadding(padding, height);\n        const paddingX = parsePadding(padding, width);\n        return {\n            top: paddingY,\n            right: paddingX,\n            bottom: paddingY,\n            left: paddingX,\n            x: paddingX * 2,\n            y: paddingY * 2,\n        };\n    }\n    if (typeof padding === 'object') {\n        const top = parsePadding(padding.top ?? padding.y ?? 0, height);\n        const bottom = parsePadding(padding.bottom ?? padding.y ?? 0, height);\n        const left = parsePadding(padding.left ?? padding.x ?? 0, width);\n        const right = parsePadding(padding.right ?? padding.x ?? 0, width);\n        return { top, right, bottom, left, x: left + right, y: top + bottom };\n    }\n    return { top: 0, right: 0, bottom: 0, left: 0, x: 0, y: 0 };\n}\n/**\n * Calculates the resulting paddings if the new viewport is applied\n * @internal\n * @param bounds - Bounds to fit inside viewport\n * @param x - X position of the viewport\n * @param y - Y position of the viewport\n * @param zoom - Zoom level of the viewport\n * @param width - Width of the viewport\n * @param height - Height of the viewport\n * @returns An object with the minimum padding required to fit the bounds inside the viewport\n */\nfunction calculateAppliedPaddings(bounds, x, y, zoom, width, height) {\n    const { x: left, y: top } = rendererPointToPoint(bounds, [x, y, zoom]);\n    const { x: boundRight, y: boundBottom } = rendererPointToPoint({ x: bounds.x + bounds.width, y: bounds.y + bounds.height }, [x, y, zoom]);\n    const right = width - boundRight;\n    const bottom = height - boundBottom;\n    return {\n        left: Math.floor(left),\n        top: Math.floor(top),\n        right: Math.floor(right),\n        bottom: Math.floor(bottom),\n    };\n}\n/**\n * Returns a viewport that encloses the given bounds with padding.\n * @public\n * @remarks You can determine bounds of nodes with {@link getNodesBounds} and {@link getBoundsOfRects}\n * @param bounds - Bounds to fit inside viewport.\n * @param width - Width of the viewport.\n * @param height  - Height of the viewport.\n * @param minZoom - Minimum zoom level of the resulting viewport.\n * @param maxZoom - Maximum zoom level of the resulting viewport.\n * @param padding - Padding around the bounds.\n * @returns A transformed {@link Viewport} that encloses the given bounds which you can pass to e.g. {@link setViewport}.\n * @example\n * const { x, y, zoom } = getViewportForBounds(\n * { x: 0, y: 0, width: 100, height: 100},\n * 1200, 800, 0.5, 2);\n */\nconst getViewportForBounds = (bounds, width, height, minZoom, maxZoom, padding) => {\n    // First we resolve all the paddings to actual pixel values\n    const p = parsePaddings(padding, width, height);\n    const xZoom = (width - p.x) / bounds.width;\n    const yZoom = (height - p.y) / bounds.height;\n    // We calculate the new x, y, zoom for a centered view\n    const zoom = Math.min(xZoom, yZoom);\n    const clampedZoom = clamp(zoom, minZoom, maxZoom);\n    const boundsCenterX = bounds.x + bounds.width / 2;\n    const boundsCenterY = bounds.y + bounds.height / 2;\n    const x = width / 2 - boundsCenterX * clampedZoom;\n    const y = height / 2 - boundsCenterY * clampedZoom;\n    // Then we calculate the minimum padding, to respect asymmetric paddings\n    const newPadding = calculateAppliedPaddings(bounds, x, y, clampedZoom, width, height);\n    // We only want to have an offset if the newPadding is smaller than the required padding\n    const offset = {\n        left: Math.min(newPadding.left - p.left, 0),\n        top: Math.min(newPadding.top - p.top, 0),\n        right: Math.min(newPadding.right - p.right, 0),\n        bottom: Math.min(newPadding.bottom - p.bottom, 0),\n    };\n    return {\n        x: x - offset.left + offset.right,\n        y: y - offset.top + offset.bottom,\n        zoom: clampedZoom,\n    };\n};\nconst isMacOs = () => typeof navigator !== 'undefined' && navigator?.userAgent?.indexOf('Mac') >= 0;\nfunction isCoordinateExtent(extent) {\n    return extent !== undefined && extent !== 'parent';\n}\nfunction getNodeDimensions(node) {\n    return {\n        width: node.measured?.width ?? node.width ?? node.initialWidth ?? 0,\n        height: node.measured?.height ?? node.height ?? node.initialHeight ?? 0,\n    };\n}\nfunction nodeHasDimensions(node) {\n    return ((node.measured?.width ?? node.width ?? node.initialWidth) !== undefined &&\n        (node.measured?.height ?? node.height ?? node.initialHeight) !== undefined);\n}\n/**\n * Convert child position to aboslute position\n *\n * @internal\n * @param position\n * @param parentId\n * @param nodeLookup\n * @param nodeOrigin\n * @returns an internal node with an absolute position\n */\nfunction evaluateAbsolutePosition(position, dimensions = { width: 0, height: 0 }, parentId, nodeLookup, nodeOrigin) {\n    const positionAbsolute = { ...position };\n    const parent = nodeLookup.get(parentId);\n    if (parent) {\n        const origin = parent.origin || nodeOrigin;\n        positionAbsolute.x += parent.internals.positionAbsolute.x - (dimensions.width ?? 0) * origin[0];\n        positionAbsolute.y += parent.internals.positionAbsolute.y - (dimensions.height ?? 0) * origin[1];\n    }\n    return positionAbsolute;\n}\nfunction areSetsEqual(a, b) {\n    if (a.size !== b.size) {\n        return false;\n    }\n    for (const item of a) {\n        if (!b.has(item)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Polyfill for Promise.withResolvers until we can use it in all browsers\n * @internal\n */\nfunction withResolvers() {\n    let resolve;\n    let reject;\n    const promise = new Promise((res, rej) => {\n        resolve = res;\n        reject = rej;\n    });\n    return { promise, resolve, reject };\n}\n\nfunction getPointerPosition(event, { snapGrid = [0, 0], snapToGrid = false, transform, containerBounds }) {\n    const { x, y } = getEventPosition(event);\n    const pointerPos = pointToRendererPoint({ x: x - (containerBounds?.left ?? 0), y: y - (containerBounds?.top ?? 0) }, transform);\n    const { x: xSnapped, y: ySnapped } = snapToGrid ? snapPosition(pointerPos, snapGrid) : pointerPos;\n    // we need the snapped position in order to be able to skip unnecessary drag events\n    return {\n        xSnapped,\n        ySnapped,\n        ...pointerPos,\n    };\n}\nconst getDimensions = (node) => ({\n    width: node.offsetWidth,\n    height: node.offsetHeight,\n});\nconst getHostForElement = (element) => element?.getRootNode?.() || window?.document;\nconst inputTags = ['INPUT', 'SELECT', 'TEXTAREA'];\nfunction isInputDOMNode(event) {\n    // using composed path for handling shadow dom\n    const target = (event.composedPath?.()?.[0] || event.target);\n    if (target?.nodeType !== 1 /* Node.ELEMENT_NODE */)\n        return false;\n    const isInput = inputTags.includes(target.nodeName) || target.hasAttribute('contenteditable');\n    // when an input field is focused we don't want to trigger deletion or movement of nodes\n    return isInput || !!target.closest('.nokey');\n}\nconst isMouseEvent = (event) => 'clientX' in event;\nconst getEventPosition = (event, bounds) => {\n    const isMouse = isMouseEvent(event);\n    const evtX = isMouse ? event.clientX : event.touches?.[0].clientX;\n    const evtY = isMouse ? event.clientY : event.touches?.[0].clientY;\n    return {\n        x: evtX - (bounds?.left ?? 0),\n        y: evtY - (bounds?.top ?? 0),\n    };\n};\n/*\n * The handle bounds are calculated relative to the node element.\n * We store them in the internals object of the node in order to avoid\n * unnecessary recalculations.\n */\nconst getHandleBounds = (type, nodeElement, nodeBounds, zoom, nodeId) => {\n    const handles = nodeElement.querySelectorAll(`.${type}`);\n    if (!handles || !handles.length) {\n        return null;\n    }\n    return Array.from(handles).map((handle) => {\n        const handleBounds = handle.getBoundingClientRect();\n        return {\n            id: handle.getAttribute('data-handleid'),\n            type,\n            nodeId,\n            position: handle.getAttribute('data-handlepos'),\n            x: (handleBounds.left - nodeBounds.left) / zoom,\n            y: (handleBounds.top - nodeBounds.top) / zoom,\n            ...getDimensions(handle),\n        };\n    });\n};\n\nfunction getBezierEdgeCenter({ sourceX, sourceY, targetX, targetY, sourceControlX, sourceControlY, targetControlX, targetControlY, }) {\n    /*\n     * cubic bezier t=0.5 mid point, not the actual mid point, but easy to calculate\n     * https://stackoverflow.com/questions/67516101/how-to-find-distance-mid-point-of-bezier-curve\n     */\n    const centerX = sourceX * 0.125 + sourceControlX * 0.375 + targetControlX * 0.375 + targetX * 0.125;\n    const centerY = sourceY * 0.125 + sourceControlY * 0.375 + targetControlY * 0.375 + targetY * 0.125;\n    const offsetX = Math.abs(centerX - sourceX);\n    const offsetY = Math.abs(centerY - sourceY);\n    return [centerX, centerY, offsetX, offsetY];\n}\nfunction calculateControlOffset(distance, curvature) {\n    if (distance >= 0) {\n        return 0.5 * distance;\n    }\n    return curvature * 25 * Math.sqrt(-distance);\n}\nfunction getControlWithCurvature({ pos, x1, y1, x2, y2, c }) {\n    switch (pos) {\n        case Position.Left:\n            return [x1 - calculateControlOffset(x1 - x2, c), y1];\n        case Position.Right:\n            return [x1 + calculateControlOffset(x2 - x1, c), y1];\n        case Position.Top:\n            return [x1, y1 - calculateControlOffset(y1 - y2, c)];\n        case Position.Bottom:\n            return [x1, y1 + calculateControlOffset(y2 - y1, c)];\n    }\n}\n/**\n * The `getBezierPath` util returns everything you need to render a bezier edge\n *between two nodes.\n * @public\n * @returns A path string you can use in an SVG, the `labelX` and `labelY` position (center of path)\n * and `offsetX`, `offsetY` between source handle and label.\n * - `path`: the path to use in an SVG `<path>` element.\n * - `labelX`: the `x` position you can use to render a label for this edge.\n * - `labelY`: the `y` position you can use to render a label for this edge.\n * - `offsetX`: the absolute difference between the source `x` position and the `x` position of the\n * middle of this path.\n * - `offsetY`: the absolute difference between the source `y` position and the `y` position of the\n * middle of this path.\n * @example\n * ```js\n *  const source = { x: 0, y: 20 };\n *  const target = { x: 150, y: 100 };\n *\n *  const [path, labelX, labelY, offsetX, offsetY] = getBezierPath({\n *    sourceX: source.x,\n *    sourceY: source.y,\n *    sourcePosition: Position.Right,\n *    targetX: target.x,\n *    targetY: target.y,\n *    targetPosition: Position.Left,\n *});\n *```\n *\n * @remarks This function returns a tuple (aka a fixed-size array) to make it easier to\n *work with multiple edge paths at once.\n */\nfunction getBezierPath({ sourceX, sourceY, sourcePosition = Position.Bottom, targetX, targetY, targetPosition = Position.Top, curvature = 0.25, }) {\n    const [sourceControlX, sourceControlY] = getControlWithCurvature({\n        pos: sourcePosition,\n        x1: sourceX,\n        y1: sourceY,\n        x2: targetX,\n        y2: targetY,\n        c: curvature,\n    });\n    const [targetControlX, targetControlY] = getControlWithCurvature({\n        pos: targetPosition,\n        x1: targetX,\n        y1: targetY,\n        x2: sourceX,\n        y2: sourceY,\n        c: curvature,\n    });\n    const [labelX, labelY, offsetX, offsetY] = getBezierEdgeCenter({\n        sourceX,\n        sourceY,\n        targetX,\n        targetY,\n        sourceControlX,\n        sourceControlY,\n        targetControlX,\n        targetControlY,\n    });\n    return [\n        `M${sourceX},${sourceY} C${sourceControlX},${sourceControlY} ${targetControlX},${targetControlY} ${targetX},${targetY}`,\n        labelX,\n        labelY,\n        offsetX,\n        offsetY,\n    ];\n}\n\n// this is used for straight edges and simple smoothstep edges (LTR, RTL, BTT, TTB)\nfunction getEdgeCenter({ sourceX, sourceY, targetX, targetY, }) {\n    const xOffset = Math.abs(targetX - sourceX) / 2;\n    const centerX = targetX < sourceX ? targetX + xOffset : targetX - xOffset;\n    const yOffset = Math.abs(targetY - sourceY) / 2;\n    const centerY = targetY < sourceY ? targetY + yOffset : targetY - yOffset;\n    return [centerX, centerY, xOffset, yOffset];\n}\nfunction getElevatedEdgeZIndex({ sourceNode, targetNode, selected = false, zIndex = 0, elevateOnSelect = false, }) {\n    if (!elevateOnSelect) {\n        return zIndex;\n    }\n    const edgeOrConnectedNodeSelected = selected || targetNode.selected || sourceNode.selected;\n    const selectedZIndex = Math.max(sourceNode.internals.z || 0, targetNode.internals.z || 0, 1000);\n    return zIndex + (edgeOrConnectedNodeSelected ? selectedZIndex : 0);\n}\nfunction isEdgeVisible({ sourceNode, targetNode, width, height, transform }) {\n    const edgeBox = getBoundsOfBoxes(nodeToBox(sourceNode), nodeToBox(targetNode));\n    if (edgeBox.x === edgeBox.x2) {\n        edgeBox.x2 += 1;\n    }\n    if (edgeBox.y === edgeBox.y2) {\n        edgeBox.y2 += 1;\n    }\n    const viewRect = {\n        x: -transform[0] / transform[2],\n        y: -transform[1] / transform[2],\n        width: width / transform[2],\n        height: height / transform[2],\n    };\n    return getOverlappingArea(viewRect, boxToRect(edgeBox)) > 0;\n}\nconst getEdgeId = ({ source, sourceHandle, target, targetHandle }) => `xy-edge__${source}${sourceHandle || ''}-${target}${targetHandle || ''}`;\nconst connectionExists = (edge, edges) => {\n    return edges.some((el) => el.source === edge.source &&\n        el.target === edge.target &&\n        (el.sourceHandle === edge.sourceHandle || (!el.sourceHandle && !edge.sourceHandle)) &&\n        (el.targetHandle === edge.targetHandle || (!el.targetHandle && !edge.targetHandle)));\n};\n/**\n * This util is a convenience function to add a new Edge to an array of edges. It also performs some validation to make sure you don't add an invalid edge or duplicate an existing one.\n * @public\n * @param edgeParams - Either an `Edge` or a `Connection` you want to add.\n * @param edges - The array of all current edges.\n * @returns A new array of edges with the new edge added.\n *\n * @remarks If an edge with the same `target` and `source` already exists (and the same\n *`targetHandle` and `sourceHandle` if those are set), then this util won't add\n *a new edge even if the `id` property is different.\n *\n */\nconst addEdge = (edgeParams, edges) => {\n    if (!edgeParams.source || !edgeParams.target) {\n        devWarn('006', errorMessages['error006']());\n        return edges;\n    }\n    let edge;\n    if (isEdgeBase(edgeParams)) {\n        edge = { ...edgeParams };\n    }\n    else {\n        edge = {\n            ...edgeParams,\n            id: getEdgeId(edgeParams),\n        };\n    }\n    if (connectionExists(edge, edges)) {\n        return edges;\n    }\n    if (edge.sourceHandle === null) {\n        delete edge.sourceHandle;\n    }\n    if (edge.targetHandle === null) {\n        delete edge.targetHandle;\n    }\n    return edges.concat(edge);\n};\n/**\n * A handy utility to update an existing [`Edge`](/api-reference/types/edge) with new properties.\n *This searches your edge array for an edge with a matching `id` and updates its\n *properties with the connection you provide.\n * @public\n * @param oldEdge - The edge you want to update.\n * @param newConnection - The new connection you want to update the edge with.\n * @param edges - The array of all current edges.\n * @returns The updated edges array.\n *\n * @example\n * ```js\n *const onReconnect = useCallback(\n *  (oldEdge: Edge, newConnection: Connection) => setEdges((els) => reconnectEdge(oldEdge, newConnection, els)),[]);\n *```\n */\nconst reconnectEdge = (oldEdge, newConnection, edges, options = { shouldReplaceId: true }) => {\n    const { id: oldEdgeId, ...rest } = oldEdge;\n    if (!newConnection.source || !newConnection.target) {\n        devWarn('006', errorMessages['error006']());\n        return edges;\n    }\n    const foundEdge = edges.find((e) => e.id === oldEdge.id);\n    if (!foundEdge) {\n        devWarn('007', errorMessages['error007'](oldEdgeId));\n        return edges;\n    }\n    // Remove old edge and create the new edge with parameters of old edge.\n    const edge = {\n        ...rest,\n        id: options.shouldReplaceId ? getEdgeId(newConnection) : oldEdgeId,\n        source: newConnection.source,\n        target: newConnection.target,\n        sourceHandle: newConnection.sourceHandle,\n        targetHandle: newConnection.targetHandle,\n    };\n    return edges.filter((e) => e.id !== oldEdgeId).concat(edge);\n};\n\n/**\n * Calculates the straight line path between two points.\n * @public\n * @returns A path string you can use in an SVG, the `labelX` and `labelY` position (center of path)\n * and `offsetX`, `offsetY` between source handle and label.\n *\n * - `path`: the path to use in an SVG `<path>` element.\n * - `labelX`: the `x` position you can use to render a label for this edge.\n * - `labelY`: the `y` position you can use to render a label for this edge.\n * - `offsetX`: the absolute difference between the source `x` position and the `x` position of the\n * middle of this path.\n * - `offsetY`: the absolute difference between the source `y` position and the `y` position of the\n * middle of this path.\n * @example\n * ```js\n *  const source = { x: 0, y: 20 };\n *  const target = { x: 150, y: 100 };\n *\n *  const [path, labelX, labelY, offsetX, offsetY] = getStraightPath({\n *    sourceX: source.x,\n *    sourceY: source.y,\n *    sourcePosition: Position.Right,\n *    targetX: target.x,\n *    targetY: target.y,\n *    targetPosition: Position.Left,\n *  });\n * ```\n * @remarks This function returns a tuple (aka a fixed-size array) to make it easier to work with multiple edge paths at once.\n */\nfunction getStraightPath({ sourceX, sourceY, targetX, targetY, }) {\n    const [labelX, labelY, offsetX, offsetY] = getEdgeCenter({\n        sourceX,\n        sourceY,\n        targetX,\n        targetY,\n    });\n    return [`M ${sourceX},${sourceY}L ${targetX},${targetY}`, labelX, labelY, offsetX, offsetY];\n}\n\nconst handleDirections = {\n    [Position.Left]: { x: -1, y: 0 },\n    [Position.Right]: { x: 1, y: 0 },\n    [Position.Top]: { x: 0, y: -1 },\n    [Position.Bottom]: { x: 0, y: 1 },\n};\nconst getDirection = ({ source, sourcePosition = Position.Bottom, target, }) => {\n    if (sourcePosition === Position.Left || sourcePosition === Position.Right) {\n        return source.x < target.x ? { x: 1, y: 0 } : { x: -1, y: 0 };\n    }\n    return source.y < target.y ? { x: 0, y: 1 } : { x: 0, y: -1 };\n};\nconst distance = (a, b) => Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2));\n/*\n * With this function we try to mimic an orthogonal edge routing behaviour\n * It's not as good as a real orthogonal edge routing, but it's faster and good enough as a default for step and smooth step edges\n */\nfunction getPoints({ source, sourcePosition = Position.Bottom, target, targetPosition = Position.Top, center, offset, }) {\n    const sourceDir = handleDirections[sourcePosition];\n    const targetDir = handleDirections[targetPosition];\n    const sourceGapped = { x: source.x + sourceDir.x * offset, y: source.y + sourceDir.y * offset };\n    const targetGapped = { x: target.x + targetDir.x * offset, y: target.y + targetDir.y * offset };\n    const dir = getDirection({\n        source: sourceGapped,\n        sourcePosition,\n        target: targetGapped,\n    });\n    const dirAccessor = dir.x !== 0 ? 'x' : 'y';\n    const currDir = dir[dirAccessor];\n    let points = [];\n    let centerX, centerY;\n    const sourceGapOffset = { x: 0, y: 0 };\n    const targetGapOffset = { x: 0, y: 0 };\n    const [defaultCenterX, defaultCenterY, defaultOffsetX, defaultOffsetY] = getEdgeCenter({\n        sourceX: source.x,\n        sourceY: source.y,\n        targetX: target.x,\n        targetY: target.y,\n    });\n    // opposite handle positions, default case\n    if (sourceDir[dirAccessor] * targetDir[dirAccessor] === -1) {\n        centerX = center.x ?? defaultCenterX;\n        centerY = center.y ?? defaultCenterY;\n        /*\n         *    --->\n         *    |\n         * >---\n         */\n        const verticalSplit = [\n            { x: centerX, y: sourceGapped.y },\n            { x: centerX, y: targetGapped.y },\n        ];\n        /*\n         *    |\n         *  ---\n         *  |\n         */\n        const horizontalSplit = [\n            { x: sourceGapped.x, y: centerY },\n            { x: targetGapped.x, y: centerY },\n        ];\n        if (sourceDir[dirAccessor] === currDir) {\n            points = dirAccessor === 'x' ? verticalSplit : horizontalSplit;\n        }\n        else {\n            points = dirAccessor === 'x' ? horizontalSplit : verticalSplit;\n        }\n    }\n    else {\n        // sourceTarget means we take x from source and y from target, targetSource is the opposite\n        const sourceTarget = [{ x: sourceGapped.x, y: targetGapped.y }];\n        const targetSource = [{ x: targetGapped.x, y: sourceGapped.y }];\n        // this handles edges with same handle positions\n        if (dirAccessor === 'x') {\n            points = sourceDir.x === currDir ? targetSource : sourceTarget;\n        }\n        else {\n            points = sourceDir.y === currDir ? sourceTarget : targetSource;\n        }\n        if (sourcePosition === targetPosition) {\n            const diff = Math.abs(source[dirAccessor] - target[dirAccessor]);\n            // if an edge goes from right to right for example (sourcePosition === targetPosition) and the distance between source.x and target.x is less than the offset, the added point and the gapped source/target will overlap. This leads to a weird edge path. To avoid this we add a gapOffset to the source/target\n            if (diff <= offset) {\n                const gapOffset = Math.min(offset - 1, offset - diff);\n                if (sourceDir[dirAccessor] === currDir) {\n                    sourceGapOffset[dirAccessor] = (sourceGapped[dirAccessor] > source[dirAccessor] ? -1 : 1) * gapOffset;\n                }\n                else {\n                    targetGapOffset[dirAccessor] = (targetGapped[dirAccessor] > target[dirAccessor] ? -1 : 1) * gapOffset;\n                }\n            }\n        }\n        // these are conditions for handling mixed handle positions like Right -> Bottom for example\n        if (sourcePosition !== targetPosition) {\n            const dirAccessorOpposite = dirAccessor === 'x' ? 'y' : 'x';\n            const isSameDir = sourceDir[dirAccessor] === targetDir[dirAccessorOpposite];\n            const sourceGtTargetOppo = sourceGapped[dirAccessorOpposite] > targetGapped[dirAccessorOpposite];\n            const sourceLtTargetOppo = sourceGapped[dirAccessorOpposite] < targetGapped[dirAccessorOpposite];\n            const flipSourceTarget = (sourceDir[dirAccessor] === 1 && ((!isSameDir && sourceGtTargetOppo) || (isSameDir && sourceLtTargetOppo))) ||\n                (sourceDir[dirAccessor] !== 1 && ((!isSameDir && sourceLtTargetOppo) || (isSameDir && sourceGtTargetOppo)));\n            if (flipSourceTarget) {\n                points = dirAccessor === 'x' ? sourceTarget : targetSource;\n            }\n        }\n        const sourceGapPoint = { x: sourceGapped.x + sourceGapOffset.x, y: sourceGapped.y + sourceGapOffset.y };\n        const targetGapPoint = { x: targetGapped.x + targetGapOffset.x, y: targetGapped.y + targetGapOffset.y };\n        const maxXDistance = Math.max(Math.abs(sourceGapPoint.x - points[0].x), Math.abs(targetGapPoint.x - points[0].x));\n        const maxYDistance = Math.max(Math.abs(sourceGapPoint.y - points[0].y), Math.abs(targetGapPoint.y - points[0].y));\n        // we want to place the label on the longest segment of the edge\n        if (maxXDistance >= maxYDistance) {\n            centerX = (sourceGapPoint.x + targetGapPoint.x) / 2;\n            centerY = points[0].y;\n        }\n        else {\n            centerX = points[0].x;\n            centerY = (sourceGapPoint.y + targetGapPoint.y) / 2;\n        }\n    }\n    const pathPoints = [\n        source,\n        { x: sourceGapped.x + sourceGapOffset.x, y: sourceGapped.y + sourceGapOffset.y },\n        ...points,\n        { x: targetGapped.x + targetGapOffset.x, y: targetGapped.y + targetGapOffset.y },\n        target,\n    ];\n    return [pathPoints, centerX, centerY, defaultOffsetX, defaultOffsetY];\n}\nfunction getBend(a, b, c, size) {\n    const bendSize = Math.min(distance(a, b) / 2, distance(b, c) / 2, size);\n    const { x, y } = b;\n    // no bend\n    if ((a.x === x && x === c.x) || (a.y === y && y === c.y)) {\n        return `L${x} ${y}`;\n    }\n    // first segment is horizontal\n    if (a.y === y) {\n        const xDir = a.x < c.x ? -1 : 1;\n        const yDir = a.y < c.y ? 1 : -1;\n        return `L ${x + bendSize * xDir},${y}Q ${x},${y} ${x},${y + bendSize * yDir}`;\n    }\n    const xDir = a.x < c.x ? 1 : -1;\n    const yDir = a.y < c.y ? -1 : 1;\n    return `L ${x},${y + bendSize * yDir}Q ${x},${y} ${x + bendSize * xDir},${y}`;\n}\n/**\n * The `getSmoothStepPath` util returns everything you need to render a stepped path\n * between two nodes. The `borderRadius` property can be used to choose how rounded\n * the corners of those steps are.\n * @public\n * @returns A path string you can use in an SVG, the `labelX` and `labelY` position (center of path)\n * and `offsetX`, `offsetY` between source handle and label.\n *\n * - `path`: the path to use in an SVG `<path>` element.\n * - `labelX`: the `x` position you can use to render a label for this edge.\n * - `labelY`: the `y` position you can use to render a label for this edge.\n * - `offsetX`: the absolute difference between the source `x` position and the `x` position of the\n * middle of this path.\n * - `offsetY`: the absolute difference between the source `y` position and the `y` position of the\n * middle of this path.\n * @example\n * ```js\n *  const source = { x: 0, y: 20 };\n *  const target = { x: 150, y: 100 };\n *\n *  const [path, labelX, labelY, offsetX, offsetY] = getSmoothStepPath({\n *    sourceX: source.x,\n *    sourceY: source.y,\n *    sourcePosition: Position.Right,\n *    targetX: target.x,\n *    targetY: target.y,\n *    targetPosition: Position.Left,\n *  });\n * ```\n * @remarks This function returns a tuple (aka a fixed-size array) to make it easier to work with multiple edge paths at once.\n */\nfunction getSmoothStepPath({ sourceX, sourceY, sourcePosition = Position.Bottom, targetX, targetY, targetPosition = Position.Top, borderRadius = 5, centerX, centerY, offset = 20, }) {\n    const [points, labelX, labelY, offsetX, offsetY] = getPoints({\n        source: { x: sourceX, y: sourceY },\n        sourcePosition,\n        target: { x: targetX, y: targetY },\n        targetPosition,\n        center: { x: centerX, y: centerY },\n        offset,\n    });\n    const path = points.reduce((res, p, i) => {\n        let segment = '';\n        if (i > 0 && i < points.length - 1) {\n            segment = getBend(points[i - 1], p, points[i + 1], borderRadius);\n        }\n        else {\n            segment = `${i === 0 ? 'M' : 'L'}${p.x} ${p.y}`;\n        }\n        res += segment;\n        return res;\n    }, '');\n    return [path, labelX, labelY, offsetX, offsetY];\n}\n\nfunction isNodeInitialized(node) {\n    return (node &&\n        !!(node.internals.handleBounds || node.handles?.length) &&\n        !!(node.measured.width || node.width || node.initialWidth));\n}\nfunction getEdgePosition(params) {\n    const { sourceNode, targetNode } = params;\n    if (!isNodeInitialized(sourceNode) || !isNodeInitialized(targetNode)) {\n        return null;\n    }\n    const sourceHandleBounds = sourceNode.internals.handleBounds || toHandleBounds(sourceNode.handles);\n    const targetHandleBounds = targetNode.internals.handleBounds || toHandleBounds(targetNode.handles);\n    const sourceHandle = getHandle$1(sourceHandleBounds?.source ?? [], params.sourceHandle);\n    const targetHandle = getHandle$1(\n    // when connection type is loose we can define all handles as sources and connect source -> source\n    params.connectionMode === ConnectionMode.Strict\n        ? targetHandleBounds?.target ?? []\n        : (targetHandleBounds?.target ?? []).concat(targetHandleBounds?.source ?? []), params.targetHandle);\n    if (!sourceHandle || !targetHandle) {\n        params.onError?.('008', errorMessages['error008'](!sourceHandle ? 'source' : 'target', {\n            id: params.id,\n            sourceHandle: params.sourceHandle,\n            targetHandle: params.targetHandle,\n        }));\n        return null;\n    }\n    const sourcePosition = sourceHandle?.position || Position.Bottom;\n    const targetPosition = targetHandle?.position || Position.Top;\n    const source = getHandlePosition(sourceNode, sourceHandle, sourcePosition);\n    const target = getHandlePosition(targetNode, targetHandle, targetPosition);\n    return {\n        sourceX: source.x,\n        sourceY: source.y,\n        targetX: target.x,\n        targetY: target.y,\n        sourcePosition,\n        targetPosition,\n    };\n}\nfunction toHandleBounds(handles) {\n    if (!handles) {\n        return null;\n    }\n    const source = [];\n    const target = [];\n    for (const handle of handles) {\n        handle.width = handle.width ?? 1;\n        handle.height = handle.height ?? 1;\n        if (handle.type === 'source') {\n            source.push(handle);\n        }\n        else if (handle.type === 'target') {\n            target.push(handle);\n        }\n    }\n    return {\n        source,\n        target,\n    };\n}\nfunction getHandlePosition(node, handle, fallbackPosition = Position.Left, center = false) {\n    const x = (handle?.x ?? 0) + node.internals.positionAbsolute.x;\n    const y = (handle?.y ?? 0) + node.internals.positionAbsolute.y;\n    const { width, height } = handle ?? getNodeDimensions(node);\n    if (center) {\n        return { x: x + width / 2, y: y + height / 2 };\n    }\n    const position = handle?.position ?? fallbackPosition;\n    switch (position) {\n        case Position.Top:\n            return { x: x + width / 2, y };\n        case Position.Right:\n            return { x: x + width, y: y + height / 2 };\n        case Position.Bottom:\n            return { x: x + width / 2, y: y + height };\n        case Position.Left:\n            return { x, y: y + height / 2 };\n    }\n}\nfunction getHandle$1(bounds, handleId) {\n    if (!bounds) {\n        return null;\n    }\n    // if no handleId is given, we use the first handle, otherwise we check for the id\n    return (!handleId ? bounds[0] : bounds.find((d) => d.id === handleId)) || null;\n}\n\nfunction getMarkerId(marker, id) {\n    if (!marker) {\n        return '';\n    }\n    if (typeof marker === 'string') {\n        return marker;\n    }\n    const idPrefix = id ? `${id}__` : '';\n    return `${idPrefix}${Object.keys(marker)\n        .sort()\n        .map((key) => `${key}=${marker[key]}`)\n        .join('&')}`;\n}\nfunction createMarkerIds(edges, { id, defaultColor, defaultMarkerStart, defaultMarkerEnd, }) {\n    const ids = new Set();\n    return edges\n        .reduce((markers, edge) => {\n        [edge.markerStart || defaultMarkerStart, edge.markerEnd || defaultMarkerEnd].forEach((marker) => {\n            if (marker && typeof marker === 'object') {\n                const markerId = getMarkerId(marker, id);\n                if (!ids.has(markerId)) {\n                    markers.push({ id: markerId, color: marker.color || defaultColor, ...marker });\n                    ids.add(markerId);\n                }\n            }\n        });\n        return markers;\n    }, [])\n        .sort((a, b) => a.id.localeCompare(b.id));\n}\n\nfunction getNodeToolbarTransform(nodeRect, viewport, position, offset, align) {\n    let alignmentOffset = 0.5;\n    if (align === 'start') {\n        alignmentOffset = 0;\n    }\n    else if (align === 'end') {\n        alignmentOffset = 1;\n    }\n    /*\n     * position === Position.Top\n     * we set the x any y position of the toolbar based on the nodes position\n     */\n    let pos = [\n        (nodeRect.x + nodeRect.width * alignmentOffset) * viewport.zoom + viewport.x,\n        nodeRect.y * viewport.zoom + viewport.y - offset,\n    ];\n    // and than shift it based on the alignment. The shift values are in %.\n    let shift = [-100 * alignmentOffset, -100];\n    switch (position) {\n        case Position.Right:\n            pos = [\n                (nodeRect.x + nodeRect.width) * viewport.zoom + viewport.x + offset,\n                (nodeRect.y + nodeRect.height * alignmentOffset) * viewport.zoom + viewport.y,\n            ];\n            shift = [0, -100 * alignmentOffset];\n            break;\n        case Position.Bottom:\n            pos[1] = (nodeRect.y + nodeRect.height) * viewport.zoom + viewport.y + offset;\n            shift[1] = 0;\n            break;\n        case Position.Left:\n            pos = [\n                nodeRect.x * viewport.zoom + viewport.x - offset,\n                (nodeRect.y + nodeRect.height * alignmentOffset) * viewport.zoom + viewport.y,\n            ];\n            shift = [-100, -100 * alignmentOffset];\n            break;\n    }\n    return `translate(${pos[0]}px, ${pos[1]}px) translate(${shift[0]}%, ${shift[1]}%)`;\n}\n\nconst defaultOptions = {\n    nodeOrigin: [0, 0],\n    nodeExtent: infiniteExtent,\n    elevateNodesOnSelect: true,\n    defaults: {},\n};\nconst adoptUserNodesDefaultOptions = {\n    ...defaultOptions,\n    checkEquality: true,\n};\nfunction mergeObjects(base, incoming) {\n    const result = { ...base };\n    for (const key in incoming) {\n        if (incoming[key] !== undefined) {\n            // typecast is safe here, because we check for undefined\n            result[key] = incoming[key];\n        }\n    }\n    return result;\n}\nfunction updateAbsolutePositions(nodeLookup, parentLookup, options) {\n    const _options = mergeObjects(defaultOptions, options);\n    for (const node of nodeLookup.values()) {\n        if (node.parentId) {\n            updateChildNode(node, nodeLookup, parentLookup, _options);\n        }\n        else {\n            const positionWithOrigin = getNodePositionWithOrigin(node, _options.nodeOrigin);\n            const extent = isCoordinateExtent(node.extent) ? node.extent : _options.nodeExtent;\n            const clampedPosition = clampPosition(positionWithOrigin, extent, getNodeDimensions(node));\n            node.internals.positionAbsolute = clampedPosition;\n        }\n    }\n}\nfunction adoptUserNodes(nodes, nodeLookup, parentLookup, options) {\n    const _options = mergeObjects(adoptUserNodesDefaultOptions, options);\n    let nodesInitialized = nodes.length > 0;\n    const tmpLookup = new Map(nodeLookup);\n    const selectedNodeZ = _options?.elevateNodesOnSelect ? 1000 : 0;\n    nodeLookup.clear();\n    parentLookup.clear();\n    for (const userNode of nodes) {\n        let internalNode = tmpLookup.get(userNode.id);\n        if (_options.checkEquality && userNode === internalNode?.internals.userNode) {\n            nodeLookup.set(userNode.id, internalNode);\n        }\n        else {\n            const positionWithOrigin = getNodePositionWithOrigin(userNode, _options.nodeOrigin);\n            const extent = isCoordinateExtent(userNode.extent) ? userNode.extent : _options.nodeExtent;\n            const clampedPosition = clampPosition(positionWithOrigin, extent, getNodeDimensions(userNode));\n            internalNode = {\n                ..._options.defaults,\n                ...userNode,\n                measured: {\n                    width: userNode.measured?.width,\n                    height: userNode.measured?.height,\n                },\n                internals: {\n                    positionAbsolute: clampedPosition,\n                    // if user re-initializes the node or removes `measured` for whatever reason, we reset the handleBounds so that the node gets re-measured\n                    handleBounds: !userNode.measured ? undefined : internalNode?.internals.handleBounds,\n                    z: calculateZ(userNode, selectedNodeZ),\n                    userNode,\n                },\n            };\n            nodeLookup.set(userNode.id, internalNode);\n        }\n        if ((internalNode.measured === undefined ||\n            internalNode.measured.width === undefined ||\n            internalNode.measured.height === undefined) &&\n            !internalNode.hidden) {\n            nodesInitialized = false;\n        }\n        if (userNode.parentId) {\n            updateChildNode(internalNode, nodeLookup, parentLookup, options);\n        }\n    }\n    return nodesInitialized;\n}\nfunction updateParentLookup(node, parentLookup) {\n    if (!node.parentId) {\n        return;\n    }\n    const childNodes = parentLookup.get(node.parentId);\n    if (childNodes) {\n        childNodes.set(node.id, node);\n    }\n    else {\n        parentLookup.set(node.parentId, new Map([[node.id, node]]));\n    }\n}\n/**\n * Updates positionAbsolute and zIndex of a child node and the parentLookup.\n */\nfunction updateChildNode(node, nodeLookup, parentLookup, options) {\n    const { elevateNodesOnSelect, nodeOrigin, nodeExtent } = mergeObjects(defaultOptions, options);\n    const parentId = node.parentId;\n    const parentNode = nodeLookup.get(parentId);\n    if (!parentNode) {\n        console.warn(`Parent node ${parentId} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);\n        return;\n    }\n    updateParentLookup(node, parentLookup);\n    const selectedNodeZ = elevateNodesOnSelect ? 1000 : 0;\n    const { x, y, z } = calculateChildXYZ(node, parentNode, nodeOrigin, nodeExtent, selectedNodeZ);\n    const { positionAbsolute } = node.internals;\n    const positionChanged = x !== positionAbsolute.x || y !== positionAbsolute.y;\n    if (positionChanged || z !== node.internals.z) {\n        // we create a new object to mark the node as updated\n        nodeLookup.set(node.id, {\n            ...node,\n            internals: {\n                ...node.internals,\n                positionAbsolute: positionChanged ? { x, y } : positionAbsolute,\n                z,\n            },\n        });\n    }\n}\nfunction calculateZ(node, selectedNodeZ) {\n    return (isNumeric(node.zIndex) ? node.zIndex : 0) + (node.selected ? selectedNodeZ : 0);\n}\nfunction calculateChildXYZ(childNode, parentNode, nodeOrigin, nodeExtent, selectedNodeZ) {\n    const { x: parentX, y: parentY } = parentNode.internals.positionAbsolute;\n    const childDimensions = getNodeDimensions(childNode);\n    const positionWithOrigin = getNodePositionWithOrigin(childNode, nodeOrigin);\n    const clampedPosition = isCoordinateExtent(childNode.extent)\n        ? clampPosition(positionWithOrigin, childNode.extent, childDimensions)\n        : positionWithOrigin;\n    let absolutePosition = clampPosition({ x: parentX + clampedPosition.x, y: parentY + clampedPosition.y }, nodeExtent, childDimensions);\n    if (childNode.extent === 'parent') {\n        absolutePosition = clampPositionToParent(absolutePosition, childDimensions, parentNode);\n    }\n    const childZ = calculateZ(childNode, selectedNodeZ);\n    const parentZ = parentNode.internals.z ?? 0;\n    return {\n        x: absolutePosition.x,\n        y: absolutePosition.y,\n        z: parentZ > childZ ? parentZ : childZ,\n    };\n}\nfunction handleExpandParent(children, nodeLookup, parentLookup, nodeOrigin = [0, 0]) {\n    const changes = [];\n    const parentExpansions = new Map();\n    // determine the expanded rectangle the child nodes would take for each parent\n    for (const child of children) {\n        const parent = nodeLookup.get(child.parentId);\n        if (!parent) {\n            continue;\n        }\n        const parentRect = parentExpansions.get(child.parentId)?.expandedRect ?? nodeToRect(parent);\n        const expandedRect = getBoundsOfRects(parentRect, child.rect);\n        parentExpansions.set(child.parentId, { expandedRect, parent });\n    }\n    if (parentExpansions.size > 0) {\n        parentExpansions.forEach(({ expandedRect, parent }, parentId) => {\n            // determine the position & dimensions of the parent\n            const positionAbsolute = parent.internals.positionAbsolute;\n            const dimensions = getNodeDimensions(parent);\n            const origin = parent.origin ?? nodeOrigin;\n            // determine how much the parent expands in width and position\n            const xChange = expandedRect.x < positionAbsolute.x ? Math.round(Math.abs(positionAbsolute.x - expandedRect.x)) : 0;\n            const yChange = expandedRect.y < positionAbsolute.y ? Math.round(Math.abs(positionAbsolute.y - expandedRect.y)) : 0;\n            const newWidth = Math.max(dimensions.width, Math.round(expandedRect.width));\n            const newHeight = Math.max(dimensions.height, Math.round(expandedRect.height));\n            const widthChange = (newWidth - dimensions.width) * origin[0];\n            const heightChange = (newHeight - dimensions.height) * origin[1];\n            // We need to correct the position of the parent node if the origin is not [0,0]\n            if (xChange > 0 || yChange > 0 || widthChange || heightChange) {\n                changes.push({\n                    id: parentId,\n                    type: 'position',\n                    position: {\n                        x: parent.position.x - xChange + widthChange,\n                        y: parent.position.y - yChange + heightChange,\n                    },\n                });\n                /*\n                 * We move all child nodes in the oppsite direction\n                 * so the x,y changes of the parent do not move the children\n                 */\n                parentLookup.get(parentId)?.forEach((childNode) => {\n                    if (!children.some((child) => child.id === childNode.id)) {\n                        changes.push({\n                            id: childNode.id,\n                            type: 'position',\n                            position: {\n                                x: childNode.position.x + xChange,\n                                y: childNode.position.y + yChange,\n                            },\n                        });\n                    }\n                });\n            }\n            // We need to correct the dimensions of the parent node if the origin is not [0,0]\n            if (dimensions.width < expandedRect.width || dimensions.height < expandedRect.height || xChange || yChange) {\n                changes.push({\n                    id: parentId,\n                    type: 'dimensions',\n                    setAttributes: true,\n                    dimensions: {\n                        width: newWidth + (xChange ? origin[0] * xChange - widthChange : 0),\n                        height: newHeight + (yChange ? origin[1] * yChange - heightChange : 0),\n                    },\n                });\n            }\n        });\n    }\n    return changes;\n}\nfunction updateNodeInternals(updates, nodeLookup, parentLookup, domNode, nodeOrigin, nodeExtent) {\n    const viewportNode = domNode?.querySelector('.xyflow__viewport');\n    let updatedInternals = false;\n    if (!viewportNode) {\n        return { changes: [], updatedInternals };\n    }\n    const changes = [];\n    const style = window.getComputedStyle(viewportNode);\n    const { m22: zoom } = new window.DOMMatrixReadOnly(style.transform);\n    // in this array we collect nodes, that might trigger changes (like expanding parent)\n    const parentExpandChildren = [];\n    for (const update of updates.values()) {\n        const node = nodeLookup.get(update.id);\n        if (!node) {\n            continue;\n        }\n        if (node.hidden) {\n            nodeLookup.set(node.id, {\n                ...node,\n                internals: {\n                    ...node.internals,\n                    handleBounds: undefined,\n                },\n            });\n            updatedInternals = true;\n            continue;\n        }\n        const dimensions = getDimensions(update.nodeElement);\n        const dimensionChanged = node.measured.width !== dimensions.width || node.measured.height !== dimensions.height;\n        const doUpdate = !!(dimensions.width &&\n            dimensions.height &&\n            (dimensionChanged || !node.internals.handleBounds || update.force));\n        if (doUpdate) {\n            const nodeBounds = update.nodeElement.getBoundingClientRect();\n            const extent = isCoordinateExtent(node.extent) ? node.extent : nodeExtent;\n            let { positionAbsolute } = node.internals;\n            if (node.parentId && node.extent === 'parent') {\n                positionAbsolute = clampPositionToParent(positionAbsolute, dimensions, nodeLookup.get(node.parentId));\n            }\n            else if (extent) {\n                positionAbsolute = clampPosition(positionAbsolute, extent, dimensions);\n            }\n            const newNode = {\n                ...node,\n                measured: dimensions,\n                internals: {\n                    ...node.internals,\n                    positionAbsolute,\n                    handleBounds: {\n                        source: getHandleBounds('source', update.nodeElement, nodeBounds, zoom, node.id),\n                        target: getHandleBounds('target', update.nodeElement, nodeBounds, zoom, node.id),\n                    },\n                },\n            };\n            nodeLookup.set(node.id, newNode);\n            if (node.parentId) {\n                updateChildNode(newNode, nodeLookup, parentLookup, { nodeOrigin });\n            }\n            updatedInternals = true;\n            if (dimensionChanged) {\n                changes.push({\n                    id: node.id,\n                    type: 'dimensions',\n                    dimensions,\n                });\n                if (node.expandParent && node.parentId) {\n                    parentExpandChildren.push({\n                        id: node.id,\n                        parentId: node.parentId,\n                        rect: nodeToRect(newNode, nodeOrigin),\n                    });\n                }\n            }\n        }\n    }\n    if (parentExpandChildren.length > 0) {\n        const parentExpandChanges = handleExpandParent(parentExpandChildren, nodeLookup, parentLookup, nodeOrigin);\n        changes.push(...parentExpandChanges);\n    }\n    return { changes, updatedInternals };\n}\nasync function panBy({ delta, panZoom, transform, translateExtent, width, height, }) {\n    if (!panZoom || (!delta.x && !delta.y)) {\n        return Promise.resolve(false);\n    }\n    const nextViewport = await panZoom.setViewportConstrained({\n        x: transform[0] + delta.x,\n        y: transform[1] + delta.y,\n        zoom: transform[2],\n    }, [\n        [0, 0],\n        [width, height],\n    ], translateExtent);\n    const transformChanged = !!nextViewport &&\n        (nextViewport.x !== transform[0] || nextViewport.y !== transform[1] || nextViewport.k !== transform[2]);\n    return Promise.resolve(transformChanged);\n}\n/**\n * this function adds the connection to the connectionLookup\n * at the following keys: nodeId-type-handleId, nodeId-type and nodeId\n * @param type type of the connection\n * @param connection connection that should be added to the lookup\n * @param connectionKey at which key the connection should be added\n * @param connectionLookup reference to the connection lookup\n * @param nodeId nodeId of the connection\n * @param handleId handleId of the conneciton\n */\nfunction addConnectionToLookup(type, connection, connectionKey, connectionLookup, nodeId, handleId) {\n    /*\n     * We add the connection to the connectionLookup at the following keys\n     * 1. nodeId, 2. nodeId-type, 3. nodeId-type-handleId\n     * If the key already exists, we add the connection to the existing map\n     */\n    let key = nodeId;\n    const nodeMap = connectionLookup.get(key) || new Map();\n    connectionLookup.set(key, nodeMap.set(connectionKey, connection));\n    key = `${nodeId}-${type}`;\n    const typeMap = connectionLookup.get(key) || new Map();\n    connectionLookup.set(key, typeMap.set(connectionKey, connection));\n    if (handleId) {\n        key = `${nodeId}-${type}-${handleId}`;\n        const handleMap = connectionLookup.get(key) || new Map();\n        connectionLookup.set(key, handleMap.set(connectionKey, connection));\n    }\n}\nfunction updateConnectionLookup(connectionLookup, edgeLookup, edges) {\n    connectionLookup.clear();\n    edgeLookup.clear();\n    for (const edge of edges) {\n        const { source: sourceNode, target: targetNode, sourceHandle = null, targetHandle = null } = edge;\n        const connection = { edgeId: edge.id, source: sourceNode, target: targetNode, sourceHandle, targetHandle };\n        const sourceKey = `${sourceNode}-${sourceHandle}--${targetNode}-${targetHandle}`;\n        const targetKey = `${targetNode}-${targetHandle}--${sourceNode}-${sourceHandle}`;\n        addConnectionToLookup('source', connection, targetKey, connectionLookup, sourceNode, sourceHandle);\n        addConnectionToLookup('target', connection, sourceKey, connectionLookup, targetNode, targetHandle);\n        edgeLookup.set(edge.id, edge);\n    }\n}\n\nfunction shallowNodeData(a, b) {\n    if (a === null || b === null) {\n        return false;\n    }\n    const _a = Array.isArray(a) ? a : [a];\n    const _b = Array.isArray(b) ? b : [b];\n    if (_a.length !== _b.length) {\n        return false;\n    }\n    for (let i = 0; i < _a.length; i++) {\n        if (_a[i].id !== _b[i].id || _a[i].type !== _b[i].type || !Object.is(_a[i].data, _b[i].data)) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction isParentSelected(node, nodeLookup) {\n    if (!node.parentId) {\n        return false;\n    }\n    const parentNode = nodeLookup.get(node.parentId);\n    if (!parentNode) {\n        return false;\n    }\n    if (parentNode.selected) {\n        return true;\n    }\n    return isParentSelected(parentNode, nodeLookup);\n}\nfunction hasSelector(target, selector, domNode) {\n    let current = target;\n    do {\n        if (current?.matches?.(selector))\n            return true;\n        if (current === domNode)\n            return false;\n        current = current?.parentElement;\n    } while (current);\n    return false;\n}\n// looks for all selected nodes and created a NodeDragItem for each of them\nfunction getDragItems(nodeLookup, nodesDraggable, mousePos, nodeId) {\n    const dragItems = new Map();\n    for (const [id, node] of nodeLookup) {\n        if ((node.selected || node.id === nodeId) &&\n            (!node.parentId || !isParentSelected(node, nodeLookup)) &&\n            (node.draggable || (nodesDraggable && typeof node.draggable === 'undefined'))) {\n            const internalNode = nodeLookup.get(id);\n            if (internalNode) {\n                dragItems.set(id, {\n                    id,\n                    position: internalNode.position || { x: 0, y: 0 },\n                    distance: {\n                        x: mousePos.x - internalNode.internals.positionAbsolute.x,\n                        y: mousePos.y - internalNode.internals.positionAbsolute.y,\n                    },\n                    extent: internalNode.extent,\n                    parentId: internalNode.parentId,\n                    origin: internalNode.origin,\n                    expandParent: internalNode.expandParent,\n                    internals: {\n                        positionAbsolute: internalNode.internals.positionAbsolute || { x: 0, y: 0 },\n                    },\n                    measured: {\n                        width: internalNode.measured.width ?? 0,\n                        height: internalNode.measured.height ?? 0,\n                    },\n                });\n            }\n        }\n    }\n    return dragItems;\n}\n/*\n * returns two params:\n * 1. the dragged node (or the first of the list, if we are dragging a node selection)\n * 2. array of selected nodes (for multi selections)\n */\nfunction getEventHandlerParams({ nodeId, dragItems, nodeLookup, dragging = true, }) {\n    const nodesFromDragItems = [];\n    for (const [id, dragItem] of dragItems) {\n        const node = nodeLookup.get(id)?.internals.userNode;\n        if (node) {\n            nodesFromDragItems.push({\n                ...node,\n                position: dragItem.position,\n                dragging,\n            });\n        }\n    }\n    if (!nodeId) {\n        return [nodesFromDragItems[0], nodesFromDragItems];\n    }\n    const node = nodeLookup.get(nodeId)?.internals.userNode;\n    return [\n        !node\n            ? nodesFromDragItems[0]\n            : {\n                ...node,\n                position: dragItems.get(nodeId)?.position || node.position,\n                dragging,\n            },\n        nodesFromDragItems,\n    ];\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction XYDrag({ onNodeMouseDown, getStoreItems, onDragStart, onDrag, onDragStop, }) {\n    let lastPos = { x: null, y: null };\n    let autoPanId = 0;\n    let dragItems = new Map();\n    let autoPanStarted = false;\n    let mousePosition = { x: 0, y: 0 };\n    let containerBounds = null;\n    let dragStarted = false;\n    let d3Selection = null;\n    let abortDrag = false; // prevents unintentional dragging on multitouch\n    // public functions\n    function update({ noDragClassName, handleSelector, domNode, isSelectable, nodeId, nodeClickDistance = 0, }) {\n        d3Selection = select(domNode);\n        function updateNodes({ x, y }, dragEvent) {\n            const { nodeLookup, nodeExtent, snapGrid, snapToGrid, nodeOrigin, onNodeDrag, onSelectionDrag, onError, updateNodePositions, } = getStoreItems();\n            lastPos = { x, y };\n            let hasChange = false;\n            let nodesBox = { x: 0, y: 0, x2: 0, y2: 0 };\n            if (dragItems.size > 1 && nodeExtent) {\n                const rect = getInternalNodesBounds(dragItems);\n                nodesBox = rectToBox(rect);\n            }\n            for (const [id, dragItem] of dragItems) {\n                if (!nodeLookup.has(id)) {\n                    /*\n                     * if the node is not in the nodeLookup anymore, it was probably deleted while dragging\n                     * and we don't need to update it anymore\n                     */\n                    continue;\n                }\n                let nextPosition = { x: x - dragItem.distance.x, y: y - dragItem.distance.y };\n                if (snapToGrid) {\n                    nextPosition = snapPosition(nextPosition, snapGrid);\n                }\n                /*\n                 * if there is selection with multiple nodes and a node extent is set, we need to adjust the node extent for each node\n                 * based on its position so that the node stays at it's position relative to the selection.\n                 */\n                let adjustedNodeExtent = [\n                    [nodeExtent[0][0], nodeExtent[0][1]],\n                    [nodeExtent[1][0], nodeExtent[1][1]],\n                ];\n                if (dragItems.size > 1 && nodeExtent && !dragItem.extent) {\n                    const { positionAbsolute } = dragItem.internals;\n                    const x1 = positionAbsolute.x - nodesBox.x + nodeExtent[0][0];\n                    const x2 = positionAbsolute.x + dragItem.measured.width - nodesBox.x2 + nodeExtent[1][0];\n                    const y1 = positionAbsolute.y - nodesBox.y + nodeExtent[0][1];\n                    const y2 = positionAbsolute.y + dragItem.measured.height - nodesBox.y2 + nodeExtent[1][1];\n                    adjustedNodeExtent = [\n                        [x1, y1],\n                        [x2, y2],\n                    ];\n                }\n                const { position, positionAbsolute } = calculateNodePosition({\n                    nodeId: id,\n                    nextPosition,\n                    nodeLookup,\n                    nodeExtent: adjustedNodeExtent,\n                    nodeOrigin,\n                    onError,\n                });\n                // we want to make sure that we only fire a change event when there is a change\n                hasChange = hasChange || dragItem.position.x !== position.x || dragItem.position.y !== position.y;\n                dragItem.position = position;\n                dragItem.internals.positionAbsolute = positionAbsolute;\n            }\n            if (!hasChange) {\n                return;\n            }\n            updateNodePositions(dragItems, true);\n            if (dragEvent && (onDrag || onNodeDrag || (!nodeId && onSelectionDrag))) {\n                const [currentNode, currentNodes] = getEventHandlerParams({\n                    nodeId,\n                    dragItems,\n                    nodeLookup,\n                });\n                onDrag?.(dragEvent, dragItems, currentNode, currentNodes);\n                onNodeDrag?.(dragEvent, currentNode, currentNodes);\n                if (!nodeId) {\n                    onSelectionDrag?.(dragEvent, currentNodes);\n                }\n            }\n        }\n        async function autoPan() {\n            if (!containerBounds) {\n                return;\n            }\n            const { transform, panBy, autoPanSpeed, autoPanOnNodeDrag } = getStoreItems();\n            if (!autoPanOnNodeDrag) {\n                autoPanStarted = false;\n                cancelAnimationFrame(autoPanId);\n                return;\n            }\n            const [xMovement, yMovement] = calcAutoPan(mousePosition, containerBounds, autoPanSpeed);\n            if (xMovement !== 0 || yMovement !== 0) {\n                lastPos.x = (lastPos.x ?? 0) - xMovement / transform[2];\n                lastPos.y = (lastPos.y ?? 0) - yMovement / transform[2];\n                if (await panBy({ x: xMovement, y: yMovement })) {\n                    updateNodes(lastPos, null);\n                }\n            }\n            autoPanId = requestAnimationFrame(autoPan);\n        }\n        function startDrag(event) {\n            const { nodeLookup, multiSelectionActive, nodesDraggable, transform, snapGrid, snapToGrid, selectNodesOnDrag, onNodeDragStart, onSelectionDragStart, unselectNodesAndEdges, } = getStoreItems();\n            dragStarted = true;\n            if ((!selectNodesOnDrag || !isSelectable) && !multiSelectionActive && nodeId) {\n                if (!nodeLookup.get(nodeId)?.selected) {\n                    // we need to reset selected nodes when selectNodesOnDrag=false\n                    unselectNodesAndEdges();\n                }\n            }\n            if (isSelectable && selectNodesOnDrag && nodeId) {\n                onNodeMouseDown?.(nodeId);\n            }\n            const pointerPos = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid, containerBounds });\n            lastPos = pointerPos;\n            dragItems = getDragItems(nodeLookup, nodesDraggable, pointerPos, nodeId);\n            if (dragItems.size > 0 && (onDragStart || onNodeDragStart || (!nodeId && onSelectionDragStart))) {\n                const [currentNode, currentNodes] = getEventHandlerParams({\n                    nodeId,\n                    dragItems,\n                    nodeLookup,\n                });\n                onDragStart?.(event.sourceEvent, dragItems, currentNode, currentNodes);\n                onNodeDragStart?.(event.sourceEvent, currentNode, currentNodes);\n                if (!nodeId) {\n                    onSelectionDragStart?.(event.sourceEvent, currentNodes);\n                }\n            }\n        }\n        const d3DragInstance = drag()\n            .clickDistance(nodeClickDistance)\n            .on('start', (event) => {\n            const { domNode, nodeDragThreshold, transform, snapGrid, snapToGrid } = getStoreItems();\n            containerBounds = domNode?.getBoundingClientRect() || null;\n            abortDrag = false;\n            if (nodeDragThreshold === 0) {\n                startDrag(event);\n            }\n            const pointerPos = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid, containerBounds });\n            lastPos = pointerPos;\n            mousePosition = getEventPosition(event.sourceEvent, containerBounds);\n        })\n            .on('drag', (event) => {\n            const { autoPanOnNodeDrag, transform, snapGrid, snapToGrid, nodeDragThreshold, nodeLookup } = getStoreItems();\n            const pointerPos = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid, containerBounds });\n            if ((event.sourceEvent.type === 'touchmove' && event.sourceEvent.touches.length > 1) ||\n                // if user deletes a node while dragging, we need to abort the drag to prevent errors\n                (nodeId && !nodeLookup.has(nodeId))) {\n                abortDrag = true;\n            }\n            if (abortDrag) {\n                return;\n            }\n            if (!autoPanStarted && autoPanOnNodeDrag && dragStarted) {\n                autoPanStarted = true;\n                autoPan();\n            }\n            if (!dragStarted) {\n                const x = pointerPos.xSnapped - (lastPos.x ?? 0);\n                const y = pointerPos.ySnapped - (lastPos.y ?? 0);\n                const distance = Math.sqrt(x * x + y * y);\n                if (distance > nodeDragThreshold) {\n                    startDrag(event);\n                }\n            }\n            // skip events without movement\n            if ((lastPos.x !== pointerPos.xSnapped || lastPos.y !== pointerPos.ySnapped) && dragItems && dragStarted) {\n                // dragEvent = event.sourceEvent as MouseEvent;\n                mousePosition = getEventPosition(event.sourceEvent, containerBounds);\n                updateNodes(pointerPos, event.sourceEvent);\n            }\n        })\n            .on('end', (event) => {\n            if (!dragStarted || abortDrag) {\n                return;\n            }\n            autoPanStarted = false;\n            dragStarted = false;\n            cancelAnimationFrame(autoPanId);\n            if (dragItems.size > 0) {\n                const { nodeLookup, updateNodePositions, onNodeDragStop, onSelectionDragStop } = getStoreItems();\n                updateNodePositions(dragItems, false);\n                if (onDragStop || onNodeDragStop || (!nodeId && onSelectionDragStop)) {\n                    const [currentNode, currentNodes] = getEventHandlerParams({\n                        nodeId,\n                        dragItems,\n                        nodeLookup,\n                        dragging: false,\n                    });\n                    onDragStop?.(event.sourceEvent, dragItems, currentNode, currentNodes);\n                    onNodeDragStop?.(event.sourceEvent, currentNode, currentNodes);\n                    if (!nodeId) {\n                        onSelectionDragStop?.(event.sourceEvent, currentNodes);\n                    }\n                }\n            }\n        })\n            .filter((event) => {\n            const target = event.target;\n            const isDraggable = !event.button &&\n                (!noDragClassName || !hasSelector(target, `.${noDragClassName}`, domNode)) &&\n                (!handleSelector || hasSelector(target, handleSelector, domNode));\n            return isDraggable;\n        });\n        d3Selection.call(d3DragInstance);\n    }\n    function destroy() {\n        d3Selection?.on('.drag', null);\n    }\n    return {\n        update,\n        destroy,\n    };\n}\n\nfunction getNodesWithinDistance(position, nodeLookup, distance) {\n    const nodes = [];\n    const rect = {\n        x: position.x - distance,\n        y: position.y - distance,\n        width: distance * 2,\n        height: distance * 2,\n    };\n    for (const node of nodeLookup.values()) {\n        if (getOverlappingArea(rect, nodeToRect(node)) > 0) {\n            nodes.push(node);\n        }\n    }\n    return nodes;\n}\n/*\n * this distance is used for the area around the user pointer\n * while doing a connection for finding the closest nodes\n */\nconst ADDITIONAL_DISTANCE = 250;\nfunction getClosestHandle(position, connectionRadius, nodeLookup, fromHandle) {\n    let closestHandles = [];\n    let minDistance = Infinity;\n    const closeNodes = getNodesWithinDistance(position, nodeLookup, connectionRadius + ADDITIONAL_DISTANCE);\n    for (const node of closeNodes) {\n        const allHandles = [...(node.internals.handleBounds?.source ?? []), ...(node.internals.handleBounds?.target ?? [])];\n        for (const handle of allHandles) {\n            // if the handle is the same as the fromHandle we skip it\n            if (fromHandle.nodeId === handle.nodeId && fromHandle.type === handle.type && fromHandle.id === handle.id) {\n                continue;\n            }\n            // determine absolute position of the handle\n            const { x, y } = getHandlePosition(node, handle, handle.position, true);\n            const distance = Math.sqrt(Math.pow(x - position.x, 2) + Math.pow(y - position.y, 2));\n            if (distance > connectionRadius) {\n                continue;\n            }\n            if (distance < minDistance) {\n                closestHandles = [{ ...handle, x, y }];\n                minDistance = distance;\n            }\n            else if (distance === minDistance) {\n                // when multiple handles are on the same distance we collect all of them\n                closestHandles.push({ ...handle, x, y });\n            }\n        }\n    }\n    if (!closestHandles.length) {\n        return null;\n    }\n    // when multiple handles overlay each other we prefer the opposite handle\n    if (closestHandles.length > 1) {\n        const oppositeHandleType = fromHandle.type === 'source' ? 'target' : 'source';\n        return closestHandles.find((handle) => handle.type === oppositeHandleType) ?? closestHandles[0];\n    }\n    return closestHandles[0];\n}\nfunction getHandle(nodeId, handleType, handleId, nodeLookup, connectionMode, withAbsolutePosition = false) {\n    const node = nodeLookup.get(nodeId);\n    if (!node) {\n        return null;\n    }\n    const handles = connectionMode === 'strict'\n        ? node.internals.handleBounds?.[handleType]\n        : [...(node.internals.handleBounds?.source ?? []), ...(node.internals.handleBounds?.target ?? [])];\n    const handle = (handleId ? handles?.find((h) => h.id === handleId) : handles?.[0]) ?? null;\n    return handle && withAbsolutePosition\n        ? { ...handle, ...getHandlePosition(node, handle, handle.position, true) }\n        : handle;\n}\nfunction getHandleType(edgeUpdaterType, handleDomNode) {\n    if (edgeUpdaterType) {\n        return edgeUpdaterType;\n    }\n    else if (handleDomNode?.classList.contains('target')) {\n        return 'target';\n    }\n    else if (handleDomNode?.classList.contains('source')) {\n        return 'source';\n    }\n    return null;\n}\nfunction isConnectionValid(isInsideConnectionRadius, isHandleValid) {\n    let isValid = null;\n    if (isHandleValid) {\n        isValid = true;\n    }\n    else if (isInsideConnectionRadius && !isHandleValid) {\n        isValid = false;\n    }\n    return isValid;\n}\n\nconst alwaysValid = () => true;\nfunction onPointerDown(event, { connectionMode, connectionRadius, handleId, nodeId, edgeUpdaterType, isTarget, domNode, nodeLookup, lib, autoPanOnConnect, flowId, panBy, cancelConnection, onConnectStart, onConnect, onConnectEnd, isValidConnection = alwaysValid, onReconnectEnd, updateConnection, getTransform, getFromHandle, autoPanSpeed, }) {\n    // when xyflow is used inside a shadow root we can't use document\n    const doc = getHostForElement(event.target);\n    let autoPanId = 0;\n    let closestHandle;\n    const { x, y } = getEventPosition(event);\n    const clickedHandle = doc?.elementFromPoint(x, y);\n    const handleType = getHandleType(edgeUpdaterType, clickedHandle);\n    const containerBounds = domNode?.getBoundingClientRect();\n    if (!containerBounds || !handleType) {\n        return;\n    }\n    const fromHandleInternal = getHandle(nodeId, handleType, handleId, nodeLookup, connectionMode);\n    if (!fromHandleInternal) {\n        return;\n    }\n    let position = getEventPosition(event, containerBounds);\n    let autoPanStarted = false;\n    let connection = null;\n    let isValid = false;\n    let handleDomNode = null;\n    // when the user is moving the mouse close to the edge of the canvas while connecting we move the canvas\n    function autoPan() {\n        if (!autoPanOnConnect || !containerBounds) {\n            return;\n        }\n        const [x, y] = calcAutoPan(position, containerBounds, autoPanSpeed);\n        panBy({ x, y });\n        autoPanId = requestAnimationFrame(autoPan);\n    }\n    // Stays the same for all consecutive pointermove events\n    const fromHandle = {\n        ...fromHandleInternal,\n        nodeId,\n        type: handleType,\n        position: fromHandleInternal.position,\n    };\n    const fromNodeInternal = nodeLookup.get(nodeId);\n    const from = getHandlePosition(fromNodeInternal, fromHandle, Position.Left, true);\n    const newConnection = {\n        inProgress: true,\n        isValid: null,\n        from,\n        fromHandle,\n        fromPosition: fromHandle.position,\n        fromNode: fromNodeInternal,\n        to: position,\n        toHandle: null,\n        toPosition: oppositePosition[fromHandle.position],\n        toNode: null,\n    };\n    updateConnection(newConnection);\n    let previousConnection = newConnection;\n    onConnectStart?.(event, { nodeId, handleId, handleType });\n    function onPointerMove(event) {\n        if (!getFromHandle() || !fromHandle) {\n            onPointerUp(event);\n            return;\n        }\n        const transform = getTransform();\n        position = getEventPosition(event, containerBounds);\n        closestHandle = getClosestHandle(pointToRendererPoint(position, transform, false, [1, 1]), connectionRadius, nodeLookup, fromHandle);\n        if (!autoPanStarted) {\n            autoPan();\n            autoPanStarted = true;\n        }\n        const result = isValidHandle(event, {\n            handle: closestHandle,\n            connectionMode,\n            fromNodeId: nodeId,\n            fromHandleId: handleId,\n            fromType: isTarget ? 'target' : 'source',\n            isValidConnection,\n            doc,\n            lib,\n            flowId,\n            nodeLookup,\n        });\n        handleDomNode = result.handleDomNode;\n        connection = result.connection;\n        isValid = isConnectionValid(!!closestHandle, result.isValid);\n        const newConnection = {\n            // from stays the same\n            ...previousConnection,\n            isValid,\n            to: closestHandle && isValid\n                ? rendererPointToPoint({ x: closestHandle.x, y: closestHandle.y }, transform)\n                : position,\n            toHandle: result.toHandle,\n            toPosition: isValid && result.toHandle ? result.toHandle.position : oppositePosition[fromHandle.position],\n            toNode: result.toHandle ? nodeLookup.get(result.toHandle.nodeId) : null,\n        };\n        /*\n         * we don't want to trigger an update when the connection\n         * is snapped to the same handle as before\n         */\n        if (isValid &&\n            closestHandle &&\n            previousConnection.toHandle &&\n            newConnection.toHandle &&\n            previousConnection.toHandle.type === newConnection.toHandle.type &&\n            previousConnection.toHandle.nodeId === newConnection.toHandle.nodeId &&\n            previousConnection.toHandle.id === newConnection.toHandle.id &&\n            previousConnection.to.x === newConnection.to.x &&\n            previousConnection.to.y === newConnection.to.y) {\n            return;\n        }\n        updateConnection(newConnection);\n        previousConnection = newConnection;\n    }\n    function onPointerUp(event) {\n        if ((closestHandle || handleDomNode) && connection && isValid) {\n            onConnect?.(connection);\n        }\n        /*\n         * it's important to get a fresh reference from the store here\n         * in order to get the latest state of onConnectEnd\n         */\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const { inProgress, ...connectionState } = previousConnection;\n        const finalConnectionState = {\n            ...connectionState,\n            toPosition: previousConnection.toHandle ? previousConnection.toPosition : null,\n        };\n        onConnectEnd?.(event, finalConnectionState);\n        if (edgeUpdaterType) {\n            onReconnectEnd?.(event, finalConnectionState);\n        }\n        cancelConnection();\n        cancelAnimationFrame(autoPanId);\n        autoPanStarted = false;\n        isValid = false;\n        connection = null;\n        handleDomNode = null;\n        doc.removeEventListener('mousemove', onPointerMove);\n        doc.removeEventListener('mouseup', onPointerUp);\n        doc.removeEventListener('touchmove', onPointerMove);\n        doc.removeEventListener('touchend', onPointerUp);\n    }\n    doc.addEventListener('mousemove', onPointerMove);\n    doc.addEventListener('mouseup', onPointerUp);\n    doc.addEventListener('touchmove', onPointerMove);\n    doc.addEventListener('touchend', onPointerUp);\n}\n// checks if  and returns connection in fom of an object { source: 123, target: 312 }\nfunction isValidHandle(event, { handle, connectionMode, fromNodeId, fromHandleId, fromType, doc, lib, flowId, isValidConnection = alwaysValid, nodeLookup, }) {\n    const isTarget = fromType === 'target';\n    const handleDomNode = handle\n        ? doc.querySelector(`.${lib}-flow__handle[data-id=\"${flowId}-${handle?.nodeId}-${handle?.id}-${handle?.type}\"]`)\n        : null;\n    const { x, y } = getEventPosition(event);\n    const handleBelow = doc.elementFromPoint(x, y);\n    /*\n     * we always want to prioritize the handle below the mouse cursor over the closest distance handle,\n     * because it could be that the center of another handle is closer to the mouse pointer than the handle below the cursor\n     */\n    const handleToCheck = handleBelow?.classList.contains(`${lib}-flow__handle`) ? handleBelow : handleDomNode;\n    const result = {\n        handleDomNode: handleToCheck,\n        isValid: false,\n        connection: null,\n        toHandle: null,\n    };\n    if (handleToCheck) {\n        const handleType = getHandleType(undefined, handleToCheck);\n        const handleNodeId = handleToCheck.getAttribute('data-nodeid');\n        const handleId = handleToCheck.getAttribute('data-handleid');\n        const connectable = handleToCheck.classList.contains('connectable');\n        const connectableEnd = handleToCheck.classList.contains('connectableend');\n        if (!handleNodeId || !handleType) {\n            return result;\n        }\n        const connection = {\n            source: isTarget ? handleNodeId : fromNodeId,\n            sourceHandle: isTarget ? handleId : fromHandleId,\n            target: isTarget ? fromNodeId : handleNodeId,\n            targetHandle: isTarget ? fromHandleId : handleId,\n        };\n        result.connection = connection;\n        const isConnectable = connectable && connectableEnd;\n        // in strict mode we don't allow target to target or source to source connections\n        const isValid = isConnectable &&\n            (connectionMode === ConnectionMode.Strict\n                ? (isTarget && handleType === 'source') || (!isTarget && handleType === 'target')\n                : handleNodeId !== fromNodeId || handleId !== fromHandleId);\n        result.isValid = isValid && isValidConnection(connection);\n        result.toHandle = getHandle(handleNodeId, handleType, handleId, nodeLookup, connectionMode, false);\n    }\n    return result;\n}\nconst XYHandle = {\n    onPointerDown,\n    isValid: isValidHandle,\n};\n\nfunction XYMinimap({ domNode, panZoom, getTransform, getViewScale }) {\n    const selection = select(domNode);\n    function update({ translateExtent, width, height, zoomStep = 10, pannable = true, zoomable = true, inversePan = false, }) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const zoomHandler = (event) => {\n            const transform = getTransform();\n            if (event.sourceEvent.type !== 'wheel' || !panZoom) {\n                return;\n            }\n            const pinchDelta = -event.sourceEvent.deltaY *\n                (event.sourceEvent.deltaMode === 1 ? 0.05 : event.sourceEvent.deltaMode ? 1 : 0.002) *\n                zoomStep;\n            const nextZoom = transform[2] * Math.pow(2, pinchDelta);\n            panZoom.scaleTo(nextZoom);\n        };\n        let panStart = [0, 0];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const panStartHandler = (event) => {\n            if (event.sourceEvent.type === 'mousedown' || event.sourceEvent.type === 'touchstart') {\n                panStart = [\n                    event.sourceEvent.clientX ?? event.sourceEvent.touches[0].clientX,\n                    event.sourceEvent.clientY ?? event.sourceEvent.touches[0].clientY,\n                ];\n            }\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const panHandler = (event) => {\n            const transform = getTransform();\n            if ((event.sourceEvent.type !== 'mousemove' && event.sourceEvent.type !== 'touchmove') || !panZoom) {\n                return;\n            }\n            const panCurrent = [\n                event.sourceEvent.clientX ?? event.sourceEvent.touches[0].clientX,\n                event.sourceEvent.clientY ?? event.sourceEvent.touches[0].clientY,\n            ];\n            const panDelta = [panCurrent[0] - panStart[0], panCurrent[1] - panStart[1]];\n            panStart = panCurrent;\n            const moveScale = getViewScale() * Math.max(transform[2], Math.log(transform[2])) * (inversePan ? -1 : 1);\n            const position = {\n                x: transform[0] - panDelta[0] * moveScale,\n                y: transform[1] - panDelta[1] * moveScale,\n            };\n            const extent = [\n                [0, 0],\n                [width, height],\n            ];\n            panZoom.setViewportConstrained({\n                x: position.x,\n                y: position.y,\n                zoom: transform[2],\n            }, extent, translateExtent);\n        };\n        const zoomAndPanHandler = zoom()\n            .on('start', panStartHandler)\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            .on('zoom', pannable ? panHandler : null)\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            .on('zoom.wheel', zoomable ? zoomHandler : null);\n        selection.call(zoomAndPanHandler, {});\n    }\n    function destroy() {\n        selection.on('zoom', null);\n    }\n    return {\n        update,\n        destroy,\n        pointer,\n    };\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nconst viewChanged = (prevViewport, eventViewport) => prevViewport.x !== eventViewport.x || prevViewport.y !== eventViewport.y || prevViewport.zoom !== eventViewport.k;\nconst transformToViewport = (transform) => ({\n    x: transform.x,\n    y: transform.y,\n    zoom: transform.k,\n});\nconst viewportToTransform = ({ x, y, zoom }) => zoomIdentity.translate(x, y).scale(zoom);\nconst isWrappedWithClass = (event, className) => event.target.closest(`.${className}`);\nconst isRightClickPan = (panOnDrag, usedButton) => usedButton === 2 && Array.isArray(panOnDrag) && panOnDrag.includes(2);\nconst getD3Transition = (selection, duration = 0, onEnd = () => { }) => {\n    const hasDuration = typeof duration === 'number' && duration > 0;\n    if (!hasDuration) {\n        onEnd();\n    }\n    return hasDuration ? selection.transition().duration(duration).on('end', onEnd) : selection;\n};\nconst wheelDelta = (event) => {\n    const factor = event.ctrlKey && isMacOs() ? 10 : 1;\n    return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * factor;\n};\n\nfunction createPanOnScrollHandler({ zoomPanValues, noWheelClassName, d3Selection, d3Zoom, panOnScrollMode, panOnScrollSpeed, zoomOnPinch, onPanZoomStart, onPanZoom, onPanZoomEnd, }) {\n    return (event) => {\n        if (isWrappedWithClass(event, noWheelClassName)) {\n            return false;\n        }\n        event.preventDefault();\n        event.stopImmediatePropagation();\n        const currentZoom = d3Selection.property('__zoom').k || 1;\n        // macos sets ctrlKey=true for pinch gesture on a trackpad\n        if (event.ctrlKey && zoomOnPinch) {\n            const point = pointer(event);\n            const pinchDelta = wheelDelta(event);\n            const zoom = currentZoom * Math.pow(2, pinchDelta);\n            // @ts-ignore\n            d3Zoom.scaleTo(d3Selection, zoom, point, event);\n            return;\n        }\n        /*\n         * increase scroll speed in firefox\n         * firefox: deltaMode === 1; chrome: deltaMode === 0\n         */\n        const deltaNormalize = event.deltaMode === 1 ? 20 : 1;\n        let deltaX = panOnScrollMode === PanOnScrollMode.Vertical ? 0 : event.deltaX * deltaNormalize;\n        let deltaY = panOnScrollMode === PanOnScrollMode.Horizontal ? 0 : event.deltaY * deltaNormalize;\n        // this enables vertical scrolling with shift + scroll on windows\n        if (!isMacOs() && event.shiftKey && panOnScrollMode !== PanOnScrollMode.Vertical) {\n            deltaX = event.deltaY * deltaNormalize;\n            deltaY = 0;\n        }\n        d3Zoom.translateBy(d3Selection, -(deltaX / currentZoom) * panOnScrollSpeed, -(deltaY / currentZoom) * panOnScrollSpeed, \n        // @ts-ignore\n        { internal: true });\n        const nextViewport = transformToViewport(d3Selection.property('__zoom'));\n        clearTimeout(zoomPanValues.panScrollTimeout);\n        /*\n         * for pan on scroll we need to handle the event calls on our own\n         * we can't use the start, zoom and end events from d3-zoom\n         * because start and move gets called on every scroll event and not once at the beginning\n         */\n        if (!zoomPanValues.isPanScrolling) {\n            zoomPanValues.isPanScrolling = true;\n            onPanZoomStart?.(event, nextViewport);\n        }\n        if (zoomPanValues.isPanScrolling) {\n            onPanZoom?.(event, nextViewport);\n            zoomPanValues.panScrollTimeout = setTimeout(() => {\n                onPanZoomEnd?.(event, nextViewport);\n                zoomPanValues.isPanScrolling = false;\n            }, 150);\n        }\n    };\n}\nfunction createZoomOnScrollHandler({ noWheelClassName, preventScrolling, d3ZoomHandler }) {\n    return function (event, d) {\n        const isWheel = event.type === 'wheel';\n        // we still want to enable pinch zooming even if preventScrolling is set to false\n        const preventZoom = !preventScrolling && isWheel && !event.ctrlKey;\n        const hasNoWheelClass = isWrappedWithClass(event, noWheelClassName);\n        // if user is pinch zooming above a nowheel element, we don't want the browser to zoom\n        if (event.ctrlKey && isWheel && hasNoWheelClass) {\n            event.preventDefault();\n        }\n        if (preventZoom || hasNoWheelClass) {\n            return null;\n        }\n        event.preventDefault();\n        d3ZoomHandler.call(this, event, d);\n    };\n}\nfunction createPanZoomStartHandler({ zoomPanValues, onDraggingChange, onPanZoomStart }) {\n    return (event) => {\n        if (event.sourceEvent?.internal) {\n            return;\n        }\n        const viewport = transformToViewport(event.transform);\n        // we need to remember it here, because it's always 0 in the \"zoom\" event\n        zoomPanValues.mouseButton = event.sourceEvent?.button || 0;\n        zoomPanValues.isZoomingOrPanning = true;\n        zoomPanValues.prevViewport = viewport;\n        if (event.sourceEvent?.type === 'mousedown') {\n            onDraggingChange(true);\n        }\n        if (onPanZoomStart) {\n            onPanZoomStart?.(event.sourceEvent, viewport);\n        }\n    };\n}\nfunction createPanZoomHandler({ zoomPanValues, panOnDrag, onPaneContextMenu, onTransformChange, onPanZoom, }) {\n    return (event) => {\n        zoomPanValues.usedRightMouseButton = !!(onPaneContextMenu && isRightClickPan(panOnDrag, zoomPanValues.mouseButton ?? 0));\n        if (!event.sourceEvent?.sync) {\n            onTransformChange([event.transform.x, event.transform.y, event.transform.k]);\n        }\n        if (onPanZoom && !event.sourceEvent?.internal) {\n            onPanZoom?.(event.sourceEvent, transformToViewport(event.transform));\n        }\n    };\n}\nfunction createPanZoomEndHandler({ zoomPanValues, panOnDrag, panOnScroll, onDraggingChange, onPanZoomEnd, onPaneContextMenu, }) {\n    return (event) => {\n        if (event.sourceEvent?.internal) {\n            return;\n        }\n        zoomPanValues.isZoomingOrPanning = false;\n        if (onPaneContextMenu &&\n            isRightClickPan(panOnDrag, zoomPanValues.mouseButton ?? 0) &&\n            !zoomPanValues.usedRightMouseButton &&\n            event.sourceEvent) {\n            onPaneContextMenu(event.sourceEvent);\n        }\n        zoomPanValues.usedRightMouseButton = false;\n        onDraggingChange(false);\n        if (onPanZoomEnd && viewChanged(zoomPanValues.prevViewport, event.transform)) {\n            const viewport = transformToViewport(event.transform);\n            zoomPanValues.prevViewport = viewport;\n            clearTimeout(zoomPanValues.timerId);\n            zoomPanValues.timerId = setTimeout(() => {\n                onPanZoomEnd?.(event.sourceEvent, viewport);\n            }, \n            // we need a setTimeout for panOnScroll to supress multiple end events fired during scroll\n            panOnScroll ? 150 : 0);\n        }\n    };\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nfunction createFilter({ zoomActivationKeyPressed, zoomOnScroll, zoomOnPinch, panOnDrag, panOnScroll, zoomOnDoubleClick, userSelectionActive, noWheelClassName, noPanClassName, lib, }) {\n    return (event) => {\n        const zoomScroll = zoomActivationKeyPressed || zoomOnScroll;\n        const pinchZoom = zoomOnPinch && event.ctrlKey;\n        if (event.button === 1 &&\n            event.type === 'mousedown' &&\n            (isWrappedWithClass(event, `${lib}-flow__node`) || isWrappedWithClass(event, `${lib}-flow__edge`))) {\n            return true;\n        }\n        // if all interactions are disabled, we prevent all zoom events\n        if (!panOnDrag && !zoomScroll && !panOnScroll && !zoomOnDoubleClick && !zoomOnPinch) {\n            return false;\n        }\n        // during a selection we prevent all other interactions\n        if (userSelectionActive) {\n            return false;\n        }\n        // if the target element is inside an element with the nowheel class, we prevent zooming\n        if (isWrappedWithClass(event, noWheelClassName) && event.type === 'wheel') {\n            return false;\n        }\n        // if the target element is inside an element with the nopan class, we prevent panning\n        if (isWrappedWithClass(event, noPanClassName) &&\n            (event.type !== 'wheel' || (panOnScroll && event.type === 'wheel' && !zoomActivationKeyPressed))) {\n            return false;\n        }\n        if (!zoomOnPinch && event.ctrlKey && event.type === 'wheel') {\n            return false;\n        }\n        if (!zoomOnPinch && event.type === 'touchstart' && event.touches?.length > 1) {\n            event.preventDefault(); // if you manage to start with 2 touches, we prevent native zoom\n            return false;\n        }\n        // when there is no scroll handling enabled, we prevent all wheel events\n        if (!zoomScroll && !panOnScroll && !pinchZoom && event.type === 'wheel') {\n            return false;\n        }\n        // if the pane is not movable, we prevent dragging it with mousestart or touchstart\n        if (!panOnDrag && (event.type === 'mousedown' || event.type === 'touchstart')) {\n            return false;\n        }\n        // if the pane is only movable using allowed clicks\n        if (Array.isArray(panOnDrag) && !panOnDrag.includes(event.button) && event.type === 'mousedown') {\n            return false;\n        }\n        // We only allow right clicks if pan on drag is set to right click\n        const buttonAllowed = (Array.isArray(panOnDrag) && panOnDrag.includes(event.button)) || !event.button || event.button <= 1;\n        // default filter for d3-zoom\n        return (!event.ctrlKey || event.type === 'wheel') && buttonAllowed;\n    };\n}\n\nfunction XYPanZoom({ domNode, minZoom, maxZoom, paneClickDistance, translateExtent, viewport, onPanZoom, onPanZoomStart, onPanZoomEnd, onDraggingChange, }) {\n    const zoomPanValues = {\n        isZoomingOrPanning: false,\n        usedRightMouseButton: false,\n        prevViewport: { x: 0, y: 0, zoom: 0 },\n        mouseButton: 0,\n        timerId: undefined,\n        panScrollTimeout: undefined,\n        isPanScrolling: false,\n    };\n    const bbox = domNode.getBoundingClientRect();\n    const d3ZoomInstance = zoom()\n        .clickDistance(!isNumeric(paneClickDistance) || paneClickDistance < 0 ? 0 : paneClickDistance)\n        .scaleExtent([minZoom, maxZoom])\n        .translateExtent(translateExtent);\n    const d3Selection = select(domNode).call(d3ZoomInstance);\n    setViewportConstrained({\n        x: viewport.x,\n        y: viewport.y,\n        zoom: clamp(viewport.zoom, minZoom, maxZoom),\n    }, [\n        [0, 0],\n        [bbox.width, bbox.height],\n    ], translateExtent);\n    const d3ZoomHandler = d3Selection.on('wheel.zoom');\n    const d3DblClickZoomHandler = d3Selection.on('dblclick.zoom');\n    d3ZoomInstance.wheelDelta(wheelDelta);\n    function setTransform(transform, options) {\n        if (d3Selection) {\n            return new Promise((resolve) => {\n                d3ZoomInstance?.transform(getD3Transition(d3Selection, options?.duration, () => resolve(true)), transform);\n            });\n        }\n        return Promise.resolve(false);\n    }\n    // public functions\n    function update({ noWheelClassName, noPanClassName, onPaneContextMenu, userSelectionActive, panOnScroll, panOnDrag, panOnScrollMode, panOnScrollSpeed, preventScrolling, zoomOnPinch, zoomOnScroll, zoomOnDoubleClick, zoomActivationKeyPressed, lib, onTransformChange, }) {\n        if (userSelectionActive && !zoomPanValues.isZoomingOrPanning) {\n            destroy();\n        }\n        const isPanOnScroll = panOnScroll && !zoomActivationKeyPressed && !userSelectionActive;\n        const wheelHandler = isPanOnScroll\n            ? createPanOnScrollHandler({\n                zoomPanValues,\n                noWheelClassName,\n                d3Selection,\n                d3Zoom: d3ZoomInstance,\n                panOnScrollMode,\n                panOnScrollSpeed,\n                zoomOnPinch,\n                onPanZoomStart,\n                onPanZoom,\n                onPanZoomEnd,\n            })\n            : createZoomOnScrollHandler({\n                noWheelClassName,\n                preventScrolling,\n                d3ZoomHandler,\n            });\n        d3Selection.on('wheel.zoom', wheelHandler, { passive: false });\n        if (!userSelectionActive) {\n            // pan zoom start\n            const startHandler = createPanZoomStartHandler({\n                zoomPanValues,\n                onDraggingChange,\n                onPanZoomStart,\n            });\n            d3ZoomInstance.on('start', startHandler);\n            // pan zoom\n            const panZoomHandler = createPanZoomHandler({\n                zoomPanValues,\n                panOnDrag,\n                onPaneContextMenu: !!onPaneContextMenu,\n                onPanZoom,\n                onTransformChange,\n            });\n            d3ZoomInstance.on('zoom', panZoomHandler);\n            // pan zoom end\n            const panZoomEndHandler = createPanZoomEndHandler({\n                zoomPanValues,\n                panOnDrag,\n                panOnScroll,\n                onPaneContextMenu,\n                onPanZoomEnd,\n                onDraggingChange,\n            });\n            d3ZoomInstance.on('end', panZoomEndHandler);\n        }\n        const filter = createFilter({\n            zoomActivationKeyPressed,\n            panOnDrag,\n            zoomOnScroll,\n            panOnScroll,\n            zoomOnDoubleClick,\n            zoomOnPinch,\n            userSelectionActive,\n            noPanClassName,\n            noWheelClassName,\n            lib,\n        });\n        d3ZoomInstance.filter(filter);\n        /*\n         * We cannot add zoomOnDoubleClick to the filter above because\n         * double tapping on touch screens circumvents the filter and\n         * dblclick.zoom is fired on the selection directly\n         */\n        if (zoomOnDoubleClick) {\n            d3Selection.on('dblclick.zoom', d3DblClickZoomHandler);\n        }\n        else {\n            d3Selection.on('dblclick.zoom', null);\n        }\n    }\n    function destroy() {\n        d3ZoomInstance.on('zoom', null);\n    }\n    async function setViewportConstrained(viewport, extent, translateExtent) {\n        const nextTransform = viewportToTransform(viewport);\n        const contrainedTransform = d3ZoomInstance?.constrain()(nextTransform, extent, translateExtent);\n        if (contrainedTransform) {\n            await setTransform(contrainedTransform);\n        }\n        return new Promise((resolve) => resolve(contrainedTransform));\n    }\n    async function setViewport(viewport, options) {\n        const nextTransform = viewportToTransform(viewport);\n        await setTransform(nextTransform, options);\n        return new Promise((resolve) => resolve(nextTransform));\n    }\n    function syncViewport(viewport) {\n        if (d3Selection) {\n            const nextTransform = viewportToTransform(viewport);\n            const currentTransform = d3Selection.property('__zoom');\n            if (currentTransform.k !== viewport.zoom ||\n                currentTransform.x !== viewport.x ||\n                currentTransform.y !== viewport.y) {\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore\n                d3ZoomInstance?.transform(d3Selection, nextTransform, null, { sync: true });\n            }\n        }\n    }\n    function getViewport() {\n        const transform = d3Selection ? zoomTransform(d3Selection.node()) : { x: 0, y: 0, k: 1 };\n        return { x: transform.x, y: transform.y, zoom: transform.k };\n    }\n    function scaleTo(zoom, options) {\n        if (d3Selection) {\n            return new Promise((resolve) => {\n                d3ZoomInstance?.scaleTo(getD3Transition(d3Selection, options?.duration, () => resolve(true)), zoom);\n            });\n        }\n        return Promise.resolve(false);\n    }\n    function scaleBy(factor, options) {\n        if (d3Selection) {\n            return new Promise((resolve) => {\n                d3ZoomInstance?.scaleBy(getD3Transition(d3Selection, options?.duration, () => resolve(true)), factor);\n            });\n        }\n        return Promise.resolve(false);\n    }\n    function setScaleExtent(scaleExtent) {\n        d3ZoomInstance?.scaleExtent(scaleExtent);\n    }\n    function setTranslateExtent(translateExtent) {\n        d3ZoomInstance?.translateExtent(translateExtent);\n    }\n    function setClickDistance(distance) {\n        const validDistance = !isNumeric(distance) || distance < 0 ? 0 : distance;\n        d3ZoomInstance?.clickDistance(validDistance);\n    }\n    return {\n        update,\n        destroy,\n        setViewport,\n        setViewportConstrained,\n        getViewport,\n        scaleTo,\n        scaleBy,\n        setScaleExtent,\n        setTranslateExtent,\n        syncViewport,\n        setClickDistance,\n    };\n}\n\n/**\n * Used to determine the variant of the resize control\n *\n * @public\n */\nvar ResizeControlVariant;\n(function (ResizeControlVariant) {\n    ResizeControlVariant[\"Line\"] = \"line\";\n    ResizeControlVariant[\"Handle\"] = \"handle\";\n})(ResizeControlVariant || (ResizeControlVariant = {}));\nconst XY_RESIZER_HANDLE_POSITIONS = ['top-left', 'top-right', 'bottom-left', 'bottom-right'];\nconst XY_RESIZER_LINE_POSITIONS = ['top', 'right', 'bottom', 'left'];\n\n/**\n * Get all connecting edges for a given set of nodes\n * @param width - new width of the node\n * @param prevWidth - previous width of the node\n * @param height - new height of the node\n * @param prevHeight - previous height of the node\n * @param affectsX - whether to invert the resize direction for the x axis\n * @param affectsY - whether to invert the resize direction for the y axis\n * @returns array of two numbers representing the direction of the resize for each axis, 0 = no change, 1 = increase, -1 = decrease\n */\nfunction getResizeDirection({ width, prevWidth, height, prevHeight, affectsX, affectsY, }) {\n    const deltaWidth = width - prevWidth;\n    const deltaHeight = height - prevHeight;\n    const direction = [deltaWidth > 0 ? 1 : deltaWidth < 0 ? -1 : 0, deltaHeight > 0 ? 1 : deltaHeight < 0 ? -1 : 0];\n    if (deltaWidth && affectsX) {\n        direction[0] = direction[0] * -1;\n    }\n    if (deltaHeight && affectsY) {\n        direction[1] = direction[1] * -1;\n    }\n    return direction;\n}\n/**\n * Parses the control position that is being dragged to dimensions that are being resized\n * @param controlPosition - position of the control that is being dragged\n * @returns isHorizontal, isVertical, affectsX, affectsY,\n */\nfunction getControlDirection(controlPosition) {\n    const isHorizontal = controlPosition.includes('right') || controlPosition.includes('left');\n    const isVertical = controlPosition.includes('bottom') || controlPosition.includes('top');\n    const affectsX = controlPosition.includes('left');\n    const affectsY = controlPosition.includes('top');\n    return {\n        isHorizontal,\n        isVertical,\n        affectsX,\n        affectsY,\n    };\n}\nfunction getLowerExtentClamp(lowerExtent, lowerBound) {\n    return Math.max(0, lowerBound - lowerExtent);\n}\nfunction getUpperExtentClamp(upperExtent, upperBound) {\n    return Math.max(0, upperExtent - upperBound);\n}\nfunction getSizeClamp(size, minSize, maxSize) {\n    return Math.max(0, minSize - size, size - maxSize);\n}\nfunction xor(a, b) {\n    return a ? !b : b;\n}\n/**\n * Calculates new width & height and x & y of node after resize based on pointer position\n * @description - Buckle up, this is a chunky one... If you want to determine the new dimensions of a node after a resize,\n * you have to account for all possible restrictions: min/max width/height of the node, the maximum extent the node is allowed\n * to move in (in this case: resize into) determined by the parent node, the minimal extent determined by child nodes\n * with expandParent or extent: 'parent' set and oh yeah, these things also have to work with keepAspectRatio!\n * The way this is done is by determining how much each of these restricting actually restricts the resize and then applying the\n * strongest restriction. Because the resize affects x, y and width, height and width, height of a opposing side with keepAspectRatio,\n * the resize amount is always kept in distX & distY amount (the distance in mouse movement)\n * Instead of clamping each value, we first calculate the biggest 'clamp' (for the lack of a better name) and then apply it to all values.\n * To complicate things nodeOrigin has to be taken into account as well. This is done by offsetting the nodes as if their origin is [0, 0],\n * then calculating the restrictions as usual\n * @param startValues - starting values of resize\n * @param controlDirection - dimensions affected by the resize\n * @param pointerPosition - the current pointer position corrected for snapping\n * @param boundaries - minimum and maximum dimensions of the node\n * @param keepAspectRatio - prevent changes of asprect ratio\n * @returns x, y, width and height of the node after resize\n */\nfunction getDimensionsAfterResize(startValues, controlDirection, pointerPosition, boundaries, keepAspectRatio, nodeOrigin, extent, childExtent) {\n    let { affectsX, affectsY } = controlDirection;\n    const { isHorizontal, isVertical } = controlDirection;\n    const isDiagonal = isHorizontal && isVertical;\n    const { xSnapped, ySnapped } = pointerPosition;\n    const { minWidth, maxWidth, minHeight, maxHeight } = boundaries;\n    const { x: startX, y: startY, width: startWidth, height: startHeight, aspectRatio } = startValues;\n    let distX = Math.floor(isHorizontal ? xSnapped - startValues.pointerX : 0);\n    let distY = Math.floor(isVertical ? ySnapped - startValues.pointerY : 0);\n    const newWidth = startWidth + (affectsX ? -distX : distX);\n    const newHeight = startHeight + (affectsY ? -distY : distY);\n    const originOffsetX = -nodeOrigin[0] * startWidth;\n    const originOffsetY = -nodeOrigin[1] * startHeight;\n    // Check if maxWidth, minWWidth, maxHeight, minHeight are restricting the resize\n    let clampX = getSizeClamp(newWidth, minWidth, maxWidth);\n    let clampY = getSizeClamp(newHeight, minHeight, maxHeight);\n    // Check if extent is restricting the resize\n    if (extent) {\n        let xExtentClamp = 0;\n        let yExtentClamp = 0;\n        if (affectsX && distX < 0) {\n            xExtentClamp = getLowerExtentClamp(startX + distX + originOffsetX, extent[0][0]);\n        }\n        else if (!affectsX && distX > 0) {\n            xExtentClamp = getUpperExtentClamp(startX + newWidth + originOffsetX, extent[1][0]);\n        }\n        if (affectsY && distY < 0) {\n            yExtentClamp = getLowerExtentClamp(startY + distY + originOffsetY, extent[0][1]);\n        }\n        else if (!affectsY && distY > 0) {\n            yExtentClamp = getUpperExtentClamp(startY + newHeight + originOffsetY, extent[1][1]);\n        }\n        clampX = Math.max(clampX, xExtentClamp);\n        clampY = Math.max(clampY, yExtentClamp);\n    }\n    // Check if the child extent is restricting the resize\n    if (childExtent) {\n        let xExtentClamp = 0;\n        let yExtentClamp = 0;\n        if (affectsX && distX > 0) {\n            xExtentClamp = getUpperExtentClamp(startX + distX, childExtent[0][0]);\n        }\n        else if (!affectsX && distX < 0) {\n            xExtentClamp = getLowerExtentClamp(startX + newWidth, childExtent[1][0]);\n        }\n        if (affectsY && distY > 0) {\n            yExtentClamp = getUpperExtentClamp(startY + distY, childExtent[0][1]);\n        }\n        else if (!affectsY && distY < 0) {\n            yExtentClamp = getLowerExtentClamp(startY + newHeight, childExtent[1][1]);\n        }\n        clampX = Math.max(clampX, xExtentClamp);\n        clampY = Math.max(clampY, yExtentClamp);\n    }\n    // Check if the aspect ratio resizing of the other side is restricting the resize\n    if (keepAspectRatio) {\n        if (isHorizontal) {\n            // Check if the max dimensions might be restricting the resize\n            const aspectHeightClamp = getSizeClamp(newWidth / aspectRatio, minHeight, maxHeight) * aspectRatio;\n            clampX = Math.max(clampX, aspectHeightClamp);\n            // Check if the extent is restricting the resize\n            if (extent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsX && !affectsY && isDiagonal)) {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startY + originOffsetY + newWidth / aspectRatio, extent[1][1]) * aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getLowerExtentClamp(startY + originOffsetY + (affectsX ? distX : -distX) / aspectRatio, extent[0][1]) *\n                            aspectRatio;\n                }\n                clampX = Math.max(clampX, aspectExtentClamp);\n            }\n            // Check if the child extent is restricting the resize\n            if (childExtent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsX && !affectsY && isDiagonal)) {\n                    aspectExtentClamp = getLowerExtentClamp(startY + newWidth / aspectRatio, childExtent[1][1]) * aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startY + (affectsX ? distX : -distX) / aspectRatio, childExtent[0][1]) * aspectRatio;\n                }\n                clampX = Math.max(clampX, aspectExtentClamp);\n            }\n        }\n        // Do the same thing for vertical resizing\n        if (isVertical) {\n            const aspectWidthClamp = getSizeClamp(newHeight * aspectRatio, minWidth, maxWidth) / aspectRatio;\n            clampY = Math.max(clampY, aspectWidthClamp);\n            if (extent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsY && !affectsX && isDiagonal)) {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startX + newHeight * aspectRatio + originOffsetX, extent[1][0]) / aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getLowerExtentClamp(startX + (affectsY ? distY : -distY) * aspectRatio + originOffsetX, extent[0][0]) /\n                            aspectRatio;\n                }\n                clampY = Math.max(clampY, aspectExtentClamp);\n            }\n            if (childExtent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsY && !affectsX && isDiagonal)) {\n                    aspectExtentClamp = getLowerExtentClamp(startX + newHeight * aspectRatio, childExtent[1][0]) / aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startX + (affectsY ? distY : -distY) * aspectRatio, childExtent[0][0]) / aspectRatio;\n                }\n                clampY = Math.max(clampY, aspectExtentClamp);\n            }\n        }\n    }\n    distY = distY + (distY < 0 ? clampY : -clampY);\n    distX = distX + (distX < 0 ? clampX : -clampX);\n    if (keepAspectRatio) {\n        if (isDiagonal) {\n            if (newWidth > newHeight * aspectRatio) {\n                distY = (xor(affectsX, affectsY) ? -distX : distX) / aspectRatio;\n            }\n            else {\n                distX = (xor(affectsX, affectsY) ? -distY : distY) * aspectRatio;\n            }\n        }\n        else {\n            if (isHorizontal) {\n                distY = distX / aspectRatio;\n                affectsY = affectsX;\n            }\n            else {\n                distX = distY * aspectRatio;\n                affectsX = affectsY;\n            }\n        }\n    }\n    const x = affectsX ? startX + distX : startX;\n    const y = affectsY ? startY + distY : startY;\n    return {\n        width: startWidth + (affectsX ? -distX : distX),\n        height: startHeight + (affectsY ? -distY : distY),\n        x: nodeOrigin[0] * distX * (!affectsX ? 1 : -1) + x,\n        y: nodeOrigin[1] * distY * (!affectsY ? 1 : -1) + y,\n    };\n}\n\nconst initPrevValues = { width: 0, height: 0, x: 0, y: 0 };\nconst initStartValues = {\n    ...initPrevValues,\n    pointerX: 0,\n    pointerY: 0,\n    aspectRatio: 1,\n};\nfunction nodeToParentExtent(node) {\n    return [\n        [0, 0],\n        [node.measured.width, node.measured.height],\n    ];\n}\nfunction nodeToChildExtent(child, parent, nodeOrigin) {\n    const x = parent.position.x + child.position.x;\n    const y = parent.position.y + child.position.y;\n    const width = child.measured.width ?? 0;\n    const height = child.measured.height ?? 0;\n    const originOffsetX = nodeOrigin[0] * width;\n    const originOffsetY = nodeOrigin[1] * height;\n    return [\n        [x - originOffsetX, y - originOffsetY],\n        [x + width - originOffsetX, y + height - originOffsetY],\n    ];\n}\nfunction XYResizer({ domNode, nodeId, getStoreItems, onChange, onEnd }) {\n    const selection = select(domNode);\n    function update({ controlPosition, boundaries, keepAspectRatio, resizeDirection, onResizeStart, onResize, onResizeEnd, shouldResize, }) {\n        let prevValues = { ...initPrevValues };\n        let startValues = { ...initStartValues };\n        const controlDirection = getControlDirection(controlPosition);\n        let node = undefined;\n        let containerBounds = null;\n        let childNodes = [];\n        let parentNode = undefined; // Needed to fix expandParent\n        let parentExtent = undefined;\n        let childExtent = undefined;\n        const dragHandler = drag()\n            .on('start', (event) => {\n            const { nodeLookup, transform, snapGrid, snapToGrid, nodeOrigin, paneDomNode } = getStoreItems();\n            node = nodeLookup.get(nodeId);\n            if (!node) {\n                return;\n            }\n            containerBounds = paneDomNode?.getBoundingClientRect() ?? null;\n            const { xSnapped, ySnapped } = getPointerPosition(event.sourceEvent, {\n                transform,\n                snapGrid,\n                snapToGrid,\n                containerBounds,\n            });\n            prevValues = {\n                width: node.measured.width ?? 0,\n                height: node.measured.height ?? 0,\n                x: node.position.x ?? 0,\n                y: node.position.y ?? 0,\n            };\n            startValues = {\n                ...prevValues,\n                pointerX: xSnapped,\n                pointerY: ySnapped,\n                aspectRatio: prevValues.width / prevValues.height,\n            };\n            parentNode = undefined;\n            if (node.parentId && (node.extent === 'parent' || node.expandParent)) {\n                parentNode = nodeLookup.get(node.parentId);\n                parentExtent = parentNode && node.extent === 'parent' ? nodeToParentExtent(parentNode) : undefined;\n            }\n            /*\n             * Collect all child nodes to correct their relative positions when top/left changes\n             * Determine largest minimal extent the parent node is allowed to resize to\n             */\n            childNodes = [];\n            childExtent = undefined;\n            for (const [childId, child] of nodeLookup) {\n                if (child.parentId === nodeId) {\n                    childNodes.push({\n                        id: childId,\n                        position: { ...child.position },\n                        extent: child.extent,\n                    });\n                    if (child.extent === 'parent' || child.expandParent) {\n                        const extent = nodeToChildExtent(child, node, child.origin ?? nodeOrigin);\n                        if (childExtent) {\n                            childExtent = [\n                                [Math.min(extent[0][0], childExtent[0][0]), Math.min(extent[0][1], childExtent[0][1])],\n                                [Math.max(extent[1][0], childExtent[1][0]), Math.max(extent[1][1], childExtent[1][1])],\n                            ];\n                        }\n                        else {\n                            childExtent = extent;\n                        }\n                    }\n                }\n            }\n            onResizeStart?.(event, { ...prevValues });\n        })\n            .on('drag', (event) => {\n            const { transform, snapGrid, snapToGrid, nodeOrigin: storeNodeOrigin } = getStoreItems();\n            const pointerPosition = getPointerPosition(event.sourceEvent, {\n                transform,\n                snapGrid,\n                snapToGrid,\n                containerBounds,\n            });\n            const childChanges = [];\n            if (!node) {\n                return;\n            }\n            const { x: prevX, y: prevY, width: prevWidth, height: prevHeight } = prevValues;\n            const change = {};\n            const nodeOrigin = node.origin ?? storeNodeOrigin;\n            const { width, height, x, y } = getDimensionsAfterResize(startValues, controlDirection, pointerPosition, boundaries, keepAspectRatio, nodeOrigin, parentExtent, childExtent);\n            const isWidthChange = width !== prevWidth;\n            const isHeightChange = height !== prevHeight;\n            const isXPosChange = x !== prevX && isWidthChange;\n            const isYPosChange = y !== prevY && isHeightChange;\n            if (!isXPosChange && !isYPosChange && !isWidthChange && !isHeightChange) {\n                return;\n            }\n            if (isXPosChange || isYPosChange || nodeOrigin[0] === 1 || nodeOrigin[1] === 1) {\n                change.x = isXPosChange ? x : prevValues.x;\n                change.y = isYPosChange ? y : prevValues.y;\n                prevValues.x = change.x;\n                prevValues.y = change.y;\n                /*\n                 * when top/left changes, correct the relative positions of child nodes\n                 * so that they stay in the same position\n                 */\n                if (childNodes.length > 0) {\n                    const xChange = x - prevX;\n                    const yChange = y - prevY;\n                    for (const childNode of childNodes) {\n                        childNode.position = {\n                            x: childNode.position.x - xChange + nodeOrigin[0] * (width - prevWidth),\n                            y: childNode.position.y - yChange + nodeOrigin[1] * (height - prevHeight),\n                        };\n                        childChanges.push(childNode);\n                    }\n                }\n            }\n            if (isWidthChange || isHeightChange) {\n                change.width =\n                    isWidthChange && (!resizeDirection || resizeDirection === 'horizontal') ? width : prevValues.width;\n                change.height =\n                    isHeightChange && (!resizeDirection || resizeDirection === 'vertical') ? height : prevValues.height;\n                prevValues.width = change.width;\n                prevValues.height = change.height;\n            }\n            // Fix expandParent when resizing from top/left\n            if (parentNode && node.expandParent) {\n                const xLimit = nodeOrigin[0] * (change.width ?? 0);\n                if (change.x && change.x < xLimit) {\n                    prevValues.x = xLimit;\n                    startValues.x = startValues.x - (change.x - xLimit);\n                }\n                const yLimit = nodeOrigin[1] * (change.height ?? 0);\n                if (change.y && change.y < yLimit) {\n                    prevValues.y = yLimit;\n                    startValues.y = startValues.y - (change.y - yLimit);\n                }\n            }\n            const direction = getResizeDirection({\n                width: prevValues.width,\n                prevWidth,\n                height: prevValues.height,\n                prevHeight,\n                affectsX: controlDirection.affectsX,\n                affectsY: controlDirection.affectsY,\n            });\n            const nextValues = { ...prevValues, direction };\n            const callResize = shouldResize?.(event, nextValues);\n            if (callResize === false) {\n                return;\n            }\n            onResize?.(event, nextValues);\n            onChange(change, childChanges);\n        })\n            .on('end', (event) => {\n            onResizeEnd?.(event, { ...prevValues });\n            onEnd?.({ ...prevValues });\n        });\n        selection.call(dragHandler);\n    }\n    function destroy() {\n        selection.on('.drag', null);\n    }\n    return {\n        update,\n        destroy,\n    };\n}\n\nexport { ConnectionLineType, ConnectionMode, MarkerType, PanOnScrollMode, Position, ResizeControlVariant, SelectionMode, XYDrag, XYHandle, XYMinimap, XYPanZoom, XYResizer, XY_RESIZER_HANDLE_POSITIONS, XY_RESIZER_LINE_POSITIONS, addEdge, adoptUserNodes, areConnectionMapsEqual, areSetsEqual, boxToRect, calcAutoPan, calculateNodePosition, clamp, clampPosition, clampPositionToParent, createMarkerIds, devWarn, elementSelectionKeys, errorMessages, evaluateAbsolutePosition, fitViewport, getBezierEdgeCenter, getBezierPath, getBoundsOfBoxes, getBoundsOfRects, getConnectedEdges, getConnectionStatus, getDimensions, getEdgeCenter, getEdgePosition, getElementsToRemove, getElevatedEdgeZIndex, getEventPosition, getHandleBounds, getHandlePosition, getHostForElement, getIncomers, getInternalNodesBounds, getMarkerId, getNodeDimensions, getNodePositionWithOrigin, getNodeToolbarTransform, getNodesBounds, getNodesInside, getOutgoers, getOverlappingArea, getPointerPosition, getSmoothStepPath, getStraightPath, getViewportForBounds, handleConnectionChange, handleExpandParent, infiniteExtent, initialConnection, isCoordinateExtent, isEdgeBase, isEdgeVisible, isInputDOMNode, isInternalNodeBase, isMacOs, isMouseEvent, isNodeBase, isNumeric, isRectObject, nodeHasDimensions, nodeToBox, nodeToRect, oppositePosition, panBy, pointToRendererPoint, reconnectEdge, rectToBox, rendererPointToPoint, shallowNodeData, snapPosition, updateAbsolutePositions, updateConnectionLookup, updateNodeInternals, withResolvers };\n","<script>import { getContext } from 'svelte';\nimport cc from 'classcat';\nimport { Position, XYHandle, isMouseEvent, areConnectionMapsEqual, handleConnectionChange, ConnectionMode } from '@xyflow/system';\nimport { useStore } from '../../store';\nexport let id = undefined;\nexport let type = 'source';\nexport let position = Position.Top;\nexport let style = undefined;\nexport let isValidConnection = undefined;\nexport let onconnect = undefined;\nexport let ondisconnect = undefined;\n// @todo implement connectablestart, connectableend\n// export let isConnectableStart: $$Props['isConnectableStart'] = undefined;\n// export let isConnectableEnd: $$Props['isConnectableEnd'] = undefined;\nlet isConnectableProp = undefined;\nexport { isConnectableProp as isConnectable };\nlet className = undefined;\nexport { className as class };\n$: isTarget = type === 'target';\nconst nodeId = getContext('svelteflow__node_id');\nconst connectable = getContext('svelteflow__node_connectable');\n$: isConnectable = isConnectableProp !== undefined ? isConnectableProp : $connectable;\n$: handleId = id || null;\nconst store = useStore();\nconst { connectionMode, domNode, nodeLookup, connectionRadius, viewport, isValidConnection: isValidConnectionStore, lib, addEdge, onedgecreate, panBy, cancelConnection, updateConnection, autoPanOnConnect, edges, connectionLookup, onconnect: onConnectAction, onconnectstart: onConnectStartAction, onconnectend: onConnectEndAction, flowId, connection } = store;\nfunction onPointerDown(event) {\n    const isMouseTriggered = isMouseEvent(event);\n    if ((isMouseTriggered && event.button === 0) || !isMouseTriggered) {\n        XYHandle.onPointerDown(event, {\n            handleId,\n            nodeId,\n            isTarget,\n            connectionRadius: $connectionRadius,\n            domNode: $domNode,\n            nodeLookup: $nodeLookup,\n            connectionMode: $connectionMode,\n            lib: $lib,\n            autoPanOnConnect: $autoPanOnConnect,\n            flowId: $flowId,\n            isValidConnection: isValidConnection ?? $isValidConnectionStore,\n            updateConnection,\n            cancelConnection,\n            panBy,\n            onConnect: (connection) => {\n                const edge = $onedgecreate ? $onedgecreate(connection) : connection;\n                if (!edge) {\n                    return;\n                }\n                addEdge(edge);\n                $onConnectAction?.(connection);\n            },\n            onConnectStart: (event, startParams) => {\n                $onConnectStartAction?.(event, {\n                    nodeId: startParams.nodeId,\n                    handleId: startParams.handleId,\n                    handleType: startParams.handleType\n                });\n            },\n            onConnectEnd: (event, connectionState) => {\n                $onConnectEndAction?.(event, connectionState);\n            },\n            getTransform: () => [$viewport.x, $viewport.y, $viewport.zoom],\n            getFromHandle: () => $connection.fromHandle\n        });\n    }\n}\nlet prevConnections = null;\nlet connections;\n$: if (onconnect || ondisconnect) {\n    // connectionLookup is not reactive, so we use edges to get notified about updates\n    $edges;\n    connections = $connectionLookup.get(`${nodeId}-${type}${id ? `-${id}` : ''}`);\n}\n$: {\n    if (prevConnections && !areConnectionMapsEqual(connections, prevConnections)) {\n        const _connections = connections ?? new Map();\n        handleConnectionChange(prevConnections, _connections, ondisconnect);\n        handleConnectionChange(_connections, prevConnections, onconnect);\n    }\n    prevConnections = connections ?? new Map();\n}\n$: connectionInProcess = !!$connection.fromHandle;\n$: connectingFrom =\n    $connection.fromHandle?.nodeId === nodeId &&\n        $connection.fromHandle?.type === type &&\n        $connection.fromHandle?.id === handleId;\n$: connectingTo =\n    $connection.toHandle?.nodeId === nodeId &&\n        $connection.toHandle?.type === type &&\n        $connection.toHandle?.id === handleId;\n$: isPossibleEndHandle =\n    $connectionMode === ConnectionMode.Strict\n        ? $connection.fromHandle?.type !== type\n        : nodeId !== $connection.fromHandle?.nodeId || handleId !== $connection.fromHandle?.id;\n$: valid = connectingTo && $connection.isValid;\n</script>\n\n<!--\n@component\nThe Handle component is the part of a node that can be used to connect nodes.\n-->\n<div\n  data-handleid={handleId}\n  data-nodeid={nodeId}\n  data-handlepos={position}\n  data-id=\"{$flowId}-{nodeId}-{id || null}-{type}\"\n  class={cc([\n    'svelte-flow__handle',\n    `svelte-flow__handle-${position}`,\n    'nodrag',\n    'nopan',\n    position,\n    className\n  ])}\n  class:valid\n  class:connectingto={connectingTo}\n  class:connectingfrom={connectingFrom}\n  class:source={!isTarget}\n  class:target={isTarget}\n  class:connectablestart={isConnectable}\n  class:connectableend={isConnectable}\n  class:connectable={isConnectable}\n  class:connectionindicator={isConnectable && (!connectionInProcess || isPossibleEndHandle)}\n  on:mousedown={onPointerDown}\n  on:touchstart={onPointerDown}\n  {style}\n  role=\"button\"\n  tabindex=\"-1\"\n>\n  <slot />\n</div>\n","<script>import { Position } from '@xyflow/system';\nimport { Handle } from '../Handle';\nexport let data = { label: 'Node' };\nexport let targetPosition = undefined;\nexport let sourcePosition = undefined;\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n<Handle type=\"target\" position={targetPosition ?? Position.Top} />\n{data?.label}\n<Handle type=\"source\" position={sourcePosition ?? Position.Bottom} />\n","<script>import { Position } from '@xyflow/system';\nimport { Handle } from '../Handle';\nexport let data = { label: 'Node' };\nexport let sourcePosition = undefined;\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n{data?.label}\n<Handle type=\"source\" position={sourcePosition ?? Position.Bottom} />\n","<script>import { Position } from '@xyflow/system';\nimport { Handle } from '../Handle';\nexport let data = { label: 'Node' };\nexport let targetPosition = undefined;\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n{data?.label}\n<Handle type=\"target\" position={targetPosition ?? Position.Top} />\n","<script>// this is a workaround for suppressing the warning about unused props\n$$restProps;\nexport {};\n</script>\n","function tryToMount(node, domNode, target) {\n    if (!domNode) {\n        return;\n    }\n    const targetEl = target ? domNode.querySelector(target) : domNode;\n    if (targetEl) {\n        targetEl.appendChild(node);\n    }\n}\nexport default function (node, { target, domNode }) {\n    tryToMount(node, domNode, target);\n    return {\n        async update({ target, domNode }) {\n            tryToMount(node, domNode, target);\n        },\n        destroy() {\n            if (node.parentNode) {\n                node.parentNode.removeChild(node);\n            }\n        }\n    };\n}\n","<script>import portal from '../../actions/portal';\nimport { useStore } from '../../store';\nconst { domNode } = useStore();\n</script>\n\n<div use:portal={{ target: '.svelte-flow__edgelabel-renderer', domNode: $domNode }}>\n  <slot />\n</div>\n","import { get } from 'svelte/store';\nimport { errorMessages } from '@xyflow/system';\nimport { useStore } from '../store';\nexport function useHandleEdgeSelect() {\n    const { edgeLookup, selectionRect, selectionRectMode, multiselectionKeyPressed, addSelectedEdges, unselectNodesAndEdges, elementsSelectable } = useStore();\n    return (id) => {\n        const edge = get(edgeLookup).get(id);\n        if (!edge) {\n            console.warn('012', errorMessages['error012'](id));\n            return;\n        }\n        const selectable = edge.selectable || (get(elementsSelectable) && typeof edge.selectable === 'undefined');\n        if (selectable) {\n            selectionRect.set(null);\n            selectionRectMode.set(null);\n            if (!edge.selected) {\n                addSelectedEdges([id]);\n            }\n            else if (edge.selected && get(multiselectionKeyPressed)) {\n                unselectNodesAndEdges({ nodes: [], edges: [edge] });\n            }\n        }\n    };\n}\n","<script>import { getContext } from 'svelte';\nimport { EdgeLabelRenderer } from '../EdgeLabelRenderer';\nimport { useHandleEdgeSelect } from '../../hooks/useHandleEdgeSelect';\nexport let style = undefined;\nexport let x = undefined;\nexport let y = undefined;\nconst handleEdgeSelect = useHandleEdgeSelect();\nconst id = getContext('svelteflow__edge_id');\n</script>\n\n<EdgeLabelRenderer>\n  <div\n    class=\"svelte-flow__edge-label\"\n    style:transform=\"translate(-50%, -50%) translate({x}px,{y}px)\"\n    style={'pointer-events: all;' + style}\n    role=\"button\"\n    tabindex=\"-1\"\n    on:keyup={() => {}}\n    on:click={() => {\n      if (id) handleEdgeSelect(id);\n    }}\n  >\n    <slot />\n  </div>\n</EdgeLabelRenderer>\n","<script>import cc from 'classcat';\nimport EdgeLabel from '../EdgeLabel/EdgeLabel.svelte';\nexport let id = undefined;\nexport let path;\nexport let label = undefined;\nexport let labelX = undefined;\nexport let labelY = undefined;\nexport let labelStyle = undefined;\nexport let markerStart = undefined;\nexport let markerEnd = undefined;\nexport let style = undefined;\nexport let interactionWidth = 20;\nlet className = undefined;\nexport { className as class };\nlet interactionWidthValue = interactionWidth === undefined ? 20 : interactionWidth;\n</script>\n\n<path\n  {id}\n  d={path}\n  class={cc(['svelte-flow__edge-path', className])}\n  marker-start={markerStart}\n  marker-end={markerEnd}\n  fill=\"none\"\n  {style}\n/>\n\n{#if interactionWidthValue}\n  <path\n    d={path}\n    stroke-opacity={0}\n    stroke-width={interactionWidthValue}\n    fill=\"none\"\n    class=\"svelte-flow__edge-interaction\"\n  />\n{/if}\n\n{#if label}\n  <EdgeLabel x={labelX} y={labelY} style={labelStyle}>\n    {label}\n  </EdgeLabel>\n{/if}\n","<script>import { getBezierPath } from '@xyflow/system';\nimport { BaseEdge } from '../BaseEdge';\nexport let label = undefined;\nexport let labelStyle = undefined;\nexport let style = undefined;\nexport let markerStart = undefined;\nexport let markerEnd = undefined;\nexport let interactionWidth = undefined;\nexport let sourceX;\nexport let sourceY;\nexport let sourcePosition;\nexport let targetX;\nexport let targetY;\nexport let targetPosition;\n$: [path, labelX, labelY] = getBezierPath({\n    sourceX,\n    sourceY,\n    targetX,\n    targetY,\n    sourcePosition,\n    targetPosition\n});\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n<BaseEdge\n  {path}\n  {labelX}\n  {labelY}\n  {label}\n  {labelStyle}\n  {markerStart}\n  {markerEnd}\n  {interactionWidth}\n  {style}\n/>\n","<script>import { getSmoothStepPath } from '@xyflow/system';\nimport { BaseEdge } from '../BaseEdge';\nexport let label = undefined;\nexport let labelStyle = undefined;\nexport let style = undefined;\nexport let markerStart = undefined;\nexport let markerEnd = undefined;\nexport let interactionWidth = undefined;\nexport let sourceX;\nexport let sourceY;\nexport let sourcePosition;\nexport let targetX;\nexport let targetY;\nexport let targetPosition;\n$: [path, labelX, labelY] = getSmoothStepPath({\n    sourceX,\n    sourceY,\n    targetX,\n    targetY,\n    sourcePosition,\n    targetPosition\n});\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n<BaseEdge\n  {path}\n  {labelX}\n  {labelY}\n  {label}\n  {labelStyle}\n  {markerStart}\n  {markerEnd}\n  {interactionWidth}\n  {style}\n/>\n","<script>import { getStraightPath } from '@xyflow/system';\nimport { BaseEdge } from '../BaseEdge';\nexport let label = undefined;\nexport let labelStyle = undefined;\nexport let style = undefined;\nexport let markerStart = undefined;\nexport let markerEnd = undefined;\nexport let interactionWidth = undefined;\nexport let sourceX;\nexport let sourceY;\nexport let targetX;\nexport let targetY;\n$: [path, labelX, labelY] = getStraightPath({\n    sourceX,\n    sourceY,\n    targetX,\n    targetY\n});\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n<BaseEdge\n  {path}\n  {labelX}\n  {labelY}\n  {label}\n  {labelStyle}\n  {markerStart}\n  {markerEnd}\n  {interactionWidth}\n  {style}\n/>\n","<script>import { getSmoothStepPath } from '@xyflow/system';\nimport { BaseEdge } from '../BaseEdge';\nexport let label = undefined;\nexport let labelStyle = undefined;\nexport let style = undefined;\nexport let markerStart = undefined;\nexport let markerEnd = undefined;\nexport let interactionWidth = undefined;\nexport let sourceX;\nexport let sourceY;\nexport let sourcePosition;\nexport let targetX;\nexport let targetY;\nexport let targetPosition;\n$: [path, labelX, labelY] = getSmoothStepPath({\n    sourceX,\n    sourceY,\n    targetX,\n    targetY,\n    sourcePosition,\n    targetPosition,\n    borderRadius: 0\n});\n// this is a workaround for suppressing the warning about unused props\n$$restProps;\n</script>\n\n<BaseEdge\n  {path}\n  {labelX}\n  {labelY}\n  {label}\n  {labelStyle}\n  {markerStart}\n  {markerEnd}\n  {interactionWidth}\n  {style}\n/>\n","import { writable, get } from 'svelte/store';\nimport { adoptUserNodes, updateConnectionLookup, infiniteExtent, fitViewport, withResolvers } from '@xyflow/system';\n// we need to sync the user nodes and the internal nodes so that the user can receive the updates\n// made by Svelte Flow (like dragging or selecting a node).\nexport function syncNodeStores(nodesStore, userNodesStore) {\n    const nodesStoreSetter = nodesStore.set;\n    const userNodesStoreSetter = userNodesStore.set;\n    const currentNodesStore = get(nodesStore);\n    const currentUserNodesStore = get(userNodesStore);\n    // depending how the user initializes the nodes, we need to decide if we want to use\n    // the user nodes or the internal nodes for initialization. A user can use a SvelteFlowProvider\n    // without providing any nodes, in that case we want to use the nodes passed by the user.\n    // By default we are using the store nodes, because they already have the absolute positions.\n    const initWithUserNodes = currentNodesStore.length === 0 && currentUserNodesStore.length > 0;\n    let val = initWithUserNodes ? currentUserNodesStore : currentNodesStore;\n    nodesStore.set(val);\n    const _set = (nds) => {\n        const updatedNodes = nodesStoreSetter(nds);\n        val = updatedNodes;\n        userNodesStoreSetter(val);\n        return updatedNodes;\n    };\n    nodesStore.set = userNodesStore.set = _set;\n    nodesStore.update = userNodesStore.update = (fn) => _set(fn(val));\n}\n// same for edges\nexport function syncEdgeStores(edgesStore, userEdgesStore) {\n    const nodesStoreSetter = edgesStore.set;\n    const userEdgesStoreSetter = userEdgesStore.set;\n    let val = get(userEdgesStore);\n    edgesStore.set(val);\n    const _set = (eds) => {\n        nodesStoreSetter(eds);\n        userEdgesStoreSetter(eds);\n        val = eds;\n    };\n    edgesStore.set = userEdgesStore.set = _set;\n    edgesStore.update = userEdgesStore.update = (fn) => _set(fn(val));\n}\n// it is possible to pass a viewport store to SvelteFlow for having more control\n// if that's the case we need to sync the internal viewport with the user viewport\nexport const syncViewportStores = (panZoomStore, viewportStore, userViewportStore) => {\n    if (!userViewportStore) {\n        return;\n    }\n    const panZoom = get(panZoomStore);\n    const viewportStoreSetter = viewportStore.set;\n    const userViewportStoreSetter = userViewportStore.set;\n    let val = userViewportStore ? get(userViewportStore) : { x: 0, y: 0, zoom: 1 };\n    viewportStore.set(val);\n    viewportStore.set = (vp) => {\n        viewportStoreSetter(vp);\n        userViewportStoreSetter(vp);\n        val = vp;\n        return vp;\n    };\n    userViewportStore.set = (vp) => {\n        panZoom?.syncViewport(vp);\n        viewportStoreSetter(vp);\n        userViewportStoreSetter(vp);\n        val = vp;\n        return vp;\n    };\n    viewportStore.update = (fn) => {\n        viewportStore.set(fn(val));\n    };\n    userViewportStore.update = (fn) => {\n        userViewportStore.set(fn(val));\n    };\n};\n// we are creating a custom store for the internals nodes in order to update the zIndex and positionAbsolute.\n// The user only passes in relative positions, so we need to calculate the absolute positions based on the parent nodes.\nexport const createNodesStore = (nodes, nodeLookup, parentLookup, nodeOrigin = [0, 0], nodeExtent = infiniteExtent, fitViewQueued, fitViewOptions, fitViewResolver, panZoom, width, height, minZoom, maxZoom) => {\n    const { subscribe, set, update } = writable([]);\n    let value = nodes;\n    let defaults = {};\n    let elevateNodesOnSelect = true;\n    const _set = (nds) => {\n        const nodesInitialized = adoptUserNodes(nds, nodeLookup, parentLookup, {\n            elevateNodesOnSelect,\n            nodeOrigin,\n            nodeExtent,\n            defaults,\n            checkEquality: false\n        });\n        if (get(fitViewQueued) && nodesInitialized && get(panZoom)) {\n            const fitViewPromise = fitViewport({\n                nodes: nodeLookup,\n                width: get(width),\n                height: get(height),\n                panZoom: get(panZoom),\n                minZoom: get(minZoom),\n                maxZoom: get(maxZoom)\n            }, get(fitViewOptions));\n            fitViewPromise.then((value) => {\n                get(fitViewResolver)?.resolve(value);\n                fitViewResolver.set(null);\n            });\n            fitViewQueued.set(false);\n            fitViewOptions.set(undefined);\n        }\n        value = nds;\n        set(value);\n        return value;\n    };\n    const _update = (fn) => _set(fn(value));\n    const setDefaultOptions = (options) => {\n        defaults = options;\n    };\n    const setOptions = (options) => {\n        elevateNodesOnSelect = options.elevateNodesOnSelect ?? elevateNodesOnSelect;\n    };\n    _set(value);\n    return {\n        subscribe,\n        set: _set,\n        update: _update,\n        setDefaultOptions,\n        setOptions\n    };\n};\nexport const createEdgesStore = (edges, connectionLookup, edgeLookup, defaultOptions) => {\n    const { subscribe, set, update } = writable([]);\n    let value = edges;\n    let defaults = defaultOptions || {};\n    const _set = (eds) => {\n        const nextEdges = defaults ? eds.map((edge) => ({ ...defaults, ...edge })) : eds;\n        updateConnectionLookup(connectionLookup, edgeLookup, nextEdges);\n        value = nextEdges;\n        set(value);\n    };\n    const _update = (fn) => _set(fn(value));\n    const setDefaultOptions = (options) => {\n        defaults = options;\n    };\n    _set(value);\n    return {\n        subscribe,\n        set: _set,\n        update: _update,\n        setDefaultOptions\n    };\n};\n","import { readable, writable } from 'svelte/store';\nimport { infiniteExtent, SelectionMode, ConnectionMode, ConnectionLineType, devWarn, adoptUserNodes, getViewportForBounds, updateConnectionLookup, initialConnection, getInternalNodesBounds, withResolvers } from '@xyflow/system';\nimport DefaultNode from '../components/nodes/DefaultNode.svelte';\nimport InputNode from '../components/nodes/InputNode.svelte';\nimport OutputNode from '../components/nodes/OutputNode.svelte';\nimport GroupNode from '../components/nodes/GroupNode.svelte';\nimport { BezierEdgeInternal, SmoothStepEdgeInternal, StraightEdgeInternal, StepEdgeInternal } from '../components/edges';\nimport { createNodesStore, createEdgesStore } from './utils';\nexport const initialNodeTypes = {\n    input: InputNode,\n    output: OutputNode,\n    default: DefaultNode,\n    group: GroupNode\n};\nexport const initialEdgeTypes = {\n    straight: StraightEdgeInternal,\n    smoothstep: SmoothStepEdgeInternal,\n    default: BezierEdgeInternal,\n    step: StepEdgeInternal\n};\nexport const getInitialStore = ({ nodes = [], edges = [], width, height, fitView, nodeOrigin, nodeExtent }) => {\n    const nodeLookup = new Map();\n    const parentLookup = new Map();\n    const connectionLookup = new Map();\n    const edgeLookup = new Map();\n    const storeNodeOrigin = nodeOrigin ?? [0, 0];\n    const storeNodeExtent = nodeExtent ?? infiniteExtent;\n    adoptUserNodes(nodes, nodeLookup, parentLookup, {\n        nodeExtent: storeNodeExtent,\n        nodeOrigin: storeNodeOrigin,\n        elevateNodesOnSelect: false,\n        checkEquality: false\n    });\n    updateConnectionLookup(connectionLookup, edgeLookup, edges);\n    let viewport = { x: 0, y: 0, zoom: 1 };\n    if (fitView && width && height) {\n        const bounds = getInternalNodesBounds(nodeLookup, {\n            filter: (node) => !!((node.width || node.initialWidth) && (node.height || node.initialHeight))\n        });\n        viewport = getViewportForBounds(bounds, width, height, 0.5, 2, 0.1);\n    }\n    const fitViewQueued = writable(false);\n    const fitViewOptions = writable(undefined);\n    const fitViewResolver = writable(null);\n    const panZoom = writable(null);\n    const widthStore = writable(500);\n    const heightStore = writable(500);\n    const minZoom = writable(0.5);\n    const maxZoom = writable(2);\n    return {\n        flowId: writable(null),\n        nodes: createNodesStore(nodes, nodeLookup, parentLookup, storeNodeOrigin, storeNodeExtent, fitViewQueued, fitViewOptions, fitViewResolver, panZoom, widthStore, heightStore, minZoom, maxZoom),\n        nodeLookup: readable(nodeLookup),\n        parentLookup: readable(parentLookup),\n        edgeLookup: readable(edgeLookup),\n        visibleNodes: readable([]),\n        edges: createEdgesStore(edges, connectionLookup, edgeLookup),\n        visibleEdges: readable([]),\n        connectionLookup: readable(connectionLookup),\n        width: widthStore,\n        height: heightStore,\n        minZoom,\n        maxZoom,\n        nodeOrigin: writable(storeNodeOrigin),\n        nodeDragThreshold: writable(1),\n        nodeExtent: writable(storeNodeExtent),\n        translateExtent: writable(infiniteExtent),\n        autoPanOnNodeDrag: writable(true),\n        autoPanOnConnect: writable(true),\n        fitViewQueued,\n        fitViewOptions,\n        fitViewResolver,\n        panZoom,\n        snapGrid: writable(null),\n        dragging: writable(false),\n        selectionRect: writable(null),\n        selectionKeyPressed: writable(false),\n        multiselectionKeyPressed: writable(false),\n        deleteKeyPressed: writable(false),\n        panActivationKeyPressed: writable(false),\n        zoomActivationKeyPressed: writable(false),\n        selectionRectMode: writable(null),\n        selectionMode: writable(SelectionMode.Partial),\n        nodeTypes: writable(initialNodeTypes),\n        edgeTypes: writable(initialEdgeTypes),\n        viewport: writable(viewport),\n        connectionMode: writable(ConnectionMode.Strict),\n        domNode: writable(null),\n        connection: readable(initialConnection),\n        connectionLineType: writable(ConnectionLineType.Bezier),\n        connectionRadius: writable(20),\n        isValidConnection: writable(() => true),\n        nodesDraggable: writable(true),\n        nodesConnectable: writable(true),\n        elementsSelectable: writable(true),\n        selectNodesOnDrag: writable(true),\n        markers: readable([]),\n        defaultMarkerColor: writable('#b1b1b7'),\n        lib: readable('svelte'),\n        onlyRenderVisibleElements: writable(false),\n        onerror: writable(devWarn),\n        ondelete: writable(undefined),\n        onedgecreate: writable(undefined),\n        onconnect: writable(undefined),\n        onconnectstart: writable(undefined),\n        onconnectend: writable(undefined),\n        onbeforedelete: writable(undefined),\n        nodesInitialized: writable(false),\n        edgesInitialized: writable(false),\n        viewportInitialized: writable(false),\n        initialized: readable(false)\n    };\n};\n","import { derived } from 'svelte/store';\nimport { isEdgeVisible, getEdgePosition, getElevatedEdgeZIndex } from '@xyflow/system';\nexport function getVisibleEdges(store) {\n    const visibleEdges = derived([\n        store.edges,\n        store.nodes,\n        store.nodeLookup,\n        store.onlyRenderVisibleElements,\n        store.viewport,\n        store.width,\n        store.height\n    ], ([edges, , nodeLookup, onlyRenderVisibleElements, viewport, width, height]) => {\n        const visibleEdges = onlyRenderVisibleElements && width && height\n            ? edges.filter((edge) => {\n                const sourceNode = nodeLookup.get(edge.source);\n                const targetNode = nodeLookup.get(edge.target);\n                return (sourceNode &&\n                    targetNode &&\n                    isEdgeVisible({\n                        sourceNode,\n                        targetNode,\n                        width,\n                        height,\n                        transform: [viewport.x, viewport.y, viewport.zoom]\n                    }));\n            })\n            : edges;\n        return visibleEdges;\n    });\n    return derived([visibleEdges, store.nodes, store.nodeLookup, store.connectionMode, store.onerror], ([visibleEdges, , nodeLookup, connectionMode, onerror]) => {\n        const layoutedEdges = visibleEdges.reduce((res, edge) => {\n            const sourceNode = nodeLookup.get(edge.source);\n            const targetNode = nodeLookup.get(edge.target);\n            if (!sourceNode || !targetNode) {\n                return res;\n            }\n            const edgePosition = getEdgePosition({\n                id: edge.id,\n                sourceNode,\n                targetNode,\n                sourceHandle: edge.sourceHandle || null,\n                targetHandle: edge.targetHandle || null,\n                connectionMode,\n                onError: onerror\n            });\n            if (edgePosition) {\n                res.push({\n                    ...edge,\n                    zIndex: getElevatedEdgeZIndex({\n                        selected: edge.selected,\n                        zIndex: edge.zIndex,\n                        sourceNode,\n                        targetNode,\n                        elevateOnSelect: false\n                    }),\n                    ...edgePosition\n                });\n            }\n            return res;\n        }, []);\n        return layoutedEdges;\n    });\n}\n","import { derived } from 'svelte/store';\nimport { getNodesInside } from '@xyflow/system';\nexport function getVisibleNodes(store) {\n    return derived([\n        store.nodeLookup,\n        store.onlyRenderVisibleElements,\n        store.width,\n        store.height,\n        store.viewport,\n        store.nodes\n    ], ([nodeLookup, onlyRenderVisibleElements, width, height, viewport]) => {\n        const transform = [viewport.x, viewport.y, viewport.zoom];\n        return onlyRenderVisibleElements\n            ? getNodesInside(nodeLookup, { x: 0, y: 0, width, height }, transform, true)\n            : Array.from(nodeLookup.values());\n    });\n}\n","import { getContext, setContext } from 'svelte';\nimport { derived, get, writable } from 'svelte/store';\nimport { createMarkerIds, getElementsToRemove, panBy as panBySystem, updateNodeInternals as updateNodeInternalsSystem, addEdge as addEdgeUtil, initialConnection, errorMessages, pointToRendererPoint, updateAbsolutePositions, withResolvers } from '@xyflow/system';\nimport { initialEdgeTypes, initialNodeTypes, getInitialStore } from './initial-store';\nimport { syncNodeStores, syncEdgeStores, syncViewportStores } from './utils';\nimport { getVisibleEdges } from './visible-edges';\nimport { getVisibleNodes } from './visible-nodes';\nexport const key = Symbol();\nexport function createStore({ nodes, edges, width, height, fitView: fitViewOnCreate, nodeOrigin, nodeExtent }) {\n    const store = getInitialStore({\n        nodes,\n        edges,\n        width,\n        height,\n        fitView: fitViewOnCreate,\n        nodeOrigin,\n        nodeExtent\n    });\n    function setNodeTypes(nodeTypes) {\n        store.nodeTypes.set({\n            ...initialNodeTypes,\n            ...nodeTypes\n        });\n    }\n    function setEdgeTypes(edgeTypes) {\n        store.edgeTypes.set({\n            ...initialEdgeTypes,\n            ...edgeTypes\n        });\n    }\n    function addEdge(edgeParams) {\n        const edges = get(store.edges);\n        store.edges.set(addEdgeUtil(edgeParams, edges));\n    }\n    const updateNodePositions = (nodeDragItems, dragging = false) => {\n        const nodeLookup = get(store.nodeLookup);\n        for (const [id, dragItem] of nodeDragItems) {\n            const node = nodeLookup.get(id)?.internals.userNode;\n            if (!node) {\n                continue;\n            }\n            node.position = dragItem.position;\n            node.dragging = dragging;\n        }\n        store.nodes.update((nds) => nds);\n    };\n    function updateNodeInternals(updates) {\n        const nodeLookup = get(store.nodeLookup);\n        const parentLookup = get(store.parentLookup);\n        const { changes, updatedInternals } = updateNodeInternalsSystem(updates, nodeLookup, get(store.parentLookup), get(store.domNode), get(store.nodeOrigin));\n        if (!updatedInternals) {\n            return;\n        }\n        updateAbsolutePositions(nodeLookup, parentLookup, { nodeOrigin, nodeExtent });\n        for (const change of changes) {\n            const node = nodeLookup.get(change.id)?.internals.userNode;\n            if (!node) {\n                continue;\n            }\n            switch (change.type) {\n                case 'dimensions': {\n                    const measured = { ...node.measured, ...change.dimensions };\n                    if (change.setAttributes) {\n                        node.width = change.dimensions?.width ?? node.width;\n                        node.height = change.dimensions?.height ?? node.height;\n                    }\n                    node.measured = measured;\n                    break;\n                }\n                case 'position':\n                    node.position = change.position ?? node.position;\n                    break;\n            }\n        }\n        store.nodes.update((nds) => nds);\n        if (!get(store.nodesInitialized)) {\n            store.nodesInitialized.set(true);\n        }\n    }\n    function fitView(options) {\n        // We either create a new Promise or reuse the existing one\n        // Even if fitView is called multiple times in a row, we only end up with a single Promise\n        const fitViewResolver = get(store.fitViewResolver) ?? withResolvers();\n        // We schedule a fitView by setting fitViewQueued and triggering a setNodes\n        store.fitViewQueued.set(true);\n        store.fitViewOptions.set(options);\n        store.fitViewResolver.set(fitViewResolver);\n        store.nodes.set(get(store.nodes));\n        return fitViewResolver.promise;\n    }\n    function zoomBy(factor, options) {\n        const panZoom = get(store.panZoom);\n        if (!panZoom) {\n            return Promise.resolve(false);\n        }\n        return panZoom.scaleBy(factor, options);\n    }\n    function zoomIn(options) {\n        return zoomBy(1.2, options);\n    }\n    function zoomOut(options) {\n        return zoomBy(1 / 1.2, options);\n    }\n    function setMinZoom(minZoom) {\n        const panZoom = get(store.panZoom);\n        if (panZoom) {\n            panZoom.setScaleExtent([minZoom, get(store.maxZoom)]);\n            store.minZoom.set(minZoom);\n        }\n    }\n    function setMaxZoom(maxZoom) {\n        const panZoom = get(store.panZoom);\n        if (panZoom) {\n            panZoom.setScaleExtent([get(store.minZoom), maxZoom]);\n            store.maxZoom.set(maxZoom);\n        }\n    }\n    function setTranslateExtent(extent) {\n        const panZoom = get(store.panZoom);\n        if (panZoom) {\n            panZoom.setTranslateExtent(extent);\n            store.translateExtent.set(extent);\n        }\n    }\n    function resetSelectedElements(elements) {\n        let elementsChanged = false;\n        elements.forEach((element) => {\n            if (element.selected) {\n                element.selected = false;\n                elementsChanged = true;\n            }\n        });\n        return elementsChanged;\n    }\n    function setPaneClickDistance(distance) {\n        get(store.panZoom)?.setClickDistance(distance);\n    }\n    function unselectNodesAndEdges(params) {\n        const resetNodes = resetSelectedElements(params?.nodes || get(store.nodes));\n        if (resetNodes)\n            store.nodes.set(get(store.nodes));\n        const resetEdges = resetSelectedElements(params?.edges || get(store.edges));\n        if (resetEdges)\n            store.edges.set(get(store.edges));\n    }\n    store.deleteKeyPressed.subscribe(async (deleteKeyPressed) => {\n        if (deleteKeyPressed) {\n            const nodes = get(store.nodes);\n            const edges = get(store.edges);\n            const selectedNodes = nodes.filter((node) => node.selected);\n            const selectedEdges = edges.filter((edge) => edge.selected);\n            const { nodes: matchingNodes, edges: matchingEdges } = await getElementsToRemove({\n                nodesToRemove: selectedNodes,\n                edgesToRemove: selectedEdges,\n                nodes,\n                edges,\n                onBeforeDelete: get(store.onbeforedelete)\n            });\n            if (matchingNodes.length || matchingEdges.length) {\n                store.nodes.update((nds) => nds.filter((node) => !matchingNodes.some((mN) => mN.id === node.id)));\n                store.edges.update((eds) => eds.filter((edge) => !matchingEdges.some((mE) => mE.id === edge.id)));\n                get(store.ondelete)?.({\n                    nodes: matchingNodes,\n                    edges: matchingEdges\n                });\n            }\n        }\n    });\n    function addSelectedNodes(ids) {\n        const isMultiSelection = get(store.multiselectionKeyPressed);\n        store.nodes.update((ns) => ns.map((node) => {\n            const nodeWillBeSelected = ids.includes(node.id);\n            const selected = isMultiSelection\n                ? node.selected || nodeWillBeSelected\n                : nodeWillBeSelected;\n            // we need to mutate the node here in order to have the correct selected state in the drag handler\n            node.selected = selected;\n            return node;\n        }));\n        if (!isMultiSelection) {\n            store.edges.update((es) => es.map((edge) => {\n                edge.selected = false;\n                return edge;\n            }));\n        }\n    }\n    function addSelectedEdges(ids) {\n        const isMultiSelection = get(store.multiselectionKeyPressed);\n        store.edges.update((edges) => edges.map((edge) => {\n            const edgeWillBeSelected = ids.includes(edge.id);\n            const selected = isMultiSelection\n                ? edge.selected || edgeWillBeSelected\n                : edgeWillBeSelected;\n            edge.selected = selected;\n            return edge;\n        }));\n        if (!isMultiSelection) {\n            store.nodes.update((ns) => ns.map((node) => {\n                node.selected = false;\n                return node;\n            }));\n        }\n    }\n    function handleNodeSelection(id) {\n        const node = get(store.nodes)?.find((n) => n.id === id);\n        if (!node) {\n            console.warn('012', errorMessages['error012'](id));\n            return;\n        }\n        store.selectionRect.set(null);\n        store.selectionRectMode.set(null);\n        if (!node.selected) {\n            addSelectedNodes([id]);\n        }\n        else if (node.selected && get(store.multiselectionKeyPressed)) {\n            unselectNodesAndEdges({ nodes: [node], edges: [] });\n        }\n    }\n    function panBy(delta) {\n        const viewport = get(store.viewport);\n        return panBySystem({\n            delta,\n            panZoom: get(store.panZoom),\n            transform: [viewport.x, viewport.y, viewport.zoom],\n            translateExtent: get(store.translateExtent),\n            width: get(store.width),\n            height: get(store.height)\n        });\n    }\n    const _connection = writable(initialConnection);\n    const updateConnection = (newConnection) => {\n        _connection.set({ ...newConnection });\n    };\n    function cancelConnection() {\n        _connection.set(initialConnection);\n    }\n    function reset() {\n        store.selectionRect.set(null);\n        store.selectionRectMode.set(null);\n        store.snapGrid.set(null);\n        store.isValidConnection.set(() => true);\n        unselectNodesAndEdges();\n        cancelConnection();\n    }\n    return {\n        // state\n        ...store,\n        // derived state\n        visibleEdges: getVisibleEdges(store),\n        visibleNodes: getVisibleNodes(store),\n        connection: derived([_connection, store.viewport], ([connection, viewport]) => {\n            return connection.inProgress\n                ? {\n                    ...connection,\n                    to: pointToRendererPoint(connection.to, [viewport.x, viewport.y, viewport.zoom])\n                }\n                : { ...connection };\n        }),\n        markers: derived([store.edges, store.defaultMarkerColor, store.flowId], ([edges, defaultColor, id]) => createMarkerIds(edges, { defaultColor, id })),\n        initialized: (() => {\n            let initialized = false;\n            const initialNodesLength = get(store.nodes).length;\n            const initialEdgesLength = get(store.edges).length;\n            return derived([store.nodesInitialized, store.edgesInitialized, store.viewportInitialized], ([nodesInitialized, edgesInitialized, viewportInitialized]) => {\n                // If it was already initialized, return true from then on\n                if (initialized)\n                    return initialized;\n                // if it hasn't been initialised check if it's now\n                if (initialNodesLength === 0) {\n                    initialized = viewportInitialized;\n                }\n                else if (initialEdgesLength === 0) {\n                    initialized = viewportInitialized && nodesInitialized;\n                }\n                else {\n                    initialized = viewportInitialized && nodesInitialized && edgesInitialized;\n                }\n                return initialized;\n            });\n        })(),\n        // actions\n        syncNodeStores: (nodes) => syncNodeStores(store.nodes, nodes),\n        syncEdgeStores: (edges) => syncEdgeStores(store.edges, edges),\n        syncViewport: (viewport) => syncViewportStores(store.panZoom, store.viewport, viewport),\n        setNodeTypes,\n        setEdgeTypes,\n        addEdge,\n        updateNodePositions,\n        updateNodeInternals,\n        zoomIn,\n        zoomOut,\n        fitView: (options) => fitView(options),\n        setMinZoom,\n        setMaxZoom,\n        setTranslateExtent,\n        setPaneClickDistance,\n        unselectNodesAndEdges,\n        addSelectedNodes,\n        addSelectedEdges,\n        handleNodeSelection,\n        panBy,\n        updateConnection,\n        cancelConnection,\n        reset\n    };\n}\nexport function useStore() {\n    const store = getContext(key);\n    if (!store) {\n        throw new Error('In order to use useStore you need to wrap your component in a <SvelteFlowProvider />');\n    }\n    return store.getStore();\n}\nexport function createStoreContext({ nodes, edges, width, height, fitView, nodeOrigin, nodeExtent }) {\n    const store = createStore({ nodes, edges, width, height, fitView, nodeOrigin, nodeExtent });\n    setContext(key, {\n        getStore: () => store\n    });\n    return store;\n}\n","import { PanOnScrollMode, XYPanZoom } from '@xyflow/system';\nexport default function zoom(domNode, params) {\n    const { panZoom, minZoom, maxZoom, initialViewport, viewport, dragging, translateExtent, paneClickDistance } = params;\n    const panZoomInstance = XYPanZoom({\n        domNode,\n        minZoom,\n        maxZoom,\n        translateExtent,\n        viewport: initialViewport,\n        paneClickDistance,\n        onDraggingChange: dragging.set\n    });\n    const currentViewport = panZoomInstance.getViewport();\n    viewport.set(currentViewport);\n    panZoom.set(panZoomInstance);\n    panZoomInstance.update(params);\n    return {\n        update(params) {\n            panZoomInstance.update(params);\n        }\n    };\n}\n","<script>import { onMount } from 'svelte';\nimport { PanOnScrollMode } from '@xyflow/system';\nimport { useStore } from '../../store';\nimport zoom from '../../actions/zoom';\nexport let initialViewport = undefined;\nexport let onMoveStart = undefined;\nexport let onMove = undefined;\nexport let onMoveEnd = undefined;\nexport let panOnScrollMode;\nexport let preventScrolling;\nexport let zoomOnScroll;\nexport let zoomOnDoubleClick;\nexport let zoomOnPinch;\nexport let panOnDrag;\nexport let panOnScroll;\nexport let paneClickDistance;\nconst { viewport, panZoom, selectionRect, minZoom, maxZoom, dragging, translateExtent, lib, panActivationKeyPressed, zoomActivationKeyPressed, viewportInitialized } = useStore();\n$: viewPort = initialViewport || { x: 0, y: 0, zoom: 1 };\n$: _panOnDrag = $panActivationKeyPressed || panOnDrag;\n$: _panOnScroll = $panActivationKeyPressed || panOnScroll;\nconst onTransformChange = (transform) => viewport.set({ x: transform[0], y: transform[1], zoom: transform[2] });\nonMount(() => {\n    $viewportInitialized = true;\n});\n</script>\n\n<div\n  class=\"svelte-flow__zoom\"\n  use:zoom={{\n    viewport,\n    minZoom: $minZoom,\n    maxZoom: $maxZoom,\n    initialViewport: viewPort,\n    dragging,\n    panZoom,\n    onPanZoomStart: onMoveStart,\n    onPanZoom: onMove,\n    onPanZoomEnd: onMoveEnd,\n    zoomOnScroll,\n    zoomOnDoubleClick,\n    zoomOnPinch,\n    panOnScroll: _panOnScroll,\n    panOnDrag: _panOnDrag,\n    panOnScrollSpeed: 0.5,\n    panOnScrollMode: panOnScrollMode || PanOnScrollMode.Free,\n    zoomActivationKeyPressed: $zoomActivationKeyPressed,\n    preventScrolling: typeof preventScrolling === 'boolean' ? preventScrolling : true,\n    noPanClassName: 'nopan',\n    noWheelClassName: 'nowheel',\n    userSelectionActive: !!$selectionRect,\n    translateExtent: $translateExtent,\n    lib: $lib,\n    paneClickDistance,\n    onTransformChange\n  }}\n>\n  <slot />\n</div>\n\n<style>\n  .svelte-flow__zoom {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 4;\n  }\n</style>\n","<script context=\"module\">export function wrapHandler(handler, container) {\n    return (event) => {\n        if (event.target !== container) {\n            return;\n        }\n        handler?.(event);\n    };\n}\nexport function toggleSelected(ids) {\n    return (item) => {\n        const isSelected = ids.includes(item.id);\n        if (item.selected !== isSelected) {\n            item.selected = isSelected;\n        }\n        return item;\n    };\n}\n</script>\n\n<script>import { createEventDispatcher } from 'svelte';\nimport { SelectionMode, getEventPosition, getNodesInside, getConnectedEdges } from '@xyflow/system';\nimport { useStore } from '../../store';\nexport let panOnDrag = undefined;\nexport let selectionOnDrag = undefined;\nconst dispatch = createEventDispatcher();\nconst { nodes, nodeLookup, edges, viewport, dragging, elementsSelectable, selectionRect, selectionRectMode, selectionKeyPressed, selectionMode, panActivationKeyPressed, unselectNodesAndEdges, connection, } = useStore();\nlet container;\nlet containerBounds = null;\nlet selectedNodes = [];\n$: _panOnDrag = $panActivationKeyPressed || panOnDrag;\n$: isSelecting =\n    $selectionKeyPressed || $selectionRect || (selectionOnDrag && _panOnDrag !== true);\n$: hasActiveSelection = $elementsSelectable && (isSelecting || $selectionRectMode === 'user');\n// Used to prevent click events when the user lets go of the selectionKey during a selection\nlet selectionInProgress = false;\nfunction onClick(event) {\n    // We prevent click events when the user let go of the selectionKey during a selection\n    // We also prevent click events when a connection is in progress\n    if (selectionInProgress || $connection.inProgress) {\n        selectionInProgress = false;\n        return;\n    }\n    dispatch('paneclick', { event });\n    unselectNodesAndEdges();\n    selectionRectMode.set(null);\n}\nfunction onPointerDown(event) {\n    containerBounds = container.getBoundingClientRect();\n    if (!elementsSelectable ||\n        !isSelecting ||\n        event.button !== 0 ||\n        event.target !== container ||\n        !containerBounds) {\n        return;\n    }\n    event.target?.setPointerCapture?.(event.pointerId);\n    const { x, y } = getEventPosition(event, containerBounds);\n    unselectNodesAndEdges();\n    selectionRect.set({\n        width: 0,\n        height: 0,\n        startX: x,\n        startY: y,\n        x,\n        y\n    });\n    // onSelectionStart?.(event);\n}\nfunction onPointerMove(event) {\n    if (!isSelecting || !containerBounds || !$selectionRect) {\n        return;\n    }\n    selectionInProgress = true;\n    const mousePos = getEventPosition(event, containerBounds);\n    const startX = $selectionRect.startX ?? 0;\n    const startY = $selectionRect.startY ?? 0;\n    const nextUserSelectRect = {\n        ...$selectionRect,\n        x: mousePos.x < startX ? mousePos.x : startX,\n        y: mousePos.y < startY ? mousePos.y : startY,\n        width: Math.abs(mousePos.x - startX),\n        height: Math.abs(mousePos.y - startY)\n    };\n    const prevSelectedNodeIds = selectedNodes.map((n) => n.id);\n    const prevSelectedEdgeIds = getConnectedEdges(selectedNodes, $edges).map((e) => e.id);\n    selectedNodes = getNodesInside($nodeLookup, nextUserSelectRect, [$viewport.x, $viewport.y, $viewport.zoom], $selectionMode === SelectionMode.Partial, true);\n    const selectedEdgeIds = getConnectedEdges(selectedNodes, $edges).map((e) => e.id);\n    const selectedNodeIds = selectedNodes.map((n) => n.id);\n    // this prevents unnecessary updates while updating the selection rectangle\n    if (prevSelectedNodeIds.length !== selectedNodeIds.length ||\n        selectedNodeIds.some((id) => !prevSelectedNodeIds.includes(id))) {\n        nodes.update((nodes) => nodes.map(toggleSelected(selectedNodeIds)));\n    }\n    if (prevSelectedEdgeIds.length !== selectedEdgeIds.length ||\n        selectedEdgeIds.some((id) => !prevSelectedEdgeIds.includes(id))) {\n        edges.update((edges) => edges.map(toggleSelected(selectedEdgeIds)));\n    }\n    selectionRectMode.set('user');\n    selectionRect.set(nextUserSelectRect);\n}\nfunction onPointerUp(event) {\n    if (event.button !== 0) {\n        return;\n    }\n    event.target?.releasePointerCapture?.(event.pointerId);\n    // We only want to trigger click functions when in selection mode if\n    // the user did not move the mouse.\n    if (!isSelecting && $selectionRectMode === 'user' && event.target === container) {\n        onClick?.(event);\n    }\n    selectionRect.set(null);\n    if (selectedNodes.length > 0) {\n        $selectionRectMode = 'nodes';\n    }\n    // If the user kept holding the selectionKey during the selection,\n    // we need to reset the selectionInProgress, so the next click event is not prevented\n    if ($selectionKeyPressed) {\n        selectionInProgress = false;\n    }\n    // onSelectionEnd?.(event);\n}\nconst onContextMenu = (event) => {\n    if (Array.isArray(_panOnDrag) && _panOnDrag?.includes(2)) {\n        event.preventDefault();\n        return;\n    }\n    dispatch('panecontextmenu', { event });\n};\n</script>\n\n<!-- svelte-ignore a11y-no-static-element-interactions -->\n<!-- svelte-ignore a11y-click-events-have-key-events -->\n<div\n  bind:this={container}\n  class=\"svelte-flow__pane\"\n  class:draggable={panOnDrag === true || (Array.isArray(panOnDrag) && panOnDrag.includes(0))}\n  class:dragging={$dragging}\n  class:selection={isSelecting}\n  on:click={hasActiveSelection ? undefined : wrapHandler(onClick, container)}\n  on:pointerdown={hasActiveSelection ? onPointerDown : undefined}\n  on:pointermove={hasActiveSelection ? onPointerMove : undefined}\n  on:pointerup={hasActiveSelection ? onPointerUp : undefined}\n  on:contextmenu={wrapHandler(onContextMenu, container)}\n>\n  <slot />\n</div>\n\n<style>\n  .svelte-flow__pane {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n</style>\n","<script>import { useStore } from '../../store';\nconst { viewport } = useStore();\n</script>\n\n<div\n  class=\"svelte-flow__viewport xyflow__viewport\"\n  style=\"transform: translate({$viewport.x}px, {$viewport.y}px) scale({$viewport.zoom})\"\n>\n  <slot />\n</div>\n\n<style>\n  .svelte-flow__viewport {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n</style>\n","import { get } from 'svelte/store';\nimport { XYDrag } from '@xyflow/system';\nexport default function drag(domNode, params) {\n    const { store, onDrag, onDragStart, onDragStop, onNodeMouseDown } = params;\n    const dragInstance = XYDrag({\n        onDrag,\n        onDragStart,\n        onDragStop,\n        onNodeMouseDown,\n        getStoreItems: () => {\n            const snapGrid = get(store.snapGrid);\n            const vp = get(store.viewport);\n            return {\n                nodes: get(store.nodes),\n                nodeLookup: get(store.nodeLookup),\n                edges: get(store.edges),\n                nodeExtent: get(store.nodeExtent),\n                snapGrid: snapGrid ? snapGrid : [0, 0],\n                snapToGrid: !!snapGrid,\n                nodeOrigin: get(store.nodeOrigin),\n                multiSelectionActive: get(store.multiselectionKeyPressed),\n                domNode: get(store.domNode),\n                transform: [vp.x, vp.y, vp.zoom],\n                autoPanOnNodeDrag: get(store.autoPanOnNodeDrag),\n                nodesDraggable: get(store.nodesDraggable),\n                selectNodesOnDrag: get(store.selectNodesOnDrag),\n                nodeDragThreshold: get(store.nodeDragThreshold),\n                unselectNodesAndEdges: store.unselectNodesAndEdges,\n                updateNodePositions: store.updateNodePositions,\n                panBy: store.panBy\n            };\n        }\n    });\n    function updateDrag(domNode, params) {\n        if (params.disabled) {\n            dragInstance.destroy();\n            return;\n        }\n        dragInstance.update({\n            domNode,\n            noDragClassName: params.noDragClass,\n            handleSelector: params.handleSelector,\n            nodeId: params.nodeId,\n            isSelectable: params.isSelectable,\n            nodeClickDistance: params.nodeClickDistance\n        });\n    }\n    updateDrag(domNode, params);\n    return {\n        update(params) {\n            updateDrag(domNode, params);\n        },\n        destroy() {\n            dragInstance.destroy();\n        }\n    };\n}\n","export function getNodeInlineStyleDimensions({ width, height, initialWidth, initialHeight, measuredWidth, measuredHeight }) {\n    if (measuredWidth === undefined && measuredHeight === undefined) {\n        const styleWidth = width ?? initialWidth;\n        const styleHeight = height ?? initialHeight;\n        return {\n            width: styleWidth ? `width:${styleWidth}px;` : '',\n            height: styleHeight ? `height:${styleHeight}px;` : ''\n        };\n    }\n    return {\n        width: width ? `width:${width}px;` : '',\n        height: height ? `height:${height}px;` : ''\n    };\n}\n","<svelte:options immutable />\n\n<script>import { setContext, onDestroy, createEventDispatcher } from 'svelte';\nimport { get, writable } from 'svelte/store';\nimport cc from 'classcat';\nimport { errorMessages, Position } from '@xyflow/system';\nimport drag from '../../actions/drag';\nimport { useStore } from '../../store';\nimport DefaultNode from '../nodes/DefaultNode.svelte';\nimport { getNodeInlineStyleDimensions } from './utils';\nexport let node;\nexport let id;\nexport let data = {};\nexport let selected = false;\nexport let draggable = undefined;\nexport let selectable = undefined;\nexport let connectable = true;\nexport let deletable = true;\nexport let hidden = false;\nexport let dragging = false;\nexport let resizeObserver = null;\nexport let style = undefined;\nexport let type = 'default';\nexport let isParent = false;\nexport let positionX;\nexport let positionY;\nexport let sourcePosition = undefined;\nexport let targetPosition = undefined;\nexport let zIndex;\nexport let measuredWidth = undefined;\nexport let measuredHeight = undefined;\nexport let initialWidth = undefined;\nexport let initialHeight = undefined;\nexport let width = undefined;\nexport let height = undefined;\nexport let dragHandle = undefined;\nexport let initialized = false;\nexport let parentId = undefined;\nexport let nodeClickDistance = undefined;\nlet className = '';\nexport { className as class };\nconst store = useStore();\nconst { nodeTypes, nodeDragThreshold, selectNodesOnDrag, handleNodeSelection, updateNodeInternals, elementsSelectable, nodesDraggable } = store;\nlet nodeRef;\nlet prevNodeRef = null;\nconst dispatchNodeEvent = createEventDispatcher();\nconst connectableStore = writable(connectable);\nlet prevType = undefined;\nlet prevSourcePosition = undefined;\nlet prevTargetPosition = undefined;\n$: nodeType = type || 'default';\n$: nodeTypeValid = !!$nodeTypes[nodeType];\n$: nodeComponent = $nodeTypes[nodeType] || DefaultNode;\n$: {\n    if (!nodeTypeValid) {\n        console.warn('003', errorMessages['error003'](type));\n    }\n}\n$: inlineStyleDimensions = getNodeInlineStyleDimensions({\n    width,\n    height,\n    initialWidth,\n    initialHeight,\n    measuredWidth,\n    measuredHeight\n});\n$: {\n    connectableStore.set(!!connectable);\n}\n$: {\n    // if type, sourcePosition or targetPosition changes,\n    // we need to re-calculate the handle positions\n    const doUpdate = (prevType && nodeType !== prevType) ||\n        (prevSourcePosition && sourcePosition !== prevSourcePosition) ||\n        (prevTargetPosition && targetPosition !== prevTargetPosition);\n    if (doUpdate) {\n        requestAnimationFrame(() => updateNodeInternals(new Map([\n            [\n                id,\n                {\n                    id,\n                    nodeElement: nodeRef,\n                    force: true\n                }\n            ]\n        ])));\n    }\n    prevType = nodeType;\n    prevSourcePosition = sourcePosition;\n    prevTargetPosition = targetPosition;\n}\nsetContext('svelteflow__node_id', id);\nsetContext('svelteflow__node_connectable', connectableStore);\n$: {\n    if (resizeObserver && (nodeRef !== prevNodeRef || !initialized)) {\n        prevNodeRef && resizeObserver.unobserve(prevNodeRef);\n        nodeRef && resizeObserver.observe(nodeRef);\n        prevNodeRef = nodeRef;\n    }\n}\nonDestroy(() => {\n    if (prevNodeRef) {\n        resizeObserver?.unobserve(prevNodeRef);\n    }\n});\nfunction onSelectNodeHandler(event) {\n    if (selectable && (!get(selectNodesOnDrag) || !draggable || get(nodeDragThreshold) > 0)) {\n        // this handler gets called by XYDrag on drag start when selectNodesOnDrag=true\n        // here we only need to call it when selectNodesOnDrag=false\n        handleNodeSelection(id);\n    }\n    dispatchNodeEvent('nodeclick', { node: node.internals.userNode, event });\n}\n</script>\n\n<!-- svelte-ignore a11y-click-events-have-key-events -->\n<!-- svelte-ignore a11y-no-static-element-interactions -->\n{#if !hidden}\n  <div\n    use:drag={{\n      nodeId: id,\n      isSelectable: selectable,\n      disabled: false,\n      handleSelector: dragHandle,\n      noDragClass: 'nodrag',\n      nodeClickDistance,\n      onNodeMouseDown: handleNodeSelection,\n      onDrag: (event, _, targetNode, nodes) => {\n        dispatchNodeEvent('nodedrag', { event, targetNode, nodes });\n      },\n      onDragStart: (event, _, targetNode, nodes) => {\n        dispatchNodeEvent('nodedragstart', { event, targetNode, nodes });\n      },\n      onDragStop: (event, _, targetNode, nodes) => {\n        dispatchNodeEvent('nodedragstop', { event, targetNode, nodes });\n      },\n      store\n    }}\n    bind:this={nodeRef}\n    data-id={id}\n    class={cc(['svelte-flow__node', `svelte-flow__node-${nodeType}`, className])}\n    class:dragging\n    class:selected\n    class:draggable\n    class:connectable\n    class:selectable\n    class:nopan={draggable}\n    class:parent={isParent}\n    style:z-index={zIndex}\n    style:transform=\"translate({positionX}px, {positionY}px)\"\n    style:visibility={initialized ? 'visible' : 'hidden'}\n    style=\"{style ?? ''};{inlineStyleDimensions.width}{inlineStyleDimensions.height}\"\n    on:click={onSelectNodeHandler}\n    on:mouseenter={(event) => dispatchNodeEvent('nodemouseenter', { node, event })}\n    on:mouseleave={(event) => dispatchNodeEvent('nodemouseleave', { node, event })}\n    on:mousemove={(event) => dispatchNodeEvent('nodemousemove', { node, event })}\n    on:contextmenu={(event) => dispatchNodeEvent('nodecontextmenu', { node, event })}\n  >\n    <svelte:component\n      this={nodeComponent}\n      {data}\n      {id}\n      selected={selected ?? false}\n      selectable={selectable ?? $elementsSelectable ?? true}\n      deletable={deletable ?? true}\n      {sourcePosition}\n      {targetPosition}\n      {zIndex}\n      {dragging}\n      draggable={draggable ?? $nodesDraggable ?? true}\n      {dragHandle}\n      {parentId}\n      type={nodeType}\n      isConnectable={$connectableStore}\n      positionAbsoluteX={positionX}\n      positionAbsoluteY={positionY}\n      {width}\n      {height}\n    />\n  </div>\n{/if}\n","<script>import { onDestroy } from 'svelte';\nimport { nodeHasDimensions } from '@xyflow/system';\nimport { NodeWrapper } from '../../components/NodeWrapper';\nimport { useStore } from '../../store';\nexport let nodeClickDistance = 0;\nconst { visibleNodes, nodesDraggable, nodesConnectable, elementsSelectable, updateNodeInternals, parentLookup } = useStore();\nconst resizeObserver = typeof ResizeObserver === 'undefined'\n    ? null\n    : new ResizeObserver((entries) => {\n        const updates = new Map();\n        entries.forEach((entry) => {\n            const id = entry.target.getAttribute('data-id');\n            updates.set(id, {\n                id,\n                nodeElement: entry.target,\n                force: true\n            });\n        });\n        updateNodeInternals(updates);\n    });\nonDestroy(() => {\n    resizeObserver?.disconnect();\n});\n</script>\n\n<div class=\"svelte-flow__nodes\">\n  {#each $visibleNodes as node (node.id)}\n    <NodeWrapper\n      {node}\n      id={node.id}\n      data={node.data}\n      selected={!!node.selected}\n      hidden={!!node.hidden}\n      draggable={!!(node.draggable || ($nodesDraggable && typeof node.draggable === 'undefined'))}\n      selectable={!!(\n        node.selectable ||\n        ($elementsSelectable && typeof node.selectable === 'undefined')\n      )}\n      connectable={!!(\n        node.connectable ||\n        ($nodesConnectable && typeof node.connectable === 'undefined')\n      )}\n      deletable={node.deletable ?? true}\n      positionX={node.internals.positionAbsolute.x}\n      positionY={node.internals.positionAbsolute.y}\n      isParent={$parentLookup.has(node.id)}\n      style={node.style}\n      class={node.class}\n      type={node.type ?? 'default'}\n      sourcePosition={node.sourcePosition}\n      targetPosition={node.targetPosition}\n      dragging={node.dragging}\n      zIndex={node.internals.z ?? 0}\n      dragHandle={node.dragHandle}\n      initialized={nodeHasDimensions(node)}\n      width={node.width}\n      height={node.height}\n      initialWidth={node.initialWidth}\n      initialHeight={node.initialHeight}\n      measuredWidth={node.measured.width}\n      measuredHeight={node.measured.height}\n      parentId={node.parentId}\n      {resizeObserver}\n      {nodeClickDistance}\n      on:nodeclick\n      on:nodemouseenter\n      on:nodemousemove\n      on:nodemouseleave\n      on:nodedrag\n      on:nodedragstart\n      on:nodedragstop\n      on:nodecontextmenu\n    />\n  {/each}\n</div>\n\n<style>\n  .svelte-flow__nodes {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n  }\n</style>\n","<svelte:options immutable />\n\n<script>import { createEventDispatcher, setContext } from 'svelte';\nimport cc from 'classcat';\nimport { getMarkerId } from '@xyflow/system';\nimport { useStore } from '../../store';\nimport { BezierEdgeInternal } from '../edges';\nimport { useHandleEdgeSelect } from '../../hooks/useHandleEdgeSelect';\nexport let id;\nexport let type = 'default';\nexport let source = '';\nexport let target = '';\nexport let data = {};\nexport let style = undefined;\nexport let zIndex = undefined;\nexport let animated = false;\nexport let selected = false;\nexport let selectable = undefined;\nexport let deletable = undefined;\nexport let hidden = false;\nexport let label = undefined;\nexport let labelStyle = undefined;\nexport let markerStart = undefined;\nexport let markerEnd = undefined;\nexport let sourceHandle = undefined;\nexport let targetHandle = undefined;\nexport let sourceX;\nexport let sourceY;\nexport let targetX;\nexport let targetY;\nexport let sourcePosition;\nexport let targetPosition;\nexport let ariaLabel = undefined;\nexport let interactionWidth = undefined;\n// @ todo: support edge updates\nlet className = '';\nexport { className as class };\nsetContext('svelteflow__edge_id', id);\nconst { edgeLookup, edgeTypes, flowId, elementsSelectable } = useStore();\nconst dispatch = createEventDispatcher();\n$: edgeType = type || 'default';\n$: edgeComponent = $edgeTypes[edgeType] || BezierEdgeInternal;\n$: markerStartUrl = markerStart ? `url('#${getMarkerId(markerStart, $flowId)}')` : undefined;\n$: markerEndUrl = markerEnd ? `url('#${getMarkerId(markerEnd, $flowId)}')` : undefined;\n$: isSelectable = selectable ?? $elementsSelectable;\nconst handleEdgeSelect = useHandleEdgeSelect();\nfunction onClick(event) {\n    const edge = $edgeLookup.get(id);\n    if (edge) {\n        handleEdgeSelect(id);\n        dispatch('edgeclick', { event, edge });\n    }\n}\nfunction onMouseEvent(event, type) {\n    const edge = $edgeLookup.get(id);\n    if (edge) {\n        dispatch(type, { event, edge });\n    }\n}\n</script>\n\n<!-- svelte-ignore a11y-click-events-have-key-events -->\n<!-- svelte-ignore a11y-no-noninteractive-element-interactions -->\n{#if !hidden}\n  <svg style:z-index={zIndex}>\n    <g\n      class={cc(['svelte-flow__edge', className])}\n      class:animated\n      class:selected\n      class:selectable={isSelectable}\n      data-id={id}\n      on:click={onClick}\n      on:contextmenu={(e) => {\n        onMouseEvent(e, 'edgecontextmenu');\n      }}\n      on:mouseenter={(e) => {\n        onMouseEvent(e, 'edgemouseenter');\n      }}\n      on:mouseleave={(e) => {\n        onMouseEvent(e, 'edgemouseleave');\n      }}\n      aria-label={ariaLabel === null\n        ? undefined\n        : ariaLabel\n          ? ariaLabel\n          : `Edge from ${source} to ${target}`}\n      role=\"img\"\n    >\n      <svelte:component\n        this={edgeComponent}\n        {id}\n        {source}\n        {target}\n        {sourceX}\n        {sourceY}\n        {targetX}\n        {targetY}\n        {sourcePosition}\n        {targetPosition}\n        {animated}\n        {selected}\n        {label}\n        {labelStyle}\n        {data}\n        {style}\n        {interactionWidth}\n        selectable={isSelectable}\n        deletable={deletable ?? true}\n        type={edgeType}\n        sourceHandleId={sourceHandle}\n        targetHandleId={targetHandle}\n        markerStart={markerStartUrl}\n        markerEnd={markerEndUrl}\n      />\n    </g>\n  </svg>\n{/if}\n","<script>import { onMount } from 'svelte';\nlet _onMount = undefined;\nexport { _onMount as onMount };\nlet _onDestroy = undefined;\nexport { _onDestroy as onDestroy };\nonMount(() => {\n    _onMount?.();\n    return _onDestroy;\n});\n</script>\n","<script>import { useStore } from '../../../store';\nimport { Marker } from './';\nconst { markers } = useStore();\n</script>\n\n<defs>\n  {#each $markers as marker (marker.id)}\n    <Marker {...marker} />\n  {/each}\n</defs>\n","<script>import { MarkerType } from '@xyflow/system';\nexport let id;\nexport let type;\nexport let width = 12.5;\nexport let height = 12.5;\nexport let markerUnits = 'strokeWidth';\nexport let orient = 'auto-start-reverse';\nexport let color = undefined;\nexport let strokeWidth = undefined;\n</script>\n\n<marker\n  class=\"svelte-flow__arrowhead\"\n  {id}\n  markerWidth={`${width}`}\n  markerHeight={`${height}`}\n  viewBox=\"-10 -10 20 20\"\n  {markerUnits}\n  {orient}\n  refX=\"0\"\n  refY=\"0\"\n>\n  {#if type === MarkerType.Arrow}\n    <polyline\n      stroke={color}\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n      stroke-width={strokeWidth}\n      fill=\"none\"\n      points=\"-5,-4 0,0 -5,4\"\n    />\n  {:else if type === MarkerType.ArrowClosed}\n    <polyline\n      stroke={color}\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n      stroke-width={strokeWidth}\n      fill={color}\n      points=\"-5,-4 0,0 -5,4 -5,-4\"\n    />\n  {/if}\n</marker>\n","<script>import { onMount } from 'svelte';\nimport { EdgeWrapper } from '../../components/EdgeWrapper';\nimport { CallOnMount } from '../../components/CallOnMount';\nimport { MarkerDefinition } from './MarkerDefinition';\nimport { useStore } from '../../store';\nexport let defaultEdgeOptions;\nconst { visibleEdges, edgesInitialized, edges: { setDefaultOptions }, elementsSelectable } = useStore();\nonMount(() => {\n    if (defaultEdgeOptions)\n        setDefaultOptions(defaultEdgeOptions);\n});\n</script>\n\n<div class=\"svelte-flow__edges\">\n  <svg class=\"svelte-flow__marker\">\n    <MarkerDefinition />\n  </svg>\n\n  {#each $visibleEdges as edge (edge.id)}\n    <EdgeWrapper\n      id={edge.id}\n      source={edge.source}\n      target={edge.target}\n      data={edge.data}\n      style={edge.style}\n      animated={edge.animated}\n      selected={edge.selected}\n      selectable={edge.selectable ?? $elementsSelectable}\n      deletable={edge.deletable}\n      hidden={edge.hidden}\n      label={edge.label}\n      labelStyle={edge.labelStyle}\n      markerStart={edge.markerStart}\n      markerEnd={edge.markerEnd}\n      sourceHandle={edge.sourceHandle}\n      targetHandle={edge.targetHandle}\n      sourceX={edge.sourceX}\n      sourceY={edge.sourceY}\n      targetX={edge.targetX}\n      targetY={edge.targetY}\n      sourcePosition={edge.sourcePosition}\n      targetPosition={edge.targetPosition}\n      ariaLabel={edge.ariaLabel}\n      interactionWidth={edge.interactionWidth}\n      class={edge.class}\n      type={edge.type || 'default'}\n      zIndex={edge.zIndex}\n      on:edgeclick\n      on:edgecontextmenu\n      on:edgemouseenter\n      on:edgemouseleave\n    />\n  {/each}\n\n  {#if $visibleEdges.length > 0}\n    <CallOnMount\n      onMount={() => {\n        $edgesInitialized = true;\n      }}\n      onDestroy={() => {\n        $edgesInitialized = false;\n      }}\n    />\n  {/if}\n</div>\n","<script>export let x = 0;\nexport let y = 0;\nexport let width = 0;\nexport let height = 0;\nexport let isVisible = true;\n</script>\n\n{#if isVisible}\n  <div\n    class=\"svelte-flow__selection\"\n    style:width={typeof width === 'string' ? width : `${width}px`}\n    style:height={typeof height === 'string' ? height : `${height}px`}\n    style:transform={`translate(${x}px, ${y}px)`}\n  />\n{/if}\n\n<style>\n  .svelte-flow__selection {\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n</style>\n","<script>import { useStore } from '../../store';\nimport { Selection } from '../Selection';\nconst { selectionRect, selectionRectMode } = useStore();\n</script>\n\n<Selection\n  isVisible={!!($selectionRect && $selectionRectMode === 'user')}\n  width={$selectionRect?.width}\n  height={$selectionRect?.height}\n  x={$selectionRect?.x}\n  y={$selectionRect?.y}\n/>\n","<script>import { createEventDispatcher } from 'svelte';\nimport { getInternalNodesBounds, isNumeric } from '@xyflow/system';\nimport { useStore } from '../../store';\nimport { Selection } from '../Selection';\nimport drag from '../../actions/drag';\nconst store = useStore();\nconst { selectionRectMode, nodes, nodeLookup } = store;\nconst dispatch = createEventDispatcher();\nlet bounds = null;\n$: if ($selectionRectMode === 'nodes') {\n    bounds = getInternalNodesBounds($nodeLookup, { filter: (node) => !!node.selected });\n    $nodes;\n}\nfunction onContextMenu(event) {\n    const selectedNodes = $nodes.filter((n) => n.selected);\n    dispatch('selectioncontextmenu', { nodes: selectedNodes, event });\n}\nfunction onClick(event) {\n    const selectedNodes = $nodes.filter((n) => n.selected);\n    dispatch('selectionclick', { nodes: selectedNodes, event });\n}\n</script>\n\n{#if $selectionRectMode === 'nodes' && bounds && isNumeric(bounds.x) && isNumeric(bounds.y)}\n  <div\n    class=\"selection-wrapper nopan\"\n    style=\"width: {bounds.width}px; height: {bounds.height}px; transform: translate({bounds.x}px, {bounds.y}px)\"\n    use:drag={{\n      disabled: false,\n      store,\n      onDrag: (event, _, __, nodes) => {\n        dispatch('nodedrag', { event, targetNode: null, nodes });\n      },\n      onDragStart: (event, _, __, nodes) => {\n        dispatch('nodedragstart', { event, targetNode: null, nodes });\n      },\n      onDragStop: (event, _, __, nodes) => {\n        dispatch('nodedragstop', { event, targetNode: null, nodes });\n      }\n    }}\n    on:contextmenu={onContextMenu}\n    on:click={onClick}\n    role=\"button\"\n    tabindex=\"-1\"\n    on:keyup={() => {}}\n  >\n    <Selection width=\"100%\" height=\"100%\" x={0} y={0} />\n  </div>\n{/if}\n\n<style>\n  .selection-wrapper {\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 7;\n    pointer-events: all;\n  }\n</style>\n","/**\n * Listen for keyboard event and trigger `shortcut` {@link https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent | CustomEvent }\n * @example Typical usage\n *\n * ```svelte\n * <script lang=\"ts\">\n *  import { shortcut, type ShortcutEventDetail } from '@svelte-put/shortcut';\n *\n *  let commandPalette = false;\n *\n *  function onOpenCommandPalette() {\n *    commandPalette = true;\n *  }\n *  function onCloseCommandPalette() {\n *    commandPalette = false;\n *  }\n *\n *  function doSomethingElse(details: ShortcutEventDetail) {\n *    console.log('Action was placed on:', details.node);\n *    console.log('Trigger:', details.trigger);\n *  }\n *\n *  function onShortcut(event: CustomEvent<ShortcutEventDetail>) {\n *    if (event.detail.trigger.id === 'do-something-else') {\n *      console.log('Same as doSomethingElse()');\n *      // be careful here doSomethingElse would have been called too\n *   }\n * }\n * </script>\n *\n * <svelte:window\n *   use:shortcut={{\n *     trigger: [\n *       {\n *         key: 'k',\n *\n *         // trigger if either ctrl or meta is pressed\n *         modifier: ['ctrl', 'meta'],\n *\n *         callback: onOpenCommandPalette,\n *         preventDefault: true,\n *       },\n *       {\n *         key: 'Escape',\n *\n *         // preferably avoid arrow functions here for better performance\n *         // with arrow functions the action has to be updated more frequently\n *         callback: onCloseCommandPalette,\n *\n *         enabled: commandPalette,\n *         preventDefault: true,\n *       },\n *      {\n *         key: 'k',\n *\n *         // trigger if both ctrl & shift are pressed\n *         modifier: [['ctrl', 'shift']],\n *         id: 'do-something-else',\n *         callback: doSomethingElse,\n *      },\n *     ],\n *   }}\n *   on:shortcut={onShortcut}\n * />\n * ```\n *\n *\n *\n * As with any svelte action, `shortcut` should be use with element and not component.\n *\n * ```html\n * <-- correct usage-->\n *  <div use:intersect />\n *\n * <-- incorrect usage-->\n * <Component use:intersect/>\n * ```\n *\n * You can either:\n *\n * - pass multiple callbacks to their associated triggers, or\n *\n * - pass one single handler to the `on:shortcut` event, in which case you should\n * provide an ID to each trigger to be able to distinguish what trigger was activated\n * in the event handler.\n *\n * Either way, only use `callback` or `on:shortcut` and not both to\n * avoid handler duplication.\n * @param {HTMLElement} node - HTMLElement to add event listener to\n * @param {import('./public').ShortcutParameter} param - svelte action parameters\n * @returns {import('./public').ShortcutActionReturn}\n */\nexport function shortcut(node, param) {\n\tlet { enabled = true, trigger, type = 'keydown' } = param;\n\n\t/**\n\t * @param {KeyboardEvent} event\n\t */\n\tfunction handler(event) {\n\t\tconst normalizedTriggers = Array.isArray(trigger) ? trigger : [trigger];\n\t\t/** @type {Record<import('./public').ShortcutModifier, boolean>} */\n\t\tconst modifiedMap = {\n\t\t\talt: event.altKey,\n\t\t\tctrl: event.ctrlKey,\n\t\t\tshift: event.shiftKey,\n\t\t\tmeta: event.metaKey,\n\t\t};\n\t\tfor (const trigger of normalizedTriggers) {\n\t\t\tconst mergedTrigger = {\n\t\t\t\tmodifier: [],\n\t\t\t\tpreventDefault: false,\n\t\t\t\tenabled: true,\n\t\t\t\t...trigger,\n\t\t\t};\n\t\t\tconst { modifier, key, callback, preventDefault, enabled: triggerEnabled } = mergedTrigger;\n\t\t\tif (triggerEnabled) {\n\t\t\t\tif (modifier.length) {\n\t\t\t\t\tconst modifierDefs = (Array.isArray(modifier) ? modifier : [modifier]).map((def) =>\n\t\t\t\t\t\ttypeof def === 'string' ? [def] : def,\n\t\t\t\t\t);\n\t\t\t\t\tconst modified = modifierDefs.some((def) =>\n\t\t\t\t\t\tdef.every((modifier) => modifiedMap[modifier]),\n\t\t\t\t\t);\n\t\t\t\t\tif (!modified) continue;\n\t\t\t\t}\n\t\t\t\tif (event.key === key) {\n\t\t\t\t\tif (preventDefault) event.preventDefault();\n\t\t\t\t\t/** @type {import('./public').ShortcutEventDetail} */\n\t\t\t\t\tconst detail = {\n\t\t\t\t\t\tnode,\n\t\t\t\t\t\ttrigger: mergedTrigger,\n\t\t\t\t\t\toriginalEvent: event,\n\t\t\t\t\t};\n\t\t\t\t\tnode.dispatchEvent(new CustomEvent('shortcut', { detail }));\n\t\t\t\t\tcallback?.(detail);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (enabled) node.addEventListener(type, handler);\n\n\treturn {\n\t\tupdate: (update) => {\n\t\t\tconst { enabled: newEnabled = true, type: newType = 'keydown' } = update;\n\n\t\t\tif (enabled && (!newEnabled || type !== newType)) {\n\t\t\t\tnode.removeEventListener(type, handler);\n\t\t\t} else if (!enabled && newEnabled) {\n\t\t\t\tnode.addEventListener(newType, handler);\n\t\t\t}\n\n\t\t\tenabled = newEnabled;\n\t\t\ttype = newType;\n\t\t\ttrigger = update.trigger;\n\t\t},\n\t\tdestroy: () => {\n\t\t\tnode.removeEventListener(type, handler);\n\t\t},\n\t};\n}\n","<script>import { shortcut } from '@svelte-put/shortcut';\nimport { isInputDOMNode, isMacOs } from '@xyflow/system';\nimport { useStore } from '../../store';\nexport let selectionKey = 'Shift';\nexport let multiSelectionKey = isMacOs() ? 'Meta' : 'Control';\nexport let deleteKey = 'Backspace';\nexport let panActivationKey = ' ';\nexport let zoomActivationKey = isMacOs() ? 'Meta' : 'Control';\nconst { selectionKeyPressed, multiselectionKeyPressed, deleteKeyPressed, panActivationKeyPressed, zoomActivationKeyPressed, selectionRect } = useStore();\nfunction isKeyObject(key) {\n    return key !== null && typeof key === 'object';\n}\nfunction getModifier(key) {\n    return isKeyObject(key) ? key.modifier || [] : [];\n}\nfunction getKeyString(key) {\n    if (key === null || key === undefined) {\n        // this is a workaround to check if a key is set\n        // if not we won't call the callback\n        return '';\n    }\n    return isKeyObject(key) ? key.key : key;\n}\nfunction getShortcutTrigger(key, callback) {\n    const keys = Array.isArray(key) ? key : [key];\n    return keys.map((_key) => {\n        const keyString = getKeyString(_key);\n        return {\n            key: keyString,\n            modifier: getModifier(_key),\n            enabled: keyString !== null,\n            callback\n        };\n    });\n}\nfunction resetKeysAndSelection() {\n    selectionRect.set(null);\n    selectionKeyPressed.set(false);\n    multiselectionKeyPressed.set(false);\n    deleteKeyPressed.set(false);\n    panActivationKeyPressed.set(false);\n    zoomActivationKeyPressed.set(false);\n}\n</script>\n\n<svelte:window\n  on:blur={resetKeysAndSelection}\n  on:contextmenu={resetKeysAndSelection}\n  use:shortcut={{\n    trigger: getShortcutTrigger(selectionKey, () => selectionKeyPressed.set(true)),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(selectionKey, () => selectionKeyPressed.set(false)),\n    type: 'keyup'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(multiSelectionKey, () => multiselectionKeyPressed.set(true)),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(multiSelectionKey, () => multiselectionKeyPressed.set(false)),\n    type: 'keyup'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(deleteKey, (detail) => {\n      const isModifierKey =\n        detail.originalEvent.ctrlKey ||\n        detail.originalEvent.metaKey ||\n        detail.originalEvent.shiftKey;\n      if (!isModifierKey && !isInputDOMNode(detail.originalEvent)) {\n        deleteKeyPressed.set(true);\n      }\n    }),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(deleteKey, () => deleteKeyPressed.set(false)),\n    type: 'keyup'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(panActivationKey, () => panActivationKeyPressed.set(true)),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(panActivationKey, () => panActivationKeyPressed.set(false)),\n    type: 'keyup'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(zoomActivationKey, () => zoomActivationKeyPressed.set(true)),\n    type: 'keydown'\n  }}\n  use:shortcut={{\n    trigger: getShortcutTrigger(zoomActivationKey, () => zoomActivationKeyPressed.set(false)),\n    type: 'keyup'\n  }}\n/>\n","<script>import cc from 'classcat';\nimport { useStore } from '../../store';\nimport { ConnectionLineType, getBezierPath, getConnectionStatus, getSmoothStepPath, getStraightPath } from '@xyflow/system';\nexport let containerStyle = '';\nexport let style = '';\nexport let isCustomComponent = false;\nconst { width, height, connection, connectionLineType } = useStore();\nlet path = null;\n$: if ($connection.inProgress && !isCustomComponent) {\n    const { from, to, fromPosition, toPosition } = $connection;\n    const pathParams = {\n        sourceX: from.x,\n        sourceY: from.y,\n        sourcePosition: fromPosition,\n        targetX: to.x,\n        targetY: to.y,\n        targetPosition: toPosition\n    };\n    switch ($connectionLineType) {\n        case ConnectionLineType.Bezier:\n            [path] = getBezierPath(pathParams);\n            break;\n        case ConnectionLineType.Step:\n            [path] = getSmoothStepPath({\n                ...pathParams,\n                borderRadius: 0\n            });\n            break;\n        case ConnectionLineType.SmoothStep:\n            [path] = getSmoothStepPath(pathParams);\n            break;\n        default:\n            [path] = getStraightPath(pathParams);\n    }\n}\n</script>\n\n{#if $connection.inProgress}\n  <svg width={$width} height={$height} class=\"svelte-flow__connectionline\" style={containerStyle}>\n    <g class={cc(['svelte-flow__connection', getConnectionStatus($connection.isValid)])}>\n      <slot name=\"connectionLine\" />\n      <!-- slot fallbacks do not work if slots are forwarded in parent -->\n      {#if !isCustomComponent}\n        <path d={path} {style} fill=\"none\" class=\"svelte-flow__connection-path\" />\n      {/if}\n    </g>\n  </svg>\n{/if}\n","<script>import cc from 'classcat';\nimport { useStore } from '../../store';\nexport let position = 'top-right';\nexport let style = undefined;\nlet className = undefined;\nexport { className as class };\nconst { selectionRectMode } = useStore();\n$: positionClasses = `${position}`.split('-');\n</script>\n\n<div\n  class={cc(['svelte-flow__panel', className, ...positionClasses])}\n  {style}\n  style:pointer-events={$selectionRectMode ? 'none' : ''}\n  {...$$restProps}\n>\n  <slot />\n</div>\n","<script>import { Panel } from '../../container/Panel';\nexport let proOptions = undefined;\nexport let position = 'bottom-right';\n</script>\n\n{#if !proOptions?.hideAttribution}\n  <Panel\n    {position}\n    class=\"svelte-flow__attribution\"\n    data-message=\"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us\"\n  >\n    <a\n      href=\"https://svelteflow.dev\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      aria-label=\"Svelte Flow attribution\"\n    >\n      Svelte Flow\n    </a>\n  </Panel>\n{/if}\n","// this is helper function for updating the store\n// for props where we need to call a specific store action\nexport function updateStore(store, { nodeTypes, edgeTypes, minZoom, maxZoom, translateExtent, paneClickDistance }) {\n    if (nodeTypes !== undefined) {\n        store.setNodeTypes(nodeTypes);\n    }\n    if (edgeTypes !== undefined) {\n        store.setEdgeTypes(edgeTypes);\n    }\n    if (minZoom !== undefined) {\n        store.setMinZoom(minZoom);\n    }\n    if (maxZoom !== undefined) {\n        store.setMaxZoom(maxZoom);\n    }\n    if (translateExtent !== undefined) {\n        store.setTranslateExtent(translateExtent);\n    }\n    if (paneClickDistance !== undefined) {\n        store.setPaneClickDistance(paneClickDistance);\n    }\n}\nconst getKeys = (obj) => Object.keys(obj);\nexport function updateStoreByKeys(store, keys) {\n    getKeys(keys).forEach((prop) => {\n        const update = keys[prop];\n        if (update !== undefined) {\n            // @ts-expect-error @todo: how to fix this TS error?\n            store[prop].set(update);\n        }\n    });\n}\n","import { readable } from 'svelte/store';\nfunction getMediaQuery() {\n    if (typeof window === 'undefined' || !window.matchMedia) {\n        return null;\n    }\n    return window.matchMedia('(prefers-color-scheme: dark)');\n}\n/**\n * Hook for receiving the current color mode class 'dark' or 'light'.\n *\n * @internal\n * @param colorMode - The color mode to use ('dark', 'light' or 'system')\n */\nexport function useColorModeClass(colorMode = 'light') {\n    const colorModeClass = readable('light', (set) => {\n        if (colorMode !== 'system') {\n            set(colorMode);\n            return;\n        }\n        const mediaQuery = getMediaQuery();\n        const updateColorModeClass = () => set(mediaQuery?.matches ? 'dark' : 'light');\n        set(mediaQuery?.matches ? 'dark' : 'light');\n        mediaQuery?.addEventListener('change', updateColorModeClass);\n        return () => {\n            mediaQuery?.removeEventListener('change', updateColorModeClass);\n        };\n    });\n    return colorModeClass;\n}\n","<script>import { onMount, hasContext } from 'svelte';\nimport { get } from 'svelte/store';\nimport cc from 'classcat';\nimport { ConnectionMode, PanOnScrollMode } from '@xyflow/system';\nimport { Zoom } from '../Zoom';\nimport { Pane } from '../Pane';\nimport { Viewport as ViewportComponent } from '../Viewport';\nimport { NodeRenderer } from '../NodeRenderer';\nimport { EdgeRenderer } from '../EdgeRenderer';\nimport { UserSelection } from '../../components/UserSelection';\nimport { NodeSelection } from '../../components/NodeSelection';\nimport { KeyHandler } from '../../components/KeyHandler';\nimport { ConnectionLine } from '../../components/ConnectionLine';\nimport { Attribution } from '../../components/Attribution';\nimport { key, useStore, createStoreContext } from '../../store';\nimport { updateStore, updateStoreByKeys } from './utils';\nimport { useColorModeClass } from '../../hooks/useColorModeClass';\nexport let id = '1';\nexport let nodes;\nexport let edges;\nexport let fitView = undefined;\nexport let fitViewOptions = undefined;\nexport let minZoom = undefined;\nexport let maxZoom = undefined;\nexport let initialViewport = undefined;\nexport let viewport = undefined;\nexport let nodeTypes = undefined;\nexport let edgeTypes = undefined;\nexport let selectionKey = undefined;\nexport let selectionMode = undefined;\nexport let panActivationKey = undefined;\nexport let multiSelectionKey = undefined;\nexport let zoomActivationKey = undefined;\nexport let nodesDraggable = undefined;\nexport let nodesConnectable = undefined;\nexport let nodeDragThreshold = undefined;\nexport let elementsSelectable = undefined;\nexport let snapGrid = undefined;\nexport let deleteKey = undefined;\nexport let connectionRadius = undefined;\nexport let connectionLineType = undefined;\nexport let connectionMode = ConnectionMode.Strict;\nexport let connectionLineStyle = '';\nexport let connectionLineContainerStyle = '';\nexport let onMoveStart = undefined;\nexport let onMove = undefined;\nexport let onMoveEnd = undefined;\nexport let isValidConnection = undefined;\nexport let translateExtent = undefined;\nexport let nodeExtent = undefined;\nexport let onlyRenderVisibleElements = undefined;\nexport let panOnScrollMode = PanOnScrollMode.Free;\nexport let preventScrolling = true;\nexport let zoomOnScroll = true;\nexport let zoomOnDoubleClick = true;\nexport let zoomOnPinch = true;\nexport let panOnScroll = false;\nexport let panOnDrag = true;\nexport let selectionOnDrag = undefined;\nexport let autoPanOnConnect = true;\nexport let autoPanOnNodeDrag = true;\nexport let onerror = undefined;\nexport let ondelete = undefined;\nexport let onedgecreate = undefined;\nexport let attributionPosition = undefined;\nexport let proOptions = undefined;\nexport let defaultEdgeOptions = undefined;\nexport let width = undefined;\nexport let height = undefined;\nexport let colorMode = 'light';\nexport let onconnect = undefined;\nexport let onconnectstart = undefined;\nexport let onconnectend = undefined;\nexport let onbeforedelete = undefined;\nexport let oninit = undefined;\nexport let nodeOrigin = undefined;\nexport let paneClickDistance = 0;\nexport let nodeClickDistance = 0;\nexport let defaultMarkerColor = '#b1b1b7';\nexport let style = undefined;\nlet className = undefined;\nexport { className as class };\nlet domNode;\nlet clientWidth;\nlet clientHeight;\nconst initViewport = $viewport || initialViewport;\nconst store = hasContext(key)\n    ? useStore()\n    : createStoreContext({\n        nodes: get(nodes),\n        edges: get(edges),\n        width,\n        height,\n        fitView,\n        nodeOrigin,\n        nodeExtent\n    });\nonMount(() => {\n    store.width.set(clientWidth);\n    store.height.set(clientHeight);\n    store.domNode.set(domNode);\n    store.syncNodeStores(nodes);\n    store.syncEdgeStores(edges);\n    store.syncViewport(viewport);\n    if (fitView !== undefined) {\n        store.fitViewQueued.set(fitView);\n    }\n    if (fitViewOptions) {\n        store.fitViewOptions.set(fitViewOptions);\n    }\n    updateStore(store, {\n        nodeTypes,\n        edgeTypes,\n        minZoom,\n        maxZoom,\n        translateExtent,\n        paneClickDistance\n    });\n    return () => {\n        store.reset();\n    };\n});\n// Update width & height on resize\n$: {\n    if (clientWidth !== undefined && clientHeight !== undefined) {\n        store.width.set(clientWidth);\n        store.height.set(clientHeight);\n    }\n}\n// Call oninit once when flow is intialized\nconst { initialized } = store;\nlet onInitCalled = false;\n$: {\n    if (!onInitCalled && $initialized) {\n        oninit?.();\n        onInitCalled = true;\n    }\n}\n// this updates the store for simple changes\n// where the prop names equals the store name\n$: {\n    const updatableProps = {\n        flowId: id,\n        connectionLineType,\n        connectionRadius,\n        selectionMode,\n        snapGrid,\n        defaultMarkerColor,\n        nodesDraggable,\n        nodesConnectable,\n        elementsSelectable,\n        onlyRenderVisibleElements,\n        isValidConnection,\n        autoPanOnConnect,\n        autoPanOnNodeDrag,\n        onerror,\n        ondelete,\n        onedgecreate,\n        connectionMode,\n        nodeDragThreshold,\n        onconnect,\n        onconnectstart,\n        onconnectend,\n        onbeforedelete,\n        nodeOrigin\n    };\n    updateStoreByKeys(store, updatableProps);\n}\n$: updateStore(store, {\n    nodeTypes,\n    edgeTypes,\n    minZoom,\n    maxZoom,\n    translateExtent,\n    paneClickDistance\n});\n$: colorModeClass = useColorModeClass(colorMode);\n</script>\n\n<div\n  bind:this={domNode}\n  bind:clientWidth\n  bind:clientHeight\n  {style}\n  class={cc(['svelte-flow', className, $colorModeClass])}\n  data-testid=\"svelte-flow__wrapper\"\n  on:dragover\n  on:drop\n  {...$$restProps}\n  role=\"application\"\n>\n  <KeyHandler\n    {selectionKey}\n    {deleteKey}\n    {panActivationKey}\n    {multiSelectionKey}\n    {zoomActivationKey}\n  />\n  <Zoom\n    initialViewport={initViewport}\n    {onMoveStart}\n    {onMove}\n    {onMoveEnd}\n    panOnScrollMode={panOnScrollMode === undefined ? PanOnScrollMode.Free : panOnScrollMode}\n    preventScrolling={preventScrolling === undefined ? true : preventScrolling}\n    zoomOnScroll={zoomOnScroll === undefined ? true : zoomOnScroll}\n    zoomOnDoubleClick={zoomOnDoubleClick === undefined ? true : zoomOnDoubleClick}\n    zoomOnPinch={zoomOnPinch === undefined ? true : zoomOnPinch}\n    panOnScroll={panOnScroll === undefined ? false : panOnScroll}\n    panOnDrag={panOnDrag === undefined ? true : panOnDrag}\n    paneClickDistance={paneClickDistance === undefined ? 0 : paneClickDistance}\n  >\n    <Pane\n      on:paneclick\n      on:panecontextmenu\n      panOnDrag={panOnDrag === undefined ? true : panOnDrag}\n      {selectionOnDrag}\n    >\n      <ViewportComponent>\n        <EdgeRenderer\n          on:edgeclick\n          on:edgecontextmenu\n          on:edgemouseenter\n          on:edgemouseleave\n          {defaultEdgeOptions}\n        />\n        <ConnectionLine\n          containerStyle={connectionLineContainerStyle}\n          style={connectionLineStyle}\n          isCustomComponent={$$slots.connectionLine}\n        >\n          <slot name=\"connectionLine\" slot=\"connectionLine\" />\n        </ConnectionLine>\n        <div class=\"svelte-flow__edgelabel-renderer\" />\n        <div class=\"svelte-flow__viewport-portal\" />\n        <NodeRenderer\n          {nodeClickDistance}\n          on:nodeclick\n          on:nodemouseenter\n          on:nodemousemove\n          on:nodemouseleave\n          on:nodedragstart\n          on:nodedrag\n          on:nodedragstop\n          on:nodecontextmenu\n        />\n        <NodeSelection\n          on:selectionclick\n          on:selectioncontextmenu\n          on:nodedragstart\n          on:nodedrag\n          on:nodedragstop\n        />\n      </ViewportComponent>\n      <UserSelection />\n    </Pane>\n  </Zoom>\n  <Attribution {proOptions} position={attributionPosition} />\n  <slot />\n</div>\n\n<style>\n  .svelte-flow {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    position: relative;\n    z-index: 0;\n\n    background-color: var(--background-color, var(--background-color-default));\n  }\n\n  :root {\n    --background-color-default: #fff;\n    --background-pattern-color-default: #ddd;\n\n    --minimap-mask-color-default: rgba(240, 240, 240, 0.6);\n    --minimap-mask-stroke-color-default: none;\n    --minimap-mask-stroke-width-default: 1;\n\n    --controls-button-background-color-default: #fefefe;\n    --controls-button-background-color-hover-default: #f4f4f4;\n    --controls-button-color-default: inherit;\n    --controls-button-color-hover-default: inherit;\n    --controls-button-border-color-default: #eee;\n  }\n</style>\n","<script>import { onDestroy, setContext } from 'svelte';\nimport { createStore, key } from '../../store';\nexport let initialNodes = undefined;\nexport let initialEdges = undefined;\nexport let initialWidth = undefined;\nexport let initialHeight = undefined;\nexport let fitView = undefined;\nexport let nodeOrigin = undefined;\nconst store = createStore({\n    nodes: initialNodes,\n    edges: initialEdges,\n    width: initialWidth,\n    height: initialHeight,\n    nodeOrigin,\n    fitView\n});\nsetContext(key, {\n    getStore: () => store\n});\nonDestroy(() => {\n    store.reset();\n});\n</script>\n\n<slot />\n","<script>import cc from 'classcat';\nexport let className = undefined;\nexport let bgColor = undefined;\nexport let bgColorHover = undefined;\nexport let color = undefined;\nexport let colorHover = undefined;\nexport let borderColor = undefined;\nexport { className as class };\n</script>\n\n<button\n  type=\"button\"\n  on:click\n  class={cc(['svelte-flow__controls-button', className])}\n  style:--xy-controls-button-background-color-props={bgColor}\n  style:--xy-controls-button-background-color-hover-props={bgColorHover}\n  style:--xy-controls-button-color-props={color}\n  style:--xy-controls-button-color-hover-props={colorHover}\n  style:--xy-controls-button-border-color-props={borderColor}\n  {...$$restProps}\n>\n  <slot class=\"button-svg\" />\n</button>\n","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\">\n  <path d=\"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z\" />\n</svg>\n","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 5\">\n  <path d=\"M0 0h32v4.2H0z\" />\n</svg>\n","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 30\">\n  <path\n    d=\"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z\"\n  />\n</svg>\n","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 32\">\n  <path\n    d=\"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z\"\n  />\n</svg>\n","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 32\">\n  <path\n    d=\"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z\"\n  />\n</svg>\n","<script>import cc from 'classcat';\nimport Panel from '../../container/Panel/Panel.svelte';\nimport { useStore } from '../../store';\nimport ControlButton from './ControlButton.svelte';\nimport PlusIcon from './Icons/Plus.svelte';\nimport MinusIcon from './Icons/Minus.svelte';\nimport FitViewIcon from './Icons/Fit.svelte';\nimport LockIcon from './Icons/Lock.svelte';\nimport UnlockIcon from './Icons/Unlock.svelte';\nexport let position = 'bottom-left';\nexport let showZoom = true;\nexport let showFitView = true;\nexport let showLock = true;\nexport let buttonBgColor = undefined;\nexport let buttonBgColorHover = undefined;\nexport let buttonColor = undefined;\nexport let buttonColorHover = undefined;\nexport let buttonBorderColor = undefined;\nexport let ariaLabel = undefined;\nexport let style = undefined;\nexport let orientation = 'vertical';\nexport let fitViewOptions = undefined;\nlet className = '';\nexport { className as class };\nconst { zoomIn, zoomOut, fitView, viewport, minZoom, maxZoom, nodesDraggable, nodesConnectable, elementsSelectable } = useStore();\nconst buttonProps = {\n    bgColor: buttonBgColor,\n    bgColorHover: buttonBgColorHover,\n    color: buttonColor,\n    colorHover: buttonColorHover,\n    borderColor: buttonBorderColor\n};\n$: isInteractive = $nodesDraggable || $nodesConnectable || $elementsSelectable;\n$: minZoomReached = $viewport.zoom <= $minZoom;\n$: maxZoomReached = $viewport.zoom >= $maxZoom;\nconst onZoomInHandler = () => {\n    zoomIn();\n};\nconst onZoomOutHandler = () => {\n    zoomOut();\n};\nconst onFitViewHandler = () => {\n    fitView(fitViewOptions);\n};\nconst onToggleInteractivity = () => {\n    isInteractive = !isInteractive;\n    nodesDraggable.set(isInteractive);\n    nodesConnectable.set(isInteractive);\n    elementsSelectable.set(isInteractive);\n};\n$: orientationClass = orientation === 'horizontal' ? 'horizontal' : 'vertical';\n</script>\n\n<Panel\n  class={cc(['svelte-flow__controls', orientationClass, className])}\n  {position}\n  data-testid=\"svelte-flow__controls\"\n  aria-label={ariaLabel ?? 'Svelte Flow controls'}\n  {style}\n>\n  <slot name=\"before\" />\n  {#if showZoom}\n    <ControlButton\n      on:click={onZoomInHandler}\n      class=\"svelte-flow__controls-zoomin\"\n      title=\"zoom in\"\n      aria-label=\"zoom in\"\n      disabled={maxZoomReached}\n      {...buttonProps}\n    >\n      <PlusIcon />\n    </ControlButton>\n    <ControlButton\n      on:click={onZoomOutHandler}\n      class=\"svelte-flow__controls-zoomout\"\n      title=\"zoom out\"\n      aria-label=\"zoom out\"\n      disabled={minZoomReached}\n      {...buttonProps}\n    >\n      <MinusIcon />\n    </ControlButton>\n  {/if}\n  {#if showFitView}\n    <ControlButton\n      class=\"svelte-flow__controls-fitview\"\n      on:click={onFitViewHandler}\n      title=\"fit view\"\n      aria-label=\"fit view\"\n      {...buttonProps}\n    >\n      <FitViewIcon />\n    </ControlButton>\n  {/if}\n  {#if showLock}\n    <ControlButton\n      class=\"svelte-flow__controls-interactive\"\n      on:click={onToggleInteractivity}\n      title=\"toggle interactivity\"\n      aria-label=\"toggle interactivity\"\n      {...buttonProps}\n    >\n      {#if isInteractive}<UnlockIcon />{:else}<LockIcon />{/if}\n    </ControlButton>\n  {/if}\n  <slot />\n  <slot name=\"after\" />\n</Panel>\n","export var BackgroundVariant;\n(function (BackgroundVariant) {\n    BackgroundVariant[\"Lines\"] = \"lines\";\n    BackgroundVariant[\"Dots\"] = \"dots\";\n    BackgroundVariant[\"Cross\"] = \"cross\";\n})(BackgroundVariant || (BackgroundVariant = {}));\n","<script>import cc from 'classcat';\nexport let radius = 5;\nlet className = '';\nexport { className as class };\n</script>\n\n<circle\n  cx={radius}\n  cy={radius}\n  r={radius}\n  class={cc(['svelte-flow__background-pattern', 'dots', className])}\n/>\n","<script>import cc from 'classcat';\nexport let lineWidth = 1;\nexport let dimensions;\nexport let variant = undefined;\nlet className = '';\nexport { className as class };\n</script>\n\n<path\n  stroke-width={lineWidth}\n  d={`M${dimensions[0] / 2} 0 V${dimensions[1]} M0 ${dimensions[1] / 2} H${dimensions[0]}`}\n  class={cc(['svelte-flow__background-pattern', variant, className])}\n/>\n","<script labg=\"ts\" context=\"module\">\n  const defaultSize = {\n    [BackgroundVariant.Dots]: 1,\n    [BackgroundVariant.Lines]: 1,\n    [BackgroundVariant.Cross]: 6\n  };\n</script>\n\n<script>import cc from 'classcat';\nimport DotPattern from './DotPattern.svelte';\nimport LinePattern from './LinePattern.svelte';\nimport { useStore } from '../../store';\nimport { BackgroundVariant } from './types';\nexport let id = undefined;\nexport let variant = BackgroundVariant.Dots;\nexport let gap = 20;\nexport let size = 1;\nexport let lineWidth = 1;\nexport let bgColor = undefined;\nexport let patternColor = undefined;\nexport let patternClass = undefined;\nlet className = '';\nexport { className as class };\nconst { viewport, flowId } = useStore();\nconst patternSize = size || defaultSize[variant];\nconst isDots = variant === BackgroundVariant.Dots;\nconst isCross = variant === BackgroundVariant.Cross;\nconst gapXY = Array.isArray(gap) ? gap : [gap, gap];\n$: patternId = `background-pattern-${$flowId}-${id ? id : ''}`;\n$: scaledGap = [gapXY[0] * $viewport.zoom || 1, gapXY[1] * $viewport.zoom || 1];\n$: scaledSize = patternSize * $viewport.zoom;\n$: patternDimensions = (isCross ? [scaledSize, scaledSize] : scaledGap);\n$: patternOffset = isDots\n    ? [scaledSize / 2, scaledSize / 2]\n    : [patternDimensions[0] / 2, patternDimensions[1] / 2];\n</script>\n\n<svg\n  class={cc(['svelte-flow__background', className])}\n  data-testid=\"svelte-flow__background\"\n  style:--xy-background-color-props={bgColor}\n  style:--xy-background-pattern-color-props={patternColor}\n>\n  <pattern\n    id={patternId}\n    x={$viewport.x % scaledGap[0]}\n    y={$viewport.y % scaledGap[1]}\n    width={scaledGap[0]}\n    height={scaledGap[1]}\n    patternUnits=\"userSpaceOnUse\"\n    patternTransform={`translate(-${patternOffset[0]},-${patternOffset[1]})`}\n  >\n    {#if isDots}\n      <DotPattern radius={scaledSize / 2} class={patternClass} />\n    {:else}\n      <LinePattern dimensions={patternDimensions} {variant} {lineWidth} class={patternClass} />\n    {/if}\n  </pattern>\n  <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill={`url(#${patternId})`} />\n</svg>\n\n<style>\n  .svelte-flow__background {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n  }\n</style>\n","import { isNodeBase, isEdgeBase } from '@xyflow/system';\n/**\n * Test whether an object is usable as a Node\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Node if it returns true\n * @param element - The element to test\n * @returns A boolean indicating whether the element is an Node\n */\nexport const isNode = (element) => isNodeBase(element);\n/**\n * Test whether an object is usable as an Edge\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Edge if it returns true\n * @param element - The element to test\n * @returns A boolean indicating whether the element is an Edge\n */\nexport const isEdge = (element) => isEdgeBase(element);\n","import { get } from 'svelte/store';\nimport { getOverlappingArea, isRectObject, nodeToRect, pointToRendererPoint, getViewportForBounds, getElementsToRemove, rendererPointToPoint, evaluateAbsolutePosition, getNodesBounds } from '@xyflow/system';\nimport { useStore } from '../store';\nimport { isNode } from '../utils';\n/**\n * Hook for accessing the ReactFlow instance.\n *\n * @public\n *\n * @returns helper functions\n */\nexport function useSvelteFlow() {\n    const { zoomIn, zoomOut, fitView, onbeforedelete, snapGrid, viewport, width, height, minZoom, maxZoom, panZoom, nodes, edges, domNode, nodeLookup, nodeOrigin, edgeLookup, connectionLookup } = useStore();\n    const getNodeRect = (node) => {\n        const $nodeLookup = get(nodeLookup);\n        const nodeToUse = isNode(node) ? node : $nodeLookup.get(node.id);\n        const position = nodeToUse.parentId\n            ? evaluateAbsolutePosition(nodeToUse.position, nodeToUse.measured, nodeToUse.parentId, $nodeLookup, get(nodeOrigin))\n            : nodeToUse.position;\n        const nodeWithPosition = {\n            ...nodeToUse,\n            position,\n            width: nodeToUse.measured?.width ?? nodeToUse.width,\n            height: nodeToUse.measured?.height ?? nodeToUse.height\n        };\n        return nodeToRect(nodeWithPosition);\n    };\n    const updateNode = (id, nodeUpdate, options = { replace: false }) => {\n        const node = get(nodeLookup).get(id)?.internals.userNode;\n        if (!node) {\n            return;\n        }\n        const nextNode = typeof nodeUpdate === 'function' ? nodeUpdate(node) : nodeUpdate;\n        if (options.replace) {\n            nodes.update((nds) => nds.map((node) => {\n                if (node.id === id) {\n                    return isNode(nextNode) ? nextNode : { ...node, ...nextNode };\n                }\n                return node;\n            }));\n        }\n        else {\n            Object.assign(node, nextNode);\n            nodes.update((nds) => nds);\n        }\n    };\n    const getInternalNode = (id) => get(nodeLookup).get(id);\n    return {\n        zoomIn,\n        zoomOut,\n        getInternalNode,\n        getNode: (id) => getInternalNode(id)?.internals.userNode,\n        getNodes: (ids) => (ids === undefined ? get(nodes) : getElements(get(nodeLookup), ids)),\n        getEdge: (id) => get(edgeLookup).get(id),\n        getEdges: (ids) => (ids === undefined ? get(edges) : getElements(get(edgeLookup), ids)),\n        setZoom: (zoomLevel, options) => {\n            const currentPanZoom = get(panZoom);\n            return currentPanZoom\n                ? currentPanZoom.scaleTo(zoomLevel, { duration: options?.duration })\n                : Promise.resolve(false);\n        },\n        getZoom: () => get(viewport).zoom,\n        setViewport: async (nextViewport, options) => {\n            const currentViewport = get(viewport);\n            const currentPanZoom = get(panZoom);\n            if (!currentPanZoom) {\n                return Promise.resolve(false);\n            }\n            await currentPanZoom.setViewport({\n                x: nextViewport.x ?? currentViewport.x,\n                y: nextViewport.y ?? currentViewport.y,\n                zoom: nextViewport.zoom ?? currentViewport.zoom\n            }, { duration: options?.duration });\n            return Promise.resolve(true);\n        },\n        getViewport: () => get(viewport),\n        setCenter: async (x, y, options) => {\n            const nextZoom = typeof options?.zoom !== 'undefined' ? options.zoom : get(maxZoom);\n            const currentPanZoom = get(panZoom);\n            if (!currentPanZoom) {\n                return Promise.resolve(false);\n            }\n            await currentPanZoom.setViewport({\n                x: get(width) / 2 - x * nextZoom,\n                y: get(height) / 2 - y * nextZoom,\n                zoom: nextZoom\n            }, { duration: options?.duration });\n            return Promise.resolve(true);\n        },\n        fitView,\n        fitBounds: async (bounds, options) => {\n            const currentPanZoom = get(panZoom);\n            if (!currentPanZoom) {\n                return Promise.resolve(false);\n            }\n            const viewport = getViewportForBounds(bounds, get(width), get(height), get(minZoom), get(maxZoom), options?.padding ?? 0.1);\n            await currentPanZoom.setViewport(viewport, { duration: options?.duration });\n            return Promise.resolve(true);\n        },\n        getIntersectingNodes: (nodeOrRect, partially = true, nodesToIntersect) => {\n            const isRect = isRectObject(nodeOrRect);\n            const nodeRect = isRect ? nodeOrRect : getNodeRect(nodeOrRect);\n            if (!nodeRect) {\n                return [];\n            }\n            return (nodesToIntersect || get(nodes)).filter((n) => {\n                const internalNode = get(nodeLookup).get(n.id);\n                if (!internalNode || (!isRect && n.id === nodeOrRect.id)) {\n                    return false;\n                }\n                const currNodeRect = nodeToRect(internalNode);\n                const overlappingArea = getOverlappingArea(currNodeRect, nodeRect);\n                const partiallyVisible = partially && overlappingArea > 0;\n                return partiallyVisible || overlappingArea >= nodeRect.width * nodeRect.height;\n            });\n        },\n        isNodeIntersecting: (nodeOrRect, area, partially = true) => {\n            const isRect = isRectObject(nodeOrRect);\n            const nodeRect = isRect ? nodeOrRect : getNodeRect(nodeOrRect);\n            if (!nodeRect) {\n                return false;\n            }\n            const overlappingArea = getOverlappingArea(nodeRect, area);\n            const partiallyVisible = partially && overlappingArea > 0;\n            return partiallyVisible || overlappingArea >= nodeRect.width * nodeRect.height;\n        },\n        deleteElements: async ({ nodes: nodesToRemove = [], edges: edgesToRemove = [] }) => {\n            const { nodes: matchingNodes, edges: matchingEdges } = await getElementsToRemove({\n                nodesToRemove,\n                edgesToRemove,\n                nodes: get(nodes),\n                edges: get(edges),\n                onBeforeDelete: get(onbeforedelete)\n            });\n            if (matchingNodes) {\n                nodes.update((nds) => nds.filter((node) => !matchingNodes.some(({ id }) => id === node.id)));\n            }\n            if (matchingEdges) {\n                edges.update((eds) => eds.filter((edge) => !matchingEdges.some(({ id }) => id === edge.id)));\n            }\n            return {\n                deletedNodes: matchingNodes,\n                deletedEdges: matchingEdges\n            };\n        },\n        screenToFlowPosition: (position, options = { snapToGrid: true }) => {\n            const _domNode = get(domNode);\n            if (!_domNode) {\n                return position;\n            }\n            const _snapGrid = options.snapToGrid ? get(snapGrid) : false;\n            const { x, y, zoom } = get(viewport);\n            const { x: domX, y: domY } = _domNode.getBoundingClientRect();\n            const correctedPosition = {\n                x: position.x - domX,\n                y: position.y - domY\n            };\n            return pointToRendererPoint(correctedPosition, [x, y, zoom], _snapGrid !== null, _snapGrid || [1, 1]);\n        },\n        /**\n         *\n         * @param position\n         * @returns\n         */\n        flowToScreenPosition: (position) => {\n            const _domNode = get(domNode);\n            if (!_domNode) {\n                return position;\n            }\n            const { x, y, zoom } = get(viewport);\n            const { x: domX, y: domY } = _domNode.getBoundingClientRect();\n            const rendererPosition = rendererPointToPoint(position, [x, y, zoom]);\n            return {\n                x: rendererPosition.x + domX,\n                y: rendererPosition.y + domY\n            };\n        },\n        toObject: () => {\n            return {\n                nodes: get(nodes).map((node) => ({\n                    ...node,\n                    // we want to make sure that changes to the nodes object that gets returned by toObject\n                    // do not affect the nodes object\n                    position: { ...node.position },\n                    data: { ...node.data }\n                })),\n                edges: get(edges).map((edge) => ({ ...edge })),\n                viewport: { ...get(viewport) }\n            };\n        },\n        updateNode,\n        updateNodeData: (id, dataUpdate, options) => {\n            const node = get(nodeLookup).get(id)?.internals.userNode;\n            if (!node) {\n                return;\n            }\n            const nextData = typeof dataUpdate === 'function' ? dataUpdate(node) : dataUpdate;\n            node.data = options?.replace ? nextData : { ...node.data, ...nextData };\n            nodes.update((nds) => nds);\n        },\n        getNodesBounds: (nodes) => {\n            const _nodeLookup = get(nodeLookup);\n            const _nodeOrigin = get(nodeOrigin);\n            return getNodesBounds(nodes, { nodeLookup: _nodeLookup, nodeOrigin: _nodeOrigin });\n        },\n        getHandleConnections: ({ type, id, nodeId }) => Array.from(get(connectionLookup)\n            .get(`${nodeId}-${type}-${id ?? null}`)\n            ?.values() ?? []),\n        viewport\n    };\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction getElements(lookup, ids) {\n    const result = [];\n    for (const id of ids) {\n        const item = lookup.get(id);\n        if (item) {\n            const element = 'internals' in item ? item.internals?.userNode : item;\n            result.push(element);\n        }\n    }\n    return result;\n}\n","import { useStore } from '../store';\n/**\n * Hook for seeing if nodes are initialized\n * @returns - nodesInitialized Writable\n */\nexport function useNodesInitialized() {\n    const { nodesInitialized } = useStore();\n    return {\n        subscribe: nodesInitialized.subscribe\n    };\n}\n/**\n * Hook for seeing if the flow is initialized\n * @returns - initialized Writable\n */\nexport function useInitialized() {\n    const { initialized } = useStore();\n    return {\n        subscribe: initialized.subscribe\n    };\n}\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18\" />\n</svg>\n","<script lang=\"ts\">\n\timport { WEBUI_API_BASE_URL } from '$lib/constants';\n\timport { Handle, Position, type NodeProps } from '@xyflow/svelte';\n\timport { getContext } from 'svelte';\n\n\timport ProfileImage from '../Messages/ProfileImage.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport Heart from '$lib/components/icons/Heart.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\ttype $$Props = NodeProps;\n\texport let data: $$Props['data'];\n</script>\n\n<div\n\tclass=\"px-4 py-3 shadow-md rounded-xl dark:bg-black bg-white border dark:border-gray-900 w-60 h-20 group\"\n>\n\t<Tooltip\n\t\tcontent={data?.message?.error ? data.message.error.content : data.message.content}\n\t\tclass=\"w-full\"\n\t\tallowHTML={false}\n\t>\n\t\t{#if data.message.role === 'user'}\n\t\t\t<div class=\"flex w-full\">\n\t\t\t\t<ProfileImage\n\t\t\t\t\tsrc={`${WEBUI_API_BASE_URL}/users/${data.user.id}/profile/image`}\n\t\t\t\t\tclassName={'size-5 -translate-y-[1px]'}\n\t\t\t\t/>\n\t\t\t\t<div class=\"ml-2\">\n\t\t\t\t\t<div class=\" flex justify-between items-center\">\n\t\t\t\t\t\t<div class=\"text-xs text-black dark:text-white font-medium line-clamp-1\">\n\t\t\t\t\t\t\t{data?.user?.name ?? 'User'}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if data?.message?.error}\n\t\t\t\t\t\t<div class=\"text-red-500 line-clamp-2 text-xs mt-0.5\">{data.message.error.content}</div>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<div class=\"text-gray-500 line-clamp-2 text-xs mt-0.5\">{data.message.content}</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<div class=\"flex w-full\">\n\t\t\t\t<ProfileImage\n\t\t\t\t\tsrc={`${WEBUI_API_BASE_URL}/models/model/profile/image?id=${data.model?.id ?? data.message.model}&lang=${$i18n.language}`}\n\t\t\t\t\tclassName={'size-5 -translate-y-[1px]'}\n\t\t\t\t/>\n\n\t\t\t\t<div class=\"ml-2\">\n\t\t\t\t\t<div class=\" flex justify-between items-center\">\n\t\t\t\t\t\t<div class=\"text-xs text-black dark:text-white font-medium line-clamp-1\">\n\t\t\t\t\t\t\t{data?.model?.name ?? data?.message?.model ?? 'Assistant'}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass={data?.message?.favorite ? '' : 'invisible group-hover:visible'}\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tdata.message.favorite = !(data?.message?.favorite ?? false);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Heart\n\t\t\t\t\t\t\t\tclassName=\"size-3 {data?.message?.favorite\n\t\t\t\t\t\t\t\t\t? 'fill-red-500 stroke-red-500'\n\t\t\t\t\t\t\t\t\t: 'hover:fill-red-500 hover:stroke-red-500'} \"\n\t\t\t\t\t\t\t\tstrokeWidth=\"2.5\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if data?.message?.error}\n\t\t\t\t\t\t<div class=\"text-red-500 line-clamp-2 text-xs mt-0.5\">\n\t\t\t\t\t\t\t{data.message.error.content}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<div class=\"text-gray-500 line-clamp-2 text-xs mt-0.5\">{data.message.content}</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\t</Tooltip>\n\t<Handle type=\"target\" position={Position.Top} class=\"w-2 rounded-full dark:bg-gray-900\" />\n\t<Handle type=\"source\" position={Position.Bottom} class=\"w-2 rounded-full dark:bg-gray-900\" />\n</div>\n","<script lang=\"ts\">\n\texport let className = 'w-4 h-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\tclass={className}\n\taria-hidden=\"true\"\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tstroke-width={strokeWidth}\n\tfill=\"none\"\n\tstroke=\"currentColor\"\n\tviewBox=\"0 0 24 24\"\n\t><path d=\"M22 3L2 3\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path\n\t\td=\"M22 21L2 21\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t></path><path\n\t\td=\"M8 15V9C8 7.89543 8.89543 7 10 7H14C15.1046 7 16 7.89543 16 9V15C16 16.1046 15.1046 17 14 17H10C8.89543 17 8 16.1046 8 15Z\"\n\t></path></svg\n>\n","<script lang=\"ts\">\n\texport let className = 'w-4 h-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\tclass={className}\n\taria-hidden=\"true\"\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tstroke-width={strokeWidth}\n\tfill=\"none\"\n\tstroke=\"currentColor\"\n\tviewBox=\"0 0 24 24\"\n\t><path d=\"M3 22L3 2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path\n\t\td=\"M21 22V2\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t></path><path\n\t\td=\"M15 16H9C7.89543 16 7 15.1046 7 14V10C7 8.89543 7.89543 8 9 8H15C16.1046 8 17 8.89543 17 10V14C17 15.1046 16.1046 16 15 16Z\"\n\t></path></svg\n>\n","<script>\n\timport { createEventDispatcher } from 'svelte';\n\n\tconst dispatch = createEventDispatcher();\n\n\timport { theme } from '$lib/stores';\n\timport {\n\t\tBackground,\n\t\tControls,\n\t\tSvelteFlow,\n\t\tBackgroundVariant,\n\t\tControlButton\n\t} from '@xyflow/svelte';\n\timport BarsArrowUp from '$lib/components/icons/BarsArrowUp.svelte';\n\timport Bars3BottomLeft from '$lib/components/icons/Bars3BottomLeft.svelte';\n\timport AlignVertical from '$lib/components/icons/AlignVertical.svelte';\n\timport AlignHorizontal from '$lib/components/icons/AlignHorizontal.svelte';\n\n\texport let nodes;\n\texport let nodeTypes;\n\texport let edges;\n\texport let setLayoutDirection;\n</script>\n\n<SvelteFlow\n\t{nodes}\n\t{nodeTypes}\n\t{edges}\n\tfitView\n\tminZoom={0.001}\n\tcolorMode={$theme.includes('dark')\n\t\t? 'dark'\n\t\t: $theme === 'system'\n\t\t\t? window.matchMedia('(prefers-color-scheme: dark)').matches\n\t\t\t\t? 'dark'\n\t\t\t\t: 'light'\n\t\t\t: 'light'}\n\tnodesConnectable={false}\n\tnodesDraggable={false}\n\ton:nodeclick={(e) => dispatch('nodeclick', e.detail)}\n\toninit={() => {\n\t\tconsole.log('Flow initialized');\n\t}}\n>\n\t<Controls showLock={false}>\n\t\t<ControlButton on:click={() => setLayoutDirection('vertical')} title=\"Vertical Layout\">\n\t\t\t<AlignVertical className=\"size-4\" />\n\t\t</ControlButton>\n\t\t<ControlButton on:click={() => setLayoutDirection('horizontal')} title=\"Horizontal Layout\">\n\t\t\t<AlignHorizontal className=\"size-4\" />\n\t\t</ControlButton>\n\t</Controls>\n\t<Background variant={BackgroundVariant.Dots} />\n</SvelteFlow>\n","<script lang=\"ts\">\n\timport { getContext, createEventDispatcher, onDestroy } from 'svelte';\n\timport { useSvelteFlow, useNodesInitialized, useStore } from '@xyflow/svelte';\n\n\tconst dispatch = createEventDispatcher();\n\tconst i18n = getContext('i18n');\n\n\timport { onMount, tick } from 'svelte';\n\n\timport { writable } from 'svelte/store';\n\timport { models, showOverview, theme, user } from '$lib/stores';\n\n\timport '@xyflow/svelte/dist/style.css';\n\n\timport CustomNode from './Node.svelte';\n\timport Flow from './Flow.svelte';\n\timport XMark from '../../icons/XMark.svelte';\n\timport ArrowLeft from '../../icons/ArrowLeft.svelte';\n\n\tconst { width, height } = useStore();\n\n\tconst { fitView, getViewport } = useSvelteFlow();\n\tconst nodesInitialized = useNodesInitialized();\n\n\texport let history;\n\texport let onClose;\n\texport let onNodeClick;\n\n\tlet selectedMessageId = null;\n\n\tconst nodes = writable([]);\n\tconst edges = writable([]);\n\n\tlet layoutDirection = 'vertical';\n\n\tconst nodeTypes = {\n\t\tcustom: CustomNode\n\t};\n\n\t$: if (history) {\n\t\tdrawFlow(layoutDirection);\n\t}\n\n\t$: if (history && history.currentId) {\n\t\tfocusNode();\n\t}\n\n\tconst focusNode = async () => {\n\t\tif (selectedMessageId === null) {\n\t\t\tawait fitView({ nodes: [{ id: history.currentId }] });\n\t\t} else {\n\t\t\tawait fitView({ nodes: [{ id: selectedMessageId }] });\n\t\t}\n\n\t\tselectedMessageId = null;\n\t};\n\n\tconst drawFlow = async (direction) => {\n\t\tconst nodeList = [];\n\t\tconst edgeList = [];\n\t\tconst levelOffset = direction === 'vertical' ? 150 : 300;\n\t\tconst siblingOffset = direction === 'vertical' ? 250 : 150;\n\n\t\t// Map to keep track of node positions at each level\n\t\tlet positionMap = new Map();\n\n\t\t// Helper function to truncate labels\n\t\tfunction createLabel(content) {\n\t\t\tconst maxLength = 100;\n\t\t\treturn content.length > maxLength ? content.substr(0, maxLength) + '...' : content;\n\t\t}\n\n\t\t// Create nodes and map children to ensure alignment in width\n\t\tlet layerWidths = {}; // Track widths of each layer\n\n\t\tObject.keys(history.messages).forEach((id) => {\n\t\t\tconst message = history.messages[id];\n\t\t\tif (!message) return;\n\n\t\t\tconst level = message.parentId ? (positionMap.get(message.parentId)?.level ?? -1) + 1 : 0;\n\t\t\tif (!layerWidths[level]) layerWidths[level] = 0;\n\n\t\t\tpositionMap.set(id, {\n\t\t\t\tid: message.id,\n\t\t\t\tlevel,\n\t\t\t\tposition: layerWidths[level]++\n\t\t\t});\n\t\t});\n\n\t\t// Adjust positions based on siblings count to centralize vertical spacing\n\t\tObject.keys(history.messages).forEach((id) => {\n\t\t\tconst pos = positionMap.get(id);\n\t\t\tif (!pos) return;\n\n\t\t\tconst x = direction === 'vertical' ? pos.position * siblingOffset : pos.level * levelOffset;\n\t\t\tconst y = direction === 'vertical' ? pos.level * levelOffset : pos.position * siblingOffset;\n\n\t\t\tnodeList.push({\n\t\t\t\tid: pos.id,\n\t\t\t\ttype: 'custom',\n\t\t\t\tdata: {\n\t\t\t\t\tuser: $user,\n\t\t\t\t\tmessage: history.messages[id],\n\t\t\t\t\tmodel: $models.find((model) => model.id === history.messages[id].model)\n\t\t\t\t},\n\t\t\t\tposition: { x, y }\n\t\t\t});\n\n\t\t\t// Create edges\n\t\t\tconst parentId = history.messages[id].parentId;\n\t\t\tif (parentId) {\n\t\t\t\tedgeList.push({\n\t\t\t\t\tid: parentId + '-' + pos.id,\n\t\t\t\t\tsource: parentId,\n\t\t\t\t\ttarget: pos.id,\n\t\t\t\t\tselectable: false,\n\t\t\t\t\tclass: ' dark:fill-gray-300 fill-gray-300',\n\t\t\t\t\ttype: 'smoothstep',\n\t\t\t\t\tanimated: history.currentId === id || recurseCheckChild(id, history.currentId)\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tawait edges.set([...edgeList]);\n\t\tawait nodes.set([...nodeList]);\n\t};\n\n\tconst recurseCheckChild = (nodeId, currentId) => {\n\t\tconst node = history.messages[nodeId];\n\t\treturn (\n\t\t\tnode.childrenIds &&\n\t\t\tnode.childrenIds.some((id) => id === currentId || recurseCheckChild(id, currentId))\n\t\t);\n\t};\n\n\tconst setLayoutDirection = (direction) => {\n\t\tlayoutDirection = direction;\n\t\tdrawFlow(layoutDirection);\n\t};\n\n\tonMount(() => {\n\t\tdrawFlow(layoutDirection);\n\n\t\tnodesInitialized.subscribe(async (initialized) => {\n\t\t\tif (initialized) {\n\t\t\t\tawait tick();\n\t\t\t\tconst res = await fitView({ nodes: [{ id: history.currentId }] });\n\t\t\t}\n\t\t});\n\n\t\twidth.subscribe((value) => {\n\t\t\tif (value) {\n\t\t\t\t// fitView();\n\t\t\t\tfitView({ nodes: [{ id: history.currentId }] });\n\t\t\t}\n\t\t});\n\n\t\theight.subscribe((value) => {\n\t\t\tif (value) {\n\t\t\t\t// fitView();\n\t\t\t\tfitView({ nodes: [{ id: history.currentId }] });\n\t\t\t}\n\t\t});\n\t});\n\n\tonDestroy(() => {\n\t\tconsole.log('Overview destroyed');\n\n\t\tnodes.set([]);\n\t\tedges.set([]);\n\t});\n</script>\n\n<div class=\"w-full h-full relative\">\n\t<div class=\" absolute z-50 w-full flex justify-between dark:text-gray-100 px-4 py-3\">\n\t\t<div class=\"flex items-center gap-2.5\">\n\t\t\t<button\n\t\t\t\tclass=\"self-center p-0.5\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tshowOverview.set(false);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<ArrowLeft className=\"size-3.5\" />\n\t\t\t</button>\n\t\t\t<div class=\" text-lg font-medium self-center font-primary\">{$i18n.t('Chat Overview')}</div>\n\t\t</div>\n\t\t<button\n\t\t\tclass=\"self-center p-0.5\"\n\t\t\ton:click={() => {\n\t\t\t\tonClose();\n\t\t\t\tshowOverview.set(false);\n\t\t\t}}\n\t\t>\n\t\t\t<XMark className=\"size-3.5\" />\n\t\t</button>\n\t</div>\n\n\t{#if $nodes.length > 0}\n\t\t<Flow\n\t\t\t{nodes}\n\t\t\t{nodeTypes}\n\t\t\t{edges}\n\t\t\t{setLayoutDirection}\n\t\t\ton:nodeclick={(e) => {\n\t\t\t\tonNodeClick(e.detail);\n\t\t\t\tselectedMessageId = e.detail.node.data.message.id;\n\t\t\t\tfitView({ nodes: [{ id: selectedMessageId }] });\n\t\t\t}}\n\t\t/>\n\t{/if}\n</div>\n","<script lang=\"ts\">\n\timport { getContext, createEventDispatcher, onDestroy } from 'svelte';\n\timport { useSvelteFlow, useNodesInitialized, useStore, SvelteFlowProvider } from '@xyflow/svelte';\n\n\tconst dispatch = createEventDispatcher();\n\n\timport View from './Overview/View.svelte';\n\n\texport let history;\n\n\texport let onClose;\n\texport let onNodeClick;\n</script>\n\n<SvelteFlowProvider>\n\t<View {history} {onClose} {onNodeClick} />\n</SvelteFlowProvider>\n"],"names":["cc","names","out","i","tmp","k","sourceEvent","event","pointer","node","svg","point","rect","nonpassive","nonpassivecapture","nopropagation","noevent$1","dragDisable","view","root","selection","select","noevent","yesdrag","noclick","constant$1","x","DragEvent","type","subject","target","identifier","active","y","dx","dy","dispatch","value","defaultFilter","defaultContainer","defaultSubject","d","defaultTouchable","drag$1","filter","container","touchable","gestures","listeners","mousedownx","mousedowny","mousemoving","touchending","clickDistance2","drag","mousedowned","touchstarted","touchmoved","touchended","gesture","beforestart","mousemoved","mouseupped","nodrag","touches","c","n","that","touch","p","s","p0","_","constant","ZoomEvent","transform","defaultExtent","e","defaultTransform","identity","defaultWheelDelta","defaultConstrain","extent","translateExtent","dx0","dx1","dy0","dy1","zoom$1","constrain","wheelDelta","scaleExtent","duration","interpolate","interpolateZoom","touchstarting","touchfirst","touchDelay","wheelDelay","tapDistance","zoom","wheeled","dblclicked","collection","schedule","k0","k1","t0","centroid","p1","translate","scale","t","Transform","transition","args","g","w","a","b","l","clean","Gesture","key","interrupt","wheelidled","currentTarget","v","x0","y0","dragEnable","t1","started","l0","l1","dp","dl","errorMessages","nodeType","id","handleType","sourceHandle","targetHandle","edgeType","lib","infiniteExtent","ConnectionMode","PanOnScrollMode","SelectionMode","initialConnection","ConnectionLineType","MarkerType","Position","oppositePosition","areConnectionMapsEqual","handleConnectionChange","cb","diff","connection","getConnectionStatus","isValid","isEdgeBase","element","isNodeBase","isInternalNodeBase","getNodePositionWithOrigin","nodeOrigin","width","height","getNodeDimensions","origin","offsetX","offsetY","getNodesBounds","nodes","params","box","currBox","nodeOrId","isId","currentNode","nodeBox","nodeToBox","getBoundsOfBoxes","boxToRect","getInternalNodesBounds","nodeLookup","getNodesInside","tx","ty","tScale","partially","excludeNonSelectableNodes","paneRect","pointToRendererPoint","visibleNodes","measured","selectable","hidden","overlappingArea","getOverlappingArea","nodeToRect","area","partiallyVisible","getConnectedEdges","edges","nodeIds","edge","getFitViewNodes","options","fitViewNodes","optionNodeIds","fitViewport","panZoom","minZoom","maxZoom","nodesToFit","bounds","viewport","getViewportForBounds","calculateNodePosition","nodeId","nextPosition","nodeExtent","onError","parentNode","parentX","parentY","parentWidth","parentHeight","isCoordinateExtent","positionAbsolute","clampPosition","getElementsToRemove","nodesToRemove","edgesToRemove","onBeforeDelete","matchingNodes","isIncluded","parentHit","edgeIds","deletableEdges","matchingEdges","onBeforeDeleteResult","clamp","val","min","max","position","dimensions","clampPositionToParent","childPosition","childDimensions","parent","calcAutoPanVelocity","calcAutoPan","pos","speed","distance","xMovement","yMovement","box1","box2","rectToBox","x2","y2","_a","_b","getBoundsOfRects","rect1","rect2","rectA","rectB","xOverlap","yOverlap","isRectObject","obj","isNumeric","devWarn","message","snapPosition","snapGrid","snapToGrid","rendererPointToPoint","parsePadding","padding","paddingValue","parsePaddings","paddingY","paddingX","top","bottom","left","right","calculateAppliedPaddings","boundRight","boundBottom","xZoom","yZoom","clampedZoom","boundsCenterX","boundsCenterY","newPadding","offset","isMacOs","nodeHasDimensions","evaluateAbsolutePosition","parentId","withResolvers","resolve","reject","res","rej","getPointerPosition","containerBounds","getEventPosition","pointerPos","xSnapped","ySnapped","getDimensions","getHostForElement","inputTags","isInputDOMNode","isMouseEvent","isMouse","evtX","evtY","getHandleBounds","nodeElement","nodeBounds","handles","handle","handleBounds","getBezierEdgeCenter","sourceX","sourceY","targetX","targetY","sourceControlX","sourceControlY","targetControlX","targetControlY","centerX","centerY","calculateControlOffset","curvature","getControlWithCurvature","x1","y1","getBezierPath","sourcePosition","targetPosition","labelX","labelY","getEdgeCenter","xOffset","yOffset","getElevatedEdgeZIndex","sourceNode","targetNode","selected","zIndex","elevateOnSelect","edgeOrConnectedNodeSelected","selectedZIndex","isEdgeVisible","edgeBox","viewRect","getEdgeId","source","connectionExists","el","addEdge","edgeParams","getStraightPath","handleDirections","getDirection","getPoints","center","sourceDir","targetDir","sourceGapped","targetGapped","dir","dirAccessor","currDir","points","sourceGapOffset","targetGapOffset","defaultCenterX","defaultCenterY","defaultOffsetX","defaultOffsetY","verticalSplit","horizontalSplit","sourceTarget","targetSource","gapOffset","dirAccessorOpposite","isSameDir","sourceGtTargetOppo","sourceLtTargetOppo","sourceGapPoint","targetGapPoint","maxXDistance","maxYDistance","getBend","size","bendSize","xDir","yDir","getSmoothStepPath","borderRadius","segment","isNodeInitialized","getEdgePosition","sourceHandleBounds","toHandleBounds","targetHandleBounds","getHandle$1","getHandlePosition","fallbackPosition","handleId","getMarkerId","marker","createMarkerIds","defaultColor","defaultMarkerStart","defaultMarkerEnd","ids","markers","markerId","defaultOptions","adoptUserNodesDefaultOptions","mergeObjects","base","incoming","result","updateAbsolutePositions","parentLookup","_options","updateChildNode","positionWithOrigin","clampedPosition","adoptUserNodes","nodesInitialized","tmpLookup","selectedNodeZ","userNode","internalNode","calculateZ","updateParentLookup","childNodes","elevateNodesOnSelect","z","calculateChildXYZ","positionChanged","childNode","absolutePosition","childZ","parentZ","handleExpandParent","children","changes","parentExpansions","child","parentRect","expandedRect","xChange","yChange","newWidth","newHeight","widthChange","heightChange","updateNodeInternals","updates","domNode","viewportNode","updatedInternals","style","parentExpandChildren","update","dimensionChanged","newNode","parentExpandChanges","panBy","delta","nextViewport","transformChanged","addConnectionToLookup","connectionKey","connectionLookup","nodeMap","typeMap","handleMap","updateConnectionLookup","edgeLookup","sourceKey","targetKey","isParentSelected","hasSelector","selector","current","getDragItems","nodesDraggable","mousePos","dragItems","getEventHandlerParams","dragging","nodesFromDragItems","dragItem","_c","XYDrag","onNodeMouseDown","getStoreItems","onDragStart","onDrag","onDragStop","lastPos","autoPanId","autoPanStarted","mousePosition","dragStarted","d3Selection","abortDrag","noDragClassName","handleSelector","isSelectable","nodeClickDistance","updateNodes","dragEvent","onNodeDrag","onSelectionDrag","updateNodePositions","hasChange","nodesBox","adjustedNodeExtent","currentNodes","autoPan","autoPanSpeed","autoPanOnNodeDrag","startDrag","multiSelectionActive","selectNodesOnDrag","onNodeDragStart","onSelectionDragStart","unselectNodesAndEdges","d3DragInstance","nodeDragThreshold","onNodeDragStop","onSelectionDragStop","destroy","getNodesWithinDistance","ADDITIONAL_DISTANCE","getClosestHandle","connectionRadius","fromHandle","closestHandles","minDistance","closeNodes","allHandles","oppositeHandleType","getHandle","connectionMode","withAbsolutePosition","h","getHandleType","edgeUpdaterType","handleDomNode","isConnectionValid","isInsideConnectionRadius","isHandleValid","alwaysValid","onPointerDown","isTarget","autoPanOnConnect","flowId","cancelConnection","onConnectStart","onConnect","onConnectEnd","isValidConnection","onReconnectEnd","updateConnection","getTransform","getFromHandle","doc","closestHandle","clickedHandle","fromHandleInternal","fromNodeInternal","newConnection","previousConnection","onPointerMove","onPointerUp","isValidHandle","inProgress","connectionState","finalConnectionState","fromNodeId","fromHandleId","fromType","handleBelow","handleToCheck","handleNodeId","connectable","connectableEnd","XYHandle","viewChanged","prevViewport","eventViewport","transformToViewport","viewportToTransform","zoomIdentity","isWrappedWithClass","className","isRightClickPan","panOnDrag","usedButton","getD3Transition","onEnd","hasDuration","factor","createPanOnScrollHandler","zoomPanValues","noWheelClassName","d3Zoom","panOnScrollMode","panOnScrollSpeed","zoomOnPinch","onPanZoomStart","onPanZoom","onPanZoomEnd","currentZoom","pinchDelta","deltaNormalize","deltaX","deltaY","createZoomOnScrollHandler","preventScrolling","d3ZoomHandler","isWheel","preventZoom","hasNoWheelClass","createPanZoomStartHandler","onDraggingChange","createPanZoomHandler","onPaneContextMenu","onTransformChange","createPanZoomEndHandler","panOnScroll","createFilter","zoomActivationKeyPressed","zoomOnScroll","zoomOnDoubleClick","userSelectionActive","noPanClassName","zoomScroll","pinchZoom","buttonAllowed","XYPanZoom","paneClickDistance","bbox","d3ZoomInstance","setViewportConstrained","d3DblClickZoomHandler","setTransform","wheelHandler","startHandler","panZoomHandler","panZoomEndHandler","nextTransform","contrainedTransform","setViewport","syncViewport","currentTransform","getViewport","zoomTransform","scaleTo","scaleBy","setScaleExtent","setTranslateExtent","setClickDistance","validDistance","ResizeControlVariant","$.prop","$$props","onconnect","ondisconnect","isConnectableProp","getContext","store","useStore","isValidConnectionStore","onedgecreate","onConnectAction","onConnectStartAction","onConnectEndAction","isMouseTriggered","$connectionRadius","$domNode","$nodeLookup","$connectionMode","$lib","$autoPanOnConnect","$flowId","$isValidConnectionStore","$onedgecreate","$onConnectAction","startParams","$onConnectStartAction","$onConnectEndAction","$viewport","$connection","prevConnections","connections","$.mutable_source","$.set","isConnectable","$connectable","$edges","$connectionLookup","$.get","_connections","connectionInProcess","connectingFrom","connectingTo","isPossibleEndHandle","valid","div","$.child","$.reset","$.set_attribute","classes","$.set_class","$0","$.set_style","$.event","$.append","$$anchor","data","Handle","node_1","$.untrack","tryToMount","targetEl","portal","$$node","$$action_arg","useHandleEdgeSelect","selectionRect","selectionRectMode","multiselectionKeyPressed","addSelectedEdges","elementsSelectable","get","handleEdgeSelect","EdgeLabelRenderer","root_1","styles","path","label","labelStyle","markerStart","markerEnd","interactionWidth","interactionWidthValue","path_1","$.first_child","fragment","$.sibling","path_2","$$render","consequent","EdgeLabel","consequent_1","$$array","BaseEdge","syncNodeStores","nodesStore","userNodesStore","nodesStoreSetter","userNodesStoreSetter","currentNodesStore","currentUserNodesStore","_set","nds","updatedNodes","fn","syncEdgeStores","edgesStore","userEdgesStore","userEdgesStoreSetter","eds","syncViewportStores","panZoomStore","viewportStore","userViewportStore","viewportStoreSetter","userViewportStoreSetter","vp","createNodesStore","fitViewQueued","fitViewOptions","fitViewResolver","subscribe","set","writable","defaults","_update","setDefaultOptions","setOptions","createEdgesStore","nextEdges","initialNodeTypes","InputNode","OutputNode","DefaultNode","GroupNode","initialEdgeTypes","StraightEdgeInternal","SmoothStepEdgeInternal","BezierEdgeInternal","StepEdgeInternal","getInitialStore","fitView","storeNodeOrigin","storeNodeExtent","widthStore","heightStore","readable","getVisibleEdges","visibleEdges","derived","onlyRenderVisibleElements","onerror","edgePosition","getVisibleNodes","createStore","fitViewOnCreate","setNodeTypes","nodeTypes","setEdgeTypes","edgeTypes","addEdgeUtil","nodeDragItems","updateNodeInternalsSystem","change","zoomBy","zoomIn","zoomOut","setMinZoom","setMaxZoom","resetSelectedElements","elements","elementsChanged","setPaneClickDistance","deleteKeyPressed","selectedNodes","selectedEdges","mN","mE","addSelectedNodes","isMultiSelection","ns","nodeWillBeSelected","es","edgeWillBeSelected","handleNodeSelection","panBySystem","_connection","reset","initialized","initialNodesLength","initialEdgesLength","edgesInitialized","viewportInitialized","createStoreContext","setContext","initialViewport","panZoomInstance","currentViewport","onMoveStart","onMove","onMoveEnd","panActivationKeyPressed","onMount","viewPort","_panOnDrag","$panActivationKeyPressed","_panOnScroll","$.action","$minZoom","$maxZoom","$zoomActivationKeyPressed","$selectionRect","$translateExtent","wrapHandler","handler","toggleSelected","item","isSelected","selectionOnDrag","createEventDispatcher","selectionKeyPressed","selectionMode","selectionInProgress","onClick","isSelecting","startX","startY","nextUserSelectRect","prevSelectedNodeIds","prevSelectedEdgeIds","$selectionMode","selectedEdgeIds","selectedNodeIds","$selectionRectMode","$selectionKeyPressed","onContextMenu","hasActiveSelection","$elementsSelectable","event_handler","$.derived","$$value","$.template_effect","$dragging","$$args","dragInstance","updateDrag","getNodeInlineStyleDimensions","initialWidth","initialHeight","measuredWidth","measuredHeight","styleWidth","styleHeight","draggable","deletable","resizeObserver","isParent","positionX","positionY","dragHandle","nodeRef","prevNodeRef","dispatchNodeEvent","connectableStore","prevType","prevSourcePosition","prevTargetPosition","onDestroy","onSelectNodeHandler","nodeTypeValid","$nodeTypes","nodeComponent","inlineStyleDimensions","node_2","$.derived_safe_equal","$2","$nodesDraggable","$$component","$connectableStore","$.effect","nodesConnectable","entries","entry","$visibleNodes","$nodesConnectable","$5","$parentLookup","$7","$8","NodeWrapper","animated","ariaLabel","$edgeLookup","onMouseEvent","edgeComponent","$edgeTypes","markerStartUrl","markerEndUrl","_onMount","_onDestroy","defs","$markers","Marker","markerUnits","orient","color","strokeWidth","polyline","polyline_1","root_3","defaultEdgeOptions","MarkerDefinition","$.each","$visibleEdges","$1","EdgeWrapper","CallOnMount","isVisible","$3","$4","Selection","$nodes","__","shortcut","param","enabled","trigger","normalizedTriggers","modifiedMap","mergedTrigger","modifier","callback","preventDefault","triggerEnabled","def","detail","newEnabled","newType","selectionKey","multiSelectionKey","deleteKey","panActivationKey","zoomActivationKey","isKeyObject","getModifier","getKeyString","getShortcutTrigger","_key","keyString","resetKeysAndSelection","containerStyle","isCustomComponent","connectionLineType","from","to","fromPosition","toPosition","pathParams","$connectionLineType","$$array_1","$$array_2","$$array_3","root_2","$width","$height","positionClasses","$$restProps","proOptions","Panel","updateStore","getKeys","updateStoreByKeys","keys","prop","getMediaQuery","useColorModeClass","colorMode","mediaQuery","updateColorModeClass","connectionLineStyle","connectionLineContainerStyle","ondelete","attributionPosition","onconnectstart","onconnectend","onbeforedelete","oninit","defaultMarkerColor","clientWidth","clientHeight","initViewport","hasContext","onInitCalled","$initialized","updatableProps","colorModeClass","$$stores","$colorModeClass","KeyHandler","$6","Zoom","Pane","ViewportComponent","EdgeRenderer","node_3","ConnectionLine","node_4","$$slots","NodeRenderer","node_6","NodeSelection","node_7","UserSelection","node_8","Attribution","node_9","$.bind_element_size","$$arg","initialNodes","initialEdges","bgColor","bgColorHover","colorHover","borderColor","button","showZoom","showFitView","showLock","buttonBgColor","buttonBgColorHover","buttonColor","buttonColorHover","buttonBorderColor","orientation","buttonProps","onZoomInHandler","onZoomOutHandler","onFitViewHandler","onToggleInteractivity","isInteractive","minZoomReached","maxZoomReached","orientationClass","ControlButton","$.spread_props","PlusIcon","MinusIcon","FitViewIcon","UnlockIcon","LockIcon","consequent_2","alternate","consequent_3","BackgroundVariant","radius","circle","lineWidth","variant","defaultSize","gap","patternColor","patternClass","patternSize","isDots","isCross","gapXY","patternId","scaledGap","scaledSize","patternDimensions","patternOffset","pattern","DotPattern","LinePattern","isNode","useSvelteFlow","getNodeRect","nodeToUse","nodeWithPosition","updateNode","nodeUpdate","nextNode","getInternalNode","getElements","zoomLevel","currentPanZoom","nextZoom","nodeOrRect","nodesToIntersect","isRect","nodeRect","currNodeRect","_domNode","_snapGrid","domX","domY","correctedPosition","rendererPosition","dataUpdate","nextData","_nodeLookup","_nodeOrigin","lookup","useNodesInitialized","$.clsx","i18n","Tooltip","div_1","WEBUI_API_BASE_URL","ProfileImage","div_2","div_3","div_4","div_5","div_6","root_4","div_7","root_5","$i18n","div_8","div_9","div_10","node_5","Heart","div_11","root_6","div_12","root_7","_d","setLayoutDirection","$theme","SvelteFlow","Controls","AlignVertical","AlignHorizontal","Background","history","onClose","onNodeClick","selectedMessageId","layoutDirection","CustomNode","focusNode","drawFlow","direction","nodeList","edgeList","levelOffset","siblingOffset","positionMap","layerWidths","level","$user","$models","model","recurseCheckChild","currentId","tick","ArrowLeft","button_1","XMark","Flow","showOverview","SvelteFlowProvider","View"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70]}