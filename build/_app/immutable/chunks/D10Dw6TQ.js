import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as Te,g as Ee,f as p,e as xe,j as r,m as _e,i as J,k as l,c as e,r as t,t as q,w as u,s as I,l as k,a as m,u as H,n as He,b as We,d as at,A as rt,aQ as st}from"./0WpKKl27.js";import{i as w}from"./Cmf4RC8y.js";import{e as lt}from"./u5Cnd4mY.js";import{s as it}from"./3-JilrU5.js";import{r as ot,a as Ie,s as Ae}from"./CZ1y6KaE.js";import{b as nt}from"./kb1CvZ3a.js";import{i as $e}from"./C3k0oZ3o.js";import{p as g}from"./DpN1w328.js";import{a as qe,s as Fe}from"./BVrWTcfB.js";import{t as Xe}from"./DYdr9DjX.js";import{d as pe}from"./BC4znSyB.js";import{l as dt,h as je,j as vt}from"./cX8aofVu.js";import{c as ct}from"./i8IuCWOI.js";import{d as ft}from"./DR3TfYWm.js";import{M as mt}from"./CcreKc1w.js";import{T as Me}from"./Db0gdTVr.js";import{C as ut}from"./ByHAJgVC.js";import{S as Se}from"./BO1efK8r.js";import{L as pt}from"./l5Bi75JT.js";import{X as gt}from"./CZmZoefv.js";import{C as ge}from"./BTdOvR0T.js";import{C as Re}from"./BtReZMDb.js";import{b as xt}from"./Bo3ZTtFv.js";import{m as _t}from"./hEP_3Uio.js";import{b as ht}from"./DLhnqOlE.js";var bt=p('<div class="self-center pl-1.5 pr-1 translate-y-[0.5px] rounded-l-xl bg-transparent"><button class="p-0.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-900 transition"><!></button></div>'),yt=p('<span class="font-normal"><!></span>'),wt=p('<span class="invisible"><!></span>'),kt=p('<span class="font-normal"><!></span>'),Ct=p('<span class="invisible"><!></span>'),Lt=p('<div class="flex text-xs font-medium mb-1.5"><button class="px-1.5 py-1 cursor-pointer select-none basis-3/5"><div class="flex gap-1.5 items-center"> <!></div></button> <button class="px-1.5 py-1 cursor-pointer select-none hidden sm:flex sm:basis-2/5 justify-end"><div class="flex gap-1.5 items-center"> <!></div></button></div>'),zt=p('<div class="text-xs text-gray-500 dark:text-gray-400 text-center px-5 min-h-20 w-full h-full flex justify-center items-center"> </div>'),Ut=p("<div> </div>"),jt=p('<button class="self-center w-fit px-1 text-sm rounded-xl"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="M9 8.25H7.5a2.25 2.25 0 0 0-2.25 2.25v9a2.25 2.25 0 0 0 2.25 2.25h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25H15m0-3-3-3m0 0-3 3m3-3V15"></path></svg></button>'),It=p('<button class="self-center w-fit px-1 text-sm rounded-xl"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg></button>'),Nt=p('<!> <div class=" w-full flex justify-between items-center rounded-lg text-sm py-2 px-3 hover:bg-gray-50 dark:hover:bg-gray-850" draggable="false"><a class=" basis-3/5"><div class="text-ellipsis line-clamp-1 w-full"> </div></a> <div class="basis-2/5 flex items-center justify-end"><div class="hidden sm:flex text-gray-500 dark:text-gray-400 text-xs"> </div> <div class="flex justify-end pl-2.5 text-gray-600 dark:text-gray-300"><!> <!></div></div></div>',1),Dt=p('<div class="w-full flex justify-center py-1 text-xs animate-pulse items-center gap-2"><!> <div class=" "> </div></div>'),Pt=p('<div class="w-full"><!> <div class="text-left text-sm w-full mb-3 max-h-[22rem] overflow-y-scroll"><!> <!> <!></div> <!></div>'),Bt=p('<div class="w-full h-full flex justify-center items-center min-h-20"><!></div>'),Ht=p('<div><div class=" flex justify-between dark:text-gray-300 px-5 pt-4 pb-1"><div class=" text-lg font-medium self-center"> </div> <button class="self-center"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z" clip-rule="evenodd"></path></svg></button></div> <div class="flex flex-col w-full px-5 pb-4 dark:text-gray-200"><div class=" flex w-full space-x-2 mb-0.5"><div class="flex flex-1"><div class=" self-center ml-1 mr-3"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg></div> <input class=" w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent" maxlength="500"/> <!></div></div> <div class=" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"><!></div></div></div>'),Mt=p("<!> <!>",1);function va(he,i){Te(i,!1);const s=()=>qe(we,"$i18n",be),[be,ye]=Fe();pe.extend(dt),pe.extend(ct);const we=Ee("i18n");let b=g(i,"show",12,!1),F=g(i,"title",8,"Chats");g(i,"emptyPlaceholder",8,"");let ne=g(i,"shareUrl",8,!1),C=g(i,"query",12,""),E=g(i,"orderBy",12,"updated_at"),N=g(i,"direction",12,"desc"),L=g(i,"chatList",8,null),O=g(i,"allChatsLoaded",8,!1),ee=g(i,"chatListLoading",8,!1),W=_e(null),de=_e(0),M=_e(!1),ke=g(i,"onUpdate",8,()=>{}),A=g(i,"loadHandler",8,null),ve=g(i,"unarchiveHandler",8,null);const X=h=>{E()===h?N(N()==="asc"?"desc":"asc"):(E(h),N("asc"))},Ce=async h=>{await ft(localStorage.token,h).catch(ce=>{Xe.error(`${ce}`)}),ke()()};$e();var x=Mt(),z=xe(x);ut(z,{get show(){return r(M)},set show(h){J(M,h)},$$events:{confirm:()=>{r(W)&&(Ce(r(W)),J(W,null))}},$$legacy:!0});var G=l(z,2);mt(G,{size:"lg",get show(){return b()},set show(h){b(h)},children:(h,ce)=>{var D=Ht(),S=e(D),te=e(S),ae=e(te,!0);t(te);var Y=l(te,2);t(S);var $=l(S,2),re=e($),fe=e(re),K=l(e(fe),2);ot(K);var Ge=l(K,2);{var Ye=y=>{var U=bt(),R=e(U),Le=e(R);gt(Le,{className:"size-3",strokeWidth:"2"}),t(R),t(U),k("click",R,()=>{C(""),J(de,0)}),m(y,U)};w(Ge,y=>{C()&&y(Ye)})}t(fe),t(re);var Ne=l(re,2),Ke=e(Ne);{var Qe=y=>{var U=Pt(),R=e(U);{var Le=o=>{var a=Lt(),_=e(a),j=e(_),T=e(j),Q=l(T);{var V=d=>{var n=yt(),B=e(n);{var v=f=>{ge(f,{className:"size-2"})},c=f=>{Re(f,{className:"size-2"})};w(B,f=>{N()==="asc"?f(v):f(c,!1)})}t(n),m(d,n)},P=d=>{var n=wt(),B=e(n);ge(B,{className:"size-2"}),t(n),m(d,n)};w(Q,d=>{E()==="title"?d(V):d(P,!1)})}t(j),t(_);var Z=l(_,2),me=e(Z),se=e(me),le=l(se);{var Ue=d=>{var n=kt(),B=e(n);{var v=f=>{ge(f,{className:"size-2"})},c=f=>{Re(f,{className:"size-2"})};w(B,f=>{N()==="asc"?f(v):f(c,!1)})}t(n),m(d,n)},ue=d=>{var n=Ct(),B=e(n);ge(B,{className:"size-2"}),t(n),m(d,n)};w(le,d=>{E()==="updated_at"?d(Ue):d(ue,!1)})}t(me),t(Z),t(a),q((d,n)=>{I(T,`${d??""} `),I(se,`${n??""} `)},[()=>(s(),u(()=>s().t("Title"))),()=>(s(),u(()=>s().t("Updated at")))]),k("click",_,()=>X("title")),k("click",Z,()=>X("updated_at")),m(o,a)};w(R,o=>{H(L()),u(()=>L().length>0)&&o(Le)})}var ze=l(R,2),De=e(ze);{var Ze=o=>{var a=zt(),_=e(a,!0);t(a),q(j=>I(_,j),[()=>(s(),u(()=>s().t("No results found")))]),m(o,a)};w(De,o=>{H(L()),u(()=>L().length===0)&&o(Ze)})}var Pe=l(De,2);lt(Pe,3,L,o=>o.id,(o,a,_)=>{var j=Nt(),T=xe(j);{var Q=v=>{var c=Ut(),f=e(c,!0);t(c),q(ie=>{Ae(c,1,`w-full text-xs text-gray-500 dark:text-gray-500 font-medium ${r(_)===0?"":"pt-5"} pb-2 px-2`),I(f,ie)},[()=>(s(),r(a),u(()=>s().t(r(a).time_range)))]),m(v,c)};w(T,v=>{H(r(_)),r(a),H(L()),u(()=>{var c;return(r(_)===0||r(_)>0&&r(a).time_range!==L()[r(_)-1].time_range)&&((c=r(a))==null?void 0:c.time_range)})&&v(Q)})}var V=l(T,2),P=e(V),Z=e(P),me=e(Z,!0);t(Z),t(P);var se=l(P,2),le=e(se),Ue=e(le,!0);t(le);var ue=l(le,2),d=e(ue);{var n=v=>{{let c=He(()=>(s(),u(()=>s().t("Unarchive Chat"))));Me(v,{get content(){return r(c)},children:(f,ie)=>{var oe=jt();k("click",oe,async Be=>{Be.stopImmediatePropagation(),Be.stopPropagation(),ve()(r(a).id)}),m(f,oe)},$$slots:{default:!0}})}};w(d,v=>{ve()&&v(n)})}var B=l(d,2);{let v=He(()=>(s(),u(()=>s().t("Delete Chat"))));Me(B,{get content(){return r(v)},children:(c,f)=>{var ie=It();k("click",ie,async oe=>{oe.stopImmediatePropagation(),oe.stopPropagation(),J(W,r(a).id),J(M,!0)}),m(c,ie)},$$slots:{default:!0}})}t(ue),t(se),t(V),q(v=>{Ie(P,"href",(H(ne()),r(a),u(()=>ne()?`/s/${r(a).id}`:`/c/${r(a).id}`))),I(me,(r(a),u(()=>{var c;return(c=r(a))==null?void 0:c.title}))),I(Ue,v)},[()=>(s(),H(pe),r(a),u(()=>{var v;return s().t(pe(((v=r(a))==null?void 0:v.updated_at)*1e3).calendar(null,{sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"L"}))}))]),k("click",P,()=>b(!1)),m(o,j)});var Je=l(Pe,2);{var Oe=o=>{pt(o,{$$events:{visible:a=>{ee()||A()()}},children:(a,_)=>{var j=Dt(),T=e(j);Se(T,{className:" size-4"});var Q=l(T,2),V=e(Q,!0);t(Q),t(j),q(P=>I(V,P),[()=>(s(),u(()=>s().t("Loading...")))]),m(a,j)},$$slots:{default:!0}})};w(Je,o=>{!O()&&A()&&o(Oe)})}t(ze);var et=l(ze,2);{var tt=o=>{var a=at(),_=xe(a);it(_,i,"footer",{},null),m(o,a)};w(et,o=>{C()===""&&o(tt)})}t(U),m(y,U)},Ve=y=>{var U=Bt(),R=e(U);Se(R,{className:"size-5"}),t(U),m(y,U)};w(Ke,y=>{L()?y(Qe):y(Ve,!1)})}t(Ne),t($),t(D),q(y=>{I(ae,F()),Ie(K,"placeholder",y)},[()=>(s(),u(()=>s().t("Search Chats")))]),k("click",Y,()=>{b(!1)}),nt(K,C),m(h,D)},$$slots:{default:!0},$$legacy:!0}),m(he,x),We(),ye()}var St=p('<input id="profile-image-input" type="file" hidden="" accept="image/*"/> <div class="flex flex-col self-start group"><div class="self-center flex"><button class="relative rounded-full dark:bg-gray-700" type="button"><img alt="profile"/> <div class="absolute bottom-0 right-0 opacity-0 group-hover:opacity-100 transition"><div class="p-1 rounded-full bg-white text-black border-gray-100 shadow"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-3"><path d="m2.695 14.762-1.262 3.155a.5.5 0 0 0 .65.65l3.155-1.262a4 4 0 0 0 1.343-.886L17.5 5.501a2.121 2.121 0 0 0-3-3L3.58 13.419a4 4 0 0 0-.885 1.343Z"></path></svg></div></div></button></div> <div class="flex flex-col w-full justify-center mt-2"><button class=" text-xs text-center text-gray-500 rounded-lg py-0.5 opacity-0 group-hover:opacity-100 transition-all" type="button"> </button> <button class=" text-xs text-center text-gray-800 dark:text-gray-400 rounded-lg py-0.5 opacity-0 group-hover:opacity-100 transition-all" type="button"> </button> <button class=" text-xs text-center text-gray-800 dark:text-gray-400 rounded-lg py-0.5 opacity-0 group-hover:opacity-100 transition-all" type="button"> </button></div></div>',1);function ca(he,i){Te(i,!1);const s=()=>qe(we,"$i18n",be),[be,ye]=Fe(),we=Ee("i18n");let b=g(i,"profileImageUrl",12),F=g(i,"user",8,null),ne=g(i,"imageClassName",8,"size-14 md:size-18"),C=_e();$e();var E=St(),N=xe(E);xt(N,x=>J(C,x),()=>r(C));var L=l(N,2),O=e(L),ee=e(O),W=e(ee);rt(2),t(ee),t(O);var de=l(O,2),M=e(de),ke=e(M,!0);t(M);var A=l(M,2),ve=e(A,!0);t(A);var X=l(A,2),Ce=e(X,!0);t(X),t(de),t(L),q((x,z,G,h)=>{Ie(W,"src",x),Ae(W,1,` rounded-full ${ne()??""} object-cover`),I(ke,z),I(ve,G),I(Ce,h)},[()=>(H(b()),H(je),H(F()),u(()=>{var x;return b()!==""?b():je((x=F())==null?void 0:x.name)})),()=>(s(),u(()=>s().t("Remove"))),()=>(s(),u(()=>s().t("Initials"))),()=>(s(),u(()=>s().t("Gravatar")))]),k("change",N,x=>{const z=r(C).files??[];let G=new FileReader;G.onload=h=>{let ce=`${h.target.result}`;const D=new Image;D.src=ce,D.onload=function(){const S=document.createElement("canvas"),te=S.getContext("2d"),ae=D.width/D.height;let Y,$;ae>1?(Y=250*ae,$=250):(Y=250,$=250/ae),S.width=250,S.height=250;const re=(250-Y)/2,fe=(250-$)/2;te.drawImage(D,re,fe,Y,$);const K=S.toDataURL("image/webp",.8);b(K),st(C,r(C).files=null)}},z.length>0&&["image/gif","image/webp","image/jpeg","image/png"].includes(z[0].type)&&G.readAsDataURL(z[0])}),k("click",ee,()=>{r(C).click()}),k("click",M,async()=>{b(`${ht}/user.png`)}),k("click",A,async()=>{var x;vt()?b(je((x=F())==null?void 0:x.name)):Xe.info(s().t("Fingerprint spoofing detected: Unable to use initials as avatar. Defaulting to default profile image."),{duration:1e3*10})}),k("click",X,async()=>{var z;const x=await _t(localStorage.token,(z=F())==null?void 0:z.email);b(x)}),m(he,E),We(),ye()}export{va as C,ca as U};
//# sourceMappingURL=D10Dw6TQ.js.map
