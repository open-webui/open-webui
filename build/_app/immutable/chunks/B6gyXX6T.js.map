{"version":3,"mappings":"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","names":["getModels","token","connections","base","refresh","searchParams","error","res","WEBUI_BASE_URL","err","models","localModels","OPENAI_API_BASE_URLS","OPENAI_API_KEYS","OPENAI_API_CONFIGS","requests","idx","url","apiConfig","enable","modelIds","modelList","modelId","getOpenAIModelsDirect","responses","response","model","prefixId","tags","modelsMap","chatCompleted","body","chatAction","action_id","stopTask","id","getTaskIdsByChatId","chat_id","getToolServerData","text","parse","__vitePreload","getToolServersData","servers","server","_a","toolServerToken","auth_type","specType","openapi","info","specs","convertOpenApiToToolPayload","executeToolServer","name","params","serverData","matchingRoute","_","methods","__","operation","routePath","methodEntry","httpMethod","pathParams","queryParams","bodyParams","param","paramName","paramIn","finalUrl","key","value","queryString","k","v","contentType","headers","requestOptions","resText","responseHeaders","responseData","getTaskConfig","updateTaskConfig","config","generateTitle","messages","sanitizedResponse","_b","jsonStartIndex","jsonEndIndex","jsonResponse","parsed","generateTags","generateEmoji","prompt","generateAutoCompletion","type","controller","generateMoACompletion","getPipelinesList","uploadPipeline","file","urlIdx","formData","downloadPipeline","deletePipeline","getPipelines","getPipelineValves","pipeline_id","getPipelineValvesSpec","updatePipelineValves","valves","getUsage","getBackendConfig","getChangelog","getVersion","getVersionUpdates","getWebhookUrl","updateWebhookUrl"],"ignoreList":[],"sources":["../../../../../../src/lib/apis/index.ts"],"sourcesContent":["import { WEBUI_BASE_URL } from '$lib/constants';\nimport { convertOpenApiToToolPayload } from '$lib/utils';\nimport { getOpenAIModelsDirect } from './openai';\n\nexport const getModels = async (\n\ttoken: string = '',\n\tconnections: object | null = null,\n\tbase: boolean = false,\n\trefresh: boolean = false\n) => {\n\tconst searchParams = new URLSearchParams();\n\tif (refresh) {\n\t\tsearchParams.append('refresh', 'true');\n\t}\n\n\tlet error = null;\n\tconst res = await fetch(\n\t\t`${WEBUI_BASE_URL}/api/models${base ? '/base' : ''}?${searchParams.toString()}`,\n\t\t{\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\tAccept: 'application/json',\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t...(token && { authorization: `Bearer ${token}` })\n\t\t\t}\n\t\t}\n\t)\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\tlet models = res?.data ?? [];\n\n\tif (connections && !base) {\n\t\tlet localModels = [];\n\n\t\tif (connections) {\n\t\t\tconst OPENAI_API_BASE_URLS = connections.OPENAI_API_BASE_URLS;\n\t\t\tconst OPENAI_API_KEYS = connections.OPENAI_API_KEYS;\n\t\t\tconst OPENAI_API_CONFIGS = connections.OPENAI_API_CONFIGS;\n\n\t\t\tconst requests = [];\n\t\t\tfor (const idx in OPENAI_API_BASE_URLS) {\n\t\t\t\tconst url = OPENAI_API_BASE_URLS[idx];\n\n\t\t\t\tif (idx.toString() in OPENAI_API_CONFIGS) {\n\t\t\t\t\tconst apiConfig = OPENAI_API_CONFIGS[idx.toString()] ?? {};\n\n\t\t\t\t\tconst enable = apiConfig?.enable ?? true;\n\t\t\t\t\tconst modelIds = apiConfig?.model_ids ?? [];\n\n\t\t\t\t\tif (enable) {\n\t\t\t\t\t\tif (modelIds.length > 0) {\n\t\t\t\t\t\t\tconst modelList = {\n\t\t\t\t\t\t\t\tobject: 'list',\n\t\t\t\t\t\t\t\tdata: modelIds.map((modelId) => ({\n\t\t\t\t\t\t\t\t\tid: modelId,\n\t\t\t\t\t\t\t\t\tname: modelId,\n\t\t\t\t\t\t\t\t\towned_by: 'openai',\n\t\t\t\t\t\t\t\t\topenai: { id: modelId },\n\t\t\t\t\t\t\t\t\turlIdx: idx\n\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\trequests.push(\n\t\t\t\t\t\t\t\t(async () => {\n\t\t\t\t\t\t\t\t\treturn modelList;\n\t\t\t\t\t\t\t\t})()\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trequests.push(\n\t\t\t\t\t\t\t\t(async () => {\n\t\t\t\t\t\t\t\t\treturn await getOpenAIModelsDirect(url, OPENAI_API_KEYS[idx])\n\t\t\t\t\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\t\t\t\t\treturn res;\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\tobject: 'list',\n\t\t\t\t\t\t\t\t\t\t\t\tdata: [],\n\t\t\t\t\t\t\t\t\t\t\t\turlIdx: idx\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t})()\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\trequests.push(\n\t\t\t\t\t\t\t(async () => {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tobject: 'list',\n\t\t\t\t\t\t\t\t\tdata: [],\n\t\t\t\t\t\t\t\t\turlIdx: idx\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t})()\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst responses = await Promise.all(requests);\n\n\t\t\tfor (const idx in responses) {\n\t\t\t\tconst response = responses[idx];\n\t\t\t\tconst apiConfig = OPENAI_API_CONFIGS[idx.toString()] ?? {};\n\n\t\t\t\tlet models = Array.isArray(response) ? response : (response?.data ?? []);\n\t\t\t\tmodels = models.map((model) => ({ ...model, openai: { id: model.id }, urlIdx: idx }));\n\n\t\t\t\tconst prefixId = apiConfig.prefix_id;\n\t\t\t\tif (prefixId) {\n\t\t\t\t\tfor (const model of models) {\n\t\t\t\t\t\tmodel.id = `${prefixId}.${model.id}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst tags = apiConfig.tags;\n\t\t\t\tif (tags) {\n\t\t\t\t\tfor (const model of models) {\n\t\t\t\t\t\tmodel.tags = tags;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlocalModels = localModels.concat(models);\n\t\t\t}\n\t\t}\n\n\t\tmodels = models.concat(\n\t\t\tlocalModels.map((model) => ({\n\t\t\t\t...model,\n\t\t\t\tname: model?.name ?? model?.id,\n\t\t\t\tdirect: true\n\t\t\t}))\n\t\t);\n\n\t\t// Remove duplicates\n\t\tconst modelsMap = {};\n\t\tfor (const model of models) {\n\t\t\tmodelsMap[model.id] = model;\n\t\t}\n\n\t\tmodels = Object.values(modelsMap);\n\t}\n\n\treturn models;\n};\n\ntype ChatCompletedForm = {\n\tmodel: string;\n\tmessages: string[];\n\tchat_id: string;\n\tsession_id: string;\n};\n\nexport const chatCompleted = async (token: string, body: ChatCompletedForm) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/chat/completed`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\t...(token && { authorization: `Bearer ${token}` })\n\t\t},\n\t\tbody: JSON.stringify(body)\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\tif ('detail' in err) {\n\t\t\t\terror = err.detail;\n\t\t\t} else {\n\t\t\t\terror = err;\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\ntype ChatActionForm = {\n\tmodel: string;\n\tmessages: string[];\n\tchat_id: string;\n};\n\nexport const chatAction = async (token: string, action_id: string, body: ChatActionForm) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/chat/actions/${action_id}`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\t...(token && { authorization: `Bearer ${token}` })\n\t\t},\n\t\tbody: JSON.stringify(body)\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\tif ('detail' in err) {\n\t\t\t\terror = err.detail;\n\t\t\t} else {\n\t\t\t\terror = err;\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const stopTask = async (token: string, id: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/tasks/stop/${id}`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\t...(token && { authorization: `Bearer ${token}` })\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\tif ('detail' in err) {\n\t\t\t\terror = err.detail;\n\t\t\t} else {\n\t\t\t\terror = err;\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getTaskIdsByChatId = async (token: string, chat_id: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/tasks/chat/${chat_id}`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\t...(token && { authorization: `Bearer ${token}` })\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\tif ('detail' in err) {\n\t\t\t\terror = err.detail;\n\t\t\t} else {\n\t\t\t\terror = err;\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getToolServerData = async (token: string, url: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${url}`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\t...(token && { authorization: `Bearer ${token}` })\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\t// Check if URL ends with .yaml or .yml to determine format\n\t\t\tif (url.toLowerCase().endsWith('.yaml') || url.toLowerCase().endsWith('.yml')) {\n\t\t\t\tif (!res.ok) throw await res.text();\n\t\t\t\tconst [text, { parse }] = await Promise.all([res.text(), import('yaml')]);\n\t\t\t\treturn parse(text);\n\t\t\t} else {\n\t\t\t\tif (!res.ok) throw await res.json();\n\t\t\t\treturn res.json();\n\t\t\t}\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\tif ('detail' in err) {\n\t\t\t\terror = err.detail;\n\t\t\t} else {\n\t\t\t\terror = err;\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\tconsole.log(res);\n\treturn res;\n};\n\nexport const getToolServersData = async (servers: object[]) => {\n\treturn (\n\t\tawait Promise.all(\n\t\t\tservers\n\t\t\t\t.filter((server) => server?.config?.enable)\n\t\t\t\t.map(async (server) => {\n\t\t\t\t\tlet error = null;\n\n\t\t\t\t\tlet toolServerToken = null;\n\n\t\t\t\t\tconst auth_type = server?.auth_type ?? 'bearer';\n\t\t\t\t\tif (auth_type === 'bearer') {\n\t\t\t\t\t\ttoolServerToken = server?.key;\n\t\t\t\t\t} else if (auth_type === 'none') {\n\t\t\t\t\t\t// No authentication\n\t\t\t\t\t} else if (auth_type === 'session') {\n\t\t\t\t\t\ttoolServerToken = localStorage.token;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet res = null;\n\t\t\t\t\tconst specType = server?.spec_type ?? 'url';\n\n\t\t\t\t\tif (specType === 'url') {\n\t\t\t\t\t\tres = await getToolServerData(\n\t\t\t\t\t\t\ttoolServerToken,\n\t\t\t\t\t\t\t(server?.path ?? '').includes('://')\n\t\t\t\t\t\t\t\t? server?.path\n\t\t\t\t\t\t\t\t: `${server?.url}${(server?.path ?? '').startsWith('/') ? '' : '/'}${server?.path}`\n\t\t\t\t\t\t).catch((err) => {\n\t\t\t\t\t\t\terror = err;\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if ((specType === 'json' && server?.spec) ?? null) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tres = JSON.parse(server?.spec);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\terror = 'Failed to parse JSON spec';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (res) {\n\t\t\t\t\t\tif (!res.paths) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\terror: 'Invalid OpenAPI spec',\n\t\t\t\t\t\t\t\turl: server?.url\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst { openapi, info, specs } = {\n\t\t\t\t\t\t\topenapi: res,\n\t\t\t\t\t\t\tinfo: res.info,\n\t\t\t\t\t\t\tspecs: convertOpenApiToToolPayload(res)\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\turl: server?.url,\n\t\t\t\t\t\t\topenapi: openapi,\n\t\t\t\t\t\t\tinfo: info,\n\t\t\t\t\t\t\tspecs: specs\n\t\t\t\t\t\t};\n\t\t\t\t\t} else if (error) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\turl: server?.url\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t)\n\t).filter((server) => server);\n};\n\nexport const executeToolServer = async (\n\ttoken: string,\n\turl: string,\n\tname: string,\n\tparams: Record<string, any>,\n\tserverData: { openapi: any; info: any; specs: any }\n) => {\n\tlet error = null;\n\n\ttry {\n\t\t// Find the matching operationId in the OpenAPI spec\n\t\tconst matchingRoute = Object.entries(serverData.openapi.paths).find(([_, methods]) =>\n\t\t\tObject.entries(methods as any).some(([__, operation]: any) => operation.operationId === name)\n\t\t);\n\n\t\tif (!matchingRoute) {\n\t\t\tthrow new Error(`No matching route found for operationId: ${name}`);\n\t\t}\n\n\t\tconst [routePath, methods] = matchingRoute;\n\n\t\tconst methodEntry = Object.entries(methods as any).find(\n\t\t\t([_, operation]: any) => operation.operationId === name\n\t\t);\n\n\t\tif (!methodEntry) {\n\t\t\tthrow new Error(`No matching method found for operationId: ${name}`);\n\t\t}\n\n\t\tconst [httpMethod, operation]: [string, any] = methodEntry;\n\n\t\t// Split parameters by type\n\t\tconst pathParams: Record<string, any> = {};\n\t\tconst queryParams: Record<string, any> = {};\n\t\tlet bodyParams: any = {};\n\n\t\tif (operation.parameters) {\n\t\t\toperation.parameters.forEach((param: any) => {\n\t\t\t\tconst paramName = param.name;\n\t\t\t\tconst paramIn = param.in;\n\t\t\t\tif (params.hasOwnProperty(paramName)) {\n\t\t\t\t\tif (paramIn === 'path') {\n\t\t\t\t\t\tpathParams[paramName] = params[paramName];\n\t\t\t\t\t} else if (paramIn === 'query') {\n\t\t\t\t\t\tqueryParams[paramName] = params[paramName];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tlet finalUrl = `${url}${routePath}`;\n\n\t\t// Replace path parameters (`{param}`)\n\t\tObject.entries(pathParams).forEach(([key, value]) => {\n\t\t\tfinalUrl = finalUrl.replace(new RegExp(`{${key}}`, 'g'), encodeURIComponent(value));\n\t\t});\n\n\t\t// Append query parameters to URL if any\n\t\tif (Object.keys(queryParams).length > 0) {\n\t\t\tconst queryString = new URLSearchParams(\n\t\t\t\tObject.entries(queryParams).map(([k, v]) => [k, String(v)])\n\t\t\t).toString();\n\t\t\tfinalUrl += `?${queryString}`;\n\t\t}\n\n\t\t// Handle requestBody composite\n\t\tif (operation.requestBody && operation.requestBody.content) {\n\t\t\tconst contentType = Object.keys(operation.requestBody.content)[0];\n\t\t\tif (params !== undefined) {\n\t\t\t\tbodyParams = params;\n\t\t\t} else {\n\t\t\t\t// Optional: Fallback or explicit error if body is expected but not provided\n\t\t\t\tthrow new Error(`Request body expected for operation '${name}' but none found.`);\n\t\t\t}\n\t\t}\n\n\t\t// Prepare headers and request options\n\t\tconst headers: Record<string, string> = {\n\t\t\t'Content-Type': 'application/json',\n\t\t\t...(token && { authorization: `Bearer ${token}` })\n\t\t};\n\n\t\tconst requestOptions: RequestInit = {\n\t\t\tmethod: httpMethod.toUpperCase(),\n\t\t\theaders\n\t\t};\n\n\t\tif (\n\t\t\t['post', 'put', 'patch', 'delete'].includes(httpMethod.toLowerCase()) &&\n\t\t\toperation.requestBody\n\t\t) {\n\t\t\trequestOptions.body = JSON.stringify(bodyParams);\n\t\t}\n\n\t\tconst res = await fetch(finalUrl, requestOptions);\n\t\tif (!res.ok) {\n\t\t\tconst resText = await res.text();\n\t\t\tthrow new Error(`HTTP error! Status: ${res.status}. Message: ${resText}`);\n\t\t}\n\n\t\t// make a clone of res and extract headers\n\t\tconst responseHeaders = {};\n\t\tres.headers.forEach((value, key) => {\n\t\t\tresponseHeaders[key] = value;\n\t\t});\n\n\t\tconst text = await res.text();\n\t\tlet responseData;\n\n\t\ttry {\n\t\t\tresponseData = JSON.parse(text);\n\t\t} catch {\n\t\t\tresponseData = text;\n\t\t}\n\t\treturn [responseData, responseHeaders];\n\t} catch (err: any) {\n\t\terror = err.message;\n\t\tconsole.error('API Request Error:', error);\n\t\treturn [{ error }, null];\n\t}\n};\n\nexport const getTaskConfig = async (token: string = '') => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/v1/tasks/config`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\t...(token && { authorization: `Bearer ${token}` })\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\terror = err;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const updateTaskConfig = async (token: string, config: object) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/v1/tasks/config/update`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\t...(token && { authorization: `Bearer ${token}` })\n\t\t},\n\t\tbody: JSON.stringify(config)\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\tif ('detail' in err) {\n\t\t\t\terror = err.detail;\n\t\t\t} else {\n\t\t\t\terror = err;\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const generateTitle = async (\n\ttoken: string = '',\n\tmodel: string,\n\tmessages: object[],\n\tchat_id?: string\n) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/v1/tasks/title/completions`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tmodel: model,\n\t\t\tmessages: messages,\n\t\t\t...(chat_id && { chat_id: chat_id })\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\tif ('detail' in err) {\n\t\t\t\terror = err.detail;\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\ttry {\n\t\t// Step 1: Safely extract the response string\n\t\tconst response = res?.choices[0]?.message?.content ?? '';\n\n\t\t// Step 2: Attempt to fix common JSON format issues like single quotes\n\t\tconst sanitizedResponse = response.replace(/['‘’`]/g, '\"'); // Convert single quotes to double quotes for valid JSON\n\n\t\t// Step 3: Find the relevant JSON block within the response\n\t\tconst jsonStartIndex = sanitizedResponse.indexOf('{');\n\t\tconst jsonEndIndex = sanitizedResponse.lastIndexOf('}');\n\n\t\t// Step 4: Check if we found a valid JSON block (with both `{` and `}`)\n\t\tif (jsonStartIndex !== -1 && jsonEndIndex !== -1) {\n\t\t\tconst jsonResponse = sanitizedResponse.substring(jsonStartIndex, jsonEndIndex + 1);\n\n\t\t\t// Step 5: Parse the JSON block\n\t\t\tconst parsed = JSON.parse(jsonResponse);\n\n\t\t\t// Step 6: If there's a \"tags\" key, return the tags array; otherwise, return an empty array\n\t\t\tif (parsed && parsed.title) {\n\t\t\t\treturn parsed.title;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\t// If no valid JSON block found, return an empty array\n\t\treturn null;\n\t} catch (e) {\n\t\t// Catch and safely return empty array on any parsing errors\n\t\tconsole.error('Failed to parse response: ', e);\n\t\treturn null;\n\t}\n};\n\nexport const generateFollowUps = async (\n\ttoken: string = '',\n\tmodel: string,\n\tmessages: string,\n\tchat_id?: string\n) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/v1/tasks/follow_ups/completions`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tmodel: model,\n\t\t\tmessages: messages,\n\t\t\t...(chat_id && { chat_id: chat_id })\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\tif ('detail' in err) {\n\t\t\t\terror = err.detail;\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\ttry {\n\t\t// Step 1: Safely extract the response string\n\t\tconst response = res?.choices[0]?.message?.content ?? '';\n\n\t\t// Step 2: Attempt to fix common JSON format issues like single quotes\n\t\tconst sanitizedResponse = response.replace(/['‘’`]/g, '\"'); // Convert single quotes to double quotes for valid JSON\n\n\t\t// Step 3: Find the relevant JSON block within the response\n\t\tconst jsonStartIndex = sanitizedResponse.indexOf('{');\n\t\tconst jsonEndIndex = sanitizedResponse.lastIndexOf('}');\n\n\t\t// Step 4: Check if we found a valid JSON block (with both `{` and `}`)\n\t\tif (jsonStartIndex !== -1 && jsonEndIndex !== -1) {\n\t\t\tconst jsonResponse = sanitizedResponse.substring(jsonStartIndex, jsonEndIndex + 1);\n\n\t\t\t// Step 5: Parse the JSON block\n\t\t\tconst parsed = JSON.parse(jsonResponse);\n\n\t\t\t// Step 6: If there's a \"follow_ups\" key, return the follow_ups array; otherwise, return an empty array\n\t\t\tif (parsed && parsed.follow_ups) {\n\t\t\t\treturn Array.isArray(parsed.follow_ups) ? parsed.follow_ups : [];\n\t\t\t} else {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\n\t\t// If no valid JSON block found, return an empty array\n\t\treturn [];\n\t} catch (e) {\n\t\t// Catch and safely return empty array on any parsing errors\n\t\tconsole.error('Failed to parse response: ', e);\n\t\treturn [];\n\t}\n};\n\nexport const generateTags = async (\n\ttoken: string = '',\n\tmodel: string,\n\tmessages: string,\n\tchat_id?: string\n) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/v1/tasks/tags/completions`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tmodel: model,\n\t\t\tmessages: messages,\n\t\t\t...(chat_id && { chat_id: chat_id })\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\tif ('detail' in err) {\n\t\t\t\terror = err.detail;\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\ttry {\n\t\t// Step 1: Safely extract the response string\n\t\tconst response = res?.choices[0]?.message?.content ?? '';\n\n\t\t// Step 2: Attempt to fix common JSON format issues like single quotes\n\t\tconst sanitizedResponse = response.replace(/['‘’`]/g, '\"'); // Convert single quotes to double quotes for valid JSON\n\n\t\t// Step 3: Find the relevant JSON block within the response\n\t\tconst jsonStartIndex = sanitizedResponse.indexOf('{');\n\t\tconst jsonEndIndex = sanitizedResponse.lastIndexOf('}');\n\n\t\t// Step 4: Check if we found a valid JSON block (with both `{` and `}`)\n\t\tif (jsonStartIndex !== -1 && jsonEndIndex !== -1) {\n\t\t\tconst jsonResponse = sanitizedResponse.substring(jsonStartIndex, jsonEndIndex + 1);\n\n\t\t\t// Step 5: Parse the JSON block\n\t\t\tconst parsed = JSON.parse(jsonResponse);\n\n\t\t\t// Step 6: If there's a \"tags\" key, return the tags array; otherwise, return an empty array\n\t\t\tif (parsed && parsed.tags) {\n\t\t\t\treturn Array.isArray(parsed.tags) ? parsed.tags : [];\n\t\t\t} else {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\n\t\t// If no valid JSON block found, return an empty array\n\t\treturn [];\n\t} catch (e) {\n\t\t// Catch and safely return empty array on any parsing errors\n\t\tconsole.error('Failed to parse response: ', e);\n\t\treturn [];\n\t}\n};\n\nexport const generateEmoji = async (\n\ttoken: string = '',\n\tmodel: string,\n\tprompt: string,\n\tchat_id?: string\n) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/v1/tasks/emoji/completions`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tmodel: model,\n\t\t\tprompt: prompt,\n\t\t\t...(chat_id && { chat_id: chat_id })\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\tif ('detail' in err) {\n\t\t\t\terror = err.detail;\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\tconst response = res?.choices[0]?.message?.content.replace(/[\"']/g, '') ?? null;\n\n\tif (response) {\n\t\tif (/\\p{Extended_Pictographic}/u.test(response)) {\n\t\t\treturn response.match(/\\p{Extended_Pictographic}/gu)[0];\n\t\t}\n\t}\n\n\treturn null;\n};\n\nexport const generateQueries = async (\n\ttoken: string = '',\n\tmodel: string,\n\tmessages: object[],\n\tprompt: string,\n\ttype: string = 'web_search'\n) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/v1/tasks/queries/completions`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tmodel: model,\n\t\t\tmessages: messages,\n\t\t\tprompt: prompt,\n\t\t\ttype: type\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\tif ('detail' in err) {\n\t\t\t\terror = err.detail;\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\t// Step 1: Safely extract the response string\n\tconst response = res?.choices[0]?.message?.content ?? '';\n\n\ttry {\n\t\tconst jsonStartIndex = response.indexOf('{');\n\t\tconst jsonEndIndex = response.lastIndexOf('}');\n\n\t\tif (jsonStartIndex !== -1 && jsonEndIndex !== -1) {\n\t\t\tconst jsonResponse = response.substring(jsonStartIndex, jsonEndIndex + 1);\n\n\t\t\t// Step 5: Parse the JSON block\n\t\t\tconst parsed = JSON.parse(jsonResponse);\n\n\t\t\t// Step 6: If there's a \"queries\" key, return the queries array; otherwise, return an empty array\n\t\t\tif (parsed && parsed.queries) {\n\t\t\t\treturn Array.isArray(parsed.queries) ? parsed.queries : [];\n\t\t\t} else {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\n\t\t// If no valid JSON block found, return response as is\n\t\treturn [response];\n\t} catch (e) {\n\t\t// Catch and safely return empty array on any parsing errors\n\t\tconsole.error('Failed to parse response: ', e);\n\t\treturn [response];\n\t}\n};\n\nexport const generateAutoCompletion = async (\n\ttoken: string = '',\n\tmodel: string,\n\tprompt: string,\n\tmessages?: object[],\n\ttype: string = 'search query'\n) => {\n\tconst controller = new AbortController();\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/v1/tasks/auto/completions`, {\n\t\tsignal: controller.signal,\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tmodel: model,\n\t\t\tprompt: prompt,\n\t\t\t...(messages && { messages: messages }),\n\t\t\ttype: type,\n\t\t\tstream: false\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\tif ('detail' in err) {\n\t\t\t\terror = err.detail;\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\tconst response = res?.choices[0]?.message?.content ?? '';\n\n\ttry {\n\t\tconst jsonStartIndex = response.indexOf('{');\n\t\tconst jsonEndIndex = response.lastIndexOf('}');\n\n\t\tif (jsonStartIndex !== -1 && jsonEndIndex !== -1) {\n\t\t\tconst jsonResponse = response.substring(jsonStartIndex, jsonEndIndex + 1);\n\n\t\t\t// Step 5: Parse the JSON block\n\t\t\tconst parsed = JSON.parse(jsonResponse);\n\n\t\t\t// Step 6: If there's a \"queries\" key, return the queries array; otherwise, return an empty array\n\t\t\tif (parsed && parsed.text) {\n\t\t\t\treturn parsed.text;\n\t\t\t} else {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\n\t\t// If no valid JSON block found, return response as is\n\t\treturn response;\n\t} catch (e) {\n\t\t// Catch and safely return empty array on any parsing errors\n\t\tconsole.error('Failed to parse response: ', e);\n\t\treturn response;\n\t}\n};\n\nexport const generateMoACompletion = async (\n\ttoken: string = '',\n\tmodel: string,\n\tprompt: string,\n\tresponses: string[]\n) => {\n\tconst controller = new AbortController();\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/v1/tasks/moa/completions`, {\n\t\tsignal: controller.signal,\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tmodel: model,\n\t\t\tprompt: prompt,\n\t\t\tresponses: responses,\n\t\t\tstream: true\n\t\t})\n\t}).catch((err) => {\n\t\tconsole.error(err);\n\t\terror = err;\n\t\treturn null;\n\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn [res, controller];\n};\n\nexport const getPipelinesList = async (token: string = '') => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/v1/pipelines/list`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\t...(token && { authorization: `Bearer ${token}` })\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\terror = err;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\tconst pipelines = res?.data ?? [];\n\treturn pipelines;\n};\n\nexport const uploadPipeline = async (token: string, file: File, urlIdx: string) => {\n\tlet error = null;\n\n\t// Create a new FormData object to handle the file upload\n\tconst formData = new FormData();\n\tformData.append('file', file);\n\tformData.append('urlIdx', urlIdx);\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/v1/pipelines/upload`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t...(token && { authorization: `Bearer ${token}` })\n\t\t\t// 'Content-Type': 'multipart/form-data' is not needed as Fetch API will set it automatically\n\t\t},\n\t\tbody: formData\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\tif ('detail' in err) {\n\t\t\t\terror = err.detail;\n\t\t\t} else {\n\t\t\t\terror = err;\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const downloadPipeline = async (token: string, url: string, urlIdx: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/v1/pipelines/add`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\t...(token && { authorization: `Bearer ${token}` })\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\turl: url,\n\t\t\turlIdx: urlIdx\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\tif ('detail' in err) {\n\t\t\t\terror = err.detail;\n\t\t\t} else {\n\t\t\t\terror = err;\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const deletePipeline = async (token: string, id: string, urlIdx: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/v1/pipelines/delete`, {\n\t\tmethod: 'DELETE',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\t...(token && { authorization: `Bearer ${token}` })\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tid: id,\n\t\t\turlIdx: urlIdx\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\tif ('detail' in err) {\n\t\t\t\terror = err.detail;\n\t\t\t} else {\n\t\t\t\terror = err;\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getPipelines = async (token: string, urlIdx?: string) => {\n\tlet error = null;\n\n\tconst searchParams = new URLSearchParams();\n\tif (urlIdx !== undefined) {\n\t\tsearchParams.append('urlIdx', urlIdx);\n\t}\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/v1/pipelines/?${searchParams.toString()}`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\t...(token && { authorization: `Bearer ${token}` })\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\terror = err;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\tconst pipelines = res?.data ?? [];\n\treturn pipelines;\n};\n\nexport const getPipelineValves = async (token: string, pipeline_id: string, urlIdx: string) => {\n\tlet error = null;\n\n\tconst searchParams = new URLSearchParams();\n\tif (urlIdx !== undefined) {\n\t\tsearchParams.append('urlIdx', urlIdx);\n\t}\n\n\tconst res = await fetch(\n\t\t`${WEBUI_BASE_URL}/api/v1/pipelines/${pipeline_id}/valves?${searchParams.toString()}`,\n\t\t{\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\tAccept: 'application/json',\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t...(token && { authorization: `Bearer ${token}` })\n\t\t\t}\n\t\t}\n\t)\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\terror = err;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getPipelineValvesSpec = async (token: string, pipeline_id: string, urlIdx: string) => {\n\tlet error = null;\n\n\tconst searchParams = new URLSearchParams();\n\tif (urlIdx !== undefined) {\n\t\tsearchParams.append('urlIdx', urlIdx);\n\t}\n\n\tconst res = await fetch(\n\t\t`${WEBUI_BASE_URL}/api/v1/pipelines/${pipeline_id}/valves/spec?${searchParams.toString()}`,\n\t\t{\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\tAccept: 'application/json',\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t...(token && { authorization: `Bearer ${token}` })\n\t\t\t}\n\t\t}\n\t)\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\terror = err;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const updatePipelineValves = async (\n\ttoken: string = '',\n\tpipeline_id: string,\n\tvalves: object,\n\turlIdx: string\n) => {\n\tlet error = null;\n\n\tconst searchParams = new URLSearchParams();\n\tif (urlIdx !== undefined) {\n\t\tsearchParams.append('urlIdx', urlIdx);\n\t}\n\n\tconst res = await fetch(\n\t\t`${WEBUI_BASE_URL}/api/v1/pipelines/${pipeline_id}/valves/update?${searchParams.toString()}`,\n\t\t{\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\tAccept: 'application/json',\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t...(token && { authorization: `Bearer ${token}` })\n\t\t\t},\n\t\t\tbody: JSON.stringify(valves)\n\t\t}\n\t)\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\n\t\t\tif ('detail' in err) {\n\t\t\t\terror = err.detail;\n\t\t\t} else {\n\t\t\t\terror = err;\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getUsage = async (token: string = '') => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/usage`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\t...(token && { Authorization: `Bearer ${token}` })\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\terror = err;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getBackendConfig = async () => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/config`, {\n\t\tmethod: 'GET',\n\t\tcredentials: 'include',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json'\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\terror = err;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getChangelog = async () => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/changelog`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json'\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\terror = err;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getVersion = async (token: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/version`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\terror = err;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getVersionUpdates = async (token: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/version/updates`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\terror = err;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getModelFilterConfig = async (token: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/config/model/filter`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\terror = err;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const updateModelFilterConfig = async (\n\ttoken: string,\n\tenabled: boolean,\n\tmodels: string[]\n) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/config/model/filter`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tenabled: enabled,\n\t\t\tmodels: models\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\terror = err;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getWebhookUrl = async (token: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/webhook`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\terror = err;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res.url;\n};\n\nexport const updateWebhookUrl = async (token: string, url: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/webhook`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\turl: url\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\terror = err;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res.url;\n};\n\nexport const getCommunitySharingEnabledStatus = async (token: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/community_sharing`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\terror = err;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const toggleCommunitySharingEnabledStatus = async (token: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/community_sharing/toggle`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getModelConfig = async (token: string): Promise<GlobalModelConfig> => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/config/models`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\terror = err;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res.models;\n};\n\nexport interface ModelConfig {\n\tid: string;\n\tname: string;\n\tmeta: ModelMeta;\n\tbase_model_id?: string;\n\tparams: ModelParams;\n}\n\nexport interface ModelMeta {\n\ttoolIds: never[];\n\tdescription?: string;\n\tcapabilities?: object;\n\tprofile_image_url?: string;\n}\n\nexport interface ModelParams {}\n\nexport type GlobalModelConfig = ModelConfig[];\n\nexport const updateModelConfig = async (token: string, config: GlobalModelConfig) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_BASE_URL}/api/config/models`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tmodels: config\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.error(err);\n\t\t\terror = err;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n"],"file":"_app/immutable/chunks/B6gyXX6T.js"}