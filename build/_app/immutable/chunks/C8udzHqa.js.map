{"version":3,"file":"C8udzHqa.js","sources":["../../../../../../src/lib/components/chat/ShareChatModal.svelte","../../../../../../src/lib/components/layout/Sidebar/Folders/FolderMenu.svelte","../../../../../../src/lib/components/layout/Sidebar/Folders/FolderModal.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { getContext, onMount } from 'svelte';\n\timport { models, config } from '$lib/stores';\n\n\timport { toast } from 'svelte-sonner';\n\timport { deleteSharedChatById, getChatById, shareChatById } from '$lib/apis/chats';\n\timport { copyToClipboard } from '$lib/utils';\n\n\timport Modal from '../common/Modal.svelte';\n\timport Link from '../icons/Link.svelte';\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\n\texport let chatId;\n\n\tlet chat = null;\n\tlet shareUrl = null;\n\tconst i18n = getContext('i18n');\n\n\tconst shareLocalChat = async () => {\n\t\tconst _chat = chat;\n\n\t\tconst sharedChat = await shareChatById(localStorage.token, chatId);\n\t\tshareUrl = `${window.location.origin}/s/${sharedChat.id}`;\n\t\tconsole.log(shareUrl);\n\t\tchat = await getChatById(localStorage.token, chatId);\n\n\t\treturn shareUrl;\n\t};\n\n\tconst shareChat = async () => {\n\t\tconst _chat = chat.chat;\n\t\tconsole.log('share', _chat);\n\n\t\ttoast.success($i18n.t('Redirecting you to Open WebUI Community'));\n\t\tconst url = 'https://openwebui.com';\n\t\t// const url = 'http://localhost:5173';\n\n\t\tconst tab = await window.open(`${url}/chats/upload`, '_blank');\n\t\twindow.addEventListener(\n\t\t\t'message',\n\t\t\t(event) => {\n\t\t\t\tif (event.origin !== url) return;\n\t\t\t\tif (event.data === 'loaded') {\n\t\t\t\t\ttab.postMessage(\n\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\tchat: _chat,\n\t\t\t\t\t\t\tmodels: $models.filter((m) => _chat.models.includes(m.id))\n\t\t\t\t\t\t}),\n\t\t\t\t\t\t'*'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\t};\n\n\texport let show = false;\n\n\tconst isDifferentChat = (_chat) => {\n\t\tif (!chat) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!_chat) {\n\t\t\treturn false;\n\t\t}\n\t\treturn chat.id !== _chat.id || chat.share_id !== _chat.share_id;\n\t};\n\n\t$: if (show) {\n\t\t(async () => {\n\t\t\tif (chatId) {\n\t\t\t\tconst _chat = await getChatById(localStorage.token, chatId);\n\t\t\t\tif (isDifferentChat(_chat)) {\n\t\t\t\t\tchat = _chat;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tchat = null;\n\t\t\t\tconsole.log(chat);\n\t\t\t}\n\t\t})();\n\t}\n</script>\n\n<Modal bind:show size=\"md\">\n\t<div>\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5\">\n\t\t\t<div class=\" text-lg font-medium self-center\">{$i18n.t('Share Chat')}</div>\n\t\t\t<button\n\t\t\t\tclass=\"self-center\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tshow = false;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<XMark className={'size-5'} />\n\t\t\t</button>\n\t\t</div>\n\n\t\t{#if chat}\n\t\t\t<div class=\"px-5 pt-4 pb-5 w-full flex flex-col justify-center\">\n\t\t\t\t<div class=\" text-sm dark:text-gray-300 mb-1\">\n\t\t\t\t\t{#if chat.share_id}\n\t\t\t\t\t\t<a href=\"/s/{chat.share_id}\" target=\"_blank\"\n\t\t\t\t\t\t\t>{$i18n.t('You have shared this chat')}\n\t\t\t\t\t\t\t<span class=\" underline\">{$i18n.t('before')}</span>.</a\n\t\t\t\t\t\t>\n\t\t\t\t\t\t{$i18n.t('Click here to')}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"underline\"\n\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\tconst res = await deleteSharedChatById(localStorage.token, chatId);\n\n\t\t\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\t\t\tchat = await getChatById(localStorage.token, chatId);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>{$i18n.t('delete this link')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{$i18n.t('and create a new shared link.')}\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t{$i18n.t(\n\t\t\t\t\t\t\t\"Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.\"\n\t\t\t\t\t\t)}\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"flex justify-end\">\n\t\t\t\t\t<div class=\"flex flex-col items-end space-x-1 mt-3\">\n\t\t\t\t\t\t<div class=\"flex gap-1\">\n\t\t\t\t\t\t\t{#if $config?.features.enable_community_sharing}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:text-white dark:hover:bg-gray-800 transition rounded-full\"\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tshareChat();\n\t\t\t\t\t\t\t\t\t\tshow = false;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{$i18n.t('Share to Open WebUI Community')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full\"\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tid=\"copy-and-share-chat-button\"\n\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\tconst isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n\n\t\t\t\t\t\t\t\t\tif (isSafari) {\n\t\t\t\t\t\t\t\t\t\t// Oh, Safari, you're so special, let's give you some extra love and attention\n\t\t\t\t\t\t\t\t\t\tconsole.log('isSafari');\n\n\t\t\t\t\t\t\t\t\t\tconst getUrlPromise = async () => {\n\t\t\t\t\t\t\t\t\t\t\tconst url = await shareLocalChat();\n\t\t\t\t\t\t\t\t\t\t\treturn new Blob([url], { type: 'text/plain' });\n\t\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t\tnavigator.clipboard\n\t\t\t\t\t\t\t\t\t\t\t.write([\n\t\t\t\t\t\t\t\t\t\t\t\tnew ClipboardItem({\n\t\t\t\t\t\t\t\t\t\t\t\t\t'text/plain': getUrlPromise()\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('Async: Copying to clipboard was successful!');\n\t\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.error('Async: Could not copy text: ', error);\n\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tcopyToClipboard(await shareLocalChat());\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\ttoast.success($i18n.t('Copied shared chat URL to clipboard!'));\n\t\t\t\t\t\t\t\t\tshow = false;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Link />\n\n\t\t\t\t\t\t\t\t{#if chat.share_id}\n\t\t\t\t\t\t\t\t\t{$i18n.t('Update and Copy Link')}\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t{$i18n.t('Copy Link')}\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n</Modal>\n","<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport { getContext, createEventDispatcher } from 'svelte';\n\n\tconst i18n = getContext('i18n');\n\tconst dispatch = createEventDispatcher();\n\n\timport Dropdown from '$lib/components/common/Dropdown.svelte';\n\timport GarbageBin from '$lib/components/icons/GarbageBin.svelte';\n\timport Pencil from '$lib/components/icons/Pencil.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport Download from '$lib/components/icons/Download.svelte';\n\n\texport let align: 'start' | 'end' = 'start';\n\texport let onEdit = () => {};\n\texport let onExport = () => {};\n\texport let onDelete = () => {};\n\n\tlet show = false;\n</script>\n\n<Dropdown\n\tbind:show\n\ton:change={(e) => {\n\t\tif (e.detail === false) {\n\t\t\tdispatch('close');\n\t\t}\n\t}}\n>\n\t<Tooltip content={$i18n.t('More')}>\n\t\t<button\n\t\t\ton:click={(e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tshow = !show;\n\t\t\t}}\n\t\t>\n\t\t\t<slot />\n\t\t</button>\n\t</Tooltip>\n\n\t<div slot=\"content\">\n\t\t<DropdownMenu.Content\n\t\t\tclass=\"w-full max-w-[170px] rounded-2xl px-1 py-1 border border-gray-100  dark:border-gray-800   z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg\"\n\t\t\tsideOffset={-2}\n\t\t\tside=\"bottom\"\n\t\t\t{align}\n\t\t\ttransition={flyAndScale}\n\t\t>\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tonEdit();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Pencil />\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Edit')}</div>\n\t\t\t</DropdownMenu.Item>\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tonExport();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Download />\n\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Export')}</div>\n\t\t\t</DropdownMenu.Item>\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tonDelete();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<GarbageBin />\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Delete')}</div>\n\t\t\t</DropdownMenu.Item>\n\t\t</DropdownMenu.Content>\n\t</div>\n</Dropdown>\n","<script lang=\"ts\">\n\timport { getContext, createEventDispatcher, onMount, tick } from 'svelte';\n\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport Modal from '$lib/components/common/Modal.svelte';\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\n\timport { toast } from 'svelte-sonner';\n\timport { page } from '$app/stores';\n\timport { goto } from '$app/navigation';\n\timport { user, config } from '$lib/stores';\n\n\timport Textarea from '$lib/components/common/Textarea.svelte';\n\timport Knowledge from '$lib/components/workspace/Models/Knowledge.svelte';\n\timport { getFolderById } from '$lib/apis/folders';\n\tconst i18n = getContext('i18n');\n\n\texport let show = false;\n\texport let onSubmit: Function = (e) => {};\n\n\texport let folderId = null;\n\texport let edit = false;\n\n\tlet folder = null;\n\tlet name = '';\n\tlet meta = {\n\t\tbackground_image_url: null\n\t};\n\tlet data = {\n\t\tsystem_prompt: '',\n\t\tfiles: []\n\t};\n\n\tlet loading = false;\n\n\tconst submitHandler = async () => {\n\t\tloading = true;\n\n\t\tif ((data?.files ?? []).some((file) => file.status === 'uploading')) {\n\t\t\ttoast.error($i18n.t('Please wait until all files are uploaded.'));\n\t\t\tloading = false;\n\t\t\treturn;\n\t\t}\n\n\t\t// Check folder max file count limit\n\t\tconst maxFileCount = $config?.features?.folder_max_file_count ?? '';\n\t\tif (maxFileCount && (data?.files ?? []).length > maxFileCount) {\n\t\t\ttoast.error(\n\t\t\t\t$i18n.t('Maximum number of files per folder is {{max}}.', { max: maxFileCount ?? 0 })\n\t\t\t);\n\t\t\tloading = false;\n\t\t\treturn;\n\t\t}\n\n\t\tawait onSubmit({\n\t\t\tname,\n\t\t\tmeta,\n\t\t\tdata\n\t\t});\n\t\tshow = false;\n\t\tloading = false;\n\t};\n\n\tconst init = async () => {\n\t\tif (folderId) {\n\t\t\tfolder = await getFolderById(localStorage.token, folderId).catch((error) => {\n\t\t\t\ttoast.error(`${error}`);\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\t\tname = folder.name;\n\t\t\tmeta = folder.meta || {\n\t\t\t\tbackground_image_url: null\n\t\t\t};\n\t\t\tdata = folder.data || {\n\t\t\t\tsystem_prompt: '',\n\t\t\t\tfiles: []\n\t\t\t};\n\t\t}\n\n\t\tfocusInput();\n\t};\n\n\tconst focusInput = async () => {\n\t\tawait tick();\n\t\tconst input = document.getElementById('folder-name') as HTMLInputElement;\n\t\tif (input) {\n\t\t\tinput.focus();\n\t\t\tinput.select();\n\t\t}\n\t};\n\n\t$: if (show) {\n\t\tinit();\n\t}\n\n\t$: if (!show && !edit) {\n\t\tname = '';\n\t\tmeta = {\n\t\t\tbackground_image_url: null\n\t\t};\n\t\tdata = {\n\t\t\tsystem_prompt: '',\n\t\t\tfiles: []\n\t\t};\n\t}\n</script>\n\n<Modal size=\"md\" bind:show>\n\t<div>\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5 pt-4 pb-1\">\n\t\t\t<div class=\" text-lg font-medium self-center\">\n\t\t\t\t{#if edit}\n\t\t\t\t\t{$i18n.t('Edit Folder')}\n\t\t\t\t{:else}\n\t\t\t\t\t{$i18n.t('Create Folder')}\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t\t<button\n\t\t\t\tclass=\"self-center\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tshow = false;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<XMark className={'size-5'} />\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class=\"flex flex-col md:flex-row w-full px-5 pb-4 md:space-x-4 dark:text-gray-200\">\n\t\t\t<div class=\" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6\">\n\t\t\t\t<form\n\t\t\t\t\tclass=\"flex flex-col w-full\"\n\t\t\t\t\ton:submit|preventDefault={() => {\n\t\t\t\t\t\tsubmitHandler();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"flex flex-col w-full mt-1\">\n\t\t\t\t\t\t<div class=\" mb-1 text-xs text-gray-500\">{$i18n.t('Folder Name')}</div>\n\n\t\t\t\t\t\t<div class=\"flex-1\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"folder-name\"\n\t\t\t\t\t\t\t\tclass=\"w-full text-sm bg-transparent placeholder:text-gray-300 dark:placeholder:text-gray-700 outline-hidden\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tbind:value={name}\n\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Enter folder name')}\n\t\t\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"folder-background-image-input\"\n\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\thidden\n\t\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\t\ton:change={(e) => {\n\t\t\t\t\t\t\tconst inputFiles = e.target.files;\n\n\t\t\t\t\t\t\tlet reader = new FileReader();\n\t\t\t\t\t\t\treader.onload = (event) => {\n\t\t\t\t\t\t\t\tlet originalImageUrl = `${event.target.result}`;\n\t\t\t\t\t\t\t\tmeta.background_image_url = originalImageUrl;\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tinputFiles &&\n\t\t\t\t\t\t\t\tinputFiles.length > 0 &&\n\t\t\t\t\t\t\t\t['image/gif', 'image/webp', 'image/jpeg', 'image/png'].includes(\n\t\t\t\t\t\t\t\t\tinputFiles[0]['type']\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treader.readAsDataURL(inputFiles[0]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconsole.log(`Unsupported File Type '${inputFiles[0]['type']}'.`);\n\n\t\t\t\t\t\t\t\t// clear the input\n\t\t\t\t\t\t\t\te.target.value = '';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div class=\"flex justify-between w-full mt-1 items-center\">\n\t\t\t\t\t\t<div class=\"text-xs text-gray-500\">{$i18n.t('Folder Background Image')}</div>\n\n\t\t\t\t\t\t<div class=\"\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\taria-labelledby=\"chat-background-label background-image-url-state\"\n\t\t\t\t\t\t\t\tclass=\"p-1 px-3 text-xs flex rounded-sm transition\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tif (meta?.background_image_url !== null) {\n\t\t\t\t\t\t\t\t\t\tmeta.background_image_url = null;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tconst input = document.getElementById('folder-background-image-input');\n\t\t\t\t\t\t\t\t\t\tif (input) {\n\t\t\t\t\t\t\t\t\t\t\tinput.click();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"ml-2 self-center\" id=\"background-image-url-state\"\n\t\t\t\t\t\t\t\t\t>{(meta?.background_image_url ?? null) === null\n\t\t\t\t\t\t\t\t\t\t? $i18n.t('Upload')\n\t\t\t\t\t\t\t\t\t\t: $i18n.t('Reset')}</span\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<hr class=\" border-gray-50 dark:border-gray-850/30 my-2.5 w-full\" />\n\n\t\t\t\t\t{#if $user?.role === 'admin' || ($user?.permissions.chat?.system_prompt ?? true)}\n\t\t\t\t\t\t<div class=\"my-1\">\n\t\t\t\t\t\t\t<div class=\"mb-2 text-xs text-gray-500\">{$i18n.t('System Prompt')}</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\tclassName=\" text-sm w-full bg-transparent outline-hidden \"\n\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t(\n\t\t\t\t\t\t\t\t\t\t'Write your model system prompt content here\\ne.g.) You are Mario from Super Mario Bros, acting as an assistant.'\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tmaxSize={200}\n\t\t\t\t\t\t\t\t\tbind:value={data.system_prompt}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t<div class=\"my-2\">\n\t\t\t\t\t\t<Knowledge bind:selectedItems={data.files}>\n\t\t\t\t\t\t\t<div slot=\"label\">\n\t\t\t\t\t\t\t\t<div class=\"flex w-full justify-between\">\n\t\t\t\t\t\t\t\t\t<div class=\" mb-2 text-xs text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t{$i18n.t('Knowledge')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Knowledge>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"flex justify-end pt-3 text-sm font-medium gap-1.5\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-950 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center {loading\n\t\t\t\t\t\t\t\t? ' cursor-not-allowed'\n\t\t\t\t\t\t\t\t: ''}\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{$i18n.t('Save')}\n\n\t\t\t\t\t\t\t{#if loading}\n\t\t\t\t\t\t\t\t<div class=\"ml-2 self-center\">\n\t\t\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</Modal>\n"],"names":["chatId","$.prop","$$props","chat","shareUrl","i18n","getContext","shareLocalChat","sharedChat","shareChatById","$.set","getChatById","shareChat","_chat","$.get","toast","$i18n","url","tab","event","$models","m","show","isDifferentChat","Modal","$$anchor","$$value","div","root_1","div_1","div_2","button","$.sibling","node","$.child","XMark","$.reset","div_3","root_2","div_4","a","$.first_child","fragment_1","span","text_1","button_1","text_3","text_4","text_5","$.set_attribute","$.untrack","deleteSharedChatById","$$render","consequent","alternate","div_5","div_6","div_7","button_2","root_5","text_7","$.append","_a","$config","button_3","node_3","node_4","Link","consequent_2","alternate_1","getUrlPromise","error","copyToClipboard","consequent_3","dispatch","createEventDispatcher","align","onEdit","onExport","onDelete","Dropdown","e","Tooltip","$.event","root_3","flyAndScale","Pencil","Download","node_5","GarbageBin","node_7","onSubmit","folderId","edit","folder","name","meta","$.mutable_source","data","loading","submitHandler","file","maxFileCount","_c","_b","init","getFolderById","focusInput","tick","input","node_1","form","input_1","$.remove_input_defaults","input_2","div_8","div_9","div_10","div_11","root_4","div_12","div_13","Textarea","$user","div_14","node_2","Knowledge","div_15","div_16","div_17","div_18","div_19","root_6","Spinner","node_6","$1","inputFiles","reader","originalImageUrl","$.mutate","$.preventDefault"],"mappings":"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"}