{"version":3,"file":"33.DPxuERYp.js","sources":["../../../../../../src/lib/components/workspace/Knowledge/CreateKnowledgeBase.svelte","../../../../../../src/routes/(app)/workspace/knowledge/create/+page.svelte"],"sourcesContent":["<script>\n\timport { toast } from 'svelte-sonner';\n\n\timport { goto } from '$app/navigation';\n\timport { getContext } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport { user } from '$lib/stores';\n\timport { createNewKnowledge } from '$lib/apis/knowledge';\n\n\timport AccessControl from '../common/AccessControl.svelte';\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\n\tlet loading = false;\n\n\tlet name = '';\n\tlet description = '';\n\tlet accessControl = {};\n\n\tconst submitHandler = async () => {\n\t\tloading = true;\n\n\t\tif (name.trim() === '' || description.trim() === '') {\n\t\t\ttoast.error($i18n.t('Please fill in all fields.'));\n\t\t\tname = '';\n\t\t\tdescription = '';\n\t\t\tloading = false;\n\t\t\treturn;\n\t\t}\n\n\t\tconst res = await createNewKnowledge(\n\t\t\tlocalStorage.token,\n\t\t\tname,\n\t\t\tdescription,\n\t\t\taccessControl\n\t\t).catch((e) => {\n\t\t\ttoast.error(`${e}`);\n\t\t});\n\n\t\tif (res) {\n\t\t\ttoast.success($i18n.t('Knowledge created successfully.'));\n\t\t\tgoto(`/workspace/knowledge/${res.id}`);\n\t\t}\n\n\t\tloading = false;\n\t};\n</script>\n\n<div class=\"w-full max-h-full\">\n\t<button\n\t\tclass=\"flex space-x-1\"\n\t\ton:click={() => {\n\t\t\tgoto('/workspace/knowledge');\n\t\t}}\n\t>\n\t\t<div class=\" self-center\">\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t>\n\t\t\t\t<path\n\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\td=\"M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z\"\n\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t/>\n\t\t\t</svg>\n\t\t</div>\n\t\t<div class=\" self-center font-medium text-sm\">{$i18n.t('Back')}</div>\n\t</button>\n\n\t<form\n\t\tclass=\"flex flex-col max-w-lg mx-auto mt-10 mb-10\"\n\t\ton:submit|preventDefault={() => {\n\t\t\tsubmitHandler();\n\t\t}}\n\t>\n\t\t<div class=\" w-full flex flex-col justify-center\">\n\t\t\t<div class=\" text-2xl font-medium font-primary mb-2.5\">\n\t\t\t\t{$i18n.t('Create a knowledge base')}\n\t\t\t</div>\n\n\t\t\t<div class=\"w-full flex flex-col gap-2.5\">\n\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t<div class=\" text-sm mb-2\">{$i18n.t('What are you working on?')}</div>\n\n\t\t\t\t\t<div class=\"w-full mt-1\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm bg-gray-50 dark:text-gray-300 dark:bg-gray-850 outline-hidden\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tbind:value={name}\n\t\t\t\t\t\t\tplaceholder={$i18n.t('Name your knowledge base')}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"text-sm mb-2\">{$i18n.t('What are you trying to achieve?')}</div>\n\n\t\t\t\t\t<div class=\" w-full mt-1\">\n\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\tclass=\"w-full resize-none rounded-lg py-2 px-4 text-sm bg-gray-50 dark:text-gray-300 dark:bg-gray-850 outline-hidden\"\n\t\t\t\t\t\t\trows=\"4\"\n\t\t\t\t\t\t\tbind:value={description}\n\t\t\t\t\t\t\tplaceholder={$i18n.t('Describe your knowledge base and objectives')}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"mt-2\">\n\t\t\t<AccessControl\n\t\t\t\tbind:accessControl\n\t\t\t\taccessRoles={['read', 'write']}\n\t\t\t\tshare={$user?.permissions?.sharing?.knowledge || $user?.role === 'admin'}\n\t\t\t\tsharePublic={$user?.permissions?.sharing?.public_knowledge || $user?.role === 'admin'}\n\t\t\t/>\n\t\t</div>\n\n\t\t<div class=\"flex justify-end mt-2\">\n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\tclass=\" text-sm px-4 py-2 transition rounded-lg {loading\n\t\t\t\t\t\t? ' cursor-not-allowed bg-gray-100 dark:bg-gray-800'\n\t\t\t\t\t\t: ' bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800'} flex\"\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tdisabled={loading}\n\t\t\t\t>\n\t\t\t\t\t<div class=\" self-center font-medium\">{$i18n.t('Create Knowledge')}</div>\n\n\t\t\t\t\t{#if loading}\n\t\t\t\t\t\t<div class=\"ml-1.5 self-center\">\n\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</form>\n</div>\n","<script>\n\timport CreateKnowledgeBase from '$lib/components/workspace/Knowledge/CreateKnowledgeBase.svelte';\n</script>\n\n<CreateKnowledgeBase />\n"],"names":["i18n","getContext","loading","name","description","accessControl","$.mutable_source","submitHandler","$.set","$.get","toast","$i18n","res","createNewKnowledge","e","goto","div","root","button","$.child","div_1","$.sibling","$.reset","form","div_2","div_3","div_4","div_5","div_6","div_7","input","$.remove_input_defaults","div_8","div_9","div_10","textarea","$.remove_textarea_child","div_11","_c","_b","_a","$user","_d","AccessControl","node","$$value","div_12","div_13","button_1","div_14","div_15","root_1","Spinner","node_2","$$render","consequent","$.set_attribute","$3","$5","$.preventDefault","CreateKnowledgeBase","$$anchor"],"mappings":"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"}