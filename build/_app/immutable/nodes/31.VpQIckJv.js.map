{"version":3,"file":"31.VpQIckJv.js","sources":["../../../../../../src/lib/components/workspace/Knowledge/ItemMenu.svelte","../../../../../../src/lib/components/workspace/Knowledge.svelte","../../../../../../src/routes/(app)/workspace/knowledge/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport { getContext, createEventDispatcher } from 'svelte';\n\tconst dispatch = createEventDispatcher();\n\n\timport Dropdown from '$lib/components/common/Dropdown.svelte';\n\timport GarbageBin from '$lib/components/icons/GarbageBin.svelte';\n\timport Pencil from '$lib/components/icons/Pencil.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport Tags from '$lib/components/chat/Tags.svelte';\n\timport Share from '$lib/components/icons/Share.svelte';\n\timport ArchiveBox from '$lib/components/icons/ArchiveBox.svelte';\n\timport DocumentDuplicate from '$lib/components/icons/DocumentDuplicate.svelte';\n\timport Download from '$lib/components/icons/Download.svelte';\n\timport ArrowUpCircle from '$lib/components/icons/ArrowUpCircle.svelte';\n\timport EllipsisHorizontal from '$lib/components/icons/EllipsisHorizontal.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let onExport: null | Function = null;\n\texport let onClose: Function = () => {};\n\n\tlet show = false;\n</script>\n\n<Dropdown\n\tbind:show\n\ton:change={(e) => {\n\t\tif (e.detail === false) {\n\t\t\tonClose();\n\t\t}\n\t}}\n\talign=\"end\"\n>\n\t<Tooltip content={$i18n.t('More')}>\n\t\t<slot\n\t\t\t><button\n\t\t\t\tclass=\"self-center w-fit text-sm p-1.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl\"\n\t\t\t\ttype=\"button\"\n\t\t\t\ton:click={(e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tshow = true;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<EllipsisHorizontal className=\"size-5\" />\n\t\t\t</button>\n\t\t</slot>\n\t</Tooltip>\n\n\t<div slot=\"content\">\n\t\t<DropdownMenu.Content\n\t\t\tclass=\"w-full max-w-[170px] rounded-2xl px-1 py-1 border border-gray-100  dark:border-gray-800 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg\"\n\t\t\tside=\"bottom\"\n\t\t\talign=\"end\"\n\t\t\ttransition={flyAndScale}\n\t\t>\n\t\t\t{#if onExport}\n\t\t\t\t<DropdownMenu.Item\n\t\t\t\t\tclass=\"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tonExport();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Download />\n\t\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Export')}</div>\n\t\t\t\t</DropdownMenu.Item>\n\t\t\t{/if}\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex  gap-2  items-center px-3 py-1.5 text-sm   cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tdispatch('delete');\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<GarbageBin />\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Delete')}</div>\n\t\t\t</DropdownMenu.Item>\n\t\t</DropdownMenu.Content>\n\t</div>\n</Dropdown>\n","<script lang=\"ts\">\n\timport dayjs from 'dayjs';\n\timport relativeTime from 'dayjs/plugin/relativeTime';\n\tdayjs.extend(relativeTime);\n\n\timport { toast } from 'svelte-sonner';\n\timport { onMount, getContext, tick } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport { WEBUI_NAME, knowledge, user } from '$lib/stores';\n\timport {\n\t\tdeleteKnowledgeById,\n\t\tsearchKnowledgeBases,\n\t\texportKnowledgeById\n\t} from '$lib/apis/knowledge';\n\n\timport { goto } from '$app/navigation';\n\timport { capitalizeFirstLetter } from '$lib/utils';\n\n\timport DeleteConfirmDialog from '../common/ConfirmDialog.svelte';\n\timport ItemMenu from './Knowledge/ItemMenu.svelte';\n\timport Badge from '../common/Badge.svelte';\n\timport Search from '../icons/Search.svelte';\n\timport Plus from '../icons/Plus.svelte';\n\timport Spinner from '../common/Spinner.svelte';\n\timport Tooltip from '../common/Tooltip.svelte';\n\timport XMark from '../icons/XMark.svelte';\n\timport ViewSelector from './common/ViewSelector.svelte';\n\timport Loader from '../common/Loader.svelte';\n\n\tlet loaded = false;\n\tlet showDeleteConfirm = false;\n\tlet tagsContainerElement: HTMLDivElement;\n\n\tlet selectedItem = null;\n\n\tlet page = 1;\n\tlet query = '';\n\tlet viewOption = '';\n\n\tlet items = null;\n\tlet total = null;\n\n\tlet allItemsLoaded = false;\n\tlet itemsLoading = false;\n\n\t$: if (loaded && query !== undefined && viewOption !== undefined) {\n\t\tinit();\n\t}\n\n\tconst reset = () => {\n\t\tpage = 1;\n\t\titems = null;\n\t\ttotal = null;\n\t\tallItemsLoaded = false;\n\t\titemsLoading = false;\n\t};\n\n\tconst loadMoreItems = async () => {\n\t\tif (allItemsLoaded) return;\n\t\tpage += 1;\n\t\tawait getItemsPage();\n\t};\n\n\tconst init = async () => {\n\t\treset();\n\t\tawait getItemsPage();\n\t};\n\n\tconst getItemsPage = async () => {\n\t\titemsLoading = true;\n\t\tconst res = await searchKnowledgeBases(localStorage.token, query, viewOption, page).catch(\n\t\t\t() => {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t);\n\n\t\tif (res) {\n\t\t\tconsole.log(res);\n\t\t\ttotal = res.total;\n\t\t\tconst pageItems = res.items;\n\n\t\t\tif ((pageItems ?? []).length === 0) {\n\t\t\t\tallItemsLoaded = true;\n\t\t\t} else {\n\t\t\t\tallItemsLoaded = false;\n\t\t\t}\n\n\t\t\tif (items) {\n\t\t\t\titems = [...items, ...pageItems];\n\t\t\t} else {\n\t\t\t\titems = pageItems;\n\t\t\t}\n\t\t}\n\n\t\titemsLoading = false;\n\t\treturn res;\n\t};\n\n\tconst deleteHandler = async (item) => {\n\t\tconst res = await deleteKnowledgeById(localStorage.token, item.id).catch((e) => {\n\t\t\ttoast.error(`${e}`);\n\t\t});\n\n\t\tif (res) {\n\t\t\ttoast.success($i18n.t('Knowledge deleted successfully.'));\n\t\t\tinit();\n\t\t}\n\t};\n\n\tconst exportHandler = async (item) => {\n\t\ttry {\n\t\t\tconst blob = await exportKnowledgeById(localStorage.token, item.id);\n\t\t\tif (blob) {\n\t\t\t\tconst url = URL.createObjectURL(blob);\n\t\t\t\tconst a = document.createElement('a');\n\t\t\t\ta.href = url;\n\t\t\t\ta.download = `${item.name}.zip`;\n\t\t\t\tdocument.body.appendChild(a);\n\t\t\t\ta.click();\n\t\t\t\tdocument.body.removeChild(a);\n\t\t\t\tURL.revokeObjectURL(url);\n\t\t\t\ttoast.success($i18n.t('Knowledge exported successfully'));\n\t\t\t}\n\t\t} catch (e) {\n\t\t\ttoast.error(`${e}`);\n\t\t}\n\t};\n\n\tonMount(async () => {\n\t\tviewOption = localStorage?.workspaceViewOption || '';\n\t\tloaded = true;\n\t});\n</script>\n\n<svelte:head>\n\t<title>\n\t\t{$i18n.t('Knowledge')} â€¢ {$WEBUI_NAME}\n\t</title>\n</svelte:head>\n\n{#if loaded}\n\t<DeleteConfirmDialog\n\t\tbind:show={showDeleteConfirm}\n\t\ton:confirm={() => {\n\t\t\tdeleteHandler(selectedItem);\n\t\t}}\n\t/>\n\n\t<div class=\"flex flex-col gap-1 px-1 mt-1.5 mb-3\">\n\t\t<div class=\"flex justify-between items-center\">\n\t\t\t<div class=\"flex items-center md:self-center text-xl font-medium px-0.5 gap-2 shrink-0\">\n\t\t\t\t<div>\n\t\t\t\t\t{$i18n.t('Knowledge')}\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"text-lg font-medium text-gray-500 dark:text-gray-500\">\n\t\t\t\t\t{total}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"flex w-full justify-end gap-1.5\">\n\t\t\t\t<a\n\t\t\t\t\tclass=\" px-2 py-1.5 rounded-xl bg-black text-white dark:bg-white dark:text-black transition font-medium text-sm flex items-center\"\n\t\t\t\t\thref=\"/workspace/knowledge/create\"\n\t\t\t\t>\n\t\t\t\t\t<Plus className=\"size-3\" strokeWidth=\"2.5\" />\n\n\t\t\t\t\t<div class=\" hidden md:block md:ml-1 text-xs\">{$i18n.t('New Knowledge')}</div>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div\n\t\tclass=\"py-2 bg-white dark:bg-gray-900 rounded-3xl border border-gray-100/30 dark:border-gray-850/30\"\n\t>\n\t\t<div class=\" flex w-full space-x-2 py-0.5 px-3.5 pb-2\">\n\t\t\t<div class=\"flex flex-1\">\n\t\t\t\t<div class=\" self-center ml-1 mr-3\">\n\t\t\t\t\t<Search className=\"size-3.5\" />\n\t\t\t\t</div>\n\t\t\t\t<input\n\t\t\t\t\tclass=\" w-full text-sm py-1 rounded-r-xl outline-hidden bg-transparent\"\n\t\t\t\t\tbind:value={query}\n\t\t\t\t\tplaceholder={$i18n.t('Search Knowledge')}\n\t\t\t\t/>\n\t\t\t\t{#if query}\n\t\t\t\t\t<div class=\"self-center pl-1.5 translate-y-[0.5px] rounded-l-xl bg-transparent\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"p-0.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-900 transition\"\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tquery = '';\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<XMark className=\"size-3\" strokeWidth=\"2\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div\n\t\t\tclass=\"px-3 flex w-full bg-transparent overflow-x-auto scrollbar-none -mx-1\"\n\t\t\ton:wheel={(e) => {\n\t\t\t\tif (e.deltaY !== 0) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.currentTarget.scrollLeft += e.deltaY;\n\t\t\t\t}\n\t\t\t}}\n\t\t>\n\t\t\t<div\n\t\t\t\tclass=\"flex gap-0.5 w-fit text-center text-sm rounded-full bg-transparent px-1.5 whitespace-nowrap\"\n\t\t\t\tbind:this={tagsContainerElement}\n\t\t\t>\n\t\t\t\t<ViewSelector\n\t\t\t\t\tbind:value={viewOption}\n\t\t\t\t\tonChange={async (value) => {\n\t\t\t\t\t\tlocalStorage.workspaceViewOption = value;\n\n\t\t\t\t\t\tawait tick();\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\n\t\t{#if items !== null && total !== null}\n\t\t\t{#if (items ?? []).length !== 0}\n\t\t\t\t<!-- The Aleph dreams itself into being, and the void learns its own name -->\n\t\t\t\t<div class=\" my-2 px-3 grid grid-cols-1 lg:grid-cols-2 gap-2\">\n\t\t\t\t\t{#each items as item}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\" flex space-x-4 cursor-pointer text-left w-full px-3 py-2.5 dark:hover:bg-gray-850/50 hover:bg-gray-50 transition rounded-2xl\"\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tif (item?.meta?.document) {\n\t\t\t\t\t\t\t\t\ttoast.error(\n\t\t\t\t\t\t\t\t\t\t$i18n.t(\n\t\t\t\t\t\t\t\t\t\t\t'Only collections can be edited, create a new knowledge base to edit/add documents.'\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tgoto(`/workspace/knowledge/${item.id}`);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\" w-full\">\n\t\t\t\t\t\t\t\t<div class=\" self-center flex-1 justify-between\">\n\t\t\t\t\t\t\t\t\t<div class=\"flex items-center justify-between -my-1 h-8\">\n\t\t\t\t\t\t\t\t\t\t<div class=\" flex gap-2 items-center justify-between w-full\">\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<Badge type=\"success\" content={$i18n.t('Collection')} />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t{#if !item?.write_access}\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge type=\"muted\" content={$i18n.t('Read Only')} />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t{#if item?.write_access || $user?.role === 'admin'}\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\" flex self-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ItemMenu\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonExport={$user.role === 'admin'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\texportHandler(item);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ton:delete={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedItem = item;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowDeleteConfirm = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class=\" flex items-center gap-1 justify-between px-1.5\">\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={item?.description ?? item.name}>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\" flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\" text-sm font-medium line-clamp-1 capitalize\">{item.name}</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t\t\t\t\t<div class=\"flex items-center gap-2 shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip content={dayjs(item.updated_at * 1000).format('LLLL')}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\" text-xs text-gray-500 line-clamp-1 hidden sm:block\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('Updated')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{dayjs(item.updated_at * 1000).fromNow()}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"text-xs text-gray-500 shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontent={item?.user?.email ?? $i18n.t('Deleted User')}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex shrink-0\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tplacement=\"top-start\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('By {{name}}', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: capitalizeFirstLetter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem?.user?.name ?? item?.user?.email ?? $i18n.t('Deleted User')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\n\t\t\t\t{#if !allItemsLoaded}\n\t\t\t\t\t<Loader\n\t\t\t\t\t\ton:visible={(e) => {\n\t\t\t\t\t\t\tif (!itemsLoading) {\n\t\t\t\t\t\t\t\tloadMoreItems();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"w-full flex justify-center py-4 text-xs animate-pulse items-center gap-2\">\n\t\t\t\t\t\t\t<Spinner className=\" size-4\" />\n\t\t\t\t\t\t\t<div class=\" \">{$i18n.t('Loading...')}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Loader>\n\t\t\t\t{/if}\n\t\t\t{:else}\n\t\t\t\t<div class=\" w-full h-full flex flex-col justify-center items-center my-16 mb-24\">\n\t\t\t\t\t<div class=\"max-w-md text-center\">\n\t\t\t\t\t\t<div class=\" text-3xl mb-3\">ðŸ˜•</div>\n\t\t\t\t\t\t<div class=\" text-lg font-medium mb-1\">{$i18n.t('No knowledge found')}</div>\n\t\t\t\t\t\t<div class=\" text-gray-500 text-center text-xs\">\n\t\t\t\t\t\t\t{$i18n.t('Try adjusting your search or filter to find what you are looking for.')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t{:else}\n\t\t\t<div class=\"w-full h-full flex justify-center items-center py-10\">\n\t\t\t\t<Spinner className=\"size-4\" />\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\n\t<div class=\" text-gray-500 text-xs m-2\">\n\t\tâ“˜ {$i18n.t(\"Use '#' in the prompt input to load and include your knowledge.\")}\n\t</div>\n{:else}\n\t<div class=\"w-full h-full flex justify-center items-center\">\n\t\t<Spinner className=\"size-5\" />\n\t</div>\n{/if}\n","<script>\n\timport Knowledge from '$lib/components/workspace/Knowledge.svelte';\n</script>\n\n<Knowledge />\n"],"names":["dispatch","createEventDispatcher","i18n","getContext","onExport","onClose","$.prop","$$props","show","Dropdown","$$anchor","$$value","e","$i18n","Tooltip","button","root_3","node_1","$.child","EllipsisHorizontal","$.reset","$.event","$.set","$.append","div","root_4","flyAndScale","Download","node_4","div_1","$.sibling","$$render","consequent","GarbageBin","node_6","div_2","dayjs","relativeTime","loaded","showDeleteConfirm","tagsContainerElement","$.mutable_source","selectedItem","page","query","viewOption","items","total","allItemsLoaded","itemsLoading","reset","loadMoreItems","getItemsPage","init","res","searchKnowledgeBases","$.get","pageItems","deleteHandler","item","deleteKnowledgeById","toast","exportHandler","blob","exportKnowledgeById","url","a","onMount","$.head","$WEBUI_NAME","DeleteConfirmDialog","div_3","div_4","div_5","a_1","node_2","Plus","div_6","div_7","div_8","div_9","div_10","Search","node_3","input","$.remove_input_defaults","div_11","node_5","XMark","div_12","div_13","ViewSelector","value","tick","node_7","div_14","$.first_child","fragment_3","$.index","button_1","root_6","div_15","div_16","div_17","div_18","div_19","Badge","node_9","div_20","root_7","node_11","$.untrack","consequent_1","div_21","root_8","div_22","$user","ItemMenu","node_13","_b","div_23","node_14","div_24","root_9","div_25","div_26","node_15","div_27","root_10","div_28","node_16","capitalizeFirstLetter","goto","Loader","div_29","root_13","Spinner","node_18","div_30","consequent_3","div_31","root_14","div_32","div_33","div_34","div_35","root_15","node_19","consequent_5","alternate_1","div_36","$.set_attribute","$2","div_37","root_16","node_20","consequent_6","alternate_2","Knowledge"],"mappings":"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"}