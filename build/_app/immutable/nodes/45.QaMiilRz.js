import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as ce,g as de,q as T,v as fe,d as ue,e as ge,a as D,b as me,j as e,m as c,h as ve,i as r,x as E,w as $,$ as pe,aQ as he,f as _e,c as a,r as s,k as j,n as xe,t as ye,u as $e,s as C,l as we}from"../chunks/0WpKKl27.js";import{i as be}from"../chunks/Cmf4RC8y.js";import{h as ke}from"../chunks/Bwqchdu-.js";import{s as Se}from"../chunks/CZ1y6KaE.js";import{i as Ie}from"../chunks/C3k0oZ3o.js";import{s as Me,a as _}from"../chunks/BVrWTcfB.js";import{g as w}from"../chunks/B5RARo22.js";import{p as Be}from"../chunks/CLoTtgoA.js";import{d as N}from"../chunks/BC4znSyB.js";import{b as U,a as Ee,e as G,W as je,c as Ce}from"../chunks/PCOILo-8.js";import{l as Ne,d as Ue,f as Le}from"../chunks/cX8aofVu.js";import{g as We,c as Ae}from"../chunks/DR3TfYWm.js";import{M as qe}from"../chunks/C-5A-I7X.js";import{g as Fe,a as Oe}from"../chunks/BaVH4moA.js";import{g as Re}from"../chunks/B6gyXX6T.js";import{t as ze}from"../chunks/DYdr9DjX.js";var He=_e('<div class="h-screen max-h-[100dvh] w-full flex flex-col text-gray-700 dark:text-gray-100 bg-white dark:bg-gray-900"><div class="flex flex-col flex-auto justify-center relative"><div class=" flex flex-col w-full flex-auto overflow-auto h-0" id="messages-container"><div><div class="px-3"><div class=" text-2xl font-medium line-clamp-1"> </div> <div class="flex text-sm justify-between items-center mt-1"><div class="text-gray-400"> </div></div></div></div> <div class=" h-full w-full flex flex-col py-2"><div class="w-full"><!></div></div></div> <div class="absolute bottom-0 right-0 left-0 flex justify-center w-full bg-linear-to-b from-transparent to-white dark:to-gray-900"><div class="pb-5"><button class="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"> </button></div></div></div></div>');function it(K,V){ce(V,!1);const b=()=>_(Be,"$page",m),X=()=>_(Ce,"$config",m),k=()=>_(U,"$settings",m),L=()=>_(G,"$chatId",m),S=()=>_(je,"$WEBUI_NAME",m),W=()=>_(Z,"$i18n",m),[m,Y]=Me(),Z=de("i18n");N.extend(Ne);let A=c(!1),I=c(!0),ee="",q=c([""]),n=c(null),F=c(null),d=c(""),te=[],f=c([]),i=c({messages:{},currentId:null});const ae=async()=>{var l,x,v,u,y,p;const o=await Fe(localStorage.token).catch(t=>null);if(o)U.set(o.ui);else{let t={};try{t=JSON.parse(localStorage.getItem("settings")??"{}")}catch(h){}U.set(t)}if(await Ee.set(await Re(localStorage.token,((x=(l=X())==null?void 0:l.features)==null?void 0:x.enable_direct_connections)&&(((v=k())==null?void 0:v.directConnections)??null))),await G.set(b().params.id),r(n,await We(localStorage.token,L()).catch(async t=>(await w("/"),null))),e(n)){r(F,await Oe(localStorage.token,e(n).user_id).catch(h=>null));const t=e(n).chat;return t?(r(q,((t==null?void 0:t.models)??void 0)!==void 0?t.models:[t.models??""]),r(i,((t==null?void 0:t.history)??void 0)!==void 0?t.history:Le(t.messages)),r(d,t.title),r(I,!0),await E(),e(f).length>0&&((u=e(f).at(-1))!=null&&u.id)&&((y=e(f).at(-1))==null?void 0:y.id)in e(i).messages&&he(i,e(i).messages[(p=e(f).at(-1))==null?void 0:p.id].done=!0),await E(),!0):null}},se=async()=>{if(!e(n))return;const o=await Ae(localStorage.token,e(n).id).catch(l=>(ze.error(`${l}`),null));o&&w(`/c/${o.id}`)};T(()=>e(i),()=>{r(f,Ue(e(i),e(i).currentId))}),T(()=>(b(),w),()=>{b().params.id&&(async()=>await ae()?(await E(),r(A,!0)):await w("/"))()}),fe(),Ie();var O=ue();ke("hrl0ku",o=>{ve(l=>{pe.title=`
		${l??""}
	`},[()=>(e(d),S(),$(()=>e(d)?`${e(d).length>30?`${e(d).slice(0,30)}...`:e(d)} â€¢ ${S()}`:`${S()}`))])});var re=ge(O);{var oe=o=>{var l=He(),x=a(l),v=a(x),u=a(v),y=a(u),p=a(y),t=a(p,!0);s(p);var h=j(p,2),R=a(h),le=a(R,!0);s(R),s(h),s(y),s(u);var z=j(u,2),H=a(z),ie=a(H);{let B=xe(()=>$(()=>te.length>0));qe(ie,{className:"h-full flex pt-4 pb-8 ",get user(){return e(F)},get chatId(){return L()},readOnly:!0,get selectedModels(){return e(q)},processing:ee,get bottomPadding(){return e(B)},sendMessage:()=>{},continueResponse:()=>{},regenerateResponse:()=>{},get history(){return e(i)},set history(g){r(i,g)},get messages(){return e(f)},set messages(g){r(f,g)},get autoScroll(){return e(I)},set autoScroll(g){r(I,g)},$$legacy:!0})}s(H),s(z),s(v);var J=j(v,2),P=a(J),M=a(P),ne=a(M,!0);s(M),s(P),s(J),s(x),s(l),ye((B,g)=>{Se(u,1,`pt-5 px-2 w-full ${k(),$(()=>{var Q;return((Q=k())==null?void 0:Q.widescreenMode)??null?"max-w-full":"max-w-5xl"})??""} mx-auto`),C(t,e(d)),C(le,B),C(ne,g)},[()=>($e(N),e(n),$(()=>N(e(n).chat.timestamp).format("LLL"))),()=>(W(),$(()=>W().t("Clone Chat")))]),we("click",M,se),D(o,l)};be(re,o=>{e(A)&&o(oe)})}D(K,O),me(),Y()}export{it as component};
//# sourceMappingURL=45.QaMiilRz.js.map
