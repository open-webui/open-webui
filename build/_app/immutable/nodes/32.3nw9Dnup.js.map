{"version":3,"file":"32.3nw9Dnup.js","sources":["../../../../../../src/lib/components/icons/ArrowUpCircle.svelte","../../../../../../src/lib/components/workspace/Knowledge/KnowledgeBase/Files.svelte","../../../../../../src/lib/components/icons/BarsArrowUp.svelte","../../../../../../src/lib/components/icons/ArrowPath.svelte","../../../../../../src/lib/components/workspace/Knowledge/KnowledgeBase/AddContentMenu.svelte","../../../../../../src/lib/components/workspace/Knowledge/KnowledgeBase/AddTextContentModal.svelte","../../../../../../src/lib/components/workspace/Knowledge/KnowledgeBase.svelte","../../../../../../src/routes/(app)/workspace/knowledge/[id]/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"m15 11.25-3-3m0 0-3 3m3-3v7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport dayjs from '$lib/dayjs';\n\timport duration from 'dayjs/plugin/duration';\n\timport relativeTime from 'dayjs/plugin/relativeTime';\n\n\tdayjs.extend(duration);\n\tdayjs.extend(relativeTime);\n\n\timport { getContext } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport { capitalizeFirstLetter, formatFileSize } from '$lib/utils';\n\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport DocumentPage from '$lib/components/icons/DocumentPage.svelte';\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\n\texport let knowledge = null;\n\texport let selectedFileId = null;\n\texport let files = [];\n\n\texport let onClick = (fileId) => {};\n\texport let onDelete = (fileId) => {};\n</script>\n\n<div class=\" max-h-full flex flex-col w-full gap-[0.5px]\">\n\t{#each files as file (file?.id ?? file?.itemId ?? file?.tempId)}\n\t\t<div\n\t\t\tclass=\" flex cursor-pointer w-full px-1.5 py-0.5 bg-transparent dark:hover:bg-gray-850/50 hover:bg-white rounded-xl transition {selectedFileId\n\t\t\t\t? ''\n\t\t\t\t: 'hover:bg-gray-100 dark:hover:bg-gray-850'}\"\n\t\t>\n\t\t\t<button\n\t\t\t\tclass=\"relative group flex items-center gap-1 rounded-xl p-2 text-left flex-1 justify-between\"\n\t\t\t\ttype=\"button\"\n\t\t\t\ton:click={async () => {\n\t\t\t\t\tconsole.log(file);\n\t\t\t\t\tonClick(file?.id ?? file?.tempId);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div class=\"\">\n\t\t\t\t\t<div class=\"flex gap-2 items-center line-clamp-1\">\n\t\t\t\t\t\t<div class=\"shrink-0\">\n\t\t\t\t\t\t\t{#if file?.status !== 'uploading'}\n\t\t\t\t\t\t\t\t<DocumentPage className=\"size-3.5\" />\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<Spinner className=\"size-3.5\" />\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"line-clamp-1 text-sm\">\n\t\t\t\t\t\t\t{file?.name ?? file?.meta?.name}\n\t\t\t\t\t\t\t{#if file?.meta?.size}\n\t\t\t\t\t\t\t\t<span class=\"text-xs text-gray-500\">{formatFileSize(file?.meta?.size)}</span>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"flex items-center gap-2 shrink-0\">\n\t\t\t\t\t{#if file?.updated_at}\n\t\t\t\t\t\t<Tooltip content={dayjs(file.updated_at * 1000).format('LLLL')}>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{dayjs(file.updated_at * 1000).fromNow()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if file?.user}\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\tcontent={file?.user?.email ?? $i18n.t('Deleted User')}\n\t\t\t\t\t\t\tclassName=\"flex shrink-0\"\n\t\t\t\t\t\t\tplacement=\"top-start\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"shrink-0 text-gray-500\">\n\t\t\t\t\t\t\t\t{$i18n.t('By {{name}}', {\n\t\t\t\t\t\t\t\t\tname: capitalizeFirstLetter(\n\t\t\t\t\t\t\t\t\t\tfile?.user?.name ?? file?.user?.email ?? $i18n.t('Deleted User')\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</button>\n\n\t\t\t{#if knowledge?.write_access}\n\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t<Tooltip content={$i18n.t('Delete')}>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-850 transition\"\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tonDelete(file?.id ?? file?.tempId);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<XMark />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t{/each}\n</div>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport { getContext, createEventDispatcher } from 'svelte';\n\tconst dispatch = createEventDispatcher();\n\n\timport Dropdown from '$lib/components/common/Dropdown.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport ArrowUpCircle from '$lib/components/icons/ArrowUpCircle.svelte';\n\timport BarsArrowUp from '$lib/components/icons/BarsArrowUp.svelte';\n\timport FolderOpen from '$lib/components/icons/FolderOpen.svelte';\n\timport ArrowPath from '$lib/components/icons/ArrowPath.svelte';\n\timport GlobeAlt from '$lib/components/icons/GlobeAlt.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let onClose: Function = () => {};\n\n\texport let onSync: Function = () => {};\n\texport let onUpload: Function = (data) => {};\n\n\tlet show = false;\n</script>\n\n<Dropdown\n\tbind:show\n\ton:change={(e) => {\n\t\tif (e.detail === false) {\n\t\t\tonClose();\n\t\t}\n\t}}\n\talign=\"end\"\n>\n\t<Tooltip content={$i18n.t('Add Content')}>\n\t\t<button\n\t\t\tclass=\" p-1.5 rounded-xl hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition font-medium text-sm flex items-center space-x-1\"\n\t\t\ton:click={(e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tshow = true;\n\t\t\t}}\n\t\t>\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t>\n\t\t\t\t<path\n\t\t\t\t\td=\"M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z\"\n\t\t\t\t/>\n\t\t\t</svg>\n\t\t</button>\n\t</Tooltip>\n\n\t<div slot=\"content\">\n\t\t<DropdownMenu.Content\n\t\t\tclass=\"w-full max-w-[200px] rounded-2xl px-1 py-1  border border-gray-100  dark:border-gray-800 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg transition\"\n\t\t\tsideOffset={4}\n\t\t\tside=\"bottom\"\n\t\t\talign=\"end\"\n\t\t\ttransition={flyAndScale}\n\t\t>\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tonUpload({ type: 'files' });\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<ArrowUpCircle strokeWidth=\"2\" />\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Upload files')}</div>\n\t\t\t</DropdownMenu.Item>\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tonUpload({ type: 'directory' });\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<FolderOpen strokeWidth=\"2\" />\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Upload directory')}</div>\n\t\t\t</DropdownMenu.Item>\n\n\t\t\t<Tooltip\n\t\t\t\tcontent={$i18n.t(\n\t\t\t\t\t'This option will delete all existing files in the collection and replace them with newly uploaded files.'\n\t\t\t\t)}\n\t\t\t\tclassName=\"w-full\"\n\t\t\t>\n\t\t\t\t<DropdownMenu.Item\n\t\t\t\t\tclass=\"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tonSync();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<ArrowPath strokeWidth=\"2\" />\n\t\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Sync directory')}</div>\n\t\t\t\t</DropdownMenu.Item>\n\t\t\t</Tooltip>\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tonUpload({ type: 'web' });\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<GlobeAlt strokeWidth=\"2\" />\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Add webpage')}</div>\n\t\t\t</DropdownMenu.Item>\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tonUpload({ type: 'text' });\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<BarsArrowUp strokeWidth=\"2\" />\n\t\t\t\t<div class=\"flex items-center\">{$i18n.t('Add text content')}</div>\n\t\t\t</DropdownMenu.Item>\n\t\t</DropdownMenu.Content>\n\t</div>\n</Dropdown>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport dayjs from 'dayjs';\n\n\timport { onMount, getContext, createEventDispatcher } from 'svelte';\n\tconst i18n = getContext('i18n');\n\tconst dispatch = createEventDispatcher();\n\n\timport Modal from '$lib/components/common/Modal.svelte';\n\timport RichTextInput from '$lib/components/common/RichTextInput.svelte';\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\timport MicSolid from '$lib/components/icons/MicSolid.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport VoiceRecording from '$lib/components/chat/MessageInput/VoiceRecording.svelte';\n\texport let show = false;\n\n\tlet name = $i18n.t('Untitled');\n\tlet content = '';\n\n\tlet voiceInput = false;\n</script>\n\n<Modal size=\"full\" containerClassName=\"\" className=\"h-full bg-white dark:bg-gray-900\" bind:show>\n\t<div class=\"absolute top-0 right-0 p-5\">\n\t\t<button\n\t\t\tclass=\"self-center dark:text-white\"\n\t\t\ttype=\"button\"\n\t\t\ton:click={() => {\n\t\t\t\tshow = false;\n\t\t\t}}\n\t\t>\n\t\t\t<XMark className=\"size-3.5\" />\n\t\t</button>\n\t</div>\n\t<div class=\"flex flex-col md:flex-row w-full h-full md:space-x-4 dark:text-gray-200\">\n\t\t<form\n\t\t\tclass=\"flex flex-col w-full h-full\"\n\t\t\ton:submit|preventDefault={() => {\n\t\t\t\tif (name.trim() === '' || content.trim() === '') {\n\t\t\t\t\ttoast.error($i18n.t('Please fill in all fields.'));\n\t\t\t\t\tname = name.trim();\n\t\t\t\t\tcontent = content.trim();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tdispatch('submit', {\n\t\t\t\t\tname,\n\t\t\t\t\tcontent\n\t\t\t\t});\n\t\t\t\tshow = false;\n\t\t\t\tname = '';\n\t\t\t\tcontent = '';\n\t\t\t}}\n\t\t>\n\t\t\t<div class=\" flex-1 w-full h-full flex justify-center overflow-auto px-5 py-4\">\n\t\t\t\t<div class=\" max-w-3xl py-2 md:py-10 w-full flex flex-col gap-2\">\n\t\t\t\t\t<div class=\"shrink-0 w-full flex justify-between items-center\">\n\t\t\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclass=\"w-full text-3xl font-medium bg-transparent outline-hidden\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tbind:value={name}\n\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Title')}\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\" flex-1 w-full h-full\">\n\t\t\t\t\t\t<RichTextInput\n\t\t\t\t\t\t\tbind:value={content}\n\t\t\t\t\t\t\tplaceholder={$i18n.t('Write something...')}\n\t\t\t\t\t\t\tpreserveBreaks={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tclass=\"flex flex-row items-center justify-end text-sm font-medium shrink-0 mt-1 p-4 gap-1.5\"\n\t\t\t>\n\t\t\t\t<div class=\"\">\n\t\t\t\t\t{#if voiceInput}\n\t\t\t\t\t\t<div class=\" max-w-full w-full\">\n\t\t\t\t\t\t\t<VoiceRecording\n\t\t\t\t\t\t\t\tbind:recording={voiceInput}\n\t\t\t\t\t\t\t\tclassName=\"p-1\"\n\t\t\t\t\t\t\t\tonCancel={() => {\n\t\t\t\t\t\t\t\t\tvoiceInput = false;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonConfirm={(data) => {\n\t\t\t\t\t\t\t\t\tconst { text, filename } = data;\n\t\t\t\t\t\t\t\t\tcontent = `${content}${text} `;\n\n\t\t\t\t\t\t\t\t\tvoiceInput = false;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Voice Input')}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\" p-2 bg-gray-50 text-gray-700 dark:bg-gray-700 dark:text-white transition rounded-full\"\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tlet stream = await navigator.mediaDevices\n\t\t\t\t\t\t\t\t\t\t\t.getUserMedia({ audio: true })\n\t\t\t\t\t\t\t\t\t\t\t.catch(function (err) {\n\t\t\t\t\t\t\t\t\t\t\t\ttoast.error(\n\t\t\t\t\t\t\t\t\t\t\t\t\t$i18n.t(`Permission denied when accessing microphone: {{error}}`, {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\terror: err\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\tif (stream) {\n\t\t\t\t\t\t\t\t\t\t\tvoiceInput = true;\n\t\t\t\t\t\t\t\t\t\t\tconst tracks = stream.getTracks();\n\t\t\t\t\t\t\t\t\t\t\ttracks.forEach((track) => track.stop());\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tstream = null;\n\t\t\t\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\t\t\t\ttoast.error($i18n.t('Permission denied when accessing microphone'));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MicSolid className=\"size-5\" />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\" shrink-0\">\n\t\t\t\t\t<Tooltip content={$i18n.t('Save')}>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\" px-3.5 py-2 bg-black text-white dark:bg-white dark:text-black transition rounded-full\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{$i18n.t('Save')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</form>\n\t</div>\n</Modal>\n\n<style>\n\tinput::-webkit-outer-spin-button,\n\tinput::-webkit-inner-spin-button {\n\t\t/* display: none; <- Crashes Chrome on hover */\n\t\t-webkit-appearance: none;\n\t\tmargin: 0; /* <-- Apparently some margin are still there even though it's hidden */\n\t}\n\n\t.tabs::-webkit-scrollbar {\n\t\tdisplay: none; /* for Chrome, Safari and Opera */\n\t}\n\n\t.tabs {\n\t\t-ms-overflow-style: none; /* IE and Edge */\n\t\tscrollbar-width: none; /* Firefox */\n\t}\n\n\tinput[type='number'] {\n\t\t-moz-appearance: textfield; /* Firefox */\n\t}\n</style>\n","<script lang=\"ts\">\n\timport Fuse from 'fuse.js';\n\timport { toast } from 'svelte-sonner';\n\timport { v4 as uuidv4 } from 'uuid';\n\timport { PaneGroup, Pane, PaneResizer } from 'paneforge';\n\n\timport { onMount, getContext, onDestroy, tick } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport { goto } from '$app/navigation';\n\timport { page } from '$app/stores';\n\timport {\n\t\tmobile,\n\t\tshowSidebar,\n\t\tknowledge as _knowledge,\n\t\tconfig,\n\t\tuser,\n\t\tsettings\n\t} from '$lib/stores';\n\n\timport {\n\t\tupdateFileDataContentById,\n\t\tuploadFile,\n\t\tdeleteFileById,\n\t\tgetFileById\n\t} from '$lib/apis/files';\n\timport {\n\t\taddFileToKnowledgeById,\n\t\tgetKnowledgeById,\n\t\tremoveFileFromKnowledgeById,\n\t\tresetKnowledgeById,\n\t\tupdateFileFromKnowledgeById,\n\t\tupdateKnowledgeById,\n\t\tsearchKnowledgeFilesById\n\t} from '$lib/apis/knowledge';\n\timport { processWeb, processYoutubeVideo } from '$lib/apis/retrieval';\n\n\timport { blobToFile, isYoutubeUrl } from '$lib/utils';\n\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport Files from './KnowledgeBase/Files.svelte';\n\timport AddFilesPlaceholder from '$lib/components/AddFilesPlaceholder.svelte';\n\n\timport AddContentMenu from './KnowledgeBase/AddContentMenu.svelte';\n\timport AddTextContentModal from './KnowledgeBase/AddTextContentModal.svelte';\n\n\timport SyncConfirmDialog from '../../common/ConfirmDialog.svelte';\n\timport Drawer from '$lib/components/common/Drawer.svelte';\n\timport ChevronLeft from '$lib/components/icons/ChevronLeft.svelte';\n\timport LockClosed from '$lib/components/icons/LockClosed.svelte';\n\timport AccessControlModal from '../common/AccessControlModal.svelte';\n\timport Search from '$lib/components/icons/Search.svelte';\n\timport FilesOverlay from '$lib/components/chat/MessageInput/FilesOverlay.svelte';\n\timport DropdownOptions from '$lib/components/common/DropdownOptions.svelte';\n\timport Pagination from '$lib/components/common/Pagination.svelte';\n\timport AttachWebpageModal from '$lib/components/chat/MessageInput/AttachWebpageModal.svelte';\n\n\tlet largeScreen = true;\n\n\tlet pane;\n\tlet showSidepanel = true;\n\n\tlet showAddWebpageModal = false;\n\tlet showAddTextContentModal = false;\n\n\tlet showSyncConfirmModal = false;\n\tlet showAccessControlModal = false;\n\n\tlet minSize = 0;\n\ttype Knowledge = {\n\t\tid: string;\n\t\tname: string;\n\t\tdescription: string;\n\t\tdata: {\n\t\t\tfile_ids: string[];\n\t\t};\n\t\tfiles: any[];\n\t};\n\n\tlet id = null;\n\tlet knowledge: Knowledge | null = null;\n\tlet knowledgeId = null;\n\n\tlet selectedFileId = null;\n\tlet selectedFile = null;\n\tlet selectedFileContent = '';\n\n\tlet inputFiles = null;\n\n\tlet query = '';\n\tlet viewOption = null;\n\tlet sortKey = null;\n\tlet direction = null;\n\n\tlet currentPage = 1;\n\tlet fileItems = null;\n\tlet fileItemsTotal = null;\n\n\tconst reset = () => {\n\t\tcurrentPage = 1;\n\t};\n\n\tconst init = async () => {\n\t\treset();\n\t\tawait getItemsPage();\n\t};\n\n\t$: if (\n\t\tknowledgeId !== null &&\n\t\tquery !== undefined &&\n\t\tviewOption !== undefined &&\n\t\tsortKey !== undefined &&\n\t\tdirection !== undefined &&\n\t\tcurrentPage !== undefined\n\t) {\n\t\tgetItemsPage();\n\t}\n\n\t$: if (\n\t\tquery !== undefined &&\n\t\tviewOption !== undefined &&\n\t\tsortKey !== undefined &&\n\t\tdirection !== undefined\n\t) {\n\t\treset();\n\t}\n\n\tconst getItemsPage = async () => {\n\t\tif (knowledgeId === null) return;\n\n\t\tfileItems = null;\n\t\tfileItemsTotal = null;\n\n\t\tif (sortKey === null) {\n\t\t\tdirection = null;\n\t\t}\n\n\t\tconst res = await searchKnowledgeFilesById(\n\t\t\tlocalStorage.token,\n\t\t\tknowledge.id,\n\t\t\tquery,\n\t\t\tviewOption,\n\t\t\tsortKey,\n\t\t\tdirection,\n\t\t\tcurrentPage\n\t\t).catch(() => {\n\t\t\treturn null;\n\t\t});\n\n\t\tif (res) {\n\t\t\tfileItems = res.items;\n\t\t\tfileItemsTotal = res.total;\n\t\t}\n\t\treturn res;\n\t};\n\n\tconst fileSelectHandler = async (file) => {\n\t\ttry {\n\t\t\tselectedFile = file;\n\t\t\tselectedFileContent = selectedFile?.data?.content || '';\n\t\t} catch (e) {\n\t\t\ttoast.error($i18n.t('Failed to load file content.'));\n\t\t}\n\t};\n\n\tconst createFileFromText = (name, content) => {\n\t\tconst blob = new Blob([content], { type: 'text/plain' });\n\t\tconst file = blobToFile(blob, `${name}.txt`);\n\n\t\tconsole.log(file);\n\t\treturn file;\n\t};\n\n\tconst uploadWeb = async (urls) => {\n\t\tif (!Array.isArray(urls)) {\n\t\t\turls = [urls];\n\t\t}\n\n\t\tconst newFileItems = urls.map((url) => ({\n\t\t\ttype: 'file',\n\t\t\tfile: '',\n\t\t\tid: null,\n\t\t\turl: url,\n\t\t\tname: url,\n\t\t\tsize: null,\n\t\t\tstatus: 'uploading',\n\t\t\terror: '',\n\t\t\titemId: uuidv4()\n\t\t}));\n\n\t\t// Display all items at once\n\t\tfileItems = [...newFileItems, ...(fileItems ?? [])];\n\n\t\tfor (const fileItem of newFileItems) {\n\t\t\ttry {\n\t\t\t\tconsole.log(fileItem);\n\t\t\t\tconst res = await processWeb(localStorage.token, '', fileItem.url, false).catch((e) => {\n\t\t\t\t\tconsole.error('Error processing web URL:', e);\n\t\t\t\t\treturn null;\n\t\t\t\t});\n\n\t\t\t\tif (res) {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\tconst file = createFileFromText(\n\t\t\t\t\t\t// Use URL as filename, sanitized\n\t\t\t\t\t\tfileItem.url\n\t\t\t\t\t\t\t.replace(/[^a-z0-9]/gi, '_')\n\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t.slice(0, 50),\n\t\t\t\t\t\tres.content\n\t\t\t\t\t);\n\n\t\t\t\t\tconst uploadedFile = await uploadFile(localStorage.token, file).catch((e) => {\n\t\t\t\t\t\ttoast.error(`${e}`);\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t});\n\n\t\t\t\t\tif (uploadedFile) {\n\t\t\t\t\t\tconsole.log(uploadedFile);\n\t\t\t\t\t\tfileItems = fileItems.map((item) => {\n\t\t\t\t\t\t\tif (item.itemId === fileItem.itemId) {\n\t\t\t\t\t\t\t\titem.id = uploadedFile.id;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn item;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (uploadedFile.error) {\n\t\t\t\t\t\t\tconsole.warn('File upload warning:', uploadedFile.error);\n\t\t\t\t\t\t\ttoast.warning(uploadedFile.error);\n\t\t\t\t\t\t\tfileItems = fileItems.filter((file) => file.id !== uploadedFile.id);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tawait addFileHandler(uploadedFile.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoast.error($i18n.t('Failed to upload file.'));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// remove the item from fileItems\n\t\t\t\t\tfileItems = fileItems.filter((item) => item.itemId !== fileItem.itemId);\n\t\t\t\t\ttoast.error($i18n.t('Failed to process URL: {{url}}', { url: fileItem.url }));\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t// remove the item from fileItems\n\t\t\t\tfileItems = fileItems.filter((item) => item.itemId !== fileItem.itemId);\n\t\t\t\ttoast.error(`${e}`);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst uploadFileHandler = async (file) => {\n\t\tconsole.log(file);\n\n\t\tconst fileItem = {\n\t\t\ttype: 'file',\n\t\t\tfile: '',\n\t\t\tid: null,\n\t\t\turl: '',\n\t\t\tname: file.name,\n\t\t\tsize: file.size,\n\t\t\tstatus: 'uploading',\n\t\t\terror: '',\n\t\t\titemId: uuidv4()\n\t\t};\n\n\t\tif (fileItem.size == 0) {\n\t\t\ttoast.error($i18n.t('You cannot upload an empty file.'));\n\t\t\treturn null;\n\t\t}\n\n\t\tif (\n\t\t\t($config?.file?.max_size ?? null) !== null &&\n\t\t\tfile.size > ($config?.file?.max_size ?? 0) * 1024 * 1024\n\t\t) {\n\t\t\tconsole.log('File exceeds max size limit:', {\n\t\t\t\tfileSize: file.size,\n\t\t\t\tmaxSize: ($config?.file?.max_size ?? 0) * 1024 * 1024\n\t\t\t});\n\t\t\ttoast.error(\n\t\t\t\t$i18n.t(`File size should not exceed {{maxSize}} MB.`, {\n\t\t\t\t\tmaxSize: $config?.file?.max_size\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tfileItems = [fileItem, ...(fileItems ?? [])];\n\t\ttry {\n\t\t\tlet metadata = {\n\t\t\t\tknowledge_id: knowledge.id,\n\t\t\t\t// If the file is an audio file, provide the language for STT.\n\t\t\t\t...((file.type.startsWith('audio/') || file.type.startsWith('video/')) &&\n\t\t\t\t$settings?.audio?.stt?.language\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tlanguage: $settings?.audio?.stt?.language\n\t\t\t\t\t\t}\n\t\t\t\t\t: {})\n\t\t\t};\n\n\t\t\tconst uploadedFile = await uploadFile(localStorage.token, file, metadata).catch((e) => {\n\t\t\t\ttoast.error(`${e}`);\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\t\tif (uploadedFile) {\n\t\t\t\tconsole.log(uploadedFile);\n\t\t\t\tfileItems = fileItems.map((item) => {\n\t\t\t\t\tif (item.itemId === fileItem.itemId) {\n\t\t\t\t\t\titem.id = uploadedFile.id;\n\t\t\t\t\t}\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\n\t\t\t\tif (uploadedFile.error) {\n\t\t\t\t\tconsole.warn('File upload warning:', uploadedFile.error);\n\t\t\t\t\ttoast.warning(uploadedFile.error);\n\t\t\t\t\tfileItems = fileItems.filter((file) => file.id !== uploadedFile.id);\n\t\t\t\t} else {\n\t\t\t\t\tawait addFileHandler(uploadedFile.id);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttoast.error($i18n.t('Failed to upload file.'));\n\t\t\t}\n\t\t} catch (e) {\n\t\t\ttoast.error(`${e}`);\n\t\t}\n\t};\n\n\tconst uploadDirectoryHandler = async () => {\n\t\t// Check if File System Access API is supported\n\t\tconst isFileSystemAccessSupported = 'showDirectoryPicker' in window;\n\n\t\ttry {\n\t\t\tif (isFileSystemAccessSupported) {\n\t\t\t\t// Modern browsers (Chrome, Edge) implementation\n\t\t\t\tawait handleModernBrowserUpload();\n\t\t\t} else {\n\t\t\t\t// Firefox fallback\n\t\t\t\tawait handleFirefoxUpload();\n\t\t\t}\n\t\t} catch (error) {\n\t\t\thandleUploadError(error);\n\t\t}\n\t};\n\n\t// Helper function to check if a path contains hidden folders\n\tconst hasHiddenFolder = (path) => {\n\t\treturn path.split('/').some((part) => part.startsWith('.'));\n\t};\n\n\t// Modern browsers implementation using File System Access API\n\tconst handleModernBrowserUpload = async () => {\n\t\tconst dirHandle = await window.showDirectoryPicker();\n\t\tlet totalFiles = 0;\n\t\tlet uploadedFiles = 0;\n\n\t\t// Function to update the UI with the progress\n\t\tconst updateProgress = () => {\n\t\t\tconst percentage = (uploadedFiles / totalFiles) * 100;\n\t\t\ttoast.info(\n\t\t\t\t$i18n.t('Upload Progress: {{uploadedFiles}}/{{totalFiles}} ({{percentage}}%)', {\n\t\t\t\t\tuploadedFiles: uploadedFiles,\n\t\t\t\t\ttotalFiles: totalFiles,\n\t\t\t\t\tpercentage: percentage.toFixed(2)\n\t\t\t\t})\n\t\t\t);\n\t\t};\n\n\t\t// Recursive function to count all files excluding hidden ones\n\t\tasync function countFiles(dirHandle) {\n\t\t\tfor await (const entry of dirHandle.values()) {\n\t\t\t\t// Skip hidden files and directories\n\t\t\t\tif (entry.name.startsWith('.')) continue;\n\n\t\t\t\tif (entry.kind === 'file') {\n\t\t\t\t\ttotalFiles++;\n\t\t\t\t} else if (entry.kind === 'directory') {\n\t\t\t\t\t// Only process non-hidden directories\n\t\t\t\t\tif (!entry.name.startsWith('.')) {\n\t\t\t\t\t\tawait countFiles(entry);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Recursive function to process directories excluding hidden files and folders\n\t\tasync function processDirectory(dirHandle, path = '') {\n\t\t\tfor await (const entry of dirHandle.values()) {\n\t\t\t\t// Skip hidden files and directories\n\t\t\t\tif (entry.name.startsWith('.')) continue;\n\n\t\t\t\tconst entryPath = path ? `${path}/${entry.name}` : entry.name;\n\n\t\t\t\t// Skip if the path contains any hidden folders\n\t\t\t\tif (hasHiddenFolder(entryPath)) continue;\n\n\t\t\t\tif (entry.kind === 'file') {\n\t\t\t\t\tconst file = await entry.getFile();\n\t\t\t\t\tconst fileWithPath = new File([file], entryPath, { type: file.type });\n\n\t\t\t\t\tawait uploadFileHandler(fileWithPath);\n\t\t\t\t\tuploadedFiles++;\n\t\t\t\t\tupdateProgress();\n\t\t\t\t} else if (entry.kind === 'directory') {\n\t\t\t\t\t// Only process non-hidden directories\n\t\t\t\t\tif (!entry.name.startsWith('.')) {\n\t\t\t\t\t\tawait processDirectory(entry, entryPath);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tawait countFiles(dirHandle);\n\t\tupdateProgress();\n\n\t\tif (totalFiles > 0) {\n\t\t\tawait processDirectory(dirHandle);\n\t\t} else {\n\t\t\tconsole.log('No files to upload.');\n\t\t}\n\t};\n\n\t// Firefox fallback implementation using traditional file input\n\tconst handleFirefoxUpload = async () => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t// Create hidden file input\n\t\t\tconst input = document.createElement('input');\n\t\t\tinput.type = 'file';\n\t\t\tinput.webkitdirectory = true;\n\t\t\tinput.directory = true;\n\t\t\tinput.multiple = true;\n\t\t\tinput.style.display = 'none';\n\n\t\t\t// Add input to DOM temporarily\n\t\t\tdocument.body.appendChild(input);\n\n\t\t\tinput.onchange = async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst files = Array.from(input.files)\n\t\t\t\t\t\t// Filter out files from hidden folders\n\t\t\t\t\t\t.filter((file) => !hasHiddenFolder(file.webkitRelativePath));\n\n\t\t\t\t\tlet totalFiles = files.length;\n\t\t\t\t\tlet uploadedFiles = 0;\n\n\t\t\t\t\t// Function to update the UI with the progress\n\t\t\t\t\tconst updateProgress = () => {\n\t\t\t\t\t\tconst percentage = (uploadedFiles / totalFiles) * 100;\n\t\t\t\t\t\ttoast.info(\n\t\t\t\t\t\t\t$i18n.t('Upload Progress: {{uploadedFiles}}/{{totalFiles}} ({{percentage}}%)', {\n\t\t\t\t\t\t\t\tuploadedFiles: uploadedFiles,\n\t\t\t\t\t\t\t\ttotalFiles: totalFiles,\n\t\t\t\t\t\t\t\tpercentage: percentage.toFixed(2)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t};\n\n\t\t\t\t\tupdateProgress();\n\n\t\t\t\t\t// Process all files\n\t\t\t\t\tfor (const file of files) {\n\t\t\t\t\t\t// Skip hidden files (additional check)\n\t\t\t\t\t\tif (!file.name.startsWith('.')) {\n\t\t\t\t\t\t\tconst relativePath = file.webkitRelativePath || file.name;\n\t\t\t\t\t\t\tconst fileWithPath = new File([file], relativePath, { type: file.type });\n\n\t\t\t\t\t\t\tawait uploadFileHandler(fileWithPath);\n\t\t\t\t\t\t\tuploadedFiles++;\n\t\t\t\t\t\t\tupdateProgress();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Clean up\n\t\t\t\t\tdocument.body.removeChild(input);\n\t\t\t\t\tresolve();\n\t\t\t\t} catch (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tinput.onerror = (error) => {\n\t\t\t\tdocument.body.removeChild(input);\n\t\t\t\treject(error);\n\t\t\t};\n\n\t\t\t// Trigger file picker\n\t\t\tinput.click();\n\t\t});\n\t};\n\n\t// Error handler\n\tconst handleUploadError = (error) => {\n\t\tif (error.name === 'AbortError') {\n\t\t\ttoast.info($i18n.t('Directory selection was cancelled'));\n\t\t} else {\n\t\t\ttoast.error($i18n.t('Error accessing directory'));\n\t\t\tconsole.error('Directory access error:', error);\n\t\t}\n\t};\n\n\t// Helper function to maintain file paths within zip\n\tconst syncDirectoryHandler = async () => {\n\t\tif (fileItems.length > 0) {\n\t\t\tconst res = await resetKnowledgeById(localStorage.token, id).catch((e) => {\n\t\t\t\ttoast.error(`${e}`);\n\t\t\t});\n\n\t\t\tif (res) {\n\t\t\t\tfileItems = [];\n\t\t\t\ttoast.success($i18n.t('Knowledge reset successfully.'));\n\n\t\t\t\t// Upload directory\n\t\t\t\tuploadDirectoryHandler();\n\t\t\t}\n\t\t} else {\n\t\t\tuploadDirectoryHandler();\n\t\t}\n\t};\n\n\tconst addFileHandler = async (fileId) => {\n\t\tconst res = await addFileToKnowledgeById(localStorage.token, id, fileId).catch((e) => {\n\t\t\ttoast.error(`${e}`);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (res) {\n\t\t\ttoast.success($i18n.t('File added successfully.'));\n\t\t\tinit();\n\t\t} else {\n\t\t\ttoast.error($i18n.t('Failed to add file.'));\n\t\t\tfileItems = fileItems.filter((file) => file.id !== fileId);\n\t\t}\n\t};\n\n\tconst deleteFileHandler = async (fileId) => {\n\t\ttry {\n\t\t\tconsole.log('Starting file deletion process for:', fileId);\n\n\t\t\t// Remove from knowledge base only\n\t\t\tconst res = await removeFileFromKnowledgeById(localStorage.token, id, fileId);\n\t\t\tconsole.log('Knowledge base updated:', res);\n\n\t\t\tif (res) {\n\t\t\t\ttoast.success($i18n.t('File removed successfully.'));\n\t\t\t\tawait init();\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error('Error in deleteFileHandler:', e);\n\t\t\ttoast.error(`${e}`);\n\t\t}\n\t};\n\n\tlet debounceTimeout = null;\n\tlet mediaQuery;\n\n\tlet dragged = false;\n\tlet isSaving = false;\n\n\tconst updateFileContentHandler = async () => {\n\t\tif (isSaving) {\n\t\t\tconsole.log('Save operation already in progress, skipping...');\n\t\t\treturn;\n\t\t}\n\n\t\tisSaving = true;\n\n\t\ttry {\n\t\t\tconst res = await updateFileDataContentById(\n\t\t\t\tlocalStorage.token,\n\t\t\t\tselectedFile.id,\n\t\t\t\tselectedFileContent\n\t\t\t).catch((e) => {\n\t\t\t\ttoast.error(`${e}`);\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\t\tif (res) {\n\t\t\t\ttoast.success($i18n.t('File content updated successfully.'));\n\n\t\t\t\tselectedFileId = null;\n\t\t\t\tselectedFile = null;\n\t\t\t\tselectedFileContent = '';\n\n\t\t\t\tawait init();\n\t\t\t}\n\t\t} finally {\n\t\t\tisSaving = false;\n\t\t}\n\t};\n\n\tconst changeDebounceHandler = () => {\n\t\tconsole.log('debounce');\n\t\tif (debounceTimeout) {\n\t\t\tclearTimeout(debounceTimeout);\n\t\t}\n\n\t\tdebounceTimeout = setTimeout(async () => {\n\t\t\tif (knowledge.name.trim() === '' || knowledge.description.trim() === '') {\n\t\t\t\ttoast.error($i18n.t('Please fill in all fields.'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst res = await updateKnowledgeById(localStorage.token, id, {\n\t\t\t\t...knowledge,\n\t\t\t\tname: knowledge.name,\n\t\t\t\tdescription: knowledge.description,\n\t\t\t\taccess_control: knowledge.access_control\n\t\t\t}).catch((e) => {\n\t\t\t\ttoast.error(`${e}`);\n\t\t\t});\n\n\t\t\tif (res) {\n\t\t\t\ttoast.success($i18n.t('Knowledge updated successfully'));\n\t\t\t}\n\t\t}, 1000);\n\t};\n\n\tconst handleMediaQuery = async (e) => {\n\t\tif (e.matches) {\n\t\t\tlargeScreen = true;\n\t\t} else {\n\t\t\tlargeScreen = false;\n\t\t}\n\t};\n\n\tconst onDragOver = (e) => {\n\t\te.preventDefault();\n\n\t\t// Check if a file is being draggedOver.\n\t\tif (e.dataTransfer?.types?.includes('Files')) {\n\t\t\tdragged = true;\n\t\t} else {\n\t\t\tdragged = false;\n\t\t}\n\t};\n\n\tconst onDragLeave = () => {\n\t\tdragged = false;\n\t};\n\n\tconst onDrop = async (e) => {\n\t\te.preventDefault();\n\t\tdragged = false;\n\n\t\tif (!knowledge?.write_access) {\n\t\t\ttoast.error($i18n.t('You do not have permission to upload files to this knowledge base.'));\n\t\t\treturn;\n\t\t}\n\n\t\tconst handleUploadingFileFolder = (items) => {\n\t\t\tfor (const item of items) {\n\t\t\t\tif (item.isFile) {\n\t\t\t\t\titem.file((file) => {\n\t\t\t\t\t\tuploadFileHandler(file);\n\t\t\t\t\t});\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Not sure why you have to call webkitGetAsEntry and isDirectory seperate, but it won't work if you try item.webkitGetAsEntry().isDirectory\n\t\t\t\tconst wkentry = item.webkitGetAsEntry();\n\t\t\t\tconst isDirectory = wkentry.isDirectory;\n\t\t\t\tif (isDirectory) {\n\t\t\t\t\t// Read the directory\n\t\t\t\t\twkentry.createReader().readEntries(\n\t\t\t\t\t\t(entries) => {\n\t\t\t\t\t\t\thandleUploadingFileFolder(entries);\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\tconsole.error('Error reading directory entries:', error);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\ttoast.info($i18n.t('Uploading file...'));\n\t\t\t\t\tuploadFileHandler(item.getAsFile());\n\t\t\t\t\ttoast.success($i18n.t('File uploaded!'));\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tif (e.dataTransfer?.types?.includes('Files')) {\n\t\t\tif (e.dataTransfer?.files) {\n\t\t\t\tconst inputItems = e.dataTransfer?.items;\n\n\t\t\t\tif (inputItems && inputItems.length > 0) {\n\t\t\t\t\thandleUploadingFileFolder(inputItems);\n\t\t\t\t} else {\n\t\t\t\t\ttoast.error($i18n.t(`File not found.`));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tonMount(async () => {\n\t\t// listen to resize 1024px\n\t\tmediaQuery = window.matchMedia('(min-width: 1024px)');\n\n\t\tmediaQuery.addEventListener('change', handleMediaQuery);\n\t\thandleMediaQuery(mediaQuery);\n\n\t\t// Select the container element you want to observe\n\t\tconst container = document.getElementById('collection-container');\n\n\t\t// initialize the minSize based on the container width\n\t\tminSize = !largeScreen ? 100 : Math.floor((300 / container.clientWidth) * 100);\n\n\t\t// Create a new ResizeObserver instance\n\t\tconst resizeObserver = new ResizeObserver((entries) => {\n\t\t\tfor (let entry of entries) {\n\t\t\t\tconst width = entry.contentRect.width;\n\t\t\t\t// calculate the percentage of 300\n\t\t\t\tconst percentage = (300 / width) * 100;\n\t\t\t\t// set the minSize to the percentage, must be an integer\n\t\t\t\tminSize = !largeScreen ? 100 : Math.floor(percentage);\n\n\t\t\t\tif (showSidepanel) {\n\t\t\t\t\tif (pane && pane.isExpanded() && pane.getSize() < minSize) {\n\t\t\t\t\t\tpane.resize(minSize);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Start observing the container's size changes\n\t\tresizeObserver.observe(container);\n\n\t\tif (pane) {\n\t\t\tpane.expand();\n\t\t}\n\n\t\tid = $page.params.id;\n\t\tconst res = await getKnowledgeById(localStorage.token, id).catch((e) => {\n\t\t\ttoast.error(`${e}`);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (res) {\n\t\t\tknowledge = res;\n\t\t\tknowledgeId = knowledge?.id;\n\t\t} else {\n\t\t\tgoto('/workspace/knowledge');\n\t\t}\n\n\t\tconst dropZone = document.querySelector('body');\n\t\tdropZone?.addEventListener('dragover', onDragOver);\n\t\tdropZone?.addEventListener('drop', onDrop);\n\t\tdropZone?.addEventListener('dragleave', onDragLeave);\n\t});\n\n\tonDestroy(() => {\n\t\tmediaQuery?.removeEventListener('change', handleMediaQuery);\n\t\tconst dropZone = document.querySelector('body');\n\t\tdropZone?.removeEventListener('dragover', onDragOver);\n\t\tdropZone?.removeEventListener('drop', onDrop);\n\t\tdropZone?.removeEventListener('dragleave', onDragLeave);\n\t});\n\n\tconst decodeString = (str: string) => {\n\t\ttry {\n\t\t\treturn decodeURIComponent(str);\n\t\t} catch (e) {\n\t\t\treturn str;\n\t\t}\n\t};\n</script>\n\n<FilesOverlay show={dragged} />\n<SyncConfirmDialog\n\tbind:show={showSyncConfirmModal}\n\tmessage={$i18n.t(\n\t\t'This will reset the knowledge base and sync all files. Do you wish to continue?'\n\t)}\n\ton:confirm={() => {\n\t\tsyncDirectoryHandler();\n\t}}\n/>\n\n<AttachWebpageModal\n\tbind:show={showAddWebpageModal}\n\tonSubmit={async (e) => {\n\t\tuploadWeb(e.data);\n\t}}\n/>\n\n<AddTextContentModal\n\tbind:show={showAddTextContentModal}\n\ton:submit={(e) => {\n\t\tconst file = createFileFromText(e.detail.name, e.detail.content);\n\t\tuploadFileHandler(file);\n\t}}\n/>\n\n<input\n\tid=\"files-input\"\n\tbind:files={inputFiles}\n\ttype=\"file\"\n\tmultiple\n\thidden\n\ton:change={async () => {\n\t\tif (inputFiles && inputFiles.length > 0) {\n\t\t\tfor (const file of inputFiles) {\n\t\t\t\tawait uploadFileHandler(file);\n\t\t\t}\n\n\t\t\tinputFiles = null;\n\t\t\tconst fileInputElement = document.getElementById('files-input');\n\n\t\t\tif (fileInputElement) {\n\t\t\t\tfileInputElement.value = '';\n\t\t\t}\n\t\t} else {\n\t\t\ttoast.error($i18n.t(`File not found.`));\n\t\t}\n\t}}\n/>\n\n<div class=\"flex flex-col w-full h-full min-h-full\" id=\"collection-container\">\n\t{#if id && knowledge}\n\t\t<AccessControlModal\n\t\t\tbind:show={showAccessControlModal}\n\t\t\tbind:accessControl={knowledge.access_control}\n\t\t\tshare={$user?.permissions?.sharing?.knowledge || $user?.role === 'admin'}\n\t\t\tsharePublic={$user?.permissions?.sharing?.public_knowledge || $user?.role === 'admin'}\n\t\t\tonChange={() => {\n\t\t\t\tchangeDebounceHandler();\n\t\t\t}}\n\t\t\taccessRoles={['read', 'write']}\n\t\t/>\n\t\t<div class=\"w-full px-2\">\n\t\t\t<div class=\" flex w-full\">\n\t\t\t\t<div class=\"flex-1\">\n\t\t\t\t\t<div class=\"flex items-center justify-between w-full\">\n\t\t\t\t\t\t<div class=\"w-full flex justify-between items-center\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclass=\"text-left w-full font-medium text-lg font-primary bg-transparent outline-hidden flex-1\"\n\t\t\t\t\t\t\t\tbind:value={knowledge.name}\n\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Knowledge Name')}\n\t\t\t\t\t\t\t\tdisabled={!knowledge?.write_access}\n\t\t\t\t\t\t\t\ton:input={() => {\n\t\t\t\t\t\t\t\t\tchangeDebounceHandler();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<div class=\"shrink-0 mr-2.5\">\n\t\t\t\t\t\t\t\t{#if fileItemsTotal}\n\t\t\t\t\t\t\t\t\t<div class=\"text-xs text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t<!-- {$i18n.t('{{COUNT}} files')} -->\n\t\t\t\t\t\t\t\t\t\t{$i18n.t('{{COUNT}} files', {\n\t\t\t\t\t\t\t\t\t\t\tCOUNT: fileItemsTotal\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{#if knowledge?.write_access}\n\t\t\t\t\t\t\t<div class=\"self-center shrink-0\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"bg-gray-50 hover:bg-gray-100 text-black dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white transition px-2 py-1 rounded-full flex gap-1 items-center\"\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tshowAccessControlModal = true;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<LockClosed strokeWidth=\"2.5\" className=\"size-3.5\" />\n\n\t\t\t\t\t\t\t\t\t<div class=\"text-sm font-medium shrink-0\">\n\t\t\t\t\t\t\t\t\t\t{$i18n.t('Access')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<div class=\"text-xs shrink-0 text-gray-500\">\n\t\t\t\t\t\t\t\t{$i18n.t('Read Only')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"flex w-full\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclass=\"text-left text-xs w-full text-gray-500 bg-transparent outline-hidden\"\n\t\t\t\t\t\t\tbind:value={knowledge.description}\n\t\t\t\t\t\t\tplaceholder={$i18n.t('Knowledge Description')}\n\t\t\t\t\t\t\tdisabled={!knowledge?.write_access}\n\t\t\t\t\t\t\ton:input={() => {\n\t\t\t\t\t\t\t\tchangeDebounceHandler();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div\n\t\t\tclass=\"mt-2 mb-2.5 py-2 -mx-0 bg-white dark:bg-gray-900 rounded-3xl border border-gray-100/30 dark:border-gray-850/30 flex-1\"\n\t\t>\n\t\t\t<div class=\"px-3.5 flex flex-1 items-center w-full space-x-2 py-0.5 pb-2\">\n\t\t\t\t<div class=\"flex flex-1 items-center\">\n\t\t\t\t\t<div class=\" self-center ml-1 mr-3\">\n\t\t\t\t\t\t<Search className=\"size-3.5\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\" w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent\"\n\t\t\t\t\t\tbind:value={query}\n\t\t\t\t\t\tplaceholder={`${$i18n.t('Search Collection')}`}\n\t\t\t\t\t\ton:focus={() => {\n\t\t\t\t\t\t\tselectedFileId = null;\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{#if knowledge?.write_access}\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<AddContentMenu\n\t\t\t\t\t\t\t\tonUpload={(data) => {\n\t\t\t\t\t\t\t\t\tif (data.type === 'directory') {\n\t\t\t\t\t\t\t\t\t\tuploadDirectoryHandler();\n\t\t\t\t\t\t\t\t\t} else if (data.type === 'web') {\n\t\t\t\t\t\t\t\t\t\tshowAddWebpageModal = true;\n\t\t\t\t\t\t\t\t\t} else if (data.type === 'text') {\n\t\t\t\t\t\t\t\t\t\tshowAddTextContentModal = true;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tdocument.getElementById('files-input').click();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonSync={() => {\n\t\t\t\t\t\t\t\t\tshowSyncConfirmModal = true;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"px-3 flex justify-between\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"flex w-full bg-transparent overflow-x-auto scrollbar-none\"\n\t\t\t\t\ton:wheel={(e) => {\n\t\t\t\t\t\tif (e.deltaY !== 0) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.currentTarget.scrollLeft += e.deltaY;\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex gap-3 w-fit text-center text-sm rounded-full bg-transparent px-0.5 whitespace-nowrap\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<DropdownOptions\n\t\t\t\t\t\t\talign=\"start\"\n\t\t\t\t\t\t\tclassName=\"flex w-full items-center gap-2 truncate px-3 py-1.5 text-sm bg-gray-50 dark:bg-gray-850 rounded-xl  placeholder-gray-400 outline-hidden focus:outline-hidden\"\n\t\t\t\t\t\t\tbind:value={viewOption}\n\t\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t\t{ value: null, label: $i18n.t('All') },\n\t\t\t\t\t\t\t\t{ value: 'created', label: $i18n.t('Created by you') },\n\t\t\t\t\t\t\t\t{ value: 'shared', label: $i18n.t('Shared with you') }\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\t\t\tif (value) {\n\t\t\t\t\t\t\t\t\tlocalStorage.workspaceViewOption = value;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tdelete localStorage.workspaceViewOption;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<DropdownOptions\n\t\t\t\t\t\t\talign=\"start\"\n\t\t\t\t\t\t\tbind:value={sortKey}\n\t\t\t\t\t\t\tplaceholder={$i18n.t('Sort')}\n\t\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t\t{ value: 'name', label: $i18n.t('Name') },\n\t\t\t\t\t\t\t\t{ value: 'created_at', label: $i18n.t('Created At') },\n\t\t\t\t\t\t\t\t{ value: 'updated_at', label: $i18n.t('Updated At') }\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{#if sortKey}\n\t\t\t\t\t\t\t<DropdownOptions\n\t\t\t\t\t\t\t\talign=\"start\"\n\t\t\t\t\t\t\t\tbind:value={direction}\n\t\t\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t\t\t{ value: 'asc', label: $i18n.t('Asc') },\n\t\t\t\t\t\t\t\t\t{ value: null, label: $i18n.t('Desc') }\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{#if fileItems !== null && fileItemsTotal !== null}\n\t\t\t\t<div class=\"flex flex-row flex-1 gap-3 px-2.5 mt-2\">\n\t\t\t\t\t<div class=\"flex-1 flex\">\n\t\t\t\t\t\t<div class=\" flex flex-col w-full space-x-2 rounded-lg h-full\">\n\t\t\t\t\t\t\t<div class=\"w-full h-full flex flex-col min-h-full\">\n\t\t\t\t\t\t\t\t{#if fileItems.length > 0}\n\t\t\t\t\t\t\t\t\t<div class=\" flex overflow-y-auto h-full w-full scrollbar-hidden text-xs\">\n\t\t\t\t\t\t\t\t\t\t<Files\n\t\t\t\t\t\t\t\t\t\t\tfiles={fileItems}\n\t\t\t\t\t\t\t\t\t\t\t{knowledge}\n\t\t\t\t\t\t\t\t\t\t\t{selectedFileId}\n\t\t\t\t\t\t\t\t\t\t\tonClick={(fileId) => {\n\t\t\t\t\t\t\t\t\t\t\t\tselectedFileId = fileId;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (fileItems) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst file = fileItems.find((file) => file.id === selectedFileId);\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (file) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfileSelectHandler(file);\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedFile = null;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tonDelete={(fileId) => {\n\t\t\t\t\t\t\t\t\t\t\t\tselectedFileId = null;\n\t\t\t\t\t\t\t\t\t\t\t\tselectedFile = null;\n\n\t\t\t\t\t\t\t\t\t\t\t\tdeleteFileHandler(fileId);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t{#if fileItemsTotal > 30}\n\t\t\t\t\t\t\t\t\t\t<Pagination bind:page={currentPage} count={fileItemsTotal} perPage={30} />\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<div class=\"my-3 flex flex-col justify-center text-center text-gray-500 text-xs\">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('No content found')}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if selectedFileId !== null}\n\t\t\t\t\t\t<Drawer\n\t\t\t\t\t\t\tclassName=\"h-full\"\n\t\t\t\t\t\t\tshow={selectedFileId !== null}\n\t\t\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\t\t\tselectedFileId = null;\n\t\t\t\t\t\t\t\tselectedFile = null;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"flex flex-col justify-start h-full max-h-full\">\n\t\t\t\t\t\t\t\t<div class=\" flex flex-col w-full h-full max-h-full\">\n\t\t\t\t\t\t\t\t\t<div class=\"shrink-0 flex items-center p-2\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"mr-2\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tselectedFileId = null;\n\t\t\t\t\t\t\t\t\t\t\t\t\tselectedFile = null;\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<ChevronLeft strokeWidth=\"2.5\" />\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\" flex-1 text-lg line-clamp-1\">\n\t\t\t\t\t\t\t\t\t\t\t{selectedFile?.meta?.name}\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t{#if knowledge?.write_access}\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flex self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isSaving}\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateFileContentHandler();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{$i18n.t('Save')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{#if isSaving}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"ml-2 self-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t{#key selectedFile.id}\n\t\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-full h-full text-sm outline-none resize-none px-3 py-2\"\n\t\t\t\t\t\t\t\t\t\t\tbind:value={selectedFileContent}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!knowledge?.write_access}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={$i18n.t('Add content here')}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{/key}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Drawer>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{:else}\n\t\t\t\t<div class=\"my-10\">\n\t\t\t\t\t<Spinner className=\"size-4\" />\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t{:else}\n\t\t<Spinner className=\"size-5\" />\n\t{/if}\n</div>\n","<script>\n\timport KnowledgeBase from '$lib/components/workspace/Knowledge/KnowledgeBase.svelte';\n</script>\n\n<KnowledgeBase />\n"],"names":["className","strokeWidth","svg","root","$.set_attribute","$.set_class","$.clsx","$.append","$$anchor","dayjs","duration","relativeTime","i18n","getContext","knowledge","selectedFileId","files","$.prop","$$props","onClick","fileId","onDelete","div","$.each","file","div_1","root_1","button","$.child","div_2","div_3","div_4","DocumentPage","Spinner","div_5","span","root_4","formatFileSize","$.untrack","$.get","$$render","consequent_1","div_6","Tooltip","div_7","root_6","consequent_2","$i18n","div_8","root_8","capitalizeFirstLetter","consequent_3","$.reset","node_4","$.sibling","div_9","root_9","node_5","button_1","root_10","node_6","XMark","_a","createEventDispatcher","onClose","onSync","onUpload","data","show","Dropdown","$$value","e","root_2","$.event","$.set","root_3","flyAndScale","ArrowUpCircle","node_2","FolderOpen","ArrowPath","GlobeAlt","node_8","BarsArrowUp","node_10","dispatch","name","$.mutable_source","content","voiceInput","Modal","$.first_child","fragment_1","node","form","input","$.remove_input_defaults","RichTextInput","node_1","VoiceRecording","node_3","text","filename","MicSolid","stream","err","toast","track","consequent","alternate","div_10","button_2","root_5","text_1","$.template_effect","$0","$.preventDefault","largeScreen","showAddWebpageModal","showAddTextContentModal","showSyncConfirmModal","showAccessControlModal","id","knowledgeId","selectedFile","selectedFileContent","inputFiles","query","viewOption","sortKey","direction","currentPage","fileItems","fileItemsTotal","reset","init","getItemsPage","res","searchKnowledgeFilesById","fileSelectHandler","createFileFromText","blob","blobToFile","uploadWeb","urls","newFileItems","url","uuidv4","fileItem","processWeb","uploadedFile","uploadFile","item","addFileHandler","uploadFileHandler","_b","$config","_d","_c","_f","_e","_h","_g","metadata","_k","_j","_i","$settings","_n","_m","_l","uploadDirectoryHandler","isFileSystemAccessSupported","handleModernBrowserUpload","handleFirefoxUpload","error","handleUploadError","hasHiddenFolder","path","part","dirHandle","totalFiles","uploadedFiles","updateProgress","percentage","countFiles","entry","processDirectory","entryPath","fileWithPath","resolve","reject","relativePath","syncDirectoryHandler","resetKnowledgeById","addFileToKnowledgeById","deleteFileHandler","removeFileFromKnowledgeById","debounceTimeout","mediaQuery","dragged","isSaving","updateFileContentHandler","updateFileDataContentById","changeDebounceHandler","updateKnowledgeById","handleMediaQuery","onDragOver","onDragLeave","onDrop","handleUploadingFileFolder","items","wkentry","entries","inputItems","onMount","container","$page","getKnowledgeById","goto","dropZone","onDestroy","FilesOverlay","SyncConfirmDialog","AttachWebpageModal","AddTextContentModal","input_1","$user","AccessControlModal","input_2","LockClosed","div_11","input_3","div_12","div_13","div_14","div_15","Search","node_9","input_4","div_16","AddContentMenu","node_11","div_17","div_18","div_19","node_12","DropdownOptions","value","node_13","div_20","root_7","div_21","div_22","div_23","div_24","fragment_3","Files","node_17","Pagination","consequent_4","div_25","div_26","$.derived_safe_equal","Drawer","div_27","root_12","div_28","div_29","div_30","node_20","ChevronLeft","div_31","div_32","root_13","text_5","div_33","root_14","node_23","consequent_6","textarea","root_15","$.remove_textarea_child","consequent_8","div_34","root_16","node_25","consequent_9","alternate_2","$1","$2","$.mutate","consequent_10","alternate_3","fileInputElement","KnowledgeBase"],"mappings":"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"}