{"version":3,"file":"27.BKh-9pG2.js","sources":["../../../../../../src/lib/components/playground/Chat/Message.svelte","../../../../../../src/lib/components/playground/Chat/Messages.svelte","../../../../../../src/lib/components/playground/Chat.svelte","../../../../../../src/routes/(app)/playground/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { onMount, getContext } from 'svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let message;\n\texport let idx;\n\n\texport let onDelete;\n\n\tlet textAreaElement: HTMLTextAreaElement;\n\n\tonMount(() => {\n\t\ttextAreaElement.style.height = '';\n\t\ttextAreaElement.style.height = textAreaElement.scrollHeight + 'px';\n\t});\n</script>\n\n<div class=\"flex gap-2 group\">\n\t<div class=\"flex items-start pt-1\">\n\t\t<div\n\t\t\tclass=\"px-2 py-1 text-sm font-semibold uppercase min-w-[6rem] text-left rounded-lg transition\"\n\t\t>\n\t\t\t{$i18n.t(message.role)}\n\t\t</div>\n\t</div>\n\n\t<div class=\"flex-1\">\n\t\t<!-- $i18n.t('a user') -->\n\t\t<!-- $i18n.t('an assistant') -->\n\t\t<textarea\n\t\t\tid=\"{message.role}-{idx}-textarea\"\n\t\t\tbind:this={textAreaElement}\n\t\t\tclass=\"w-full bg-transparent outline-hidden rounded-lg p-2 text-sm resize-none overflow-hidden\"\n\t\t\tplaceholder={$i18n.t(`Enter {{role}} message here`, {\n\t\t\t\trole: message.role === 'user' ? $i18n.t('a user') : $i18n.t('an assistant')\n\t\t\t})}\n\t\t\trows=\"1\"\n\t\t\ton:input={(e) => {\n\t\t\t\ttextAreaElement.style.height = '';\n\t\t\t\ttextAreaElement.style.height = textAreaElement.scrollHeight + 'px';\n\t\t\t}}\n\t\t\ton:focus={(e) => {\n\t\t\t\ttextAreaElement.style.height = '';\n\t\t\t\ttextAreaElement.style.height = textAreaElement.scrollHeight + 'px';\n\n\t\t\t\t// e.target.style.height = Math.min(e.target.scrollHeight, 200) + 'px';\n\t\t\t}}\n\t\t\tbind:value={message.content}\n\t\t/>\n\t</div>\n\n\t<div class=\" pt-1\">\n\t\t<button\n\t\t\tclass=\" group-hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-300 transition\"\n\t\t\ton:click={() => {\n\t\t\t\tonDelete();\n\t\t\t}}\n\t\t>\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\tfill=\"none\"\n\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\tstroke-width=\"2\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tclass=\"w-5 h-5\"\n\t\t\t>\n\t\t\t\t<path\n\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\td=\"M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n\t\t\t\t/>\n\t\t\t</svg>\n\t\t</button>\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport { onMount, getContext } from 'svelte';\n\timport Message from './Message.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let messages = [];\n</script>\n\n<div class=\"py-3 space-y-3\">\n\t{#each messages as message, idx}\n\t\t<Message\n\t\t\t{message}\n\t\t\t{idx}\n\t\t\tonDelete={() => {\n\t\t\t\tmessages = messages.filter((message, messageIdx) => messageIdx !== idx);\n\t\t\t}}\n\t\t/>\n\t{/each}\n</div>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\n\timport { goto } from '$app/navigation';\n\timport { onMount, tick, getContext } from 'svelte';\n\n\timport {\n\t\tOLLAMA_API_BASE_URL,\n\t\tOPENAI_API_BASE_URL,\n\t\tWEBUI_API_BASE_URL,\n\t\tWEBUI_BASE_URL\n\t} from '$lib/constants';\n\timport { WEBUI_NAME, config, user, models, settings } from '$lib/stores';\n\n\timport { chatCompletion } from '$lib/apis/openai';\n\n\timport { splitStream } from '$lib/utils';\n\timport Collapsible from '../common/Collapsible.svelte';\n\n\timport Messages from '$lib/components/playground/Chat/Messages.svelte';\n\timport ChevronUp from '../icons/ChevronUp.svelte';\n\timport ChevronDown from '../icons/ChevronDown.svelte';\n\timport Pencil from '../icons/Pencil.svelte';\n\timport Cog6 from '../icons/Cog6.svelte';\n\timport Sidebar from '../common/Sidebar.svelte';\n\timport ArrowRight from '../icons/ArrowRight.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\tlet loaded = false;\n\n\tlet selectedModelId = '';\n\tlet loading = false;\n\tlet stopResponseFlag = false;\n\n\tlet systemTextareaElement: HTMLTextAreaElement;\n\tlet messagesContainerElement: HTMLDivElement;\n\n\tlet showSystem = false;\n\tlet showSettings = false;\n\n\tlet system = '';\n\n\tlet role = 'user';\n\tlet message = '';\n\n\tlet messages = [];\n\n\tconst scrollToBottom = () => {\n\t\tconst element = messagesContainerElement;\n\n\t\tif (element) {\n\t\t\telement.scrollTop = element?.scrollHeight;\n\t\t}\n\t};\n\n\tconst stopResponse = () => {\n\t\tstopResponseFlag = true;\n\t\tconsole.log('stopResponse');\n\t};\n\n\tconst resizeSystemTextarea = async () => {\n\t\tawait tick();\n\t\tif (systemTextareaElement) {\n\t\t\tsystemTextareaElement.style.height = '';\n\t\t\tsystemTextareaElement.style.height = Math.min(systemTextareaElement.scrollHeight, 555) + 'px';\n\t\t}\n\t};\n\n\t$: if (showSystem) {\n\t\tresizeSystemTextarea();\n\t}\n\n\tconst chatCompletionHandler = async () => {\n\t\tif (selectedModelId === '') {\n\t\t\ttoast.error($i18n.t('Please select a model.'));\n\t\t\treturn;\n\t\t}\n\n\t\tconst model = $models.find((model) => model.id === selectedModelId);\n\t\tif (!model) {\n\t\t\tselectedModelId = '';\n\t\t\treturn;\n\t\t}\n\n\t\tconst [res, controller] = await chatCompletion(\n\t\t\tlocalStorage.token,\n\t\t\t{\n\t\t\t\tmodel: model.id,\n\t\t\t\tstream: true,\n\t\t\t\tmessages: [\n\t\t\t\t\tsystem\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\trole: 'system',\n\t\t\t\t\t\t\t\tcontent: system\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t: undefined,\n\t\t\t\t\t...messages\n\t\t\t\t].filter((message) => message)\n\t\t\t},\n\t\t\t`${WEBUI_BASE_URL}/api`\n\t\t);\n\n\t\tlet responseMessage;\n\t\tif (messages.at(-1)?.role === 'assistant') {\n\t\t\tresponseMessage = messages.at(-1);\n\t\t} else {\n\t\t\tresponseMessage = {\n\t\t\t\trole: 'assistant',\n\t\t\t\tcontent: ''\n\t\t\t};\n\t\t\tmessages.push(responseMessage);\n\t\t\tmessages = messages;\n\t\t}\n\n\t\tawait tick();\n\t\tconst textareaElement = document.getElementById(`assistant-${messages.length - 1}-textarea`);\n\n\t\tif (res && res.ok) {\n\t\t\tconst reader = res.body\n\t\t\t\t.pipeThrough(new TextDecoderStream())\n\t\t\t\t.pipeThrough(splitStream('\\n'))\n\t\t\t\t.getReader();\n\n\t\t\twhile (true) {\n\t\t\t\tconst { value, done } = await reader.read();\n\t\t\t\tif (done || stopResponseFlag) {\n\t\t\t\t\tif (stopResponseFlag) {\n\t\t\t\t\t\tcontroller.abort('User: Stop Response');\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tlet lines = value.split('\\n');\n\n\t\t\t\t\tfor (const line of lines) {\n\t\t\t\t\t\tif (line !== '') {\n\t\t\t\t\t\t\tconsole.log(line);\n\t\t\t\t\t\t\tif (line === 'data: [DONE]') {\n\t\t\t\t\t\t\t\t// responseMessage.done = true;\n\t\t\t\t\t\t\t\tmessages = messages;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlet data = JSON.parse(line.replace(/^data: /, ''));\n\t\t\t\t\t\t\t\tconsole.log(data);\n\n\t\t\t\t\t\t\t\tif (responseMessage.content == '' && data.choices[0].delta.content == '\\n') {\n\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\ttextareaElement.style.height = textareaElement.scrollHeight + 'px';\n\n\t\t\t\t\t\t\t\t\tresponseMessage.content += data.choices[0].delta.content ?? '';\n\t\t\t\t\t\t\t\t\tmessages = messages;\n\n\t\t\t\t\t\t\t\t\ttextareaElement.style.height = textareaElement.scrollHeight + 'px';\n\n\t\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t}\n\n\t\t\t\tscrollToBottom();\n\t\t\t}\n\t\t}\n\t};\n\n\tconst addHandler = async () => {\n\t\tif (message) {\n\t\t\tmessages.push({\n\t\t\t\trole: role,\n\t\t\t\tcontent: message\n\t\t\t});\n\t\t\tmessages = messages;\n\t\t\tmessage = '';\n\t\t\tawait tick();\n\t\t\tscrollToBottom();\n\t\t}\n\t};\n\n\tconst submitHandler = async () => {\n\t\tif (selectedModelId) {\n\t\t\tawait addHandler();\n\n\t\t\tloading = true;\n\t\t\tawait chatCompletionHandler();\n\n\t\t\tloading = false;\n\t\t\tstopResponseFlag = false;\n\t\t}\n\t};\n\n\tonMount(async () => {\n\t\tif ($user?.role !== 'admin') {\n\t\t\tawait goto('/');\n\t\t}\n\n\t\tif ($settings?.models) {\n\t\t\tselectedModelId = $settings?.models[0];\n\t\t} else if ($config?.default_models) {\n\t\t\tselectedModelId = $config?.default_models.split(',')[0];\n\t\t} else {\n\t\t\tselectedModelId = '';\n\t\t}\n\t\tloaded = true;\n\t});\n</script>\n\n<div class=\" flex flex-col justify-between w-full overflow-y-auto h-full\">\n\t<div class=\"mx-auto w-full md:px-0 h-full relative\">\n\t\t<div class=\" flex flex-col h-full px-3.5\">\n\t\t\t<div class=\"flex w-full items-start gap-1.5\">\n\t\t\t\t<Collapsible\n\t\t\t\t\tclassName=\"w-full flex-1\"\n\t\t\t\t\tbind:open={showSystem}\n\t\t\t\t\tbuttonClassName=\"w-full rounded-lg text-sm border border-gray-100/30 dark:border-gray-850/30 w-full py-1 px-1.5\"\n\t\t\t\t\tgrow={true}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"flex gap-2 justify-between items-center\">\n\t\t\t\t\t\t<div class=\" shrink-0 font-medium ml-1.5\">\n\t\t\t\t\t\t\t{$i18n.t('System Instructions')}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{#if !showSystem && system.trim()}\n\t\t\t\t\t\t\t<div class=\" flex-1 text-gray-500 line-clamp-1\">\n\t\t\t\t\t\t\t\t{system}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t<div class=\"shrink-0\">\n\t\t\t\t\t\t\t<button class=\"p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg\">\n\t\t\t\t\t\t\t\t{#if showSystem}\n\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-3.5\" />\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<Pencil className=\"size-3.5\" />\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div slot=\"content\">\n\t\t\t\t\t\t<div class=\"pt-1 px-1.5\">\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\tbind:this={systemTextareaElement}\n\t\t\t\t\t\t\t\tclass=\"w-full h-full bg-transparent resize-none outline-hidden text-sm\"\n\t\t\t\t\t\t\t\tbind:value={system}\n\t\t\t\t\t\t\t\tplaceholder={$i18n.t(\"You're a helpful assistant.\")}\n\t\t\t\t\t\t\t\ton:input={() => {\n\t\t\t\t\t\t\t\t\tresizeSystemTextarea();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\trows=\"4\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Collapsible>\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tclass=\" pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0\"\n\t\t\t\tid=\"messages-container\"\n\t\t\t\tbind:this={messagesContainerElement}\n\t\t\t>\n\t\t\t\t<div class=\" h-full w-full flex flex-col\">\n\t\t\t\t\t<div class=\"flex-1 p-1\">\n\t\t\t\t\t\t<Messages bind:messages />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"pb-3\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"border border-gray-100/30 dark:border-gray-850/30 w-full px-3 py-2.5 rounded-xl\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"py-0.5\">\n\t\t\t\t\t\t<!-- $i18n.t('a user') -->\n\t\t\t\t\t\t<!-- $i18n.t('an assistant') -->\n\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\tbind:value={message}\n\t\t\t\t\t\t\tclass=\" w-full h-full bg-transparent resize-none outline-hidden text-sm\"\n\t\t\t\t\t\t\tplaceholder={$i18n.t(`Enter {{role}} message here`, {\n\t\t\t\t\t\t\t\trole: role === 'user' ? $i18n.t('a user') : $i18n.t('an assistant')\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\ton:input={(e) => {\n\t\t\t\t\t\t\t\te.target.style.height = '';\n\t\t\t\t\t\t\t\te.target.style.height = Math.min(e.target.scrollHeight, 150) + 'px';\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ton:focus={(e) => {\n\t\t\t\t\t\t\t\te.target.style.height = '';\n\t\t\t\t\t\t\t\te.target.style.height = Math.min(e.target.scrollHeight, 150) + 'px';\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\trows=\"2\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex justify-between flex-col sm:flex-row items-start sm:items-center gap-2 mt-2\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"shrink-0\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 text-sm font-medium bg-gray-50 hover:bg-gray-100 text-gray-900 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-200 transition rounded-lg shrink-0 {($settings?.highContrastMode ??\n\t\t\t\t\t\t\t\tfalse)\n\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t: 'outline-hidden'}\"\n\t\t\t\t\t\t\t\taria-pressed={role === 'assistant'}\n\t\t\t\t\t\t\t\taria-label={$i18n.t(\n\t\t\t\t\t\t\t\t\trole === 'user' ? 'Switch to Assistant role' : 'Switch to User role'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\trole = role === 'user' ? 'assistant' : 'user';\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{#if role === 'user'}\n\t\t\t\t\t\t\t\t\t{$i18n.t('User')}\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t{$i18n.t('Assistant')}\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"flex items-center justify-between gap-2 w-full sm:w-auto\">\n\t\t\t\t\t\t\t<div class=\"flex-1\">\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tclass=\" bg-transparent border border-gray-100/30 dark:border-gray-850/30 rounded-lg py-1 px-2 -mx-0.5 text-sm outline-hidden w-full\"\n\t\t\t\t\t\t\t\t\tbind:value={selectedModelId}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{#each $models as model}\n\t\t\t\t\t\t\t\t\t\t<option value={model.id} class=\"bg-gray-50 dark:bg-gray-700\"\n\t\t\t\t\t\t\t\t\t\t\t>{model.name}</option\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"flex gap-2 shrink-0\">\n\t\t\t\t\t\t\t\t{#if !loading}\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tdisabled={message === ''}\n\t\t\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 text-sm font-medium disabled:bg-gray-50 dark:disabled:hover:bg-gray-850 disabled:cursor-not-allowed bg-gray-50 hover:bg-gray-100 text-gray-900 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-200 transition rounded-lg\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\taddHandler();\n\t\t\t\t\t\t\t\t\t\t\trole = role === 'user' ? 'assistant' : 'user';\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{$i18n.t('Add')}\n\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-lg\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tsubmitHandler();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{$i18n.t('Run')}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"px-3 py-1.5 text-sm font-medium bg-gray-300 text-black transition rounded-lg\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tstopResponse();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{$i18n.t('Cancel')}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n","<script>\n\timport Chat from '$lib/components/playground/Chat.svelte';\n</script>\n\n<Chat />\n"],"names":["i18n","getContext","message","$.prop","$$props","idx","onDelete","textAreaElement","$.mutable_source","onMount","$.mutate","$.get","div","root","div_1","div_2","$.child","text","$.reset","div_3","textarea","$.remove_textarea_child","$$value","$.set","div_4","button","$.set_attribute","$.untrack","$1","$i18n","$.event","e","messages","$.index","$$anchor","Message","messageIdx","selectedModelId","loading","stopResponseFlag","systemTextareaElement","messagesContainerElement","showSystem","system","role","scrollToBottom","element","stopResponse","resizeSystemTextarea","tick","chatCompletionHandler","toast","model","$models","res","controller","chatCompletion","WEBUI_BASE_URL","responseMessage","textareaElement","reader","splitStream","value","done","lines","line","data","error","addHandler","submitHandler","_a","$user","goto","_b","$settings","_c","_d","$config","_e","Collapsible","node","root_1","div_5","div_6","root_2","div_7","$.sibling","node_1","ChevronUp","Pencil","$$render","consequent_1","alternate","div_8","root_5","div_9","$.template_effect","$0","div_10","div_11","div_12","Messages","node_3","div_13","div_14","div_15","textarea_1","div_16","div_17","button_1","node_4","consequent_2","alternate_1","div_18","div_19","select","option","root_8","div_20","button_2","$.first_child","fragment_4","text_5","button_3","text_6","button_4","root_10","text_7","$.append","alternate_2","consequent_3","$.set_class","Chat"],"mappings":"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"}