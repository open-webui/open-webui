import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as Je,g as nt,f,c as r,e as U,u as kt,w as n,k as l,r as t,t as H,s as g,a as u,A as st,d as lt,j as e,n as ie,i as m,m as F,b as Re,l as ge,o as St,x as at,q as Kt,v as Xt,h as Yt,$ as Zt,z as Qt,aP as er}from"../chunks/0WpKKl27.js";import{i as de}from"../chunks/Cmf4RC8y.js";import{i as qe}from"../chunks/C3k0oZ3o.js";import{a as Ce,s as Ke}from"../chunks/BVrWTcfB.js";import{W as tr,a as je,u as rr,c as ar,f as Ve,b as or}from"../chunks/PCOILo-8.js";import{j as sr,l as nr,c as lr,g as We,k as ir,t as dr,m as cr,a as ot,n as vr}from"../chunks/Dcv_5MKS.js";import{e as ur}from"../chunks/u5Cnd4mY.js";import{h as mr}from"../chunks/Bwqchdu-.js";import{r as fr,a as $t}from"../chunks/CZ1y6KaE.js";import{a as gr,b as pr}from"../chunks/kb1CvZ3a.js";import{b as yt}from"../chunks/Bo3ZTtFv.js";import{t as z}from"../chunks/DYdr9DjX.js";import{f as _r}from"../chunks/CsWaRabF.js";import{g as Te}from"../chunks/B5RARo22.js";import{T as Se}from"../chunks/Db0gdTVr.js";import{C as bt}from"../chunks/ByHAJgVC.js";import{g as Be}from"../chunks/B6gyXX6T.js";import{s as Ct}from"../chunks/3-JilrU5.js";import{p as ce}from"../chunks/DpN1w328.js";import"../chunks/BtReZMDb.js";import{b as Ht,c as Oe}from"../chunks/DA2vpIKA.js";import{f as Ft}from"../chunks/Dbtivbjp.js";import{D as Pt}from"../chunks/DD5ATWsz.js";import{G as It}from"../chunks/CYXXpf3O.js";import{S as xr}from"../chunks/DM0r1jA3.js";import{D as hr}from"../chunks/DLpHo_PE.js";import{D as $r}from"../chunks/CmPVC7JK.js";import{S as Mt}from"../chunks/NOxjCBoP.js";import{G as yr}from"../chunks/D4rRqD24.js";import{E as br}from"../chunks/C2rnPICT.js";import{V as wr}from"../chunks/LIBr8nyO.js";import{I as kr,M as Sr}from"../chunks/z0wYL8_c.js";import{H as Cr}from"../chunks/B3Vrv829.js";import{S as Hr}from"../chunks/BqWDuYyJ.js";import{P as Fr}from"../chunks/BonmQdqt.js";import{C as Pr}from"../chunks/DAAddo_l.js";import{X as Ir}from"../chunks/CZmZoefv.js";import{P as Mr}from"../chunks/DVjsywiU.js";import{L as Lr}from"../chunks/1w6CVy8g.js";import{V as Dr}from"../chunks/3t3HGsuI.js";import{T as Er}from"../chunks/CQUuNpHc.js";import{k as wt}from"../chunks/cX8aofVu.js";import{S as Nr}from"../chunks/BO1efK8r.js";var jr=f('<div class="flex gap-2 justify-between items-center px-3 py-1.5 text-sm font-medium cursor-pointerrounded-md"><div class="flex gap-2 items-center"><!> <div class="flex items-center"> </div></div> <div><!></div></div> <hr class="border-gray-50 dark:border-gray-850/30 my-1"/>',1),Br=f('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"></path></svg> <div class="flex items-center"> </div>',1),Or=f('<!> <div class="flex items-center"> </div>',1),zr=f('<!> <div class="flex items-center"> </div>',1),Ur=f('<!> <div class="flex items-center"> </div>',1),Ar=f('<!> <div class="flex items-center"> </div>',1),Gr=f('<!> <!> <!> <!> <!> <hr class="border-gray-50 dark:border-gray-850/30 my-1"/> <!>',1),Tr=f('<div slot="content"><!></div>');function Wr(He,$){Je($,!1);const p=()=>Ce(R,"$i18n",a),[a,W]=Ke(),R=nt("i18n");let Q=ce($,"func",12),ee=ce($,"editHandler",8),pe=ce($,"shareHandler",8),_e=ce($,"cloneHandler",8),te=ce($,"exportHandler",8),be=ce($,"deleteHandler",8),re=ce($,"toggleGlobalHandler",8),ve=ce($,"onClose",8),we=F(!1);qe(),Pt(He,{get show(){return e(we)},set show(y){m(we,y)},$$events:{change:y=>{y.detail===!1&&ve()()}},children:(y,D)=>{{let P=ie(()=>(p(),n(()=>p().t("More"))));Se(y,{get content(){return e(P)},children:(ae,ke)=>{var ue=lt(),me=U(ue);Ct(me,$,"default",{},null),u(ae,ue)},$$slots:{default:!0}})}},$$slots:{default:!0,content:(y,D)=>{var P=Tr(),ae=r(P);Ht(ae,{class:"w-full max-w-[180px] rounded-xl p-1 border border-gray-100  dark:border-gray-800 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-sm",sideOffset:-2,side:"bottom",align:"start",get transition(){return Ft},children:(ke,ue)=>{var me=Gr(),I=U(me);{var xe=N=>{var he=jr(),b=U(he),w=r(b),C=r(w);yr(C,{});var j=l(C,2),oe=r(j,!0);t(j),t(w);var ze=l(w,2),Xe=r(ze);Mt(Xe,{get state(){return Q().is_global},set state(d){Q(Q().is_global=d,!0)},$$events:{change(...d){var v;(v=re())==null||v.apply(this,d)}},$$legacy:!0}),t(ze),t(b),st(2),H(d=>g(oe,d),[()=>(p(),n(()=>p().t("Global")))]),u(N,he)};de(I,N=>{kt(Q()),n(()=>["filter","action"].includes(Q().type))&&N(xe)})}var Fe=l(I,2);Oe(Fe,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-md",$$events:{click:()=>{ee()()}},children:(N,he)=>{var b=Br(),w=l(U(b),2),C=r(w,!0);t(w),H(j=>g(C,j),[()=>(p(),n(()=>p().t("Edit")))]),u(N,b)},$$slots:{default:!0}});var E=l(Fe,2);Oe(E,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-md",$$events:{click:()=>{pe()()}},children:(N,he)=>{var b=Or(),w=U(b);xr(w,{});var C=l(w,2),j=r(C,!0);t(C),H(oe=>g(j,oe),[()=>(p(),n(()=>p().t("Share")))]),u(N,b)},$$slots:{default:!0}});var q=l(E,2);Oe(q,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$events:{click:()=>{_e()()}},children:(N,he)=>{var b=zr(),w=U(b);hr(w,{});var C=l(w,2),j=r(C,!0);t(C),H(oe=>g(j,oe),[()=>(p(),n(()=>p().t("Clone")))]),u(N,b)},$$slots:{default:!0}});var Pe=l(q,2);Oe(Pe,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$events:{click:()=>{te()()}},children:(N,he)=>{var b=Ur(),w=U(b);$r(w,{});var C=l(w,2),j=r(C,!0);t(C),H(oe=>g(j,oe),[()=>(p(),n(()=>p().t("Export")))]),u(N,b)},$$slots:{default:!0}});var De=l(Pe,4);Oe(De,{class:"flex  gap-2  items-center px-3 py-1.5 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$events:{click:()=>{be()()}},children:(N,he)=>{var b=Ar(),w=U(b);It(w,{strokeWidth:"2"});var C=l(w,2),j=r(C,!0);t(C),H(oe=>g(j,oe),[()=>(p(),n(()=>p().t("Delete")))]),u(N,b)},$$slots:{default:!0}}),u(ke,me)},$$slots:{default:!0}}),t(P),u(y,P)}},$$legacy:!0}),Re(),W()}var Vr=f('<button class="flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl w-full"><div class=" self-center mr-2"><!></div> <div class=" self-center truncate"> </div></button> <button class="flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl w-full"><div class=" self-center mr-2"><!></div> <div class=" self-center truncate"> </div></button>',1),Jr=f('<div slot="content"><!></div>');function Rr(He,$){Je($,!1);const p=()=>Ce(R,"$i18n",a),[a,W]=Ke(),R=nt("i18n");let Q=ce($,"createHandler",8),ee=ce($,"importFromLinkHandler",8),pe=ce($,"onClose",8,()=>{}),_e=F(!1);qe(),Pt(He,{get show(){return e(_e)},set show(te){m(_e,te)},$$events:{change:te=>{te.detail===!1&&pe()()}},children:(te,be)=>{{let re=ie(()=>(p(),n(()=>p().t("Create"))));Se(te,{get content(){return e(re)},children:(ve,we)=>{var y=lt(),D=U(y);Ct(D,$,"default",{},null),u(ve,y)},$$slots:{default:!0}})}},$$slots:{default:!0,content:(te,be)=>{var re=Jr(),ve=r(re);Ht(ve,{class:"w-full max-w-[190px] rounded-2xl px-1 py-1 border border-gray-100  dark:border-gray-800 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:6,side:"bottom",align:"start",get transition(){return Ft},children:(we,y)=>{var D=Vr(),P=U(D),ae=r(P),ke=r(ae);Mr(ke,{}),t(ae);var ue=l(ae,2),me=r(ue,!0);t(ue),t(P);var I=l(P,2),xe=r(I),Fe=r(xe);Lr(Fe,{}),t(xe);var E=l(xe,2),q=r(E,!0);t(E),t(I),H((Pe,De)=>{g(me,Pe),g(q,De)},[()=>(p(),n(()=>p().t("New Function"))),()=>(p(),n(()=>p().t("Import From Link")))]),ge("click",P,async()=>{Q()(),m(_e,!1)}),ge("click",I,async()=>{ee()(),m(_e,!1)}),u(we,D)},$$slots:{default:!0}}),t(re),u(te,re)}},$$legacy:!0}),Re(),W()}var qr=f('<button class="flex text-xs items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-200 transition"><div class=" self-center font-medium line-clamp-1"> </div></button>'),Kr=f('<button class="flex text-xs items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-200 transition"><div class=" self-center font-medium line-clamp-1"> </div></button> <!>',1),Xr=f('<div class=" px-2 py-1.5 rounded-xl bg-black text-white dark:bg-white dark:text-black transition font-medium text-sm flex items-center"><!> <div class=" hidden md:block md:ml-1 text-xs"> </div></div>'),Yr=f('<div class="self-center pl-1.5 translate-y-[0.5px] rounded-l-xl bg-transparent"><button class="p-0.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-900 transition"><!></button></div>'),Zr=f('<div class=" text-gray-500 text-xs font-medium shrink-0"> </div>'),Qr=f('<div class=" flex items-center gap-1.5"><div class=" text-xs font-semibold px-1 rounded-sm uppercase line-clamp-1 bg-gray-500/20 text-gray-700 dark:text-gray-200"> </div> <div class="line-clamp-1 text-sm"> </div> <!></div>'),ea=f('<button class="self-center w-fit text-sm px-2 py-2 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl" type="button"><!></button>'),ta=f('<button class="self-center w-fit text-sm px-2 py-2 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl" type="button"><!></button>'),ra=f('<button class="self-center w-fit text-sm px-2 py-2 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl" type="button"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path></svg></button>'),aa=f('<button class="self-center w-fit text-sm p-1.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl" type="button"><!></button>'),oa=f("<!> <!> <!>",1),sa=f('<div class=" flex space-x-4 cursor-pointer w-full px-2 py-2 dark:hover:bg-white/5 hover:bg-black/5 rounded-xl"><a class=" flex flex-1 space-x-3.5 cursor-pointer w-full"><div class="flex items-center text-left"><div class=" flex-1 self-center pl-1"><!> <div class="flex gap-1.5 px-1"><div class="text-xs text-gray-500 shrink-0"><!></div> <div class=" text-xs overflow-hidden text-ellipsis line-clamp-1"> </div></div></div></div></a> <div class="flex flex-row gap-0.5 self-center"><!> <div class=" self-center mx-1"><!></div></div></div>'),na=f('<div class="px-3 my-2 gap-1 lg:gap-2 grid lg:grid-cols-2"></div>'),la=f('<div class=" w-full h-full flex flex-col justify-center items-center my-16 mb-24"><div class="max-w-md text-center"><div class=" text-3xl mb-3">ðŸ˜•</div> <div class=" text-lg font-medium mb-1"> </div> <div class=" text-gray-500 text-center text-xs"> </div></div></div>'),ia=f('<div class=" my-16"><div class=" text-xl font-medium mb-1 line-clamp-1"> </div> <a class=" flex cursor-pointer items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-850 w-full mb-2 px-3.5 py-1.5 rounded-xl transition" href="https://openwebui.com/functions" target="_blank"><div class=" self-center"><div class=" font-semibold line-clamp-1"> </div> <div class=" text-sm line-clamp-1"> </div></div> <div><div><!></div></div></a></div>'),da=f('<div class=" text-sm text-gray-500 truncate"> <span class="  font-semibold"> </span>.</div>'),ca=f('<div class="text-sm text-gray-500"><div class=" bg-yellow-500/20 text-yellow-700 dark:text-yellow-200 rounded-lg px-4 py-3"><div> </div> <ul class=" mt-1 list-disc pl-4 text-xs"><li> </li> <li> </li></ul></div> <div class="my-3"> </div></div>'),va=f('<div class="px-4.5 w-full"><div class="flex flex-col gap-1 px-1 mt-2.5 mb-2"><div class="flex justify-between items-center mb-1 w-full"><input id="documents-import-input" type="file" accept=".json" hidden=""/> <div class="flex justify-between items-center w-full"><div class="flex items-center md:self-center text-xl font-medium px-0.5 gap-2 shrink-0"><div> </div> <div class="text-lg font-medium text-gray-500 dark:text-gray-500"> </div></div> <div class="flex w-full justify-end gap-1.5"><!> <!></div></div></div></div> <div class="py-2 bg-white dark:bg-gray-900 rounded-3xl border border-gray-100/30 dark:border-gray-850/30"><div class="px-3.5 flex flex-1 items-center w-full space-x-2 py-0.5 pb-2"><div class="flex flex-1"><div class=" self-center ml-1 mr-3"><!></div> <input class=" w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent"/> <!></div></div> <div class="px-3 flex w-full bg-transparent overflow-x-auto scrollbar-none"><div class="flex gap-0.5 w-fit text-center text-sm rounded-full bg-transparent px-0.5 whitespace-nowrap"><!> <!></div></div> <!></div> <!></div> <!> <!> <!> <!>',1),ua=f('<div class="w-full h-full flex justify-center items-center"><!></div>'),ma=f("<!> <!>",1);function fa(He,$){Je($,!1);const p=()=>Ce(rr,"$user",ee),a=()=>Ce(te,"$i18n",ee),W=()=>Ce(ar,"$config",ee),R=()=>Ce(or,"$settings",ee),Q=()=>Ce(tr,"$WEBUI_NAME",ee),[ee,pe]=Ke(),{saveAs:_e}=_r,te=nt("i18n");let be=F(!1),re=F(),ve=F(),we=F(),y=F(""),D=F(""),P=F(""),ae=F(!1),ke=F(!1),ue=F(!1),me=F(!1),I=F(null),xe=F(!1),Fe=F(!1),E=F(null),q=F([]);const Pe=()=>{m(q,e(E).filter(d=>{var v,_;return(e(P)!==""?d.type===e(P):!0)&&(e(D)===""||d.name.toLowerCase().includes(e(D).toLowerCase())||d.id.toLowerCase().includes(e(D).toLowerCase()))&&(e(y)===""||e(y)==="created"&&d.user_id===((v=p())==null?void 0:v.id)||e(y)==="shared"&&d.user_id!==((_=p())==null?void 0:_.id))}).sort((d,v)=>d.type.localeCompare(v.type)||d.name.localeCompare(v.name)))},De=async d=>{const v=await ot(localStorage.token,d.id).catch(B=>(z.error(`${B}`),null));z.success(a().t("Redirecting you to Open WebUI Community"));const _="https://openwebui.com",M=await window.open(`${_}/functions/create`,"_blank"),se=B=>{B.origin===_&&B.data==="loaded"&&(M.postMessage(JSON.stringify(v),"*"),window.removeEventListener("message",se))};window.addEventListener("message",se,!1)},N=async d=>{const v=await ot(localStorage.token,d.id).catch(_=>(z.error(`${_}`),null));v&&(sessionStorage.function=JSON.stringify({...v,id:`${v.id}_clone`,name:`${v.name} (${a().t("Clone")})`}),Te("/admin/functions/create"))},he=async d=>{const v=await ot(localStorage.token,d.id).catch(_=>(z.error(`${_}`),null));if(v){let _=new Blob([JSON.stringify([v])],{type:"application/json"});_e(_,`function-${v.id}-export-${Date.now()}.json`)}},b=async d=>{var _,M,se;await ir(localStorage.token,d.id).catch(B=>(z.error(`${B}`),null))&&(z.success(a().t("Function deleted successfully")),m(E,e(E).filter(B=>B.id!==d.id)),Ve.set(await We(localStorage.token)),je.set(await Be(localStorage.token,((M=(_=W())==null?void 0:_.features)==null?void 0:M.enable_direct_connections)&&(((se=R())==null?void 0:se.directConnections)??null),!1,!0)))},w=async d=>{var _,M,se;await cr(localStorage.token,d.id).catch(B=>{z.error(`${B}`)})&&(d.is_global?d.type==="filter"?z.success(a().t("Filter is now globally enabled")):z.success(a().t("Function is now globally enabled")):d.type==="filter"?z.success(a().t("Filter is now globally disabled")):z.success(a().t("Function is now globally disabled")),Ve.set(await We(localStorage.token)),je.set(await Be(localStorage.token,((M=(_=W())==null?void 0:_.features)==null?void 0:M.enable_direct_connections)&&(((se=R())==null?void 0:se.directConnections)??null),!1,!0)))};St(async()=>{m(y,(localStorage==null?void 0:localStorage.workspaceViewOption)||""),m(E,await sr(localStorage.token).catch(M=>(z.error(`${M}`),[]))),await at(),m(Fe,!0);const d=M=>{M.key==="Shift"&&m(be,!0)},v=M=>{M.key==="Shift"&&m(be,!1)},_=()=>{m(be,!1)};return window.addEventListener("keydown",d),window.addEventListener("keyup",v),window.addEventListener("blur-sm",_),()=>{window.removeEventListener("keydown",d),window.removeEventListener("keyup",v),window.removeEventListener("blur-sm",_)}}),Kt(()=>(e(E),e(D),e(P),e(y)),()=>{e(E)&&e(D)!==void 0&&e(P)!==void 0&&e(y)!==void 0&&Pe()}),Xt(),qe();var C=ma();mr("1hdw0md",d=>{Yt(v=>{Zt.title=`
		${v??""} â€¢ ${Q()??""}
	`},[()=>(a(),n(()=>a().t("Functions")))])});var j=U(C);kr(j,{loadUrlHandler:async d=>await nr(localStorage.token,d),onImport:d=>{sessionStorage.function=JSON.stringify({...d}),Te("/admin/functions/create")},get show(){return e(ae)},set show(d){m(ae,d)},$$legacy:!0});var oe=l(j,2);{var ze=d=>{var v=va(),_=U(v),M=r(_),se=r(M),B=r(se);yt(B,s=>m(re,s),()=>e(re));var it=l(B,2),Ye=r(it),Ze=r(Ye),Lt=r(Ze,!0);t(Ze);var dt=l(Ze,2),Dt=r(dt,!0);t(dt),t(Ye);var ct=l(Ye,2),vt=r(ct);{var Et=s=>{var i=Kr(),c=U(i),o=r(c),k=r(o,!0);t(o),t(c);var h=l(c,2);{var x=S=>{var A=qr(),fe=r(A),$e=r(fe,!0);t(fe),t(A),H(G=>g($e,G),[()=>(a(),n(()=>a().t("Export")))]),ge("click",A,async()=>{const G=await vr(localStorage.token).catch(ye=>(z.error(`${ye}`),null));if(G){let ye=new Blob([JSON.stringify(G)],{type:"application/json"});_e(ye,`functions-export-${Date.now()}.json`)}}),u(S,A)};de(h,S=>{e(E),n(()=>e(E).length)&&S(x)})}H(S=>g(k,S),[()=>(a(),n(()=>a().t("Import")))]),ge("click",c,()=>{e(re).click()}),u(s,i)};de(vt,s=>{p(),n(()=>{var i;return((i=p())==null?void 0:i.role)==="admin"})&&s(Et)})}var Nt=l(vt,2);Rr(Nt,{createHandler:()=>{Te("/admin/functions/create")},importFromLinkHandler:()=>{m(ae,!0)},children:(s,i)=>{var c=Xr(),o=r(c);Fr(o,{className:"size-3",strokeWidth:"2.5"});var k=l(o,2),h=r(k,!0);t(k),t(c),H(x=>g(h,x),[()=>(a(),n(()=>a().t("New Function")))]),u(s,c)},$$slots:{default:!0}}),t(ct),t(it),t(se),t(M);var Qe=l(M,2),et=r(Qe),ut=r(et),tt=r(ut),jt=r(tt);Hr(jt,{className:"size-3.5"}),t(tt);var Ue=l(tt,2);fr(Ue);var Bt=l(Ue,2);{var Ot=s=>{var i=Yr(),c=r(i),o=r(c);Ir(o,{className:"size-3",strokeWidth:"2"}),t(c),t(i),ge("click",c,()=>{m(D,"")}),u(s,i)};de(Bt,s=>{e(D)&&s(Ot)})}t(ut),t(et);var Ae=l(et,2),rt=r(Ae),mt=r(rt);Dr(mt,{onChange:async s=>{localStorage.workspaceViewOption=s,await at()},get value(){return e(y)},set value(s){m(y,s)},$$legacy:!0});var zt=l(mt,2);{let s=ie(()=>(a(),n(()=>[{value:"pipe",label:a().t("Pipe")},{value:"filter",label:a().t("Filter")},{value:"action",label:a().t("Action")}])));Er(zt,{get items(){return e(s)},get value(){return e(P)},set value(i){m(P,i)},$$legacy:!0})}t(rt),yt(rt,s=>m(we,s),()=>e(we)),t(Ae);var Ut=l(Ae,2);{var At=s=>{var i=na();ur(i,5,()=>e(q),c=>c.id,(c,o,k)=>{var h=sa(),x=r(h),S=r(x),A=r(S),fe=r(A);Se(fe,{get content(){return e(o),n(()=>e(o).id)},placement:"top-start",children:(T,K)=>{var V=Qr(),X=r(V),L=r(X,!0);t(X);var J=l(X,2),O=r(J,!0);t(J);var Y=l(J,2);{var ne=Z=>{var le=Zr(),Le=r(le);t(le),H(()=>g(Le,`v${e(o),n(()=>{var Ne,xt,ht;return((ht=(xt=(Ne=e(o))==null?void 0:Ne.meta)==null?void 0:xt.manifest)==null?void 0:ht.version)??""})??""}`)),u(Z,le)};de(Y,Z=>{e(o),n(()=>{var le,Le,Ne;return(Ne=(Le=(le=e(o))==null?void 0:le.meta)==null?void 0:Le.manifest)==null?void 0:Ne.version})&&Z(ne)})}t(V),H(()=>{g(L,(e(o),n(()=>e(o).type))),g(O,(e(o),n(()=>e(o).name)))}),u(T,V)},$$slots:{default:!0}});var $e=l(fe,2),G=r($e),ye=r(G);{let T=ie(()=>(e(o),a(),n(()=>{var K,V;return((V=(K=e(o))==null?void 0:K.user)==null?void 0:V.email)??a().t("Deleted User")})));Se(ye,{get content(){return e(T)},className:"flex shrink-0",placement:"top-start",children:(K,V)=>{st();var X=Qt();H(L=>g(X,L),[()=>(a(),kt(wt),e(o),n(()=>{var L,J,O,Y;return a().t("By {{name}}",{name:wt(((J=(L=e(o))==null?void 0:L.user)==null?void 0:J.name)??((Y=(O=e(o))==null?void 0:O.user)==null?void 0:Y.email)??a().t("Deleted User"))})}))]),u(K,X)},$$slots:{default:!0}})}t(G);var Ie=l(G,2),Ee=r(Ie,!0);t(Ie),t($e),t(A),t(S),t(x);var Me=l(x,2),Ge=r(Me);{var Jt=T=>{{let K=ie(()=>(a(),n(()=>a().t("Delete"))));Se(T,{get content(){return e(K)},children:(V,X)=>{var L=ea(),J=r(L);It(J,{}),t(L),ge("click",L,()=>{b(e(o))}),u(V,L)},$$slots:{default:!0}})}},Rt=T=>{var K=oa(),V=U(K);{var X=O=>{{let Y=ie(()=>(a(),n(()=>a().t("Support"))));Se(O,{get content(){return e(Y)},children:(ne,Z)=>{var le=ta(),Le=r(le);Cr(Le,{}),t(le),ge("click",le,()=>{m(I,e(o)),m(ue,!0)}),u(ne,le)},$$slots:{default:!0}})}};de(V,O=>{e(o),n(()=>{var Y,ne,Z;return((Z=(ne=(Y=e(o))==null?void 0:Y.meta)==null?void 0:ne.manifest)==null?void 0:Z.funding_url)??!1})&&O(X)})}var L=l(V,2);{let O=ie(()=>(a(),n(()=>a().t("Valves"))));Se(L,{get content(){return e(O)},children:(Y,ne)=>{var Z=ra();ge("click",Z,()=>{m(I,e(o)),m(me,!0)}),u(Y,Z)},$$slots:{default:!0}})}var J=l(L,2);Wr(J,{get func(){return e(o)},editHandler:()=>{Te(`/admin/functions/edit?id=${encodeURIComponent(e(o).id)}`)},shareHandler:()=>{De(e(o))},cloneHandler:()=>{N(e(o))},exportHandler:()=>{he(e(o))},deleteHandler:async()=>{m(I,e(o)),m(xe,!0)},toggleGlobalHandler:()=>{["filter","action"].includes(e(o).type)&&w(e(o))},onClose:()=>{},children:(O,Y)=>{var ne=aa(),Z=r(ne);br(Z,{className:"size-5"}),t(ne),u(O,ne)},$$slots:{default:!0}}),u(T,K)};de(Ge,T=>{e(be)?T(Jt):T(Rt,!1)})}var _t=l(Ge,2),qt=r(_t);{let T=ie(()=>(e(o),a(),n(()=>e(o).is_active?a().t("Enabled"):a().t("Disabled"))));Se(qt,{get content(){return e(T)},children:(K,V)=>{Mt(K,{get state(){return e(o).is_active},set state(X){e(o).is_active=X,er(()=>e(q))},$$events:{change:async X=>{var L,J,O;dr(localStorage.token,e(o).id),je.set(await Be(localStorage.token,((J=(L=W())==null?void 0:L.features)==null?void 0:J.enable_direct_connections)&&(((O=R())==null?void 0:O.directConnections)??null),!1,!0))}},$$legacy:!0})},$$slots:{default:!0}})}t(_t),t(Me),t(h),H(T=>{$t(x,"href",T),g(Ee,(e(o),n(()=>e(o).meta.description)))},[()=>(e(o),n(()=>`/admin/functions/edit?id=${encodeURIComponent(e(o).id)}`))]),u(c,h)}),t(i),u(s,i)},Gt=s=>{var i=la(),c=r(i),o=l(r(c),2),k=r(o,!0);t(o);var h=l(o,2),x=r(h,!0);t(h),t(c),t(i),H((S,A)=>{g(k,S),g(x,A)},[()=>(a(),n(()=>a().t("No functions found"))),()=>(a(),n(()=>a().t("Try adjusting your search or filter to find what you are looking for.")))]),u(s,i)};de(Ut,s=>{e(q),n(()=>(e(q)??[]).length!==0)?s(At):s(Gt,!1)})}t(Qe);var Tt=l(Qe,2);{var Wt=s=>{var i=ia(),c=r(i),o=r(c,!0);t(c);var k=l(c,2),h=r(k),x=r(h),S=r(x,!0);t(x);var A=l(x,2),fe=r(A,!0);t(A),t(h);var $e=l(h,2),G=r($e),ye=r(G);Pr(ye,{}),t(G),t($e),t(k),t(i),H((Ie,Ee,Me)=>{g(o,Ie),g(S,Ee),g(fe,Me)},[()=>(a(),n(()=>a().t("Made by Open WebUI Community"))),()=>(a(),n(()=>a().t("Discover a function"))),()=>(a(),n(()=>a().t("Discover, download, and explore custom functions")))]),u(s,i)};de(Tt,s=>{W(),n(()=>{var i;return(i=W())==null?void 0:i.features.enable_community_sharing})&&s(Wt)})}t(_);var ft=l(_,2);{let s=ie(()=>(a(),n(()=>a().t("Delete function?"))));bt(ft,{get title(){return e(s)},get show(){return e(xe)},set show(i){m(xe,i)},$$events:{confirm:()=>{b(e(I))}},children:(i,c)=>{var o=da(),k=r(o),h=l(k),x=r(h,!0);t(h),st(),t(o),H(S=>{g(k,`${S??""} `),g(x,(e(I),n(()=>e(I).name)))},[()=>(a(),n(()=>a().t("This will delete")))]),u(i,o)},$$slots:{default:!0},$$legacy:!0})}var gt=l(ft,2);{let s=ie(()=>(e(I),n(()=>{var i,c;return((c=(i=e(I))==null?void 0:i.meta)==null?void 0:c.manifest)??{}})));Sr(gt,{get manifest(){return e(s)},get show(){return e(ue)},set show(i){m(ue,i)},$$legacy:!0})}var pt=l(gt,2);{let s=ie(()=>(e(I),n(()=>{var i;return((i=e(I))==null?void 0:i.id)??null})));wr(pt,{type:"function",get id(){return e(s)},get show(){return e(me)},set show(i){m(me,i)},$$events:{save:async()=>{var i,c,o;await at(),je.set(await Be(localStorage.token,((c=(i=W())==null?void 0:i.features)==null?void 0:c.enable_direct_connections)&&(((o=R())==null?void 0:o.directConnections)??null),!1,!0))}},$$legacy:!0})}var Vt=l(pt,2);bt(Vt,{get show(){return e(ke)},set show(s){m(ke,s)},$$events:{confirm:()=>{const s=new FileReader;s.onload=async i=>{var o,k,h;const c=JSON.parse(i.target.result);for(let x of c)"function"in x&&(x=x.function),await lr(localStorage.token,x).catch(S=>(z.error(`${S}`),null));z.success(a().t("Functions imported successfully")),e(E).set(await We(localStorage.token)),je.set(await Be(localStorage.token,((k=(o=W())==null?void 0:o.features)==null?void 0:k.enable_direct_connections)&&(((h=R())==null?void 0:h.directConnections)??null),!1,!0))},s.readAsText(e(ve)[0])}},children:(s,i)=>{var c=ca(),o=r(c),k=r(o),h=r(k,!0);t(k);var x=l(k,2),S=r(x),A=r(S,!0);t(S);var fe=l(S,2),$e=r(fe,!0);t(fe),t(x),t(o);var G=l(o,2),ye=r(G,!0);t(G),t(c),H((Ie,Ee,Me,Ge)=>{g(h,Ie),g(A,Ee),g($e,Me),g(ye,Ge)},[()=>(a(),n(()=>a().t("Please carefully review the following warnings:"))),()=>(a(),n(()=>a().t("Functions allow arbitrary code execution."))),()=>(a(),n(()=>a().t("Do not install functions from sources you do not fully trust."))),()=>(a(),n(()=>a().t("I acknowledge that I have read and I understand the implications of my action. I am aware of the risks associated with executing arbitrary code and I have verified the trustworthiness of the source.")))]),u(s,c)},$$slots:{default:!0},$$legacy:!0}),H((s,i)=>{g(Lt,s),g(Dt,(e(q),n(()=>e(q).length))),$t(Ue,"placeholder",i)},[()=>(a(),n(()=>a().t("Functions"))),()=>(a(),n(()=>a().t("Search Functions")))]),gr(B,()=>e(ve),s=>m(ve,s)),ge("change",B,()=>{e(ve),m(ke,!0)}),pr(Ue,()=>e(D),s=>m(D,s)),ge("wheel",Ae,s=>{s.deltaY!==0&&(s.preventDefault(),s.currentTarget.scrollLeft+=s.deltaY)}),u(d,v)},Xe=d=>{var v=ua(),_=r(v);Nr(_,{className:"size-5"}),t(v),u(d,v)};de(oe,d=>{e(Fe)?d(ze):d(Xe,!1)})}u(He,C),Re(),pe()}function no(He,$){Je($,!1);const p=()=>Ce(Ve,"$functions",a),[a,W]=Ke();St(async()=>{await Promise.all([(async()=>{Ve.set(await We(localStorage.token))})()])}),qe();var R=lt(),Q=U(R);{var ee=pe=>{fa(pe,{})};de(Q,pe=>{p()!==null&&pe(ee)})}u(He,R),Re(),W()}export{no as component};
//# sourceMappingURL=14.BmjQMPMu.js.map
