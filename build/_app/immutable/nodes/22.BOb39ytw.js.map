{"version":3,"file":"22.BOb39ytw.js","sources":["../../../../../../src/lib/components/icons/ArrowUpLeftAlt.svelte","../../../../../../src/lib/components/channel/Messages/Message.svelte","../../../../../../src/lib/components/channel/Messages.svelte","../../../../../../src/lib/components/icons/UserAlt.svelte","../../../../../../src/lib/components/channel/ChannelInfoModal/UserList.svelte","../../../../../../src/lib/components/channel/ChannelInfoModal/AddMembersModal.svelte","../../../../../../src/lib/components/channel/ChannelInfoModal.svelte","../../../../../../src/lib/components/channel/PinnedMessagesModal.svelte","../../../../../../src/lib/components/channel/Navbar.svelte","../../../../../../src/lib/components/channel/Thread.svelte","../../../../../../src/lib/components/channel/Channel.svelte","../../../../../../src/routes/(app)/channels/[id]/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n\texport let className = 'w-4 h-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\tclass={className}\n\taria-hidden=\"true\"\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tstroke-width={strokeWidth}\n\tfill=\"none\"\n\tstroke=\"currentColor\"\n\tviewBox=\"0 0 24 24\"\n\t><path d=\"M10.25 4.75L6.75 8.25L10.25 11.75\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\n\t></path><path\n\t\td=\"M6.75 8.25L12.75 8.25C14.9591 8.25 16.75 10.0409 16.75 12.25V19.25\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t></path></svg\n>\n","<script lang=\"ts\">\n\timport dayjs from 'dayjs';\n\timport relativeTime from 'dayjs/plugin/relativeTime';\n\timport isToday from 'dayjs/plugin/isToday';\n\timport isYesterday from 'dayjs/plugin/isYesterday';\n\timport localizedFormat from 'dayjs/plugin/localizedFormat';\n\n\tdayjs.extend(relativeTime);\n\tdayjs.extend(isToday);\n\tdayjs.extend(isYesterday);\n\tdayjs.extend(localizedFormat);\n\n\timport { getContext, onMount } from 'svelte';\n\tconst i18n = getContext<Writable<i18nType>>('i18n');\n\n\timport { formatDate } from '$lib/utils';\n\n\timport { settings, user, shortCodesToEmojis } from '$lib/stores';\n\timport { WEBUI_API_BASE_URL, WEBUI_BASE_URL } from '$lib/constants';\n\timport { getMessageData } from '$lib/apis/channels';\n\n\timport Markdown from '$lib/components/chat/Messages/Markdown.svelte';\n\timport ProfileImage from '$lib/components/chat/Messages/ProfileImage.svelte';\n\timport Name from '$lib/components/chat/Messages/Name.svelte';\n\timport ConfirmDialog from '$lib/components/common/ConfirmDialog.svelte';\n\timport GarbageBin from '$lib/components/icons/GarbageBin.svelte';\n\timport Pencil from '$lib/components/icons/Pencil.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport Textarea from '$lib/components/common/Textarea.svelte';\n\timport Image from '$lib/components/common/Image.svelte';\n\timport FileItem from '$lib/components/common/FileItem.svelte';\n\timport ProfilePreview from './Message/ProfilePreview.svelte';\n\timport ChatBubbleOvalEllipsis from '$lib/components/icons/ChatBubble.svelte';\n\timport FaceSmile from '$lib/components/icons/FaceSmile.svelte';\n\timport EmojiPicker from '$lib/components/common/EmojiPicker.svelte';\n\timport ChevronRight from '$lib/components/icons/ChevronRight.svelte';\n\timport Emoji from '$lib/components/common/Emoji.svelte';\n\timport Skeleton from '$lib/components/chat/Messages/Skeleton.svelte';\n\timport ArrowUpLeftAlt from '$lib/components/icons/ArrowUpLeftAlt.svelte';\n\timport PinSlash from '$lib/components/icons/PinSlash.svelte';\n\timport Pin from '$lib/components/icons/Pin.svelte';\n\n\texport let className = '';\n\n\texport let message;\n\texport let channel;\n\n\texport let showUserProfile = true;\n\texport let thread = false;\n\n\texport let replyToMessage = false;\n\texport let disabled = false;\n\texport let pending = false;\n\n\texport let onDelete: Function = () => {};\n\texport let onEdit: Function = () => {};\n\texport let onReply: Function = () => {};\n\texport let onPin: Function = () => {};\n\texport let onThread: Function = () => {};\n\texport let onReaction: Function = () => {};\n\n\tlet showButtons = false;\n\n\tlet edit = false;\n\tlet editedContent = null;\n\tlet showDeleteConfirmDialog = false;\n\n\tconst loadMessageData = async () => {\n\t\tif (message && message?.data) {\n\t\t\tconst res = await getMessageData(localStorage.token, channel?.id, message.id);\n\t\t\tif (res) {\n\t\t\t\tmessage.data = res;\n\t\t\t}\n\t\t}\n\t};\n\n\tonMount(async () => {\n\t\tif (message && message?.data) {\n\t\t\tawait loadMessageData();\n\t\t}\n\t});\n</script>\n\n<ConfirmDialog\n\tbind:show={showDeleteConfirmDialog}\n\ttitle={$i18n.t('Delete Message')}\n\tmessage={$i18n.t('Are you sure you want to delete this message?')}\n\tonConfirm={async () => {\n\t\tawait onDelete();\n\t}}\n/>\n\n{#if message}\n\t<div\n\t\tid=\"message-{message.id}\"\n\t\tclass=\"flex flex-col justify-between w-full max-w-full mx-auto group hover:bg-gray-300/5 dark:hover:bg-gray-700/5 transition relative {className\n\t\t\t? className\n\t\t\t: `px-5 ${\n\t\t\t\t\treplyToMessage ? 'border-l-4 border-blue-500 bg-blue-100/10 dark:bg-blue-100/5 pl-4' : ''\n\t\t\t\t} ${\n\t\t\t\t\t(message?.reply_to_message?.meta?.model_id ?? message?.reply_to_message?.user_id) ===\n\t\t\t\t\t$user?.id\n\t\t\t\t\t\t? 'border-l-4 border-orange-500 bg-orange-100/10 dark:bg-orange-100/5 pl-4'\n\t\t\t\t\t\t: ''\n\t\t\t\t} ${message?.is_pinned ? 'bg-yellow-100/20 dark:bg-yellow-100/5' : ''}`} {showUserProfile\n\t\t\t? 'pt-1.5 pb-0.5'\n\t\t\t: ''}\"\n\t>\n\t\t{#if !edit && !disabled}\n\t\t\t<div\n\t\t\t\tclass=\" absolute {showButtons ? '' : 'invisible group-hover:visible'} right-1 -top-2 z-10\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"flex gap-1 rounded-lg bg-white dark:bg-gray-850 shadow-md p-0.5 border border-gray-100/30 dark:border-gray-850/30\"\n\t\t\t\t>\n\t\t\t\t\t{#if onReaction}\n\t\t\t\t\t\t<EmojiPicker\n\t\t\t\t\t\t\tonClose={() => (showButtons = false)}\n\t\t\t\t\t\t\tonSubmit={(name) => {\n\t\t\t\t\t\t\t\tshowButtons = false;\n\t\t\t\t\t\t\t\tonReaction(name);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Add Reaction')}>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"hover:bg-gray-100 dark:hover:bg-gray-800 transition rounded-lg p-1\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tshowButtons = true;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FaceSmile />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</EmojiPicker>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if onReply}\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Reply')}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"hover:bg-gray-100 dark:hover:bg-gray-800 transition rounded-lg p-0.5\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tonReply(message);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ArrowUpLeftAlt className=\"size-5\" />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t<Tooltip content={message?.is_pinned ? $i18n.t('Unpin') : $i18n.t('Pin')}>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"hover:bg-gray-100 dark:hover:bg-gray-800 transition rounded-lg p-1\"\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tonPin(message);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{#if message?.is_pinned}\n\t\t\t\t\t\t\t\t<PinSlash className=\"size-4\" />\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<Pin className=\"size-4\" />\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t{#if !thread && onThread}\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Reply in Thread')}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"hover:bg-gray-100 dark:hover:bg-gray-800 transition rounded-lg p-1\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tonThread(message.id);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ChatBubbleOvalEllipsis />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if message.user_id === $user?.id || $user?.role === 'admin'}\n\t\t\t\t\t\t{#if onEdit}\n\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Edit')}>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"hover:bg-gray-100 dark:hover:bg-gray-800 transition rounded-lg p-1\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tedit = true;\n\t\t\t\t\t\t\t\t\t\teditedContent = message.content;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Pencil />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{#if onDelete}\n\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Delete')}>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"hover:bg-gray-100 dark:hover:bg-gray-800 transition rounded-lg p-1\"\n\t\t\t\t\t\t\t\t\ton:click={() => (showDeleteConfirmDialog = true)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<GarbageBin />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t{#if message?.is_pinned}\n\t\t\t<div class=\"flex {showUserProfile ? 'mb-0.5' : 'mt-0.5'}\">\n\t\t\t\t<div class=\"ml-8.5 flex items-center gap-1 px-1 rounded-full text-xs\">\n\t\t\t\t\t<Pin className=\"size-3 text-yellow-500 dark:text-yellow-300\" />\n\t\t\t\t\t<span class=\"text-gray-500\">{$i18n.t('Pinned')}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t{#if message?.reply_to_message?.user}\n\t\t\t<div class=\"relative text-xs mb-1\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"absolute h-3 w-7 left-[18px] top-2 rounded-tl-lg border-t-[1.5px] border-l-[1.5px] border-gray-200 dark:border-gray-700 z-0\"\n\t\t\t\t></div>\n\n\t\t\t\t<button\n\t\t\t\t\tclass=\"ml-12 flex items-center space-x-2 relative z-0\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tconst messageElement = document.getElementById(\n\t\t\t\t\t\t\t`message-${message.reply_to_message.id}`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (messageElement) {\n\t\t\t\t\t\t\tmessageElement.scrollIntoView({ behavior: 'smooth', block: 'center' });\n\t\t\t\t\t\t\tmessageElement.classList.add('highlight');\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tmessageElement.classList.remove('highlight');\n\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{#if message?.reply_to_message?.meta?.model_id}\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={`${WEBUI_API_BASE_URL}/models/model/profile/image?id=${message.reply_to_message.meta.model_id}`}\n\t\t\t\t\t\t\talt={message.reply_to_message.meta.model_name ??\n\t\t\t\t\t\t\t\tmessage.reply_to_message.meta.model_id}\n\t\t\t\t\t\t\tclass=\"size-4 ml-0.5 rounded-full object-cover\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={message.reply_to_message.user?.role === 'webhook'\n\t\t\t\t\t\t\t\t? `${WEBUI_API_BASE_URL}/channels/webhooks/${message.reply_to_message.user?.id}/profile/image`\n\t\t\t\t\t\t\t\t: `${WEBUI_API_BASE_URL}/users/${message.reply_to_message.user?.id}/profile/image`}\n\t\t\t\t\t\t\talt={message.reply_to_message.user?.name ?? $i18n.t('Unknown User')}\n\t\t\t\t\t\t\tclass=\"size-4 ml-0.5 rounded-full object-cover\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t<div class=\"shrink-0\">\n\t\t\t\t\t\t{message?.reply_to_message.meta?.model_name ??\n\t\t\t\t\t\t\tmessage?.reply_to_message.user?.name ??\n\t\t\t\t\t\t\t$i18n.t('Unknown User')}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"italic text-sm text-gray-500 dark:text-gray-400 line-clamp-1 w-full flex-1\">\n\t\t\t\t\t\t<Markdown id={`${message.id}-reply-to`} content={message?.reply_to_message?.content} />\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<div\n\t\t\tclass=\" flex w-full message-{message.id} \"\n\t\t\tid=\"message-{message.id}\"\n\t\t\tdir={$settings.chatDirection}\n\t\t>\n\t\t\t<div class={`shrink-0 mr-1 w-9`}>\n\t\t\t\t{#if showUserProfile}\n\t\t\t\t\t{#if message?.meta?.model_id}\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={`${WEBUI_API_BASE_URL}/models/model/profile/image?id=${message.meta.model_id}`}\n\t\t\t\t\t\t\talt={message.meta.model_name ?? message.meta.model_id}\n\t\t\t\t\t\t\tclass=\"size-8 translate-y-1 ml-0.5 object-cover rounded-full\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<ProfilePreview user={message.user}>\n\t\t\t\t\t\t\t<ProfileImage\n\t\t\t\t\t\t\t\tsrc={message.user?.role === 'webhook'\n\t\t\t\t\t\t\t\t\t? `${WEBUI_API_BASE_URL}/channels/webhooks/${message.user?.id}/profile/image`\n\t\t\t\t\t\t\t\t\t: `${WEBUI_API_BASE_URL}/users/${message.user?.id}/profile/image`}\n\t\t\t\t\t\t\t\tclassName={'size-8 ml-0.5'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ProfilePreview>\n\t\t\t\t\t{/if}\n\t\t\t\t{:else}\n\t\t\t\t\t<!-- <div class=\"w-7 h-7 rounded-full bg-transparent\" /> -->\n\n\t\t\t\t\t{#if message.created_at}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"mt-1.5 flex shrink-0 items-center text-xs self-center invisible group-hover:visible text-gray-500 font-medium first-letter:capitalize\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Tooltip content={dayjs(message.created_at / 1000000).format('LLLL')}>\n\t\t\t\t\t\t\t\t{dayjs(message.created_at / 1000000).format('HH:mm')}\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"flex-auto w-0 pl-2\">\n\t\t\t\t{#if showUserProfile}\n\t\t\t\t\t<Name>\n\t\t\t\t\t\t<div class=\" self-end text-base shrink-0 font-medium truncate\">\n\t\t\t\t\t\t\t{#if message?.meta?.model_id}\n\t\t\t\t\t\t\t\t{message?.meta?.model_name ?? message?.meta?.model_id}\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t{message?.user?.name}\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{#if message.created_at}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\" self-center text-xs text-gray-400 font-medium first-letter:capitalize ml-0.5 translate-y-[1px]\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Tooltip content={dayjs(message.created_at / 1000000).format('LLLL')}>\n\t\t\t\t\t\t\t\t\t<span class=\"line-clamp-1\">\n\t\t\t\t\t\t\t\t\t\t{#if dayjs(message.created_at / 1000000).isToday()}\n\t\t\t\t\t\t\t\t\t\t\t{dayjs(message.created_at / 1000000).format('LT')}\n\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t{$i18n.t(formatDate(message.created_at / 1000000), {\n\t\t\t\t\t\t\t\t\t\t\t\tLOCALIZED_TIME: dayjs(message.created_at / 1000000).format('LT'),\n\t\t\t\t\t\t\t\t\t\t\t\tLOCALIZED_DATE: dayjs(message.created_at / 1000000).format('L')\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</Name>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if message?.data === true}\n\t\t\t\t\t<!-- loading indicator -->\n\t\t\t\t\t<div class=\" my-2\">\n\t\t\t\t\t\t<Skeleton />\n\t\t\t\t\t</div>\n\t\t\t\t{:else if (message?.data?.files ?? []).length > 0}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"my-2.5 w-full flex overflow-x-auto gap-2 flex-wrap\"\n\t\t\t\t\t\tdir={$settings?.chatDirection ?? 'auto'}\n\t\t\t\t\t>\n\t\t\t\t\t\t{#each message?.data?.files as file}\n\t\t\t\t\t\t\t{@const fileUrl =\n\t\t\t\t\t\t\t\tfile.url.startsWith('data') || file.url.startsWith('http')\n\t\t\t\t\t\t\t\t\t? file.url\n\t\t\t\t\t\t\t\t\t: `${WEBUI_API_BASE_URL}/files/${file.url}${file?.content_type ? '/content' : ''}`}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{#if file.type === 'image' || (file?.content_type ?? '').startsWith('image/')}\n\t\t\t\t\t\t\t\t\t<Image src={fileUrl} alt={file.name} imageClassName=\" max-h-96 rounded-lg\" />\n\t\t\t\t\t\t\t\t{:else if file.type === 'video' || (file?.content_type ?? '').startsWith('video/')}\n\t\t\t\t\t\t\t\t\t<video src={fileUrl} controls class=\" max-h-96 rounded-lg\"></video>\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<FileItem\n\t\t\t\t\t\t\t\t\t\titem={file}\n\t\t\t\t\t\t\t\t\t\turl={file.url}\n\t\t\t\t\t\t\t\t\t\tname={file.name}\n\t\t\t\t\t\t\t\t\t\ttype={file.type}\n\t\t\t\t\t\t\t\t\t\tsize={file?.size}\n\t\t\t\t\t\t\t\t\t\tsmall={true}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if edit}\n\t\t\t\t\t<div class=\"py-2\">\n\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\tclassName=\" bg-transparent outline-hidden w-full resize-none\"\n\t\t\t\t\t\t\tbind:value={editedContent}\n\t\t\t\t\t\t\tonKeydown={(e) => {\n\t\t\t\t\t\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\t\t\t\t\tdocument.getElementById('close-edit-message-button')?.click();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst isCmdOrCtrlPressed = e.metaKey || e.ctrlKey;\n\t\t\t\t\t\t\t\tconst isEnterPressed = e.key === 'Enter';\n\n\t\t\t\t\t\t\t\tif (isCmdOrCtrlPressed && isEnterPressed) {\n\t\t\t\t\t\t\t\t\tdocument.getElementById('confirm-edit-message-button')?.click();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class=\" mt-2 mb-1 flex justify-end text-sm font-medium\">\n\t\t\t\t\t\t\t<div class=\"flex space-x-1.5\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tid=\"close-edit-message-button\"\n\t\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 bg-white dark:bg-gray-900 hover:bg-gray-100 text-gray-800 dark:text-gray-100 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tedit = false;\n\t\t\t\t\t\t\t\t\t\teditedContent = null;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{$i18n.t('Cancel')}\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tid=\"confirm-edit-message-button\"\n\t\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 bg-gray-900 dark:bg-white hover:bg-gray-850 text-gray-100 dark:text-gray-800 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\t\tonEdit(editedContent);\n\t\t\t\t\t\t\t\t\t\tedit = false;\n\t\t\t\t\t\t\t\t\t\teditedContent = null;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{$i18n.t('Save')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{:else}\n\t\t\t\t\t<div class=\" min-w-full markdown-prose {pending ? 'opacity-50' : ''}\">\n\t\t\t\t\t\t{#if (message?.content ?? '').trim() === '' && message?.meta?.model_id}\n\t\t\t\t\t\t\t<Skeleton />\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<Markdown\n\t\t\t\t\t\t\t\tid={message.id}\n\t\t\t\t\t\t\t\tcontent={message.content}\n\t\t\t\t\t\t\t\tparagraphTag=\"span\"\n\t\t\t\t\t\t\t/>{#if message.created_at !== message.updated_at && (message?.meta?.model_id ?? null) === null}<span\n\t\t\t\t\t\t\t\t\tclass=\"text-gray-500 text-[10px] pl-1 self-center\">({$i18n.t('edited')})</span\n\t\t\t\t\t\t\t\t>{/if}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if (message?.reactions ?? []).length > 0}\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"flex items-center flex-wrap gap-y-1.5 gap-1 mt-1 mb-2\">\n\t\t\t\t\t\t\t\t{#each message.reactions as reaction}\n\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\tcontent={$i18n.t('{{NAMES}} reacted with {{REACTION}}', {\n\t\t\t\t\t\t\t\t\t\t\tNAMES: reaction.users\n\t\t\t\t\t\t\t\t\t\t\t\t.reduce((acc, u, idx) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst name = u.id === $user?.id ? $i18n.t('You') : u.name;\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst total = reaction.users.length;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t// First three names always added normally\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (idx < 3) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst separator =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tidx === 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: idx === Math.min(2, total - 1)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? ` ${$i18n.t('and')} `\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ', ';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn `${acc}${separator}${name}`;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t// More than 4 â†’ \"and X others\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (idx === 3 && total > 4) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tacc +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t` ${$i18n.t('and {{COUNT}} others', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCOUNT: total - 3\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn acc;\n\t\t\t\t\t\t\t\t\t\t\t\t}, '')\n\t\t\t\t\t\t\t\t\t\t\t\t.trim(),\n\t\t\t\t\t\t\t\t\t\t\tREACTION: `:${reaction.name}:`\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flex items-center gap-1.5 transition rounded-xl px-2 py-1 cursor-pointer {reaction.users\n\t\t\t\t\t\t\t\t\t\t\t\t.map((u) => u.id)\n\t\t\t\t\t\t\t\t\t\t\t\t.includes($user?.id)\n\t\t\t\t\t\t\t\t\t\t\t\t? ' bg-blue-300/10 outline outline-blue-500/50 outline-1'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'bg-gray-300/10 dark:bg-gray-500/10 hover:outline hover:outline-gray-700/30 dark:hover:outline-gray-300/30 hover:outline-1'}\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (onReaction) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tonReaction(reaction.name);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Emoji shortCode={reaction.name} />\n\n\t\t\t\t\t\t\t\t\t\t\t{#if reaction.users.length > 0}\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"text-xs font-medium text-gray-500 dark:text-gray-400\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{reaction.users?.length}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{/each}\n\n\t\t\t\t\t\t\t\t{#if onReaction}\n\t\t\t\t\t\t\t\t\t<EmojiPicker\n\t\t\t\t\t\t\t\t\t\tonSubmit={(name) => {\n\t\t\t\t\t\t\t\t\t\t\tonReaction(name);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Add Reaction')}>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flex items-center gap-1.5 bg-gray-500/10 hover:outline hover:outline-gray-700/30 dark:hover:outline-gray-300/30 hover:outline-1 transition rounded-xl px-1 py-1 cursor-pointer text-gray-500 dark:text-gray-400\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<FaceSmile />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</EmojiPicker>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if !thread && message.reply_count > 0}\n\t\t\t\t\t\t<div class=\"flex items-center gap-1.5 -mt-0.5 mb-1.5\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"flex items-center text-xs py-1 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tonThread(message.id);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"font-medium mr-1\">\n\t\t\t\t\t\t\t\t\t{$i18n.t('{{COUNT}} Replies', { COUNT: message.reply_count })}</span\n\t\t\t\t\t\t\t\t><span>\n\t\t\t\t\t\t\t\t\t{' - '}{$i18n.t('Last reply')}\n\t\t\t\t\t\t\t\t\t{dayjs.unix(message.latest_reply_at / 1000000000).fromNow()}</span\n\t\t\t\t\t\t\t\t>\n\n\t\t\t\t\t\t\t\t<span class=\"ml-1\">\n\t\t\t\t\t\t\t\t\t<ChevronRight className=\"size-2.5\" strokeWidth=\"3\" />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<!-- {$i18n.t('View Replies')} -->\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/if}\n\n<style>\n\t.highlight {\n\t\tanimation: highlightAnimation 2s ease-in-out;\n\t}\n\n\t@keyframes highlightAnimation {\n\t\t0% {\n\t\t\tbackground-color: rgba(0, 60, 255, 0.1);\n\t\t}\n\t\t100% {\n\t\t\tbackground-color: transparent;\n\t\t}\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\n\timport dayjs from 'dayjs';\n\timport relativeTime from 'dayjs/plugin/relativeTime';\n\timport isToday from 'dayjs/plugin/isToday';\n\timport isYesterday from 'dayjs/plugin/isYesterday';\n\n\tdayjs.extend(relativeTime);\n\tdayjs.extend(isToday);\n\tdayjs.extend(isYesterday);\n\timport { tick, getContext, onMount, createEventDispatcher } from 'svelte';\n\n\timport { settings, user } from '$lib/stores';\n\n\timport Message from './Messages/Message.svelte';\n\timport Loader from '../common/Loader.svelte';\n\timport Spinner from '../common/Spinner.svelte';\n\timport {\n\t\taddReaction,\n\t\tdeleteMessage,\n\t\tpinMessage,\n\t\tremoveReaction,\n\t\tupdateMessage\n\t} from '$lib/apis/channels';\n\timport { WEBUI_API_BASE_URL } from '$lib/constants';\n\n\tconst i18n = getContext('i18n');\n\n\texport let id = null;\n\texport let channel = null;\n\texport let messages = [];\n\texport let replyToMessage = null;\n\texport let top = false;\n\texport let thread = false;\n\n\texport let onLoad: Function = () => {};\n\texport let onReply: Function = () => {};\n\texport let onThread: Function = () => {};\n\n\tlet messagesLoading = false;\n\n\tconst loadMoreMessages = async () => {\n\t\t// scroll slightly down to disable continuous loading\n\t\tconst element = document.getElementById('messages-container');\n\t\telement.scrollTop = element.scrollTop + 100;\n\n\t\tmessagesLoading = true;\n\n\t\tawait onLoad();\n\n\t\tawait tick();\n\t\tmessagesLoading = false;\n\t};\n</script>\n\n{#if messages}\n\t{@const messageList = messages.slice().reverse()}\n\t<div>\n\t\t{#if !top}\n\t\t\t<Loader\n\t\t\t\ton:visible={(e) => {\n\t\t\t\t\tconsole.info('visible');\n\t\t\t\t\tif (!messagesLoading) {\n\t\t\t\t\t\tloadMoreMessages();\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div class=\"w-full flex justify-center py-1 text-xs animate-pulse items-center gap-2\">\n\t\t\t\t\t<Spinner className=\" size-4\" />\n\t\t\t\t\t<div class=\" \">{$i18n.t('Loading...')}</div>\n\t\t\t\t</div>\n\t\t\t</Loader>\n\t\t{:else if !thread}\n\t\t\t<div class=\"px-5 max-w-full mx-auto\">\n\t\t\t\t{#if channel}\n\t\t\t\t\t<div class=\"flex flex-col gap-1.5 pb-5 pt-10\">\n\t\t\t\t\t\t{#if channel?.type === 'dm'}\n\t\t\t\t\t\t\t<div class=\"flex ml-[1px] mr-0.5\">\n\t\t\t\t\t\t\t\t{#each channel.users.filter((u) => u.id !== $user?.id).slice(0, 2) as u, index}\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={`${WEBUI_API_BASE_URL}/users/${u.id}/profile/image`}\n\t\t\t\t\t\t\t\t\t\talt={u.name}\n\t\t\t\t\t\t\t\t\t\tclass=\" size-7.5 rounded-full border-2 border-white dark:border-gray-900 {index ===\n\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\t? '-ml-2.5'\n\t\t\t\t\t\t\t\t\t\t\t: ''}\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t<div class=\"text-2xl font-medium capitalize\">\n\t\t\t\t\t\t\t{#if channel?.name}\n\t\t\t\t\t\t\t\t{channel.name}\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t{channel?.users\n\t\t\t\t\t\t\t\t\t?.filter((u) => u.id !== $user?.id)\n\t\t\t\t\t\t\t\t\t.map((u) => u.name)\n\t\t\t\t\t\t\t\t\t.join(', ')}\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\" text-gray-500\">\n\t\t\t\t\t\t\t{$i18n.t(\n\t\t\t\t\t\t\t\t'This channel was created on {{createdAt}}. This is the very beginning of the {{channelName}} channel.',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcreatedAt: dayjs(channel.created_at / 1000000).format('MMMM D, YYYY'),\n\t\t\t\t\t\t\t\t\tchannelName: channel.name\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{:else}\n\t\t\t\t\t<div class=\"flex justify-center text-xs items-center gap-2 py-5\">\n\t\t\t\t\t\t<div class=\" \">{$i18n.t('Start of the channel')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if messageList.length > 0}\n\t\t\t\t\t<hr class=\" border-gray-50 dark:border-gray-700/20 py-2.5 w-full\" />\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{/if}\n\n\t\t{#each messageList as message, messageIdx (id ? `${id}-${message.id}` : message.id)}\n\t\t\t<Message\n\t\t\t\t{message}\n\t\t\t\t{channel}\n\t\t\t\t{thread}\n\t\t\t\treplyToMessage={replyToMessage?.id === message.id}\n\t\t\t\tdisabled={!channel?.write_access || message?.temp_id}\n\t\t\t\tpending={!!message?.temp_id}\n\t\t\t\tshowUserProfile={messageIdx === 0 ||\n\t\t\t\t\tmessageList.at(messageIdx - 1)?.user_id !== message.user_id ||\n\t\t\t\t\tmessageList.at(messageIdx - 1)?.user?.id !== message.user?.id ||\n\t\t\t\t\tmessageList.at(messageIdx - 1)?.meta?.model_id !== message?.meta?.model_id ||\n\t\t\t\t\tmessage?.reply_to_message !== null}\n\t\t\t\tonDelete={() => {\n\t\t\t\t\tmessages = messages.filter((m) => m.id !== message.id);\n\n\t\t\t\t\tconst res = deleteMessage(localStorage.token, message.channel_id, message.id).catch(\n\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t\tonEdit={(content) => {\n\t\t\t\t\tmessages = messages.map((m) => {\n\t\t\t\t\t\tif (m.id === message.id) {\n\t\t\t\t\t\t\tm.content = content;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn m;\n\t\t\t\t\t});\n\n\t\t\t\t\tconst res = updateMessage(localStorage.token, message.channel_id, message.id, {\n\t\t\t\t\t\tcontent: content\n\t\t\t\t\t}).catch((error) => {\n\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tonReply={(message) => {\n\t\t\t\t\tonReply(message);\n\t\t\t\t}}\n\t\t\t\tonPin={async (message) => {\n\t\t\t\t\tmessages = messages.map((m) => {\n\t\t\t\t\t\tif (m.id === message.id) {\n\t\t\t\t\t\t\tm.is_pinned = !m.is_pinned;\n\t\t\t\t\t\t\tm.pinned_by = !m.is_pinned ? null : $user?.id;\n\t\t\t\t\t\t\tm.pinned_at = !m.is_pinned ? null : Date.now() * 1000000;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn m;\n\t\t\t\t\t});\n\n\t\t\t\t\tconst updatedMessage = await pinMessage(\n\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\tmessage.channel_id,\n\t\t\t\t\t\tmessage.id,\n\t\t\t\t\t\tmessage.is_pinned\n\t\t\t\t\t).catch((error) => {\n\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tonThread={(id) => {\n\t\t\t\t\tonThread(id);\n\t\t\t\t}}\n\t\t\t\tonReaction={(name) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t(message?.reactions ?? [])\n\t\t\t\t\t\t\t.find((reaction) => reaction.name === name)\n\t\t\t\t\t\t\t?.users?.some((u) => u.id === $user?.id) ??\n\t\t\t\t\t\tfalse\n\t\t\t\t\t) {\n\t\t\t\t\t\tmessages = messages.map((m) => {\n\t\t\t\t\t\t\tif (m.id === message.id) {\n\t\t\t\t\t\t\t\tconst reaction = m.reactions.find((reaction) => reaction.name === name);\n\n\t\t\t\t\t\t\t\tif (reaction) {\n\t\t\t\t\t\t\t\t\treaction.users = reaction.users.filter((u) => u.id !== $user?.id);\n\t\t\t\t\t\t\t\t\treaction.count = reaction.users.length;\n\n\t\t\t\t\t\t\t\t\tif (reaction.count === 0) {\n\t\t\t\t\t\t\t\t\t\tm.reactions = m.reactions.filter((r) => r.name !== name);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn m;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst res = removeReaction(\n\t\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\t\tmessage.channel_id,\n\t\t\t\t\t\t\tmessage.id,\n\t\t\t\t\t\t\tname\n\t\t\t\t\t\t).catch((error) => {\n\t\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmessages = messages.map((m) => {\n\t\t\t\t\t\t\tif (m.id === message.id) {\n\t\t\t\t\t\t\t\tif (m.reactions) {\n\t\t\t\t\t\t\t\t\tconst reaction = m.reactions.find((reaction) => reaction.name === name);\n\n\t\t\t\t\t\t\t\t\tif (reaction) {\n\t\t\t\t\t\t\t\t\t\treaction.users.push({ id: $user?.id, name: $user?.name });\n\t\t\t\t\t\t\t\t\t\treaction.count = reaction.users.length;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tm.reactions.push({\n\t\t\t\t\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\t\t\t\t\tusers: [{ id: $user?.id, name: $user?.name }],\n\t\t\t\t\t\t\t\t\t\t\tcount: 1\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn m;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst res = addReaction(localStorage.token, message.channel_id, message.id, name).catch(\n\t\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t/>\n\t\t{/each}\n\n\t\t<div class=\"pb-6\" />\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\tstroke-width={strokeWidth}\n\tviewBox=\"0 0 24 24\"\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\td=\"M5 20V19C5 15.134 8.13401 12 12 12V12C15.866 12 19 15.134 19 19V20\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t></path><path\n\t\td=\"M12 12C14.2091 12 16 10.2091 16 8C16 5.79086 14.2091 4 12 4C9.79086 4 8 5.79086 8 8C8 10.2091 9.79086 12 12 12Z\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t></path></svg\n>\n","<script>\n\timport { WEBUI_API_BASE_URL, WEBUI_BASE_URL } from '$lib/constants';\n\timport { WEBUI_NAME, config, user as _user, showSidebar } from '$lib/stores';\n\timport { goto } from '$app/navigation';\n\timport { onMount, getContext } from 'svelte';\n\n\timport dayjs from 'dayjs';\n\timport relativeTime from 'dayjs/plugin/relativeTime';\n\timport localizedFormat from 'dayjs/plugin/localizedFormat';\n\tdayjs.extend(relativeTime);\n\tdayjs.extend(localizedFormat);\n\n\timport { toast } from 'svelte-sonner';\n\timport { getChannelMembersById } from '$lib/apis/channels';\n\n\timport Pagination from '$lib/components/common/Pagination.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\n\timport Badge from '$lib/components/common/Badge.svelte';\n\timport Plus from '$lib/components/icons/Plus.svelte';\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport ProfilePreview from '../Messages/Message/ProfilePreview.svelte';\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let channel = null;\n\n\texport let onAdd = null;\n\texport let onRemove = null;\n\n\texport let search = true;\n\texport let sort = true;\n\n\tlet page = 1;\n\n\tlet users = null;\n\tlet total = null;\n\n\tlet query = '';\n\tlet orderBy = 'name'; // default sort key\n\tlet direction = 'asc'; // default sort order\n\n\tconst setSortKey = (key) => {\n\t\tif (!sort) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (orderBy === key) {\n\t\t\tdirection = direction === 'asc' ? 'desc' : 'asc';\n\t\t} else {\n\t\t\torderBy = key;\n\t\t\tdirection = 'asc';\n\t\t}\n\t};\n\n\tconst getUserList = async () => {\n\t\ttry {\n\t\t\tconst res = await getChannelMembersById(\n\t\t\t\tlocalStorage.token,\n\t\t\t\tchannel.id,\n\t\t\t\tquery,\n\t\t\t\torderBy,\n\t\t\t\tdirection,\n\t\t\t\tpage\n\t\t\t).catch((error) => {\n\t\t\t\ttoast.error(`${error}`);\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\t\tif (res) {\n\t\t\t\tusers = res.users;\n\t\t\t\ttotal = res.total;\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t};\n\n\t$: if (\n\t\tchannel !== null &&\n\t\tpage !== null &&\n\t\tquery !== null &&\n\t\torderBy !== null &&\n\t\tdirection !== null\n\t) {\n\t\tgetUserList();\n\t}\n</script>\n\n<div class=\"flex flex-col justify-center\">\n\t{#if users === null || total === null}\n\t\t<div class=\"my-10\">\n\t\t\t<Spinner className=\"size-5\" />\n\t\t</div>\n\t{:else}\n\t\t<div class=\"flex items-center justify-between px-2 mb-1\">\n\t\t\t<div class=\"flex gap-1 items-center\">\n\t\t\t\t<span class=\"text-sm\">\n\t\t\t\t\t{$i18n.t('Members')}\n\t\t\t\t</span>\n\t\t\t\t<span class=\"text-sm text-gray-500\">{total}</span>\n\t\t\t</div>\n\n\t\t\t{#if onAdd}\n\t\t\t\t<div class=\"\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclass=\" px-3 py-1.5 gap-1 rounded-xl bg-gray-100/50 dark:text-white dark:bg-gray-850/50 text-black transition font-medium text-xs flex items-center justify-center\"\n\t\t\t\t\t\ton:click={onAdd}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Plus className=\"size-3.5 \" />\n\t\t\t\t\t\t<span>{$i18n.t('Add Member')}</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t\t<!-- <hr class=\"my-1 border-gray-100/5- dark:border-gray-850/50\" /> -->\n\n\t\t{#if search}\n\t\t\t<div class=\"flex gap-1 px-1 mb-1\">\n\t\t\t\t<div class=\" flex w-full space-x-2\">\n\t\t\t\t\t<div class=\"flex flex-1 items-center\">\n\t\t\t\t\t\t<div class=\" self-center ml-1 mr-3\">\n\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\td=\"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z\"\n\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclass=\" w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent\"\n\t\t\t\t\t\t\tbind:value={query}\n\t\t\t\t\t\t\tplaceholder={$i18n.t('Search')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t{#if users.length > 0}\n\t\t\t<div class=\"scrollbar-hidden relative whitespace-nowrap w-full max-w-full\">\n\t\t\t\t<div class=\" text-sm text-left text-gray-500 dark:text-gray-400 w-full max-w-full\">\n\t\t\t\t\t<!-- <div\n\t\t\t\t\t\tclass=\"text-xs text-gray-800 uppercase bg-transparent dark:text-gray-200 w-full mb-0.5\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\" border-b-[1.5px] border-gray-50/50 dark:border-gray-800/10 flex items-center justify-between\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tclass=\"px-2.5 py-2 cursor-pointer select-none\"\n\t\t\t\t\t\t\t\ton:click={() => setSortKey('name')}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"flex gap-1.5 items-center\">\n\t\t\t\t\t\t\t\t\t{$i18n.t('Name')}\n\n\t\t\t\t\t\t\t\t\t{#if orderBy === 'name'}\n\t\t\t\t\t\t\t\t\t\t<span class=\"font-normal\"\n\t\t\t\t\t\t\t\t\t\t\t>{#if direction === 'asc'}\n\t\t\t\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t<ChevronDown className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<span class=\"invisible\">\n\t\t\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tclass=\"px-2.5 py-2 cursor-pointer select-none\"\n\t\t\t\t\t\t\t\ton:click={() => setSortKey('role')}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"flex gap-1.5 items-center\">\n\t\t\t\t\t\t\t\t\t{$i18n.t('Role')}\n\n\t\t\t\t\t\t\t\t\t{#if orderBy === 'role'}\n\t\t\t\t\t\t\t\t\t\t<span class=\"font-normal\"\n\t\t\t\t\t\t\t\t\t\t\t>{#if direction === 'asc'}\n\t\t\t\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t<ChevronDown className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<span class=\"invisible\">\n\t\t\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-2\" />\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div> -->\n\t\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t\t{#each users as user, userIdx (user.id)}\n\t\t\t\t\t\t\t<div class=\" dark:border-gray-850 text-xs flex items-center justify-between\">\n\t\t\t\t\t\t\t\t<div class=\"px-2 py-1.5 font-medium text-gray-900 dark:text-white flex-1\">\n\t\t\t\t\t\t\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t<ProfilePreview {user} side=\"right\" align=\"center\" sideOffset={6}>\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"rounded-2xl w-6 h-6 object-cover flex-shrink-0\"\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={`${WEBUI_API_BASE_URL}/users/${user.id}/profile/image`}\n\t\t\t\t\t\t\t\t\t\t\t\talt=\"user\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</ProfilePreview>\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={user.email} placement=\"top-start\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"font-medium truncate\">{user.name}</div>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t\t\t\t\t{#if user?.is_active}\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"relative flex size-1.5\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"absolute inline-flex h-full w-full animate-ping rounded-full bg-green-400 opacity-75\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"relative inline-flex size-1.5 rounded-full bg-green-500\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t></span>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"px-2 py-1 flex items-center gap-1 translate-y-0.5\">\n\t\t\t\t\t\t\t\t\t<div class=\" \">\n\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\ttype={user.role === 'admin'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'info'\n\t\t\t\t\t\t\t\t\t\t\t\t: user.role === 'user'\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'success'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'muted'}\n\t\t\t\t\t\t\t\t\t\t\tcontent={$i18n.t(user.role)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t{#if onRemove}\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\" rounded-full p-1 hover:bg-gray-100 dark:hover:bg-gray-850 transition disabled:opacity-50 disabled:cursor-not-allowed\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={user.id === $_user?.id}\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tonRemove(user.id);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<XMark />\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{#if total > 30}\n\t\t\t\t<Pagination bind:page count={total} perPage={30} />\n\t\t\t{/if}\n\t\t{:else}\n\t\t\t<div class=\"text-gray-500 text-xs text-center py-5 px-10\">\n\t\t\t\t{$i18n.t('No users were found.')}\n\t\t\t</div>\n\t\t{/if}\n\t{/if}\n</div>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport { getContext, onMount } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport { addMembersById } from '$lib/apis/channels';\n\n\timport Modal from '$lib/components/common/Modal.svelte';\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\timport MemberSelector from '$lib/components/workspace/common/MemberSelector.svelte';\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\n\texport let show = false;\n\texport let channel = null;\n\n\texport let onUpdate = () => {};\n\n\tlet groupIds = [];\n\tlet userIds = [];\n\n\tlet loading = false;\n\n\tconst submitHandler = async () => {\n\t\tconst res = await addMembersById(localStorage.token, channel.id, {\n\t\t\tuser_ids: userIds,\n\t\t\tgroup_ids: groupIds\n\t\t}).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (res) {\n\t\t\ttoast.success($i18n.t('Members added successfully'));\n\t\t\tonUpdate();\n\t\t\tshow = false;\n\t\t} else {\n\t\t\ttoast.error($i18n.t('Failed to add members'));\n\t\t}\n\t};\n\n\tconst reset = () => {\n\t\tuserIds = [];\n\t\tgroupIds = [];\n\t\tloading = false;\n\t};\n\n\t$: if (!show) {\n\t\treset();\n\t}\n</script>\n\n{#if channel}\n\t<Modal size=\"sm\" bind:show>\n\t\t<div>\n\t\t\t<div class=\" flex justify-between dark:text-gray-100 px-5 pt-4 mb-1.5\">\n\t\t\t\t<div class=\"self-center text-base\">\n\t\t\t\t\t<div class=\"flex items-center gap-0.5 shrink-0\">\n\t\t\t\t\t\t{$i18n.t('Add Members')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"self-center\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tshow = false;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<XMark className={'size-5'} />\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div class=\"flex flex-col md:flex-row w-full px-3 pb-4 md:space-x-4 dark:text-gray-200\">\n\t\t\t\t<div class=\" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6\">\n\t\t\t\t\t<form\n\t\t\t\t\t\tclass=\"flex flex-col w-full\"\n\t\t\t\t\t\ton:submit={(e) => {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tsubmitHandler();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"flex flex-col w-full h-full pb-2\">\n\t\t\t\t\t\t\t<MemberSelector bind:userIds bind:groupIds includeGroups={true} />\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"flex justify-end pt-3 text-sm font-medium gap-1.5\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-950 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center {loading\n\t\t\t\t\t\t\t\t\t? ' cursor-not-allowed'\n\t\t\t\t\t\t\t\t\t: ''}\"\n\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{$i18n.t('Add')}\n\n\t\t\t\t\t\t\t\t{#if loading}\n\t\t\t\t\t\t\t\t\t<div class=\"ml-2 self-center\">\n\t\t\t\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</Modal>\n{/if}\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport { getContext, onMount } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport { removeMembersById } from '$lib/apis/channels';\n\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport Modal from '$lib/components/common/Modal.svelte';\n\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\timport Hashtag from '../icons/Hashtag.svelte';\n\timport Lock from '../icons/Lock.svelte';\n\timport UserList from './ChannelInfoModal/UserList.svelte';\n\timport AddMembersModal from './ChannelInfoModal/AddMembersModal.svelte';\n\n\texport let show = false;\n\texport let channel = null;\n\n\texport let onUpdate = () => {};\n\n\tlet showAddMembersModal = false;\n\tconst submitHandler = async () => {};\n\n\tconst removeMemberHandler = async (userId) => {\n\t\tconst res = await removeMembersById(localStorage.token, channel.id, {\n\t\t\tuser_ids: [userId]\n\t\t}).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (res) {\n\t\t\ttoast.success($i18n.t('Member removed successfully'));\n\t\t\tonUpdate();\n\t\t} else {\n\t\t\ttoast.error($i18n.t('Failed to remove member'));\n\t\t}\n\t};\n\n\tconst init = () => {};\n\n\t$: if (show) {\n\t\tinit();\n\t}\n\n\tonMount(() => {\n\t\tinit();\n\t});\n</script>\n\n{#if channel}\n\t<AddMembersModal bind:show={showAddMembersModal} {channel} {onUpdate} />\n\t<Modal size=\"sm\" bind:show>\n\t\t<div>\n\t\t\t<div class=\" flex justify-between dark:text-gray-100 px-5 pt-4 mb-1.5\">\n\t\t\t\t<div class=\"self-center text-base\">\n\t\t\t\t\t<div class=\"flex items-center gap-0.5 shrink-0\">\n\t\t\t\t\t\t{#if channel?.type === 'dm'}\n\t\t\t\t\t\t\t<div class=\" text-left self-center overflow-hidden w-full line-clamp-1 flex-1\">\n\t\t\t\t\t\t\t\t{$i18n.t('Direct Message')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<div class=\" size-4 justify-center flex items-center\">\n\t\t\t\t\t\t\t\t{#if channel?.type === 'group' ? !channel?.is_private : channel?.access_control === null}\n\t\t\t\t\t\t\t\t\t<Hashtag className=\"size-3.5\" strokeWidth=\"2.5\" />\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<Lock className=\"size-5.5\" strokeWidth=\"2\" />\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\" text-left self-center overflow-hidden w-full line-clamp-1 flex-1\">\n\t\t\t\t\t\t\t\t{channel.name}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"self-center\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tshow = false;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<XMark className={'size-5'} />\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div class=\"flex flex-col md:flex-row w-full px-3 pb-4 md:space-x-4 dark:text-gray-200\">\n\t\t\t\t<div class=\" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6\">\n\t\t\t\t\t<form\n\t\t\t\t\t\tclass=\"flex flex-col w-full\"\n\t\t\t\t\t\ton:submit={(e) => {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tsubmitHandler();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"flex flex-col w-full h-full pb-2\">\n\t\t\t\t\t\t\t<UserList\n\t\t\t\t\t\t\t\t{channel}\n\t\t\t\t\t\t\t\tonAdd={channel?.type === 'group' && channel?.is_manager\n\t\t\t\t\t\t\t\t\t? () => {\n\t\t\t\t\t\t\t\t\t\t\tshowAddMembersModal = true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\tonRemove={channel?.type === 'group' && channel?.is_manager\n\t\t\t\t\t\t\t\t\t? (userId) => {\n\t\t\t\t\t\t\t\t\t\t\tremoveMemberHandler(userId);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\tsearch={channel?.type !== 'dm'}\n\t\t\t\t\t\t\t\tsort={channel?.type !== 'dm'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</Modal>\n{/if}\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport { getContext, onMount } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport { getChannelPinnedMessages, pinMessage } from '$lib/apis/channels';\n\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport Modal from '$lib/components/common/Modal.svelte';\n\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\timport Message from './Messages/Message.svelte';\n\timport Loader from '../common/Loader.svelte';\n\n\texport let show = false;\n\texport let channel = null;\n\texport let onPin = (messageId, pinned) => {};\n\n\tlet page = 1;\n\tlet pinnedMessages = null;\n\n\tlet allItemsLoaded = false;\n\tlet loading = false;\n\n\tconst getPinnedMessages = async () => {\n\t\tif (!channel) return;\n\t\tif (allItemsLoaded) return;\n\n\t\tloading = true;\n\t\ttry {\n\t\t\tconst res = await getChannelPinnedMessages(localStorage.token, channel.id, page).catch(\n\t\t\t\t(error) => {\n\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tif (res) {\n\t\t\t\tpinnedMessages = [...(pinnedMessages ?? []), ...res];\n\t\t\t}\n\n\t\t\tif (res.length === 0) {\n\t\t\t\tallItemsLoaded = true;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('Error fetching pinned messages:', error);\n\t\t} finally {\n\t\t\tloading = false;\n\t\t}\n\t};\n\n\tconst init = () => {\n\t\tpage = 1;\n\t\tpinnedMessages = null;\n\t\tallItemsLoaded = false;\n\n\t\tgetPinnedMessages();\n\t};\n\n\t$: if (show) {\n\t\tinit();\n\t}\n\n\tonMount(() => {\n\t\tinit();\n\t});\n</script>\n\n{#if channel}\n\t<Modal size=\"sm\" bind:show>\n\t\t<div>\n\t\t\t<div class=\" flex justify-between dark:text-gray-100 px-5 pt-4 mb-1.5\">\n\t\t\t\t<div class=\"self-center text-base\">\n\t\t\t\t\t<div class=\"flex items-center gap-0.5 shrink-0\">\n\t\t\t\t\t\t{$i18n.t('Pinned Messages')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"self-center\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tshow = false;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<XMark className={'size-5'} />\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div class=\"flex flex-col md:flex-row w-full px-4 pb-4 md:space-x-4 dark:text-gray-200\">\n\t\t\t\t<div class=\" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6\">\n\t\t\t\t\t<div class=\"flex flex-col w-full h-full pb-2 gap-1\">\n\t\t\t\t\t\t{#if pinnedMessages === null}\n\t\t\t\t\t\t\t<div class=\"my-10\">\n\t\t\t\t\t\t\t\t<Spinner className=\"size-5\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"flex flex-col gap-2 max-h-[60vh] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-700 scrollbar-track-transparent py-2\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{#if pinnedMessages.length === 0}\n\t\t\t\t\t\t\t\t\t<div class=\" text-center text-xs text-gray-500 dark:text-gray-400 py-6\">\n\t\t\t\t\t\t\t\t\t\t{$i18n.t('No pinned messages')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t{#each pinnedMessages as message, messageIdx (message.id)}\n\t\t\t\t\t\t\t\t\t\t<Message\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"rounded-xl px-2\"\n\t\t\t\t\t\t\t\t\t\t\t{message}\n\t\t\t\t\t\t\t\t\t\t\t{channel}\n\t\t\t\t\t\t\t\t\t\t\tonPin={async (message) => {\n\t\t\t\t\t\t\t\t\t\t\t\tpinnedMessages = pinnedMessages.filter((m) => m.id !== message.id);\n\t\t\t\t\t\t\t\t\t\t\t\tonPin(message.id, !message.is_pinned);\n\n\t\t\t\t\t\t\t\t\t\t\t\tconst updatedMessage = await pinMessage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage.channel_id,\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t!message.is_pinned\n\t\t\t\t\t\t\t\t\t\t\t\t).catch((error) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\t\tinit();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tonReaction={false}\n\t\t\t\t\t\t\t\t\t\t\tonThread={false}\n\t\t\t\t\t\t\t\t\t\t\tonReply={false}\n\t\t\t\t\t\t\t\t\t\t\tonEdit={false}\n\t\t\t\t\t\t\t\t\t\t\tonDelete={false}\n\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t{#if messageIdx === pinnedMessages.length - 1 && !allItemsLoaded}\n\t\t\t\t\t\t\t\t\t\t\t<Loader\n\t\t\t\t\t\t\t\t\t\t\t\ton:visible={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('visible');\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!loading) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpage += 1;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetPinnedMessages();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-full flex justify-center py-1 text-xs animate-pulse items-center gap-2\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Spinner className=\" size-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\" \">{$i18n.t('Loading...')}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</Loader>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</Modal>\n{/if}\n","<script lang=\"ts\">\n\timport { getContext } from 'svelte';\n\timport { toast } from 'svelte-sonner';\n\n\timport { mobile, showArchivedChats, showSidebar, user } from '$lib/stores';\n\n\timport { slide } from 'svelte/transition';\n\timport { page } from '$app/stores';\n\n\timport { WEBUI_API_BASE_URL } from '$lib/constants';\n\n\timport UserMenu from '$lib/components/layout/Sidebar/UserMenu.svelte';\n\timport PencilSquare from '../icons/PencilSquare.svelte';\n\timport Tooltip from '../common/Tooltip.svelte';\n\timport Sidebar from '../icons/Sidebar.svelte';\n\timport Hashtag from '../icons/Hashtag.svelte';\n\timport Lock from '../icons/Lock.svelte';\n\timport UserAlt from '../icons/UserAlt.svelte';\n\timport ChannelInfoModal from './ChannelInfoModal.svelte';\n\timport Users from '../icons/Users.svelte';\n\timport Pin from '../icons/Pin.svelte';\n\timport PinnedMessagesModal from './PinnedMessagesModal.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\tlet showChannelPinnedMessagesModal = false;\n\tlet showChannelInfoModal = false;\n\n\texport let channel;\n\n\texport let onPin = (messageId, pinned) => {};\n\texport let onUpdate = () => {};\n</script>\n\n<PinnedMessagesModal bind:show={showChannelPinnedMessagesModal} {channel} {onPin} />\n<ChannelInfoModal bind:show={showChannelInfoModal} {channel} {onUpdate} />\n<nav class=\"sticky top-0 z-30 w-full px-1.5 py-1 -mb-8 flex items-center drag-region flex flex-col\">\n\t<div\n\t\tid=\"navbar-bg-gradient-to-b\"\n\t\tclass=\" bg-linear-to-b via-50% from-white via-white to-transparent dark:from-gray-900 dark:via-gray-900 dark:to-transparent pointer-events-none absolute inset-0 -bottom-7 z-[-1]\"\n\t></div>\n\n\t<div class=\" flex max-w-full w-full mx-auto px-1 pt-0.5 bg-transparent\">\n\t\t<div class=\"flex items-center w-full max-w-full\">\n\t\t\t{#if $mobile}\n\t\t\t\t<div\n\t\t\t\t\tclass=\"{$showSidebar\n\t\t\t\t\t\t? 'md:hidden'\n\t\t\t\t\t\t: ''} mr-1.5 mt-0.5 self-start flex flex-none items-center text-gray-600 dark:text-gray-400\"\n\t\t\t\t>\n\t\t\t\t\t<Tooltip\n\t\t\t\t\t\tcontent={$showSidebar ? $i18n.t('Close Sidebar') : $i18n.t('Open Sidebar')}\n\t\t\t\t\t\tinteractive={true}\n\t\t\t\t\t>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tid=\"sidebar-toggle-button\"\n\t\t\t\t\t\t\tclass=\" cursor-pointer flex rounded-lg hover:bg-gray-100 dark:hover:bg-gray-850 transition cursor-\"\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tshowSidebar.set(!$showSidebar);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\" self-center p-1.5\">\n\t\t\t\t\t\t\t\t<Sidebar />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div\n\t\t\t\tclass=\"flex-1 overflow-hidden max-w-full py-0.5 flex items-center\n\t\t\t{$showSidebar ? 'ml-1' : ''}\n\t\t\t\"\n\t\t\t>\n\t\t\t\t{#if channel}\n\t\t\t\t\t<div class=\"flex items-center gap-0.5 shrink-0\">\n\t\t\t\t\t\t{#if channel?.type === 'dm'}\n\t\t\t\t\t\t\t{#if channel?.users}\n\t\t\t\t\t\t\t\t{@const channelMembers = channel.users.filter((u) => u.id !== $user?.id)}\n\t\t\t\t\t\t\t\t<div class=\"flex mr-1.5 relative\">\n\t\t\t\t\t\t\t\t\t{#each channelMembers.slice(0, 2) as u, index}\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tsrc={`${WEBUI_API_BASE_URL}/users/${u.id}/profile/image`}\n\t\t\t\t\t\t\t\t\t\t\talt={u.name}\n\t\t\t\t\t\t\t\t\t\t\tclass=\" size-6.5 rounded-full border-2 border-white dark:border-gray-900 {index ===\n\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\t\t? '-ml-3'\n\t\t\t\t\t\t\t\t\t\t\t\t: ''}\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{/each}\n\n\t\t\t\t\t\t\t\t\t{#if channelMembers.length === 1}\n\t\t\t\t\t\t\t\t\t\t<div class=\"absolute bottom-0 right-0\">\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"relative flex size-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t{#if channelMembers[0]?.is_active}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"absolute inline-flex h-full w-full animate-ping rounded-full bg-green-400 opacity-75\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t></span>\n\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"relative inline-flex size-2 rounded-full {channelMembers[0]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t?.is_active\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'bg-green-500'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'bg-gray-300 dark:bg-gray-700'} border-[1.5px] border-white dark:border-gray-900\"\n\t\t\t\t\t\t\t\t\t\t\t\t></span>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<Users className=\"size-4 ml-1 mr-0.5\" strokeWidth=\"2\" />\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<div class=\" size-4.5 justify-center flex items-center\">\n\t\t\t\t\t\t\t\t{#if channel?.type === 'group' ? !channel?.is_private : channel?.access_control === null}\n\t\t\t\t\t\t\t\t\t<Hashtag className=\"size-3.5\" strokeWidth=\"2.5\" />\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<Lock className=\"size-5\" strokeWidth=\"2\" />\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t<div class=\" text-left self-center overflow-hidden w-full line-clamp-1 flex-1\">\n\t\t\t\t\t\t\t{#if channel?.name}\n\t\t\t\t\t\t\t\t{channel.name}\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t{channel?.users\n\t\t\t\t\t\t\t\t\t?.filter((u) => u.id !== $user?.id)\n\t\t\t\t\t\t\t\t\t.map((u) => u.name)\n\t\t\t\t\t\t\t\t\t.join(', ')}\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"self-start flex flex-none items-center text-gray-600 dark:text-gray-400 gap-1\">\n\t\t\t\t{#if channel}\n\t\t\t\t\t<Tooltip content={$i18n.t('Pinned Messages')}>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\" flex cursor-pointer py-1.5 px-1.5 border dark:border-gray-850 border-gray-50 rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-850 transition\"\n\t\t\t\t\t\t\taria-label=\"Pinned Messages\"\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tshowChannelPinnedMessagesModal = true;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\" flex items-center gap-0.5 m-auto self-center\">\n\t\t\t\t\t\t\t\t<Pin className=\" size-4\" strokeWidth=\"1.5\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t{#if channel?.user_count !== undefined}\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Users')}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\" flex cursor-pointer py-1 px-1.5 border dark:border-gray-850 border-gray-50 rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-850 transition\"\n\t\t\t\t\t\t\t\taria-label=\"User Count\"\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tshowChannelInfoModal = true;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\" flex items-center gap-0.5 m-auto self-center\">\n\t\t\t\t\t\t\t\t\t<UserAlt className=\" size-4\" strokeWidth=\"1.5\" />\n\n\t\t\t\t\t\t\t\t\t<div class=\"text-sm\">\n\t\t\t\t\t\t\t\t\t\t{channel.user_count}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{/if}\n\t\t\t\t{/if}\n\n\t\t\t\t{#if $user !== undefined}\n\t\t\t\t\t<UserMenu\n\t\t\t\t\t\tclassName=\"max-w-[240px]\"\n\t\t\t\t\t\trole={$user?.role}\n\t\t\t\t\t\thelp={true}\n\t\t\t\t\t\ton:show={(e) => {\n\t\t\t\t\t\t\tif (e.detail === 'archived-chat') {\n\t\t\t\t\t\t\t\tshowArchivedChats.set(true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"select-none flex rounded-xl p-1.5 w-full hover:bg-gray-50 dark:hover:bg-gray-850 transition\"\n\t\t\t\t\t\t\taria-label=\"User Menu\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\" self-center\">\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={`${WEBUI_API_BASE_URL}/users/${$user?.id}/profile/image`}\n\t\t\t\t\t\t\t\t\tclass=\"size-6 object-cover rounded-full\"\n\t\t\t\t\t\t\t\t\talt=\"User profile\"\n\t\t\t\t\t\t\t\t\tdraggable=\"false\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</UserMenu>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</nav>\n","<script lang=\"ts\">\n\timport { goto } from '$app/navigation';\n\n\timport { socket, user } from '$lib/stores';\n\n\timport { getChannelThreadMessages, sendMessage } from '$lib/apis/channels';\n\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\timport MessageInput from './MessageInput.svelte';\n\timport Messages from './Messages.svelte';\n\timport { onDestroy, onMount, tick, getContext } from 'svelte';\n\timport { toast } from 'svelte-sonner';\n\timport Spinner from '../common/Spinner.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let threadId = null;\n\texport let channel = null;\n\n\texport let onClose = () => {};\n\n\tlet messages = null;\n\tlet top = false;\n\n\tlet messagesContainerElement = null;\n\tlet chatInputElement = null;\n\n\tlet replyToMessage = null;\n\n\tlet typingUsers = [];\n\tlet typingUsersTimeout = {};\n\n\t$: if (threadId) {\n\t\tinitHandler();\n\t}\n\n\tconst scrollToBottom = () => {\n\t\tmessagesContainerElement.scrollTop = messagesContainerElement.scrollHeight;\n\t};\n\n\tconst initHandler = async () => {\n\t\tmessages = null;\n\t\ttop = false;\n\n\t\ttypingUsers = [];\n\t\ttypingUsersTimeout = {};\n\n\t\tif (channel) {\n\t\t\tmessages = await getChannelThreadMessages(localStorage.token, channel.id, threadId);\n\n\t\t\tif (messages.length < 50) {\n\t\t\t\ttop = true;\n\t\t\t}\n\n\t\t\tawait tick();\n\t\t\tscrollToBottom();\n\t\t} else {\n\t\t\tgoto('/');\n\t\t}\n\t};\n\n\tconst channelEventHandler = async (event) => {\n\t\tconsole.debug(event);\n\t\tif (event.channel_id === channel.id) {\n\t\t\tconst type = event?.data?.type ?? null;\n\t\t\tconst data = event?.data?.data ?? null;\n\n\t\t\tif (type === 'message') {\n\t\t\t\tif ((data?.parent_id ?? null) === threadId) {\n\t\t\t\t\tif (messages) {\n\t\t\t\t\t\tmessages = [data, ...messages];\n\n\t\t\t\t\t\tif (typingUsers.find((user) => user.id === event.user.id)) {\n\t\t\t\t\t\t\ttypingUsers = typingUsers.filter((user) => user.id !== event.user.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'message:update') {\n\t\t\t\tif (messages) {\n\t\t\t\t\tconst idx = messages.findIndex((message) => message.id === data.id);\n\n\t\t\t\t\tif (idx !== -1) {\n\t\t\t\t\t\tmessages[idx] = data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'message:delete') {\n\t\t\t\tif (messages) {\n\t\t\t\t\tmessages = messages.filter((message) => message.id !== data.id);\n\t\t\t\t}\n\t\t\t} else if (type.includes('message:reaction')) {\n\t\t\t\tif (messages) {\n\t\t\t\t\tconst idx = messages.findIndex((message) => message.id === data.id);\n\t\t\t\t\tif (idx !== -1) {\n\t\t\t\t\t\tmessages[idx] = data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'typing' && event.message_id === threadId) {\n\t\t\t\tif (event.user.id === $user?.id) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttypingUsers = data.typing\n\t\t\t\t\t? [\n\t\t\t\t\t\t\t...typingUsers,\n\t\t\t\t\t\t\t...(typingUsers.find((user) => user.id === event.user.id)\n\t\t\t\t\t\t\t\t? []\n\t\t\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tid: event.user.id,\n\t\t\t\t\t\t\t\t\t\t\tname: event.user.name\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]\n\t\t\t\t\t: typingUsers.filter((user) => user.id !== event.user.id);\n\n\t\t\t\tif (typingUsersTimeout[event.user.id]) {\n\t\t\t\t\tclearTimeout(typingUsersTimeout[event.user.id]);\n\t\t\t\t}\n\n\t\t\t\ttypingUsersTimeout[event.user.id] = setTimeout(() => {\n\t\t\t\t\ttypingUsers = typingUsers.filter((user) => user.id !== event.user.id);\n\t\t\t\t}, 5000);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst submitHandler = async ({ content, data }) => {\n\t\tif (!content && (data?.files ?? []).length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst res = await sendMessage(localStorage.token, channel.id, {\n\t\t\tparent_id: threadId,\n\t\t\treply_to_id: replyToMessage?.id ?? null,\n\t\t\tcontent: content,\n\t\t\tdata: data\n\t\t}).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t\treturn null;\n\t\t});\n\n\t\treplyToMessage = null;\n\t};\n\n\tconst onChange = async () => {\n\t\t$socket?.emit('events:channel', {\n\t\t\tchannel_id: channel.id,\n\t\t\tmessage_id: threadId,\n\t\t\tdata: {\n\t\t\t\ttype: 'typing',\n\t\t\t\tdata: {\n\t\t\t\t\ttyping: true\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tonMount(() => {\n\t\t$socket?.on('events:channel', channelEventHandler);\n\t});\n\n\tonDestroy(() => {\n\t\t$socket?.off('events:channel', channelEventHandler);\n\t});\n</script>\n\n{#if channel}\n\t<div class=\"flex flex-col w-full h-full bg-gray-50 dark:bg-gray-850\">\n\t\t<div class=\"sticky top-0 flex items-center justify-between px-3.5 py-3\">\n\t\t\t<div class=\" font-medium text-lg\">{$i18n.t('Thread')}</div>\n\n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 p-2\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<XMark />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\" max-h-full w-full overflow-y-auto\" bind:this={messagesContainerElement}>\n\t\t\t{#if messages !== null}\n\t\t\t\t<Messages\n\t\t\t\t\tid={threadId}\n\t\t\t\t\t{channel}\n\t\t\t\t\t{top}\n\t\t\t\t\t{messages}\n\t\t\t\t\t{replyToMessage}\n\t\t\t\t\tthread={true}\n\t\t\t\t\tonReply={async (message) => {\n\t\t\t\t\t\treplyToMessage = message;\n\n\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\tchatInputElement?.focus();\n\t\t\t\t\t}}\n\t\t\t\t\tonLoad={async () => {\n\t\t\t\t\t\tconst newMessages = await getChannelThreadMessages(\n\t\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\t\tchannel.id,\n\t\t\t\t\t\t\tthreadId,\n\t\t\t\t\t\t\tmessages.length\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tmessages = [...messages, ...newMessages];\n\n\t\t\t\t\t\tif (newMessages.length < 50) {\n\t\t\t\t\t\t\ttop = true;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t{:else}\n\t\t\t\t<div class=\"w-full flex justify-center pt-5 pb-10\">\n\t\t\t\t\t<Spinner />\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\" pb-[1rem] px-2.5 w-full\">\n\t\t\t\t<MessageInput\n\t\t\t\t\tbind:replyToMessage\n\t\t\t\t\tbind:chatInputElement\n\t\t\t\t\tid={threadId}\n\t\t\t\t\t{channel}\n\t\t\t\t\tdisabled={!channel?.write_access}\n\t\t\t\t\tplaceholder={!channel?.write_access\n\t\t\t\t\t\t? $i18n.t('You do not have permission to send messages in this thread.')\n\t\t\t\t\t\t: $i18n.t('Reply to thread...')}\n\t\t\t\t\ttypingUsersClassName=\"from-gray-50 dark:from-gray-850\"\n\t\t\t\t\t{typingUsers}\n\t\t\t\t\tuserSuggestions={true}\n\t\t\t\t\tchannelSuggestions={true}\n\t\t\t\t\t{onChange}\n\t\t\t\t\tonSubmit={submitHandler}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport { Pane, PaneGroup, PaneResizer } from 'paneforge';\n\n\timport { onDestroy, onMount, tick } from 'svelte';\n\timport { goto } from '$app/navigation';\n\timport { v4 as uuidv4 } from 'uuid';\n\n\timport {\n\t\tchatId,\n\t\tchannels,\n\t\tchannelId as _channelId,\n\t\tshowSidebar,\n\t\tsocket,\n\t\tuser\n\t} from '$lib/stores';\n\timport { getChannelById, getChannelMessages, sendMessage } from '$lib/apis/channels';\n\n\timport Messages from './Messages.svelte';\n\timport MessageInput from './MessageInput.svelte';\n\timport Navbar from './Navbar.svelte';\n\timport Drawer from '../common/Drawer.svelte';\n\timport EllipsisVertical from '../icons/EllipsisVertical.svelte';\n\timport Thread from './Thread.svelte';\n\timport i18n from '$lib/i18n';\n\timport Spinner from '../common/Spinner.svelte';\n\n\texport let id = '';\n\n\tlet currentId = null;\n\n\tlet scrollEnd = true;\n\tlet messagesContainerElement = null;\n\tlet chatInputElement = null;\n\n\tlet top = false;\n\n\tlet channel = null;\n\tlet messages = null;\n\n\tlet replyToMessage = null;\n\tlet threadId = null;\n\n\tlet typingUsers = [];\n\tlet typingUsersTimeout = {};\n\n\t$: if (id) {\n\t\tinitHandler();\n\t}\n\n\tconst scrollToBottom = () => {\n\t\tif (messagesContainerElement) {\n\t\t\tmessagesContainerElement.scrollTop = messagesContainerElement.scrollHeight;\n\t\t}\n\t};\n\n\tconst updateLastReadAt = async (channelId) => {\n\t\t$socket?.emit('events:channel', {\n\t\t\tchannel_id: channelId,\n\t\t\tmessage_id: null,\n\t\t\tdata: {\n\t\t\t\ttype: 'last_read_at'\n\t\t\t}\n\t\t});\n\n\t\tchannels.set(\n\t\t\t$channels.map((channel) => {\n\t\t\t\tif (channel.id === channelId) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...channel,\n\t\t\t\t\t\tunread_count: 0\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn channel;\n\t\t\t})\n\t\t);\n\t};\n\n\tconst initHandler = async () => {\n\t\tif (currentId) {\n\t\t\tupdateLastReadAt(currentId);\n\t\t}\n\n\t\tcurrentId = id;\n\t\tupdateLastReadAt(id);\n\t\t_channelId.set(id);\n\n\t\ttop = false;\n\t\tmessages = null;\n\t\tchannel = null;\n\t\tthreadId = null;\n\n\t\ttypingUsers = [];\n\t\ttypingUsersTimeout = {};\n\n\t\tchannel = await getChannelById(localStorage.token, id).catch((error) => {\n\t\t\treturn null;\n\t\t});\n\n\t\tif (channel) {\n\t\t\tmessages = await getChannelMessages(localStorage.token, id, 0);\n\n\t\t\tif (messages) {\n\t\t\t\tscrollToBottom();\n\n\t\t\t\tif (messages.length < 50) {\n\t\t\t\t\ttop = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tgoto('/');\n\t\t}\n\t};\n\n\tconst channelEventHandler = async (event) => {\n\t\tif (event.channel_id === id) {\n\t\t\tconst type = event?.data?.type ?? null;\n\t\t\tconst data = event?.data?.data ?? null;\n\n\t\t\tif (type === 'message') {\n\t\t\t\tif ((data?.parent_id ?? null) === null) {\n\t\t\t\t\tconst tempId = data?.temp_id ?? null;\n\t\t\t\t\tmessages = [\n\t\t\t\t\t\t{ ...data, temp_id: null },\n\t\t\t\t\t\t...messages.filter((m) => !tempId || m?.temp_id !== tempId)\n\t\t\t\t\t];\n\n\t\t\t\t\tif (typingUsers.find((user) => user.id === event.user.id)) {\n\t\t\t\t\t\ttypingUsers = typingUsers.filter((user) => user.id !== event.user.id);\n\t\t\t\t\t}\n\n\t\t\t\t\tawait tick();\n\t\t\t\t\tif (scrollEnd) {\n\t\t\t\t\t\tscrollToBottom();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'message:update') {\n\t\t\t\tconst idx = messages.findIndex((message) => message.id === data.id);\n\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tmessages[idx] = data;\n\t\t\t\t}\n\t\t\t} else if (type === 'message:delete') {\n\t\t\t\tmessages = messages.filter((message) => message.id !== data.id);\n\t\t\t} else if (type === 'message:reply') {\n\t\t\t\tconst idx = messages.findIndex((message) => message.id === data.id);\n\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tmessages[idx] = data;\n\t\t\t\t}\n\t\t\t} else if (type.includes('message:reaction')) {\n\t\t\t\tconst idx = messages.findIndex((message) => message.id === data.id);\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tmessages[idx] = data;\n\t\t\t\t}\n\t\t\t} else if (type === 'typing' && event.message_id === null) {\n\t\t\t\tif (event.user.id === $user?.id) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttypingUsers = data.typing\n\t\t\t\t\t? [\n\t\t\t\t\t\t\t...typingUsers,\n\t\t\t\t\t\t\t...(typingUsers.find((user) => user.id === event.user.id)\n\t\t\t\t\t\t\t\t? []\n\t\t\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tid: event.user.id,\n\t\t\t\t\t\t\t\t\t\t\tname: event.user.name\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]\n\t\t\t\t\t: typingUsers.filter((user) => user.id !== event.user.id);\n\n\t\t\t\tif (typingUsersTimeout[event.user.id]) {\n\t\t\t\t\tclearTimeout(typingUsersTimeout[event.user.id]);\n\t\t\t\t}\n\n\t\t\t\ttypingUsersTimeout[event.user.id] = setTimeout(() => {\n\t\t\t\t\ttypingUsers = typingUsers.filter((user) => user.id !== event.user.id);\n\t\t\t\t}, 5000);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst submitHandler = async ({ content, data }) => {\n\t\tif (!content && (data?.files ?? []).length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst tempId = uuidv4();\n\n\t\tconst message = {\n\t\t\ttemp_id: tempId,\n\t\t\tcontent: content,\n\t\t\tdata: data,\n\t\t\treply_to_id: replyToMessage?.id ?? null\n\t\t};\n\n\t\tconst ts = Date.now() * 1000000; // nanoseconds\n\t\tmessages = [\n\t\t\t{\n\t\t\t\t...message,\n\t\t\t\tid: tempId,\n\t\t\t\tuser_id: $user?.id,\n\t\t\t\tuser: $user,\n\t\t\t\treply_to_message: replyToMessage ?? null,\n\t\t\t\tcreated_at: ts,\n\t\t\t\tupdated_at: ts\n\t\t\t},\n\t\t\t...messages\n\t\t];\n\n\t\tconst res = await sendMessage(localStorage.token, id, message).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t\treturn null;\n\t\t});\n\n\t\tif (res) {\n\t\t\tmessagesContainerElement.scrollTop = messagesContainerElement.scrollHeight;\n\t\t}\n\n\t\treplyToMessage = null;\n\t};\n\n\tconst onChange = async () => {\n\t\t$socket?.emit('events:channel', {\n\t\t\tchannel_id: id,\n\t\t\tmessage_id: null,\n\t\t\tdata: {\n\t\t\t\ttype: 'typing',\n\t\t\t\tdata: {\n\t\t\t\t\ttyping: true\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tupdateLastReadAt(id);\n\t};\n\n\tlet mediaQuery;\n\tlet largeScreen = false;\n\n\tonMount(() => {\n\t\tif ($chatId) {\n\t\t\tchatId.set('');\n\t\t}\n\n\t\t$socket?.on('events:channel', channelEventHandler);\n\n\t\tmediaQuery = window.matchMedia('(min-width: 1024px)');\n\n\t\tconst handleMediaQuery = async (e) => {\n\t\t\tif (e.matches) {\n\t\t\t\tlargeScreen = true;\n\t\t\t} else {\n\t\t\t\tlargeScreen = false;\n\t\t\t}\n\t\t};\n\n\t\tmediaQuery.addEventListener('change', handleMediaQuery);\n\t\thandleMediaQuery(mediaQuery);\n\t});\n\n\tonDestroy(() => {\n\t\t// last read at\n\t\tupdateLastReadAt(id);\n\t\t_channelId.set(null);\n\t\t$socket?.off('events:channel', channelEventHandler);\n\t});\n</script>\n\n<svelte:head>\n\t{#if channel?.type === 'dm'}\n\t\t<title\n\t\t\t>{channel?.name.trim() ||\n\t\t\t\tchannel?.users.reduce((a, e, i, arr) => {\n\t\t\t\t\tif (e.id === $user?.id) {\n\t\t\t\t\t\treturn a;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (a) {\n\t\t\t\t\t\treturn `${a}, ${e.name}`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn e.name;\n\t\t\t\t\t}\n\t\t\t\t}, '')} â€¢ Open WebUI</title\n\t\t>\n\t{:else}\n\t\t<title>#{channel?.name ?? 'Channel'} â€¢ Open WebUI</title>\n\t{/if}\n</svelte:head>\n\n<div\n\tclass=\"h-screen max-h-[100dvh] transition-width duration-200 ease-in-out {$showSidebar\n\t\t? 'md:max-w-[calc(100%-var(--sidebar-width))]'\n\t\t: ''} w-full max-w-full flex flex-col\"\n\tid=\"channel-container\"\n>\n\t<PaneGroup direction=\"horizontal\" class=\"w-full h-full\">\n\t\t<Pane defaultSize={50} minSize={50} class=\"h-full flex flex-col w-full relative\">\n\t\t\t<Navbar\n\t\t\t\t{channel}\n\t\t\t\tonPin={(messageId, pinned) => {\n\t\t\t\t\tmessages = messages.map((message) => {\n\t\t\t\t\t\tif (message.id === messageId) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...message,\n\t\t\t\t\t\t\t\tis_pinned: pinned\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn message;\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tonUpdate={async () => {\n\t\t\t\t\tchannel = await getChannelById(localStorage.token, id).catch((error) => {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t/>\n\n\t\t\t{#if channel && messages !== null}\n\t\t\t\t<div class=\"flex-1 overflow-y-auto\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\" pb-2.5 max-w-full z-10 scrollbar-hidden w-full h-full pt-6 flex-1 flex flex-col-reverse overflow-auto\"\n\t\t\t\t\t\tid=\"messages-container\"\n\t\t\t\t\t\tbind:this={messagesContainerElement}\n\t\t\t\t\t\ton:scroll={(e) => {\n\t\t\t\t\t\t\tscrollEnd = Math.abs(messagesContainerElement.scrollTop) <= 50;\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{#key id}\n\t\t\t\t\t\t\t<Messages\n\t\t\t\t\t\t\t\t{channel}\n\t\t\t\t\t\t\t\t{top}\n\t\t\t\t\t\t\t\t{messages}\n\t\t\t\t\t\t\t\t{replyToMessage}\n\t\t\t\t\t\t\t\tonReply={async (message) => {\n\t\t\t\t\t\t\t\t\treplyToMessage = message;\n\t\t\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\t\t\tchatInputElement?.focus();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonThread={(id) => {\n\t\t\t\t\t\t\t\t\tthreadId = id;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonLoad={async () => {\n\t\t\t\t\t\t\t\t\tconst newMessages = await getChannelMessages(\n\t\t\t\t\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\tmessages.length\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\tmessages = [...messages, ...newMessages];\n\n\t\t\t\t\t\t\t\t\tif (newMessages.length < 50) {\n\t\t\t\t\t\t\t\t\t\ttop = true;\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/key}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\" pb-[1rem] px-2.5\">\n\t\t\t\t\t<MessageInput\n\t\t\t\t\t\tid=\"root\"\n\t\t\t\t\t\tbind:chatInputElement\n\t\t\t\t\t\tbind:replyToMessage\n\t\t\t\t\t\t{typingUsers}\n\t\t\t\t\t\t{channel}\n\t\t\t\t\t\tuserSuggestions={true}\n\t\t\t\t\t\tchannelSuggestions={true}\n\t\t\t\t\t\tdisabled={!channel?.write_access}\n\t\t\t\t\t\tplaceholder={!channel?.write_access\n\t\t\t\t\t\t\t? $i18n.t('You do not have permission to send messages in this channel.')\n\t\t\t\t\t\t\t: $i18n.t('Type here...')}\n\t\t\t\t\t\t{onChange}\n\t\t\t\t\t\tonSubmit={submitHandler}\n\t\t\t\t\t\t{scrollToBottom}\n\t\t\t\t\t\t{scrollEnd}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t{:else}\n\t\t\t\t<div class=\" flex items-center justify-center h-full w-full\">\n\t\t\t\t\t<div class=\"m-auto\">\n\t\t\t\t\t\t<Spinner className=\"size-5\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</Pane>\n\n\t\t{#if !largeScreen}\n\t\t\t{#if threadId !== null}\n\t\t\t\t<Drawer\n\t\t\t\t\tshow={threadId !== null}\n\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\tthreadId = null;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\" {threadId !== null ? ' h-screen  w-full' : 'px-6 py-4'} h-full\">\n\t\t\t\t\t\t<Thread\n\t\t\t\t\t\t\t{threadId}\n\t\t\t\t\t\t\t{channel}\n\t\t\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\t\t\tthreadId = null;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Drawer>\n\t\t\t{/if}\n\t\t{:else if threadId !== null}\n\t\t\t<PaneResizer\n\t\t\t\tclass=\"relative flex items-center justify-center group border-l border-gray-50 dark:border-gray-850/30 hover:border-gray-200 dark:hover:border-gray-800  transition z-20\"\n\t\t\t\tid=\"controls-resizer\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclass=\" absolute -left-1.5 -right-1.5 -top-0 -bottom-0 z-20 cursor-col-resize bg-transparent\"\n\t\t\t\t/>\n\t\t\t</PaneResizer>\n\n\t\t\t<Pane defaultSize={50} minSize={30} class=\"h-full w-full\">\n\t\t\t\t<div class=\"h-full w-full shadow-xl\">\n\t\t\t\t\t<Thread\n\t\t\t\t\t\t{threadId}\n\t\t\t\t\t\t{channel}\n\t\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\t\tthreadId = null;\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Pane>\n\t\t{/if}\n\t</PaneGroup>\n</div>\n","<script lang=\"ts\">\n\timport { page } from '$app/stores';\n\n\timport Channel from '$lib/components/channel/Channel.svelte';\n</script>\n\n<Channel id={$page.params.id} />\n"],"names":["className","strokeWidth","svg","root","$.set_class","$.clsx","$.set_attribute","$.append","$$anchor","dayjs","relativeTime","isToday","isYesterday","localizedFormat","i18n","getContext","message","$.prop","$$props","channel","showUserProfile","thread","replyToMessage","disabled","pending","onDelete","onEdit","onReply","onPin","onThread","onReaction","showButtons","edit","editedContent","showDeleteConfirmDialog","loadMessageData","_a","res","getMessageData","_b","onMount","$i18n","ConfirmDialog","node","$$value","div","root_1","node_2","$.child","div_1","root_2","div_2","node_3","EmojiPicker","$.set","name","Tooltip","button","root_5","node_4","FaceSmile","$.reset","$$render","consequent","button_1","root_7","node_6","ArrowUpLeftAlt","consequent_1","$.untrack","node_7","button_2","root_8","node_8","PinSlash","Pin","button_3","root_12","node_10","ChatBubbleOvalEllipsis","consequent_3","button_4","root_15","node_13","Pencil","consequent_4","button_5","root_17","node_15","GarbageBin","consequent_5","$user","$.template_effect","$.get","consequent_7","div_3","root_18","div_4","node_17","span","$.sibling","div_5","root_19","button_6","node_19","img","root_20","WEBUI_API_BASE_URL","img_1","root_21","_c","$0","div_6","div_7","Markdown","node_20","_d","messageElement","div_8","node_18","div_9","img_2","root_23","ProfilePreview","ProfileImage","div_10","root_27","node_24","consequent_12","alternate_3","div_11","Name","div_12","$.first_child","fragment_16","div_13","root_33","node_28","span_1","root_34","formatDate","consequent_17","div_14","root_37","Skeleton","node_31","div_15","root_39","file","fileUrl","$.derived_safe_equal","div_16","root_40","Image","video","root_43","FileItem","$settings","div_17","root_45","Textarea","node_36","e","isCmdOrCtrlPressed","isEnterPressed","div_18","div_19","button_7","text_7","button_8","text_8","div_20","fragment_25","node_38","span_2","root_49","text_9","div_21","root_50","div_22","reaction","acc","u","idx","total","separator","button_9","root_52","node_42","Emoji","div_23","root_53","div_24","root_56","node_45","consequent_26","div_25","root_57","button_10","span_3","span_4","span_5","ChevronRight","node_47","consequent_22","alternate_10","$.deep_read_state","_e","_f","_g","consequent_29","id","messages","top","onLoad","messagesLoading","loadMoreMessages","element","tick","messageList","Loader","root_3","Spinner","root_6","index","node_5","root_11","alternate_1","hr","alternate_2","$.each","messageIdx","Message","m","deleteMessage","error","toast","content","updateMessage","pinMessage","r","removeReaction","addReaction","consequent_6","onAdd","onRemove","search","page","users","query","orderBy","direction","getUserList","getChannelMembersById","err","node_1","fragment","Plus","$.event","$$args","root_4","input","$.remove_input_defaults","consequent_2","fragment_1","user","root_9","Badge","node_9","root_10","node_11","XMark","$_user","Pagination","alternate","show","onUpdate","groupIds","$.mutable_source","userIds","loading","submitHandler","addMembersById","reset","Modal","form","MemberSelector","text_1","showAddMembersModal","removeMemberHandler","userId","removeMembersById","AddMembersModal","fragment_2","Hashtag","Lock","UserList","messageId","pinned","pinnedMessages","allItemsLoaded","getPinnedMessages","getChannelPinnedMessages","init","showChannelPinnedMessagesModal","showChannelInfoModal","PinnedMessagesModal","ChannelInfoModal","nav","$showSidebar","Sidebar","showSidebar","$mobile","channelMembers","Users","node_14","root_16","UserAlt","consequent_9","UserMenu","showArchivedChats","consequent_10","threadId","onClose","messagesContainerElement","chatInputElement","typingUsers","typingUsersTimeout","scrollToBottom","$.mutate","initHandler","getChannelThreadMessages","goto","channelEventHandler","event","type","data","sendMessage","onChange","$socket","onDestroy","Messages","newMessages","MessageInput","currentId","scrollEnd","updateLastReadAt","channelId","channels","$channels","_channelId","getChannelById","getChannelMessages","tempId","uuidv4","ts","mediaQuery","largeScreen","$chatId","chatId","handleMediaQuery","$.head","$.document","a","i","arr","PaneGroup","Pane","Navbar","fragment_3","Drawer","Thread","PaneResizer","node_12","root_14","Channel","$page"],"mappings":"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"}