import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as Xe,g as Ye,f as y,c as r,e as J,w as d,k as c,r as t,t as D,s as _,a as f,d as Ze,j as e,n as oe,i as x,m as C,b as et,o as $t,q as kt,v as Pt,h as St,$ as Ct,A as Dt,x as Et,l as Y,aQ as Ht,u as Nt}from"../chunks/0WpKKl27.js";import{i as O}from"../chunks/Cmf4RC8y.js";import{e as Lt,i as jt}from"../chunks/u5Cnd4mY.js";import{h as Ot}from"../chunks/Bwqchdu-.js";import{r as Bt,a as qe}from"../chunks/CZ1y6KaE.js";import{a as It,b as Mt}from"../chunks/kb1CvZ3a.js";import{b as Fe}from"../chunks/Bo3ZTtFv.js";import{i as tt}from"../chunks/C3k0oZ3o.js";import{a as F,s as rt}from"../chunks/BVrWTcfB.js";import{t as xe}from"../chunks/DYdr9DjX.js";import{f as zt}from"../chunks/CsWaRabF.js";import{g as Ut}from"../chunks/B5RARo22.js";import{c as at,u as st,p as Ve,W as Wt}from"../chunks/PCOILo-8.js";import{b as Ke,g as Ge,c as At,d as Tt}from"../chunks/ClqMzEOS.js";import{k as Qe,s as Jt}from"../chunks/cX8aofVu.js";import{s as Rt}from"../chunks/3-JilrU5.js";import{p as se}from"../chunks/DpN1w328.js";import"../chunks/BtReZMDb.js";import{b as qt,c as _e}from"../chunks/DA2vpIKA.js";import{f as Ft}from"../chunks/Dbtivbjp.js";import{D as Vt}from"../chunks/DD5ATWsz.js";import{G as ot}from"../chunks/CYXXpf3O.js";import{T as Le}from"../chunks/Db0gdTVr.js";import{S as Kt}from"../chunks/DM0r1jA3.js";import{D as Gt}from"../chunks/DLpHo_PE.js";import{D as Qt}from"../chunks/CmPVC7JK.js";import{E as Xt}from"../chunks/C2rnPICT.js";import{C as Yt}from"../chunks/ByHAJgVC.js";import{S as Zt}from"../chunks/BqWDuYyJ.js";import{P as er}from"../chunks/BonmQdqt.js";import{C as tr}from"../chunks/DAAddo_l.js";import{S as rr}from"../chunks/BO1efK8r.js";import{X as ar}from"../chunks/CZmZoefv.js";import{V as sr}from"../chunks/3t3HGsuI.js";import{B as or}from"../chunks/DUufguWK.js";var ir=y('<!> <div class="flex items-center"> </div>',1),nr=y('<!> <div class="flex items-center"> </div>',1),lr=y('<!> <div class="flex items-center"> </div>',1),dr=y('<!> <div class="flex items-center"> </div>',1),vr=y('<!> <!> <!> <hr class="border-gray-50 dark:border-gray-850/30 my-1"/> <!>',1),cr=y('<div slot="content"><!></div>');function mr(Z,B){Xe(B,!1);const p=()=>F(ye,"$i18n",V),n=()=>F(at,"$config",V),ee=()=>F(st,"$user",V),[V,K]=rt(),ye=Ye("i18n");let ie=se(B,"shareHandler",8),G=se(B,"cloneHandler",8),be=se(B,"exportHandler",8),R=se(B,"deleteHandler",8),ne=se(B,"onClose",8),z=C(!1);tt(),Vt(Z,{get show(){return e(z)},set show(b){x(z,b)},$$events:{change:b=>{b.detail===!1&&ne()()}},children:(b,N)=>{{let I=oe(()=>(p(),d(()=>p().t("More"))));Le(b,{get content(){return e(I)},children:(U,te)=>{var k=Ze(),E=J(k);Rt(E,B,"default",{},null),f(U,k)},$$slots:{default:!0}})}},$$slots:{default:!0,content:(b,N)=>{var I=cr(),U=r(I);qt(U,{class:"w-full max-w-[170px] rounded-2xl p-1 border border-gray-100  dark:border-gray-800 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:-2,side:"bottom",align:"start",get transition(){return Ft},children:(te,k)=>{var E=vr(),le=J(E);{var he=w=>{_e(w,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl",$$events:{click:()=>{ie()()}},children:(L,S)=>{var h=ir(),l=J(h);Kt(l,{});var o=c(l,2),u=r(o,!0);t(o),D(g=>_(u,g),[()=>(p(),d(()=>p().t("Share")))]),f(L,h)},$$slots:{default:!0}})};O(le,w=>{n(),d(()=>n().features.enable_community_sharing)&&w(he)})}var de=c(le,2);_e(de,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{G()()}},children:(w,L)=>{var S=nr(),h=J(S);Gt(h,{});var l=c(h,2),o=r(l,!0);t(l),D(u=>_(o,u),[()=>(p(),d(()=>p().t("Clone")))]),f(w,S)},$$slots:{default:!0}});var ve=c(de,2);{var ce=w=>{_e(w,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{be()()}},children:(L,S)=>{var h=lr(),l=J(h);Qt(l,{});var o=c(l,2),u=r(o,!0);t(o),D(g=>_(u,g),[()=>(p(),d(()=>p().t("Export")))]),f(L,h)},$$slots:{default:!0}})};O(ve,w=>{ee(),d(()=>{var L,S,h,l;return((L=ee())==null?void 0:L.role)==="admin"||((l=(h=(S=ee())==null?void 0:S.permissions)==null?void 0:h.workspace)==null?void 0:l.prompts_export)})&&w(ce)})}var me=c(ve,4);_e(me,{class:"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{R()()}},children:(w,L)=>{var S=dr(),h=J(S);ot(h,{});var l=c(h,2),o=r(l,!0);t(l),D(u=>_(o,u),[()=>(p(),d(()=>p().t("Delete")))]),f(w,S)},$$slots:{default:!0}}),f(te,E)},$$slots:{default:!0}}),t(I),f(b,I)}},$$legacy:!0}),et(),K()}var ur=y('<div class=" text-sm text-gray-500 truncate"> <span class="  font-medium"> </span>.</div>'),fr=y('<button class="flex text-xs items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-200 transition"><div class=" self-center font-medium line-clamp-1"> </div></button>'),pr=y('<button class="flex text-xs items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-200 transition"><div class=" self-center font-medium line-clamp-1"> </div></button>'),gr=y('<div class="self-center pl-1.5 translate-y-[0.5px] rounded-l-xl bg-transparent"><button class="p-0.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-900 transition"><!></button></div>'),xr=y('<div class="shrink-0 text-gray-500"> </div>'),_r=y('<button class="self-center w-fit text-sm px-2 py-2 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl" type="button"><!></button>'),yr=y('<button class="self-center w-fit text-sm p-1.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl" type="button"><!></button>'),br=y('<a class=" flex space-x-4 cursor-pointer text-left w-full px-3 py-2.5 dark:hover:bg-gray-850/50 hover:bg-gray-50 transition rounded-2xl"><div class=" flex flex-col flex-1 space-x-4 cursor-pointer w-full pl-1"><div class="flex items-center justify-between w-full"><div class="flex items-center gap-2"><div class="font-medium line-clamp-1 capitalize"> </div> <div class="text-xs overflow-hidden text-ellipsis line-clamp-1 text-gray-500"> </div></div> <!></div> <div class=" text-xs"><!></div></div> <div class="flex flex-row gap-0.5 self-center"><!></div></a>'),hr=y('<div class="gap-2 grid my-2 px-3 lg:grid-cols-2"></div>'),wr=y('<div class=" w-full h-full flex flex-col justify-center items-center my-16 mb-24"><div class="max-w-md text-center"><div class=" text-3xl mb-3">ðŸ˜•</div> <div class=" text-lg font-medium mb-1"> </div> <div class=" text-gray-500 text-center text-xs"> </div></div></div>'),$r=y('<div class=" my-16"><div class=" text-xl font-medium mb-1 line-clamp-1"> </div> <a class=" flex cursor-pointer items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-850 w-full mb-2 px-3.5 py-1.5 rounded-xl transition" href="https://openwebui.com/prompts" target="_blank"><div class=" self-center"><div class=" font-medium line-clamp-1"> </div> <div class=" text-sm line-clamp-1"> </div></div> <div><div><!></div></div></a></div>'),kr=y('<!> <div class="flex flex-col gap-1 px-1 mt-1.5 mb-3"><input id="prompts-import-input" type="file" accept=".json" hidden=""/> <div class="flex justify-between items-center"><div class="flex items-center md:self-center text-xl font-medium px-0.5 gap-2 shrink-0"><div> </div> <div class="text-lg font-medium text-gray-500 dark:text-gray-500"> </div></div> <div class="flex w-full justify-end gap-1.5"><!> <!> <a class=" px-2 py-1.5 rounded-xl bg-black text-white dark:bg-white dark:text-black transition font-medium text-sm flex items-center" href="/workspace/prompts/create"><!> <div class=" hidden md:block md:ml-1 text-xs"> </div></a></div></div></div> <div class="py-2 bg-white dark:bg-gray-900 rounded-3xl border border-gray-100/30 dark:border-gray-850/30"><div class=" flex w-full space-x-2 py-0.5 px-3.5 pb-2"><div class="flex flex-1"><div class=" self-center ml-1 mr-3"><!></div> <input class=" w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent"/> <!></div></div> <div class="px-3 flex w-full bg-transparent overflow-x-auto scrollbar-none -mx-1"><div class="flex gap-0.5 w-fit text-center text-sm rounded-full bg-transparent px-1.5 whitespace-nowrap"><!></div></div> <!></div> <!>',1),Pr=y('<div class="w-full h-full flex justify-center items-center"><!></div>');function Sr(Z,B){Xe(B,!1);const p=()=>F(st,"$user",K),n=()=>F(be,"$i18n",K),ee=()=>F(Wt,"$WEBUI_NAME",K),V=()=>F(at,"$config",K),[K,ye]=rt(),{saveAs:ie}=zt;let G=C(!1);const be=Ye("i18n");let R=C(),ne=C(!1),z=C(null),b=C(""),N=C([]),I=C(!1),U=C(null),te=C(),k=C(""),E=C([]);const le=()=>{x(E,e(N).filter(l=>{var u,g,q,re;if(e(b)===""&&e(k)==="")return!0;const o=e(b).toLowerCase();return((l.title||"").toLowerCase().includes(o)||(l.command||"").toLowerCase().includes(o)||(((u=l.user)==null?void 0:u.name)||"").toLowerCase().includes(o)||(((g=l.user)==null?void 0:g.email)||"").toLowerCase().includes(o))&&(e(k)===""||e(k)==="created"&&l.user_id===((q=p())==null?void 0:q.id)||e(k)==="shared"&&l.user_id!==((re=p())==null?void 0:re.id))}))},he=async l=>{xe.success(n().t("Redirecting you to Open WebUI Community"));const o="https://openwebui.com",u=await window.open(`${o}/prompts/create`,"_blank");window.addEventListener("message",g=>{g.origin===o&&g.data==="loaded"&&u.postMessage(JSON.stringify(l),"*")},!1)},de=async l=>{const o={...l};o.title=`${o.title} (Clone)`;const u=o.command.startsWith("/")?o.command.substring(1):o.command;o.command=Jt(`${u} clone`),sessionStorage.prompt=JSON.stringify(o),Ut("/workspace/prompts/create")},ve=async l=>{let o=new Blob([JSON.stringify([l])],{type:"application/json"});ie(o,`prompt-export-${Date.now()}.json`)},ce=async l=>{const o=l.command;await Tt(localStorage.token,o).catch(g=>(xe.error(g),null))&&xe.success(n().t("Deleted {{name}}",{name:o})),await me()},me=async()=>{x(N,await Ke(localStorage.token)),await Ve.set(await Ge(localStorage.token))};$t(async()=>{x(k,(localStorage==null?void 0:localStorage.workspaceViewOption)||""),await me(),x(ne,!0);const l=g=>{g.key==="Shift"&&x(G,!0)},o=g=>{g.key==="Shift"&&x(G,!1)},u=()=>{x(G,!1)};return window.addEventListener("keydown",l),window.addEventListener("keyup",o),window.addEventListener("blur",u),()=>{window.removeEventListener("keydown",l),window.removeEventListener("keyup",o),window.removeEventListener("blur",u)}}),kt(()=>(e(N),e(b),e(k)),()=>{e(N)&&e(b)!==void 0&&e(k)!==void 0&&le()}),Pt(),tt();var w=Ze();Ot("1jqd4z5",l=>{St(o=>{Ct.title=`
		${o??""} â€¢ ${ee()??""}
	`},[()=>(n(),d(()=>n().t("Prompts")))])});var L=J(w);{var S=l=>{var o=kr(),u=J(o);{let a=oe(()=>(n(),d(()=>n().t("Delete prompt?"))));Yt(u,{get title(){return e(a)},get show(){return e(I)},set show(i){x(I,i)},$$events:{confirm:()=>{ce(e(U))}},children:(i,v)=>{var s=ur(),m=r(s),P=c(m),H=r(P,!0);t(P),Dt(),t(s),D(M=>{_(m,`${M??""} `),_(H,(e(U),d(()=>e(U).command)))},[()=>(n(),d(()=>n().t("This will delete")))]),f(i,s)},$$slots:{default:!0},$$legacy:!0})}var g=c(u,2),q=r(g);Fe(q,a=>x(R,a),()=>e(R));var re=c(q,2),we=r(re),$e=r(we),it=r($e,!0);t($e);var je=c($e,2),nt=r(je,!0);t(je),t(we);var Oe=c(we,2),Be=r(Oe);{var lt=a=>{var i=fr(),v=r(i),s=r(v,!0);t(v),t(i),D(m=>_(s,m),[()=>(n(),d(()=>n().t("Import")))]),Y("click",i,()=>{e(R).click()}),f(a,i)};O(Be,a=>{p(),d(()=>{var i,v,s,m;return((i=p())==null?void 0:i.role)==="admin"||((m=(s=(v=p())==null?void 0:v.permissions)==null?void 0:s.workspace)==null?void 0:m.prompts_import)})&&a(lt)})}var Ie=c(Be,2);{var dt=a=>{var i=pr(),v=r(i),s=r(v,!0);t(v),t(i),D(m=>_(s,m),[()=>(n(),d(()=>n().t("Export")))]),Y("click",i,async()=>{let m=new Blob([JSON.stringify(e(N))],{type:"application/json"});ie(m,`prompts-export-${Date.now()}.json`)}),f(a,i)};O(Ie,a=>{e(N),p(),d(()=>{var i,v,s,m;return e(N).length&&(((i=p())==null?void 0:i.role)==="admin"||((m=(s=(v=p())==null?void 0:v.permissions)==null?void 0:s.workspace)==null?void 0:m.prompts_export))})&&a(dt)})}var Me=c(Ie,2),ze=r(Me);er(ze,{className:"size-3",strokeWidth:"2.5"});var Ue=c(ze,2),vt=r(Ue,!0);t(Ue),t(Me),t(Oe),t(re),t(g);var ke=c(g,2),Pe=r(ke),We=r(Pe),Se=r(We),ct=r(Se);Zt(ct,{className:"size-3.5"}),t(Se);var ue=c(Se,2);Bt(ue);var mt=c(ue,2);{var ut=a=>{var i=gr(),v=r(i),s=r(v);ar(s,{className:"size-3",strokeWidth:"2"}),t(v),t(i),Y("click",v,()=>{x(b,"")}),f(a,i)};O(mt,a=>{e(b)&&a(ut)})}t(We),t(Pe);var fe=c(Pe,2),Ce=r(fe),ft=r(Ce);sr(ft,{onChange:async a=>{localStorage.workspaceViewOption=a,await Et()},get value(){return e(k)},set value(a){x(k,a)},$$legacy:!0}),t(Ce),Fe(Ce,a=>x(te,a),()=>e(te)),t(fe);var pt=c(fe,2);{var gt=a=>{var i=hr();Lt(i,5,()=>e(E),jt,(v,s)=>{var m=br(),P=r(m),H=r(P),M=r(H),W=r(M),De=r(W,!0);t(W);var ae=c(W,2),pe=r(ae,!0);t(ae),t(M);var Ee=c(M,2);{var He=$=>{{let j=oe(()=>(n(),d(()=>n().t("Read Only"))));or($,{type:"muted",get content(){return e(j)}})}};O(Ee,$=>{e(s),d(()=>!e(s).write_access)&&$(He)})}t(H);var ge=c(H,2),Ne=r(ge);{let $=oe(()=>(e(s),n(),d(()=>{var j,Q;return((Q=(j=e(s))==null?void 0:j.user)==null?void 0:Q.email)??n().t("Deleted User")})));Le(Ne,{get content(){return e($)},className:"flex shrink-0",placement:"top-start",children:(j,Q)=>{var A=xr(),T=r(A,!0);t(A),D(X=>_(T,X),[()=>(n(),Nt(Qe),e(s),d(()=>{var X,Te,Je,Re;return n().t("By {{name}}",{name:Qe(((Te=(X=e(s))==null?void 0:X.user)==null?void 0:Te.name)??((Re=(Je=e(s))==null?void 0:Je.user)==null?void 0:Re.email)??n().t("Deleted User"))})}))]),f(j,A)},$$slots:{default:!0}})}t(ge),t(P);var Ae=c(P,2),bt=r(Ae);{var ht=$=>{{let j=oe(()=>(n(),d(()=>n().t("Delete"))));Le($,{get content(){return e(j)},children:(Q,A)=>{var T=_r(),X=r(T);ot(X,{}),t(T),Y("click",T,()=>{ce(e(s))}),f(Q,T)},$$slots:{default:!0}})}},wt=$=>{mr($,{shareHandler:()=>{he(e(s))},cloneHandler:()=>{de(e(s))},exportHandler:()=>{ve(e(s))},deleteHandler:async()=>{x(U,e(s)),x(I,!0)},onClose:()=>{},children:(j,Q)=>{var A=yr(),T=r(A);Xt(T,{className:"size-5"}),t(A),f(j,A)},$$slots:{default:!0}})};O(bt,$=>{e(G)?$(ht):$(wt,!1)})}t(Ae),t(m),D($=>{qe(m,"href",$),_(De,(e(s),d(()=>e(s).title))),_(pe,(e(s),d(()=>e(s).command)))},[()=>(e(s),d(()=>`/workspace/prompts/edit?command=${encodeURIComponent(e(s).command)}`))]),f(v,m)}),t(i),f(a,i)},xt=a=>{var i=wr(),v=r(i),s=c(r(v),2),m=r(s,!0);t(s);var P=c(s,2),H=r(P,!0);t(P),t(v),t(i),D((M,W)=>{_(m,M),_(H,W)},[()=>(n(),d(()=>n().t("No prompts found"))),()=>(n(),d(()=>n().t("Try adjusting your search or filter to find what you are looking for.")))]),f(a,i)};O(pt,a=>{e(E),d(()=>(e(E)??[]).length!==0)?a(gt):a(xt,!1)})}t(ke);var _t=c(ke,2);{var yt=a=>{var i=$r(),v=r(i),s=r(v,!0);t(v);var m=c(v,2),P=r(m),H=r(P),M=r(H,!0);t(H);var W=c(H,2),De=r(W,!0);t(W),t(P);var ae=c(P,2),pe=r(ae),Ee=r(pe);tr(Ee,{}),t(pe),t(ae),t(m),t(i),D((He,ge,Ne)=>{_(s,He),_(M,ge),_(De,Ne)},[()=>(n(),d(()=>n().t("Made by Open WebUI Community"))),()=>(n(),d(()=>n().t("Discover a prompt"))),()=>(n(),d(()=>n().t("Discover, download, and explore custom prompts")))]),f(a,i)};O(_t,a=>{V(),d(()=>{var i;return(i=V())==null?void 0:i.features.enable_community_sharing})&&a(yt)})}D((a,i,v)=>{_(it,a),_(nt,(e(E),d(()=>e(E).length))),_(vt,i),qe(ue,"placeholder",v)},[()=>(n(),d(()=>n().t("Prompts"))),()=>(n(),d(()=>n().t("New Prompt"))),()=>(n(),d(()=>n().t("Search Prompts")))]),It(q,()=>e(z),a=>x(z,a)),Y("change",q,()=>{e(z);const a=new FileReader;a.onload=async i=>{const v=JSON.parse(i.target.result);for(const s of v)await At(localStorage.token,{command:s.command.charAt(0)==="/"?s.command.slice(1):s.command,title:s.title,content:s.content}).catch(m=>(xe.error(`${m}`),null));x(N,await Ke(localStorage.token)),await Ve.set(await Ge(localStorage.token)),x(z,[]),Ht(R,e(R).value="")},a.readAsText(e(z)[0])}),Mt(ue,()=>e(b),a=>x(b,a)),Y("wheel",fe,a=>{a.deltaY!==0&&(a.preventDefault(),a.currentTarget.scrollLeft+=a.deltaY)}),f(l,o)},h=l=>{var o=Pr(),u=r(o);rr(u,{className:"size-5"}),t(o),f(l,o)};O(L,l=>{e(ne)?l(S):l(h,!1)})}f(Z,w),et(),ye()}function va(Z){Sr(Z,{})}export{va as component};
//# sourceMappingURL=37.9vH0azFK.js.map
