{"version":3,"file":"36.ChPv5wiS.js","sources":["../../../../../../src/routes/(app)/workspace/models/edit/+page.svelte"],"sourcesContent":["<script>\n\timport { toast } from 'svelte-sonner';\n\timport { goto } from '$app/navigation';\n\n\timport { onMount, getContext } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport { page } from '$app/stores';\n\timport { config, models, settings } from '$lib/stores';\n\n\timport { getModelById, updateModelById } from '$lib/apis/models';\n\n\timport { getModels } from '$lib/apis';\n\timport ModelEditor from '$lib/components/workspace/Models/ModelEditor.svelte';\n\n\tlet model = null;\n\n\tonMount(async () => {\n\t\tconst _id = $page.url.searchParams.get('id');\n\t\tif (_id) {\n\t\t\tmodel = await getModelById(localStorage.token, _id).catch((e) => {\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\t\tif (!model) {\n\t\t\t\tgoto('/workspace/models');\n\t\t\t}\n\n\t\t\tif (!model?.write_access) {\n\t\t\t\ttoast.error($i18n.t('You do not have permission to edit this model'));\n\t\t\t\tgoto('/workspace/models');\n\t\t\t}\n\t\t} else {\n\t\t\tgoto('/workspace/models');\n\t\t}\n\t});\n\n\tconst onSubmit = async (modelInfo) => {\n\t\tconst res = await updateModelById(localStorage.token, modelInfo.id, modelInfo);\n\n\t\tif (res) {\n\t\t\tawait models.set(\n\t\t\t\tawait getModels(\n\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t$config?.features?.enable_direct_connections && ($settings?.directConnections ?? null)\n\t\t\t\t)\n\t\t\t);\n\t\t\ttoast.success($i18n.t('Model updated successfully'));\n\t\t\tawait goto('/workspace/models');\n\t\t}\n\t};\n</script>\n\n{#if model}\n\t<ModelEditor edit={true} {model} {onSubmit} />\n{/if}\n"],"names":["i18n","getContext","model","onMount","_id","$page","$.set","getModelById","e","$.get","goto","toast","$i18n","onSubmit","modelInfo","updateModelById","models","getModels","_b","_a","$config","_c","$settings","ModelEditor","$$anchor","$$render","consequent"],"mappings":"gnBAAA,mHAKOA,EAAOC,EAAW,MAAM,EAU1B,IAAAC,IAAQ,IAAI,EAEhBC,EAAO,SAAa,aACbC,EAAMC,EAAK,EAAC,IAAI,aAAa,IAAI,IAAI,EACvCD,GACHE,EAAAJ,EAAK,MAASK,EAAa,aAAa,MAAOH,CAAG,EAAE,MAAOI,GACnD,IACP,CAAA,EAEIC,EAAAP,CAAK,GACTQ,EAAK,mBAAmB,OAGpBR,CAAK,YAAE,eACXS,EAAM,MAAMC,EAAK,EAAC,EAAE,+CAA+C,CAAA,EACnEF,EAAK,mBAAmB,IAGzBA,EAAK,mBAAmB,CAE1B,CAAC,QAEKG,EAAQ,MAAUC,GAAc,WAC5B,MAASC,EAAgB,aAAa,MAAOD,EAAU,GAAIA,CAAS,IAGtE,MAAAE,EAAO,IAAG,MACTC,EACL,aAAa,QACbC,GAAAC,EAAAC,EAAO,IAAP,YAAAD,EAAS,WAAT,YAAAD,EAAmB,+BAA8BG,EAAAC,EAAS,IAAT,YAAAD,EAAW,oBAAqB,KAAI,CAAA,EAGvFV,EAAM,QAAQC,EAAK,EAAC,EAAE,4BAA4B,CAAA,EAC5C,MAAAF,EAAK,mBAAmB,EAEhC,kCAICa,EAAWC,EAAA,MAAO,wBAAOtB,CAAK,GAAG,SAAAW,eAD9BX,CAAK,GAAAuB,EAAAC,CAAA,kBAFF"}