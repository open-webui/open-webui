import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as E,g as k,o as v,d as D,e as x,a as N,b as A,i as d,m as B,j as g}from"../chunks/0WpKKl27.js";import{k as C}from"../chunks/fZxlt1qL.js";import{i as J}from"../chunks/C3k0oZ3o.js";import{s as L,a as r}from"../chunks/BVrWTcfB.js";import{t as a}from"../chunks/DYdr9DjX.js";import{g as O}from"../chunks/B5RARo22.js";import{a as f,c as P,b as U}from"../chunks/PCOILo-8.js";import{b as j}from"../chunks/DLhnqOlE.js";import{c as F}from"../chunks/DnFm3dkE.js";import{g as R}from"../chunks/B6gyXX6T.js";import{M as W}from"../chunks/BsWq2Zn6.js";function te(u,w){E(w,!1);const _=()=>r(f,"$models",s),i=()=>r(S,"$i18n",s),$=()=>r(P,"$config",s),h=()=>r(U,"$settings",s),[s,b]=L(),S=k("i18n"),y=async e=>{var t,c,p;if(_().find(l=>l.id===e.id)){a.error(i().t("Error: A model with the ID '{{modelId}}' already exists. Please select a different ID to proceed.",{modelId:e.id}));return}if(e.id===""){a.error(i().t("Error: Model ID cannot be empty. Please enter a valid ID to proceed."));return}e&&await F(localStorage.token,{...e,meta:{...e.meta,profile_image_url:e.meta.profile_image_url??`${j}/static/favicon.png`,suggestion_prompts:e.meta.suggestion_prompts?e.meta.suggestion_prompts.filter(n=>n.content!==""):null},params:{...e.params}}).catch(n=>(a.error(`${n}`),null))&&(await f.set(await R(localStorage.token,((c=(t=$())==null?void 0:t.features)==null?void 0:c.enable_direct_connections)&&(((p=h())==null?void 0:p.directConnections)??null))),a.success(i().t("Model created successfully!")),await O("/workspace/models"))};let o=B(null);v(async()=>{window.addEventListener("message",async e=>{if(["https://openwebui.com","https://www.openwebui.com","http://localhost:9999"].includes(e.origin))try{let t=JSON.parse(e.data);t!=null&&t.info&&(t=t.info),d(o,t)}catch(t){}}),(window.opener??!1)&&window.opener.postMessage("loaded","*"),sessionStorage.model&&(d(o,JSON.parse(sessionStorage.model)),sessionStorage.removeItem("model"))}),J();var m=D(),M=x(m);C(M,()=>g(o),e=>{W(e,{get model(){return g(o)},onSubmit:y})}),N(u,m),A(),b()}export{te as component};
//# sourceMappingURL=35.rDoUlkFF.js.map
