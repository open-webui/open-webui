import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as B,g as M,o as C,d as S,e as h,a as p,b as D,i as c,m as f,j as t,f as J,c as P,n as l,r as Q}from"../chunks/0WpKKl27.js";import{i as j}from"../chunks/Cmf4RC8y.js";import{k as H}from"../chunks/fZxlt1qL.js";import{i as L}from"../chunks/C3k0oZ3o.js";import{s as z,a as g}from"../chunks/BVrWTcfB.js";import{t as d}from"../chunks/DYdr9DjX.js";import{g as A}from"../chunks/B5RARo22.js";import{f as G,a as K,c as T,b as X}from"../chunks/PCOILo-8.js";import{c as Y,g as Z}from"../chunks/Dcv_5MKS.js";import{F as ee}from"../chunks/CfUGEAnO.js";import{g as oe}from"../chunks/B6gyXX6T.js";import{e as te,c as ne}from"../chunks/cX8aofVu.js";import{W as I}from"../chunks/DLhnqOlE.js";var se=J('<div class="px-[16px] h-full"><!></div>');function $e(b,N){B(N,!1);const _=()=>g(k,"$i18n",m),O=()=>g(T,"$config",m),R=()=>g(X,"$settings",m),[m,V]=z(),k=M("i18n");let v=f(!1),w=f(!1),n=f(null);const F=async e=>{var r,a,i;const s=te(e.content);if(ne((s==null?void 0:s.required_open_webui_version)??"0.0.0",I)){d.error(_().t("Open WebUI version (v{{OPEN_WEBUI_VERSION}}) is lower than required version (v{{REQUIRED_VERSION}})",{OPEN_WEBUI_VERSION:I,REQUIRED_VERSION:(s==null?void 0:s.required_open_webui_version)??"0.0.0"}));return}await Y(localStorage.token,{id:e.id,name:e.name,meta:e.meta,content:e.content}).catch(u=>(d.error(`${u}`),null))&&(d.success(_().t("Function created successfully")),G.set(await Z(localStorage.token)),K.set(await oe(localStorage.token,((a=(r=O())==null?void 0:r.features)==null?void 0:a.enable_direct_connections)&&(((i=R())==null?void 0:i.directConnections)??null),!1,!0)),await A("/admin/functions"))};C(()=>{window.addEventListener("message",async e=>{["https://openwebui.com","https://www.openwebui.com","http://localhost:9999"].includes(e.origin)&&(c(n,JSON.parse(e.data)),t(n))}),(window.opener??!1)&&window.opener.postMessage("loaded","*"),sessionStorage.function&&(c(n,JSON.parse(sessionStorage.function)),sessionStorage.removeItem("function"),t(n),c(w,!0)),c(v,!0)}),L();var E=S(),U=h(E);{var q=e=>{var s=S(),$=h(s);H($,()=>{var r;return(r=t(n))==null?void 0:r.content},r=>{var a=se(),i=P(a);{let u=l(()=>{var o;return((o=t(n))==null?void 0:o.id)??""}),x=l(()=>{var o;return((o=t(n))==null?void 0:o.name)??""}),W=l(()=>{var o;return((o=t(n))==null?void 0:o.meta)??{description:""}}),y=l(()=>{var o;return((o=t(n))==null?void 0:o.content)??""});ee(i,{get id(){return t(u)},get name(){return t(x)},get meta(){return t(W)},get content(){return t(y)},get clone(){return t(w)},onSave:o=>{F(o)}})}Q(a),p(r,a)}),p(e,s)};j(U,e=>{t(v)&&e(q)})}p(b,E),D(),V()}export{$e as component};
//# sourceMappingURL=15.DPdhcRh7.js.map
