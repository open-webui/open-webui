const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/twlQqEV6.js","../chunks/C1FmrZbK.js","../chunks/QjJsDpFa.js","../chunks/D3WR28n5.js","../chunks/cX8aofVu.js","../chunks/BC4znSyB.js","../chunks/DLhnqOlE.js"])))=>i.map(i=>d[i]);
import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as St,g as Mt,q as Kt,i as s,j as e,m as y,u as We,v as ca,f,e as Ie,n as Ze,k as l,c as a,r as t,t as $,w as o,s as v,l as V,a as d,z as ia,b as At,B as ua,y as ha,d as dt,x as va,o as oa,aM as vr,A as sr,aQ as da,aP as La,bw as $n,aR as Hn}from"../chunks/0WpKKl27.js";import{i as D}from"../chunks/Cmf4RC8y.js";import{s as Mr}from"../chunks/3-JilrU5.js";import{t as rl}from"../chunks/DXo52D7g.js";import{a as Be,s as Ye,c as Ua,f as Id,r as sa,i as Ed,b as Pd,h as qo,d as or}from"../chunks/CZ1y6KaE.js";import{i as It}from"../chunks/C3k0oZ3o.js";import{a as Ce,s as Pt,d as Cs,m as Ss}from"../chunks/BVrWTcfB.js";import{t as Ve}from"../chunks/DYdr9DjX.js";import{f as Nr}from"../chunks/CsWaRabF.js";import{g as ga}from"../chunks/B5RARo22.js";import{p as sl}from"../chunks/CLoTtgoA.js";import{f as Rn,s as Ld}from"../chunks/CiB29Aqe.js";import{B as Md,i as Vn,C as Kn,g as qn,D as jd}from"../chunks/B6gyXX6T.js";import{g as Nd}from"../chunks/gENSTQXg.js";import{g as Td}from"../chunks/DbVsO-UY.js";import{u as gr,l as Dd,g as Bd}from"../chunks/BaVH4moA.js";import{b as As,a as Aa,W as lr,e as zd}from"../chunks/DLhnqOlE.js";import{d as Zn,l as Gn,z as Od,h as kn,n as Cn,c as Yn,b as Ud,S as Wd,U as Sn,m as Fd}from"../chunks/cX8aofVu.js";import{u as za,L as ol,b as ta,e as jr,w as Is,R as Va,s as na,S as Hd,r as Ba,v as Ka,U as dr,m as mr,h as Ir,c as Ma,a as Ms,V as ys,g as ws,X as pr,i as Rd,Y as ir,z as nr,n as Vd,W as ll,N as ks,q as Kd,A as Jn,D as $s,C as Fo,O as qd,t as Zd}from"../chunks/PCOILo-8.js";import{e as Ht,i as wa}from"../chunks/u5Cnd4mY.js";import{b as Qa}from"../chunks/Bo3ZTtFv.js";import{w as Cr,x as Gd,y as Xn,z as Yd,A as Zo,B as Jd,a as Ja,d as Xd,j as nl,u as Qd,i as Fa,v as Er,t as Es,C as ev,p as tv,D as Pr,q as av,E as An,F as rv,G as sv,H as ov}from"../chunks/DR3TfYWm.js";import{g as In,b as Go,d as lv,u as nv,c as iv,a as dv,e as vv}from"../chunks/DesYX7fr.js";import{p as me}from"../chunks/DpN1w328.js";import{C as cv,U as uv}from"../chunks/D10Dw6TQ.js";import{C as cr}from"../chunks/ByHAJgVC.js";import{S as $a}from"../chunks/BO1efK8r.js";import{A as Qn,s as Sa,U as En,S as Pa}from"../chunks/DB6UFW7h.js";import{b as aa,c as fv,a as il}from"../chunks/kb1CvZ3a.js";import{_ as Yo}from"../chunks/C1FmrZbK.js";import{C as Ps}from"../chunks/BtReZMDb.js";import{M as Pn,a as Ln,b as Mn}from"../chunks/DCQoPc4L.js";import{b as gv,c as Ra}from"../chunks/DA2vpIKA.js";import{f as Ho}from"../chunks/Dbtivbjp.js";import{D as pv}from"../chunks/DD5ATWsz.js";import{G as dl}from"../chunks/CYXXpf3O.js";import{P as mv}from"../chunks/DVjsywiU.js";import{T as Zt}from"../chunks/Db0gdTVr.js";import{S as hv}from"../chunks/DM0r1jA3.js";import{D as _v}from"../chunks/DLpHo_PE.js";import{D as xv}from"../chunks/CmPVC7JK.js";import{a as jn,P as bv}from"../chunks/DetCT4Dy.js";import{M as ei}from"../chunks/C-5A-I7X.js";import{S as yv,F as ti,a as wv}from"../chunks/C8udzHqa.js";import{S as $v}from"../chunks/D_50Gyqd.js";import{L as ai}from"../chunks/l5Bi75JT.js";import{C as Jo}from"../chunks/DAAddo_l.js";import{C as ri,f as kv}from"../chunks/mfo8rR81.js";import{P as ur}from"../chunks/BonmQdqt.js";import{b as Cv}from"../chunks/CMoC6kdu.js";import Xo from"../chunks/B9ZVCkUG.js";import{F as Sv}from"../chunks/CmQv0SfQ.js";import{E as Av}from"../chunks/C2rnPICT.js";import{E as si}from"../chunks/BwmNngm2.js";import{l as Iv,m as Ev,n as Pv,o as Lv,q as Mv,t as jv,v as Nv,w as Tv,k as Dv}from"../chunks/CuJG2T8v.js";import{p as er,s as Nn}from"../chunks/Bfc47y5P.js";import{M as qa}from"../chunks/CcreKc1w.js";import{A as Bv}from"../chunks/DlVfwdnV.js";import{X as Oa}from"../chunks/CZmZoefv.js";import{M as zv,U as Ov}from"../chunks/BTu22fOQ.js";import{d as Ya}from"../chunks/BC4znSyB.js";import{C as oi,M as li,A as ni,a as Uv,b as Wv,W as Fv}from"../chunks/G8umJYZj.js";import{H as Hv,L as Rv}from"../chunks/CG-UgebJ.js";import{P as Qo}from"../chunks/DBF3PzWb.js";import{S as Ls}from"../chunks/BqWDuYyJ.js";import{c as Vv}from"../chunks/Q6Bnvzbc.js";import"../chunks/BkyXqnA-.js";import{c as Kv}from"../chunks/i8IuCWOI.js";import{S as Tn}from"../chunks/CGW29DRJ.js";import{S as qv}from"../chunks/C83syoBY.js";import{P as Zv}from"../chunks/C-WU2PKw.js";import{m as Gv,g as Dn,n as Yv,o as Jv,p as Xv,q as Qv}from"../chunks/iLDRgysW.js";import{S as Lr}from"../chunks/B41Ah4PR.js";import{T as vl}from"../chunks/CWXf-F9t.js";import{g as ec}from"../chunks/DyQj18XO.js";import{g as tc,c as ac}from"../chunks/owMDqXnQ.js";import{A as rc}from"../chunks/D_eQ6KZY.js";import{s as sc,C as oc}from"../chunks/C947dqkj.js";import{S as xt}from"../chunks/NOxjCBoP.js";import{b as lc}from"../chunks/CjABQmgs.js";import{L as nc}from"../chunks/1w6CVy8g.js";import{h as ii}from"../chunks/BzXoxdC4.js";const ic=(M,c)=>c.some(r=>M instanceof r);let Bn,zn;function dc(){return Bn||(Bn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vc(){return zn||(zn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const di=new WeakMap,el=new WeakMap,vi=new WeakMap,Ro=new WeakMap,cl=new WeakMap;function cc(M){const c=new Promise((r,i)=>{const n=()=>{M.removeEventListener("success",P),M.removeEventListener("error",L)},P=()=>{r(Xa(M.result)),n()},L=()=>{i(M.error),n()};M.addEventListener("success",P),M.addEventListener("error",L)});return c.then(r=>{r instanceof IDBCursor&&di.set(r,M)}).catch(()=>{}),cl.set(c,M),c}function uc(M){if(el.has(M))return;const c=new Promise((r,i)=>{const n=()=>{M.removeEventListener("complete",P),M.removeEventListener("error",L),M.removeEventListener("abort",L)},P=()=>{r(),n()},L=()=>{i(M.error||new DOMException("AbortError","AbortError")),n()};M.addEventListener("complete",P),M.addEventListener("error",L),M.addEventListener("abort",L)});el.set(M,c)}let tl={get(M,c,r){if(M instanceof IDBTransaction){if(c==="done")return el.get(M);if(c==="objectStoreNames")return M.objectStoreNames||vi.get(M);if(c==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Xa(M[c])},set(M,c,r){return M[c]=r,!0},has(M,c){return M instanceof IDBTransaction&&(c==="done"||c==="store")?!0:c in M}};function fc(M){tl=M(tl)}function gc(M){return M===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(c,...r){const i=M.call(Vo(this),c,...r);return vi.set(i,c.sort?c.sort():[c]),Xa(i)}:vc().includes(M)?function(...c){return M.apply(Vo(this),c),Xa(di.get(this))}:function(...c){return Xa(M.apply(Vo(this),c))}}function pc(M){return typeof M=="function"?gc(M):(M instanceof IDBTransaction&&uc(M),ic(M,dc())?new Proxy(M,tl):M)}function Xa(M){if(M instanceof IDBRequest)return cc(M);if(Ro.has(M))return Ro.get(M);const c=pc(M);return c!==M&&(Ro.set(M,c),cl.set(c,M)),c}const Vo=M=>cl.get(M);function mc(M,c,{blocked:r,upgrade:i,blocking:n,terminated:P}={}){const L=indexedDB.open(M,c),ee=Xa(L);return i&&L.addEventListener("upgradeneeded",_=>{i(Xa(L.result),_.oldVersion,_.newVersion,Xa(L.transaction),_)}),r&&L.addEventListener("blocked",_=>r(_.oldVersion,_.newVersion,_)),ee.then(_=>{P&&_.addEventListener("close",()=>P()),n&&_.addEventListener("versionchange",W=>n(W.oldVersion,W.newVersion,W))}).catch(()=>{}),ee}function On(M,{blocked:c}={}){const r=indexedDB.deleteDatabase(M);return c&&r.addEventListener("blocked",i=>c(i.oldVersion,i)),Xa(r).then(()=>{})}const hc=["get","getKey","getAll","getAllKeys","count"],_c=["put","add","delete","clear"],Ko=new Map;function Un(M,c){if(!(M instanceof IDBDatabase&&!(c in M)&&typeof c=="string"))return;if(Ko.get(c))return Ko.get(c);const r=c.replace(/FromIndex$/,""),i=c!==r,n=_c.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(n||hc.includes(r)))return;const P=async function(L,...ee){const _=this.transaction(L,n?"readwrite":"readonly");let W=_.store;return i&&(W=W.index(ee.shift())),(await Promise.all([W[r](...ee),n&&_.done]))[0]};return Ko.set(c,P),P}fc(M=>({...M,get:(c,r,i)=>Un(c,r)||M.get(c,r,i),has:(c,r)=>!!Un(c,r)||M.has(c,r)}));var xc=f('<div slot="footer"><div class="flex flex-wrap text-sm font-medium gap-1.5 mt-2 m-1 justify-end w-full"><button class=" px-3.5 py-1.5 font-medium hover:bg-black/5 dark:hover:bg-white/5 outline outline-1 outline-gray-100 dark:outline-gray-800 rounded-3xl"><!></button> <button class="px-3.5 py-1.5 font-medium hover:bg-black/5 dark:hover:bg-white/5 outline outline-1 outline-gray-100 dark:outline-gray-800 rounded-3xl"> </button></div></div>'),bc=f("<!> <!>",1);function ci(M,c){St(c,!1);const r=()=>Ce(L,"$i18n",i),[i,n]=Pt(),{saveAs:P}=Nr,L=Mt("i18n");let ee=me(c,"show",12,!1),_=me(c,"onUpdate",8,()=>{}),W=y(!1),u=y(null),J=1,p=y(""),b=y("updated_at"),m=y("desc"),q=y(!1),O=y(!1),K,Z=y(!1),h=y({});const k=async()=>{ee()&&(K&&clearTimeout(K),J=1,s(u,null),e(p)===""?s(u,await Cr(localStorage.token,J,e(h))):K=setTimeout(async()=>{s(u,await Cr(localStorage.token,J,e(h)))},500),(e(u)??[]).length===0?s(q,!0):s(q,!1))},U=async()=>{s(O,!0),J+=1;let w=[];e(p)?w=await Cr(localStorage.token,J,e(h)):w=await Cr(localStorage.token,J,e(h)),s(q,w.length===0),w.length>0&&s(u,[...e(u)||[],...w]),s(O,!1)},E=async()=>{const w=await Gd(localStorage.token);let oe=new Blob([JSON.stringify(w)],{type:"application/json"});P(oe,`${r().t("archived-chat-export")}-${Date.now()}.json`)},se=async w=>{await Xn(localStorage.token,w).catch(oe=>{Ve.error(`${oe}`)}),_()(),ne()},H=async()=>{s(W,!0);try{await Yd(localStorage.token),Ve.success(r().t("All chats have been unarchived.")),_()(),await ne()}catch(w){Ve.error(`${w}`)}finally{s(W,!1)}},ne=async()=>{s(u,await Cr(localStorage.token))};Kt(()=>(e(p),e(b),e(m)),()=>{s(h,{...e(p)?{query:e(p)}:{},...e(b)?{order_by:e(b)}:{},...e(m)?{direction:e(m)}:{}})}),Kt(()=>e(h),()=>{e(h)!==null&&k()}),Kt(()=>We(ee()),()=>{ee()&&ne()}),ca(),It();var le=bc(),X=Ie(le);{let w=Ze(()=>(r(),o(()=>r().t("Are you sure you want to unarchive all archived chats?")))),oe=Ze(()=>(r(),o(()=>r().t("Unarchive All"))));cr(X,{get message(){return e(w)},get confirmLabel(){return e(oe)},get show(){return e(Z)},set show(ve){s(Z,ve)},$$events:{confirm:()=>{H()}},$$legacy:!0})}var ue=l(X,2);{let w=Ze(()=>(r(),o(()=>r().t("Archived Chats")))),oe=Ze(()=>(r(),o(()=>r().t("You have no archived conversations."))));cv(ue,{get title(){return e(w)},get emptyPlaceholder(){return e(oe)},get chatList(){return e(u)},get allChatsLoaded(){return e(q)},get chatListLoading(){return e(O)},onUpdate:()=>{ne()},loadHandler:U,unarchiveHandler:se,get show(){return ee()},set show(ve){ee(ve)},get query(){return e(p)},set query(ve){s(p,ve)},get orderBy(){return e(b)},set orderBy(ve){s(b,ve)},get direction(){return e(m)},set direction(ve){s(m,ve)},$$slots:{footer:(ve,Q)=>{var te=xc(),A=a(te),I=a(A),C=a(I);{var j=x=>{$a(x,{className:"size-4"})},B=x=>{var z=ia();$(ie=>v(z,ie),[()=>(r(),o(()=>r().t("Unarchive All Archived Chats")))]),d(x,z)};D(C,x=>{e(W)?x(j):x(B,!1)})}t(I);var S=l(I,2),g=a(S,!0);t(S),t(A),t(te),$(x=>{I.disabled=e(W),S.disabled=e(W),v(g,x)},[()=>(r(),o(()=>r().t("Export All Archived Chats")))]),V("click",I,()=>{s(Z,!0)}),V("click",S,()=>{E()}),d(ve,te)}},$$legacy:!0})}d(M,le),At(),n()}var yc=ua('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"></path></svg>');function wc(M,c){let r=me(c,"className",8,"w-4 h-4"),i=me(c,"strokeWidth",8,"1.5");var n=yc();$(()=>{Be(n,"stroke-width",i()),Ye(n,0,Ua(r()))}),d(M,n)}var $c=ua('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m3 3 1.664 1.664M21 21l-1.5-1.5m-5.485-1.242L12 17.25 4.5 21V8.742m.164-4.078a2.15 2.15 0 0 1 1.743-1.342 48.507 48.507 0 0 1 11.186 0c1.1.128 1.907 1.077 1.907 2.185V19.5M4.664 4.664 19.5 19.5"></path></svg>');function kc(M,c){let r=me(c,"className",8,"w-4 h-4"),i=me(c,"strokeWidth",8,"1.5");var n=$c();$(()=>{Be(n,"stroke-width",i()),Ye(n,0,Ua(r()))}),d(M,n)}var Cc=f('<div class="hidden w-full h-full flex-col"><div id="full-messages-container"><!></div></div>'),Sc=f('<!> <div class="flex items-center"> </div>',1),Ac=f('<!> <div class="flex items-center"> </div>',1),Ic=f('<div class="flex items-center line-clamp-1"> </div>'),Ec=f('<div class="flex items-center line-clamp-1"> </div>'),Pc=f('<div class="flex items-center line-clamp-1"> </div>'),Lc=f("<!> <!> <!>",1),Mc=f("<!> <!>",1),jc=f('<!> <div class="flex items-center"> </div>',1),Nc=f('<!> <div class="flex items-center"> </div>',1),Tc=f('<!> <div class="flex items-center"> </div>',1),Dc=f('<!> <div class="flex items-center"> </div>',1),Bc=f('<!> <div class="flex items-center"> </div>',1),zc=f('<!> <div class="flex items-center"> </div>',1),Oc=f("<!> <!>",1),Uc=f('<!> <div class="flex items-center"> </div>',1),Wc=f('<!> <div class="flex items-center"> </div>',1),Fc=f('<!> <!> <!> <hr class="border-gray-50/30 dark:border-gray-800/30 my-1"/> <!> <!> <!> <!> <!>',1),Hc=f('<div slot="content"><!></div>'),Rc=f("<!> <!>",1);function Vc(M,c){St(c,!1);const r=()=>Ce(ta,"$settings",L),i=()=>Ce(za,"$user",L),n=()=>Ce(u,"$i18n",L),P=()=>Ce(ol,"$folders",L),[L,ee]=Pt(),{saveAs:_}=Nr,W=ha(),u=Mt("i18n");let J=me(c,"shareHandler",8),p=me(c,"moveChatHandler",8),b=me(c,"cloneChatHandler",8),m=me(c,"archiveChatHandler",8),q=me(c,"renameHandler",8),O=me(c,"deleteHandler",8),K=me(c,"onClose",8),Z=me(c,"chatId",8,""),h=y(!1),k=y(!1),U=y(null),E=y(!1);const se=async()=>{await Zo(localStorage.token,Z()),W("change")},H=async()=>{s(k,await Jd(localStorage.token,Z()))},ne=async te=>{const A=te.chat.history;return Zn(A,A.currentId).reduce((j,B,S,g)=>`${j}### ${B.role.toUpperCase()}
${B.content}

`,"").trim()},le=async()=>{const te=await Ja(localStorage.token,Z());if(!te)return;const A=await ne(te);let I=new Blob([A],{type:"text/plain"});_(I,`chat-${te.chat.title}.txt`)},X=async()=>{var I;if(s(U,await Ja(localStorage.token,Z())),!e(U))return;const[{default:te},{default:A}]=await Promise.all([Yo(()=>import("../chunks/twlQqEV6.js"),__vite__mapDeps([0,1,2]),import.meta.url),Yo(()=>import("../chunks/Dxr8Uf4l.js"),[],import.meta.url)]);if(((I=r())==null?void 0:I.stylizedPdfExport)??!0){s(E,!0),await va();const C=document.getElementById("full-messages-container");if(C)try{const j=document.documentElement.classList.contains("dark"),B=800,S=C.cloneNode(!0);S.classList.add("text-black"),S.classList.add("dark:text-white"),S.style.width=`${B}px`,S.style.position="absolute",S.style.left="-9999px",S.style.height="auto",document.body.appendChild(S),await new Promise(fe=>setTimeout(fe,100));const g=await A(S,{backgroundColor:j?"#000":"#fff",useCORS:!0,scale:2,width:B});document.body.removeChild(S);const x=new te("p","mm","a4"),z=210,ie=297,xe=g.width/B,he=g.width/z,pe=Math.floor(he*ie);let be=0,Ne=0;for(;be<g.height;){const fe=Math.min(pe,g.height-be),ae=document.createElement("canvas");ae.width=g.width,ae.height=fe,ae.getContext("2d").drawImage(g,0,be,g.width,fe,0,0,g.width,fe);const ke=ae.toDataURL("image/jpeg",.7),R=fe*z/g.width;Ne>0&&x.addPage(),j&&(x.setFillColor(0,0,0),x.rect(0,0,z,ie,"F")),x.addImage(ke,"JPEG",0,0,z,R),be+=fe,Ne++}x.save(`chat-${e(U).chat.title}.pdf`),s(E,!1)}catch(j){}}else{const C=await ne(e(U)),j=new te,B=15,S=20,g=15,x=20,z=j.internal.pageSize.getWidth(),ie=j.internal.pageSize.getHeight(),xe=z-B-g,he=8;j.setFontSize(he);const pe=he*1,be=C.split(`
`);let Ne=S;for(let fe of be){const ae=j.splitTextToSize(fe,xe);for(let ge of ae)Ne+pe>ie-x&&(j.addPage(),Ne=S),j.text(ge,B,Ne),Ne+=pe*.5;Ne+=pe*.1}j.save(`chat-${e(U).chat.title}.pdf`)}},ue=async()=>{const te=await Ja(localStorage.token,Z());if(te){let A=new Blob([JSON.stringify([te])],{type:"application/json"});_(A,`chat-export-${Date.now()}.json`)}};Kt(()=>e(h),()=>{e(h)&&H()}),ca(),It();var w=Rc(),oe=Ie(w);{var ve=te=>{var A=Cc(),I=a(A),C=a(I);{let j=Ze(()=>(e(U),o(()=>{var B;return`chat-preview-${((B=e(U))==null?void 0:B.id)??""}`})));ei(C,{className:"h-full flex pt-4 pb-8 w-full",get chatId(){return e(j)},get user(){return i()},readOnly:!0,get history(){return e(U),o(()=>e(U).chat.history)},get messages(){return e(U),o(()=>e(U).chat.messages)},autoScroll:!0,sendMessage:()=>{},continueResponse:()=>{},regenerateResponse:()=>{},messagesCount:null,editCodeBlock:!1})}t(I),t(A),d(te,A)};D(oe,te=>{e(U)&&e(E)&&te(ve)})}var Q=l(oe,2);pv(Q,{get show(){return e(h)},set show(te){s(h,te)},$$events:{change:te=>{te.detail===!1&&K()()}},children:(te,A)=>{{let I=Ze(()=>(n(),o(()=>n().t("More"))));Zt(te,{get content(){return e(I)},children:(C,j)=>{var B=dt(),S=Ie(B);Mr(S,c,"default",{},null),d(C,B)},$$slots:{default:!0}})}},$$slots:{default:!0,content:(te,A)=>{var I=Hc(),C=a(I);gv(C,{class:"w-full max-w-[200px] rounded-2xl px-1 py-1  border border-gray-100  dark:border-gray-800 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg transition",sideOffset:-2,side:"bottom",align:"start",get transition(){return Ho},children:(j,B)=>{var S=Fc(),g=Ie(S);{var x=ae=>{Ra(ae,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl",$$events:{click:()=>{J()()}},children:(ge,ke)=>{var R=Sc(),Oe=Ie(R);hv(Oe,{strokeWidth:"1.5"});var He=l(Oe,2),Ue=a(He,!0);t(He),$(de=>v(Ue,de),[()=>(n(),o(()=>n().t("Share")))]),d(ge,R)},$$slots:{default:!0}})};D(g,ae=>{i(),o(()=>{var ge,ke,R;return((ge=i())==null?void 0:ge.role)==="admin"||(((R=(ke=i().permissions)==null?void 0:ke.chat)==null?void 0:R.share)??!0)})&&ae(x)})}var z=l(g,2);Pn(z,{children:(ae,ge)=>{var ke=Mc(),R=Ie(ke);Ln(R,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",children:(He,Ue)=>{var de=Ac(),N=Ie(de);xv(N,{strokeWidth:"1.5"});var Se=l(N,2),$e=a(Se,!0);t(Se),$(Te=>v($e,Te),[()=>(n(),o(()=>n().t("Download")))]),d(He,de)},$$slots:{default:!0}});var Oe=l(R,2);Mn(Oe,{class:"w-full rounded-2xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg border border-gray-100  dark:border-gray-800",get transition(){return Ho},sideOffset:8,children:(He,Ue)=>{var de=Lc(),N=Ie(de);{var Se=Le=>{Ra(Le,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{ue()}},children:(Ae,re)=>{var ye=Ic(),Me=a(ye,!0);t(ye),$(ze=>v(Me,ze),[()=>(n(),o(()=>n().t("Export chat (.json)")))]),d(Ae,ye)},$$slots:{default:!0}})};D(N,Le=>{i(),o(()=>{var Ae,re,ye;return((Ae=i())==null?void 0:Ae.role)==="admin"||(((ye=(re=i().permissions)==null?void 0:re.chat)==null?void 0:ye.export)??!0)})&&Le(Se)})}var $e=l(N,2);Ra($e,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{le()}},children:(Le,Ae)=>{var re=Ec(),ye=a(re,!0);t(re),$(Me=>v(ye,Me),[()=>(n(),o(()=>n().t("Plain text (.txt)")))]),d(Le,re)},$$slots:{default:!0}});var Te=l($e,2);Ra(Te,{class:"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl select-none w-full",$$events:{click:()=>{X()}},children:(Le,Ae)=>{var re=Pc(),ye=a(re,!0);t(re),$(Me=>v(ye,Me),[()=>(n(),o(()=>n().t("PDF document (.pdf)")))]),d(Le,re)},$$slots:{default:!0}}),d(He,de)},$$slots:{default:!0}}),d(ae,ke)},$$slots:{default:!0}});var ie=l(z,2);Ra(ie,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{q()()}},children:(ae,ge)=>{var ke=jc(),R=Ie(ke);mv(R,{strokeWidth:"1.5"});var Oe=l(R,2),He=a(Oe,!0);t(Oe),$(Ue=>v(He,Ue),[()=>(n(),o(()=>n().t("Rename")))]),d(ae,ke)},$$slots:{default:!0}});var xe=l(ie,4);Ra(xe,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{se()}},children:(ae,ge)=>{var ke=dt(),R=Ie(ke);{var Oe=Ue=>{var de=Nc(),N=Ie(de);kc(N,{strokeWidth:"1.5"});var Se=l(N,2),$e=a(Se,!0);t(Se),$(Te=>v($e,Te),[()=>(n(),o(()=>n().t("Unpin")))]),d(Ue,de)},He=Ue=>{var de=Tc(),N=Ie(de);wc(N,{strokeWidth:"1.5"});var Se=l(N,2),$e=a(Se,!0);t(Se),$(Te=>v($e,Te),[()=>(n(),o(()=>n().t("Pin")))]),d(Ue,de)};D(R,Ue=>{e(k)?Ue(Oe):Ue(He,!1)})}d(ae,ke)},$$slots:{default:!0}});var he=l(xe,2);Ra(he,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{b()()}},children:(ae,ge)=>{var ke=Dc(),R=Ie(ke);_v(R,{strokeWidth:"1.5"});var Oe=l(R,2),He=a(Oe,!0);t(Oe),$(Ue=>v(He,Ue),[()=>(n(),o(()=>n().t("Clone")))]),d(ae,ke)},$$slots:{default:!0}});var pe=l(he,2);{var be=ae=>{Pn(ae,{children:(ge,ke)=>{var R=Oc(),Oe=Ie(R);Ln(Oe,{class:"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl select-none w-full",children:(Ue,de)=>{var N=Bc(),Se=Ie(N);jn(Se,{});var $e=l(Se,2),Te=a($e,!0);t($e),$(Le=>v(Te,Le),[()=>(n(),o(()=>n().t("Move")))]),d(Ue,N)},$$slots:{default:!0}});var He=l(Oe,2);Mn(He,{class:"w-full rounded-2xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white border border-gray-100  dark:border-gray-800 shadow-lg max-h-52 overflow-y-auto scrollbar-hidden",get transition(){return Ho},sideOffset:8,children:(Ue,de)=>{var N=dt(),Se=Ie(N);Ht(Se,1,()=>(P(),o(()=>P().sort(($e,Te)=>Te.updated_at-$e.updated_at))),wa,($e,Te)=>{Ra($e,{class:"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{p()(Z(),e(Te).id)}},children:(Le,Ae)=>{var re=zc(),ye=Ie(re);jn(ye,{});var Me=l(ye,2),ze=a(Me,!0);t(Me),$(()=>v(ze,(e(Te),o(()=>{var Je;return((Je=e(Te))==null?void 0:Je.name)??"Folder"})))),d(Le,re)},$$slots:{default:!0}})}),d(Ue,N)},$$slots:{default:!0}}),d(ge,R)},$$slots:{default:!0}})};D(pe,ae=>{We(Z()),P(),o(()=>Z()&&P().length>0)&&ae(be)})}var Ne=l(pe,2);Ra(Ne,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{m()()}},children:(ae,ge)=>{var ke=Uc(),R=Ie(ke);Qn(R,{strokeWidth:"1.5"});var Oe=l(R,2),He=a(Oe,!0);t(Oe),$(Ue=>v(He,Ue),[()=>(n(),o(()=>n().t("Archive")))]),d(ae,ke)},$$slots:{default:!0}});var fe=l(Ne,2);Ra(fe,{class:"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{O()()}},children:(ae,ge)=>{var ke=Wc(),R=Ie(ke);dl(R,{strokeWidth:"1.5"});var Oe=l(R,2),He=a(Oe,!0);t(Oe),$(Ue=>v(He,Ue),[()=>(n(),o(()=>n().t("Delete")))]),d(ae,ke)},$$slots:{default:!0}}),d(j,S)},$$slots:{default:!0}}),t(I),d(te,I)}},$$legacy:!0}),d(M,w),At(),ee()}var Kc=f('<div class="fixed top-0 left-0 w-screen h-[100dvh] z-50 touch-none pointer-events-none"><div class=" absolute text-white z-99999"><!></div></div>');function ui(M,c){St(c,!1);let r=me(c,"x",8),i=me(c,"y",8),n=y(null);oa(()=>{document.body.appendChild(e(n)),document.body.style.overflow="hidden"}),vr(()=>{if(e(n)&&e(n).parentNode)try{e(n).parentNode.removeChild(e(n))}catch(_){console.warn("Failed to remove popupElement:",_)}document.body.style.overflow="unset"}),It();var P=Kc(),L=a(P),ee=a(L);Mr(ee,c,"default",{},null),t(L),t(P),Qa(P,_=>s(n,_),()=>e(n)),$(()=>Id(L,`top: ${i()+10}px; left: ${r()+10}px;`)),d(M,P),At()}var qc=ua('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"></path></svg>');function Zc(M,c){let r=me(c,"className",8,"size-4"),i=me(c,"strokeWidth",8,"1.5");var n=qc();$(()=>{Be(n,"stroke-width",i()),Ye(n,0,Ua(r()))}),d(M,n)}var Gc=f('<div class=" text-sm text-gray-500 flex-1 line-clamp-3"> <span class="  font-semibold"> </span>.</div>'),Yc=f('<div class=" bg-black/80 backdrop-blur-2xl px-2 py-1 rounded-lg w-fit max-w-40"><div class="flex items-center gap-1"><!> <div class=" text-xs text-white line-clamp-1"> </div></div></div>'),Jc=f('<div id="sidebar-chat-item"><input class=" bg-transparent w-full outline-hidden mr-10"/></div>'),Xc=f('<a id="sidebar-chat-item" draggable="false"><div class=" flex self-center flex-1 w-full"><div dir="auto" class=" text-left self-center overflow-hidden w-full h-[20px] truncate"> </div></div></a>'),Qc=f('<button class=" self-center dark:hover:text-white transition disabled:cursor-not-allowed" id="generate-title-button"><!></button>'),eu=f('<div class="flex self-center items-center space-x-1.5 z-10 translate-y-[0.5px] -translate-x-[0.5px]"><!></div>'),tu=f('<button class=" self-center dark:hover:text-white transition" type="button"><!></button>'),au=f('<button class=" self-center dark:hover:text-white transition" type="button"><!></button>'),ru=f('<div class=" flex items-center self-center space-x-1.5"><!> <!></div>'),su=f('<button aria-label="Chat Menu" class=" self-center dark:hover:text-white transition m-0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M2 8a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM6.5 8a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM12.5 6.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z"></path></svg></button>'),ou=f('<button id="delete-chat-button" class="hidden"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M2 8a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM6.5 8a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM12.5 6.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z"></path></svg></button>'),lu=f('<div class="flex self-center z-10 items-end"><!> <!></div>'),nu=f('<!> <!> <!> <div id="sidebar-chat-group"><!> <div id="sidebar-chat-item-menu"><!></div></div>',1);function al(M,c){St(c,!1);const r=()=>Ce(W,"$i18n",ee),i=()=>Ce(jr,"$chatId",ee),n=()=>Ce(Ba,"$currentChatPage",ee),P=()=>Ce(Va,"$selectedFolder",ee),L=()=>Ce(mr,"$mobile",ee),[ee,_]=Pt(),W=Mt("i18n"),u=ha();let J=me(c,"className",8,""),p=me(c,"id",8),b=me(c,"title",8),m=me(c,"selected",8,!1),q=me(c,"shiftKey",8,!1),O=me(c,"onDragEnd",8,()=>{}),K=null,Z=y(!1),h=y(!1);const k=async()=>{K||(s(h,!1),K=await Ja(localStorage.token,p()),s(h,!0))};let U=y(!1),E=y(!1),se=y(b());const H=async(de,N)=>{N===""?Ve.error(r().t("Title cannot be an empty string.")):(await Qd(localStorage.token,de,{title:N}),de===i()&&Hd.set(N),Ba.set(1),await Ka.set(await Fa(localStorage.token,n())),await dr.set(await Er(localStorage.token)),u("change"))},ne=async de=>{const N=await ev(localStorage.token,de,r().t("Clone of {{TITLE}}",{TITLE:b()})).catch(Se=>(Ve.error(`${Se}`),null));N&&(ga(`/c/${N.id}`),Ba.set(1),await Ka.set(await Fa(localStorage.token,n())),await dr.set(await Er(localStorage.token)))},le=async de=>{await Xd(localStorage.token,de).catch(Se=>(Ve.error(`${Se}`),null))&&(Is.set(await nl(localStorage.token)),i()===de&&(await ga("/"),await jr.set(""),await va()),u("change"))},X=async de=>{await Xn(localStorage.token,de),u("change")},ue=async(de,N)=>{de&&N?await Es(localStorage.token,de,N).catch($e=>(Ve.error(`${$e}`),null))&&(Ba.set(1),await Ka.set(await Fa(localStorage.token,n())),await dr.set(await Er(localStorage.token)),u("change"),Ve.success(r().t("Chat moved successfully"))):Ve.error(r().t("Failed to move chat"))};let w=y(),oe=y(!1),ve=y(!1),Q=y(!1),te=y(0),A=y(0);const I=new Image;I.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";const C=de=>{de.stopPropagation(),de.dataTransfer.setDragImage(I,0,0),de.dataTransfer.setData("text/plain",JSON.stringify({type:"chat",id:p(),item:K})),s(Q,!0),da(w,e(w).style.opacity="0.5")},j=de=>{de.stopPropagation(),s(te,de.clientX),s(A,de.clientY)},B=de=>{de.stopPropagation(),da(w,e(w).style.opacity="1"),s(Q,!1),O()(de)},S=de=>{e(w).contains(de.target)||e(E)&&(e(se)!==b()&&H(p(),e(se)),s(E,!1),s(se,""))};oa(()=>{e(w)&&(document.addEventListener("click",S,!0),e(w).addEventListener("dragstart",C),e(w).addEventListener("drag",j),e(w).addEventListener("dragend",B))}),vr(()=>{e(w)&&(document.removeEventListener("click",S,!0),e(w).removeEventListener("dragstart",C),e(w).removeEventListener("drag",j),e(w).removeEventListener("dragend",B))});let g=y(!1);const x=de=>{de.key==="Enter"?(de.preventDefault(),setTimeout(()=>{const N=document.getElementById(`chat-title-input-${p()}`);N&&N.blur()},0)):de.key==="Escape"&&(de.preventDefault(),s(E,!1),s(se,""))},z=async()=>{s(se,b()),s(E,!0),await va(),setTimeout(()=>{const de=document.getElementById(`chat-title-input-${p()}`);de&&(de.focus(),de.select())},0)},ie=async()=>{var $e;s(oe,!0),K||(K=await Ja(localStorage.token,p()));const de=((($e=K.chat)==null?void 0:$e.messages)??[]).map(Te=>({role:Te.role,content:Te.content})),N=K.chat.models.at(0)??K.models.at(0)??"";s(se,"");const Se=await Md(localStorage.token,N,de).catch(Te=>(Ve.error(`${Te}`),null));Se?(Se!==b()&&H(p(),Se),s(E,!1)):s(se,b()),s(oe,!1)};Kt(()=>e(Z),()=>{e(Z)&&k()}),ca(),It();var xe=nu(),he=Ie(xe);yv(he,{get chatId(){return p()},get show(){return e(U)},set show(de){s(U,de)},$$legacy:!0});var pe=l(he,2);{let de=Ze(()=>(r(),o(()=>r().t("Delete chat?"))));cr(pe,{get title(){return e(de)},get show(){return e(g)},set show(N){s(g,N)},$$events:{confirm:()=>{le(p())}},children:(N,Se)=>{var $e=Gc(),Te=a($e),Le=l(Te),Ae=a(Le,!0);t(Le),sr(),t($e),$(re=>{v(Te,`${re??""} `),v(Ae,b())},[()=>(r(),o(()=>r().t("This will delete")))]),d(N,$e)},$$slots:{default:!0},$$legacy:!0})}var be=l(pe,2);{var Ne=de=>{ui(de,{get x(){return e(te)},get y(){return e(A)},children:(N,Se)=>{var $e=Yc(),Te=a($e),Le=a(Te);Zc(Le,{className:" size-[18px]",strokeWidth:"2"});var Ae=l(Le,2),re=a(Ae,!0);t(Ae),t(Te),t($e),$(()=>v(re,b())),d(N,$e)},$$slots:{default:!0}})};D(be,de=>{e(Q)&&e(te)&&e(A)&&de(Ne)})}var fe=l(be,2),ae=a(fe);{var ge=de=>{var N=Jc(),Se=a(N);sa(Se),t(N),$($e=>{Ye(N,1,` w-full flex justify-between rounded-xl px-[11px] py-[6px] ${p()===i()||e(E)?"bg-gray-100 dark:bg-gray-900 selected":m()?"bg-gray-100 dark:bg-gray-950 selected":"group-hover:bg-gray-100 dark:group-hover:bg-gray-950"}  whitespace-nowrap text-ellipsis relative ${e(oe)?"cursor-not-allowed":""}`),Be(Se,"id",`chat-title-input-${p()??""}`),Be(Se,"placeholder",$e),Se.disabled=e(oe)},[()=>(e(oe),r(),o(()=>e(oe)?r().t("Generating..."):""))]),aa(Se,()=>e(se),$e=>s(se,$e)),V("keydown",Se,x),V("blur",Se,async $e=>{if(e(ve)){$e.preventDefault(),$e.stopPropagation(),await va(),setTimeout(()=>{const Te=document.getElementById(`chat-title-input-${p()}`);Te&&Te.focus()},0),s(ve,!1);return}}),d(de,N)},ke=de=>{var N=Xc(),Se=a(N),$e=a(Se),Te=a($e,!0);t($e),t(Se),t(N),$(()=>{Ye(N,1,` w-full flex justify-between rounded-xl px-[11px] py-[6px] ${p()===i()||e(E)?"bg-gray-100 dark:bg-gray-900 selected":m()?"bg-gray-100 dark:bg-gray-950 selected":" group-hover:bg-gray-100 dark:group-hover:bg-gray-950"}  whitespace-nowrap text-ellipsis`),Be(N,"href",`/c/${p()??""}`),v(Te,b()),$e.dir=$e.dir}),V("click",N,()=>{u("select"),P()&&Va.set(null),L()&&na.set(!1)}),V("dblclick",N,async Le=>{Le.preventDefault(),Le.stopPropagation(),s(ve,!0),z()}),V("mouseenter",N,Le=>{s(Z,!0)}),V("mouseleave",N,Le=>{s(Z,!1)}),V("focus",N,Le=>{}),d(de,N)};D(ae,de=>{e(E)?de(ge):de(ke,!1)})}var R=l(ae,2),Oe=a(R);{var He=de=>{var N=eu(),Se=a(N);{let $e=Ze(()=>(r(),o(()=>r().t("Generate"))));Zt(Se,{get content(){return e($e)},children:(Te,Le)=>{var Ae=Qc(),re=a(Ae);$v(re,{strokeWidth:"2"}),t(Ae),$(()=>Ae.disabled=e(oe)),V("click",Ae,()=>{ie()}),d(Te,Ae)},$$slots:{default:!0}})}t(N),d(de,N)},Ue=de=>{var N=dt(),Se=Ie(N);{var $e=Le=>{var Ae=ru(),re=a(Ae);{let Me=Ze(()=>(r(),o(()=>r().t("Archive"))));Zt(re,{get content(){return e(Me)},className:"flex items-center",children:(ze,Je)=>{var Ge=tu(),gt=a(Ge);Qn(gt,{className:"size-4  translate-y-[0.5px]",strokeWidth:"2"}),t(Ge),V("click",Ge,()=>{X(p())}),d(ze,Ge)},$$slots:{default:!0}})}var ye=l(re,2);{let Me=Ze(()=>(r(),o(()=>r().t("Delete"))));Zt(ye,{get content(){return e(Me)},children:(ze,Je)=>{var Ge=au(),gt=a(Ge);dl(gt,{strokeWidth:"2"}),t(Ge),V("click",Ge,()=>{le(p())}),d(ze,Ge)},$$slots:{default:!0}})}t(Ae),d(Le,Ae)},Te=Le=>{var Ae=lu(),re=a(Ae);Vc(re,{get chatId(){return p()},cloneChatHandler:()=>{ne(p())},shareHandler:()=>{s(U,!0)},moveChatHandler:ue,archiveChatHandler:()=>{X(p())},renameHandler:z,deleteHandler:()=>{s(g,!0)},onClose:()=>{u("unselect")},$$events:{change:async()=>{u("change")},tag:ze=>{u("tag",ze.detail)}},children:(ze,Je)=>{var Ge=su();V("click",Ge,()=>{u("select")}),d(ze,Ge)},$$slots:{default:!0}});var ye=l(re,2);{var Me=ze=>{var Je=ou();V("click",Je,()=>{s(g,!0)}),d(ze,Je)};D(ye,ze=>{p()===i()&&ze(Me)})}t(Ae),d(Le,Ae)};D(Se,Le=>{q()&&e(Z)?Le($e):Le(Te,!1)},!0)}d(de,N)};D(Oe,de=>{e(E)?de(He):de(Ue,!1)})}t(R),t(fe),Qa(fe,de=>s(w,de),()=>e(w)),$(()=>{Ye(fe,1,` w-full ${J()??""} relative group`),Be(fe,"draggable",e(h)&&!e(E)),Ye(R,1,`
        ${p()===i()||e(E)?"from-gray-100 dark:from-gray-900 selected":m()?"from-gray-100 dark:from-gray-950 selected":"invisible group-hover:visible from-gray-100 dark:from-gray-950"}
            absolute ${J()==="pr-2"?"right-[8px]":"right-1"} top-[4px] py-1 pr-0.5 mr-1.5 pl-5 bg-linear-to-l from-80%

              to-transparent`)}),V("mouseenter",R,de=>{s(Z,!0)}),V("mouseleave",R,de=>{s(Z,!1)}),d(M,xe),At(),_()}var iu=f('<div class="absolute top-0 left-0 w-full h-full rounded-xs bg-gray-100/50 dark:bg-gray-700/20 bg-opacity-50 dark:bg-opacity-10 z-50 pointer-events-none touch-none"></div>'),du=f('<div class=" p-[1px]"><!></div>'),vu=f('<button class="p-0.5 dark:hover:bg-gray-850 rounded-lg touch-auto"><!></button>'),cu=f('<button class="absolute z-10 right-2 invisible group-hover:visible self-center flex items-center dark:text-gray-300"><!></button>'),uu=f('<div id="sidebar-folder-button"><button class="w-full py-1.5 pl-2 flex items-center gap-1.5 text-xs font-medium"><!> <div> </div></button> <!></div>'),fu=f('<div slot="content" class="w-full"><!></div>'),gu=f("<!> <!>",1),pu=f("<div><!></div>");function Sr(M,c){St(c,!1),Mt("i18n");const r=ha();let i=me(c,"open",12,!0),n=me(c,"id",8,""),P=me(c,"name",8,""),L=me(c,"collapsible",8,!0),ee=me(c,"className",8,""),_=me(c,"buttonClassName",8,"text-gray-600 dark:text-gray-400"),W=me(c,"chevron",8,!0),u=me(c,"onAddLabel",8,""),J=me(c,"onAdd",8,null),p=me(c,"dragAndDrop",8,!0),b=y(),m=y(!1),q=y(!1);const O=E=>{E.preventDefault(),E.stopPropagation(),s(q,!0)},K=E=>{if(E.preventDefault(),E.stopPropagation(),e(b).contains(E.target)){if(E.dataTransfer.items&&E.dataTransfer.items.length>0)for(const se of Array.from(E.dataTransfer.items))if(se.kind==="file"){const H=se.getAsFile();if(H&&H.type==="application/json"){const ne=new FileReader;ne.onload=async function(le){try{const X=JSON.parse(le.target.result);i(!0),r("import",X)}catch(X){}},ne.readAsText(H)}}else{i(!0);try{const H=E.dataTransfer.getData("text/plain");if(H){const ne=JSON.parse(H);r("drop",ne)}}catch{}finally{s(q,!1)}}s(q,!1)}},Z=E=>{E.preventDefault(),E.stopPropagation(),s(q,!1)};oa(()=>{const E=localStorage.getItem(`${n()}-folder-state`);E!==null&&i(E==="true"),s(m,!0),p()&&(e(b).addEventListener("dragover",O),e(b).addEventListener("drop",K),e(b).addEventListener("dragleave",Z))}),vr(()=>{p()&&(e(b).removeEventListener("dragover",O),e(b).removeEventListener("drop",K),e(b).removeEventListener("dragleave",Z))}),It();var h=pu(),k=a(h);{var U=E=>{var se=gu(),H=Ie(se);{var ne=w=>{var oe=iu();d(w,oe)};D(H,w=>{e(q)&&w(ne)})}var le=l(H,2);{var X=w=>{ri(w,{className:"w-full ",buttonClassName:"w-full",onChange:oe=>{r("change",oe),localStorage.setItem(`${n()}-folder-state`,`${oe}`)},get open(){return i()},set open(oe){i(oe)},children:(oe,ve)=>{var Q=uu(),te=a(Q),A=a(te);{var I=g=>{var x=du(),z=a(x);{var ie=he=>{Ps(he,{className:" size-3",strokeWidth:"2"})},xe=he=>{Jo(he,{className:" size-3",strokeWidth:"2"})};D(z,he=>{i()?he(ie):he(xe,!1)})}t(x),d(g,x)};D(A,g=>{W()&&g(I)})}var C=l(A,2),j=a(C,!0);t(C),t(te);var B=l(te,2);{var S=g=>{var x=cu(),z=a(x);Zt(z,{get content(){return u()},children:(ie,xe)=>{var he=vu(),pe=a(he);ur(pe,{className:" size-3",strokeWidth:"2.5"}),t(he),V("click",he,be=>{}),d(ie,he)},$$slots:{default:!0}}),t(x),V("pointerup",x,ie=>{ie.stopPropagation()}),V("click",x,ie=>{ie.stopPropagation(),J()()}),d(g,x)};D(B,g=>{J()&&g(S)})}t(Q),$(()=>{Ye(Q,1,` w-full group rounded-xl relative flex items-center justify-between hover:bg-gray-100 dark:hover:bg-gray-900 transition ${_()??""}`),Ye(C,1,`translate-y-[0.5px] ${W()?"":"pl-0.5"}`),v(j,P())}),d(oe,Q)},$$slots:{default:!0,content:(oe,ve)=>{var Q=fu(),te=a(Q);Mr(te,c,"default",{},null),t(Q),d(oe,Q)}},$$legacy:!0})},ue=w=>{var oe=dt(),ve=Ie(oe);Mr(ve,c,"default",{},null),d(w,oe)};D(le,w=>{L()?w(X):w(ue,!1)})}d(E,se)};D(k,E=>{e(m)&&E(U)})}t(h),Qa(h,E=>s(b,E),()=>e(b)),$(()=>Ye(h,1,`relative ${ee()??""}`)),d(M,h),At()}var mu=f('<div class=" text-sm text-gray-700 dark:text-gray-300 flex-1 line-clamp-3 mb-2"> </div> <div class="flex items-center gap-1.5"><input type="checkbox"/> <div class="text-xs text-gray-500"> </div></div>',1),hu=f('<div class=" bg-black/80 backdrop-blur-2xl px-2 py-1 rounded-lg w-fit max-w-40"><div class="flex items-center gap-1"><!> <div class=" text-xs text-white line-clamp-1"> </div></div></div>'),_u=f('<div class="absolute top-0 left-0 w-full h-full rounded-xs bg-gray-100/50 dark:bg-gray-700/20 bg-opacity-50 dark:bg-opacity-10 z-50 pointer-events-none touch-none"></div>'),xu=f('<div class="flex group-hover:hidden transition-all"><!></div> <div class="hidden group-hover:flex transition-all p-[1px]"><!></div>',1),bu=f('<div class="p-[1px]"><!></div>'),yu=f('<input type="text" class="w-full h-full bg-transparent outline-hidden"/>'),wu=f('<div class="p-1 dark:hover:bg-gray-850 rounded-lg touch-auto"><!></div>'),$u=f('<div class="w-full group"><div><button class="text-gray-500 dark:text-gray-500 transition-all p-1 hover:bg-gray-200 dark:hover:bg-gray-850 rounded-lg"><!></button> <div class="translate-y-[0.5px] flex-1 justify-start text-start line-clamp-1"><!></div> <button class="absolute z-10 right-2 invisible group-hover:visible self-center flex items-center dark:text-gray-300"><!></button></div></div>'),ku=f('<div class="ml-3 pl-1 mt-[1px] flex flex-col overflow-y-auto scrollbar-hidden border-s border-gray-100 dark:border-gray-900"><!> <!></div>'),Cu=f('<div class="flex justify-center items-center p-2"><!></div>'),Su=f('<div slot="content" class="w-full"><!> <!></div>'),Au=f('<!> <!> <!> <div draggable="true"><!> <!></div>',1);function fi(M,c){St(c,!1);const r=()=>Ce(_,"$i18n",L),i=()=>Ce(Va,"$selectedFolder",L),n=()=>Ce(mr,"$mobile",L),P=()=>Ce(na,"$showSidebar",L),[L,ee]=Pt(),_=Mt("i18n"),W=ha(),{saveAs:u}=Nr;let J=me(c,"folderRegistry",28,()=>({})),p=me(c,"open",12,!1),b=me(c,"folders",12),m=me(c,"folderId",8),q=me(c,"shiftKey",8,!1),O=me(c,"className",8,""),K=me(c,"deleteFolderContents",12,!0),Z=me(c,"parentDragged",8,!1),h=me(c,"onDelete",8,N=>{}),k=me(c,"onItemMove",8,N=>{}),U=y(),E=y(!1),se=y(!1),H=y(!1),ne=y(!1),le=y(null),X=y("");const ue=N=>{N.preventDefault(),N.stopPropagation(),!(e(ne)||Z())&&s(H,!0)},w=async N=>{if(N.preventDefault(),N.stopPropagation(),!(e(ne)||Z())&&e(U).contains(N.target)){if(N.dataTransfer.items&&N.dataTransfer.items.length>0)for(const Se of Array.from(N.dataTransfer.items))if(Se.kind==="file"){const $e=Se.getAsFile();if($e&&$e.type==="application/json"){const Te=new FileReader;Te.onload=async function(Le){try{const Ae=JSON.parse(Le.target.result);p(!0),W("import",{folderId:m(),items:Ae})}catch(Ae){}},Te.readAsText($e)}}else{const $e=N.dataTransfer.getData("text/plain");try{const Te=JSON.parse($e),{type:Le,id:Ae,item:re}=Te;if(Le==="folder"){if(p(!0),Ae===m())return;await Go(localStorage.token,Ae,m()).catch(Me=>(Ve.error(`${Me}`),null))&&W("update")}else if(Le==="chat"){p(!0);let ye=await Ja(localStorage.token,Ae).catch(ze=>null);!ye&&re&&(ye=await Pr(localStorage.token,[{chat:re.chat,meta:(re==null?void 0:re.meta)??{},pinned:!1,folder_id:null,created_at:(re==null?void 0:re.created_at)??null,updated_at:(re==null?void 0:re.updated_at)??null}]).catch(ze=>(Ve.error(`${ze}`),null)));const Me=await Es(localStorage.token,ye.id,m()).catch(ze=>(Ve.error(`${ze}`),null));k()({originFolderId:ye.folder_id,targetFolderId:m(),e:N}),Me&&W("update")}}catch(Te){}}xe(),s(H,!1)}},oe=N=>{N.preventDefault(),!(e(ne)||Z())&&s(H,!1)},ve=new Image;ve.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";let Q=y(),te=y();const A=N=>{N.stopPropagation(),N.dataTransfer.setDragImage(ve,0,0),N.dataTransfer.setData("text/plain",JSON.stringify({type:"folder",id:m()})),s(ne,!0),da(U,e(U).style.opacity="0.5")},I=N=>{N.stopPropagation(),s(Q,N.clientX),s(te,N.clientY)},C=N=>{N.stopPropagation(),da(U,e(U).style.opacity="1"),s(ne,!1)};oa(async()=>{var N;p(b()[m()].is_expanded),J(J()[m()]={setFolderItems:()=>{xe()}},!0),e(U)&&(e(U).addEventListener("dragover",ue),e(U).addEventListener("drop",w),e(U).addEventListener("dragleave",oe),e(U).addEventListener("dragstart",A),e(U).addEventListener("drag",I),e(U).addEventListener("dragend",C)),(N=b()[m()])!=null&&N.new&&(delete b()[m()].new,await va(),he())}),vr(()=>{e(U)&&(e(U).addEventListener("dragover",ue),e(U).removeEventListener("drop",w),e(U).removeEventListener("dragleave",oe),e(U).removeEventListener("dragstart",A),e(U).removeEventListener("drag",I),e(U).removeEventListener("dragend",C))});let j=y(!1);const B=async()=>{await lv(localStorage.token,m(),K()).catch(Se=>(Ve.error(`${Se}`),null))&&(Ve.success(r().t("Folder deleted successfully")),h()(m()))},S=async({name:N,meta:Se,data:$e})=>{var Ae;if(N===""){Ve.error(r().t("Folder name cannot be empty."));return}const Te=b()[m()].name;if(N=N.trim(),b(b()[m()].name=N,!0),await nv(localStorage.token,m(),{name:N,...Se?{meta:Se}:{},...$e?{data:$e}:{}}).catch(re=>(Ve.error(`${re}`),b(b()[m()].name=Te,!0),null))){if(b(b()[m()].name=N,!0),$e&&b(b()[m()].data=$e,!0),Ve.success(r().t("Folder updated successfully")),((Ae=i())==null?void 0:Ae.id)===m()){const re=await In(localStorage.token,m()).catch(ye=>(Ve.error(`${ye}`),null));re&&await Va.set(re)}W("update")}},g=async()=>{await iv(localStorage.token,m(),p()).catch(N=>(Ve.error(`${N}`),null))};let x;const z=()=>{clearTimeout(x),x=setTimeout(()=>{g()},500)};let ie=y(null);const xe=async()=>{await va(),p()?s(ie,await tv(localStorage.token,m()).catch(N=>(Ve.error(`${N}`),[]))):s(ie,null)},he=async()=>{await va(),s(X,b()[m()].name),s(se,!0),await va(),await va();const N=document.getElementById(`folder-${m()}-input`);N&&(N.focus(),N.select())},pe=async()=>{const N=await av(localStorage.token,m()).catch($e=>(Ve.error(`${$e}`),null));if(!N)return;const Se=new Blob([JSON.stringify(N)],{type:"application/json"});u(Se,`folder-${b()[m()].name}-export-${Date.now()}.json`)};Kt(()=>We(p()),()=>{p()&&xe()}),ca();var be={setFolderItems:xe};It();var Ne=Au(),fe=Ie(Ne);{let N=Ze(()=>(r(),o(()=>r().t("Delete folder?"))));cr(fe,{get title(){return e(N)},get show(){return e(j)},set show(Se){s(j,Se)},$$events:{confirm:()=>{B()}},children:(Se,$e)=>{var Te=mu(),Le=Ie(Te),Ae=a(Le,!0);t(Le);var re=l(Le,2),ye=a(re);sa(ye);var Me=l(ye,2),ze=a(Me,!0);t(Me),t(re),$((Je,Ge)=>{v(Ae,Je),v(ze,Ge)},[()=>(r(),We(b()),We(m()),o(()=>r().t('Are you sure you want to delete "{{NAME}}"?',{NAME:b()[m()].name}))),()=>(r(),o(()=>r().t("Delete all contents inside this folder")))]),fv(ye,K),d(Se,Te)},$$slots:{default:!0},$$legacy:!0})}var ae=l(fe,2);ti(ae,{edit:!0,get folderId(){return m()},onSubmit:S,get show(){return e(E)},set show(N){s(E,N)},$$legacy:!0});var ge=l(ae,2);{var ke=N=>{ui(N,{get x(){return e(Q)},get y(){return e(te)},children:(Se,$e)=>{var Te=hu(),Le=a(Te),Ae=a(Le);Sv(Ae,{className:"size-3.5",strokeWidth:"2"});var re=l(Ae,2),ye=a(re,!0);t(re),t(Le),t(Te),$(()=>v(ye,(We(b()),We(m()),o(()=>b()[m()].name)))),d(Se,Te)},$$slots:{default:!0}})};D(ge,N=>{e(ne)&&e(Q)&&e(te)&&N(ke)})}var R=l(ge,2),Oe=a(R);{var He=N=>{var Se=_u();d(N,Se)};D(Oe,N=>{e(H)&&N(He)})}var Ue=l(Oe,2);ri(Ue,{className:"w-full",buttonClassName:"w-full",onChange:N=>{W("open",N)},get open(){return p()},set open(N){p(N)},children:(N,Se)=>{var $e=$u(),Te=a($e),Le=a(Te),Ae=a(Le);{var re=Xe=>{var F=xu(),Y=Ie(F),G=a(Y);si(G,{className:"size-3.5",get shortCode(){return We(b()),We(m()),o(()=>b()[m()].meta.icon)}}),t(Y);var Pe=l(Y,2),Re=a(Pe);{var je=Fe=>{Ps(Fe,{className:" size-3",strokeWidth:"2.5"})},De=Fe=>{Jo(Fe,{className:" size-3",strokeWidth:"2.5"})};D(Re,Fe=>{p()?Fe(je):Fe(De,!1)})}t(Pe),d(Xe,F)},ye=Xe=>{var F=bu(),Y=a(F);{var G=Re=>{Ps(Re,{className:" size-3",strokeWidth:"2.5"})},Pe=Re=>{Jo(Re,{className:" size-3",strokeWidth:"2.5"})};D(Y,Re=>{p()?Re(G):Re(Pe,!1)})}t(F),d(Xe,F)};D(Ae,Xe=>{We(b()),We(m()),o(()=>{var F,Y;return(Y=(F=b()[m()])==null?void 0:F.meta)==null?void 0:Y.icon})?Xe(re):Xe(ye,!1)})}t(Le);var Me=l(Le,2),ze=a(Me);{var Je=Xe=>{var F=yu();sa(F),$(()=>Be(F,"id",`folder-${m()??""}-input`)),aa(F,()=>e(X),Y=>s(X,Y)),V("blur",F,()=>{S({name:e(X)}),s(se,!1)}),V("click",F,Y=>{Y.stopPropagation()}),V("mousedown",F,Y=>{Y.stopPropagation()}),V("keydown",F,Y=>{Y.key==="Enter"&&(S({name:e(X)}),s(se,!1))}),d(Xe,F)},Ge=Xe=>{var F=ia();$(()=>v(F,(We(b()),We(m()),o(()=>b()[m()].name)))),d(Xe,F)};D(ze,Xe=>{e(se)?Xe(Je):Xe(Ge,!1)})}t(Me);var gt=l(Me,2),$t=a(gt);wv($t,{onEdit:()=>{s(E,!0)},onDelete:()=>{s(j,!0)},onExport:()=>{pe()},children:(Xe,F)=>{var Y=wu(),G=a(Y);Av(G,{className:"size-4",strokeWidth:"2.5"}),t(Y),d(Xe,Y)},$$slots:{default:!0}}),t(gt),t(Te),t($e),$(()=>{Be(Te,"id",`folder-${m()??""}-button`),Ye(Te,1,`relative w-full py-1 px-1.5 rounded-xl flex items-center gap-1.5 hover:bg-gray-100 dark:hover:bg-gray-900 transition ${i(),We(m()),o(()=>{var Xe;return((Xe=i())==null?void 0:Xe.id)===m()?"bg-gray-100 dark:bg-gray-900 selected":""})??""}`)}),V("click",Le,Xe=>{Xe.stopPropagation(),Xe.stopImmediatePropagation(),p(!p()),z()}),V("dblclick",Te,Xe=>{e(le)&&(clearTimeout(e(le)),s(le,null)),he()}),V("click",Te,async Xe=>{e(le)&&(clearTimeout(e(le)),s(le,null)),s(le,setTimeout(async()=>{const F=await In(localStorage.token,m()).catch(Y=>(Ve.error(`${Y}`),null));F&&await Va.set(F),await ga("/"),n()&&na.set(!P()),s(le,null)},100))}),V("pointerup",Te,Xe=>{Xe.stopPropagation()}),d(N,$e)},$$slots:{default:!0,content:(N,Se)=>{var $e=Su(),Te=a($e);{var Le=ye=>{var Me=ku(),ze=a(Me);{var Je=gt=>{const $t=Ze(()=>(We(b()),We(m()),o(()=>{var Y;return(Y=b()[m()])==null?void 0:Y.childrenIds.map(G=>b()[G]).sort((G,Pe)=>G.name.localeCompare(Pe.name,void 0,{numeric:!0,sensitivity:"base"}))})));var Xe=dt(),F=Ie(Xe);Ht(F,1,()=>e($t),Y=>`${m()}-${Y.id}`,(Y,G)=>{var Pe=dt(),Re=Ie(Pe);fi(Re,{get folders(){return b()},get folderId(){return e(G),o(()=>e(G).id)},get shiftKey(){return q()},get parentDragged(){return e(ne)},get onItemMove(){return k()},get onDelete(){return h()},get folderRegistry(){return J()},set folderRegistry(je){J(je)},$$events:{import:je=>{W("import",je.detail)},update:je=>{W("update",je.detail)},change:je=>{W("change",je.detail)}},$$legacy:!0}),d(Y,Pe)}),d(gt,Xe)};D(ze,gt=>{We(b()),We(m()),o(()=>{var $t;return($t=b()[m()])==null?void 0:$t.childrenIds})&&gt(Je)})}var Ge=l(ze,2);Ht(Ge,1,()=>e(ie)??[],gt=>gt.id,(gt,$t)=>{al(gt,{get id(){return e($t),o(()=>e($t).id)},get title(){return e($t),o(()=>e($t).title)},get shiftKey(){return q()},$$events:{change:Xe=>{W("change",Xe.detail)}}})}),t(Me),d(ye,Me)};D(Te,ye=>{We(b()),We(m()),e(ie),o(()=>{var Me;return(((Me=b()[m()])==null?void 0:Me.childrenIds)??[]).length>0||(e(ie)??[]).length>0})&&ye(Le)})}var Ae=l(Te,2);{var re=ye=>{var Me=Cu(),ze=a(Me);$a(ze,{className:"size-4 text-gray-500"}),t(Me),d(ye,Me)};D(Ae,ye=>{e(ie)===null&&ye(re)})}t($e),d(N,$e)}},$$legacy:!0}),t(R),Qa(R,N=>s(U,N),()=>e(U)),$(()=>Ye(R,1,`relative ${O()??""}`)),d(M,Ne),Cv(c,"setFolderItems",xe);var de=At(be);return ee(),de}function Iu(M,c){St(c,!1);const r=()=>Ce(Va,"$selectedFolder",n),i=()=>Ce(jr,"$chatId",n),[n,P]=Pt(),L=ha();let ee=me(c,"folderRegistry",28,()=>({})),_=me(c,"folders",24,()=>({})),W=me(c,"shiftKey",8,!1),u=me(c,"onDelete",8,O=>{}),J=y([]);const p=O=>{var K;O.originFolderId&&((K=ee()[O.originFolderId])==null||K.setFolderItems())},b=()=>{var O;for(const K of Object.keys(_()))(O=ee()[K])==null||O.setFolderItems()};Kt(()=>We(_()),()=>{s(J,Object.keys(_()).filter(O=>_()[O].parent_id===null).sort((O,K)=>_()[O].name.localeCompare(_()[K].name,void 0,{numeric:!0,sensitivity:"base"})))}),Kt(()=>(We(_()),r(),i()),()=>{(_()||r()&&i())&&b()}),ca(),It();var m=dt(),q=Ie(m);Ht(q,1,()=>e(J),O=>O,(O,K)=>{fi(O,{className:"",get folders(){return _()},get folderId(){return e(K)},get shiftKey(){return W()},get onDelete(){return u()},onItemMove:p,get folderRegistry(){return ee()},set folderRegistry(Z){ee(Z)},$$events:{import:Z=>{L("import",Z.detail)},update:Z=>{L("update",Z.detail)},change:Z=>{L("change",Z.detail)}},$$legacy:!0})}),d(M,m),At(),P()}var Eu=ua('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"></path></svg>'),Pu=ua('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.115 5.19l.319 1.913A6 6 0 008.11 10.36L9.75 12l-.387.775c-.217.433-.132.956.21 1.298l1.348 1.348c.21.21.329.497.329.795v1.089c0 .426.24.815.622 1.006l.153.076c.433.217.956.132 1.298-.21l.723-.723a8.7 8.7 0 002.288-4.042 1.087 1.087 0 00-.358-1.099l-1.33-1.108c-.251-.21-.582-.299-.905-.245l-1.17.195a1.125 1.125 0 01-.98-.314l-.295-.295a1.125 1.125 0 010-1.591l.13-.132a1.125 1.125 0 011.3-.21l.603.302a.809.809 0 001.086-1.086L14.25 7.5l1.256-.837a4.5 4.5 0 001.528-1.732l.146-.292M6.115 5.19A9 9 0 1017.18 4.64M6.115 5.19A8.965 8.965 0 0112 3c1.929 0 3.716.607 5.18 1.64"></path></svg>'),Lu=f('<div class=" rounded-lg flex flex-col gap-2"><div><div class=" text-xs font-medium mb-2.5 text-gray-500"> </div> <div class="flex gap-2.5 items-center mb-1"><div><div class=" p-2 bg-black/5 dark:bg-white/5 rounded-full"><!></div></div> <div><select id="models" class="outline-hidden bg-transparent text-sm font-medium block w-fit pr-10 max-w-full placeholder-gray-400"><option class=" text-gray-700" selected> </option><option class=" text-gray-700" selected> </option></select> <div class=" text-xs text-gray-400 font-medium"><!></div></div></div></div></div>');function Mu(M,c){St(c,!1);const r=()=>Ce(P,"$i18n",i),[i,n]=Pt(),P=Mt("i18n");let L=me(c,"onChange",8,()=>{}),ee=me(c,"state",12,"private");It();var _=Lu(),W=a(_),u=a(W),J=a(u,!0);t(u);var p=l(u,2),b=a(p),m=a(b),q=a(m);{var O=w=>{var oe=Eu();d(w,oe)},K=w=>{var oe=Pu();d(w,oe)};D(q,w=>{ee()==="private"?w(O):w(K,!1)})}t(m),t(b);var Z=l(b,2),h=a(Z),k=a(h),U=a(k,!0);t(k),k.value=k.__value="public";var E=l(k),se=a(E,!0);t(E),E.value=E.__value="private",t(h);var H;Ed(h);var ne=l(h,2),le=a(ne);{var X=w=>{var oe=ia();$(ve=>v(oe,ve),[()=>(r(),o(()=>r().t("Only invited users can access")))]),d(w,oe)},ue=w=>{var oe=ia();$(ve=>v(oe,ve),[()=>(r(),o(()=>r().t("Visible to all users")))]),d(w,oe)};D(le,w=>{ee()==="private"?w(X):w(ue,!1)})}t(ne),t(Z),t(p),t(W),t(_),$((w,oe,ve)=>{v(J,w),v(U,oe),v(se,ve),H!==(H=ee()==="private"?"private":"public")&&(h.value=h.__value=ee()==="private"?"private":"public",Pd(h,ee()==="private"?"private":"public"))},[()=>(r(),o(()=>r().t("Visibility"))),()=>(r(),o(()=>r().t("Public"))),()=>(r(),o(()=>r().t("Private")))]),V("change",h,w=>{w.target.value==="public"?ee("public"):ee("private"),L()(ee())}),d(M,_),At(),n()}var ju=f('<button type="button" class="p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition"><!></button>'),Nu=f('<button type="button" class="p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition"><!></button>'),Tu=f('<div class="mt-1 mb-3 px-3.5 py-3 border border-gray-100 dark:border-gray-850 rounded-2xl"><div class="flex items-center gap-3"><button type="button" class="shrink-0 rounded-xl overflow-hidden hover:opacity-80 transition"><img class="size-8 object-cover" alt=""/></button> <div class="flex-1"><div class=" text-gray-500 text-xs"> </div> <input type="text" class="w-full text-sm bg-transparent outline-none placeholder:text-gray-300 dark:placeholder:text-gray-700"/></div> <div class="flex items-center gap-1"><!> <!></div></div></div>'),Du=f('<input type="file" hidden="" accept="image/*"/> <div class="text-xs -mx-1"><button type="button" class="w-full flex items-center gap-3 px-3.5 py-3 hover:bg-gray-50 dark:hover:bg-gray-900 rounded-xl transition"><img class="rounded-full size-8 object-cover flex-shrink-0" alt=""/> <div class="flex-1 text-left min-w-0"><div class="font-medium text-gray-900 dark:text-white truncate"> </div> <div class="text-gray-500 text-xs"> <!></div></div> <!></button> <!></div>',1);function Bu(M,c){St(c,!1);const r=()=>Ce(P,"$i18n",i),[i,n]=Pt(),P=Mt("i18n");let L=me(c,"webhook",8),ee=me(c,"expanded",8,!1),_=me(c,"onClick",8,()=>{}),W=me(c,"onDelete",8,()=>{}),u=me(c,"onUpdate",8,Q=>{}),J=y(L().name),p=y(L().profile_image_url||""),b=y(),m=y();const q=()=>{var te;if(!((te=e(m))!=null&&te.length))return;const Q=new FileReader;Q.onload=A=>{var j,B;const I=`${(j=A.target)==null?void 0:j.result}`,C=(B=e(m)[0])==null?void 0:B.type;if(["image/gif","image/webp"].includes(C))s(p,I);else{const S=new Image;S.src=I,S.onload=()=>{const g=document.createElement("canvas"),x=100;g.width=x,g.height=x;const z=g.getContext("2d"),ie=S.width/S.height,xe=ie>1?x*ie:x,he=ie>1?x:x/ie,pe=(x-xe)/2,be=(x-he)/2;z.drawImage(S,pe,be,xe,he),s(p,g.toDataURL("image/webp",.8))}}s(m,null)},Q.readAsDataURL(e(m)[0])},O=()=>{navigator.clipboard.writeText(`${Aa}/channels/webhooks/${L().id}/${L().token}`),Ve.success(r().t("Copied"))};Kt(()=>(e(J),We(L()),e(p),We(u())),()=>{(e(J)!==L().name||e(p)!==(L().profile_image_url||""))&&u()({name:e(J).trim()||L().name,profile_image_url:e(p)})}),ca(),It();var K=Du(),Z=Ie(K);Qa(Z,Q=>s(b,Q),()=>e(b));var h=l(Z,2),k=a(h),U=a(k),E=l(U,2),se=a(E),H=a(se,!0);t(se);var ne=l(se,2),le=a(ne),X=l(le);{var ue=Q=>{var te=ia();$(A=>v(te,A),[()=>(r(),We(L()),o(()=>r().t("by {{name}}",{name:L().user.name})))]),d(Q,te)};D(X,Q=>{We(L()),o(()=>{var te;return(te=L().user)==null?void 0:te.name})&&Q(ue)})}t(ne),t(E);var w=l(E,2);{let Q=Ze(()=>ee()?"rotate-180":"");Ps(w,{get className(){return`size-3.5 text-gray-400 transition-transform duration-200 ${e(Q)??""}`}})}t(k);var oe=l(k,2);{var ve=Q=>{var te=Tu(),A=a(te),I=a(A),C=a(I);t(I);var j=l(I,2),B=a(j),S=a(B,!0);t(B);var g=l(B,2);sa(g),t(j);var x=l(j,2),z=a(x);{let xe=Ze(()=>(r(),o(()=>r().t("Copy URL"))));Zt(z,{get content(){return e(xe)},children:(he,pe)=>{var be=ju(),Ne=a(be);kv(Ne,{className:"size-4 text-gray-500"}),t(be),V("click",be,O),d(he,be)},$$slots:{default:!0}})}var ie=l(z,2);{let xe=Ze(()=>(r(),o(()=>r().t("Delete"))));Zt(ie,{get content(){return e(xe)},children:(he,pe)=>{var be=Nu(),Ne=a(be);dl(Ne,{className:"size-4 text-gray-500"}),t(be),V("click",be,function(...fe){var ae;(ae=W())==null||ae.apply(this,fe)}),d(he,be)},$$slots:{default:!0}})}t(x),t(A),t(te),$((xe,he)=>{Be(C,"src",e(p)||`${As}/static/favicon.png`),v(S,xe),Be(g,"placeholder",he)},[()=>(r(),o(()=>r().t("Name"))),()=>(r(),o(()=>r().t("Webhook Name")))]),V("click",I,()=>e(b).click()),aa(g,()=>e(J),xe=>s(J,xe)),d(Q,te)};D(oe,Q=>{ee()&&Q(ve)})}t(h),$(Q=>{Be(U,"src",e(p)||`${As}/static/favicon.png`),v(H,e(J)),v(le,`${Q??""} `)},[()=>(r(),We(Ya),We(L()),o(()=>r().t("Created on {{date}}",{date:Ya(L().created_at/1e6).format("MMM D, YYYY")})))]),il(Z,()=>e(m),Q=>s(m,Q)),V("change",Z,q),V("click",k,function(...Q){var te;(te=_())==null||te.apply(this,Q)}),d(M,K),At(),n()}var zu=f('<div class="flex justify-center py-10"><!></div>'),Ou=f('<div class="w-full py-2"></div>'),Uu=f('<div class="text-gray-500 text-xs text-center py-8 px-10"> </div>'),Wu=f('<div class="ml-2 self-center"><!></div>'),Fu=f('<div><div class="flex justify-between dark:text-gray-100 px-5 pt-4 mb-1.5"><div class="flex w-full justify-between items-center mr-3"><div class="self-center text-base flex gap-1.5 items-center"><div> </div> <span class="text-sm text-gray-500"> </span></div> <button type="button" class="px-3 py-1.5 gap-1 rounded-xl bg-gray-100/50 dark:bg-gray-850/50 text-black dark:text-white transition font-medium text-xs flex items-center justify-center"><!> <span> </span></button></div> <button class="self-center"><!></button></div> <div class="flex flex-col w-full px-4 pb-4 dark:text-gray-200"><form class="flex flex-col w-full"><!> <div class="flex justify-end text-sm font-medium gap-1.5"><button type="submit"> <!></button></div></form></div></div>'),Hu=f("<!> <!>",1);function Ru(M,c){St(c,!1);const r=()=>Ce(P,"$i18n",i),[i,n]=Pt(),P=Mt("i18n");let L=me(c,"show",12,!1),ee=me(c,"channel",8,null),_=y([]),W=y(!1),u=y(!1),J=y(!1),p=y(null),b=y({});const m=async()=>{s(W,!0);try{s(_,await Iv(localStorage.token,ee().id))}catch{s(_,[])}s(W,!1)},q=async()=>{s(u,!0);try{const E=await Pv(localStorage.token,ee().id,{name:"New Webhook"});E&&(s(_,[...e(_),E]),s(p,E.id))}catch(E){Ve.error(`${E}`)}s(u,!1)},O=async()=>{s(u,!0);try{for(const[E,se]of Object.entries(e(b)))await Lv(localStorage.token,ee().id,E,se);s(b,{}),await m(),Ve.success(r().t("Saved"))}catch(E){Ve.error(`${E}`)}s(u,!1)},K=async()=>{if(e(p)){try{await Ev(localStorage.token,ee().id,e(p)),s(_,e(_).filter(E=>E.id!==e(p))),Ve.success(r().t("Deleted"))}catch(E){Ve.error(`${E}`)}s(p,null),s(J,!1)}};Kt(()=>(We(L()),We(ee())),()=>{L()&&ee()&&(m(),s(p,null),s(b,{}))}),ca(),It();var Z=Hu(),h=Ie(Z);cr(h,{get show(){return e(J)},set show(E){s(J,E)},$$events:{confirm:K},$$legacy:!0});var k=l(h,2);{var U=E=>{qa(E,{size:"sm",get show(){return L()},set show(se){L(se)},children:(se,H)=>{var ne=Fu(),le=a(ne),X=a(le),ue=a(X),w=a(ue),oe=a(w,!0);t(w);var ve=l(w,2),Q=a(ve,!0);t(ve),t(ue);var te=l(ue,2),A=a(te);ur(A,{className:"size-3.5"});var I=l(A,2),C=a(I,!0);t(I),t(te),t(X);var j=l(X,2),B=a(j);Oa(B,{className:"size-5"}),t(j),t(le);var S=l(le,2),g=a(S),x=a(g);{var z=fe=>{var ae=zu(),ge=a(ae);$a(ge,{className:"size-5"}),t(ae),d(fe,ae)},ie=fe=>{var ae=dt(),ge=Ie(ae);{var ke=Oe=>{var He=Ou();Ht(He,5,()=>e(_),Ue=>Ue.id,(Ue,de)=>{{let N=Ze(()=>(e(p),e(de),o(()=>e(p)===e(de).id)));Bu(Ue,{get webhook(){return e(de)},get expanded(){return e(N)},onClick:()=>{s(p,e(p)===e(de).id?null:e(de).id)},onDelete:()=>{s(J,!0)},onUpdate:Se=>{da(b,e(b)[e(de).id]=Se)}})}}),t(He),d(Oe,He)},R=Oe=>{var He=Uu(),Ue=a(He,!0);t(He),$(de=>v(Ue,de),[()=>(r(),o(()=>r().t("No webhooks yet")))]),d(Oe,He)};D(ge,Oe=>{e(_),o(()=>e(_).length>0)?Oe(ke):Oe(R,!1)},!0)}d(fe,ae)};D(x,fe=>{e(W)?fe(z):fe(ie,!1)})}var xe=l(x,2),he=a(xe),pe=a(he),be=l(pe);{var Ne=fe=>{var ae=Wu(),ge=a(ae);$a(ge,{}),t(ae),d(fe,ae)};D(be,fe=>{e(u)&&fe(Ne)})}t(he),t(xe),t(g),t(S),t(ne),$((fe,ae,ge)=>{v(oe,fe),v(Q,(e(_),o(()=>e(_).length))),te.disabled=e(u),v(C,ae),Ye(he,1,`px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center ${e(u)?"cursor-not-allowed":""}`),he.disabled=e(u),v(pe,`${ge??""} `)},[()=>(r(),o(()=>r().t("Webhooks"))),()=>(r(),o(()=>r().t("New Webhook"))),()=>(r(),o(()=>r().t("Save")))]),V("click",te,q),V("click",j,()=>L(!1)),V("submit",g,fe=>{fe.preventDefault(),O()}),d(se,ne)},$$slots:{default:!0},$$legacy:!0})};D(k,E=>{ee()&&E(U)})}d(M,Z),At(),n()}var Vu=f("<option><!></option>"),Ku=f('<select class="w-full text-sm bg-transparent placeholder:text-gray-300 dark:placeholder:text-gray-700 outline-hidden"></select>'),qu=f('<div class="flex flex-col w-full mt-2 mb-1"><div class=" mb-1 text-xs text-gray-500"> </div> <div class="flex-1"><!></div></div>'),Zu=f('<div class="-mx-2 mb-1 mt-2.5 px-2"><!></div>'),Gu=f("<div><!></div>"),Yu=f('<div class="flex w-full mt-2 items-center justify-between"><div class="text-xs text-gray-500"> </div> <button class="text-xs bg-transparent placeholder:text-gray-300 dark:placeholder:text-gray-700 outline-hidden text-left" type="button"> </button></div>'),Ju=f('<button class="px-3.5 py-1.5 text-sm font-medium dark:bg-black dark:hover:bg-black/90 dark:text-white bg-white text-black hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center" type="button"> </button>'),Xu=f('<div class="ml-2 self-center"><!></div>'),Qu=f('<div><div class=" flex justify-between dark:text-gray-300 px-5 pt-4 pb-1"><div class=" text-lg font-medium self-center"><!></div> <button class="self-center"><!></button></div> <div class="flex flex-col md:flex-row w-full px-5 pb-4 md:space-x-4 dark:text-gray-200"><div class=" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"><form class="flex flex-col w-full"><!> <div class=" text-gray-300 dark:text-gray-700 text-xs"><!></div> <div class="flex flex-col w-full mt-2"><div class=" mb-1 text-xs text-gray-500"> <span class="text-xs text-gray-200 dark:text-gray-800 ml-0.5"> </span></div> <div class="flex-1"><input class="w-full text-sm bg-transparent placeholder:text-gray-300 dark:placeholder:text-gray-700 outline-hidden" type="text" autocomplete="off" max="100"/></div></div> <!> <!> <!> <div class="flex justify-end pt-3 text-sm font-medium gap-1.5"><!> <button type="submit"><!> <!></button></div></form></div></div></div>'),ef=f("<!> <!> <!>",1);function gi(M,c){St(c,!1);const r=()=>Ce(ee,"$i18n",P),i=()=>Ce(za,"$user",P),n=()=>Ce(sl,"$page",P),[P,L]=Pt(),ee=Mt("i18n");let _=me(c,"show",12,!1),W=me(c,"onSubmit",8,()=>{}),u=me(c,"onUpdate",8,()=>{}),J=me(c,"channel",8,null),p=me(c,"edit",8,!1),b=y(["group","dm"]),m=y(""),q=y(""),O=y(null),K=y({}),Z=[],h=y([]),k=y(!1);const U=Q=>{Q==="group"?e(O)===null&&s(O,!0):s(O,null)},E=async()=>{if(s(k,!0),e(q).length>128){Ve.error(r().t("Channel name must be less than 128 characters")),s(k,!1);return}await W()({type:e(m),name:e(q).replace(/\s/g,"-"),is_private:e(m)==="group"?e(O):null,access_control:e(m)===""?e(K):{},group_ids:Z,user_ids:e(h)}),_(!1),s(k,!1)},se=()=>{var Q,te,A,I,C;((Q=i())==null?void 0:Q.role)==="admin"?s(b,["","group","dm"]):s(b,["group","dm"]),s(m,((te=J())==null?void 0:te.type)??e(b)[0]),J()&&(s(q,((A=J())==null?void 0:A.name)??""),s(O,((I=J())==null?void 0:I.is_private)??null),s(K,J().access_control),s(h,((C=J())==null?void 0:C.user_ids)??[]))};let H=y(!1),ne=y(!1);const le=async()=>{s(H,!1),await Mv(localStorage.token,J().id).catch(te=>{Ve.error(te.message)})&&(Ve.success(r().t("Channel deleted successfully")),u()(),n().url.pathname===`/channels/${J().id}`&&ga("/")),_(!1)},X=()=>{s(m,""),s(q,""),s(K,{}),s(h,[]),s(k,!1)};Kt(()=>e(q),()=>{e(q)&&s(q,e(q).replace(/\s/g,"-").toLocaleLowerCase())}),Kt(()=>e(m),()=>{U(e(m))}),Kt(()=>We(_()),()=>{_()?se():X()}),ca(),It();var ue=ef(),w=Ie(ue);qa(w,{size:"md",get show(){return _()},set show(Q){_(Q)},children:(Q,te)=>{var A=Qu(),I=a(A),C=a(I),j=a(C);{var B=F=>{var Y=ia();$(G=>v(Y,G),[()=>(r(),o(()=>r().t("Edit Channel")))]),d(F,Y)},S=F=>{var Y=ia();$(G=>v(Y,G),[()=>(r(),o(()=>r().t("Create Channel")))]),d(F,Y)};D(j,F=>{p()?F(B):F(S,!1)})}t(C);var g=l(C,2),x=a(g);Oa(x,{className:"size-5"}),t(g),t(I);var z=l(I,2),ie=a(z),xe=a(ie),he=a(xe);{var pe=F=>{var Y=qu(),G=a(Y),Pe=a(G,!0);t(G);var Re=l(G,2),je=a(Re);{let De=Ze(()=>(e(m),r(),o(()=>e(m)==="dm"?r().t("A private conversation between you and selected users"):e(m)==="group"?r().t("A collaboration channel where people join as members"):r().t("A discussion channel where access is controlled by groups and permissions"))));Zt(je,{get content(){return e(De)},placement:"top-start",children:(Fe,et)=>{var T=Ku();$(()=>{e(m),La(()=>{e(b),r()})}),Ht(T,7,()=>e(b),_e=>_e,(_e,we,Ee)=>{var Qe=Vu(),Ke=a(Qe);{var vt=st=>{var mt=ia();$(ct=>v(mt,ct),[()=>(r(),o(()=>r().t("Group Channel")))]),d(st,mt)},ft=st=>{var mt=dt(),ct=Ie(mt);{var ot=Lt=>{var Tt=ia();$(jt=>v(Tt,jt),[()=>(r(),o(()=>r().t("Direct Message")))]),d(Lt,Tt)},kt=Lt=>{var Tt=dt(),jt=Ie(Tt);{var Dt=Ft=>{var lt=ia();$(Ct=>v(lt,Ct),[()=>(r(),o(()=>r().t("Channel")))]),d(Ft,lt)};D(jt,Ft=>{e(we)===""&&Ft(Dt)},!0)}d(Lt,Tt)};D(ct,Lt=>{e(we)==="dm"?Lt(ot):Lt(kt,!1)},!0)}d(st,mt)};D(Ke,st=>{e(we)==="group"?st(vt):st(ft,!1)})}t(Qe);var at={};$(()=>{qo(Qe,e(Ee)===0),at!==(at=e(we))&&(Qe.value=(Qe.__value=e(we))??"")}),d(_e,Qe)}),t(T),or(T,()=>e(m),_e=>s(m,_e)),d(Fe,T)},$$slots:{default:!0}})}t(Re),t(Y),$(De=>v(Pe,De),[()=>(r(),o(()=>r().t("Channel Type")))]),d(F,Y)};D(he,F=>{p()||F(pe)})}var be=l(he,2),Ne=a(be);{var fe=F=>{var Y=ia();$(G=>v(Y,G),[()=>(r(),o(()=>r().t("Discussion channel where access is based on groups and permissions")))]),d(F,Y)},ae=F=>{var Y=dt(),G=Ie(Y);{var Pe=je=>{var De=ia();$(Fe=>v(De,Fe),[()=>(r(),o(()=>r().t("Collaboration channel where people join as members")))]),d(je,De)},Re=je=>{var De=dt(),Fe=Ie(De);{var et=T=>{var _e=ia();$(we=>v(_e,we),[()=>(r(),o(()=>r().t("Private conversation between selected users")))]),d(T,_e)};D(Fe,T=>{e(m)==="dm"&&T(et)},!0)}d(je,De)};D(G,je=>{e(m)==="group"?je(Pe):je(Re,!1)},!0)}d(F,Y)};D(Ne,F=>{e(m)===""?F(fe):F(ae,!1)})}t(be);var ge=l(be,2),ke=a(ge),R=a(ke),Oe=l(R),He=a(Oe,!0);t(Oe),t(ke);var Ue=l(ke,2),de=a(Ue);sa(de),t(Ue),t(ge);var N=l(ge,2);{var Se=F=>{var Y=Zu(),G=a(Y);{var Pe=je=>{Bv(je,{accessRoles:["read","write"],get accessControl(){return e(K)},set accessControl(De){s(K,De)},$$legacy:!0})},Re=je=>{var De=dt(),Fe=Ie(De);{var et=T=>{{let _e=Ze(()=>e(O)?"private":"public");Mu(T,{get state(){return e(_e)},onChange:we=>{we==="private"?s(O,!0):s(O,!1),e(O)}})}};D(Fe,T=>{e(m)==="group"&&T(et)},!0)}d(je,De)};D(G,je=>{e(m)===""?je(Pe):je(Re,!1)})}t(Y),d(F,Y)};D(N,F=>{e(m)!=="dm"&&F(Se)})}var $e=l(N,2);{var Te=F=>{var Y=Gu(),G=a(Y);zv(G,{includeGroups:!1,get userIds(){return e(h)},set userIds(Pe){s(h,Pe)},$$legacy:!0}),t(Y),d(F,Y)};D($e,F=>{e(m),o(()=>["dm"].includes(e(m)))&&F(Te)})}var Le=l($e,2);{var Ae=F=>{var Y=Yu(),G=a(Y),Pe=a(G,!0);t(G);var Re=l(G,2),je=a(Re,!0);t(Re),t(Y),$((De,Fe)=>{v(Pe,De),v(je,Fe)},[()=>(r(),o(()=>r().t("Webhooks"))),()=>(r(),o(()=>r().t("Manage")))]),V("click",Re,()=>{s(ne,!0)}),d(F,Y)};D(Le,F=>{p()&&F(Ae)})}var re=l(Le,2),ye=a(re);{var Me=F=>{var Y=Ju(),G=a(Y,!0);t(Y),$(Pe=>v(G,Pe),[()=>(r(),o(()=>r().t("Delete")))]),V("click",Y,()=>{s(H,!0)}),d(F,Y)};D(ye,F=>{p()&&F(Me)})}var ze=l(ye,2),Je=a(ze);{var Ge=F=>{var Y=ia();$(G=>v(Y,G),[()=>(r(),o(()=>r().t("Update")))]),d(F,Y)},gt=F=>{var Y=ia();$(G=>v(Y,G),[()=>(r(),o(()=>r().t("Create")))]),d(F,Y)};D(Je,F=>{p()?F(Ge):F(gt,!1)})}var $t=l(Je,2);{var Xe=F=>{var Y=Xu(),G=a(Y);$a(G,{}),t(Y),d(F,Y)};D($t,F=>{e(k)&&F(Xe)})}t(ze),t(re),t(xe),t(ie),t(z),t(A),$((F,Y,G)=>{v(R,`${F??""} `),v(He,Y),Be(de,"placeholder",G),de.required=e(m)!=="dm",Ye(ze,1,`px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-950 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center ${e(k)?" cursor-not-allowed":""}`),ze.disabled=e(k)},[()=>(r(),o(()=>r().t("Channel Name"))),()=>(e(m),r(),o(()=>e(m)==="dm"?`${r().t("Optional")}`:"")),()=>(r(),o(()=>`${r().t("new-channel")}`))]),V("click",g,()=>{_(!1)}),aa(de,()=>e(q),F=>s(q,F)),V("submit",xe,er(()=>{E()})),d(Q,A)},$$slots:{default:!0},$$legacy:!0});var oe=l(w,2);{let Q=Ze(()=>(r(),o(()=>r().t("Are you sure you want to delete this channel?")))),te=Ze(()=>(r(),o(()=>r().t("Delete"))));cr(oe,{get message(){return e(Q)},get confirmLabel(){return e(te)},get show(){return e(H)},set show(A){s(H,A)},$$events:{confirm:()=>{le()}},$$legacy:!0})}var ve=l(oe,2);Ru(ve,{get channel(){return J()},get show(){return e(ne)},set show(Q){s(ne,Q)},$$legacy:!0}),d(M,ue),At(),L()}var tf=f("<img/>"),af=f('<span class="absolute inline-flex h-full w-full animate-ping rounded-full bg-green-400 opacity-75"></span>'),rf=f('<div class="absolute bottom-0 right-0"><span class="relative flex size-2"><!> <span></span></span></div>'),sf=f('<div class="flex ml-[1px] mr-0.5 relative"><!> <!></div>'),of=f('<div class=" size-4 justify-center flex items-center ml-1"><!></div>'),lf=f('<span class="line-clamp-1"> </span>'),nf=f('<div class=" self-center shrink-0"><!></div>'),df=f('<span class="flex gap-1.5 line-clamp-1"><!> <div class="line-clamp-1 italic"> </div></span>'),vf=f('<span class="shrink-0 line-clamp-1"> </span> <!>',1),cf=f('<div class="text-xs py-[1px] px-2 rounded-xl bg-gray-100 text-black dark:bg-gray-800 dark:text-white font-medium whitespace-nowrap"> </div>'),uf=f('<div class="ml-0.5 mr-1 invisible group-hover:visible self-center flex items-center dark:text-gray-300"><button type="button" class="p-0.5 dark:hover:bg-gray-850 rounded-lg touch-auto"><!></button></div>'),ff=f('<div class="ml-0.5 mr-1 invisible group-hover:visible self-center flex items-center dark:text-gray-300"><button type="button" class="p-0.5 dark:hover:bg-gray-850 rounded-lg touch-auto"><!></button></div>'),gf=f('<!> <div id="sidebar-channel-item"><a class=" w-full flex justify-between" draggable="false"><div class="flex items-center gap-1"><div><!></div> <div class=" text-left self-center overflow-hidden w-full line-clamp-1 flex-1 pr-1 flex items-center gap-2.5"><!></div></div> <div class="flex items-center"><!></div></a> <!></div>',1);function pf(M,c){St(c,!1);const r=()=>Ce(W,"$i18n",ee),i=()=>Ce(sl,"$page",ee),n=()=>Ce(Ir,"$channels",ee),P=()=>Ce(mr,"$mobile",ee),L=()=>Ce(za,"$user",ee),[ee,_]=Pt(),W=Mt("i18n");let u=me(c,"onUpdate",8,()=>{}),J=me(c,"className",8,""),p=me(c,"channel",8),b=y(!1),m=y();It();var q=gf(),O=Ie(q);gi(O,{get channel(){return p()},edit:!0,get onUpdate(){return u()},onSubmit:async({name:A,is_private:I,access_control:C,group_ids:j,user_ids:B})=>{await jv(localStorage.token,p().id,{name:A,is_private:I,access_control:C,group_ids:j,user_ids:B}).catch(g=>{Ve.error(g.message)})&&Ve.success(r().t("Channel updated successfully")),u()()},get show(){return e(b)},set show(A){s(b,A)},$$legacy:!0});var K=l(O,2),Z=a(K),h=a(Z),k=a(h),U=a(k);{var E=A=>{var I=dt(),C=Ie(I);{var j=S=>{const g=Ze(()=>(We(p()),L(),o(()=>p().users.filter(he=>{var pe;return he.id!==((pe=L())==null?void 0:pe.id)}))));var x=sf(),z=a(x);Ht(z,1,()=>(We(e(g)),o(()=>e(g).slice(0,2))),wa,(he,pe,be)=>{var Ne=tf();Ye(Ne,1,` size-5.5 rounded-full border-2 border-white dark:border-gray-900 ${be===1?"-ml-2.5":""}`),$(()=>{Be(Ne,"src",(We(Aa),e(pe),o(()=>`${Aa}/users/${e(pe).id}/profile/image`))),Be(Ne,"alt",(e(pe),o(()=>e(pe).name)))}),d(he,Ne)});var ie=l(z,2);{var xe=he=>{var pe=rf(),be=a(pe),Ne=a(be);{var fe=ge=>{var ke=af();d(ge,ke)};D(Ne,ge=>{We(e(g)),o(()=>{var ke;return(ke=e(g)[0])==null?void 0:ke.is_active})&&ge(fe)})}var ae=l(Ne,2);t(be),t(pe),$(()=>Ye(ae,1,`relative inline-flex size-2 rounded-full ${We(e(g)),o(()=>{var ge;return(ge=e(g)[0])!=null&&ge.is_active?"bg-green-500":"bg-gray-300 dark:bg-gray-700"})??""} border-[1.5px] border-white dark:border-gray-900`)),d(he,pe)};D(ie,he=>{We(e(g)),o(()=>e(g).length===1)&&he(xe)})}t(x),d(S,x)},B=S=>{Ov(S,{className:"size-4 ml-1 mr-0.5",strokeWidth:"2"})};D(C,S=>{We(p()),o(()=>{var g;return(g=p())==null?void 0:g.users})?S(j):S(B,!1)})}d(A,I)},se=A=>{var I=of(),C=a(I);{var j=S=>{Hv(S,{className:"size-3.5",strokeWidth:"2.5"})},B=S=>{Rv(S,{className:"size-[15px]",strokeWidth:"2"})};D(C,S=>{We(p()),o(()=>{var g,x,z;return((g=p())==null?void 0:g.type)==="group"?!((x=p())!=null&&x.is_private):((z=p())==null?void 0:z.access_control)===null})?S(j):S(B,!1)})}t(I),d(A,I)};D(U,A=>{We(p()),o(()=>{var I;return((I=p())==null?void 0:I.type)==="dm"})?A(E):A(se,!1)})}t(k);var H=l(k,2),ne=a(H);{var le=A=>{var I=lf(),C=a(I,!0);t(I),$(()=>v(C,(We(p()),o(()=>p().name)))),d(A,I)},X=A=>{var I=vf(),C=Ie(I),j=a(C,!0);t(C);var B=l(C,2);{var S=g=>{const x=Ze(()=>(We(p()),L(),o(()=>p().users.find(he=>{var pe;return he.id!==((pe=L())==null?void 0:pe.id)}))));var z=dt(),ie=Ie(z);{var xe=he=>{var pe=df(),be=a(pe);{var Ne=ge=>{var ke=nf(),R=a(ke);{let Oe=Ze(()=>(We(e(x)),o(()=>{var He;return(He=e(x))==null?void 0:He.status_emoji})));si(R,{className:"size-3.5",get shortCode(){return e(Oe)}})}t(ke),d(ge,ke)};D(be,ge=>{We(e(x)),o(()=>{var ke;return(ke=e(x))==null?void 0:ke.status_emoji})&&ge(Ne)})}var fe=l(be,2),ae=a(fe,!0);t(fe),t(pe),$(()=>v(ae,(We(e(x)),o(()=>{var ge;return(ge=e(x))==null?void 0:ge.status_message})))),d(he,pe)};D(ie,he=>{We(e(x)),o(()=>{var pe,be;return((pe=e(x))==null?void 0:pe.status_emoji)||((be=e(x))==null?void 0:be.status_message)})&&he(xe)})}d(g,z)};D(B,g=>{We(p()),o(()=>{var x,z;return((z=(x=p())==null?void 0:x.users)==null?void 0:z.length)===2})&&g(S)})}$(g=>v(j,g),[()=>(We(p()),L(),o(()=>{var g,x;return(x=(g=p())==null?void 0:g.users)==null?void 0:x.filter(z=>{var ie;return z.id!==((ie=L())==null?void 0:ie.id)}).map(z=>z.name).join(", ")}))]),d(A,I)};D(ne,A=>{We(p()),o(()=>{var I;return(I=p())==null?void 0:I.name})?A(le):A(X,!1)})}t(H),t(h);var ue=l(h,2),w=a(ue);{var oe=A=>{var I=cf(),C=a(I,!0);t(I),$(j=>v(C,j),[()=>(r(),We(p()),o(()=>new Intl.NumberFormat(r().locale,{notation:"compact",compactDisplay:"short"}).format(p().unread_count)))]),d(A,I)};D(w,A=>{We(p()),o(()=>{var I;return((I=p())==null?void 0:I.unread_count)>0})&&A(oe)})}t(ue),t(Z);var ve=l(Z,2);{var Q=A=>{var I=uf(),C=a(I),j=a(C);Oa(j,{className:"size-3.5"}),t(C),t(I),V("click",C,async B=>{B.stopImmediatePropagation(),B.stopPropagation(),Ir.update(S=>S.filter(g=>g.id!==p().id)),await Nv(localStorage.token,p().id,!1).catch(S=>{Ve.error(`${S}`)})}),d(A,I)},te=A=>{var I=dt(),C=Ie(I);{var j=B=>{var S=ff(),g=a(S),x=a(g);oi(x,{className:"size-3.5"}),t(g),t(S),V("click",g,z=>{z.stopImmediatePropagation(),z.stopPropagation(),s(b,!0)}),d(B,S)};D(C,B=>{L(),We(p()),o(()=>{var S,g;return((S=L())==null?void 0:S.role)==="admin"||p().user_id===((g=L())==null?void 0:g.id)})&&B(j)},!0)}d(A,I)};D(ve,A=>{We(p()),o(()=>{var I;return["dm"].includes((I=p())==null?void 0:I.type)})?A(Q):A(te,!1)})}t(K),Qa(K,A=>s(m,A),()=>e(m)),$(()=>{Ye(K,1,` w-full ${J()??""} rounded-xl flex relative group hover:bg-gray-100 dark:hover:bg-gray-900 ${i(),We(p()),o(()=>i().url.pathname===`/channels/${p().id}`?"bg-gray-100 dark:bg-gray-900 selected":"")??""} ${We(p()),o(()=>{var A;return((A=p())==null?void 0:A.type)==="dm"?"px-1 py-[3px]":"p-1"})??""}  ${We(p()),o(()=>{var A;return((A=p())==null?void 0:A.unread_count)>0?"font-medium dark:text-white text-black":" dark:text-gray-400 text-gray-600"})??""} cursor-pointer select-none`),Be(Z,"href",`/channels/${We(p()),o(()=>p().id)??""}`)}),V("click",Z,()=>{p(),n()&&Ir.set(n().map(A=>(A.id===p().id&&(A.unread_count=0),A))),P()&&na.set(!1)}),d(M,q),At(),_()}var mf=f('<div class="self-center pl-1.5 translate-y-[0.5px] rounded-l-xl bg-transparent"><button class="p-0.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-900 transition"><!></button></div>'),hf=f('<button><div class="dark:text-gray-300 text-gray-700 font-medium line-clamp-1 shrink-0"> </div> <div class=" text-gray-500 line-clamp-1"> </div></button>'),_f=f('<div class="px-1 font-medium dark:text-gray-300 text-gray-700 mb-1 capitalize"> </div> <div class="max-h-60 overflow-auto"></div>',1),xf=f('<button><div class="dark:text-gray-300 text-gray-700 font-medium"> </div> <div class=" text-gray-500 line-clamp-1"> </div></button>'),bf=f('<div class="px-1 font-medium dark:text-gray-300 text-gray-700 mb-1"> </div> <div class=" max-h-60 overflow-auto"></div>',1),yf=f('<div class="absolute top-0 mt-8 left-0 right-1 border border-gray-100 dark:border-gray-900 bg-gray-50 dark:bg-gray-950 rounded-2xl z-10 shadow-lg" id="search-options-container"><div class="px-3 py-2.5 text-xs group"><!></div></div>'),wf=f('<div class="px-1 mb-1 flex justify-center space-x-2 relative z-10" id="search-container"><div class="flex w-full rounded-xl" id="chat-search"><div class="self-center py-2 rounded-l-xl bg-transparent dark:text-gray-300"><!></div> <input id="search-input" class="w-full rounded-r-xl py-1.5 pl-2.5 text-sm bg-transparent dark:text-gray-300 outline-hidden" autocomplete="off" maxlength="500"/> <!></div> <!></div>');function $f(M,c){St(c,!1);const r=()=>Ce(_,"$i18n",P),i=()=>Ce(Is,"$tags",P),n=()=>Ce(ol,"$folders",P),[P,L]=Pt(),ee=ha(),_=Mt("i18n");let W=me(c,"placeholder",8,""),u=me(c,"value",12,""),J=me(c,"showClearButton",8,!1),p=me(c,"onFocus",8,()=>{}),b=me(c,"onKeydown",8,A=>{}),m=y(0),q=y(null),O=y(""),K=[{name:"tag:",description:r().t("search for tags")},{name:"folder:",description:r().t("search for folders")},{name:"pinned:",description:r().t("search for pinned chats")},{name:"shared:",description:r().t("search for shared chats")},{name:"archived:",description:r().t("search for archived chats")}],Z=y(!1),h=y(!1),k=y(K),U=y([]);const E=async()=>{e(O),await va(),e(O).startsWith("tag:")?s(U,[...i(),{id:"none",name:r().t("Untagged")}].filter(A=>{const I=e(O).slice(4);if(I){const C=I.replaceAll(" ","_").toLowerCase();return A.id!==C?A.id.startsWith(C):!1}else return!0}).map(A=>({id:A.id,name:A.name,type:"tag"}))):e(O).startsWith("folder:")?s(U,[...n()].filter(A=>{const I=e(O).slice(7);if(I){const C=A.name.replaceAll(" ","_").toLowerCase(),j=I.replaceAll(" ","_").toLowerCase();return C!==j?C.startsWith(j):!1}else return!0}).map(A=>({id:A.name.replaceAll(" ","_").toLowerCase(),name:A.name,type:"folder"}))):e(O).startsWith("pinned:")?s(U,[{id:"true",name:"true",type:"pinned"},{id:"false",name:"false",type:"pinned"}].filter(A=>{const I=e(O).slice(7);return I?A.id.startsWith(I)&&A.id!==I:!0})):e(O).startsWith("shared:")?s(U,[{id:"true",name:"true",type:"shared"},{id:"false",name:"false",type:"shared"}].filter(A=>{const I=e(O).slice(7);return I?A.id.startsWith(I)&&A.id!==I:!0})):e(O).startsWith("archived:")?s(U,[{id:"true",name:"true",type:"archived"},{id:"false",name:"false",type:"archived"}].filter(A=>{const I=e(O).slice(9);return I?A.id.startsWith(I)&&A.id!==I:!0})):s(U,[])},se=async()=>{await Is.set(await nl(localStorage.token))},H=()=>{u(""),ee("input")};Kt(()=>We(u()),()=>{s(O,u()?u().split(" ").at(-1):u())}),Kt(()=>e(O),()=>{s(k,K.filter(A=>A.name.startsWith(e(O))))}),Kt(()=>e(O),()=>{e(O)&&e(O)!==null&&E()}),ca(),It();var ne=wf(),le=a(ne),X=a(le),ue=a(X);Ls(ue,{}),t(X);var w=l(X,2);sa(w);var oe=l(w,2);{var ve=A=>{var I=mf(),C=a(I),j=a(C);Oa(j,{className:"size-3",strokeWidth:"2"}),t(C),t(I),V("click",C,H),d(A,I)};D(oe,A=>{J()&&u()&&A(ve)})}t(le);var Q=l(le,2);{var te=A=>{var I=yf(),C=a(I),j=a(C);{var B=g=>{var x=_f(),z=Ie(x),ie=a(z,!0);t(z);var xe=l(z,2);Ht(xe,5,()=>e(U),wa,(he,pe,be)=>{var Ne=hf();Be(Ne,"id",`search-item-${be}`);var fe=a(Ne),ae=a(fe,!0);t(fe);var ge=l(fe,2),ke=a(ge,!0);t(ge),t(Ne),$(()=>{Ye(Ne,1,` px-1.5 py-0.5 flex gap-1 hover:bg-gray-100 dark:hover:bg-gray-900 w-full rounded ${e(m)===be?"bg-gray-100 dark:bg-gray-900":""}`),Be(Ne,"data-selected",e(m)===be),v(ae,(e(pe),o(()=>e(pe).name))),v(ke,(e(pe),o(()=>e(pe).id)))}),V("click",Ne,Nn(async()=>{const R=u().split(" ");R.pop(),R.push(`${e(pe).type}:${e(pe).id} `),u(R.join(" ")),s(U,[]),ee("input")})),d(he,Ne)}),t(xe),$(()=>v(ie,e(q))),d(g,x)},S=g=>{var x=dt(),z=Ie(x);{var ie=xe=>{var he=bf(),pe=Ie(he),be=a(pe,!0);t(pe);var Ne=l(pe,2);Ht(Ne,5,()=>e(k),wa,(fe,ae,ge)=>{var ke=xf();Be(ke,"id",`search-option-${ge}`);var R=a(ke),Oe=a(R,!0);t(R);var He=l(R,2),Ue=a(He,!0);t(He),t(ke),$(()=>{Ye(ke,1,` px-1.5 py-0.5 flex gap-1 hover:bg-gray-100 dark:hover:bg-gray-900 w-full rounded ${e(m)===ge?"bg-gray-100 dark:bg-gray-900":""}`),v(Oe,(e(ae),o(()=>e(ae).name))),v(Ue,(e(ae),o(()=>e(ae).description)))}),V("click",ke,Nn(async()=>{const de=u().split(" ");de.pop(),de.push(`${e(ae).name}`),s(q,e(ae).name.replace(":","")),u(de.join(" ")),ee("input")})),d(fe,ke)}),t(Ne),$(fe=>v(be,fe),[()=>(r(),o(()=>r().t("Search options")))]),d(xe,he)};D(z,xe=>{e(k),o(()=>e(k).length>0)&&xe(ie)},!0)}d(g,x)};D(j,g=>{e(U),o(()=>e(U).length>0)?g(B):g(S,!1)})}t(C),t(I),rl(1,I,()=>Rn,()=>({duration:50})),V("mouseenter",I,()=>{s(h,!0),s(m,null)}),V("mouseleave",I,()=>{s(h,!1),s(m,0)}),d(A,I)};D(Q,A=>{e(Z),e(k),e(U),o(()=>e(Z)&&(e(k).length>0||e(U).length>0))&&A(te)})}t(ne),$(A=>Be(w,"placeholder",A),[()=>(We(W()),r(),o(()=>W()?W():r().t("Search")))]),aa(w,u),V("input",w,()=>{ee("input")}),V("click",w,()=>{e(Z)||(p()(),s(h,!1),s(Z,!0),se())}),V("blur",w,()=>{e(h)||s(Z,!1)}),V("keydown",w,A=>{if(A.key==="Enter"){if(e(U).length>0){document.getElementById(`search-item-${e(m)}`).click();return}if(e(k).length>0){document.getElementById(`search-option-${e(m)}`).click();return}}A.key==="ArrowUp"?(A.preventDefault(),s(m,Math.max(0,e(m)-1))):A.key==="ArrowDown"?(A.preventDefault(),e(U).length>0?e(m)===e(U).length-1?s(Z,!1):s(m,Math.min(e(m)+1,e(U).length-1)):e(m)===e(k).length-1?s(Z,!1):s(m,Math.min(e(m)+1,e(k).length-1))):(e(Z)||(p()(),s(h,!1),s(Z,!0),se()),s(m,0));const I=document.querySelector('[data-selected="true"]');I==null||I.scrollIntoView({block:"center",inline:"nearest",behavior:"instant"}),document.getElementById("search-options-container")||b()(A)}),d(M,ne),At(),L()}var kf=f('<button dragabble="false"><div class="pr-2"><!></div> <div class=" flex-1 text-left"><div class="text-ellipsis line-clamp-1 w-full"> </div></div></button>'),Cf=f('<div class="text-xs text-gray-500 dark:text-gray-400 text-center px-5 py-4"> </div>'),Sf=f("<div> </div>"),Af=f('<!> <a draggable="false"><div class=" flex-1"><div class="text-ellipsis line-clamp-1 w-full"> </div></div> <div class=" pl-3 shrink-0 text-gray-500 dark:text-gray-400 text-xs"> </div></a>',1),If=f('<div class="w-full flex justify-center py-4 text-xs animate-pulse items-center gap-2"><!> <div class=" "> </div></div>'),Ef=f('<hr class="border-gray-50 dark:border-gray-850/30 my-3"/> <!> <!> <!>',1),Pf=f('<div class="w-full h-full flex justify-center items-center"><!></div>'),Lf=f('<div class="w-full h-full flex justify-center items-center text-gray-500 dark:text-gray-400 text-sm"> </div>'),Mf=f('<div class="w-full h-full flex flex-col"><!></div>'),jf=f('<div class="py-3 dark:text-gray-300 text-gray-700"><div class="px-4 pb-1.5"><!></div> <div class="flex px-4 pb-1"><div class="flex flex-col overflow-y-auto h-96 md:h-[40rem] max-h-full scrollbar-hidden w-full flex-1 pr-2"><div class="w-full text-xs text-gray-500 dark:text-gray-500 font-medium pb-2 px-2"> </div> <!> <!></div> <div id="chat-preview" class="hidden md:flex md:flex-1 w-full overflow-y-auto h-96 md:h-[40rem] scrollbar-hidden"><!></div></div></div>');function Nf(M,c){St(c,!1);const r=()=>Ce(ee,"$i18n",P),i=()=>Ce(Ma,"$config",P),n=()=>Ce(za,"$user",P),[P,L]=Pt(),ee=Mt("i18n");Ya.extend(Kv),Ya.extend(Gn);let _=me(c,"show",12,!1),W=me(c,"onClose",8,()=>{}),u=y([{label:r().t("Start a new conversation"),onClick:async()=>{await ga(`/${e(J)?`?q=${e(J)}`:""}`),_(!1),W()()},icon:Qo}]),J=y(""),p=1,b=y(null),m=y(!1),q=y(!1),O,K=y(null),Z=y(null),h=y([""]),k=y(null),U=y(null);const E=async le=>{var oe,ve,Q,te,A,I,C,j;if(!e(b)||e(b).length===0||le===null){s(Z,null),s(U,null),s(k,null),s(h,[""]);return}const X=le-e(u).length;if(X<0||X>=e(b).length){s(Z,null),s(U,null),s(k,null),s(h,[""]);return}const ue=e(b)[X].id,w=await Ja(localStorage.token,ue).catch(async B=>null);if(w)if((oe=w==null?void 0:w.chat)!=null&&oe.history){s(h,(((ve=w==null?void 0:w.chat)==null?void 0:ve.models)??void 0)!==void 0?(Q=w==null?void 0:w.chat)==null?void 0:Q.models:[((te=w==null?void 0:w.chat)==null?void 0:te.models)??""]),s(k,(A=w==null?void 0:w.chat)==null?void 0:A.history),s(U,Zn((I=w==null?void 0:w.chat)==null?void 0:I.history,(j=(C=w==null?void 0:w.chat)==null?void 0:C.history)==null?void 0:j.currentId)),await va();const B=document.getElementById("chat-preview");B&&(B.scrollTop=B.scrollHeight)}else s(U,[]);else{Ve.error(r().t("Failed to load chat preview")),s(Z,null),s(U,null),s(k,null),s(h,[""]);return}},se=async()=>{_()&&(O&&clearTimeout(O),p=1,s(b,null),e(J)===""?s(b,await Fa(localStorage.token,p)):O=setTimeout(async()=>{s(b,await An(localStorage.token,e(J),p)),(e(b)??[]).length===0?s(q,!0):s(q,!1)},500),s(Z,null),s(U,null),s(k,null),s(h,[""]),(e(b)??[]).length===0?s(q,!0):s(q,!1))},H=async()=>{s(m,!0),p+=1;let le=[];e(J)?le=await An(localStorage.token,e(J),p):le=await Fa(localStorage.token,p),s(q,le.length===0),le.length>0&&s(b,[...e(b),...le]),s(m,!1)},ne=le=>{if(document.getElementById("search-options-container")||!_())return;if(le.code==="Escape")_(!1),W()();else if(le.code==="Enter"){const w=document.querySelector('[data-arrow-selected="true"]');w&&(w==null||w.click(),_(!1));return}else if(le.code==="ArrowDown"){const w=document.getElementById("search-input");if(w&&document.activeElement===w){w.blur(),s(K,0);return}s(K,Math.min(e(K)+1,(e(b)??[]).length-1+e(u).length))}else if(le.code==="ArrowUp"){if(e(K)===0){const w=document.getElementById("search-input");if(w&&document.activeElement!==w){w.focus(),s(K,0);return}}s(K,Math.max(e(K)-1,0))}const ue=document.querySelector('[data-arrow-selected="true"]');ue==null||ue.scrollIntoView({block:"center",inline:"nearest",behavior:"instant"})};oa(()=>{var le,X,ue,w,oe,ve;s(u,[...e(u),...(((X=(le=i())==null?void 0:le.features)==null?void 0:X.enable_notes)??!1)&&(((ue=n())==null?void 0:ue.role)==="admin"||(((ve=(oe=(w=n())==null?void 0:w.permissions)==null?void 0:oe.features)==null?void 0:ve.notes)??!0))?[{label:r().t("Create a new note"),onClick:async()=>{await ga(`/notes?content=${e(J)}`),_(!1),W()()},icon:bv}]:[]]),document.addEventListener("keydown",ne)}),vr(()=>{O&&clearTimeout(O),document.removeEventListener("keydown",ne)}),Kt(()=>(e(m),e(b),e(K)),()=>{!e(m)&&e(b)&&E(e(K))}),Kt(()=>We(_()),()=>{_()&&se()}),ca(),It(),qa(M,{size:"xl",get show(){return _()},set show(le){_(le)},children:(le,X)=>{var ue=jf(),w=a(ue),oe=a(w);{let ie=Ze(()=>(r(),o(()=>r().t("Search"))));$f(oe,{get placeholder(){return e(ie)},showClearButton:!0,onFocus:()=>{s(K,null),s(U,null)},onKeydown:xe=>{if(xe.code==="Enter"&&(e(b)??[]).length>0){const pe=document.querySelector('[data-arrow-selected="true"]');pe&&(pe==null||pe.click()),_(!1);return}else xe.code==="ArrowDown"?s(K,Math.min(e(K)+1,(e(b)??[]).length-1+e(u).length)):xe.code==="ArrowUp"?s(K,Math.max(e(K)-1,0)):s(K,0);const he=document.querySelector('[data-arrow-selected="true"]');he==null||he.scrollIntoView({block:"center",inline:"nearest",behavior:"instant"})},get value(){return e(J)},set value(xe){s(J,xe)},$$events:{input:se},$$legacy:!0})}t(w);var ve=l(w,2),Q=a(ve),te=a(Q),A=a(te,!0);t(te);var I=l(te,2);Ht(I,3,()=>e(u),ie=>ie.label,(ie,xe,he)=>{var pe=kf(),be=a(pe),Ne=a(be);Vv(Ne,()=>e(xe).icon,(ke,R)=>{R(ke,{})}),t(be);var fe=l(be,2),ae=a(fe),ge=a(ae,!0);t(ae),t(fe),t(pe),$(ke=>{Ye(pe,1,` w-full flex items-center rounded-xl text-sm py-2 px-3 hover:bg-gray-50 dark:hover:bg-gray-850 ${e(K)===e(he)?"bg-gray-50 dark:bg-gray-850":""}`),Be(pe,"data-arrow-selected",e(K)===e(he)?"true":void 0),v(ge,ke)},[()=>(r(),e(xe),o(()=>r().t(e(xe).label)))]),V("mouseenter",pe,()=>{s(K,e(he))}),V("click",pe,async()=>{await e(xe).onClick()}),d(ie,pe)});var C=l(I,2);{var j=ie=>{var xe=Ef(),he=l(Ie(xe),2);{var pe=ae=>{var ge=Cf(),ke=a(ge,!0);t(ge),$(R=>v(ke,R),[()=>(r(),o(()=>r().t("No results found")))]),d(ae,ge)};D(he,ae=>{e(b),o(()=>e(b).length===0)&&ae(pe)})}var be=l(he,2);Ht(be,3,()=>e(b),ae=>ae.id,(ae,ge,ke)=>{var R=Af(),Oe=Ie(R);{var He=Le=>{var Ae=Sf(),re=a(Ae,!0);t(Ae),$(ye=>{Ye(Ae,1,`w-full text-xs text-gray-500 dark:text-gray-500 font-medium ${e(ke)===0?"":"pt-5"} pb-2 px-2`),v(re,ye)},[()=>(r(),e(ge),o(()=>r().t(e(ge).time_range)))]),d(Le,Ae)};D(Oe,Le=>{We(e(ke)),e(ge),e(b),o(()=>e(ke)===0||e(ke)>0&&e(ge).time_range!==e(b)[e(ke)-1].time_range)&&Le(He)})}var Ue=l(Oe,2),de=a(Ue),N=a(de),Se=a(N,!0);t(N),t(de);var $e=l(de,2),Te=a($e,!0);t($e),t(Ue),$(Le=>{Ye(Ue,1,` w-full flex justify-between items-center rounded-xl text-sm py-2 px-3 hover:bg-gray-50 dark:hover:bg-gray-850 ${e(K),We(e(ke)),e(u),o(()=>e(K)===e(ke)+e(u).length?"bg-gray-50 dark:bg-gray-850":"")??""}`),Be(Ue,"href",`/c/${e(ge),o(()=>e(ge).id)??""}`),Be(Ue,"data-arrow-selected",(e(K),We(e(ke)),e(u),o(()=>e(K)===e(ke)+e(u).length?"true":void 0))),v(Se,(e(ge),o(()=>{var Ae;return(Ae=e(ge))==null?void 0:Ae.title}))),v(Te,Le)},[()=>(r(),We(Ya),e(ge),o(()=>{var Le;return r().t(Ya(((Le=e(ge))==null?void 0:Le.updated_at)*1e3).calendar(null,{sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"L"}))}))]),V("mouseenter",Ue,()=>{s(K,e(ke)+e(u).length)}),V("click",Ue,async()=>{await ga(`/c/${e(ge).id}`),_(!1),W()()}),d(ae,R)});var Ne=l(be,2);{var fe=ae=>{ai(ae,{$$events:{visible:ge=>{e(m)||H()}},children:(ge,ke)=>{var R=If(),Oe=a(R);$a(Oe,{className:" size-4"});var He=l(Oe,2),Ue=a(He,!0);t(He),t(R),$(de=>v(Ue,de),[()=>(r(),o(()=>r().t("Loading...")))]),d(ge,R)},$$slots:{default:!0}})};D(Ne,ae=>{e(q)||ae(fe)})}d(ie,xe)},B=ie=>{var xe=Pf(),he=a(xe);$a(he,{className:"size-5"}),t(xe),d(ie,xe)};D(C,ie=>{e(b)?ie(j):ie(B,!1)})}t(Q);var S=l(Q,2),g=a(S);{var x=ie=>{var xe=Lf(),he=a(xe,!0);t(xe),$(pe=>v(he,pe),[()=>(r(),o(()=>r().t("Select a conversation to preview")))]),d(ie,xe)},z=ie=>{var xe=Mf(),he=a(xe);{let pe=Ze(()=>(e(Z),o(()=>{var be;return`chat-preview-${((be=e(Z))==null?void 0:be.id)??""}`})));ei(he,{className:"h-full flex pt-4 pb-8 w-full",get chatId(){return e(pe)},get user(){return n()},readOnly:!0,get selectedModels(){return e(h)},autoScroll:!0,sendMessage:()=>{},continueResponse:()=>{},regenerateResponse:()=>{},get history(){return e(k)},set history(be){s(k,be)},get messages(){return e(U)},set messages(be){s(U,be)},$$legacy:!0})}t(xe),d(ie,xe)};D(g,ie=>{e(U)===null?ie(x):ie(z,!1)})}t(S),t(ve),t(ue),$(ie=>v(A,ie),[()=>(r(),o(()=>r().t("Actions")))]),d(le,ue)},$$slots:{default:!0},$$legacy:!0}),At(),L()}var Tf=f('<button class=" self-center dark:hover:text-white transition" type="button"><!></button>'),Df=f('<div class="absolute right-5 top-2.5"><div class=" flex items-center self-center space-x-1.5"><!></div></div>'),Bf=f('<div class=" flex justify-center text-gray-800 dark:text-gray-200 cursor-grab relative group"><a class="grow flex items-center space-x-2.5 rounded-xl px-2.5 py-[7px] group-hover:bg-gray-100 dark:group-hover:bg-gray-900 transition" draggable="false"><div class="self-center shrink-0"><img class=" size-5 rounded-full -translate-x-[0.5px]" alt="logo"/></div> <div class="flex self-center translate-y-[0.5px]"><div class=" self-center text-sm font-primary line-clamp-1"> </div></div></a> <!></div>');function zf(M,c){St(c,!1);const r=()=>Ce(P,"$i18n",i),[i,n]=Pt(),P=Mt("i18n");let L=me(c,"model",8,null),ee=me(c,"shiftKey",8,!1),_=me(c,"onClick",8,()=>{}),W=me(c,"onUnpin",8,()=>{}),u=y(!1);It();var J=dt(),p=Ie(J);{var b=m=>{var q=Bf(),O=a(q),K=a(O),Z=a(K);t(K);var h=l(K,2),k=a(h),U=a(k,!0);t(k),t(h),t(O);var E=l(O,2);{var se=H=>{var ne=Df(),le=a(ne),X=a(le);{let ue=Ze(()=>(r(),o(()=>r().t("Unpin"))));Zt(X,{get content(){return e(ue)},className:"flex items-center",children:(w,oe)=>{var ve=Tf(),Q=a(ve);Zv(Q,{className:"size-3.5",strokeWidth:"2"}),t(ve),V("click",ve,()=>{W()()}),d(w,ve)},$$slots:{default:!0}})}t(le),t(ne),d(H,ne)};D(E,H=>{e(u)&&ee()&&W()&&H(se)})}t(q),$(()=>{Be(q,"data-id",(We(L()),o(()=>{var H;return(H=L())==null?void 0:H.id}))),Be(O,"href",`/?model=${We(L()),o(()=>{var H;return(H=L())==null?void 0:H.id})??""}`),Be(Z,"src",(We(Aa),We(L()),r(),o(()=>`${Aa}/models/model/profile/image?id=${L().id}&lang=${r().language}`))),v(U,(We(L()),o(()=>{var H;return((H=L())==null?void 0:H.name)??L().id})))}),V("click",O,function(...H){var ne;(ne=_())==null||ne.apply(this,H)}),V("mouseenter",q,H=>{s(u,!0)}),V("mouseleave",q,H=>{s(u,!1)}),d(m,q)};D(p,m=>{L()&&m(b)})}d(M,J),At(),n()}var Of=f('<div class="mt-0.5 pb-1.5" id="pinned-models-list"></div>');function Uf(M,c){St(c,!1);const r=()=>Ce(mr,"$mobile",L),i=()=>Ce(ta,"$settings",L),n=()=>Ce(Ma,"$config",L),P=()=>Ce(Ms,"$models",L),[L,ee]=Pt();let _=me(c,"selectedChatId",12,null),W=me(c,"shiftKey",8,!1),u=y([]);const J=()=>{const m=document.getElementById("pinned-models-list");m&&!r()&&new qv(m,{animation:150,onUpdate:async q=>{const O=q.item.dataset.id,K=q.newIndex,Z=i().pinnedModels,h=Z.indexOf(O);Z.splice(h,1),Z.splice(K,0,O),ta.set({...i(),pinnedModels:Z}),await gr(localStorage.token,{ui:i()})}})};let p;oa(async()=>{var m,q,O;if(s(u,((m=i())==null?void 0:m.pinnedModels)??[]),e(u).length===0&&((q=n())!=null&&q.default_pinned_models)){const K=(O=n())==null?void 0:O.default_pinned_models.split(",").filter(Z=>Z);s(u,K.filter(Z=>P().find(h=>h.id===Z))),ta.set({...i(),pinnedModels:e(u)}),await gr(localStorage.token,{ui:i()})}p=ta.subscribe(K=>{s(u,(K==null?void 0:K.pinnedModels)??[])}),await va(),J()}),vr(()=>{p&&p()}),It();var b=Of();Ht(b,5,()=>e(u),m=>m,(m,q)=>{const O=Ze(()=>(P(),e(q),o(()=>P().find(k=>k.id===e(q)))));var K=dt(),Z=Ie(K);{var h=k=>{{let U=Ze(()=>(i(),e(q),We(ta),We(gr),o(()=>{var E;return(((E=i())==null?void 0:E.pinnedModels)??[]).includes(e(q))?()=>{const se=i().pinnedModels.filter(H=>H!==e(q));ta.set({...i(),pinnedModels:se}),gr(localStorage.token,{ui:i()})}:null})));zf(k,{get model(){return e(O)},get shiftKey(){return W()},onClick:()=>{_(null),jr.set(""),r()&&na.set(!1)},get onUnpin(){return e(U)}})}};D(Z,k=>{e(O)&&k(h)})}d(m,K)}),t(b),d(M,b),At(),ee()}var Wf=ua('<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M10 3v4a1 1 0 0 1-1 1H5m4 8h6m-6-4h6m4-8v16a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V7.914a1 1 0 0 1 .293-.707l3.914-3.914A1 1 0 0 1 9.914 3H18a1 1 0 0 1 1 1Z"></path></svg>');function Wn(M,c){let r=me(c,"className",8,"w-4 h-4"),i=me(c,"strokeWidth",8,"1.5");var n=Wf();$(()=>{Ye(n,0,Ua(r())),Be(n,"stroke-width",i())}),d(M,n)}var Ff=f("<div><span> </span></div>");function Fn(M,c){St(c,!1);let r=me(c,"name",8),i=me(c,"className",8,""),n=y(!1),P=y(!1),L=y([]),ee=!0;oa(()=>{var p;s(n,/Mac/i.test(navigator.userAgent)),s(L,((p=Sa[r()])==null?void 0:p.keys)??[]),s(P,!0)});function _(p){const b=p.toLowerCase();return b==="mod"?e(n)?"":"Ctrl":b==="shift"?e(n)?"":"Shift":b.startsWith("key")?p.slice(-1):p}It();var W=dt(),u=Ie(W);{var J=p=>{var b=Ff(),m=a(b),q=a(m,!0);t(m),t(b),$(O=>{Ye(b,1,`hidden md:flex items-center self-center text-xs text-gray-400 dark:text-gray-600 ${i()??""}`),v(q,O)},[()=>(e(L),e(n),o(()=>e(L).map(_).join(e(n)?"":"+")))]),d(p,b)};D(u,p=>{e(P)&&ee&&p(J)})}d(M,W),At()}var Hf=f("<div></div>"),Rf=f('<button><div class=" self-center flex items-center justify-center size-9"><img class="sidebar-new-chat-icon size-6 rounded-full group-hover:hidden" alt=""/> <!></div></button>'),Vf=f('<a class=" cursor-pointer flex rounded-xl hover:bg-gray-100 dark:hover:bg-gray-850 transition group" href="/" draggable="false"><div class=" self-center flex items-center justify-center size-9"><!></div></a>'),Kf=f('<button class=" cursor-pointer flex rounded-xl hover:bg-gray-100 dark:hover:bg-gray-850 transition group" draggable="false"><div class=" self-center flex items-center justify-center size-9"><!></div></button>'),qf=f('<a class=" cursor-pointer flex rounded-xl hover:bg-gray-100 dark:hover:bg-gray-850 transition group" href="/notes" draggable="false"><div class=" self-center flex items-center justify-center size-9"><!></div></a>'),Zf=f("<div><!></div>"),Gf=f('<a class=" cursor-pointer flex rounded-xl hover:bg-gray-100 dark:hover:bg-gray-850 transition group" href="/workspace" draggable="false"><div class=" self-center flex items-center justify-center size-9"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4.5"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 16.875h3.375m0 0h3.375m-3.375 0V13.5m0 3.375v3.375M6 10.5h2.25a2.25 2.25 0 0 0 2.25-2.25V6a2.25 2.25 0 0 0-2.25-2.25H6A2.25 2.25 0 0 0 3.75 6v2.25A2.25 2.25 0 0 0 6 10.5Zm0 9.75h2.25A2.25 2.25 0 0 0 10.5 18v-2.25a2.25 2.25 0 0 0-2.25-2.25H6a2.25 2.25 0 0 0-2.25 2.25V18A2.25 2.25 0 0 0 6 20.25Zm9.75-9.75H18a2.25 2.25 0 0 0 2.25-2.25V6A2.25 2.25 0 0 0 18 3.75h-2.25A2.25 2.25 0 0 0 13.5 6v2.25a2.25 2.25 0 0 0 2.25 2.25Z"></path></svg></div></a>'),Yf=f("<div><!></div>"),Jf=f('<div class="absolute -bottom-0.5 -right-0.5"><span class="relative flex size-2.5"><span class="absolute inline-flex h-full w-full animate-ping rounded-full bg-green-400 opacity-75"></span> <span></span></span></div>'),Xf=f('<div class=" cursor-pointer flex rounded-xl hover:bg-gray-100 dark:hover:bg-gray-850 transition group"><div class="self-center relative"><img class=" size-7 object-cover rounded-full"/> <!></div></div>'),Qf=f('<div class=" pt-[7px] pb-2 px-2 flex flex-col justify-between text-black dark:text-white hover:bg-gray-50/30 dark:hover:bg-gray-950/30 h-full z-10 transition-all border-e-[0.5px] border-gray-50 dark:border-gray-850/30" id="sidebar"><button><div class="pb-1.5"><!></div> <div class="-mt-[0.5px]"><div><!></div> <div><!></div> <!> <!></div></button> <div><div><div class=" py-2 flex justify-center items-center"><!></div></div></div></div>'),eg=f('<button><div class=" self-center p-1.5"><!></div></button>'),tg=f('<div class="px-[0.4375rem] flex justify-center text-gray-800 dark:text-gray-200"><a id="sidebar-notes-button" class="grow flex items-center space-x-3 rounded-2xl px-2.5 py-2 hover:bg-gray-100 dark:hover:bg-gray-900 transition" href="/notes" draggable="false"><div class="self-center"><!></div> <div class="flex self-center translate-y-[0.5px]"><div class=" self-center text-sm font-primary"> </div></div></a></div>'),ag=f('<div class="px-[0.4375rem] flex justify-center text-gray-800 dark:text-gray-200"><a id="sidebar-workspace-button" class="grow flex items-center space-x-3 rounded-2xl px-2.5 py-2 hover:bg-gray-100 dark:hover:bg-gray-900 transition" href="/workspace" draggable="false"><div class="self-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-4.5"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 16.875h3.375m0 0h3.375m-3.375 0V13.5m0 3.375v3.375M6 10.5h2.25a2.25 2.25 0 0 0 2.25-2.25V6a2.25 2.25 0 0 0-2.25-2.25H6A2.25 2.25 0 0 0 3.75 6v2.25A2.25 2.25 0 0 0 6 10.5Zm0 9.75h2.25A2.25 2.25 0 0 0 10.5 18v-2.25a2.25 2.25 0 0 0-2.25-2.25H6a2.25 2.25 0 0 0-2.25 2.25V18A2.25 2.25 0 0 0 6 20.25Zm9.75-9.75H18a2.25 2.25 0 0 0 2.25-2.25V6A2.25 2.25 0 0 0 18 3.75h-2.25A2.25 2.25 0 0 0 13.5 6v2.25a2.25 2.25 0 0 0 2.25 2.25Z"></path></svg></div> <div class="flex self-center translate-y-[0.5px]"><div class=" self-center text-sm font-primary"> </div></div></a></div>'),rg=f('<hr class=" border-gray-100/40 dark:border-gray-800/10 my-1.5 w-full"/>'),sg=f("<!> <!>",1),og=f('<div class="ml-3 pl-1 mt-[1px] flex flex-col overflow-y-auto scrollbar-hidden border-s border-gray-100 dark:border-gray-900 text-gray-900 dark:text-gray-200"></div>'),lg=f('<div class="mb-1"><div class="flex flex-col space-y-1 rounded-xl"><!></div></div>'),ng=f("<div> </div>"),ig=f("<!> <!>",1),dg=f('<div class="w-full flex justify-center py-1 text-xs animate-pulse items-center gap-2"><!> <div class=" "> </div></div>'),vg=f("<!> <!>",1),cg=f('<div class="w-full flex justify-center py-1 text-xs animate-pulse items-center gap-2"><!> <div class=" "> </div></div>'),ug=f('<!> <div class=" flex-1 flex flex-col overflow-y-auto scrollbar-hidden"><div class="pt-1.5"><!></div></div>',1),fg=f('<div class="absolute -bottom-0.5 -right-0.5"><span class="relative flex size-2.5"><span class="absolute inline-flex h-full w-full animate-ping rounded-full bg-green-400 opacity-75"></span> <span></span></span></div>'),gg=f('<div class=" flex items-center rounded-2xl py-2 px-1.5 w-full hover:bg-gray-100/50 dark:hover:bg-gray-900/50 transition"><div class=" self-center mr-3 relative"><img class=" size-7 object-cover rounded-full"/> <!></div> <div class=" self-center font-medium"> </div></div>'),pg=f('<div class="relative flex items-center justify-center group border-l border-gray-50 dark:border-gray-850/30 hover:border-gray-200 dark:hover:border-gray-800 transition z-20" id="sidebar-resizer" role="separator"><div class=" absolute -left-1.5 -right-1.5 -top-0 -bottom-0 z-20 cursor-col-resize bg-transparent"></div></div>'),mg=f('<div id="sidebar"><div><div class="sidebar px-[0.5625rem] pt-2 pb-1.5 flex justify-between space-x-1 text-gray-600 dark:text-gray-400 sticky top-0 z-10 -mb-3"><a class="flex items-center rounded-xl size-8.5 h-full justify-center hover:bg-gray-100/50 dark:hover:bg-gray-850/50 transition no-drag-region" href="/" draggable="false"><img crossorigin="anonymous" class="sidebar-new-chat-icon size-6 rounded-full" alt=""/></a> <a href="/" class="flex flex-1 px-1.5"><div id="sidebar-webui-name" class=" self-center font-medium text-gray-850 dark:text-white font-primary"> </div></a> <!> <div></div></div> <div class="relative flex flex-col flex-1 overflow-y-auto scrollbar-hidden pt-3 pb-3"><div class="pb-1.5"><div class="px-[0.4375rem] flex justify-center text-gray-800 dark:text-gray-200"><a id="sidebar-new-chat-button" class="group grow flex items-center space-x-3 rounded-2xl px-2.5 py-2 hover:bg-gray-100 dark:hover:bg-gray-900 transition outline-none" href="/" draggable="false"><div class="self-center"><!></div> <div class="flex flex-1 self-center translate-y-[0.5px]"><div class=" self-center text-sm font-primary"> </div></div> <!></a></div> <div class="px-[0.4375rem] flex justify-center text-gray-800 dark:text-gray-200"><button id="sidebar-search-button" class="group grow flex items-center space-x-3 rounded-2xl px-2.5 py-2 hover:bg-gray-100 dark:hover:bg-gray-900 transition outline-none" draggable="false"><div class="self-center"><!></div> <div class="flex flex-1 self-center translate-y-[0.5px]"><div class=" self-center text-sm font-primary"> </div></div> <!></button></div> <!> <!></div> <!> <!> <!> <!></div> <div class="px-1.5 pt-1.5 pb-2 sticky bottom-0 z-10 -mt-3 sidebar"><div class=" sidebar-bg-gradient-to-t bg-linear-to-t from-gray-50 dark:from-gray-950 to-transparent from-50% pointer-events-none absolute inset-0 -z-10 -mt-6"></div> <div class="flex flex-col font-primary"><!></div></div></div></div> <!>',1),hg=f('<!> <!> <!> <!> <!> <button id="sidebar-new-chat-button" class="hidden"></button> <!>  <!>',1);function _g(M,c){St(c,!1);const r=()=>Ce(Va,"$selectedFolder",U),i=()=>Ce(Ma,"$config",U),n=()=>Ce(se,"$i18n",U),P=()=>Ce(Ba,"$currentChatPage",U),L=()=>Ce(Ka,"$chats",U),ee=()=>Ce(mr,"$mobile",U),_=()=>Ce(ys,"$sidebarWidth",U),W=()=>Ce(na,"$showSidebar",U),u=()=>Ce(za,"$user",U),J=()=>Ce(ws,"$showArchivedChats",U),p=()=>Ce(Rd,"$socket",U),b=()=>Ce(Vd,"$isApp",U),m=()=>Ce(pr,"$showSearch",U),q=()=>Ce(ll,"$WEBUI_NAME",U),O=()=>Ce(Ms,"$models",U),K=()=>Ce(ta,"$settings",U),Z=()=>Ce(Ir,"$channels",U),h=()=>Ce(dr,"$pinnedChats",U),k=()=>Ce(ir,"$scrollPaginationEnabled",U),[U,E]=Pt(),se=Mt("i18n");let H=y(0),ne=y(),le=y(!1),X=y(null),ue=y(!1),w=y(!1),oe=y(!1),ve=y(!1),Q=[],te=y(!1),A=y(!1),I=y(!1),C=y({}),j=y({});const B=async()=>{var _e,we;if(((we=(_e=i())==null?void 0:_e.features)==null?void 0:we.enable_folders)===!1)return;const T=await dv(localStorage.token).catch(Ee=>[]);ol.set(T.sort((Ee,Qe)=>Qe.updated_at-Ee.updated_at)),s(C,{});for(const Ee of T)da(C,e(C)[Ee.id]={...e(C)[Ee.id]||{},...Ee});for(const Ee of T)Ee.parent_id&&(e(C)[Ee.parent_id]||da(C,e(C)[Ee.parent_id]={}),da(C,e(C)[Ee.parent_id].childrenIds=e(C)[Ee.parent_id].childrenIds?[...e(C)[Ee.parent_id].childrenIds,Ee.id]:[Ee.id]),e(C)[Ee.parent_id].childrenIds.sort((Qe,Ke)=>e(C)[Ke].updated_at-e(C)[Qe].updated_at))},S=async({name:T,data:_e})=>{if(T=T==null?void 0:T.trim(),!T){Ve.error(n().t("Folder name cannot be empty."));return}const we=Object.values(e(C)).filter(Ke=>Ke.parent_id===null);if(we.find(Ke=>Ke.name.toLowerCase()===T.toLowerCase())){let Ke=1;for(;we.find(vt=>vt.name.toLowerCase()===`${T} ${Ke}`.toLowerCase());)Ke++;T=`${T} ${Ke}`}const Ee=Od();s(C,{...e(C),tempId:{id:Ee,name:T,created_at:Date.now(),updated_at:Date.now()}}),await vv(localStorage.token,{name:T,data:_e}).catch(Ke=>(Ve.error(`${Ke}`),null))&&(await B(),s(I,!0))},g=async()=>{const T=await Dv(localStorage.token).catch(_e=>null);T&&await Ir.set(T.sort((_e,we)=>["",null,"group","dm"].indexOf(_e.type)-["",null,"group","dm"].indexOf(we.type)))},x=async()=>{Ba.set(1),s(oe,!1),ir.set(!1),B(),await Promise.all([await(async()=>{const T=await nl(localStorage.token);Is.set(T)})(),await(async()=>{const T=await Er(localStorage.token);dr.set(T)})(),await(async()=>{const T=await Fa(localStorage.token,P());await Ka.set(T)})()]),ir.set(!0)},z=async()=>{s(w,!0),Ba.set(P()+1);let T=[];T=await Fa(localStorage.token,P()),s(oe,T.length===0),await Ka.set([...L()?L():[],...T]),s(w,!1)},ie=async(T,_e=!1,we=null)=>{for(const Ee of T)Ee.chat&&await Pr(localStorage.token,[{chat:Ee.chat,meta:(Ee==null?void 0:Ee.meta)??{},pinned:_e,folder_id:we,created_at:(Ee==null?void 0:Ee.created_at)??null,updated_at:(Ee==null?void 0:Ee.updated_at)??null}]);x()},xe=async T=>{for(const _e of T){const we=new FileReader;we.onload=async Ee=>{const Qe=Ee.target.result;try{const Ke=JSON.parse(Qe);ie(Ke)}catch{Ve.error(n().t("Invalid file format."))}},we.readAsText(_e)}},he=async(T,_e,we)=>{(T==="delete"||T==="add")&&x()},pe=T=>{var _e,we;T.preventDefault(),(we=(_e=T.dataTransfer)==null?void 0:_e.types)!=null&&we.includes("Files")},be=()=>{},Ne=async T=>{var _e,we;if(T.preventDefault(),(_e=T.dataTransfer)!=null&&_e.files){const Ee=Array.from((we=T.dataTransfer)==null?void 0:we.files);Ee&&Ee.length>0&&xe(Ee)}};let fe,ae;function ge(){const T=window.innerWidth,_e=Math.abs(ae.screenX-fe.screenX);fe.clientX<40&&_e>=T/8&&(ae.screenX<fe.screenX&&na.set(!1),ae.screenX>fe.screenX&&na.set(!0))}const ke=T=>{fe=T.changedTouches[0],fe.clientX},R=T=>{ae=T.changedTouches[0],ge()},Oe=T=>{T.key==="Shift"&&s(le,!0)},He=T=>{T.key==="Shift"&&s(le,!1)},Ue=()=>{},de=()=>{s(le,!1),s(X,null)},N=220,Se=480;let $e=y(!1),Te=0,Le=0;const Ae=T=>{ee()||(s($e,!0),Le=T.clientX,Te=_()??260,document.body.style.userSelect="none")},re=()=>{e($e)&&(s($e,!1),document.body.style.userSelect="",localStorage.setItem("sidebarWidth",String(_())))},ye=T=>{const _e=T-Le,we=Math.min(Se,Math.max(N,Te+_e));ys.set(we),document.documentElement.style.setProperty("--sidebar-width",`${we}px`)};let Me=[];oa(async()=>{try{const _e=Number(localStorage.getItem("sidebarWidth"));!Number.isNaN(_e)&&_e>=N&&_e<=Se&&ys.set(_e)}catch{}document.documentElement.style.setProperty("--sidebar-width",`${_()}px`),ys.subscribe(_e=>{document.documentElement.style.setProperty("--sidebar-width",`${_e}px`)}),await na.set(ee()?!1:localStorage.sidebar==="true"),Me=[mr.subscribe(_e=>{if(W()&&_e&&na.set(!1),W()&&!_e){const we=document.getElementsByTagName("nav")[0];we&&(we.style["-webkit-app-region"]="drag")}}),na.subscribe(async _e=>{var Ee,Qe,Ke,vt,ft,at;localStorage.sidebar=_e;const we=document.getElementsByTagName("nav")[0];we&&(ee()&&_e?we.style["-webkit-app-region"]="no-drag":we.style["-webkit-app-region"]="drag"),_e&&((Qe=(Ee=i())==null?void 0:Ee.features)!=null&&Qe.enable_channels&&(((Ke=u())==null?void 0:Ke.role)==="admin"||(((at=(ft=(vt=u())==null?void 0:vt.permissions)==null?void 0:ft.features)==null?void 0:at.channels)??!0))&&await g(),await x())}),ta.subscribe(_e=>{Q!=(_e==null?void 0:_e.pinnedModels)&&(Q=(_e==null?void 0:_e.pinnedModels)??[],s(te,Q.length>0))})],window.addEventListener("keydown",Oe),window.addEventListener("keyup",He),window.addEventListener("touchstart",ke),window.addEventListener("touchend",R),window.addEventListener("focus",Ue),window.addEventListener("blur",de);const T=document.getElementById("sidebar");T==null||T.addEventListener("dragover",pe),T==null||T.addEventListener("drop",Ne),T==null||T.addEventListener("dragleave",be)}),vr(()=>{Me&&Me.length>0&&Me.forEach(_e=>{_e&&_e()}),window.removeEventListener("keydown",Oe),window.removeEventListener("keyup",He),window.removeEventListener("touchstart",ke),window.removeEventListener("touchend",R),window.removeEventListener("focus",Ue),window.removeEventListener("blur",de);const T=document.getElementById("sidebar");T==null||T.removeEventListener("dragover",pe),T==null||T.removeEventListener("drop",Ne),T==null||T.removeEventListener("dragleave",be)});const ze=async()=>{var T,_e,we,Ee;s(X,null),Va.set(null),((T=u())==null?void 0:T.role)!=="admin"&&((Ee=(we=(_e=u())==null?void 0:_e.permissions)==null?void 0:we.chat)!=null&&Ee.temporary_enforced)?await nr.set(!0):await nr.set(!1),setTimeout(()=>{ee()&&na.set(!1)},0)},Je=async()=>{s(X,null),jr.set(""),ee()&&na.set(!1),await va()},Ge=/Windows/i.test(navigator.userAgent);Kt(()=>r(),()=>{r()&&B()}),ca(),It();var gt=hg();V("mousemove",$n,T=>{e($e)&&ye(T.clientX)}),V("mouseup",$n,()=>{re()});var $t=Ie(gt);ci($t,{onUpdate:async()=>{await x()},get show(){return Ss(),J()},set show(T){Cs(ws,T)},$$legacy:!0});var Xe=l($t,2);gi(Xe,{onSubmit:async({type:T,name:_e,is_private:we,access_control:Ee,group_ids:Qe,user_ids:Ke})=>{var ft;if(_e=_e==null?void 0:_e.trim(),T==="dm"){if(!Ke||Ke.length===0){Ve.error(n().t("Please select at least one user for Direct Message channel."));return}}else if(!_e){Ve.error(n().t("Channel name cannot be empty."));return}const vt=await Tv(localStorage.token,{type:T,name:_e,is_private:we,access_control:Ee,group_ids:Qe,user_ids:Ke}).catch(at=>(Ve.error(`${at}`),null));vt&&(p().emit("join-channels",{auth:{token:(ft=u())==null?void 0:ft.token}}),await g(),s(ue,!1),s(A,!0),ga(`/channels/${vt.id}`))},get show(){return e(ue)},set show(T){s(ue,T)},$$legacy:!0});var F=l(Xe,2);ti(F,{onSubmit:async T=>{await S(T),s(ve,!1)},get show(){return e(ve)},set show(T){s(ve,T)},$$legacy:!0});var Y=l(F,2);{var G=T=>{var _e=Hf();$(()=>Ye(_e,1,` ${b()?" ml-[4.5rem] md:ml-0":""} fixed md:hidden z-40 top-0 right-0 left-0 bottom-0 bg-black/60 w-full min-h-screen h-screen flex justify-center overflow-hidden overscroll-contain`)),V("mousedown",_e,()=>{na.set(!W())}),d(T,_e)};D(Y,T=>{W()&&T(G)})}var Pe=l(Y,2);Nf(Pe,{onClose:()=>{ee()&&na.set(!1)},get show(){return Ss(),m()},set show(T){Cs(pr,T)},$$legacy:!0});var Re=l(Pe,2),je=l(Re,2);{var De=T=>{var _e=Qf(),we=a(_e),Ee=a(we),Qe=a(Ee);{let lt=Ze(()=>(W(),n(),o(()=>W()?n().t("Close Sidebar"):n().t("Open Sidebar"))));Zt(Qe,{get content(){return e(lt)},placement:"right",children:(Ct,Qt)=>{var ut=Rf(),Et=a(ut),Nt=a(Et),_t=l(Nt,2);Tn(_t,{className:"size-5 hidden group-hover:flex"}),t(Et),t(ut),$(Gt=>{Ye(ut,1,`flex rounded-xl hover:bg-gray-100 dark:hover:bg-gray-850 transition group ${Ge?"cursor-pointer":"cursor-[e-resize]"}`),Be(ut,"aria-label",Gt),Be(Nt,"src",`${As}/static/favicon.png`)},[()=>(W(),n(),o(()=>W()?n().t("Close Sidebar"):n().t("Open Sidebar")))]),d(Ct,ut)},$$slots:{default:!0}})}t(Ee);var Ke=l(Ee,2),vt=a(Ke),ft=a(vt);{let lt=Ze(()=>(n(),o(()=>n().t("New Chat"))));Zt(ft,{get content(){return e(lt)},placement:"right",children:(Ct,Qt)=>{var ut=Vf(),Et=a(ut),Nt=a(Et);Qo(Nt,{className:"size-4.5"}),t(Et),t(ut),$(_t=>Be(ut,"aria-label",_t),[()=>(n(),o(()=>n().t("New Chat")))]),V("click",ut,async _t=>{_t.stopImmediatePropagation(),_t.preventDefault(),ga("/"),ze()}),d(Ct,ut)},$$slots:{default:!0}})}t(vt);var at=l(vt,2),st=a(at);{let lt=Ze(()=>(n(),o(()=>n().t("Search"))));Zt(st,{get content(){return e(lt)},placement:"right",children:(Ct,Qt)=>{var ut=Kf(),Et=a(ut),Nt=a(Et);Ls(Nt,{className:"size-4.5"}),t(Et),t(ut),$(_t=>Be(ut,"aria-label",_t),[()=>(n(),o(()=>n().t("Search")))]),V("click",ut,_t=>{_t.stopImmediatePropagation(),_t.preventDefault(),pr.set(!0)}),d(Ct,ut)},$$slots:{default:!0}})}t(at);var mt=l(at,2);{var ct=lt=>{var Ct=Zf(),Qt=a(Ct);{let ut=Ze(()=>(n(),o(()=>n().t("Notes"))));Zt(Qt,{get content(){return e(ut)},placement:"right",children:(Et,Nt)=>{var _t=qf(),Gt=a(_t),_a=a(Gt);Wn(_a,{className:"size-4.5"}),t(Gt),t(_t),$(Ia=>Be(_t,"aria-label",Ia),[()=>(n(),o(()=>n().t("Notes")))]),V("click",_t,async Ia=>{Ia.stopImmediatePropagation(),Ia.preventDefault(),ga("/notes"),Je()}),d(Et,_t)},$$slots:{default:!0}})}t(Ct),d(lt,Ct)};D(mt,lt=>{i(),u(),o(()=>{var Ct,Qt,ut,Et,Nt,_t;return(((Qt=(Ct=i())==null?void 0:Ct.features)==null?void 0:Qt.enable_notes)??!1)&&(((ut=u())==null?void 0:ut.role)==="admin"||(((_t=(Nt=(Et=u())==null?void 0:Et.permissions)==null?void 0:Nt.features)==null?void 0:_t.notes)??!0))})&&lt(ct)})}var ot=l(mt,2);{var kt=lt=>{var Ct=Yf(),Qt=a(Ct);{let ut=Ze(()=>(n(),o(()=>n().t("Workspace"))));Zt(Qt,{get content(){return e(ut)},placement:"right",children:(Et,Nt)=>{var _t=Gf();$(Gt=>Be(_t,"aria-label",Gt),[()=>(n(),o(()=>n().t("Workspace")))]),V("click",_t,async Gt=>{Gt.stopImmediatePropagation(),Gt.preventDefault(),ga("/workspace"),Je()}),d(Et,_t)},$$slots:{default:!0}})}t(Ct),d(lt,Ct)};D(ot,lt=>{u(),o(()=>{var Ct,Qt,ut,Et,Nt,_t,Gt,_a,Ia,Ea,pa,fa,Za;return((Ct=u())==null?void 0:Ct.role)==="admin"||((Et=(ut=(Qt=u())==null?void 0:Qt.permissions)==null?void 0:ut.workspace)==null?void 0:Et.models)||((Gt=(_t=(Nt=u())==null?void 0:Nt.permissions)==null?void 0:_t.workspace)==null?void 0:Gt.knowledge)||((Ea=(Ia=(_a=u())==null?void 0:_a.permissions)==null?void 0:Ia.workspace)==null?void 0:Ea.prompts)||((Za=(fa=(pa=u())==null?void 0:pa.permissions)==null?void 0:fa.workspace)==null?void 0:Za.tools)})&&lt(kt)})}t(Ke),t(we);var Lt=l(we,2),Tt=a(Lt),jt=a(Tt),Dt=a(jt);{var Ft=lt=>{{let Ct=Ze(()=>(u(),o(()=>{var ut;return(ut=u())==null?void 0:ut.role}))),Qt=Ze(()=>(i(),o(()=>{var ut,Et;return((Et=(ut=i())==null?void 0:ut.features)==null?void 0:Et.enable_user_status)??!0})));En(lt,{get role(){return e(Ct)},get profile(){return e(Qt)},showActiveUsers:!1,$$events:{show:ut=>{ut.detail==="archived-chat"&&ws.set(!0)}},children:(ut,Et)=>{var Nt=Xf(),_t=a(Nt),Gt=a(_t),_a=l(Gt,2);{var Ia=Ea=>{var pa=Jf(),fa=a(pa),Za=l(a(fa),2);Ye(Za,1,"relative inline-flex size-2.5 rounded-full bg-green-500 border-2 border-white dark:border-gray-900"),t(fa),t(pa),d(Ea,pa)};D(_a,Ea=>{i(),o(()=>{var pa,fa;return(fa=(pa=i())==null?void 0:pa.features)==null?void 0:fa.enable_user_status})&&Ea(Ia)})}t(_t),t(Nt),$((Ea,pa)=>{Be(Gt,"src",(We(Aa),u(),o(()=>{var fa;return`${Aa}/users/${(fa=u())==null?void 0:fa.id}/profile/image`}))),Be(Gt,"alt",Ea),Be(Gt,"aria-label",pa)},[()=>(n(),o(()=>n().t("Open User Profile Menu"))),()=>(n(),o(()=>n().t("Open User Profile Menu")))]),d(ut,Nt)},$$slots:{default:!0}})}};D(Dt,lt=>{u()!==void 0&&u()!==null&&lt(Ft)})}t(jt),t(Tt),t(Lt),t(_e),$(()=>Ye(we,1,`flex flex-col flex-1 ${Ge?"cursor-pointer":"cursor-[e-resize]"}`)),V("click",we,async()=>{na.set(!W())}),d(T,_e)};D(je,T=>{!ee()&&!W()&&T(De)})}var Fe=l(je,2);{var et=T=>{var _e=mg(),we=Ie(_e),Ee=a(we),Qe=a(Ee),Ke=a(Qe),vt=a(Ke);t(Ke);var ft=l(Ke,2),at=a(ft),st=a(at,!0);t(at),t(ft);var mt=l(ft,2);{let bt=Ze(()=>(W(),n(),o(()=>W()?n().t("Close Sidebar"):n().t("Open Sidebar"))));Zt(mt,{get content(){return e(bt)},placement:"bottom",children:(pt,ht)=>{var tt=eg(),rt=a(tt),yt=a(rt);Tn(yt,{}),t(rt),t(tt),$(nt=>{Ye(tt,1,`flex rounded-xl size-8.5 justify-center items-center hover:bg-gray-100/50 dark:hover:bg-gray-850/50 transition ${Ge?"cursor-pointer":"cursor-[w-resize]"}`),Be(tt,"aria-label",nt)},[()=>(W(),n(),o(()=>W()?n().t("Close Sidebar"):n().t("Open Sidebar")))]),V("click",tt,()=>{na.set(!W())}),d(pt,tt)},$$slots:{default:!0}})}var ct=l(mt,2);t(Qe);var ot=l(Qe,2),kt=a(ot),Lt=a(kt),Tt=a(Lt),jt=a(Tt),Dt=a(jt);Qo(Dt,{className:" size-4.5",strokeWidth:"2"}),t(jt);var Ft=l(jt,2),lt=a(Ft),Ct=a(lt,!0);t(lt),t(Ft);var Qt=l(Ft,2);Fn(Qt,{name:"newChat",className:" group-hover:visible invisible"}),t(Tt),t(Lt);var ut=l(Lt,2),Et=a(ut),Nt=a(Et),_t=a(Nt);Ls(_t,{strokeWidth:"2",className:"size-4.5"}),t(Nt);var Gt=l(Nt,2),_a=a(Gt),Ia=a(_a,!0);t(_a),t(Gt);var Ea=l(Gt,2);Fn(Ea,{name:"search",className:" group-hover:visible invisible"}),t(Et),t(ut);var pa=l(ut,2);{var fa=bt=>{var pt=tg(),ht=a(pt),tt=a(ht),rt=a(tt);Wn(rt,{className:"size-4.5",strokeWidth:"2"}),t(tt);var yt=l(tt,2),nt=a(yt),Bt=a(nt,!0);t(nt),t(yt),t(ht),t(pt),$((la,ka)=>{Be(ht,"aria-label",la),v(Bt,ka)},[()=>(n(),o(()=>n().t("Notes"))),()=>(n(),o(()=>n().t("Notes")))]),V("click",ht,Je),d(bt,pt)};D(pa,bt=>{i(),u(),o(()=>{var pt,ht,tt,rt,yt,nt;return(((ht=(pt=i())==null?void 0:pt.features)==null?void 0:ht.enable_notes)??!1)&&(((tt=u())==null?void 0:tt.role)==="admin"||(((nt=(yt=(rt=u())==null?void 0:rt.permissions)==null?void 0:yt.features)==null?void 0:nt.notes)??!0))})&&bt(fa)})}var Za=l(pa,2);{var hr=bt=>{var pt=ag(),ht=a(pt),tt=l(a(ht),2),rt=a(tt),yt=a(rt,!0);t(rt),t(tt),t(ht),t(pt),$((nt,Bt)=>{Be(ht,"aria-label",nt),v(yt,Bt)},[()=>(n(),o(()=>n().t("Workspace"))),()=>(n(),o(()=>n().t("Workspace")))]),V("click",ht,Je),d(bt,pt)};D(Za,bt=>{u(),o(()=>{var pt,ht,tt,rt,yt,nt,Bt,la,ka,xa,ra,Yt,Rt;return((pt=u())==null?void 0:pt.role)==="admin"||((rt=(tt=(ht=u())==null?void 0:ht.permissions)==null?void 0:tt.workspace)==null?void 0:rt.models)||((Bt=(nt=(yt=u())==null?void 0:yt.permissions)==null?void 0:nt.workspace)==null?void 0:Bt.knowledge)||((xa=(ka=(la=u())==null?void 0:la.permissions)==null?void 0:ka.workspace)==null?void 0:xa.prompts)||((Rt=(Yt=(ra=u())==null?void 0:ra.permissions)==null?void 0:Yt.workspace)==null?void 0:Rt.tools)})&&bt(hr)})}t(kt);var Tr=l(kt,2);{var Dr=bt=>{{let pt=Ze(()=>(n(),o(()=>n().t("Models"))));Sr(bt,{id:"sidebar-models",className:"px-2 mt-0.5",get name(){return e(pt)},chevron:!1,dragAndDrop:!1,get open(){return e(te)},set open(ht){s(te,ht)},children:(ht,tt)=>{Uf(ht,{get shiftKey(){return e(le)},get selectedChatId(){return e(X)},set selectedChatId(rt){s(X,rt)},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})}};D(Tr,bt=>{O(),K(),i(),o(()=>{var pt,ht;return(O()??[]).length>0&&((((pt=K())==null?void 0:pt.pinnedModels)??[]).length>0||((ht=i())==null?void 0:ht.default_pinned_models))})&&bt(Dr)})}var Br=l(Tr,2);{var _r=bt=>{{let pt=Ze(()=>(n(),o(()=>n().t("Channels")))),ht=Ze(()=>(u(),We(va),e(ue),o(()=>{var rt,yt,nt,Bt;return((rt=u())==null?void 0:rt.role)==="admin"||(((Bt=(nt=(yt=u())==null?void 0:yt.permissions)==null?void 0:nt.features)==null?void 0:Bt.channels)??!0)?async()=>{await va(),setTimeout(()=>{s(ue,!0)},0)}:null}))),tt=Ze(()=>(n(),o(()=>n().t("Create Channel"))));Sr(bt,{id:"sidebar-channels",className:"px-2 mt-0.5",get name(){return e(pt)},chevron:!1,dragAndDrop:!1,get onAdd(){return e(ht)},get onAddLabel(){return e(tt)},get open(){return e(A)},set open(rt){s(A,rt)},children:(rt,yt)=>{var nt=dt(),Bt=Ie(nt);Ht(Bt,3,Z,la=>`${la==null?void 0:la.id}`,(la,ka,xa)=>{var ra=sg(),Yt=Ie(ra);pf(Yt,{get channel(){return e(ka)},onUpdate:async()=>{await g()}});var Rt=l(Yt,2);{var ea=ba=>{var Jt=rg();d(ba,Jt)};D(Rt,ba=>{We(e(xa)),Z(),e(ka),o(()=>{var Jt;return e(xa)<Z().length-1&&e(ka).type!==((Jt=Z()[e(xa)+1])==null?void 0:Jt.type)})&&ba(ea)})}d(la,ra)}),d(rt,nt)},$$slots:{default:!0},$$legacy:!0})}};D(Br,bt=>{i(),u(),o(()=>{var pt,ht,tt,rt,yt,nt;return((ht=(pt=i())==null?void 0:pt.features)==null?void 0:ht.enable_channels)&&(((tt=u())==null?void 0:tt.role)==="admin"||(((nt=(yt=(rt=u())==null?void 0:rt.permissions)==null?void 0:yt.features)==null?void 0:nt.channels)??!0))})&&bt(_r)})}var xr=l(Br,2);{var br=bt=>{{let pt=Ze(()=>(n(),o(()=>n().t("Folders")))),ht=Ze(()=>(n(),o(()=>n().t("New Folder"))));Sr(bt,{id:"sidebar-folders",className:"px-2 mt-0.5",get name(){return e(pt)},chevron:!1,onAdd:()=>{s(ve,!0)},get onAddLabel(){return e(ht)},get open(){return e(I)},set open(tt){s(I,tt)},$$events:{drop:async tt=>{const{type:rt,id:yt,item:nt}=tt.detail;if(rt==="folder"){if(e(C)[yt].parent_id===null)return;await Go(localStorage.token,yt,null).catch(la=>(Ve.error(`${la}`),null))&&await B()}}},children:(tt,rt)=>{Iu(tt,{get folders(){return e(C)},get shiftKey(){return e(le)},onDelete:yt=>{Va.set(null),x()},get folderRegistry(){return e(j)},set folderRegistry(yt){s(j,yt)},$$events:{update:()=>{x()},import:yt=>{const{folderId:nt,items:Bt}=yt.detail;ie(Bt,!1,nt)},change:async()=>{x()}},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})}};D(xr,bt=>{i(),u(),o(()=>{var pt,ht,tt,rt,yt,nt;return((ht=(pt=i())==null?void 0:pt.features)==null?void 0:ht.enable_folders)&&(((tt=u())==null?void 0:tt.role)==="admin"||(((nt=(yt=(rt=u())==null?void 0:rt.permissions)==null?void 0:yt.features)==null?void 0:nt.folders)??!0))})&&bt(br)})}var js=l(xr,2);{let bt=Ze(()=>(n(),o(()=>n().t("Chats"))));Sr(js,{id:"sidebar-chats",className:"px-2 mt-0.5",get name(){return e(bt)},chevron:!1,$$events:{change:async pt=>{Va.set(null)},import:pt=>{ie(pt.detail)},drop:async pt=>{var yt;const{type:ht,id:tt,item:rt}=pt.detail;if(ht==="chat"){let nt=await Ja(localStorage.token,tt).catch(Bt=>null);!nt&&rt&&(nt=await Pr(localStorage.token,[{chat:rt.chat,meta:(rt==null?void 0:rt.meta)??{},pinned:!1,folder_id:null,created_at:(rt==null?void 0:rt.created_at)??null,updated_at:(rt==null?void 0:rt.updated_at)??null}])),nt&&(nt.folder_id&&(await Es(localStorage.token,nt.id,null).catch(Bt=>(Ve.error(`${Bt}`),null)),(yt=e(j)[nt.folder_id])==null||yt.setFolderItems()),nt.pinned&&await Zo(localStorage.token,nt.id),x())}else if(ht==="folder"){if(e(C)[tt].parent_id===null)return;await Go(localStorage.token,tt,null).catch(Bt=>(Ve.error(`${Bt}`),null))&&await B()}}},children:(pt,ht)=>{var tt=ug(),rt=Ie(tt);{var yt=ra=>{var Yt=lg(),Rt=a(Yt),ea=a(Rt);{let ba=Ze(()=>(n(),o(()=>n().t("Pinned"))));Sr(ea,{id:"sidebar-pinned-chats",buttonClassName:" text-gray-500",get name(){return e(ba)},$$events:{import:Jt=>{ie(Jt.detail,!0)},drop:async Jt=>{const{type:Xt,id:ya,item:Vt}=Jt.detail;if(Xt==="chat"){let Wt=await Ja(localStorage.token,ya).catch(ja=>null);!Wt&&Vt&&(Wt=await Pr(localStorage.token,[{chat:Vt.chat,meta:(Vt==null?void 0:Vt.meta)??{},pinned:!1,folder_id:null,created_at:(Vt==null?void 0:Vt.created_at)??null,updated_at:(Vt==null?void 0:Vt.updated_at)??null}])),Wt&&(Wt.folder_id&&await Es(localStorage.token,Wt.id,null).catch(ja=>(Ve.error(`${ja}`),null)),Wt.pinned||await Zo(localStorage.token,Wt.id),x())}}},children:(Jt,Xt)=>{var ya=og();Ht(ya,7,h,(Vt,Wt)=>`pinned-chat-${(Vt==null?void 0:Vt.id)??Wt}`,(Vt,Wt)=>{{let ja=Ze(()=>(e(X),e(Wt),o(()=>e(X)===e(Wt).id)));al(Vt,{className:"",get id(){return e(Wt),o(()=>e(Wt).id)},get title(){return e(Wt),o(()=>e(Wt).title)},get shiftKey(){return e(le)},get selected(){return e(ja)},$$events:{select:()=>{s(X,e(Wt).id)},unselect:()=>{s(X,null)},change:async()=>{x()},tag:Ga=>{const{type:Wa,name:Na}=Ga.detail;he(Wa,Na,e(Wt).id)}}})}}),t(ya),d(Jt,ya)},$$slots:{default:!0}})}t(Rt),t(Yt),d(ra,Yt)};D(rt,ra=>{h(),o(()=>h().length>0)&&ra(yt)})}var nt=l(rt,2),Bt=a(nt),la=a(Bt);{var ka=ra=>{var Yt=vg(),Rt=Ie(Yt);Ht(Rt,3,L,(Jt,Xt)=>`chat-${(Jt==null?void 0:Jt.id)??Xt}`,(Jt,Xt,ya)=>{var Vt=ig(),Wt=Ie(Vt);{var ja=Wa=>{var Na=ng(),fr=a(Na,!0);t(Na),$(kr=>{Ye(Na,1,`w-full pl-2.5 text-xs text-gray-500 dark:text-gray-500 font-medium ${e(ya)===0?"":"pt-5"} pb-1.5`),v(fr,kr)},[()=>(n(),e(Xt),o(()=>n().t(e(Xt).time_range)))]),d(Wa,Na)};D(Wt,Wa=>{We(e(ya)),e(Xt),L(),o(()=>e(ya)===0||e(ya)>0&&e(Xt).time_range!==L()[e(ya)-1].time_range)&&Wa(ja)})}var Ga=l(Wt,2);{let Wa=Ze(()=>(e(X),e(Xt),o(()=>e(X)===e(Xt).id)));al(Ga,{className:"",get id(){return e(Xt),o(()=>e(Xt).id)},get title(){return e(Xt),o(()=>e(Xt).title)},get shiftKey(){return e(le)},get selected(){return e(Wa)},$$events:{select:()=>{s(X,e(Xt).id)},unselect:()=>{s(X,null)},change:async()=>{x()},tag:Na=>{const{type:fr,name:kr}=Na.detail;he(fr,kr,e(Xt).id)}}})}d(Jt,Vt)});var ea=l(Rt,2);{var ba=Jt=>{ai(Jt,{$$events:{visible:Xt=>{e(w)||z()}},children:(Xt,ya)=>{var Vt=dg(),Wt=a(Vt);$a(Wt,{className:" size-4"});var ja=l(Wt,2),Ga=a(ja,!0);t(ja),t(Vt),$(Wa=>v(Ga,Wa),[()=>(n(),o(()=>n().t("Loading...")))]),d(Xt,Vt)},$$slots:{default:!0}})};D(ea,Jt=>{k()&&!e(oe)&&Jt(ba)})}d(ra,Yt)},xa=ra=>{var Yt=cg(),Rt=a(Yt);$a(Rt,{className:" size-4"});var ea=l(Rt,2),ba=a(ea,!0);t(ea),t(Yt),$(Jt=>v(ba,Jt),[()=>(n(),o(()=>n().t("Loading...")))]),d(ra,Yt)};D(la,ra=>{L()?ra(ka):ra(xa,!1)})}t(Bt),t(nt),d(pt,tt)},$$slots:{default:!0}})}t(ot);var yr=l(ot,2),zr=l(a(yr),2),wr=a(zr);{var Or=bt=>{{let pt=Ze(()=>(u(),o(()=>{var tt;return(tt=u())==null?void 0:tt.role}))),ht=Ze(()=>(i(),o(()=>{var tt,rt;return((rt=(tt=i())==null?void 0:tt.features)==null?void 0:rt.enable_user_status)??!0})));En(bt,{get role(){return e(pt)},get profile(){return e(ht)},showActiveUsers:!1,$$events:{show:tt=>{tt.detail==="archived-chat"&&ws.set(!0)}},children:(tt,rt)=>{var yt=gg(),nt=a(yt),Bt=a(nt),la=l(Bt,2);{var ka=Yt=>{var Rt=fg(),ea=a(Rt),ba=l(a(ea),2);Ye(ba,1,"relative inline-flex size-2.5 rounded-full bg-green-500 border-2 border-white dark:border-gray-900"),t(ea),t(Rt),d(Yt,Rt)};D(la,Yt=>{i(),o(()=>{var Rt,ea;return(ea=(Rt=i())==null?void 0:Rt.features)==null?void 0:ea.enable_user_status})&&Yt(ka)})}t(nt);var xa=l(nt,2),ra=a(xa,!0);t(xa),t(yt),$((Yt,Rt)=>{Be(Bt,"src",(We(Aa),u(),o(()=>{var ea;return`${Aa}/users/${(ea=u())==null?void 0:ea.id}/profile/image`}))),Be(Bt,"alt",Yt),Be(Bt,"aria-label",Rt),v(ra,(u(),o(()=>{var ea;return(ea=u())==null?void 0:ea.name})))},[()=>(n(),o(()=>n().t("Open User Profile Menu"))),()=>(n(),o(()=>n().t("Open User Profile Menu")))]),d(tt,yt)},$$slots:{default:!0}})}};D(wr,bt=>{u()!==void 0&&u()!==null&&bt(Or)})}t(zr),t(yr),t(Ee),t(we),Qa(we,bt=>s(ne,bt),()=>e(ne));var $r=l(we,2);{var Ns=bt=>{var pt=pg();V("mousedown",pt,Ae),d(bt,pt)};D($r,bt=>{ee()||bt(Ns)})}$((bt,pt,ht,tt)=>{Ye(we,1,`h-screen max-h-[100dvh] min-h-screen select-none ${W()?`${ee()?"bg-gray-50 dark:bg-gray-950":"bg-gray-50/70 dark:bg-gray-950/70"} z-50`:" bg-transparent z-0 "} ${b()?"ml-[4.5rem] md:ml-0 ":" transition-all duration-300 "} shrink-0 text-gray-900 dark:text-gray-200 text-sm fixed top-0 left-0 overflow-x-hidden
        `),Be(we,"data-state",W()),Ye(Ee,1,` my-auto flex flex-col justify-between h-screen max-h-[100dvh] w-[var(--sidebar-width)] overflow-x-hidden scrollbar-hidden z-50 ${W()?"":"invisible"}`),Be(vt,"src",`${As}/static/favicon.png`),v(st,q()),Ye(ct,1,`${e(H)>0?"visible":"invisible"} sidebar-bg-gradient-to-b bg-linear-to-b from-gray-50 dark:from-gray-950 to-transparent from-50% pointer-events-none absolute inset-0 -z-10 -mb-6`),Be(Tt,"aria-label",bt),v(Ct,pt),Be(Et,"aria-label",ht),v(Ia,tt)},[()=>(n(),o(()=>n().t("New Chat"))),()=>(n(),o(()=>n().t("New Chat"))),()=>(n(),o(()=>n().t("Search"))),()=>(n(),o(()=>n().t("Search")))]),V("click",Ke,ze),V("click",ft,ze),V("click",Tt,ze),V("click",Et,()=>{pr.set(!0)}),V("scroll",ot,bt=>{bt.target.scrollTop===0?s(H,0):s(H,bt.target.scrollTop)}),rl(3,we,()=>Ld,()=>({duration:250,axis:"x"})),d(T,_e)};D(Fe,T=>{W()&&T(et)})}V("click",Re,()=>{ga("/"),ze()}),d(M,gt),At(),E()}var xg=f('<div class=" py-2.5 space-y-1.5"><div class="flex flex-col w-full"><div class=" mb-1 text-xs text-gray-500"> </div> <div class="flex-1"><!></div></div> <div class="flex flex-col w-full"><div class=" mb-1 text-xs text-gray-500"> </div> <div class="flex-1"><!></div></div> <div class="flex flex-col w-full"><div class=" mb-1 text-xs text-gray-500"> </div> <div class="flex-1"><!></div></div></div> <div class="mt-3 flex justify-end"><button class="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"> </button></div>',1),bg=f('<form class="flex flex-col text-sm"><div class="flex justify-between items-center text-sm"><div class="  font-medium"> </div> <button class=" text-xs font-medium text-gray-500" type="button"> </button></div> <!></form>');function yg(M,c){St(c,!1);const r=()=>Ce(P,"$i18n",i),[i,n]=Pt(),P=Mt("i18n");let L=y(!1),ee=y(""),_=y(""),W=y("");const u=async()=>{e(_)===e(W)?(await Gv(localStorage.token,e(ee),e(_)).catch(k=>(Ve.error(`${k}`),null))&&Ve.success(r().t("Successfully updated.")),s(ee,""),s(_,""),s(W,"")):(Ve.error(r().t("The passwords you entered don't quite match. Please double-check and try again.")),s(_,""),s(W,""))};It();var J=bg(),p=a(J),b=a(p),m=a(b,!0);t(b);var q=l(b,2),O=a(q,!0);t(q),t(p);var K=l(p,2);{var Z=h=>{var k=xg(),U=Ie(k),E=a(U),se=a(E),H=a(se,!0);t(se);var ne=l(se,2),le=a(ne);{let g=Ze(()=>r().t("Enter your current password"));Lr(le,{class:"w-full bg-transparent text-sm dark:text-gray-300 outline-hidden placeholder:opacity-30",type:"password",get placeholder(){return e(g)},autocomplete:"current-password",required:!0,get value(){return e(ee)},set value(x){s(ee,x)},$$legacy:!0})}t(ne),t(E);var X=l(E,2),ue=a(X),w=a(ue,!0);t(ue);var oe=l(ue,2),ve=a(oe);{let g=Ze(()=>r().t("Enter your new password"));Lr(ve,{class:"w-full bg-transparent text-sm dark:text-gray-300 outline-hidden placeholder:opacity-30",type:"password",get placeholder(){return e(g)},autocomplete:"new-password",required:!0,get value(){return e(_)},set value(x){s(_,x)},$$legacy:!0})}t(oe),t(X);var Q=l(X,2),te=a(Q),A=a(te,!0);t(te);var I=l(te,2),C=a(I);{let g=Ze(()=>r().t("Confirm your new password"));Lr(C,{class:"w-full bg-transparent text-sm dark:text-gray-300 outline-hidden placeholder:opacity-30",type:"password",get placeholder(){return e(g)},autocomplete:"off",required:!0,get value(){return e(W)},set value(x){s(W,x)},$$legacy:!0})}t(I),t(Q),t(U);var j=l(U,2),B=a(j),S=a(B,!0);t(B),t(j),$((g,x,z,ie)=>{v(H,g),v(w,x),v(A,z),v(S,ie)},[()=>r().t("Current Password"),()=>r().t("New Password"),()=>r().t("Confirm Password"),()=>r().t("Update password")]),d(h,k)};D(K,h=>{e(L)&&h(Z)})}t(J),$((h,k)=>{v(m,h),v(O,k)},[()=>r().t("Change Password"),()=>e(L)?r().t("Hide"):r().t("Show")]),V("click",q,()=>{s(L,!e(L))}),V("submit",J,er(()=>{u()})),d(M,J),At(),n()}var wg=f('<input class="w-full text-sm dark:text-gray-300 bg-transparent outline-hidden mt-1" type="text" required/>'),$g=f('<div class="mt-2"><div class="flex flex-col w-full"><div class=" mb-1 text-xs font-medium"> </div> <div class="flex-1"><input class="w-full text-sm outline-hidden" type="url" required/></div></div></div>'),kg=f('<div class="mt-2"><!></div>'),Cg=ua('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd"></path></svg>'),Sg=ua('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M11.986 3H12a2 2 0 0 1 2 2v6a2 2 0 0 1-1.5 1.937V7A2.5 2.5 0 0 0 10 4.5H4.063A2 2 0 0 1 6 3h.014A2.25 2.25 0 0 1 8.25 1h1.5a2.25 2.25 0 0 1 2.236 2ZM10.5 4v-.75a.75.75 0 0 0-.75-.75h-1.5a.75.75 0 0 0-.75.75V4h3Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M3 6a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H3Zm1.75 2.5a.75.75 0 0 0 0 1.5h3.5a.75.75 0 0 0 0-1.5h-3.5ZM4 11.75a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg>'),Ag=f('<div class="justify-between w-full mt-2"><div class="flex justify-between w-full"><div class="self-center text-xs font-medium mb-1"> </div></div> <div class="flex"><!> <button class="ml-1.5 px-1.5 py-1 dark:hover:bg-gray-850 transition rounded-lg"><!></button></div></div>'),Ig=f('<div class="flex justify-between w-full"><div class="self-center text-xs font-medium mb-1"> </div></div>'),Eg=ua('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd"></path></svg>'),Pg=ua('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M11.986 3H12a2 2 0 0 1 2 2v6a2 2 0 0 1-1.5 1.937V7A2.5 2.5 0 0 0 10 4.5H4.063A2 2 0 0 1 6 3h.014A2.25 2.25 0 0 1 8.25 1h1.5a2.25 2.25 0 0 1 2.236 2ZM10.5 4v-.75a.75.75 0 0 0-.75-.75h-1.5a.75.75 0 0 0-.75.75V4h3Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M3 6a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H3Zm1.75 2.5a.75.75 0 0 0 0 1.5h3.5a.75.75 0 0 0 0-1.5h-3.5ZM4 11.75a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg>'),Lg=f('<button class=" px-1.5 py-1 dark:hover:bg-gray-850transition rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"></path></svg></button>'),Mg=f('<!> <button class="ml-1.5 px-1.5 py-1 dark:hover:bg-gray-850 transition rounded-lg"><!></button> <!>',1),jg=f('<button class="flex gap-1.5 items-center font-medium px-3.5 py-1.5 rounded-lg bg-gray-100/70 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-850 transition"><!> </button>'),Ng=f('<div class="justify-between w-full mt-2"><!> <div class="flex"><!></div></div>'),Tg=f('<div class="flex flex-col"><!> <!></div>'),Dg=f('<div class="flex justify-between items-center text-sm mt-2"><div class="  font-medium"> </div> <button class=" text-xs font-medium text-gray-500" type="button"> </button></div> <!>',1),Bg=f('<div id="tab-account" class="flex flex-col h-full justify-between text-sm"><div class=" overflow-y-scroll max-h-[28rem] md:max-h-full"><div class="space-y-1"><div><div class="text-base font-medium"> </div> <div class="text-xs text-gray-500 mt-0.5"> </div></div> <div class="flex space-x-5 my-4"><!> <div class="flex flex-1 flex-col"><div class=" flex-1"><div class="flex flex-col w-full"><div class=" mb-1 text-xs font-medium"> </div> <div class="flex-1"><input class="w-full text-sm dark:text-gray-300 bg-transparent outline-hidden" type="text" required/></div></div> <div class="flex flex-col w-full mt-2"><div class=" mb-1 text-xs font-medium"> </div> <div class="flex-1"><!></div></div> <div class="flex flex-col w-full mt-2"><div class=" mb-1 text-xs font-medium"> </div> <div class="flex-1"><select class="dark:bg-gray-900 w-full text-sm dark:text-gray-300 bg-transparent outline-hidden"><option selected> </option><option> </option><option> </option><option> </option></select></div> <!></div> <div class="flex flex-col w-full mt-2"><div class=" mb-1 text-xs font-medium"> </div> <div class="flex-1"><input class="w-full text-sm dark:text-gray-300 dark:placeholder:text-gray-300 bg-transparent outline-hidden" type="date" required/></div></div></div></div></div></div> <!> <hr class="border-gray-50 dark:border-gray-850/30 my-4"/> <!> <!></div> <div class="flex justify-end pt-3 text-sm font-medium"><button class="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"> </button></div></div>');function zg(M,c){St(c,!1);const r=()=>Ce(za,"$user",L),i=()=>Ce(ta,"$settings",L),n=()=>Ce(_,"$i18n",L),P=()=>Ce(Ma,"$config",L),[L,ee]=Pt(),_=Mt("i18n");let W=me(c,"saveHandler",8),u=me(c,"saveSettings",8),J=y(""),p=y(""),b=y(""),m=y(""),q=y(""),O=y(""),K=y(""),Z=y(!1),h=y(!1),k=y(""),U=y(!1);const E=async()=>{var Pe,Re,je,De;if(e(p)!==((Pe=r())==null?void 0:Pe.name)&&(e(J)===kn((Re=r())==null?void 0:Re.name)||e(J)==="")&&s(J,kn(e(p))),e(K)!==((De=(je=i())==null?void 0:je.notifications)==null?void 0:De.webhook_url)&&u()({notifications:{...i().notifications,webhook_url:e(K)}}),await Jv(localStorage.token,{name:e(p),profile_image_url:e(J),bio:e(b)?e(b):null,gender:e(q)?e(q):null,date_of_birth:e(O)?e(O):null}).catch(Fe=>{Ve.error(`${Fe}`)})){const Fe=await Dn(localStorage.token).catch(et=>(Ve.error(`${et}`),null));return await za.set(Fe),!0}return!1},se=async()=>{s(k,await Xv(localStorage.token)),e(k)?Ve.success(n().t("API Key created.")):Ve.error(n().t("Failed to create API Key."))};oa(async()=>{var Pe,Re,je,De,Fe,et;const G=await Dn(localStorage.token).catch(T=>(Ve.error(`${T}`),null));G&&(s(p,(G==null?void 0:G.name)??""),s(J,(G==null?void 0:G.profile_image_url)??""),s(b,(G==null?void 0:G.bio)??""),s(m,(G==null?void 0:G.gender)??""),s(q,e(m)),s(O,(G==null?void 0:G.date_of_birth)??"")),s(K,((Re=(Pe=i())==null?void 0:Pe.notifications)==null?void 0:Re.webhook_url)??""),G&&(((De=(je=P())==null?void 0:je.features)==null?void 0:De.enable_api_keys)??!0)&&((G==null?void 0:G.role)==="admin"||(((et=(Fe=G==null?void 0:G.permissions)==null?void 0:Fe.features)==null?void 0:et.api_keys)??!1))&&s(k,await Yv(localStorage.token).catch(T=>""))}),It();var H=Bg(),ne=a(H),le=a(ne),X=a(le),ue=a(X),w=a(ue,!0);t(ue);var oe=l(ue,2),ve=a(oe,!0);t(oe),t(X);var Q=l(X,2),te=a(Q);uv(te,{get user(){return r()},get profileImageUrl(){return e(J)},set profileImageUrl(G){s(J,G)},$$legacy:!0});var A=l(te,2),I=a(A),C=a(I),j=a(C),B=a(j,!0);t(j);var S=l(j,2),g=a(S);sa(g),t(S),t(C);var x=l(C,2),z=a(x),ie=a(z,!0);t(z);var xe=l(z,2),he=a(xe);{let G=Ze(()=>(n(),o(()=>n().t("Share your background and interests"))));vl(he,{className:"w-full text-sm dark:text-gray-300 bg-transparent outline-hidden",minSize:60,get placeholder(){return e(G)},get value(){return e(b)},set value(Pe){s(b,Pe)},$$legacy:!0})}t(xe),t(x);var pe=l(x,2),be=a(pe),Ne=a(be,!0);t(be);var fe=l(be,2),ae=a(fe);$(()=>{e(m),La(()=>{e(q),n()})});var ge=a(ae),ke=a(ge,!0);t(ge),ge.value=ge.__value="";var R=l(ge),Oe=a(R,!0);t(R),R.value=R.__value="male";var He=l(R),Ue=a(He,!0);t(He),He.value=He.__value="female";var de=l(He),N=a(de,!0);t(de),de.value=de.__value="custom",t(ae),t(fe);var Se=l(fe,2);{var $e=G=>{var Pe=wg();sa(Pe),$(Re=>Be(Pe,"placeholder",Re),[()=>(n(),o(()=>n().t("Enter your gender")))]),aa(Pe,()=>e(q),Re=>s(q,Re)),d(G,Pe)};D(Se,G=>{e(m)==="custom"&&G($e)})}t(pe);var Te=l(pe,2),Le=a(Te),Ae=a(Le,!0);t(Le);var re=l(Le,2),ye=a(re);sa(ye),t(re),t(Te),t(I),t(A),t(Q),t(le);var Me=l(le,2);{var ze=G=>{var Pe=$g(),Re=a(Pe),je=a(Re),De=a(je,!0);t(je);var Fe=l(je,2),et=a(Fe);sa(et),t(Fe),t(Re),t(Pe),$((T,_e)=>{v(De,T),Be(et,"placeholder",_e)},[()=>(n(),o(()=>n().t("Notification Webhook"))),()=>(n(),o(()=>n().t("Enter your webhook URL")))]),aa(et,()=>e(K),T=>s(K,T)),d(G,Pe)};D(Me,G=>{P(),o(()=>{var Pe,Re;return(Re=(Pe=P())==null?void 0:Pe.features)==null?void 0:Re.enable_user_webhooks})&&G(ze)})}var Je=l(Me,4);{var Ge=G=>{var Pe=kg(),Re=a(Pe);yg(Re,{}),t(Pe),d(G,Pe)};D(Je,G=>{P(),o(()=>{var Pe;return(Pe=P())==null?void 0:Pe.features.enable_login_form})&&G(Ge)})}var gt=l(Je,2);{var $t=G=>{var Pe=Dg(),Re=Ie(Pe),je=a(Re),De=a(je,!0);t(je);var Fe=l(je,2),et=a(Fe,!0);t(Fe),t(Re);var T=l(Re,2);{var _e=we=>{var Ee=Tg(),Qe=a(Ee);{var Ke=at=>{var st=Ag(),mt=a(st),ct=a(mt),ot=a(ct,!0);t(ct),t(mt);var kt=l(mt,2),Lt=a(kt);Lr(Lt,{value:o(()=>localStorage.token),readOnly:!0});var Tt=l(Lt,2),jt=a(Tt);{var Dt=lt=>{var Ct=Cg();d(lt,Ct)},Ft=lt=>{var Ct=Sg();d(lt,Ct)};D(jt,lt=>{e(h)?lt(Dt):lt(Ft,!1)})}t(Tt),t(kt),t(st),$(lt=>v(ot,lt),[()=>(n(),o(()=>n().t("JWT Token")))]),V("click",Tt,()=>{Cn(localStorage.token),s(h,!0),setTimeout(()=>{s(h,!1)},2e3)}),d(at,st)};D(Qe,at=>{r(),o(()=>{var st;return((st=r())==null?void 0:st.role)==="admin"})&&at(Ke)})}var vt=l(Qe,2);{var ft=at=>{var st=Ng(),mt=a(st);{var ct=jt=>{var Dt=Ig(),Ft=a(Dt),lt=a(Ft,!0);t(Ft),t(Dt),$(Ct=>v(lt,Ct),[()=>(n(),o(()=>n().t("API Key")))]),d(jt,Dt)};D(mt,jt=>{r(),o(()=>{var Dt;return((Dt=r())==null?void 0:Dt.role)==="admin"})&&jt(ct)})}var ot=l(mt,2),kt=a(ot);{var Lt=jt=>{var Dt=Mg(),Ft=Ie(Dt);Lr(Ft,{get value(){return e(k)},readOnly:!0});var lt=l(Ft,2),Ct=a(lt);{var Qt=Nt=>{var _t=Eg();d(Nt,_t)},ut=Nt=>{var _t=Pg();d(Nt,_t)};D(Ct,Nt=>{e(U)?Nt(Qt):Nt(ut,!1)})}t(lt);var Et=l(lt,2);{let Nt=Ze(()=>(n(),o(()=>n().t("Create new key"))));Zt(Et,{get content(){return e(Nt)},children:(_t,Gt)=>{var _a=Lg();V("click",_a,()=>{se()}),d(_t,_a)},$$slots:{default:!0}})}V("click",lt,()=>{Cn(e(k)),s(U,!0),setTimeout(()=>{s(U,!1)},2e3)}),d(jt,Dt)},Tt=jt=>{var Dt=jg(),Ft=a(Dt);ur(Ft,{strokeWidth:"2",className:" size-3.5"});var lt=l(Ft);t(Dt),$(Ct=>v(lt,` ${Ct??""}`),[()=>(n(),o(()=>n().t("Create new secret key")))]),V("click",Dt,()=>{se()}),d(jt,Dt)};D(kt,jt=>{e(k)?jt(Lt):jt(Tt,!1)})}t(ot),t(st),d(at,st)};D(vt,at=>{P(),r(),o(()=>{var st,mt,ct,ot,kt,Lt;return(((mt=(st=P())==null?void 0:st.features)==null?void 0:mt.enable_api_keys)??!0)&&(((ct=r())==null?void 0:ct.role)==="admin"||(((Lt=(kt=(ot=r())==null?void 0:ot.permissions)==null?void 0:kt.features)==null?void 0:Lt.api_keys)??!1))})&&at(ft)})}t(Ee),d(we,Ee)};D(T,we=>{e(Z)&&we(_e)})}$((we,Ee)=>{v(De,we),v(et,Ee)},[()=>(n(),o(()=>n().t("API keys"))),()=>(e(Z),n(),o(()=>e(Z)?n().t("Hide"):n().t("Show")))]),V("click",Fe,()=>{s(Z,!e(Z))}),d(G,Pe)};D(gt,G=>{P(),r(),o(()=>{var Pe,Re,je,De,Fe,et;return(((Re=(Pe=P())==null?void 0:Pe.features)==null?void 0:Re.enable_api_keys)??!0)&&(((je=r())==null?void 0:je.role)==="admin"||(((et=(Fe=(De=r())==null?void 0:De.permissions)==null?void 0:Fe.features)==null?void 0:et.api_keys)??!1))})&&G($t)})}t(ne);var Xe=l(ne,2),F=a(Xe),Y=a(F,!0);t(F),t(Xe),t(H),$((G,Pe,Re,je,De,Fe,et,T,_e,we,Ee,Qe)=>{v(w,G),v(ve,Pe),v(B,Re),Be(g,"placeholder",je),v(ie,De),v(Ne,Fe),v(ke,et),v(Oe,T),v(Ue,_e),v(N,we),v(Ae,Ee),v(Y,Qe)},[()=>(n(),o(()=>n().t("Your Account"))),()=>(n(),o(()=>n().t("Manage your account information."))),()=>(n(),o(()=>n().t("Name"))),()=>(n(),o(()=>n().t("Enter your name"))),()=>(n(),o(()=>n().t("Bio"))),()=>(n(),o(()=>n().t("Gender"))),()=>(n(),o(()=>n().t("Prefer not to say"))),()=>(n(),o(()=>n().t("Male"))),()=>(n(),o(()=>n().t("Female"))),()=>(n(),o(()=>n().t("Custom"))),()=>(n(),o(()=>n().t("Birth Date"))),()=>(n(),o(()=>n().t("Save")))]),aa(g,()=>e(p),G=>s(p,G)),or(ae,()=>e(m),G=>s(m,G)),V("change",ae,G=>{e(m),e(m)==="custom"?s(q,""):s(q,e(m))}),aa(ye,()=>e(O),G=>s(O,G)),V("click",F,async()=>{await E()&&W()()}),d(M,H),At(),ee()}var Og=f('<a target="_blank"> </a>'),Ug=f('<button class=" text-xs px-3 py-1.5 bg-gray-100 hover:bg-gray-200 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-lg font-medium"> </button>'),Wg=f('<hr class=" border-gray-100/30 dark:border-gray-850/30"/> <div><div class=" mb-2.5 text-sm font-medium"> </div> <div class="flex w-full"><div class="flex-1 text-xs text-gray-700 dark:text-gray-200"> </div></div></div>',1),Fg=f('<span class=" text-gray-500 dark:text-gray-300 font-medium"> </span> -',1),Hg=f('<div class="mb-2 text-xs"><!> <span class=" capitalize"> </span> license purchased by <span class=" capitalize"> </span></div>'),Rg=f('<div class="flex space-x-1"><a href="https://discord.gg/5rJgQTnV4s" target="_blank"><img alt="Discord" src="https://img.shields.io/badge/Discord-Open_WebUI-blue?logo=discord&amp;logoColor=white"/></a> <a href="https://twitter.com/OpenWebUI" target="_blank"><img alt="X (formerly Twitter) Follow" src="https://img.shields.io/twitter/follow/OpenWebUI"/></a> <a href="https://github.com/open-webui/open-webui" target="_blank"><img alt="Github Repo" src="https://img.shields.io/github/stars/open-webui/open-webui?style=social&amp;label=Star us on Github"/></a></div>'),Vg=f(`<div id="tab-about" class="flex flex-col h-full justify-between space-y-3 text-sm mb-6"><div class=" space-y-3 overflow-y-scroll max-h-[28rem] md:max-h-full"><div><div class=" mb-2.5 text-sm font-medium flex space-x-2 items-center"><div> </div></div> <div class="flex w-full justify-between items-center"><div class="flex flex-col text-xs text-gray-700 dark:text-gray-200"><div class="flex gap-1"><!> <!></div> <button class=" underline flex items-center space-x-1 text-xs text-gray-500 dark:text-gray-500"><div> </div></button></div> <!></div></div> <!> <hr class=" border-gray-100/30 dark:border-gray-850/30"/> <!> <div class="mt-2 text-xs text-gray-400 dark:text-gray-500">Emoji graphics provided by <a href="https://github.com/jdecked/twemoji" target="_blank">Twemoji</a>, licensed under <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY 4.0</a>.</div> <div><pre class="text-xs text-gray-400 dark:text-gray-500"> <a href="https://openwebui.com" target="_blank" class="underline">Open WebUI Inc.</a> <a href="https://github.com/open-webui/open-webui/blob/main/LICENSE" target="_blank">All rights reserved.</a>
</pre></div> <div class="mt-2 text-xs text-gray-400 dark:text-gray-500"> <a class=" text-gray-500 dark:text-gray-300 font-medium" href="https://github.com/tjbck" target="_blank">Timothy J. Baek</a></div></div></div>`);function Kg(M,c){St(c,!1);const r=()=>Ce(Ma,"$config",P),i=()=>Ce(ll,"$WEBUI_NAME",P),n=()=>Ce(ee,"$i18n",P),[P,L]=Pt(),ee=Mt("i18n");let _=y(""),W=y(null),u=y({current:"",latest:""});const J=async()=>{s(W,null),s(u,await Vn(localStorage.token).catch(S=>({current:lr,latest:lr}))),e(u),s(W,Yn(e(u).latest,e(u).current)),e(W)};oa(async()=>{var S,g;s(_,await ec(localStorage.token).catch(x=>"")),(g=(S=r())==null?void 0:S.features)!=null&&g.enable_version_update_check&&J()}),It();var p=Vg(),b=a(p),m=a(b),q=a(m),O=a(q),K=a(O);t(O),t(q);var Z=l(q,2),h=a(Z),k=a(h),U=a(k);Zt(U,{get content(){return zd},children:(S,g)=>{sr();var x=ia();$(()=>v(x,`v${lr}`)),d(S,x)},$$slots:{default:!0}});var E=l(U,2);{var se=S=>{var g=Og(),x=a(g,!0);t(g),$(z=>{Be(g,"href",`https://github.com/open-webui/open-webui/releases/tag/v${e(u).latest??""}`),v(x,z)},[()=>e(W)===null?n().t("Checking for updates..."):e(W)?`(v${e(u).latest} ${n().t("available!")})`:n().t("(latest)")]),d(S,g)};D(E,S=>{var g,x;(x=(g=r())==null?void 0:g.features)!=null&&x.enable_version_update_check&&S(se)})}t(k);var H=l(k,2),ne=a(H),le=a(ne,!0);t(ne),t(H),t(h);var X=l(h,2);{var ue=S=>{var g=Ug(),x=a(g,!0);t(g),$(z=>v(x,z),[()=>n().t("Check for updates")]),V("click",g,()=>{J()}),d(S,g)};D(X,S=>{var g,x;(x=(g=r())==null?void 0:g.features)!=null&&x.enable_version_update_check&&S(ue)})}t(Z),t(m);var w=l(m,2);{var oe=S=>{var g=Wg(),x=l(Ie(g),2),z=a(x),ie=a(z,!0);t(z);var xe=l(z,2),he=a(xe),pe=a(he,!0);t(he),t(xe),t(x),$(be=>{v(ie,be),v(pe,e(_)??"N/A")},[()=>n().t("Ollama Version")]),d(S,g)};D(w,S=>{e(_)&&S(oe)})}var ve=l(w,4);{var Q=S=>{var g=Hg(),x=a(g);{var z=be=>{var Ne=Fg(),fe=Ie(Ne),ae=a(fe,!0);t(fe),sr(),$(()=>v(ae,i())),d(be,Ne)};D(x,be=>{i().includes("Open WebUI")||be(z)})}var ie=l(x,2),xe=a(ie,!0);t(ie);var he=l(ie,2),pe=a(he,!0);t(he),t(g),$(()=>{var be,Ne,fe,ae;v(xe,(Ne=(be=r())==null?void 0:be.license_metadata)==null?void 0:Ne.type),v(pe,(ae=(fe=r())==null?void 0:fe.license_metadata)==null?void 0:ae.organization_name)}),d(S,g)},te=S=>{var g=Rg();d(S,g)};D(ve,S=>{var g;(g=r())!=null&&g.license_metadata?S(Q):S(te,!1)})}var A=l(ve,4),I=a(A),C=a(I);sr(4),t(I),t(A);var j=l(A,2),B=a(j);sr(),t(j),t(b),t(p),$((S,g,x,z)=>{v(K,`${i()??""}
					${S??""}`),v(le,g),v(C,`Copyright (c) ${x??""} `),v(B,`${z??""} `)},[()=>n().t("Version"),()=>n().t("See what's new"),()=>new Date().getFullYear(),()=>n().t("Created by")]),V("click",H,()=>{ks.set(!0)}),d(M,p),At(),L()}var qg=f("<option> </option>"),Zg=f(`<div>Couldn't find your language? <a href="https://github.com/open-webui/open-webui/blob/main/docs/CONTRIBUTING.md#-translations-and-internationalization" target="_blank">Help us translate Open WebUI!</a></div>`),Gg=f('<span class="ml-2 self-center"> </span>'),Yg=f('<span class="ml-2 self-center"> </span>'),Jg=f('<hr class="border-gray-100/30 dark:border-gray-850/30 my-3"/> <div><div class=" my-2.5 text-sm font-medium"> </div> <!></div>',1),Xg=f('<div class="mt-2 space-y-3 pr-1.5"><div class="flex justify-between items-center text-sm"><div class="  font-medium"> </div> <button type="button"> </button></div> <!></div>'),Qg=f('<div class="flex flex-col h-full justify-between text-sm" id="tab-general"><div class="  overflow-y-scroll max-h-[28rem] md:max-h-full"><div><div class=" mb-1 text-sm font-medium"> </div> <div class="flex w-full justify-between"><div class=" self-center text-xs font-medium"> </div> <div class="flex items-center relative"><select><option> </option><option> </option><option> </option><option> </option><option> Her</option></select></div></div> <div class=" flex w-full justify-between"><div class=" self-center text-xs font-medium"> </div> <div class="flex items-center relative"><select></select></div></div> <!> <div><div class=" py-0.5 flex w-full justify-between"><div class=" self-center text-xs font-medium"> </div> <button class="p-1 px-3 text-xs flex rounded-sm transition" type="button"><!></button></div></div></div> <!> <!></div> <div class="flex justify-end pt-3 text-sm font-medium"><button class="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"> </button></div></div>');function e1(M,c){St(c,!1);const r=()=>Ce(W,"$i18n",L),i=()=>Ce(ta,"$settings",L),n=()=>Ce(Ma,"$config",L),P=()=>Ce(za,"$user",L),[L,ee]=Pt(),_=ha(),W=Mt("i18n");let u=me(c,"saveSettings",8);me(c,"getModels",8);let J=["dark","light","oled-dark"],p=y("system"),b=y([]),m=y(r().language),q=y(!1),O=y(""),K=y(!1);const Z=async()=>{await Notification.requestPermission()==="granted"?(s(q,!e(q)),u()({notificationEnabled:e(q)})):Ve.error(r().t("Response notifications cannot be activated as the website permissions have been denied. Please visit your browser settings to grant the necessary access."))};let h=y({stream_response:null,stream_delta_chunk_size:null,function_calling:null,seed:null,temperature:null,reasoning_effort:null,logit_bias:null,frequency_penalty:null,presence_penalty:null,repeat_penalty:null,repeat_last_n:null,mirostat:null,mirostat_eta:null,mirostat_tau:null,top_k:null,top_p:null,min_p:null,stop:null,tfs_z:null,num_ctx:null,num_batch:null,num_keep:null,max_tokens:null,num_gpu:null});const k=async()=>{u()({system:e(O)!==""?e(O):void 0,params:{stream_response:e(h).stream_response!==null?e(h).stream_response:void 0,stream_delta_chunk_size:e(h).stream_delta_chunk_size!==null?e(h).stream_delta_chunk_size:void 0,function_calling:e(h).function_calling!==null?e(h).function_calling:void 0,seed:(e(h).seed!==null?e(h).seed:void 0)??void 0,stop:e(h).stop?e(h).stop.split(",").filter(re=>re):void 0,temperature:e(h).temperature!==null?e(h).temperature:void 0,reasoning_effort:e(h).reasoning_effort!==null?e(h).reasoning_effort:void 0,logit_bias:e(h).logit_bias!==null?e(h).logit_bias:void 0,frequency_penalty:e(h).frequency_penalty!==null?e(h).frequency_penalty:void 0,presence_penalty:e(h).frequency_penalty!==null?e(h).frequency_penalty:void 0,repeat_penalty:e(h).frequency_penalty!==null?e(h).frequency_penalty:void 0,repeat_last_n:e(h).repeat_last_n!==null?e(h).repeat_last_n:void 0,mirostat:e(h).mirostat!==null?e(h).mirostat:void 0,mirostat_eta:e(h).mirostat_eta!==null?e(h).mirostat_eta:void 0,mirostat_tau:e(h).mirostat_tau!==null?e(h).mirostat_tau:void 0,top_k:e(h).top_k!==null?e(h).top_k:void 0,top_p:e(h).top_p!==null?e(h).top_p:void 0,min_p:e(h).min_p!==null?e(h).min_p:void 0,tfs_z:e(h).tfs_z!==null?e(h).tfs_z:void 0,num_ctx:e(h).num_ctx!==null?e(h).num_ctx:void 0,num_batch:e(h).num_batch!==null?e(h).num_batch:void 0,num_keep:e(h).num_keep!==null?e(h).num_keep:void 0,max_tokens:e(h).max_tokens!==null?e(h).max_tokens:void 0,use_mmap:e(h).use_mmap!==null?e(h).use_mmap:void 0,use_mlock:e(h).use_mlock!==null?e(h).use_mlock:void 0,num_thread:e(h).num_thread!==null?e(h).num_thread:void 0,num_gpu:e(h).num_gpu!==null?e(h).num_gpu:void 0,think:e(h).think!==null?e(h).think:void 0,keep_alive:e(h).keep_alive!==null?e(h).keep_alive:void 0,format:e(h).format!==null?e(h).format:void 0}}),_("save")};oa(async()=>{var re,ye,Me,ze;s(p,localStorage.theme??"system"),s(b,await tc()),s(q,i().notificationEnabled??!1),s(O,i().system??""),s(h,{...e(h),...i().params}),da(h,e(h).stop=(ye=(re=i())==null?void 0:re.params)!=null&&ye.stop?(((ze=(Me=i())==null?void 0:Me.params)==null?void 0:ze.stop)??[]).join(","):null)});const U=re=>{let ye=re==="oled-dark"?"dark":re==="her"?"light":re;re==="system"&&(ye=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ye==="dark"&&!re.includes("oled")&&(document.documentElement.style.setProperty("--color-gray-800","#333"),document.documentElement.style.setProperty("--color-gray-850","#262626"),document.documentElement.style.setProperty("--color-gray-900","#171717"),document.documentElement.style.setProperty("--color-gray-950","#0d0d0d")),J.filter(ze=>ze!==ye).forEach(ze=>{ze.split(" ").forEach(Je=>{document.documentElement.classList.remove(Je)})}),ye.split(" ").forEach(ze=>{document.documentElement.classList.add(ze)});const Me=document.querySelector('meta[name="theme-color"]');if(Me)if(re.includes("system")){const ze=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";""+ze,Me.setAttribute("content",ze==="light"?"#ffffff":"#171717")}else""+re,Me.setAttribute("content",re==="dark"?"#171717":re==="oled-dark"?"#000000":re==="her"?"#983724":"#ffffff");typeof window<"u"&&window.applyTheme&&window.applyTheme(),re.includes("oled")&&(document.documentElement.style.setProperty("--color-gray-800","#101010"),document.documentElement.style.setProperty("--color-gray-850","#050505"),document.documentElement.style.setProperty("--color-gray-900","#000000"),document.documentElement.style.setProperty("--color-gray-950","#000000"),document.documentElement.classList.add("dark"))},E=re=>{Kd.set(re),localStorage.setItem("theme",re),U(re)};It();var se=Qg(),H=a(se),ne=a(H),le=a(ne),X=a(le,!0);t(le);var ue=l(le,2),w=a(ue),oe=a(w,!0);t(w);var ve=l(w,2),Q=a(ve);$(()=>{e(p),La(()=>{i(),r()})});var te=a(Q),A=a(te);t(te),te.value=te.__value="system";var I=l(te),C=a(I);t(I),I.value=I.__value="dark";var j=l(I),B=a(j);t(j),j.value=j.__value="oled-dark";var S=l(j),g=a(S);t(S),S.value=S.__value="light";var x=l(S);x.value=x.__value="her",t(Q),t(ve),t(ue);var z=l(ue,2),ie=a(z),xe=a(ie,!0);t(ie);var he=l(ie,2),pe=a(he);$(()=>{e(m),La(()=>{i(),r(),e(b)})}),Ht(pe,5,()=>e(b),wa,(re,ye)=>{var Me=qg(),ze=a(Me,!0);t(Me);var Je={};$(()=>{v(ze,(e(ye),o(()=>e(ye).title))),Je!==(Je=(e(ye),o(()=>e(ye).code)))&&(Me.value=(Me.__value=(e(ye),o(()=>e(ye).code)))??"")}),d(re,Me)}),t(pe),t(he),t(z);var be=l(z,2);{var Ne=re=>{var ye=Zg(),Me=l(a(ye));t(ye),$(()=>{Ye(ye,1,`mb-2 text-xs ${i(),o(()=>{var ze;return((ze=i())==null?void 0:ze.highContrastMode)??!1?"text-gray-800 dark:text-gray-100":"text-gray-400 dark:text-gray-500"})??""}`),Ye(Me,1,`font-medium underline ${i(),o(()=>{var ze;return((ze=i())==null?void 0:ze.highContrastMode)??!1?"text-gray-700 dark:text-gray-200":"text-gray-300"})??""}`)}),d(re,ye)};D(be,re=>{r(),n(),o(()=>{var ye;return r().language==="en-US"&&!(((ye=n())==null?void 0:ye.license_metadata)??!1)})&&re(Ne)})}var fe=l(be,2),ae=a(fe),ge=a(ae),ke=a(ge,!0);t(ge);var R=l(ge,2),Oe=a(R);{var He=re=>{var ye=Gg(),Me=a(ye,!0);t(ye),$(ze=>v(Me,ze),[()=>(r(),o(()=>r().t("On")))]),d(re,ye)},Ue=re=>{var ye=Yg(),Me=a(ye,!0);t(ye),$(ze=>v(Me,ze),[()=>(r(),o(()=>r().t("Off")))]),d(re,ye)};D(Oe,re=>{e(q)===!0?re(He):re(Ue,!1)})}t(R),t(ae),t(fe),t(ne);var de=l(ne,2);{var N=re=>{var ye=Jg(),Me=l(Ie(ye),2),ze=a(Me),Je=a(ze,!0);t(ze);var Ge=l(ze,2);{let gt=Ze(()=>(i(),o(()=>"w-full text-sm outline-hidden resize-vertical"+(i().highContrastMode?" p-2.5 border-2 border-gray-300 dark:border-gray-700 rounded-lg bg-transparent text-gray-900 dark:text-gray-100 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 overflow-y-hidden":"  dark:text-gray-300 ")))),$t=Ze(()=>(r(),o(()=>r().t("Enter system prompt here"))));vl(Ge,{get className(){return e(gt)},rows:"4",get placeholder(){return e($t)},get value(){return e(O)},set value(Xe){s(O,Xe)},$$legacy:!0})}t(Me),$(gt=>v(Je,gt),[()=>(r(),o(()=>r().t("System Prompt")))]),d(re,ye)};D(de,re=>{P(),o(()=>{var ye,Me,ze,Je,Ge;return((ye=P())==null?void 0:ye.role)==="admin"||(((ze=(Me=P())==null?void 0:Me.permissions.chat)==null?void 0:ze.controls)??!0)&&(((Ge=(Je=P())==null?void 0:Je.permissions.chat)==null?void 0:Ge.system_prompt)??!0)})&&re(N)})}var Se=l(de,2);{var $e=re=>{var ye=Xg(),Me=a(ye),ze=a(Me),Je=a(ze,!0);t(ze);var Ge=l(ze,2),gt=a(Ge,!0);t(Ge),t(Me);var $t=l(Me,2);{var Xe=F=>{{let Y=Ze(()=>(P(),o(()=>{var G;return((G=P())==null?void 0:G.role)==="admin"})));rc(F,{get admin(){return e(Y)},get params(){return e(h)},set params(G){s(h,G)},$$legacy:!0})}};D($t,F=>{e(K)&&F(Xe)})}t(ye),$((F,Y)=>{v(Je,F),Ye(Ge,1,` text-xs font-medium ${i(),o(()=>{var G;return((G=i())==null?void 0:G.highContrastMode)??!1?"text-gray-800 dark:text-gray-100":"text-gray-400 dark:text-gray-500"})??""}`),v(gt,Y)},[()=>(r(),o(()=>r().t("Advanced Parameters"))),()=>(e(K),r(),o(()=>e(K)?r().t("Hide"):r().t("Show")))]),V("click",Ge,()=>{s(K,!e(K))}),d(re,ye)};D(Se,re=>{P(),o(()=>{var ye,Me,ze,Je,Ge;return((ye=P())==null?void 0:ye.role)==="admin"||(((ze=(Me=P())==null?void 0:Me.permissions.chat)==null?void 0:ze.controls)??!0)&&(((Ge=(Je=P())==null?void 0:Je.permissions.chat)==null?void 0:Ge.params)??!0)})&&re($e)})}t(H);var Te=l(H,2),Le=a(Te),Ae=a(Le,!0);t(Le),t(Te),t(se),$((re,ye,Me,ze,Je,Ge,gt,$t,Xe,F,Y)=>{v(X,re),v(oe,ye),Ye(Q,1,`dark:bg-gray-900 w-fit pr-8 rounded-sm py-2 px-2 text-xs bg-transparent text-right ${i(),o(()=>i().highContrastMode?"":"outline-hidden")??""}`),Be(Q,"placeholder",Me),v(A,` ${ze??""}`),v(C,` ${Je??""}`),v(B,` ${Ge??""}`),v(g,` ${gt??""}`),v(xe,$t),Ye(pe,1,`dark:bg-gray-900 w-fit pr-8 rounded-sm py-2 px-2 text-xs bg-transparent text-right ${i(),o(()=>i().highContrastMode?"":"outline-hidden")??""}`),Be(pe,"placeholder",Xe),v(ke,F),v(Ae,Y)},[()=>(r(),o(()=>r().t("WebUI Settings"))),()=>(r(),o(()=>r().t("Theme"))),()=>(r(),o(()=>r().t("Select a theme"))),()=>(r(),o(()=>r().t("System"))),()=>(r(),o(()=>r().t("Dark"))),()=>(r(),o(()=>r().t("OLED Dark"))),()=>(r(),o(()=>r().t("Light"))),()=>(r(),o(()=>r().t("Language"))),()=>(r(),o(()=>r().t("Select a language"))),()=>(r(),o(()=>r().t("Notifications"))),()=>(r(),o(()=>r().t("Save")))]),or(Q,()=>e(p),re=>s(p,re)),V("change",Q,()=>E(e(p))),or(pe,()=>e(m),re=>s(m,re)),V("change",pe,re=>{ac(e(m))}),V("click",R,()=>{Z()}),V("click",Le,()=>{k()}),d(M,se),At(),ee()}var t1=f("<span> </span>"),a1=f("<span> </span>"),r1=f('<button type="button"><!></button>'),s1=f('<div class="text-gray-500 dark:text-gray-400 text-xs w-full text-center py-5"> </div>'),o1=f('<div class=" py-1 flex w-full justify-between items-start"><div class="flex flex-col items-start pr-2"><input class=" self-center text-xs outline-none w-20"/> <input class=" self-center text-xs outline-none w-20 text-gray-600 dark:text-gray-400"/></div> <div class="flex items-center gap-2 w-full"><!></div> <button class="pl-3 text-xs flex rounded-sm transition" type="button"><!></button></div> <hr class="border-gray-50 dark:border-gray-850/30 my-2"/>',1),l1=f('<div><div class=" flex justify-between dark:text-gray-100 px-5 pt-4 pb-1.5"><h1 class="text-lg font-medium self-center font-primary"> </h1> <button class="self-center"><!></button></div> <div class="flex flex-col md:flex-row w-full px-4 pb-4 md:space-x-4 dark:text-gray-200"><div class=" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"><form class="flex flex-col w-full px-1"><div><div class="text-xs flex items-center justify-between mb-2"><div class="font-medium"> </div> <div class="flex items-center gap-2 text-gray-700 dark:text-gray-300"><button type="button"><!></button> <!></div></div> <!></div> <div class="flex justify-end text-sm font-medium"><button class="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full" type="submit"> </button></div></form></div></div></div>');function n1(M,c){St(c,!1);const r=()=>Ce(P,"$i18n",i),[i,n]=Pt(),P=Mt("i18n");let L=me(c,"show",12,!1),ee=me(c,"onSave",8,()=>{}),_=me(c,"floatingActionButtons",12,null);const W=async()=>{ee()(_()),L(!1)};oa(()=>{}),Kt(()=>We(L()),()=>{L()}),ca(),It(),qa(M,{size:"sm",get show(){return L()},set show(u){L(u)},children:(u,J)=>{var p=l1(),b=a(p),m=a(b),q=a(m,!0);t(m);var O=l(m,2),K=a(O);Oa(K,{className:"size-5"}),t(O),t(b);var Z=l(b,2),h=a(Z),k=a(h),U=a(k),E=a(U),se=a(E),H=a(se,!0);t(se);var ne=l(se,2),le=a(ne),X=a(le);{var ue=B=>{var S=t1(),g=a(S,!0);t(S),$(x=>v(g,x),[()=>(r(),o(()=>r().t("Default")))]),d(B,S)},w=B=>{var S=a1(),g=a(S,!0);t(S),$(x=>v(g,x),[()=>(r(),o(()=>r().t("Custom")))]),d(B,S)};D(X,B=>{_()===null?B(ue):B(w,!1)})}t(le);var oe=l(le,2);{var ve=B=>{var S=r1(),g=a(S);ur(g,{className:"size-4 "}),t(S),V("click",S,()=>{let x="new-button",z=0;for(;_().some(ie=>ie.id===x);)z++,x=`new-button-${z}`;_([..._(),{id:x,label:`${r().t("New Button")}`,input:!0,prompt:`{{CONTENT}}


{{INPUT_CONTENT}}`}])}),d(B,S)};D(oe,B=>{_()!==null&&B(ve)})}t(ne),t(E);var Q=l(E,2);{var te=B=>{var S=s1(),g=a(S,!0);t(S),$(x=>v(g,x),[()=>(r(),o(()=>r().t("Default action buttons will be used.")))]),d(B,S)},A=B=>{var S=dt(),g=Ie(S);Ht(g,1,_,wa,(x,z,ie)=>{var xe=o1(),he=Ie(xe),pe=a(he),be=a(pe);sa(be);var Ne=l(be,2);sa(Ne),t(pe);var fe=l(pe,2),ae=a(fe);{let R=Ze(()=>(r(),o(()=>r().t("Button Prompt"))));vl(ae,{className:" self-center text-xs w-full outline-none",get placeholder(){return e(R)},minSize:30,get value(){return e(z).prompt},set value(Oe){e(z).prompt=Oe,La(()=>_())},$$legacy:!0})}t(fe);var ge=l(fe,2),ke=a(ge);li(ke,{className:"h-4 w-4"}),t(ge),t(he),sr(2),$((R,Oe)=>{Be(be,"placeholder",R),Be(Ne,"placeholder",Oe)},[()=>(r(),o(()=>r().t("Button Label"))),()=>(r(),o(()=>r().t("Button ID")))]),aa(be,()=>e(z).label,R=>(e(z).label=R,La(()=>_()))),aa(Ne,()=>e(z).id,R=>(e(z).id=R,La(()=>_()))),V("click",ge,()=>{_(_().filter(R=>R.id!==e(z).id))}),d(x,xe)}),d(B,S)};D(Q,B=>{We(_()),o(()=>_()===null||_().length===0)?B(te):B(A,!1)})}t(U);var I=l(U,2),C=a(I),j=a(C,!0);t(C),t(I),t(k),t(h),t(Z),t(p),$((B,S,g,x)=>{v(q,B),Be(O,"aria-label",S),v(H,g),v(j,x)},[()=>(r(),o(()=>r().t("Quick Actions"))),()=>(r(),o(()=>r().t("Close modal"))),()=>(r(),o(()=>r().t("Actions"))),()=>(r(),o(()=>r().t("Save")))]),V("click",O,()=>{L(!1)}),V("click",le,()=>{_()===null?_([{id:"ask",label:r().t("Ask"),input:!0,prompt:`{{SELECTED_CONTENT}}


{{INPUT_CONTENT}}`},{id:"explain",label:r().t("Explain"),input:!1,prompt:`{{SELECTED_CONTENT}}


${r().t("Explain")}`}]):_(null)}),V("submit",k,B=>{B.preventDefault(),W()}),d(u,p)},$$slots:{default:!0},$$legacy:!0}),At(),n()}var i1=f('<div><div class=" flex justify-between dark:text-gray-100 px-5 pt-4 pb-1.5"><h1 class="text-lg font-medium self-center font-primary"> </h1> <button class="self-center"><!></button></div> <div class="flex flex-col md:flex-row w-full px-4 pb-4 md:space-x-4 dark:text-gray-200"><div class=" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"><form class="flex flex-col w-full px-1"><div><div><div class=" py-0.5 flex flex-col w-full text-sm"><div id="image-compression-size-label" class=" text-xs mb-2"> </div> <div class="p-1 flex-1 flex gap-2"><div class=" flex-1"><label class="sr-only" for="image-comp-width"> </label> <input type="number" aria-labelledby="image-comp-width" class="w-full bg-transparent outline-hidden text-center" min="0"/></div> <div class="self-center text-gray-500 dark:text-gray-400"><!></div> <div class="flex-1"><label class="sr-only" for="image-comp-height"> </label> <input type="number" aria-labelledby="image-comp-height" class="w-full bg-transparent outline-hidden text-center" min="0"/></div></div></div></div></div> <div class="flex justify-end text-sm font-medium"><button class="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full" type="submit"> </button></div></form></div></div></div>');function d1(M,c){St(c,!1);const r=()=>Ce(P,"$i18n",i),[i,n]=Pt(),P=Mt("i18n");let L=me(c,"show",12,!1),ee=me(c,"size",12,null),_=me(c,"onSave",8,()=>{});const W=async()=>{_()(ee()),L(!1)};oa(()=>{}),It(),qa(M,{size:"sm",get show(){return L()},set show(u){L(u)},children:(u,J)=>{var p=i1(),b=a(p),m=a(b),q=a(m,!0);t(m);var O=l(m,2),K=a(O);Oa(K,{className:"size-5"}),t(O),t(b);var Z=l(b,2),h=a(Z),k=a(h),U=a(k),E=a(U),se=a(E),H=a(se),ne=a(H,!0);t(H);var le=l(H,2),X=a(le),ue=a(X),w=a(ue,!0);t(ue);var oe=l(ue,2);sa(oe),t(X);var ve=l(X,2),Q=a(ve);Oa(Q,{}),t(ve);var te=l(ve,2),A=a(te),I=a(A,!0);t(A);var C=l(A,2);sa(C),t(te),t(le),t(se),t(E),t(U);var j=l(U,2),B=a(j),S=a(B,!0);t(B),t(j),t(k),t(h),t(Z),t(p),$((g,x,z,ie,xe,he,pe,be)=>{v(q,g),Be(O,"aria-label",x),v(ne,z),v(w,ie),Be(oe,"placeholder",xe),v(I,he),Be(C,"placeholder",pe),v(S,be)},[()=>(r(),o(()=>r().t("Manage"))),()=>(r(),o(()=>r().t("Close modal"))),()=>(r(),o(()=>r().t("Image Max Compression Size"))),()=>(r(),o(()=>r().t("Image Max Compression Size width"))),()=>(r(),o(()=>r().t("Width"))),()=>(r(),o(()=>r().t("Image Max Compression Size height"))),()=>(r(),o(()=>r().t("Height"))),()=>(r(),o(()=>r().t("Save")))]),V("click",O,()=>{L(!1)}),aa(oe,()=>ee().width,g=>ee(ee().width=g,!0)),aa(C,()=>ee().height,g=>ee(ee().height=g,!0)),V("submit",k,g=>{g.preventDefault(),W()}),d(u,p)},$$slots:{default:!0},$$legacy:!0}),At(),n()}var v1=f("<span> </span>"),c1=f("<span> </span>"),u1=f('<div class=" flex items-center gap-2 px-1 pb-1"><button type="button" class="rounded-lg p-1 transition outline-gray-200 hover:bg-gray-100 dark:outline-gray-700 dark:hover:bg-gray-800" aria-labelledby="ui-scale-label"><!></button> <div class="flex-1 flex items-center"><input id="ui-scale-slider" class="w-full" type="range" min="1" max="1.5" aria-labelledby="ui-scale-label" aria-valuemin="1" aria-valuemax="1.5"/></div> <button type="button" class="rounded-lg p-1 transition outline-gray-200 hover:bg-gray-100 dark:outline-gray-700 dark:hover:bg-gray-800" aria-labelledby="ui-scale-label"><!></button></div>'),f1=f('<div><div class=" py-0.5 flex w-full justify-between"><div id="play-notification-sound-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div>'),g1=f('<div><div class=" py-0.5 flex w-full justify-between"><div id="toast-notifications-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="whats-new-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div>',1),p1=f('<div><div class=" py-0.5 flex w-full justify-between"><div id="chat-bubble-username-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div>'),m1=f('<div><div class=" py-0.5 flex w-full justify-between"><div id="temp-chat-default-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div>'),h1=f('<button class="text-xs text-gray-700 dark:text-gray-400 underline" type="button"> </button>'),_1=f('<div><div class=" py-0.5 flex w-full justify-between"><div id="prompt-autocompletion-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div>'),x1=f('<div><div class=" py-0.5 flex w-full justify-between"><div id="show-formatting-toolbar-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="insert-prompt-as-rich-text-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div>',1),b1=f('<button class="text-xs text-gray-700 dark:text-gray-400 underline" type="button"> </button>'),y1=f('<div><div class=" py-0.5 flex w-full justify-between"><div id="image-compression-in-channels-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div>'),w1=f('<!> <!> <form id="tab-interface" class="flex flex-col h-full justify-between space-y-3 text-sm"><input type="file" hidden="" accept="image/*"/> <div class=" space-y-3 overflow-y-scroll max-h-[28rem] md:max-h-full"><div><h1 class=" mb-2 text-sm font-medium"> </h1> <div><div class="py-0.5 flex w-full justify-between"><label id="ui-scale-label" class=" self-center text-xs" for="ui-scale-slider"> </label> <div class="flex items-center gap-2 p-1"><button class="text-xs" aria-live="polite" type="button"><!></button></div></div> <!></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="high-contrast-mode-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="use-chat-title-as-tab-title-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class="py-0.5 flex w-full justify-between"><div id="notification-sound-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <!> <div><div id="allow-user-location-label" class=" py-0.5 flex w-full justify-between"><div class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="haptic-feedback-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="copy-formatted-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <!> <div class=" my-2 text-sm font-medium"> </div> <div><div class=" py-0.5 flex w-full justify-between"><div id="chat-direction-label" class=" self-center text-xs"> </div> <button aria-labelledby="chat-direction-label chat-direction-mode" class="p-1 px-3 text-xs flex rounded-sm transition" type="button"><span class="ml-2 self-center" id="chat-direction-mode"> </span></button></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="landing-page-mode-label" class=" self-center text-xs"> </div> <button aria-labelledby="landing-page-mode-label notification-sound-state" class="p-1 px-3 text-xs flex rounded-sm transition" type="button"><span class="ml-2 self-center" id="notification-sound-state"> </span></button></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="chat-background-label" class=" self-center text-xs"> </div> <button aria-labelledby="chat-background-label background-image-url-state" class="p-1 px-3 text-xs flex rounded-sm transition" type="button"><span class="ml-2 self-center" id="background-image-url-state"> </span></button></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="chat-bubble-ui-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <!> <div><div class=" py-0.5 flex w-full justify-between"><div id="widescreen-mode-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <!> <div><div class=" py-0.5 flex w-full justify-between"><div id="fade-streaming-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="auto-generation-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div class=" self-center text-xs" id="follow-up-auto-generation-label"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="chat-tags-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="auto-copy-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="insert-suggestion-prompt-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="keep-follow-up-prompts-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="insert-follow-up-prompt-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="regenerate-menu-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="always-collapse-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="always-expand-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="keep-followup-prompts-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="scroll-on-branch-change-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="stylized-pdf-export-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><label id="floating-action-buttons-label" class=" self-center text-xs"> </label> <div class="flex items-center gap-3 p-1"><!> <!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="web-search-in-chat-label" class=" self-center text-xs"> </div> <button aria-labelledby="web-search-in-chat-label web-search-state" class="p-1 px-3 text-xs flex rounded-sm transition" type="button"><span class="ml-2 self-center" id="web-search-state"> </span></button></div></div> <div class=" my-2 text-sm font-medium"> </div> <div><div class=" py-0.5 flex w-full justify-between"><div id="enter-key-behavior-label ctrl-enter-to-send-state" class=" self-center text-xs"> </div> <button aria-labelledby="enter-key-behavior-label" class="p-1 px-3 text-xs flex rounded transition" type="button"><span class="ml-2 self-center" id="ctrl-enter-to-send-state"> </span></button></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="rich-input-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <!> <!> <div><div class=" py-0.5 flex w-full justify-between"><div id="paste-large-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div class=" my-2 text-sm font-medium"> </div> <div><div class=" py-0.5 flex w-full justify-between"><div id="detect-artifacts-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="iframe-sandbox-allow-same-origin-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="iframe-sandbox-allow-forms-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div class=" my-2 text-sm font-medium"> </div> <div><div class=" py-0.5 flex w-full justify-between"><div class=" self-center text-xs" id="allow-voice-interruption-in-call-label"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div><div class=" py-0.5 flex w-full justify-between"><div id="display-emoji-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-2 p-1"><!></div></div></div> <div class=" my-2 text-sm font-medium"> </div> <div><div class=" py-0.5 flex w-full justify-between"><div id="image-compression-label" class=" self-center text-xs"> </div> <div class="flex items-center gap-3 p-1"><!> <!></div></div></div> <!></div></div> <div class="flex justify-end text-sm font-medium"><button class="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full" type="submit"> </button></div></form>',1);function $1(M,c){St(c,!1);const r=()=>Ce(W,"$i18n",L),i=()=>Ce(ta,"$settings",L),n=()=>Ce(Ma,"$config",L),P=()=>Ce(za,"$user",L),[L,ee]=Pt(),_=ha(),W=Mt("i18n");let u=me(c,"saveSettings",8),J=y(null),p=y(null),b=y(),m=y(!0),q=y(!0),O=y(!0),K=y(!1),Z=y(!1),h=y(!0),k=y(!1),U="",E=y(!1),se=y(!0),H=y(!1),ne=y(!1),le=y(!0),X=y(!1),ue=y(!0),w=y(!1),oe=y(!1),ve=y(!1),Q=y(!1),te=y(!1),A=y(!1),I=y(!1),C=y(!0),j=y(""),B=y(!0),S=y("auto"),g=y(!1),x=y(!1),z=y(!1),ie=y(!0),xe=y(!1),he=y(!1),pe=y(!0),be=y(!0),Ne=y(null),fe=y(!1),ae=y({width:"",height:""}),ge=y(!0),ke=y(!0),R=y(!0),Oe=y(!0),He=y(!1),Ue=y(!1),de=y(!1),N=y(null),Se=y(!1),$e=y(!1),Te=y(!1),Le=y(!1),Ae=y(null);const re=async()=>{s(j,e(j)===""?"chat":""),u()({landingPageMode:e(j)})},ye=async()=>{if(e(k)){const ce=await Ud().catch(qe=>(Ve.error(qe.message),null));ce?(await Dd(localStorage.token,{location:ce}),Ve.success(r().t("User location successfully retrieved."))):s(k,!1)}u()({userLocation:e(k)})},Me=async()=>{u()({title:{...i().title,auto:e(m)}})},ze=async()=>{await navigator.clipboard.readText().then(()=>"granted").catch(()=>"")==="granted"?u()({responseAutoCopy:e(K)}):(s(K,!1),Ve.error(r().t("Clipboard write permission denied. Please check your browser settings to grant the necessary access.")))},Je=async()=>{e(S)==="auto"?s(S,"LTR"):e(S)==="LTR"?s(S,"RTL"):e(S)==="RTL"&&s(S,"auto"),u()({chatDirection:e(S)})},Ge=async()=>{s(g,!e(g)),u()({ctrlEnterToSend:e(g)})},gt=async()=>{u()({models:[U],imageCompressionSize:e(ae)})},$t=async()=>{s(N,e(N)===null?"always":null),u()({webSearch:e(N)})},Xe=ce=>{s(Ae,ce),sc(e(Ae)),e(Ae)===1&&s(Ae,null),u()({textScale:e(Ae)})};oa(async()=>{var ce,qe,it,wt,zt,Ot,qt,Ut,Ca,Ta,Da,tr,Ha,ar,ma,rr,Ur,Wr,Fr,Hr,Rr,Vr,Kr,qr,Zr,Gr,Yr,Jr,Xr,Qr,es,ts,as,rs,ss,os,ls,ns,is,ds,vs,cs,us,fs,gs,ps,ms,hs,_s,xs,bs,yn,wn;s(m,((qe=(ce=i())==null?void 0:ce.title)==null?void 0:qe.auto)??!0),s(O,((it=i())==null?void 0:it.autoTags)??!0),s(q,((wt=i())==null?void 0:wt.autoFollowUps)??!0),s(ne,((zt=i())==null?void 0:zt.highContrastMode)??!1),s(le,((Ot=i())==null?void 0:Ot.detectArtifacts)??!0),s(K,((qt=i())==null?void 0:qt.responseAutoCopy)??!1),s(E,((Ut=i())==null?void 0:Ut.showUsername)??!1),s(R,((Ca=i())==null?void 0:Ca.showUpdateToast)??!0),s(Oe,((Ta=i())==null?void 0:Ta.showChangelog)??!0),s(He,((Da=i())==null?void 0:Da.showEmojiInCall)??!1),s(Ue,((tr=i())==null?void 0:tr.voiceInterruption)??!1),s(X,((Ha=i())==null?void 0:Ha.displayMultiModelResponsesInTabs)??!1),s(ie,((ar=i())==null?void 0:ar.chatFadeStreamingText)??!0),s(ue,((ma=i())==null?void 0:ma.richTextInput)??!0),s(w,((rr=i())==null?void 0:rr.showFormattingToolbar)??!1),s(oe,((Ur=i())==null?void 0:Ur.insertPromptAsRichText)??!1),s(ve,((Wr=i())==null?void 0:Wr.promptAutocomplete)??!1),s(te,((Fr=i())==null?void 0:Fr.insertSuggestionPrompt)??!1),s(A,((Hr=i())==null?void 0:Hr.keepFollowUpPrompts)??!1),s(I,((Rr=i())==null?void 0:Rr.insertFollowUpPrompt)??!1),s(C,((Vr=i())==null?void 0:Vr.regenerateMenu)??!0),s(Q,((Kr=i())==null?void 0:Kr.largeTextAsFile)??!1),s(x,((qr=i())==null?void 0:qr.copyFormatted)??!1),s(xe,((Zr=i())==null?void 0:Zr.collapseCodeBlocks)??!1),s(he,((Gr=i())==null?void 0:Gr.expandDetails)??!1),s(j,((Yr=i())==null?void 0:Yr.landingPageMode)??""),s(B,((Jr=i())==null?void 0:Jr.chatBubble)??!0),s(Z,((Xr=i())==null?void 0:Xr.widescreenMode)??!1),(Qr=i())==null||Qr.splitLargeChunks,s(h,((es=i())==null?void 0:es.scrollOnBranchChange)??!0),s(z,((ts=i())==null?void 0:ts.temporaryChatByDefault)??!1),s(S,((as=i())==null?void 0:as.chatDirection)??"auto"),s(k,((rs=i())==null?void 0:rs.userLocation)??!1),s(pe,((ss=i())==null?void 0:ss.showChatTitleInTab)??!0),s(se,((os=i())==null?void 0:os.notificationSound)??!0),s(H,((ls=i())==null?void 0:ls.notificationSoundAlways)??!1),s(Se,((ns=i())==null?void 0:ns.iframeSandboxAllowSameOrigin)??!1),s($e,((is=i())==null?void 0:is.iframeSandboxAllowForms)??!1),s(ke,((ds=i())==null?void 0:ds.stylizedPdfExport)??!0),s(de,((vs=i())==null?void 0:vs.hapticFeedback)??!1),s(g,((cs=i())==null?void 0:cs.ctrlEnterToSend)??!1),s(be,((us=i())==null?void 0:us.showFloatingActionButtons)??!0),s(Ne,((fs=i())==null?void 0:fs.floatingActionButtons)??null),s(fe,((gs=i())==null?void 0:gs.imageCompression)??!1),s(ae,((ps=i())==null?void 0:ps.imageCompressionSize)??{width:"",height:""}),s(ge,((ms=i())==null?void 0:ms.imageCompressionInChannels)??!0),U=((_s=(hs=i())==null?void 0:hs.models)==null?void 0:_s.at(0))??"",(xs=n())!=null&&xs.default_models&&(U=n().default_models.split(",")[0]),s(J,((bs=i())==null?void 0:bs.backgroundImageUrl)??null),s(N,((yn=i())==null?void 0:yn.webSearch)??null),s(Ae,((wn=i())==null?void 0:wn.textScale)??null)}),It();var F=w1(),Y=Ie(F);n1(Y,{get floatingActionButtons(){return e(Ne)},onSave:ce=>{s(Ne,ce),u()({floatingActionButtons:e(Ne)})},get show(){return e(Te)},set show(ce){s(Te,ce)},$$legacy:!0});var G=l(Y,2);d1(G,{get size(){return e(ae)},onSave:ce=>{u()({imageCompressionSize:ce})},get show(){return e(Le)},set show(ce){s(Le,ce)},$$legacy:!0});var Pe=l(G,2),Re=a(Pe);Qa(Re,ce=>s(b,ce),()=>e(b));var je=l(Re,2),De=a(je),Fe=a(De),et=a(Fe,!0);t(Fe);var T=l(Fe,2),_e=a(T),we=a(_e),Ee=a(we,!0);t(we);var Qe=l(we,2),Ke=a(Qe),vt=a(Ke);{var ft=ce=>{var qe=v1(),it=a(qe,!0);t(qe),$(wt=>v(it,wt),[()=>(r(),o(()=>r().t("Default")))]),d(ce,qe)},at=ce=>{var qe=c1(),it=a(qe);t(qe),$(()=>v(it,`${e(Ae)??""}x`)),d(ce,qe)};D(vt,ce=>{e(Ae)===null?ce(ft):ce(at,!1)})}t(Ke),t(Qe),t(_e);var st=l(_e,2);{var mt=ce=>{var qe=u1(),it=a(qe),wt=a(it);li(wt,{className:"h-3.5 w-3.5"}),t(it);var zt=l(it,2),Ot=a(zt);sa(Ot),Be(Ot,"step",.01),t(zt);var qt=l(zt,2),Ut=a(qt);ur(Ut,{className:"h-3.5 w-3.5"}),t(qt),t(qe),$((Ca,Ta)=>{Be(it,"aria-label",Ca),Be(Ot,"aria-valuenow",e(Ae)),Be(Ot,"aria-valuetext",`${e(Ae)}x`),Be(qt,"aria-label",Ta)},[()=>(r(),o(()=>r().t("Decrease UI Scale"))),()=>(r(),o(()=>r().t("Increase UI Scale")))]),V("click",it,()=>{s(Ae,Math.max(1,parseFloat((e(Ae)-.1).toFixed(2)))),Xe(e(Ae))}),aa(Ot,()=>e(Ae),Ca=>s(Ae,Ca)),V("change",Ot,()=>{Xe(e(Ae))}),V("click",qt,()=>{s(Ae,Math.min(1.5,parseFloat((e(Ae)+.1).toFixed(2)))),Xe(e(Ae))}),d(ce,qe)};D(st,ce=>{e(Ae)!==null&&ce(mt)})}t(T);var ct=l(T,2),ot=a(ct),kt=a(ot),Lt=a(kt);t(kt);var Tt=l(kt,2),jt=a(Tt);xt(jt,{ariaLabelledbyId:"high-contrast-mode-label",tooltip:!0,get state(){return e(ne)},set state(ce){s(ne,ce)},$$events:{change:()=>{u()({highContrastMode:e(ne)})}},$$legacy:!0}),t(Tt),t(ot),t(ct);var Dt=l(ct,2),Ft=a(Dt),lt=a(Ft),Ct=a(lt,!0);t(lt);var Qt=l(lt,2),ut=a(Qt);xt(ut,{ariaLabelledbyId:"use-chat-title-as-tab-title-label",tooltip:!0,get state(){return e(pe)},set state(ce){s(pe,ce)},$$events:{change:()=>{u()({showChatTitleInTab:e(pe)})}},$$legacy:!0}),t(Qt),t(Ft),t(Dt);var Et=l(Dt,2),Nt=a(Et),_t=a(Nt),Gt=a(_t,!0);t(_t);var _a=l(_t,2),Ia=a(_a);xt(Ia,{ariaLabelledbyId:"notification-sound-label",tooltip:!0,get state(){return e(se)},set state(ce){s(se,ce)},$$events:{change:()=>{u()({notificationSound:e(se)})}},$$legacy:!0}),t(_a),t(Nt),t(Et);var Ea=l(Et,2);{var pa=ce=>{var qe=f1(),it=a(qe),wt=a(it),zt=a(wt,!0);t(wt);var Ot=l(wt,2),qt=a(Ot);xt(qt,{ariaLabelledbyId:"play-notification-sound-label",tooltip:!0,get state(){return e(H)},set state(Ut){s(H,Ut)},$$events:{change:()=>{u()({notificationSoundAlways:e(H)})}},$$legacy:!0}),t(Ot),t(it),t(qe),$(Ut=>v(zt,Ut),[()=>(r(),o(()=>r().t("Always Play Notification Sound")))]),d(ce,qe)};D(Ea,ce=>{e(se)&&ce(pa)})}var fa=l(Ea,2),Za=a(fa),hr=a(Za),Tr=a(hr,!0);t(hr);var Dr=l(hr,2),Br=a(Dr);xt(Br,{ariaLabelledbyId:"allow-user-location-label",tooltip:!0,get state(){return e(k)},set state(ce){s(k,ce)},$$events:{change:()=>{ye()}},$$legacy:!0}),t(Dr),t(Za),t(fa);var _r=l(fa,2),xr=a(_r),br=a(xr),js=a(br);t(br);var yr=l(br,2),zr=a(yr);xt(zr,{ariaLabelledbyId:"haptic-feedback-label",tooltip:!0,get state(){return e(de)},set state(ce){s(de,ce)},$$events:{change:()=>{u()({hapticFeedback:e(de)})}},$$legacy:!0}),t(yr),t(xr),t(_r);var wr=l(_r,2),Or=a(wr),$r=a(Or),Ns=a($r,!0);t($r);var bt=l($r,2),pt=a(bt);xt(pt,{ariaLabelledbyId:"copy-formatted-label",tooltip:!0,get state(){return e(x)},set state(ce){s(x,ce)},$$events:{change:()=>{u()({copyFormatted:e(x)})}},$$legacy:!0}),t(bt),t(Or),t(wr);var ht=l(wr,2);{var tt=ce=>{var qe=g1(),it=Ie(qe),wt=a(it),zt=a(wt),Ot=a(zt,!0);t(zt);var qt=l(zt,2),Ut=a(qt);xt(Ut,{ariaLabelledbyId:"toast-notifications-label",tooltip:!0,get state(){return e(R)},set state(ma){s(R,ma)},$$events:{change:()=>{u()({showUpdateToast:e(R)})}},$$legacy:!0}),t(qt),t(wt),t(it);var Ca=l(it,2),Ta=a(Ca),Da=a(Ta),tr=a(Da,!0);t(Da);var Ha=l(Da,2),ar=a(Ha);xt(ar,{ariaLabelledbyId:"whats-new-label",tooltip:!0,get state(){return e(Oe)},set state(ma){s(Oe,ma)},$$events:{change:()=>{u()({showChangelog:e(Oe)})}},$$legacy:!0}),t(Ha),t(Ta),t(Ca),$((ma,rr)=>{v(Ot,ma),v(tr,rr)},[()=>(r(),o(()=>r().t("Toast notifications for new updates"))),()=>(r(),o(()=>r().t(`Show "What's New" modal on login`)))]),d(ce,qe)};D(ht,ce=>{P(),o(()=>{var qe;return((qe=P())==null?void 0:qe.role)==="admin"})&&ce(tt)})}var rt=l(ht,2),yt=a(rt,!0);t(rt);var nt=l(rt,2),Bt=a(nt),la=a(Bt),ka=a(la,!0);t(la);var xa=l(la,2),ra=a(xa),Yt=a(ra,!0);t(ra),t(xa),t(Bt),t(nt);var Rt=l(nt,2),ea=a(Rt),ba=a(ea),Jt=a(ba,!0);t(ba);var Xt=l(ba,2),ya=a(Xt),Vt=a(ya,!0);t(ya),t(Xt),t(ea),t(Rt);var Wt=l(Rt,2),ja=a(Wt),Ga=a(ja),Wa=a(Ga,!0);t(Ga);var Na=l(Ga,2),fr=a(Na),kr=a(fr,!0);t(fr),t(Na),t(ja),t(Wt);var Ts=l(Wt,2),ul=a(Ts),Ds=a(ul),pi=a(Ds,!0);t(Ds);var fl=l(Ds,2),mi=a(fl);xt(mi,{tooltip:!0,ariaLabelledbyId:"chat-bubble-ui-label",get state(){return e(B)},set state(ce){s(B,ce)},$$events:{change:()=>{u()({chatBubble:e(B)})}},$$legacy:!0}),t(fl),t(ul),t(Ts);var gl=l(Ts,2);{var hi=ce=>{var qe=p1(),it=a(qe),wt=a(it),zt=a(wt,!0);t(wt);var Ot=l(wt,2),qt=a(Ot);xt(qt,{ariaLabelledbyId:"chat-bubble-username-label",tooltip:!0,get state(){return e(E)},set state(Ut){s(E,Ut)},$$events:{change:()=>{u()({showUsername:e(E)})}},$$legacy:!0}),t(Ot),t(it),t(qe),$(Ut=>v(zt,Ut),[()=>(r(),o(()=>r().t("Display the username instead of You in the Chat")))]),d(ce,qe)};D(gl,ce=>{i(),o(()=>!i().chatBubble)&&ce(hi)})}var Bs=l(gl,2),pl=a(Bs),zs=a(pl),_i=a(zs,!0);t(zs);var ml=l(zs,2),xi=a(ml);xt(xi,{ariaLabelledbyId:"widescreen-mode-label",tooltip:!0,get state(){return e(Z)},set state(ce){s(Z,ce)},$$events:{change:()=>{u()({widescreenMode:e(Z)})}},$$legacy:!0}),t(ml),t(pl),t(Bs);var hl=l(Bs,2);{var bi=ce=>{var qe=m1(),it=a(qe),wt=a(it),zt=a(wt,!0);t(wt);var Ot=l(wt,2),qt=a(Ot);xt(qt,{ariaLabelledbyId:"temp-chat-default-label",tooltip:!0,get state(){return e(z)},set state(Ut){s(z,Ut)},$$events:{change:()=>{u()({temporaryChatByDefault:e(z)})}},$$legacy:!0}),t(Ot),t(it),t(qe),$(Ut=>v(zt,Ut),[()=>(r(),o(()=>r().t("Temporary Chat by Default")))]),d(ce,qe)};D(hl,ce=>{P(),o(()=>{var qe,it,wt;return P().role==="admin"||((wt=(it=(qe=P())==null?void 0:qe.permissions)==null?void 0:it.chat)==null?void 0:wt.temporary)})&&ce(bi)})}var Os=l(hl,2),_l=a(Os),Us=a(_l),yi=a(Us,!0);t(Us);var xl=l(Us,2),wi=a(xl);xt(wi,{ariaLabelledbyId:"fade-streaming-label",tooltip:!0,get state(){return e(ie)},set state(ce){s(ie,ce)},$$events:{change:()=>{u()({chatFadeStreamingText:e(ie)})}},$$legacy:!0}),t(xl),t(_l),t(Os);var Ws=l(Os,2),bl=a(Ws),Fs=a(bl),$i=a(Fs,!0);t(Fs);var yl=l(Fs,2),ki=a(yl);xt(ki,{ariaLabelledbyId:"auto-generation-label",tooltip:!0,get state(){return e(m)},set state(ce){s(m,ce)},$$events:{change:()=>{Me()}},$$legacy:!0}),t(yl),t(bl),t(Ws);var Hs=l(Ws,2),wl=a(Hs),Rs=a(wl),Ci=a(Rs,!0);t(Rs);var $l=l(Rs,2),Si=a($l);xt(Si,{ariaLabelledbyId:"follow-up-auto-generation-label",tooltip:!0,get state(){return e(q)},set state(ce){s(q,ce)},$$events:{change:()=>{u()({autoFollowUps:e(q)})}},$$legacy:!0}),t($l),t(wl),t(Hs);var Vs=l(Hs,2),kl=a(Vs),Ks=a(kl),Ai=a(Ks,!0);t(Ks);var Cl=l(Ks,2),Ii=a(Cl);xt(Ii,{ariaLabelledbyId:"chat-tags-label",tooltip:!0,get state(){return e(O)},set state(ce){s(O,ce)},$$events:{change:()=>{u()({autoTags:e(O)})}},$$legacy:!0}),t(Cl),t(kl),t(Vs);var qs=l(Vs,2),Sl=a(qs),Zs=a(Sl),Ei=a(Zs,!0);t(Zs);var Al=l(Zs,2),Pi=a(Al);xt(Pi,{ariaLabelledbyId:"auto-copy-label",tooltip:!0,get state(){return e(K)},set state(ce){s(K,ce)},$$events:{change:()=>{ze()}},$$legacy:!0}),t(Al),t(Sl),t(qs);var Gs=l(qs,2),Il=a(Gs),Ys=a(Il),Li=a(Ys,!0);t(Ys);var El=l(Ys,2),Mi=a(El);xt(Mi,{ariaLabelledbyId:"insert-suggestion-prompt-label",tooltip:!0,get state(){return e(te)},set state(ce){s(te,ce)},$$events:{change:()=>{u()({insertSuggestionPrompt:e(te)})}},$$legacy:!0}),t(El),t(Il),t(Gs);var Js=l(Gs,2),Pl=a(Js),Xs=a(Pl),ji=a(Xs,!0);t(Xs);var Ll=l(Xs,2),Ni=a(Ll);xt(Ni,{ariaLabelledbyId:"keep-follow-up-prompts-label",tooltip:!0,get state(){return e(A)},set state(ce){s(A,ce)},$$events:{change:()=>{u()({keepFollowUpPrompts:e(A)})}},$$legacy:!0}),t(Ll),t(Pl),t(Js);var Qs=l(Js,2),Ml=a(Qs),eo=a(Ml),Ti=a(eo,!0);t(eo);var jl=l(eo,2),Di=a(jl);xt(Di,{ariaLabelledbyId:"insert-follow-up-prompt-label",tooltip:!0,get state(){return e(I)},set state(ce){s(I,ce)},$$events:{change:()=>{u()({insertFollowUpPrompt:e(I)})}},$$legacy:!0}),t(jl),t(Ml),t(Qs);var to=l(Qs,2),Nl=a(to),ao=a(Nl),Bi=a(ao,!0);t(ao);var Tl=l(ao,2),zi=a(Tl);xt(zi,{ariaLabelledbyId:"regenerate-menu-label",tooltip:!0,get state(){return e(C)},set state(ce){s(C,ce)},$$events:{change:()=>{u()({regenerateMenu:e(C)})}},$$legacy:!0}),t(Tl),t(Nl),t(to);var ro=l(to,2),Dl=a(ro),so=a(Dl),Oi=a(so,!0);t(so);var Bl=l(so,2),Ui=a(Bl);xt(Ui,{ariaLabelledbyId:"always-collapse-label",tooltip:!0,get state(){return e(xe)},set state(ce){s(xe,ce)},$$events:{change:()=>{u()({collapseCodeBlocks:e(xe)})}},$$legacy:!0}),t(Bl),t(Dl),t(ro);var oo=l(ro,2),zl=a(oo),lo=a(zl),Wi=a(lo,!0);t(lo);var Ol=l(lo,2),Fi=a(Ol);xt(Fi,{ariaLabelledbyId:"always-expand-label",tooltip:!0,get state(){return e(he)},set state(ce){s(he,ce)},$$events:{change:()=>{u()({expandDetails:e(he)})}},$$legacy:!0}),t(Ol),t(zl),t(oo);var no=l(oo,2),Ul=a(no),io=a(Ul),Hi=a(io,!0);t(io);var Wl=l(io,2),Ri=a(Wl);xt(Ri,{ariaLabelledbyId:"keep-followup-prompts-label",tooltip:!0,get state(){return e(X)},set state(ce){s(X,ce)},$$events:{change:()=>{u()({displayMultiModelResponsesInTabs:e(X)})}},$$legacy:!0}),t(Wl),t(Ul),t(no);var vo=l(no,2),Fl=a(vo),co=a(Fl),Vi=a(co,!0);t(co);var Hl=l(co,2),Ki=a(Hl);xt(Ki,{ariaLabelledbyId:"scroll-on-branch-change-label",tooltip:!0,get state(){return e(h)},set state(ce){s(h,ce)},$$events:{change:()=>{u()({scrollOnBranchChange:e(h)})}},$$legacy:!0}),t(Hl),t(Fl),t(vo);var uo=l(vo,2),Rl=a(uo),fo=a(Rl),qi=a(fo,!0);t(fo);var Vl=l(fo,2),Zi=a(Vl);xt(Zi,{ariaLabelledbyId:"stylized-pdf-export-label",tooltip:!0,get state(){return e(ke)},set state(ce){s(ke,ce)},$$events:{change:()=>{u()({stylizedPdfExport:e(ke)})}},$$legacy:!0}),t(Vl),t(Rl),t(uo);var go=l(uo,2),Kl=a(go),po=a(Kl),Gi=a(po,!0);t(po);var ql=l(po,2),Zl=a(ql);{var Yi=ce=>{var qe=h1(),it=a(qe,!0);t(qe),$((wt,zt)=>{Be(qe,"aria-label",wt),v(it,zt)},[()=>(r(),o(()=>r().t("Open Modal To Manage Floating Quick Actions"))),()=>(r(),o(()=>r().t("Manage")))]),V("click",qe,()=>{s(Te,!0)}),d(ce,qe)};D(Zl,ce=>{e(be)&&ce(Yi)})}var Ji=l(Zl,2);xt(Ji,{ariaLabelledbyId:"floating-action-buttons-label",tooltip:!0,get state(){return e(be)},set state(ce){s(be,ce)},$$events:{change:()=>{u()({showFloatingActionButtons:e(be)})}},$$legacy:!0}),t(ql),t(Kl),t(go);var mo=l(go,2),Gl=a(mo),ho=a(Gl),Xi=a(ho,!0);t(ho);var _o=l(ho,2),Yl=a(_o),Qi=a(Yl,!0);t(Yl),t(_o),t(Gl),t(mo);var xo=l(mo,2),ed=a(xo,!0);t(xo);var bo=l(xo,2),Jl=a(bo),yo=a(Jl),td=a(yo,!0);t(yo);var wo=l(yo,2),Xl=a(wo),ad=a(Xl,!0);t(Xl),t(wo),t(Jl),t(bo);var $o=l(bo,2),Ql=a($o),ko=a(Ql),rd=a(ko,!0);t(ko);var en=l(ko,2),sd=a(en);xt(sd,{tooltip:!0,ariaLabelledbyId:"rich-input-label",get state(){return e(ue)},set state(ce){s(ue,ce)},$$events:{change:()=>{u()({richTextInput:e(ue)})}},$$legacy:!0}),t(en),t(Ql),t($o);var tn=l($o,2);{var od=ce=>{var qe=_1(),it=a(qe),wt=a(it),zt=a(wt,!0);t(wt);var Ot=l(wt,2),qt=a(Ot);xt(qt,{ariaLabelledbyId:"prompt-autocompletion-label",tooltip:!0,get state(){return e(ve)},set state(Ut){s(ve,Ut)},$$events:{change:()=>{u()({promptAutocomplete:e(ve)})}},$$legacy:!0}),t(Ot),t(it),t(qe),$(Ut=>v(zt,Ut),[()=>(r(),o(()=>r().t("Prompt Autocompletion")))]),d(ce,qe)};D(tn,ce=>{n(),o(()=>{var qe,it;return(it=(qe=n())==null?void 0:qe.features)==null?void 0:it.enable_autocomplete_generation})&&ce(od)})}var an=l(tn,2);{var ld=ce=>{var qe=x1(),it=Ie(qe),wt=a(it),zt=a(wt),Ot=a(zt,!0);t(zt);var qt=l(zt,2),Ut=a(qt);xt(Ut,{ariaLabelledbyId:"show-formatting-toolbar-label",tooltip:!0,get state(){return e(w)},set state(ma){s(w,ma)},$$events:{change:()=>{u()({showFormattingToolbar:e(w)})}},$$legacy:!0}),t(qt),t(wt),t(it);var Ca=l(it,2),Ta=a(Ca),Da=a(Ta),tr=a(Da,!0);t(Da);var Ha=l(Da,2),ar=a(Ha);xt(ar,{ariaLabelledbyId:"insert-prompt-as-rich-text-label",tooltip:!0,get state(){return e(oe)},set state(ma){s(oe,ma)},$$events:{change:()=>{u()({insertPromptAsRichText:e(oe)})}},$$legacy:!0}),t(Ha),t(Ta),t(Ca),$((ma,rr)=>{v(Ot,ma),v(tr,rr)},[()=>(r(),o(()=>r().t("Show Formatting Toolbar"))),()=>(r(),o(()=>r().t("Insert Prompt as Rich Text")))]),d(ce,qe)};D(an,ce=>{e(ue)&&ce(ld)})}var Co=l(an,2),rn=a(Co),So=a(rn),nd=a(So,!0);t(So);var sn=l(So,2),id=a(sn);xt(id,{tooltip:!0,ariaLabelledbyId:"paste-large-label",get state(){return e(Q)},set state(ce){s(Q,ce)},$$events:{change:()=>{u()({largeTextAsFile:e(Q)})}},$$legacy:!0}),t(sn),t(rn),t(Co);var Ao=l(Co,2),dd=a(Ao,!0);t(Ao);var Io=l(Ao,2),on=a(Io),Eo=a(on),vd=a(Eo,!0);t(Eo);var ln=l(Eo,2),cd=a(ln);xt(cd,{ariaLabelledbyId:"detect-artifacts-label",tooltip:!0,get state(){return e(le)},set state(ce){s(le,ce)},$$events:{change:()=>{u()({detectArtifacts:e(le)})}},$$legacy:!0}),t(ln),t(on),t(Io);var Po=l(Io,2),nn=a(Po),Lo=a(nn),ud=a(Lo,!0);t(Lo);var dn=l(Lo,2),fd=a(dn);xt(fd,{ariaLabelledbyId:"iframe-sandbox-allow-same-origin-label",tooltip:!0,get state(){return e(Se)},set state(ce){s(Se,ce)},$$events:{change:()=>{u()({iframeSandboxAllowSameOrigin:e(Se)})}},$$legacy:!0}),t(dn),t(nn),t(Po);var Mo=l(Po,2),vn=a(Mo),jo=a(vn),gd=a(jo,!0);t(jo);var cn=l(jo,2),pd=a(cn);xt(pd,{ariaLabelledbyId:"iframe-sandbox-allow-forms-label",tooltip:!0,get state(){return e($e)},set state(ce){s($e,ce)},$$events:{change:()=>{u()({iframeSandboxAllowForms:e($e)})}},$$legacy:!0}),t(cn),t(vn),t(Mo);var No=l(Mo,2),md=a(No,!0);t(No);var To=l(No,2),un=a(To),Do=a(un),hd=a(Do,!0);t(Do);var fn=l(Do,2),_d=a(fn);xt(_d,{ariaLabelledbyId:"allow-voice-interruption-in-call-label",tooltip:!0,get state(){return e(Ue)},set state(ce){s(Ue,ce)},$$events:{change:()=>{u()({voiceInterruption:e(Ue)})}},$$legacy:!0}),t(fn),t(un),t(To);var Bo=l(To,2),gn=a(Bo),zo=a(gn),xd=a(zo,!0);t(zo);var pn=l(zo,2),bd=a(pn);xt(bd,{ariaLabelledbyId:"display-emoji-label",tooltip:!0,get state(){return e(He)},set state(ce){s(He,ce)},$$events:{change:()=>{u()({showEmojiInCall:e(He)})}},$$legacy:!0}),t(pn),t(gn),t(Bo);var Oo=l(Bo,2),yd=a(Oo,!0);t(Oo);var Uo=l(Oo,2),mn=a(Uo),Wo=a(mn),wd=a(Wo,!0);t(Wo);var hn=l(Wo,2),_n=a(hn);{var $d=ce=>{var qe=b1(),it=a(qe,!0);t(qe),$((wt,zt)=>{Be(qe,"aria-label",wt),v(it,zt)},[()=>(r(),o(()=>r().t("Open Modal To Manage Image Compression"))),()=>(r(),o(()=>r().t("Manage")))]),V("click",qe,()=>{s(Le,!0)}),d(ce,qe)};D(_n,ce=>{e(fe)&&ce($d)})}var kd=l(_n,2);xt(kd,{ariaLabelledbyId:"image-compression-label",tooltip:!0,get state(){return e(fe)},set state(ce){s(fe,ce)},$$events:{change:()=>{u()({imageCompression:e(fe)})}},$$legacy:!0}),t(hn),t(mn),t(Uo);var Cd=l(Uo,2);{var Sd=ce=>{var qe=y1(),it=a(qe),wt=a(it),zt=a(wt,!0);t(wt);var Ot=l(wt,2),qt=a(Ot);xt(qt,{ariaLabelledbyId:"image-compression-in-channels-label",tooltip:!0,get state(){return e(ge)},set state(Ut){s(ge,Ut)},$$events:{change:()=>{u()({imageCompressionInChannels:e(ge)})}},$$legacy:!0}),t(Ot),t(it),t(qe),$(Ut=>v(zt,Ut),[()=>(r(),o(()=>r().t("Compress Images in Channels")))]),d(ce,qe)};D(Cd,ce=>{e(fe)&&ce(Sd)})}t(De),t(je);var xn=l(je,2),bn=a(xn),Ad=a(bn,!0);t(bn),t(xn),t(Pe),$((ce,qe,it,wt,zt,Ot,qt,Ut,Ca,Ta,Da,tr,Ha,ar,ma,rr,Ur,Wr,Fr,Hr,Rr,Vr,Kr,qr,Zr,Gr,Yr,Jr,Xr,Qr,es,ts,as,rs,ss,os,ls,ns,is,ds,vs,cs,us,fs,gs,ps,ms,hs,_s,xs,bs)=>{v(et,ce),v(Ee,qe),v(Lt,`${it??""} (${wt??""})`),v(Ct,zt),v(Gt,Ot),v(Tr,qt),v(js,`${Ut??""} (${Ca??""})`),v(Ns,Ta),v(yt,Da),v(ka,tr),v(Yt,Ha),v(Jt,ar),v(Vt,ma),v(Wa,rr),v(kr,Ur),v(pi,Wr),v(_i,Fr),v(yi,Hr),v($i,Rr),v(Ci,Vr),v(Ai,Kr),v(Ei,qr),v(Li,Zr),v(ji,Gr),v(Ti,Yr),v(Bi,Jr),v(Oi,Xr),v(Wi,Qr),v(Hi,es),v(Vi,ts),v(qi,as),v(Gi,rs),v(Xi,ss),v(Qi,os),v(ed,ls),v(td,ns),v(ad,is),v(rd,ds),v(nd,vs),v(dd,cs),v(vd,us),v(ud,fs),v(gd,gs),v(md,ps),v(hd,ms),v(xd,hs),v(yd,_s),v(wd,xs),v(Ad,bs)},[()=>(r(),o(()=>r().t("UI"))),()=>(r(),o(()=>r().t("UI Scale"))),()=>(r(),o(()=>r().t("High Contrast Mode"))),()=>(r(),o(()=>r().t("Beta"))),()=>(r(),o(()=>r().t("Display chat title in tab"))),()=>(r(),o(()=>r().t("Notification Sound"))),()=>(r(),o(()=>r().t("Allow User Location"))),()=>(r(),o(()=>r().t("Haptic Feedback"))),()=>(r(),o(()=>r().t("Android"))),()=>(r(),o(()=>r().t("Copy Formatted Text"))),()=>(r(),o(()=>r().t("Chat"))),()=>(r(),o(()=>r().t("Chat direction"))),()=>(e(S),r(),o(()=>e(S)==="LTR"?r().t("LTR"):e(S)==="RTL"?r().t("RTL"):r().t("Auto"))),()=>(r(),o(()=>r().t("Landing Page Mode"))),()=>(e(j),r(),o(()=>e(j)===""?r().t("Default"):r().t("Chat"))),()=>(r(),o(()=>r().t("Chat Background Image"))),()=>(e(J),r(),o(()=>e(J)!==null?r().t("Reset"):r().t("Upload"))),()=>(r(),o(()=>r().t("Chat Bubble UI"))),()=>(r(),o(()=>r().t("Widescreen Mode"))),()=>(r(),o(()=>r().t("Fade Effect for Streaming Text"))),()=>(r(),o(()=>r().t("Title Auto-Generation"))),()=>(r(),o(()=>r().t("Follow-Up Auto-Generation"))),()=>(r(),o(()=>r().t("Chat Tags Auto-Generation"))),()=>(r(),o(()=>r().t("Auto-Copy Response to Clipboard"))),()=>(r(),o(()=>r().t("Insert Suggestion Prompt to Input"))),()=>(r(),o(()=>r().t("Keep Follow-Up Prompts in Chat"))),()=>(r(),o(()=>r().t("Insert Follow-Up Prompt to Input"))),()=>(r(),o(()=>r().t("Regenerate Menu"))),()=>(r(),o(()=>r().t("Always Collapse Code Blocks"))),()=>(r(),o(()=>r().t("Always Expand Details"))),()=>(r(),o(()=>r().t("Display Multi-model Responses in Tabs"))),()=>(r(),o(()=>r().t("Scroll On Branch Change"))),()=>(r(),o(()=>r().t("Stylized PDF Export"))),()=>(r(),o(()=>r().t("Floating Quick Actions"))),()=>(r(),o(()=>r().t("Web Search in Chat"))),()=>(e(N),r(),o(()=>e(N)==="always"?r().t("Always"):r().t("Default"))),()=>(r(),o(()=>r().t("Input"))),()=>(r(),o(()=>r().t("Enter Key Behavior"))),()=>(e(g),r(),o(()=>e(g)===!0?r().t("Ctrl+Enter to Send"):r().t("Enter to Send"))),()=>(r(),o(()=>r().t("Rich Text Input for Chat"))),()=>(r(),o(()=>r().t("Paste Large Text as File"))),()=>(r(),o(()=>r().t("Artifacts"))),()=>(r(),o(()=>r().t("Detect Artifacts Automatically"))),()=>(r(),o(()=>r().t("iframe Sandbox Allow Same Origin"))),()=>(r(),o(()=>r().t("iframe Sandbox Allow Forms"))),()=>(r(),o(()=>r().t("Voice"))),()=>(r(),o(()=>r().t("Allow Voice Interruption in Call"))),()=>(r(),o(()=>r().t("Display Emoji in Call"))),()=>(r(),o(()=>r().t("File"))),()=>(r(),o(()=>r().t("Image Compression"))),()=>(r(),o(()=>r().t("Save")))]),il(Re,()=>e(p),ce=>s(p,ce)),V("change",Re,()=>{let ce=new FileReader;ce.onload=qe=>{let it=`${qe.target.result}`;s(J,it),u()({backgroundImageUrl:e(J)})},e(p)&&e(p).length>0&&["image/gif","image/webp","image/jpeg","image/png"].includes(e(p)[0].type)?ce.readAsDataURL(e(p)[0]):(`${e(p)[0].type}`,s(p,null))}),V("click",Ke,()=>{e(Ae)===null?s(Ae,1):(s(Ae,null),Xe(1))}),V("click",xa,Je),V("click",Xt,()=>{re()}),V("click",Na,()=>{e(J)!==null?(s(J,null),u()({backgroundImageUrl:e(J)})):e(b).click()}),V("click",_o,()=>{$t()}),V("click",wo,()=>{Ge()}),V("submit",Pe,er(()=>{gt(),_("save")})),d(M,F),At(),ee()}var k1=f('<input type="text" class=" text-sm text-right bg-transparent dark:text-gray-300 outline-hidden"/>'),C1=f('<div class=" py-0.5 flex w-full justify-between"><div class=" self-center text-xs font-medium"> </div> <div class="flex items-center relative"><select class="dark:bg-gray-900 w-fit pr-8 rounded-sm px-2 p-1 text-xs bg-transparent outline-hidden text-right"><option> </option><option> </option></select></div></div> <div class=" py-0.5 flex w-full justify-between"><div class=" self-center text-xs font-medium"> </div> <div class="flex items-center relative text-xs px-3"><!></div></div>',1),S1=f('<span class="ml-2 self-center"> </span>'),A1=f('<span class="ml-2 self-center"> </span>'),I1=f('<div class=" py-0.5 flex w-full justify-between"><div class=" self-center text-xs font-medium"> </div> <div class="flex items-center relative"><select class="dark:bg-gray-900 w-fit pr-8 rounded-sm px-2 p-1 text-xs bg-transparent outline-hidden text-right"><option disabled selected> </option><option>fp32</option><option>fp16</option><option>q8</option><option>q4</option></select></div></div>'),E1=f('<span class="ml-2 self-center"> </span>'),P1=f('<span class="ml-2 self-center"> </span>'),L1=f("<option> </option>"),M1=f('<div><div class=" mb-2.5 text-sm font-medium"> </div> <div class="flex w-full"><div class="flex-1"><input list="voice-list" class="w-full text-sm bg-transparent dark:text-gray-300 outline-hidden"/> <datalist id="voice-list"></datalist></div></div></div>'),j1=f('<div><div class=" mb-2.5 text-sm font-medium flex gap-2 items-center"><!> <div class=" text-sm font-medium shimmer"> </div></div> <div class="text-xs text-gray-500"> </div></div>'),N1=f('<option class="bg-gray-100 dark:bg-gray-700"> </option>'),T1=f('<div><div class=" mb-2.5 text-sm font-medium"> </div> <div class="flex w-full"><div class="flex-1"><select class="dark:bg-gray-900 w-full text-sm bg-transparent dark:text-gray-300 outline-hidden"><option> </option><!></select></div></div> <div class="flex items-center justify-between my-1.5"><div class="text-xs"> </div> <div class="mt-1"><!></div></div></div>'),D1=f("<option> </option>"),B1=f('<div><div class=" mb-2.5 text-sm font-medium"> </div> <div class="flex w-full"><div class="flex-1"><input list="voice-list" class="w-full text-sm bg-transparent dark:text-gray-300 outline-hidden"/> <datalist id="voice-list"></datalist></div></div></div>'),z1=f('<form id="tab-audio" class="flex flex-col h-full justify-between space-y-3 text-sm"><div class=" space-y-3 overflow-y-scroll max-h-[28rem] md:max-h-full"><div><div class=" mb-1 text-sm font-medium"> </div> <!> <div class=" py-0.5 flex w-full justify-between"><div class=" self-center text-xs font-medium"> </div> <button class="p-1 px-3 text-xs flex rounded-sm transition" type="button"><!></button></div></div> <div><div class=" mb-1 text-sm font-medium"> </div> <div class=" py-0.5 flex w-full justify-between"><div class=" self-center text-xs font-medium"> </div> <div class="flex items-center relative"><select class="dark:bg-gray-900 w-fit pr-8 rounded-sm px-2 p-1 text-xs bg-transparent outline-hidden text-right"><option> </option><option> </option></select></div></div> <!> <div class=" py-0.5 flex w-full justify-between"><div class=" self-center text-xs font-medium"> </div> <button class="p-1 px-3 text-xs flex rounded-sm transition" type="button"><!></button></div> <div class=" py-0.5 flex w-full justify-between"><div class=" self-center text-xs font-medium"> </div> <div class="flex items-center relative text-xs px-3"><input type="number" min="0" step="0.01" class=" text-sm text-right bg-transparent dark:text-gray-300 outline-hidden"/> x</div></div></div> <hr class=" border-gray-100/30 dark:border-gray-850/30"/> <!></div> <div class="flex justify-end text-sm font-medium"><button class="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full" type="submit"> </button></div></form>');function O1(M,c){St(c,!1);const r=()=>Ce(Ma,"$config",P),i=()=>Ce(ta,"$settings",P),n=()=>Ce(_,"$i18n",P),[P,L]=Pt(),ee=ha(),_=Mt("i18n");let W=me(c,"saveSettings",8),u=y(!1),J=y(!1),p=y(!1),b=y(""),m=y(""),q=y(""),O=y({}),K=y(null),Z=y(null),h=y([]),k=y(""),U=y(1);const E=async()=>{if(e(q)==="browser-kokoro")e(K)||await le(),s(h,Object.entries(e(K).voices).map(([F,Y])=>({id:F,name:Y.name,localService:!1})));else if(r().audio.tts.engine===""){const F=setInterval(async()=>{s(h,await speechSynthesis.getVoices()),e(h).length>0&&clearInterval(F)},100)}else{const F=await lc(localStorage.token).catch(Y=>{Ve.error(`${Y}`)});F&&s(h,F.voices)}},se=async()=>{s(J,!e(J)),W()({responseAutoPlayback:e(J)})},H=async()=>{s(u,!e(u)),W()({speechAutoSend:e(u)})};oa(async()=>{var F,Y,G,Pe,Re,je,De,Fe,et,T,_e,we,Ee,Qe,Ke,vt,ft,at,st,mt,ct,ot;s(U,((Y=(F=i().audio)==null?void 0:F.tts)==null?void 0:Y.playbackRate)??1),i().conversationMode,s(u,i().speechAutoSend??!1),s(J,i().responseAutoPlayback??!1),s(b,((Re=(Pe=(G=i())==null?void 0:G.audio)==null?void 0:Pe.stt)==null?void 0:Re.engine)??""),s(m,((Fe=(De=(je=i())==null?void 0:je.audio)==null?void 0:De.stt)==null?void 0:Fe.language)??""),s(q,((_e=(T=(et=i())==null?void 0:et.audio)==null?void 0:T.tts)==null?void 0:_e.engine)??""),s(O,((Qe=(Ee=(we=i())==null?void 0:we.audio)==null?void 0:Ee.tts)==null?void 0:Qe.engineConfig)??{}),((ft=(vt=(Ke=i())==null?void 0:Ke.audio)==null?void 0:vt.tts)==null?void 0:ft.defaultVoice)===r().audio.tts.voice?s(k,((mt=(st=(at=i())==null?void 0:at.audio)==null?void 0:st.tts)==null?void 0:mt.voice)??r().audio.tts.voice??""):s(k,r().audio.tts.voice??""),s(p,((ot=(ct=i().audio)==null?void 0:ct.tts)==null?void 0:ot.nonLocalVoices)??!1),await E()});const ne=async()=>{e(q)==="browser-kokoro"&&await le()},le=async()=>{var F;if(e(q)==="browser-kokoro"&&(s(h,[]),(F=e(O))!=null&&F.dtype)){s(K,null),s(Z,null);const Y="onnx-community/Kokoro-82M-v1.0-ONNX",{KokoroTTS:G}=await Yo(async()=>{const{KokoroTTS:Pe}=await import("../chunks/D3WR28n5.js");return{KokoroTTS:Pe}},__vite__mapDeps([3,4,1,5,6]),import.meta.url);s(K,await G.from_pretrained(Y,{dtype:e(O).dtype,device:navigator!=null&&navigator.gpu?"webgpu":"wasm",progress_callback:Pe=>{s(Z,Pe)}})),await E()}};Kt(()=>(e(q),e(O)),()=>{e(q)&&e(O)&&ne()}),ca(),It();var X=z1(),ue=a(X),w=a(ue),oe=a(w),ve=a(oe,!0);t(oe);var Q=l(oe,2);{var te=F=>{var Y=C1(),G=Ie(Y),Pe=a(G),Re=a(Pe,!0);t(Pe);var je=l(Pe,2),De=a(je);$(()=>{e(b),La(()=>{n()})});var Fe=a(De),et=a(Fe,!0);t(Fe),Fe.value=Fe.__value="";var T=l(Fe),_e=a(T,!0);t(T),T.value=T.__value="web",t(De),t(je),t(G);var we=l(G,2),Ee=a(we),Qe=a(Ee,!0);t(Ee);var Ke=l(Ee,2),vt=a(Ke);{let ft=Ze(()=>(n(),o(()=>n().t("The language of the input audio. Supplying the input language in ISO-639-1 (e.g. en) format will improve accuracy and latency. Leave blank to automatically detect the language."))));Zt(vt,{get content(){return e(ft)},placement:"top",children:(at,st)=>{var mt=k1();sa(mt),$(ct=>Be(mt,"placeholder",ct),[()=>(n(),o(()=>n().t("e.g. en")))]),aa(mt,()=>e(m),ct=>s(m,ct)),d(at,mt)},$$slots:{default:!0}})}t(Ke),t(we),$((ft,at,st,mt,ct)=>{v(Re,ft),Be(De,"placeholder",at),v(et,st),v(_e,mt),v(Qe,ct)},[()=>(n(),o(()=>n().t("Speech-to-Text Engine"))),()=>(n(),o(()=>n().t("Select an engine"))),()=>(n(),o(()=>n().t("Default"))),()=>(n(),o(()=>n().t("Web API"))),()=>(n(),o(()=>n().t("Language")))]),or(De,()=>e(b),ft=>s(b,ft)),d(F,Y)};D(Q,F=>{r(),o(()=>r().audio.stt.engine!=="web")&&F(te)})}var A=l(Q,2),I=a(A),C=a(I,!0);t(I);var j=l(I,2),B=a(j);{var S=F=>{var Y=S1(),G=a(Y,!0);t(Y),$(Pe=>v(G,Pe),[()=>(n(),o(()=>n().t("On")))]),d(F,Y)},g=F=>{var Y=A1(),G=a(Y,!0);t(Y),$(Pe=>v(G,Pe),[()=>(n(),o(()=>n().t("Off")))]),d(F,Y)};D(B,F=>{e(u)===!0?F(S):F(g,!1)})}t(j),t(A),t(w);var x=l(w,2),z=a(x),ie=a(z,!0);t(z);var xe=l(z,2),he=a(xe),pe=a(he,!0);t(he);var be=l(he,2),Ne=a(be);$(()=>{e(q),La(()=>{n()})});var fe=a(Ne),ae=a(fe,!0);t(fe),fe.value=fe.__value="";var ge=l(fe),ke=a(ge,!0);t(ge),ge.value=ge.__value="browser-kokoro",t(Ne),t(be),t(xe);var R=l(xe,2);{var Oe=F=>{var Y=I1(),G=a(Y),Pe=a(G,!0);t(G);var Re=l(G,2),je=a(Re);$(()=>{e(O),La(()=>{n()})});var De=a(je),Fe=a(De,!0);t(De),De.value=De.__value="";var et=l(De);et.value=et.__value="fp32";var T=l(et);T.value=T.__value="fp16";var _e=l(T);_e.value=_e.__value="q8";var we=l(_e);we.value=we.__value="q4",t(je),t(Re),t(Y),$((Ee,Qe,Ke)=>{v(Pe,Ee),Be(je,"placeholder",Qe),v(Fe,Ke)},[()=>(n(),o(()=>n().t("Kokoro.js Dtype"))),()=>(n(),o(()=>n().t("Select dtype"))),()=>(n(),o(()=>n().t("Select dtype")))]),or(je,()=>e(O).dtype,Ee=>da(O,e(O).dtype=Ee)),d(F,Y)};D(R,F=>{e(q)==="browser-kokoro"&&F(Oe)})}var He=l(R,2),Ue=a(He),de=a(Ue,!0);t(Ue);var N=l(Ue,2),Se=a(N);{var $e=F=>{var Y=E1(),G=a(Y,!0);t(Y),$(Pe=>v(G,Pe),[()=>(n(),o(()=>n().t("On")))]),d(F,Y)},Te=F=>{var Y=P1(),G=a(Y,!0);t(Y),$(Pe=>v(G,Pe),[()=>(n(),o(()=>n().t("Off")))]),d(F,Y)};D(Se,F=>{e(J)===!0?F($e):F(Te,!1)})}t(N),t(He);var Le=l(He,2),Ae=a(Le),re=a(Ae,!0);t(Ae);var ye=l(Ae,2),Me=a(ye);sa(Me),sr(),t(ye),t(Le),t(x);var ze=l(x,4);{var Je=F=>{var Y=dt(),G=Ie(Y);{var Pe=je=>{var De=M1(),Fe=a(De),et=a(Fe,!0);t(Fe);var T=l(Fe,2),_e=a(T),we=a(_e);sa(we);var Ee=l(we,2);Ht(Ee,5,()=>e(h),wa,(Qe,Ke,vt,ft)=>{var at=L1(),st=a(at,!0);t(at);var mt={};$(()=>{v(st,(e(Ke),o(()=>e(Ke).name))),mt!==(mt=(e(Ke),o(()=>e(Ke).id)))&&(at.value=(at.__value=(e(Ke),o(()=>e(Ke).id)))??"")}),d(Qe,at)}),t(Ee),t(_e),t(T),t(De),$((Qe,Ke)=>{v(et,Qe),Be(we,"placeholder",Ke)},[()=>(n(),o(()=>n().t("Set Voice"))),()=>(n(),o(()=>n().t("Select a voice")))]),aa(we,()=>e(k),Qe=>s(k,Qe)),d(je,De)},Re=je=>{var De=j1(),Fe=a(De),et=a(Fe);$a(et,{className:"size-4"});var T=l(et,2),_e=a(T);t(T),t(Fe);var we=l(Fe,2),Ee=a(we,!0);t(we),t(De),$((Qe,Ke,vt)=>{v(_e,`${Qe??""}
							${Ke??""}`),v(Ee,vt)},[()=>(n(),o(()=>n().t("Loading Kokoro.js..."))),()=>(e(Z),o(()=>e(Z)&&e(Z).status==="progress"?`(${Math.round(e(Z).progress*10)/10}%)`:"")),()=>(n(),o(()=>n().t("Please do not close the settings page while loading the model.")))]),d(je,De)};D(G,je=>{e(K)?je(Pe):je(Re,!1)})}d(F,Y)},Ge=F=>{var Y=dt(),G=Ie(Y);{var Pe=je=>{var De=T1(),Fe=a(De),et=a(Fe,!0);t(Fe);var T=l(Fe,2),_e=a(T),we=a(_e);$(()=>{e(k),La(()=>{n(),e(h),e(p)})});var Ee=a(we),Qe=a(Ee,!0);t(Ee),Ee.value=Ee.__value="";var Ke=l(Ee);Ht(Ke,1,()=>(e(h),e(p),o(()=>e(h).filter(ct=>e(p)||ct.localService===!0))),wa,(ct,ot)=>{var kt=N1(),Lt=a(kt,!0);t(kt);var Tt={};$(()=>{qo(kt,(e(k),e(ot),o(()=>e(k)===e(ot).name))),v(Lt,(e(ot),o(()=>e(ot).name))),Tt!==(Tt=(e(ot),o(()=>e(ot).name)))&&(kt.value=(kt.__value=(e(ot),o(()=>e(ot).name)))??"")}),d(ct,kt)}),t(we),t(_e),t(T);var vt=l(T,2),ft=a(vt),at=a(ft,!0);t(ft);var st=l(ft,2),mt=a(st);xt(mt,{get state(){return e(p)},set state(ct){s(p,ct)},$$legacy:!0}),t(st),t(vt),t(De),$((ct,ot,kt)=>{v(et,ct),qo(Ee,e(k)!==""),v(Qe,ot),v(at,kt)},[()=>(n(),o(()=>n().t("Set Voice"))),()=>(n(),o(()=>n().t("Default"))),()=>(n(),o(()=>n().t("Allow non-local voices")))]),or(we,()=>e(k),ct=>s(k,ct)),d(je,De)},Re=je=>{var De=dt(),Fe=Ie(De);{var et=T=>{var _e=B1(),we=a(_e),Ee=a(we,!0);t(we);var Qe=l(we,2),Ke=a(Qe),vt=a(Ke);sa(vt);var ft=l(vt,2);Ht(ft,5,()=>e(h),wa,(at,st,mt,ct)=>{var ot=D1(),kt=a(ot,!0);t(ot);var Lt={};$(()=>{v(kt,(e(st),o(()=>e(st).name))),Lt!==(Lt=(e(st),o(()=>e(st).id)))&&(ot.value=(ot.__value=(e(st),o(()=>e(st).id)))??"")}),d(at,ot)}),t(ft),t(Ke),t(Qe),t(_e),$((at,st)=>{v(Ee,at),Be(vt,"placeholder",st)},[()=>(n(),o(()=>n().t("Set Voice"))),()=>(n(),o(()=>n().t("Select a voice")))]),aa(vt,()=>e(k),at=>s(k,at)),d(T,_e)};D(Fe,T=>{r(),o(()=>r().audio.tts.engine!=="")&&T(et)},!0)}d(je,De)};D(G,je=>{r(),o(()=>r().audio.tts.engine==="")?je(Pe):je(Re,!1)},!0)}d(F,Y)};D(ze,F=>{e(q)==="browser-kokoro"?F(Je):F(Ge,!1)})}t(ue);var gt=l(ue,2),$t=a(gt),Xe=a($t,!0);t($t),t(gt),t(X),$((F,Y,G,Pe,Re,je,De,Fe,et,T)=>{v(ve,F),v(C,Y),v(ie,G),v(pe,Pe),Be(Ne,"placeholder",Re),v(ae,je),v(ke,De),v(de,Fe),v(re,et),v(Xe,T)},[()=>(n(),o(()=>n().t("STT Settings"))),()=>(n(),o(()=>n().t("Instant Auto-Send After Voice Transcription"))),()=>(n(),o(()=>n().t("TTS Settings"))),()=>(n(),o(()=>n().t("Text-to-Speech Engine"))),()=>(n(),o(()=>n().t("Select an engine"))),()=>(n(),o(()=>n().t("Default"))),()=>(n(),o(()=>n().t("Kokoro.js (Browser)"))),()=>(n(),o(()=>n().t("Auto-playback response"))),()=>(n(),o(()=>n().t("Speech Playback Speed"))),()=>(n(),o(()=>n().t("Save")))]),V("click",j,()=>{H()}),or(Ne,()=>e(q),F=>s(q,F)),V("click",N,()=>{se()}),aa(Me,()=>e(U),F=>s(U,F)),V("submit",X,er(async()=>{var F,Y,G;W()({audio:{stt:{engine:e(b)!==""?e(b):void 0,language:e(m)!==""?e(m):void 0},tts:{engine:e(q)!==""?e(q):void 0,engineConfig:e(O),playbackRate:e(U),voice:e(k)!==""?e(k):void 0,defaultVoice:((G=(Y=(F=r())==null?void 0:F.audio)==null?void 0:Y.tts)==null?void 0:G.voice)??"",nonLocalVoices:r().audio.tts.engine===""?e(p):void 0}}}),ee("save")})),d(M,X),At(),L()}var U1=f('<button class=" flex rounded-md py-2 px-3.5 w-full hover:bg-gray-200 dark:hover:bg-gray-800 transition"><div class=" self-center mr-3"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm4 3.5a.75.75 0 0 1 .75.75v2.69l.72-.72a.75.75 0 1 1 1.06 1.06l-2 2a.75.75 0 0 1-1.06 0l-2-2a.75.75 0 0 1 1.06-1.06l.72.72V6.25A.75.75 0 0 1 8 5.5Z" clip-rule="evenodd"></path></svg></div> <div class=" self-center text-sm font-medium"> </div></button>'),W1=f('<div class="flex justify-between rounded-md items-center py-2 px-3.5 w-full transition"><div class="flex items-center space-x-3"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3Z"></path><path fill-rule="evenodd" d="M13 6H3v6a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V6ZM5.72 7.47a.75.75 0 0 1 1.06 0L8 8.69l1.22-1.22a.75.75 0 1 1 1.06 1.06L9.06 9.75l1.22 1.22a.75.75 0 1 1-1.06 1.06L8 10.81l-1.22 1.22a.75.75 0 0 1-1.06-1.06l1.22-1.22-1.22-1.22a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"></path></svg> <span> </span></div> <div class="flex space-x-1.5 items-center"><button class="hover:text-white transition"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd"></path></svg></button> <button class="hover:text-white transition"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg></button></div></div>'),F1=f('<button class=" flex rounded-md py-2 px-3.5 w-full hover:bg-gray-200 dark:hover:bg-gray-800 transition"><div class=" self-center mr-3"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4"><path d="M3.375 3C2.339 3 1.5 3.84 1.5 4.875v.75c0 1.036.84 1.875 1.875 1.875h17.25c1.035 0 1.875-.84 1.875-1.875v-.75C22.5 3.839 21.66 3 20.625 3H3.375Z"></path><path fill-rule="evenodd" d="m3.087 9 .54 9.176A3 3 0 0 0 6.62 21h10.757a3 3 0 0 0 2.995-2.824L20.913 9H3.087Zm6.163 3.75A.75.75 0 0 1 10 12h4a.75.75 0 0 1 0 1.5h-4a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg></div> <div class=" self-center text-sm font-medium"> </div></button>'),H1=f('<div class="flex justify-between rounded-md items-center py-2 px-3.5 w-full transition"><div class="flex items-center space-x-3"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3Z"></path><path fill-rule="evenodd" d="M13 6H3v6a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V6ZM5.72 7.47a.75.75 0 0 1 1.06 0L8 8.69l1.22-1.22a.75.75 0 1 1 1.06 1.06L9.06 9.75l1.22 1.22a.75.75 0 1 1-1.06 1.06L8 10.81l-1.22 1.22a.75.75 0 0 1-1.06-1.06l1.22-1.22-1.22-1.22a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"></path></svg> <span> </span></div> <div class="flex space-x-1.5 items-center"><button class="hover:text-white transition"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd"></path></svg></button> <button class="hover:text-white transition"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg></button></div></div>'),R1=f('<button class=" flex rounded-md py-2 px-3.5 w-full hover:bg-gray-200 dark:hover:bg-gray-800 transition"><div class=" self-center mr-3"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm7 7a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1 0-1.5h4.5A.75.75 0 0 1 11 9Z" clip-rule="evenodd"></path></svg></div> <div class=" self-center text-sm font-medium"> </div></button>'),V1=f('<!> <div id="tab-chats" class="flex flex-col h-full justify-between space-y-3 text-sm"><div class=" space-y-2 overflow-y-scroll max-h-[28rem] md:max-h-full"><div class="flex flex-col"><input id="chat-import-input" type="file" accept=".json" hidden=""/> <button class=" flex rounded-md py-2 px-3.5 w-full hover:bg-gray-200 dark:hover:bg-gray-800 transition"><div class=" self-center mr-3"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm4 9.5a.75.75 0 0 1-.75-.75V8.06l-.72.72a.75.75 0 0 1-1.06-1.06l2-2a.75.75 0 0 1 1.06 0l2 2a.75.75 0 1 1-1.06 1.06l-.72-.72v2.69a.75.75 0 0 1-.75.75Z" clip-rule="evenodd"></path></svg></div> <div class=" self-center text-sm font-medium"> </div></button> <!></div> <hr class=" border-gray-100/30 dark:border-gray-850/30"/> <div class="flex flex-col"><button class=" flex rounded-md py-2 px-3.5 w-full hover:bg-gray-200 dark:hover:bg-gray-800 transition"><div class=" self-center mr-3"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4"><path d="M3.375 3C2.339 3 1.5 3.84 1.5 4.875v.75c0 1.036.84 1.875 1.875 1.875h17.25c1.035 0 1.875-.84 1.875-1.875v-.75C22.5 3.839 21.66 3 20.625 3H3.375Z"></path><path fill-rule="evenodd" d="m3.087 9 .54 9.176A3 3 0 0 0 6.62 21h10.757a3 3 0 0 0 2.995-2.824L20.913 9H3.087ZM12 10.5a.75.75 0 0 1 .75.75v4.94l1.72-1.72a.75.75 0 1 1 1.06 1.06l-3 3a.75.75 0 0 1-1.06 0l-3-3a.75.75 0 1 1 1.06-1.06l1.72 1.72v-4.94a.75.75 0 0 1 .75-.75Z" clip-rule="evenodd"></path></svg></div> <div class=" self-center text-sm font-medium"> </div></button> <!> <!></div></div></div>',1);function K1(M,c){St(c,!1);const r=()=>Ce(Ba,"$currentChatPage",P),i=()=>Ce(_,"$i18n",P),n=()=>Ce(za,"$user",P),[P,L]=Pt(),{saveAs:ee}=Nr,_=Mt("i18n");me(c,"saveSettings",8);let W=y(),u=y(!1),J=y(!1),p=y(!1),b=y();const m=async g=>{const x=await Pr(localStorage.token,g.map(z=>z.chat?{chat:z.chat,meta:z.meta??{},pinned:!1,folder_id:(z==null?void 0:z.folder_id)??null,created_at:(z==null?void 0:z.created_at)??null,updated_at:(z==null?void 0:z.updated_at)??null}:{chat:z,meta:{},pinned:!1,folder_id:null,created_at:(z==null?void 0:z.created_at)??null,updated_at:(z==null?void 0:z.updated_at)??null}));x&&Ve.success(`Successfully imported ${x.length} chats.`),Ba.set(1),await Ka.set(await Fa(localStorage.token,r())),dr.set(await Er(localStorage.token)),ir.set(!0)},q=async()=>{let g=new Blob([JSON.stringify(await rv(localStorage.token))],{type:"application/json"});ee(g,`chat-export-${Date.now()}.json`)},O=async()=>{await ga("/"),await sv(localStorage.token).catch(g=>{Ve.error(`${g}`)}),Ba.set(1),await Ka.set(await Fa(localStorage.token,r())),dr.set([]),ir.set(!0)},K=async()=>{await ga("/"),await ov(localStorage.token).catch(g=>{Ve.error(`${g}`)}),Ba.set(1),await Ka.set(await Fa(localStorage.token,r())),ir.set(!0)},Z=async()=>{Ba.set(1),await Ka.set(await Fa(localStorage.token,r())),ir.set(!0)};Kt(()=>(e(W),Sn),()=>{if(e(W)){e(W);let g=new FileReader;g.onload=x=>{let z=JSON.parse(x.target.result);if(Wd(z)=="openai")try{z=Sn(z)}catch(ie){}m(z)},e(W).length>0&&g.readAsText(e(W)[0])}}),ca(),It();var h=V1(),k=Ie(h);ci(k,{onUpdate:Z,get show(){return e(p)},set show(g){s(p,g)},$$legacy:!0});var U=l(k,2),E=a(U),se=a(E),H=a(se);Qa(H,g=>s(b,g),()=>e(b));var ne=l(H,2),le=l(a(ne),2),X=a(le,!0);t(le),t(ne);var ue=l(ne,2);{var w=g=>{var x=U1(),z=l(a(x),2),ie=a(z,!0);t(z),t(x),$(xe=>v(ie,xe),[()=>(i(),o(()=>i().t("Export Chats")))]),V("click",x,()=>{q()}),d(g,x)};D(ue,g=>{n(),o(()=>{var x,z,ie;return((x=n())==null?void 0:x.role)==="admin"||(((ie=(z=n().permissions)==null?void 0:z.chat)==null?void 0:ie.export)??!0)})&&g(w)})}t(se);var oe=l(se,4),ve=a(oe),Q=l(a(ve),2),te=a(Q,!0);t(Q),t(ve);var A=l(ve,2);{var I=g=>{var x=W1(),z=a(x),ie=l(a(z),2),xe=a(ie,!0);t(ie),t(z);var he=l(z,2),pe=a(he),be=l(pe,2);t(he),t(x),$(Ne=>v(xe,Ne),[()=>(i(),o(()=>i().t("Are you sure?")))]),V("click",pe,()=>{O(),s(u,!1)}),V("click",be,()=>{s(u,!1)}),d(g,x)},C=g=>{var x=F1(),z=l(a(x),2),ie=a(z,!0);t(z),t(x),$(xe=>v(ie,xe),[()=>(i(),o(()=>i().t("Archive All Chats")))]),V("click",x,()=>{s(u,!0)}),d(g,x)};D(A,g=>{e(u)?g(I):g(C,!1)})}var j=l(A,2);{var B=g=>{var x=H1(),z=a(x),ie=l(a(z),2),xe=a(ie,!0);t(ie),t(z);var he=l(z,2),pe=a(he),be=l(pe,2);t(he),t(x),$(Ne=>v(xe,Ne),[()=>(i(),o(()=>i().t("Are you sure?")))]),V("click",pe,()=>{K(),s(J,!1)}),V("click",be,()=>{s(J,!1)}),d(g,x)},S=g=>{var x=R1(),z=l(a(x),2),ie=a(z,!0);t(z),t(x),$(xe=>v(ie,xe),[()=>(i(),o(()=>i().t("Delete All Chats")))]),V("click",x,()=>{s(J,!0)}),d(g,x)};D(j,g=>{e(J)?g(B):g(S,!1)})}t(oe),t(E),t(U),$((g,x)=>{v(X,g),v(te,x)},[()=>(i(),o(()=>i().t("Import Chats"))),()=>(i(),o(()=>i().t("Archived Chats")))]),il(H,()=>e(W),g=>s(W,g)),V("click",ne,()=>{e(b).click()}),V("click",ve,()=>{s(p,!0)}),d(M,h),At(),L()}const Ar=async M=>{let c=null;const r=await fetch(`${Aa}/memories/`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${M}`}}).then(async i=>{if(!i.ok)throw await i.json();return i.json()}).catch(i=>(c=i.detail,null));if(c)throw c;return r},q1=async(M,c)=>{let r=null;const i=await fetch(`${Aa}/memories/add`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${M}`},body:JSON.stringify({content:c})}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).catch(n=>(r=n.detail,null));if(r)throw r;return i},Z1=async(M,c,r)=>{let i=null;const n=await fetch(`${Aa}/memories/${c}/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${M}`},body:JSON.stringify({content:r})}).then(async P=>{if(!P.ok)throw await P.json();return P.json()}).catch(P=>(i=P.detail,null));if(i)throw i;return n},G1=async(M,c)=>{let r=null;const i=await fetch(`${Aa}/memories/${c}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${M}`}}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).then(n=>n).catch(n=>(r=n.detail,null));if(r)throw r;return i},Y1=async M=>{let c=null;const r=await fetch(`${Aa}/memories/delete/user`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${M}`}}).then(async i=>{if(!i.ok)throw await i.json();return i.json()}).then(i=>i).catch(i=>(c=i.detail,null));if(c)throw c;return r};var J1=f('<div class="ml-2 self-center"><!></div>'),X1=f('<div><div class=" flex justify-between dark:text-gray-300 px-5 pt-4 pb-2"><div class=" text-lg font-medium self-center"> </div> <button class="self-center"><!></button></div> <div class="flex flex-col md:flex-row w-full px-5 pb-4 md:space-x-4 dark:text-gray-200"><div class=" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"><form class="flex flex-col w-full"><div><textarea class=" bg-transparent w-full text-sm rounded-xl p-3 outline outline-1 outline-gray-100 dark:outline-gray-800" rows="6" style="resize: vertical;"></textarea> <div class="text-xs text-gray-500"> </div></div> <div class="flex justify-end pt-1 text-sm font-medium"><button type="submit"> <!></button></div></form></div></div></div>');function Q1(M,c){St(c,!1);const r=()=>Ce(ee,"$i18n",i),[i,n]=Pt(),P=ha();let L=me(c,"show",12);const ee=Mt("i18n");let _=y(!1),W=y("");const u=async()=>{s(_,!0);const J=await q1(localStorage.token,e(W)).catch(p=>(Ve.error(`${p}`),null));J&&(Ve.success(r().t("Memory added successfully")),s(W,""),L(!1),P("save")),s(_,!1)};It(),qa(M,{size:"sm",get show(){return L()},set show(J){L(J)},children:(J,p)=>{var b=X1(),m=a(b),q=a(m),O=a(q,!0);t(q);var K=l(q,2),Z=a(K);Oa(Z,{className:"size-5"}),t(K),t(m);var h=l(m,2),k=a(h),U=a(k),E=a(U),se=a(E);Hn(se);var H=l(se,2),ne=a(H);t(H),t(E);var le=l(E,2),X=a(le),ue=a(X),w=l(ue);{var oe=ve=>{var Q=J1(),te=a(Q);$a(te,{}),t(Q),d(ve,Q)};D(w,ve=>{e(_)&&ve(oe)})}t(X),t(le),t(U),t(k),t(h),t(b),$((ve,Q,te,A)=>{v(O,ve),Be(se,"placeholder",Q),v(ne,` ${te??""}`),Ye(X,1,`px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full ${e(_)?" cursor-not-allowed":""}`),X.disabled=e(_),v(ue,`${A??""} `)},[()=>(r(),o(()=>r().t("Add Memory"))),()=>(r(),o(()=>r().t("Enter a detail about yourself for your LLMs to recall"))),()=>(r(),o(()=>r().t('Refer to yourself as "User" (e.g., "User is learning Spanish")'))),()=>(r(),o(()=>r().t("Add")))]),V("click",K,()=>{L(!1)}),aa(se,()=>e(W),ve=>s(W,ve)),V("submit",U,er(()=>{u()})),d(J,b)},$$slots:{default:!0},$$legacy:!0}),At(),n()}var ep=f('<div class="ml-2 self-center"><!></div>'),tp=f('<div><div class=" flex justify-between dark:text-gray-300 px-5 pt-4 pb-2"><div class=" text-lg font-medium self-center"> </div> <button class="self-center"><!></button></div> <div class="flex flex-col md:flex-row w-full px-5 pb-4 md:space-x-4 dark:text-gray-200"><div class=" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"><form class="flex flex-col w-full"><div><textarea class=" bg-transparent w-full text-sm rounded-xl p-3 outline outline-1 outline-gray-100 dark:outline-gray-800" rows="6" style="resize: vertical;"></textarea> <div class="text-xs text-gray-500"> </div></div> <div class="flex justify-end pt-1 text-sm font-medium"><button type="submit"> <!></button></div></form></div></div></div>');function ap(M,c){St(c,!1);const r=()=>Ce(_,"$i18n",i),[i,n]=Pt(),P=ha();let L=me(c,"show",12),ee=me(c,"memory",24,()=>({}));const _=Mt("i18n");let W=y(!1),u=y("");const J=()=>{s(u,ee().content)},p=async()=>{s(W,!0);const b=await Z1(localStorage.token,ee().id,e(u)).catch(m=>(Ve.error(`${m}`),null));b&&(Ve.success(r().t("Memory updated successfully")),P("save"),L(!1)),s(W,!1)};Kt(()=>We(L()),()=>{L()&&J()}),ca(),It(),qa(M,{size:"sm",get show(){return L()},set show(b){L(b)},children:(b,m)=>{var q=tp(),O=a(q),K=a(O),Z=a(K,!0);t(K);var h=l(K,2),k=a(h);Oa(k,{className:"size-5"}),t(h),t(O);var U=l(O,2),E=a(U),se=a(E),H=a(se),ne=a(H);Hn(ne);var le=l(ne,2),X=a(le);t(le),t(H);var ue=l(H,2),w=a(ue),oe=a(w),ve=l(oe);{var Q=te=>{var A=ep(),I=a(A);$a(I,{}),t(A),d(te,A)};D(ve,te=>{e(W)&&te(Q)})}t(w),t(ue),t(se),t(E),t(U),t(q),$((te,A,I,C)=>{v(Z,te),Be(ne,"placeholder",A),v(X,` ${I??""}`),Ye(w,1,`px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full ${e(W)?" cursor-not-allowed":""}`),w.disabled=e(W),v(oe,`${C??""} `)},[()=>(r(),o(()=>r().t("Edit Memory"))),()=>(r(),o(()=>r().t("Enter a detail about yourself for your LLMs to recall"))),()=>(r(),o(()=>r().t('Refer to yourself as "User" (e.g., "User is learning Spanish")'))),()=>(r(),o(()=>r().t("Update")))]),V("click",h,()=>{L(!1)}),aa(ne,()=>e(u),te=>s(u,te)),V("submit",se,er(()=>{p()})),d(b,q)},$$slots:{default:!0},$$legacy:!0}),At(),n()}var rp=f('<button class="self-center w-fit text-sm px-2 py-2 hover:bg-black/5 dark:hover:bg-white/5 rounded-xl"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 s-FoVA_WMOgxUD"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125" class="s-FoVA_WMOgxUD"></path></svg></button>'),sp=f('<button class="self-center w-fit text-sm px-2 py-2 hover:bg-black/5 dark:hover:bg-white/5 rounded-xl"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg></button>'),op=f('<tr class="border-b border-gray-50 dark:border-gray-850/30 items-center"><td class="px-3 py-1"><div class="line-clamp-1"> </div></td><td class=" px-3 py-1 hidden md:flex h-[2.5rem]"><div class="my-auto whitespace-nowrap"> </div></td><td class="px-3 py-1"><div class="flex justify-end w-full"><!> <!></div></td></tr>'),lp=f('<div class="text-left text-sm w-full mb-4 overflow-y-scroll"><div class="relative overflow-x-auto"><table class="w-full text-sm text-left text-gray-600 dark:text-gray-400 table-auto"><thead class="text-xs text-gray-700 uppercase bg-transparent dark:text-gray-200 border-b-2 border-gray-50 dark:border-gray-850/30"><tr><th scope="col" class="px-3 py-2"> </th><th scope="col" class="px-3 py-2 hidden md:flex"> </th><th scope="col" class="px-3 py-2 text-right"></th></tr></thead><tbody></tbody></table></div></div>'),np=f('<div class="text-center flex h-full text-sm w-full"><div class=" my-auto pb-10 px-4 w-full text-gray-500"> </div></div>'),ip=f('<div><div class=" flex justify-between dark:text-gray-300 px-5 pt-4 pb-1"><div class=" text-lg font-medium self-center"> </div> <button class="self-center"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg></button></div> <div class="flex flex-col w-full px-5 pb-5 dark:text-gray-200"><div class=" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6 h-[28rem] max-h-screen rounded-xl mb-4 mt-1"><!></div> <div class="flex text-sm font-medium gap-1.5"><button class=" px-3.5 py-1.5 font-medium hover:bg-black/5 dark:hover:bg-white/5 outline outline-1 outline-gray-100 dark:outline-gray-800 rounded-3xl"> </button> <button class=" px-3.5 py-1.5 font-medium text-red-500 hover:bg-black/5 dark:hover:bg-white/5 outline outline-1 outline-red-100 dark:outline-red-800 rounded-3xl"> </button></div></div></div>'),dp=f("<!> <!> <!> <!>",1);function vp(M,c){St(c,!1);const r=()=>Ce(P,"$i18n",i),[i,n]=Pt();ha();const P=Mt("i18n");Ya.extend(Gn);let L=me(c,"show",12,!1),ee=y([]),_=y(!0),W=y(!1),u=y(!1),J=y(null),p=y(!1),b=async()=>{await Y1(localStorage.token).catch(k=>(Ve.error(`${k}`),null))&&e(ee).length>0&&(Ve.success(r().t("Memory cleared successfully")),s(ee,[])),s(p,!1)};Kt(()=>(We(L()),e(ee),e(_),Ar),()=>{L()&&e(ee).length===0&&e(_)&&(async()=>(s(ee,await Ar(localStorage.token)),s(_,!1)))()}),ca(),It();var m=dp(),q=Ie(m);qa(q,{size:"lg",get show(){return L()},set show(h){L(h)},children:(h,k)=>{var U=ip(),E=a(U),se=a(E),H=a(se,!0);t(se);var ne=l(se,2);t(E);var le=l(E,2),X=a(le),ue=a(X);{var w=C=>{var j=lp(),B=a(j),S=a(B),g=a(S),x=a(g),z=a(x),ie=a(z,!0);t(z);var xe=l(z),he=a(xe,!0);t(xe),sr(),t(x),t(g);var pe=l(g);Ht(pe,5,()=>e(ee),wa,(be,Ne)=>{var fe=op(),ae=a(fe),ge=a(ae),ke=a(ge,!0);t(ge),t(ae);var R=l(ae),Oe=a(R),He=a(Oe,!0);t(Oe),t(R);var Ue=l(R),de=a(Ue),N=a(de);Zt(N,{content:"Edit",children:($e,Te)=>{var Le=rp();V("click",Le,()=>{s(J,e(Ne)),s(u,!0)}),d($e,Le)},$$slots:{default:!0}});var Se=l(N,2);Zt(Se,{content:"Delete",children:($e,Te)=>{var Le=sp();V("click",Le,async()=>{await G1(localStorage.token,e(Ne).id).catch(re=>(Ve.error(`${re}`),null))&&(Ve.success(r().t("Memory deleted successfully")),s(ee,await Ar(localStorage.token)))}),d($e,Le)},$$slots:{default:!0}}),t(de),t(Ue),t(fe),$($e=>{v(ke,(e(Ne),o(()=>e(Ne).content))),v(He,$e)},[()=>(We(Ya),e(Ne),o(()=>Ya(e(Ne).updated_at*1e3).format("LLL")))]),d(be,fe)}),t(pe),t(S),t(B),t(j),$((be,Ne)=>{v(ie,be),v(he,Ne)},[()=>(r(),o(()=>r().t("Name"))),()=>(r(),o(()=>r().t("Last Modified")))]),d(C,j)},oe=C=>{var j=np(),B=a(j),S=a(B,!0);t(B),t(j),$(g=>v(S,g),[()=>(r(),o(()=>r().t("Memories accessible by LLMs will be shown here.")))]),d(C,j)};D(ue,C=>{e(ee),o(()=>e(ee).length>0)?C(w):C(oe,!1)})}t(X);var ve=l(X,2),Q=a(ve),te=a(Q,!0);t(Q);var A=l(Q,2),I=a(A,!0);t(A),t(ve),t(le),t(U),$((C,j,B)=>{v(H,C),v(te,j),v(I,B)},[()=>(r(),o(()=>r().t("Memory"))),()=>(r(),o(()=>r().t("Add Memory"))),()=>(r(),o(()=>r().t("Clear memory")))]),V("click",ne,()=>{L(!1)}),V("click",Q,()=>{s(W,!0)}),V("click",A,()=>{e(ee).length>0?s(p,!0):Ve.error(r().t("No memories to clear"))}),d(h,U)},$$slots:{default:!0},$$legacy:!0});var O=l(q,2);{let h=Ze(()=>(r(),o(()=>r().t("Clear Memory")))),k=Ze(()=>(r(),o(()=>r().t("Are you sure you want to clear all memories? This action cannot be undone."))));cr(O,{get title(){return e(h)},get message(){return e(k)},get show(){return e(p)},$$events:{confirm:b,cancel:()=>{s(p,!1)}}})}var K=l(O,2);Q1(K,{get show(){return e(W)},set show(h){s(W,h)},$$events:{save:async()=>{s(ee,await Ar(localStorage.token))}},$$legacy:!0});var Z=l(K,2);ap(Z,{get memory(){return e(J)},get show(){return e(u)},set show(h){s(u,h)},$$events:{save:async()=>{s(ee,await Ar(localStorage.token))}},$$legacy:!0}),d(M,m),At(),n()}var cp=f('<div class="text-sm font-medium"> <span class=" text-xs text-gray-500"> </span></div>'),up=f('<!> <form id="tab-personalization" class="flex flex-col h-full justify-between space-y-3 text-sm"><div class="py-1 overflow-y-scroll max-h-[28rem] md:max-h-full"><div><div class="flex items-center justify-between mb-1"><!> <div><!></div></div></div> <div class="text-xs text-gray-600 dark:text-gray-400"><div> </div></div> <div class="mt-3 mb-1 ml-1"><button type="button" class=" px-3.5 py-1.5 font-medium hover:bg-black/5 dark:hover:bg-white/5 outline outline-1 outline-gray-300 dark:outline-gray-800 rounded-3xl"> </button></div></div> <div class="flex justify-end text-sm font-medium"><button class="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full" type="submit"> </button></div></form>',1);function fp(M,c){St(c,!1);const r=()=>Ce(ta,"$settings",n),i=()=>Ce(ee,"$i18n",n),[n,P]=Pt(),L=ha(),ee=Mt("i18n");let _=me(c,"saveSettings",8),W=y(!1),u=y(!1);oa(async()=>{var w;s(u,((w=r())==null?void 0:w.memory)??!1)}),It();var J=up(),p=Ie(J);vp(p,{get show(){return e(W)},set show(w){s(W,w)},$$legacy:!0});var b=l(p,2),m=a(b),q=a(m),O=a(q),K=a(O);{let w=Ze(()=>(i(),o(()=>i().t("This is an experimental feature, it may not function as expected and is subject to change at any time."))));Zt(K,{get content(){return e(w)},children:(oe,ve)=>{var Q=cp(),te=a(Q),A=l(te),I=a(A);t(A),t(Q),$((C,j)=>{v(te,`${C??""} `),v(I,`(${j??""})`)},[()=>(i(),o(()=>i().t("Memory"))),()=>(i(),o(()=>i().t("Experimental")))]),d(oe,Q)},$$slots:{default:!0}})}var Z=l(K,2),h=a(Z);xt(h,{get state(){return e(u)},set state(w){s(u,w)},$$events:{change:async()=>{_()({memory:e(u)})}},$$legacy:!0}),t(Z),t(O),t(q);var k=l(q,2),U=a(k),E=a(U,!0);t(U),t(k);var se=l(k,2),H=a(se),ne=a(H,!0);t(H),t(se),t(m);var le=l(m,2),X=a(le),ue=a(X,!0);t(X),t(le),t(b),$((w,oe,ve)=>{v(E,w),v(ne,oe),v(ue,ve)},[()=>(i(),o(()=>i().t("You can personalize your interactions with LLMs by adding memories through the 'Manage' button below, making them more helpful and tailored to you."))),()=>(i(),o(()=>i().t("Manage"))),()=>(i(),o(()=>i().t("Save")))]),V("click",H,()=>{s(W,!0)}),V("submit",b,er(()=>{L("save")})),d(M,J),At(),P()}var gp=f('<div class="absolute top-0 bottom-0 left-0 right-0 opacity-60 bg-white dark:bg-gray-900 z-10"></div>'),pp=f('<!> <div class="flex w-full gap-2"><div class="flex-1 relative"><input autocomplete="off"/></div></div>',1),mp=f('<button class="self-center p-1 bg-transparent hover:bg-gray-100 dark:bg-gray-900 dark:hover:bg-gray-850 rounded-lg transition" type="button"><!></button>'),hp=f('<!> <!> <div class="flex w-full gap-2 items-center"><!> <div class="flex gap-1"><!></div></div>',1);function _p(M,c){St(c,!1);const r=()=>Ce(L,"$i18n",n),i=()=>Ce(ta,"$settings",n),[n,P]=Pt(),L=Mt("i18n");let ee=me(c,"onDelete",8,()=>{}),_=me(c,"onSubmit",8,()=>{}),W=me(c,"pipeline",8,!1),u=me(c,"url",12,""),J=me(c,"key",12,""),p=me(c,"config",28,()=>({})),b=y(!1),m=y(!1);It();var q=hp(),O=Ie(q);{let E=Ze(()=>({url:u(),key:J(),config:p()}));ni(O,{edit:!0,direct:!0,get connection(){return e(E)},onDelete:()=>{s(m,!0)},onSubmit:se=>{u(se.url),J(se.key),p(se.config),_()(se)},get show(){return e(b)},set show(se){s(b,se)},$$legacy:!0})}var K=l(O,2);cr(K,{get show(){return e(m)},set show(E){s(m,E)},$$events:{confirm:()=>{ee()(),s(b,!1)}},$$legacy:!0});var Z=l(K,2),h=a(Z);{let E=Ze(()=>(r(),We(u()),o(()=>r().t('WebUI will make requests to "{{url}}/chat/completions"',{url:u()}))));Zt(h,{className:"w-full relative",get content(){return e(E)},placement:"top-start",children:(se,H)=>{var ne=pp(),le=Ie(ne);{var X=ve=>{var Q=gp();d(ve,Q)};D(le,ve=>{We(p()),o(()=>{var Q;return!(((Q=p())==null?void 0:Q.enable)??!0)})&&ve(X)})}var ue=l(le,2),w=a(ue),oe=a(w);sa(oe),t(w),t(ue),$(ve=>{Ye(oe,1,(i(),We(W()),o(()=>{var Q;return`w-full bg-transparent ${((Q=i())==null?void 0:Q.highContrastMode)??!1?"":"outline-hidden"} ${W()?"pr-8":""}`}))),Be(oe,"placeholder",ve)},[()=>(r(),o(()=>r().t("API Base URL")))]),aa(oe,u),d(se,ne)},$$slots:{default:!0}})}var k=l(h,2),U=a(k);{let E=Ze(()=>(r(),o(()=>r().t("Configure"))));Zt(U,{get content(){return e(E)},className:"self-start",children:(se,H)=>{var ne=mp(),le=a(ne);oi(le,{}),t(ne),$(X=>Be(ne,"aria-label",X),[()=>(r(),o(()=>r().t("Open modal to configure connection")))]),V("click",ne,()=>{s(b,!0)}),d(se,ne)},$$slots:{default:!0}})}t(k),t(Z),d(M,q),At(),P()}var xp=f('<button class="px-1" type="button"><!></button>'),bp=f('<div><div class="pr-1.5"><div><div class="flex justify-between items-center mb-0.5"><div class="font-medium"> </div> <!></div> <div class="flex flex-col gap-1.5"></div></div> <div class="my-1.5"><div> <br/> </div></div></div></div>'),yp=f('<div class="flex h-full justify-center"><div class="my-auto"><!></div></div>'),wp=f('<!> <form id="tab-connections" class="flex flex-col h-full justify-between text-sm"><div class=" overflow-y-scroll scrollbar-hidden h-full"><!></div> <div class="flex justify-end pt-3 text-sm font-medium"><button class="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full" type="submit"> </button></div></form>',1);function $p(M,c){St(c,!1);const r=()=>Ce(ta,"$settings",n),i=()=>Ce(L,"$i18n",n),[n,P]=Pt();ha();const L=Mt("i18n");let ee=me(c,"saveSettings",8),_=y(null),W=y(!1);const u=async E=>{e(_).OPENAI_API_BASE_URLS.push(E.url),e(_).OPENAI_API_KEYS.push(E.key),da(_,e(_).OPENAI_API_CONFIGS[e(_).OPENAI_API_BASE_URLS.length-1]=E.config),await J()},J=async()=>{if(da(_,e(_).OPENAI_API_BASE_URLS=e(_).OPENAI_API_BASE_URLS.map(E=>E.replace(/\/$/,""))),e(_).OPENAI_API_KEYS.length!==e(_).OPENAI_API_BASE_URLS.length&&(e(_).OPENAI_API_KEYS.length>e(_).OPENAI_API_BASE_URLS.length&&da(_,e(_).OPENAI_API_KEYS=e(_).OPENAI_API_KEYS.slice(0,e(_).OPENAI_API_BASE_URLS.length)),e(_).OPENAI_API_KEYS.length<e(_).OPENAI_API_BASE_URLS.length)){const E=e(_).OPENAI_API_BASE_URLS.length-e(_).OPENAI_API_KEYS.length;for(let se=0;se<E;se++)e(_).OPENAI_API_KEYS.push("")}await ee()({directConnections:e(_)})};oa(async()=>{var E;s(_,((E=r())==null?void 0:E.directConnections)??{OPENAI_API_BASE_URLS:[],OPENAI_API_KEYS:[],OPENAI_API_CONFIGS:{}})}),It();var p=wp(),b=Ie(p);ni(b,{direct:!0,onSubmit:u,get show(){return e(W)},set show(E){s(W,E)},$$legacy:!0});var m=l(b,2),q=a(m),O=a(q);{var K=E=>{var se=bp(),H=a(se),ne=a(H),le=a(ne),X=a(le),ue=a(X,!0);t(X);var w=l(X,2);{let I=Ze(()=>(i(),o(()=>i().t("Add Connection"))));Zt(w,{get content(){return e(I)},children:(C,j)=>{var B=xp(),S=a(B);ur(S,{}),t(B),V("click",B,()=>{s(W,!0)}),d(C,B)},$$slots:{default:!0}})}t(le);var oe=l(le,2);Ht(oe,5,()=>(e(_),o(()=>{var I;return((I=e(_))==null?void 0:I.OPENAI_API_BASE_URLS)??[]})),wa,(I,C,j)=>{_p(I,{onSubmit:()=>{J()},onDelete:()=>{da(_,e(_).OPENAI_API_BASE_URLS=e(_).OPENAI_API_BASE_URLS.filter((S,g)=>j!==g)),da(_,e(_).OPENAI_API_KEYS=e(_).OPENAI_API_KEYS.filter((S,g)=>j!==g));let B={};e(_).OPENAI_API_BASE_URLS.forEach((S,g)=>{B[g]=e(_).OPENAI_API_CONFIGS[g<j?g:g+1]}),da(_,e(_).OPENAI_API_CONFIGS=B)},get url(){return(e(_),o(()=>{var B;return((B=e(_))==null?void 0:B.OPENAI_API_BASE_URLS)??[]}))[j]},set url(B){(e(_),o(()=>{var S;return((S=e(_))==null?void 0:S.OPENAI_API_BASE_URLS)??[]}))[j]=B,La(()=>e(_))},get key(){return e(_).OPENAI_API_KEYS[j]},set key(B){da(_,e(_).OPENAI_API_KEYS[j]=B)},get config(){return e(_).OPENAI_API_CONFIGS[j]},set config(B){da(_,e(_).OPENAI_API_CONFIGS[j]=B)},$$legacy:!0})}),t(oe),t(ne);var ve=l(ne,2),Q=a(ve),te=a(Q),A=l(te,2);t(Q),t(ve),t(H),t(se),$((I,C,j)=>{v(ue,I),Ye(Q,1,`text-xs ${r(),o(()=>{var B;return((B=r())==null?void 0:B.highContrastMode)??!1?"text-gray-800 dark:text-gray-100":"text-gray-500"})??""}`),v(te,`${C??""} `),v(A,` ${j??""}`)},[()=>(i(),o(()=>i().t("Manage Direct Connections"))),()=>(i(),o(()=>i().t("Connect to your own OpenAI compatible API endpoints."))),()=>(i(),o(()=>i().t("CORS must be properly configured by the provider to allow requests from Open WebUI.")))]),d(E,se)},Z=E=>{var se=yp(),H=a(se),ne=a(H);$a(ne,{className:"size-6"}),t(H),t(se),d(E,se)};D(O,E=>{e(_)!==null?E(K):E(Z,!1)})}t(q);var h=l(q,2),k=a(h),U=a(k,!0);t(k),t(h),t(m),$(E=>v(U,E),[()=>(i(),o(()=>i().t("Save")))]),V("submit",m,er(()=>{J()})),d(M,p),At(),P()}var kp=f('<button class="px-1" type="button"><!></button>'),Cp=f('<div><div class="pr-1.5"><div><div class="flex justify-between items-center mb-0.5"><div class="font-medium"> </div> <!></div> <div class="flex flex-col gap-1.5"></div></div> <div class="my-1.5"><div> <br/> </div></div> <div class=" text-xs text-gray-600 dark:text-gray-300 mb-2"><a class="underline" href="https://github.com/open-webui/openapi-servers" target="_blank"> </a></div></div></div>'),Sp=f('<div class="flex h-full justify-center"><div class="my-auto"><!></div></div>'),Ap=f('<!> <form id="tab-tools" class="flex flex-col h-full justify-between text-sm"><div class=" overflow-y-scroll scrollbar-hidden h-full"><!></div> <div class="flex justify-end pt-3 text-sm font-medium"><button class="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full" type="submit"> </button></div></form>',1);function Ip(M,c){St(c,!1);const r=()=>Ce(ta,"$settings",n),i=()=>Ce(L,"$i18n",n),[n,P]=Pt();ha();const L=Mt("i18n");let ee=me(c,"saveSettings",8),_=y(null),W=y(!1);const u=async E=>{s(_,[...e(_),E]),await J()},J=async()=>{var se;await ee()({toolServers:e(_)});let E=await Kn(((se=r())==null?void 0:se.toolServers)??[]);E=E.filter(H=>H.error?(Ve.error(i().t("Failed to connect to {{URL}} OpenAPI tool server",{URL:H==null?void 0:H.url})),!1):!0),Jn.set(E)};oa(async()=>{var E;s(_,((E=r())==null?void 0:E.toolServers)??[])}),It();var p=Ap(),b=Ie(p);Uv(b,{onSubmit:u,direct:!0,get show(){return e(W)},set show(E){s(W,E)},$$legacy:!0});var m=l(b,2),q=a(m),O=a(q);{var K=E=>{var se=Cp(),H=a(se),ne=a(H),le=a(ne),X=a(le),ue=a(X,!0);t(X);var w=l(X,2);{let B=Ze(()=>(i(),o(()=>i().t("Add Connection"))));Zt(w,{get content(){return e(B)},children:(S,g)=>{var x=kp(),z=a(x);ur(z,{}),t(x),$(ie=>Be(x,"aria-label",ie),[()=>(i(),o(()=>i().t("Add Connection")))]),V("click",x,()=>{s(W,!0)}),d(S,x)},$$slots:{default:!0}})}t(le);var oe=l(le,2);Ht(oe,5,()=>e(_),wa,(B,S,g)=>{Wv(B,{direct:!0,onSubmit:()=>{J()},onDelete:()=>{s(_,e(_).filter((x,z)=>z!==g)),J()},get connection(){return e(_)[g]},set connection(x){e(_)[g]=x,La(()=>e(_))},$$legacy:!0})}),t(oe),t(ne);var ve=l(ne,2),Q=a(ve),te=a(Q),A=l(te,2);t(Q),t(ve);var I=l(ve,2),C=a(I),j=a(C,!0);t(C),t(I),t(H),t(se),$((B,S,g,x)=>{v(ue,B),Ye(Q,1,(r(),o(()=>{var z;return`text-xs 
								${((z=r())==null?void 0:z.highContrastMode)??!1?"text-gray-800 dark:text-gray-100":"text-gray-500"}`}))),v(te,`${S??""} `),v(A,` ${g??""}`),v(j,x)},[()=>(i(),o(()=>i().t("Manage Tool Servers"))),()=>(i(),o(()=>i().t("Connect to your own OpenAPI compatible external tool servers."))),()=>(i(),o(()=>i().t("CORS must be properly configured by the provider to allow requests from Open WebUI."))),()=>(i(),o(()=>i().t("Learn more about OpenAPI tool servers.")))]),d(E,se)},Z=E=>{var se=Sp(),H=a(se),ne=a(H);$a(ne,{className:"size-6"}),t(H),t(se),d(E,se)};D(O,E=>{e(_)!==null?E(K):E(Z,!1)})}t(q);var h=l(q,2),k=a(h),U=a(k,!0);t(k),t(h),t(m),$(E=>v(U,E),[()=>(i(),o(()=>i().t("Save")))]),V("submit",m,er(()=>{J()})),d(M,p),At(),P()}var Ep=ua('<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M4 6V12C4 12 4 15 11 15C18 15 18 12 18 12V6" stroke-linecap="round" stroke-linejoin="round"></path><path d="M11 3C18 3 18 6 18 6C18 6 18 9 11 9C4 9 4 6 4 6C4 6 4 3 11 3Z" stroke-linecap="round" stroke-linejoin="round"></path><path d="M11 21C4 21 4 18 4 18V12" stroke-linecap="round" stroke-linejoin="round"></path><path d="M19 21C20.1046 21 21 20.1046 21 19C21 17.8954 20.1046 17 19 17C18.6357 17 18.2942 17.0974 18 17.2676C17.4022 17.6134 17 18.2597 17 19C17 19.7403 17.4022 20.3866 18 20.7324C18.2942 20.9026 18.6357 21 19 21Z" stroke-linecap="round" stroke-linejoin="round"></path><path d="M19 22C20.6569 22 22 20.6569 22 19C22 17.3431 20.6569 16 19 16C17.3431 16 16 17.3431 16 19C16 20.6569 17.3431 22 19 22Z" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="0.3 2"></path></svg>');function Pp(M,c){let r=me(c,"className",8,"w-4 h-4"),i=me(c,"strokeWidth",8,"1.5");var n=Ep();$(()=>{Ye(n,0,Ua(r())),Be(n,"stroke-width",i())}),d(M,n)}var Lp=ua('<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke-linecap="round" stroke-linejoin="round"></path><path d="M19.6224 10.3954L18.5247 7.7448L20 6L18 4L16.2647 5.48295L13.5578 4.36974L12.9353 2H10.981L10.3491 4.40113L7.70441 5.51596L6 4L4 6L5.45337 7.78885L4.3725 10.4463L2 11V13L4.40111 13.6555L5.51575 16.2997L4 18L6 20L7.79116 18.5403L10.397 19.6123L11 22H13L13.6045 19.6132L16.2551 18.5155C16.6969 18.8313 18 20 18 20L20 18L18.5159 16.2494L19.6139 13.598L21.9999 12.9772L22 11L19.6224 10.3954Z" stroke-linecap="round" stroke-linejoin="round"></path></svg>');function Mp(M,c){let r=me(c,"className",8,"w-4 h-4"),i=me(c,"strokeWidth",8,"1.5");var n=Lp();$(()=>{Ye(n,0,Ua(r())),Be(n,"stroke-width",i())}),d(M,n)}var jp=ua('<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2Z" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4.271 18.3457C4.271 18.3457 6.50002 15.5 12 15.5C17.5 15.5 19.7291 18.3457 19.7291 18.3457" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 12C13.6569 12 15 10.6569 15 9C15 7.34315 13.6569 6 12 6C10.3431 6 9 7.34315 9 9C9 10.6569 10.3431 12 12 12Z" stroke-linecap="round" stroke-linejoin="round"></path></svg>');function Np(M,c){let r=me(c,"className",8,"w-4 h-4"),i=me(c,"strokeWidth",8,"1.5");var n=jp();$(()=>{Ye(n,0,Ua(r())),Be(n,"stroke-width",i())}),d(M,n)}var Tp=ua('<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M1 13.8571V10.1429C1 9.03829 1.89543 8.14286 3 8.14286H5.9C6.09569 8.14286 6.28708 8.08544 6.45046 7.97772L12.4495 4.02228C13.1144 3.5839 14 4.06075 14 4.85714V19.1429C14 19.9392 13.1144 20.4161 12.4495 19.9777L6.45046 16.0223C6.28708 15.9146 6.09569 15.8571 5.9 15.8571H3C1.89543 15.8571 1 14.9617 1 13.8571Z"></path><path d="M17.5 7.5C17.5 7.5 19 9 19 11.5C19 14 17.5 15.5 17.5 15.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M20.5 4.5C20.5 4.5 23 7 23 11.5C23 16 20.5 18.5 20.5 18.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>');function Dp(M,c){let r=me(c,"className",8,"w-4 h-4"),i=me(c,"strokeWidth",8,"1.5");var n=Tp();$(()=>{Ye(n,0,Ua(r())),Be(n,"stroke-width",i())}),d(M,n)}var Bp=ua('<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 11.5V16.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 7.51L12.01 7.49889" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke-linecap="round" stroke-linejoin="round"></path></svg>');function zp(M,c){let r=me(c,"className",8,"w-4 h-4"),i=me(c,"strokeWidth",8,"1.5");var n=Bp();$(()=>{Ye(n,0,Ua(r())),Be(n,"stroke-width",i())}),d(M,n)}var Op=ua('<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2Z" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16 8L16 10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M8 8L8 10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9 16C9 16 10 17 12 17C14 17 15 16 15 16" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 8L12 13L11 13" stroke-linecap="round" stroke-linejoin="round"></path></svg>');function Up(M,c){let r=me(c,"className",8,"w-4 h-4"),i=me(c,"strokeWidth",8,"1.5");var n=Op();$(()=>{Ye(n,0,Ua(r())),Be(n,"stroke-width",i())}),d(M,n)}var Wp=ua('<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M19 8C20.6569 8 22 6.65685 22 5C22 3.34315 20.6569 2 19 2C17.3431 2 16 3.34315 16 5C16 6.65685 17.3431 8 19 8Z" stroke-linecap="round" stroke-linejoin="round"></path><path d="M21 12V15C21 18.3137 18.3137 21 15 21H9C5.68629 21 3 18.3137 3 15V9C3 5.68629 5.68629 3 9 3H12" stroke-linecap="round" stroke-linejoin="round"></path></svg>');function Fp(M,c){let r=me(c,"className",8,"w-4 h-4"),i=me(c,"strokeWidth",8,"1.5");var n=Wp();$(()=>{Ye(n,0,Ua(r())),Be(n,"stroke-width",i())}),d(M,n)}var Hp=ua('<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M2 20V19C2 15.134 5.13401 12 9 12V12" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15.8038 12.3135C16.4456 11.6088 17.5544 11.6088 18.1962 12.3135V12.3135C18.5206 12.6697 18.9868 12.8628 19.468 12.8403V12.8403C20.4201 12.7958 21.2042 13.5799 21.1597 14.532V14.532C21.1372 15.0132 21.3303 15.4794 21.6865 15.8038V15.8038C22.3912 16.4456 22.3912 17.5544 21.6865 18.1962V18.1962C21.3303 18.5206 21.1372 18.9868 21.1597 19.468V19.468C21.2042 20.4201 20.4201 21.2042 19.468 21.1597V21.1597C18.9868 21.1372 18.5206 21.3303 18.1962 21.6865V21.6865C17.5544 22.3912 16.4456 22.3912 15.8038 21.6865V21.6865C15.4794 21.3303 15.0132 21.1372 14.532 21.1597V21.1597C13.5799 21.2042 12.7958 20.4201 12.8403 19.468V19.468C12.8628 18.9868 12.6697 18.5206 12.3135 18.1962V18.1962C11.6088 17.5544 11.6088 16.4456 12.3135 15.8038V15.8038C12.6697 15.4794 12.8628 15.0132 12.8403 14.532V14.532C12.7958 13.5799 13.5799 12.7958 14.532 12.8403V12.8403C15.0132 12.8628 15.4794 12.6697 15.8038 12.3135V12.3135Z"></path><path d="M15.3636 17L16.4546 18.0909L18.6364 15.9091" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9 12C11.2091 12 13 10.2091 13 8C13 5.79086 11.2091 4 9 4C6.79086 4 5 5.79086 5 8C5 10.2091 6.79086 12 9 12Z" stroke-linecap="round" stroke-linejoin="round"></path></svg>');function Rp(M,c){let r=me(c,"className",8,"w-4 h-4"),i=me(c,"strokeWidth",8,"1.5");var n=Hp();$(()=>{Ye(n,0,Ua(r())),Be(n,"stroke-width",i())}),d(M,n)}var Vp=f('<button role="tab" aria-controls="tab-general"><div class=" self-center mr-2"><!></div> <div class=" self-center"> </div></button>'),Kp=f('<button role="tab" aria-controls="tab-interface"><div class=" self-center mr-2"><!></div> <div class=" self-center"> </div></button>'),qp=f('<button role="tab" aria-controls="tab-connections"><div class=" self-center mr-2"><!></div> <div class=" self-center"> </div></button>'),Zp=f('<button role="tab" aria-controls="tab-tools"><div class=" self-center mr-2"><!></div> <div class=" self-center"> </div></button>'),Gp=f('<button role="tab" aria-controls="tab-personalization"><div class=" self-center mr-2"><!></div> <div class=" self-center"> </div></button>'),Yp=f('<button role="tab" aria-controls="tab-audio"><div class=" self-center mr-2"><!></div> <div class=" self-center"> </div></button>'),Jp=f('<button role="tab" aria-controls="tab-data-controls"><div class=" self-center mr-2"><!></div> <div class=" self-center"> </div></button>'),Xp=f('<button role="tab" aria-controls="tab-account"><div class=" self-center mr-2"><!></div> <div class=" self-center"> </div></button>'),Qp=f('<button role="tab" aria-controls="tab-about"><div class=" self-center mr-2"><!></div> <div class=" self-center"> </div></button>'),em=f('<div class="text-center text-gray-500 mt-4"> </div>'),tm=f('<a href="/admin/settings"><div class=" self-center mr-2"><!></div> <div class=" self-center"> </div></a>'),am=f('<div class="text-gray-700 dark:text-gray-100 mx-1"><div class=" flex justify-between dark:text-gray-300 px-4 md:px-4.5 pt-4.5 pb-0.5 md:pb-2.5"><div class=" text-lg font-medium self-center"> </div> <button class="self-center"><!></button></div> <div class="flex flex-col md:flex-row w-full pt-1 pb-4"><div role="tablist" id="settings-tabs-container" class="tabs flex flex-row overflow-x-auto gap-2.5 mx-3 md:pr-4 md:gap-1 md:flex-col flex-1 md:flex-none md:w-50 md:min-h-[42rem] md:max-h-[42rem] dark:text-gray-200 text-sm text-left mb-1 md:mb-0 -translate-y-1 svelte-12km1ip"><div class="hidden md:flex w-full rounded-full px-2.5 gap-2 bg-gray-100/80 dark:bg-gray-850/80 backdrop-blur-2xl my-1 mb-1.5" id="settings-search"><div class="self-center rounded-l-xl bg-transparent"><!></div> <label class="sr-only" for="search-input-settings-modal"> </label> <input id="search-input-settings-modal"/></div> <!> <!></div> <div class="flex-1 px-3.5 md:pl-0 md:pr-4.5 md:min-h-[42rem] max-h-[42rem]"><!></div></div></div>');function rm(M,c){St(c,!1);const r=()=>Ce(Ma,"$config",L),i=()=>Ce(za,"$user",L),n=()=>Ce(ta,"$settings",L),P=()=>Ce(_,"$i18n",L),[L,ee]=Pt(),_=Mt("i18n");let W=me(c,"show",12,!1);const u=[{id:"general",title:"General",keywords:["advancedparams","advancedparameters","advanced params","advanced parameters","configuration","defaultparameters","default parameters","defaultsettings","default settings","general","keepalive","keep alive","languages","notifications","requestmode","request mode","systemparameters","system parameters","systemprompt","system prompt","systemsettings","system settings","theme","translate","webuisettings","webui settings"]},{id:"interface",title:"Interface",keywords:["allow user location","allow voice interruption in call","allowuserlocation","allowvoiceinterruptionincall","always collapse codeblocks","always collapse code blocks","always expand details","always on web search","always play notification sound","alwayscollapsecodeblocks","alwaysexpanddetails","alwaysonwebsearch","alwaysplaynotificationsound","android","auto chat tags","auto copy response to clipboard","auto title","autochattags","autocopyresponsetoclipboard","autotitle","beta","call","chat background image","chat bubble ui","chat direction","chat tags autogen","chat tags autogeneration","chat ui","chatbackgroundimage","chatbubbleui","chatdirection","chat tags autogeneration","chattagsautogeneration","chatui","copy formatted text","copyformattedtext","default model","defaultmodel","design","detect artifacts automatically","detectartifactsautomatically","display emoji in call","display username","displayemojiincall","displayusername","enter key behavior","enterkeybehavior","expand mode","expandmode","file","followup autogeneration","followupautogeneration","fullscreen","fullwidthmode","full width mode","haptic feedback","hapticfeedback","high contrast mode","highcontrastmode","iframe sandbox allow forms","iframe sandbox allow same origin","iframesandboxallowforms","iframesandboxallowsameorigin","imagecompression","image compression","imagemaxcompressionsize","image max compression size","interface customization","interface options","interfacecustomization","interfaceoptions","landing page mode","landingpagemode","layout","left to right","left-to-right","lefttoright","ltr","paste large text as file","pastelargetextasfile","reset background","resetbackground","response auto copy","responseautocopy","rich text input for chat","richtextinputforchat","right to left","right-to-left","righttoleft","rtl","scroll behavior","scroll on branch change","scrollbehavior","scrollonbranchchange","select model","selectmodel","settings","show username","showusername","stream large chunks","streamlargechunks","stylized pdf export","stylizedpdfexport","title autogeneration","titleautogeneration","toast notifications for new updates","toastnotificationsfornewupdates","upload background","uploadbackground","user interface","user location access","userinterface","userlocationaccess","vibration","voice control","voicecontrol","widescreen mode","widescreenmode","whatsnew","whats new","websearchinchat","web search in chat"]},{id:"connections",title:"Connections",keywords:["addconnection","add connection","manageconnections","manage connections","manage direct connections","managedirectconnections","settings"]},{id:"tools",title:"External Tools",keywords:["addconnection","add connection","managetools","manage tools","manage tool servers","managetoolservers","settings"]},{id:"personalization",title:"Personalization",keywords:["account preferences","account settings","accountpreferences","accountsettings","custom settings","customsettings","experimental","memories","memory","personalization","personalize","personal settings","personalsettings","profile","user preferences","userpreferences"]},{id:"audio",title:"Audio",keywords:["audio config","audio control","audio features","audio input","audio output","audio playback","audio voice","audioconfig","audiocontrol","audiofeatures","audioinput","audiooutput","audioplayback","audiovoice","auto playback response","autoplaybackresponse","auto transcribe","autotranscribe","instant auto send after voice transcription","instantautosendaftervoicetranscription","language","non local voices","nonlocalvoices","save settings","savesettings","set voice","setvoice","sound settings","soundsettings","speech config","speech mode","speech playback speed","speech rate","speech recognition","speech settings","speech speed","speech synthesis","speech to text engine","speechconfig","speechmode","speechplaybackspeed","speechrate","speechrecognition","speechsettings","speechspeed","speechsynthesis","speechtotextengine","speedch playback rate","speedchplaybackrate","stt settings","sttsettings","text to speech engine","text to speech","textospeechengine","texttospeech","texttospeechvoice","text to speech voice","voice control","voice modes","voice options","voice playback","voice recognition","voice speed","voicecontrol","voicemodes","voiceoptions","voiceplayback","voicerecognition","voicespeed","volume"]},{id:"data_controls",title:"Data Controls",keywords:["archive all chats","archive chats","archiveallchats","archivechats","archived chats","archivedchats","chat activity","chat history","chat settings","chatactivity","chathistory","chatsettings","conversation activity","conversation history","conversationactivity","conversationhistory","conversations","convos","delete all chats","delete chats","deleteallchats","deletechats","export chats","exportchats","import chats","importchats","message activity","message archive","message history","messagearchive","messagehistory"]},{id:"account",title:"Account",keywords:["account preferences","account settings","accountpreferences","accountsettings","api keys","apikeys","change password","changepassword","jwt token","jwttoken","login","new password","newpassword","notification webhook url","notificationwebhookurl","personal settings","personalsettings","privacy settings","privacysettings","profileavatar","profile avatar","profile details","profile image","profile picture","profiledetails","profileimage","profilepicture","security settings","securitysettings","update account","update password","updateaccount","updatepassword","user account","user data","user preferences","user profile","useraccount","userdata","username","userpreferences","userprofile","webhook url","webhookurl"]},{id:"about",title:"About",keywords:["about app","about me","about open webui","about page","about us","aboutapp","aboutme","aboutopenwebui","aboutpage","aboutus","check for updates","checkforupdates","contact","copyright","details","discord","documentation","github","help","information","license","redistributions","release","see whats new","seewhatsnew","settings","software info","softwareinfo","support","terms and conditions","terms of use","termsandconditions","termsofuse","timothy jae ryang baek","timothy j baek","timothyjaeryangbaek","timothyjbaek","twitter","update info","updateinfo","version info","versioninfo"]}];let J=[],p=y([]),b=y(""),m;const q=()=>u.filter(H=>{var ne,le,X,ue,w,oe,ve,Q,te,A,I,C,j,B,S,g,x;return H.id==="connections"?(le=(ne=r())==null?void 0:ne.features)==null?void 0:le.enable_direct_connections:H.id==="tools"?((X=i())==null?void 0:X.role)==="admin"||((ue=i())==null?void 0:ue.role)==="user"&&((ve=(oe=(w=i())==null?void 0:w.permissions)==null?void 0:oe.features)==null?void 0:ve.direct_tool_servers):H.id==="interface"?((Q=i())==null?void 0:Q.role)==="admin"||(((I=(A=(te=i())==null?void 0:te.permissions)==null?void 0:A.settings)==null?void 0:I.interface)??!0):H.id==="personalization"?((j=(C=r())==null?void 0:C.features)==null?void 0:j.enable_memories)&&(((B=i())==null?void 0:B.role)==="admin"||(((x=(g=(S=i())==null?void 0:S.permissions)==null?void 0:g.features)==null?void 0:x.memories)??!0)):!0}),O=()=>{s(p,J.filter(H=>e(b)===""||H.title.toLowerCase().includes(e(b).toLowerCase().trim())||H.keywords.some(ne=>ne.includes(e(b).toLowerCase().trim()))).map(H=>H.id)),e(p).length>0&&!e(p).includes(e(k))&&s(k,e(p)[0])},K=()=>{m&&clearTimeout(m),m=setTimeout(()=>{O()},100)},Z=async H=>{await ta.set({...n(),...H}),await Ms.set(await h()),await gr(localStorage.token,{ui:n()})},h=async()=>{var H,ne,le;return await qn(localStorage.token,((ne=(H=r())==null?void 0:H.features)==null?void 0:ne.enable_direct_connections)&&(((le=n())==null?void 0:le.directConnections)??null))};let k=y("general");const U=H=>{const ne=document.getElementById("settings-tabs-container");ne&&(H.preventDefault(),ne.scrollLeft+=H.deltaY)},E=async()=>{await va();const H=document.getElementById("settings-tabs-container");H&&H.addEventListener("wheel",U)},se=async()=>{await va();const H=document.getElementById("settings-tabs-container");H&&H.removeEventListener("wheel",U)};oa(()=>{J=q(),O(),Ma.subscribe(H=>{J=q(),O()})}),Kt(()=>We(W()),()=>{W()?E():se()}),ca(),It(),qa(M,{size:"2xl",get show(){return W()},set show(H){W(H)},children:(H,ne)=>{var le=am(),X=a(le),ue=a(X),w=a(ue,!0);t(ue);var oe=l(ue,2),ve=a(oe);Oa(ve,{className:"w-5 h-5"}),t(oe),t(X);var Q=l(X,2),te=a(Q),A=a(te),I=a(A),C=a(I);{let fe=Ze(()=>(n(),o(()=>{var ae;return((ae=n())==null?void 0:ae.highContrastMode)??!1?"3":"1.5"})));Ls(C,{className:"size-3.5",get strokeWidth(){return e(fe)}})}t(I);var j=l(I,2),B=a(j,!0);t(j);var S=l(j,2);sa(S),t(A);var g=l(A,2);{var x=fe=>{var ae=dt(),ge=Ie(ae);Ht(ge,1,()=>e(p),ke=>ke,(ke,R)=>{var Oe=dt(),He=Ie(Oe);{var Ue=N=>{var Se=Vp(),$e=a(Se),Te=a($e);Mp(Te,{strokeWidth:"2"}),t($e);var Le=l($e,2),Ae=a(Le,!0);t(Le),t(Se),$(re=>{Be(Se,"aria-selected",e(k)==="general"),Ye(Se,1,(e(k),n(),o(()=>{var ye,Me;return`px-0.5 md:px-2.5 py-1 min-w-fit rounded-xl flex-1 md:flex-none flex text-left transition
								${e(k)==="general"?((ye=n())==null?void 0:ye.highContrastMode)??!1?"dark:bg-gray-800 bg-gray-200":"":((Me=n())==null?void 0:Me.highContrastMode)??!1?"hover:bg-gray-200 dark:hover:bg-gray-800":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white"}`})),"svelte-12km1ip"),v(Ae,re)},[()=>(P(),o(()=>P().t("General")))]),V("click",Se,()=>{s(k,"general")}),d(N,Se)},de=N=>{var Se=dt(),$e=Ie(Se);{var Te=Ae=>{var re=Kp(),ye=a(re),Me=a(ye);Fp(Me,{strokeWidth:"2"}),t(ye);var ze=l(ye,2),Je=a(ze,!0);t(ze),t(re),$(Ge=>{Be(re,"aria-selected",e(k)==="interface"),Ye(re,1,(e(k),n(),o(()=>{var gt,$t;return`px-0.5 md:px-2.5 py-1 min-w-fit rounded-xl flex-1 md:flex-none flex text-left transition
								${e(k)==="interface"?((gt=n())==null?void 0:gt.highContrastMode)??!1?"dark:bg-gray-800 bg-gray-200":"":(($t=n())==null?void 0:$t.highContrastMode)??!1?"hover:bg-gray-200 dark:hover:bg-gray-800":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white"}`})),"svelte-12km1ip"),v(Je,Ge)},[()=>(P(),o(()=>P().t("Interface")))]),V("click",re,()=>{s(k,"interface")}),d(Ae,re)},Le=Ae=>{var re=dt(),ye=Ie(re);{var Me=Je=>{var Ge=dt(),gt=Ie(Ge);{var $t=Xe=>{var F=qp(),Y=a(F),G=a(Y);nc(G,{strokeWidth:"2"}),t(Y);var Pe=l(Y,2),Re=a(Pe,!0);t(Pe),t(F),$(je=>{Be(F,"aria-selected",e(k)==="connections"),Ye(F,1,(e(k),n(),o(()=>{var De,Fe;return`px-0.5 md:px-2.5 py-1 min-w-fit rounded-xl flex-1 md:flex-none flex text-left transition
								${e(k)==="connections"?((De=n())==null?void 0:De.highContrastMode)??!1?"dark:bg-gray-800 bg-gray-200":"":((Fe=n())==null?void 0:Fe.highContrastMode)??!1?"hover:bg-gray-200 dark:hover:bg-gray-800":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white"}`})),"svelte-12km1ip"),v(Re,je)},[()=>(P(),o(()=>P().t("Connections")))]),V("click",F,()=>{s(k,"connections")}),d(Xe,F)};D(gt,Xe=>{i(),r(),o(()=>{var F,Y,G,Pe;return((F=i())==null?void 0:F.role)==="admin"||((Y=i())==null?void 0:Y.role)==="user"&&((Pe=(G=r())==null?void 0:G.features)==null?void 0:Pe.enable_direct_connections)})&&Xe($t)})}d(Je,Ge)},ze=Je=>{var Ge=dt(),gt=Ie(Ge);{var $t=F=>{var Y=dt(),G=Ie(Y);{var Pe=Re=>{var je=Zp(),De=a(je),Fe=a(De);Fv(Fe,{strokeWidth:"2"}),t(De);var et=l(De,2),T=a(et,!0);t(et),t(je),$(_e=>{Be(je,"aria-selected",e(k)==="tools"),Ye(je,1,(e(k),n(),o(()=>{var we,Ee;return`px-0.5 md:px-2.5 py-1 min-w-fit rounded-xl flex-1 md:flex-none flex text-left transition
								${e(k)==="tools"?((we=n())==null?void 0:we.highContrastMode)??!1?"dark:bg-gray-800 bg-gray-200":"":((Ee=n())==null?void 0:Ee.highContrastMode)??!1?"hover:bg-gray-200 dark:hover:bg-gray-800":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white"}`})),"svelte-12km1ip"),v(T,_e)},[()=>(P(),o(()=>P().t("External Tools")))]),V("click",je,()=>{s(k,"tools")}),d(Re,je)};D(G,Re=>{i(),o(()=>{var je,De,Fe,et,T;return((je=i())==null?void 0:je.role)==="admin"||((De=i())==null?void 0:De.role)==="user"&&((T=(et=(Fe=i())==null?void 0:Fe.permissions)==null?void 0:et.features)==null?void 0:T.direct_tool_servers)})&&Re(Pe)})}d(F,Y)},Xe=F=>{var Y=dt(),G=Ie(Y);{var Pe=je=>{var De=Gp(),Fe=a(De),et=a(Fe);Up(et,{strokeWidth:"2"}),t(Fe);var T=l(Fe,2),_e=a(T,!0);t(T),t(De),$(we=>{Be(De,"aria-selected",e(k)==="personalization"),Ye(De,1,(e(k),n(),o(()=>{var Ee,Qe;return`px-0.5 md:px-2.5 py-1 min-w-fit rounded-xl flex-1 md:flex-none flex text-left transition
								${e(k)==="personalization"?((Ee=n())==null?void 0:Ee.highContrastMode)??!1?"dark:bg-gray-800 bg-gray-200":"":((Qe=n())==null?void 0:Qe.highContrastMode)??!1?"hover:bg-gray-200 dark:hover:bg-gray-800":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white"}`})),"svelte-12km1ip"),v(_e,we)},[()=>(P(),o(()=>P().t("Personalization")))]),V("click",De,()=>{s(k,"personalization")}),d(je,De)},Re=je=>{var De=dt(),Fe=Ie(De);{var et=_e=>{var we=Yp(),Ee=a(we),Qe=a(Ee);Dp(Qe,{strokeWidth:"2"}),t(Ee);var Ke=l(Ee,2),vt=a(Ke,!0);t(Ke),t(we),$(ft=>{Be(we,"aria-selected",e(k)==="audio"),Ye(we,1,(e(k),n(),o(()=>{var at,st;return`px-0.5 md:px-2.5 py-1 min-w-fit rounded-xl flex-1 md:flex-none flex text-left transition
								${e(k)==="audio"?((at=n())==null?void 0:at.highContrastMode)??!1?"dark:bg-gray-800 bg-gray-200":"":((st=n())==null?void 0:st.highContrastMode)??!1?"hover:bg-gray-200 dark:hover:bg-gray-800":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white"}`})),"svelte-12km1ip"),v(vt,ft)},[()=>(P(),o(()=>P().t("Audio")))]),V("click",we,()=>{s(k,"audio")}),d(_e,we)},T=_e=>{var we=dt(),Ee=Ie(we);{var Qe=vt=>{var ft=Jp(),at=a(ft),st=a(at);Pp(st,{strokeWidth:"2"}),t(at);var mt=l(at,2),ct=a(mt,!0);t(mt),t(ft),$(ot=>{Be(ft,"aria-selected",e(k)==="data_controls"),Ye(ft,1,(e(k),n(),o(()=>{var kt,Lt;return`px-0.5 md:px-2.5 py-1 min-w-fit rounded-xl flex-1 md:flex-none flex text-left transition
								${e(k)==="data_controls"?((kt=n())==null?void 0:kt.highContrastMode)??!1?"dark:bg-gray-800 bg-gray-200":"":((Lt=n())==null?void 0:Lt.highContrastMode)??!1?"hover:bg-gray-200 dark:hover:bg-gray-800":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white"}`})),"svelte-12km1ip"),v(ct,ot)},[()=>(P(),o(()=>P().t("Data Controls")))]),V("click",ft,()=>{s(k,"data_controls")}),d(vt,ft)},Ke=vt=>{var ft=dt(),at=Ie(ft);{var st=ct=>{var ot=Xp(),kt=a(ot),Lt=a(kt);Np(Lt,{strokeWidth:"2"}),t(kt);var Tt=l(kt,2),jt=a(Tt,!0);t(Tt),t(ot),$(Dt=>{Be(ot,"aria-selected",e(k)==="account"),Ye(ot,1,(e(k),n(),o(()=>{var Ft,lt;return`px-0.5 md:px-2.5 py-1 min-w-fit rounded-xl flex-1 md:flex-none flex text-left transition
								${e(k)==="account"?((Ft=n())==null?void 0:Ft.highContrastMode)??!1?"dark:bg-gray-800 bg-gray-200":"":((lt=n())==null?void 0:lt.highContrastMode)??!1?"hover:bg-gray-200 dark:hover:bg-gray-800":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white"}`})),"svelte-12km1ip"),v(jt,Dt)},[()=>(P(),o(()=>P().t("Account")))]),V("click",ot,()=>{s(k,"account")}),d(ct,ot)},mt=ct=>{var ot=dt(),kt=Ie(ot);{var Lt=Tt=>{var jt=Qp(),Dt=a(jt),Ft=a(Dt);zp(Ft,{strokeWidth:"2"}),t(Dt);var lt=l(Dt,2),Ct=a(lt,!0);t(lt),t(jt),$(Qt=>{Be(jt,"aria-selected",e(k)==="about"),Ye(jt,1,(e(k),n(),o(()=>{var ut,Et;return`px-0.5 md:px-2.5 py-1 min-w-fit rounded-xl flex-1 md:flex-none flex text-left transition
								${e(k)==="about"?((ut=n())==null?void 0:ut.highContrastMode)??!1?"dark:bg-gray-800 bg-gray-200":"":((Et=n())==null?void 0:Et.highContrastMode)??!1?"hover:bg-gray-200 dark:hover:bg-gray-800":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white"}`})),"svelte-12km1ip"),v(Ct,Qt)},[()=>(P(),o(()=>P().t("About")))]),V("click",jt,()=>{s(k,"about")}),d(Tt,jt)};D(kt,Tt=>{e(R)==="about"&&Tt(Lt)},!0)}d(ct,ot)};D(at,ct=>{e(R)==="account"?ct(st):ct(mt,!1)},!0)}d(vt,ft)};D(Ee,vt=>{e(R)==="data_controls"?vt(Qe):vt(Ke,!1)},!0)}d(_e,we)};D(Fe,_e=>{e(R)==="audio"?_e(et):_e(T,!1)},!0)}d(je,De)};D(G,je=>{e(R)==="personalization"?je(Pe):je(Re,!1)},!0)}d(F,Y)};D(gt,F=>{e(R)==="tools"?F($t):F(Xe,!1)},!0)}d(Je,Ge)};D(ye,Je=>{e(R)==="connections"?Je(Me):Je(ze,!1)},!0)}d(Ae,re)};D($e,Ae=>{e(R)==="interface"?Ae(Te):Ae(Le,!1)},!0)}d(N,Se)};D(He,N=>{e(R)==="general"?N(Ue):N(de,!1)})}d(ke,Oe)}),d(fe,ae)},z=fe=>{var ae=em(),ge=a(ae,!0);t(ae),$(ke=>v(ge,ke),[()=>(P(),o(()=>P().t("No results found")))]),d(fe,ae)};D(g,fe=>{e(p),o(()=>e(p).length>0)?fe(x):fe(z,!1)})}var ie=l(g,2);{var xe=fe=>{var ae=tm(),ge=a(ae),ke=a(ge);Rp(ke,{strokeWidth:"2"}),t(ge);var R=l(ge,2),Oe=a(R,!0);t(R),t(ae),$(He=>{Ye(ae,1,`px-0.5 md:px-2.5 py-1 min-w-fit rounded-xl flex-1 md:flex-none md:mt-auto flex text-left transition ${n(),o(()=>{var Ue;return(Ue=n())!=null&&Ue.highContrastMode?"hover:bg-gray-200 dark:hover:bg-gray-800":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white"})??""}`),v(Oe,He)},[()=>(P(),o(()=>P().t("Admin Settings")))]),V("click",ae,async He=>{He.preventDefault(),await ga("/admin/settings"),W(!1)}),d(fe,ae)};D(ie,fe=>{i(),o(()=>{var ae;return((ae=i())==null?void 0:ae.role)==="admin"})&&fe(xe)})}t(te);var he=l(te,2),pe=a(he);{var be=fe=>{e1(fe,{getModels:h,saveSettings:Z,$$events:{save:()=>{Ve.success(P().t("Settings saved successfully!"))}}})},Ne=fe=>{var ae=dt(),ge=Ie(ae);{var ke=Oe=>{$1(Oe,{saveSettings:Z,$$events:{save:()=>{Ve.success(P().t("Settings saved successfully!"))}}})},R=Oe=>{var He=dt(),Ue=Ie(He);{var de=Se=>{$p(Se,{saveSettings:async $e=>{await Z($e),Ve.success(P().t("Settings saved successfully!"))}})},N=Se=>{var $e=dt(),Te=Ie($e);{var Le=re=>{Ip(re,{saveSettings:async ye=>{await Z(ye),Ve.success(P().t("Settings saved successfully!"))}})},Ae=re=>{var ye=dt(),Me=Ie(ye);{var ze=Ge=>{fp(Ge,{saveSettings:Z,$$events:{save:()=>{Ve.success(P().t("Settings saved successfully!"))}}})},Je=Ge=>{var gt=dt(),$t=Ie(gt);{var Xe=Y=>{O1(Y,{saveSettings:Z,$$events:{save:()=>{Ve.success(P().t("Settings saved successfully!"))}}})},F=Y=>{var G=dt(),Pe=Ie(G);{var Re=De=>{K1(De,{saveSettings:Z})},je=De=>{var Fe=dt(),et=Ie(Fe);{var T=we=>{zg(we,{saveSettings:Z,saveHandler:()=>{Ve.success(P().t("Settings saved successfully!"))}})},_e=we=>{var Ee=dt(),Qe=Ie(Ee);{var Ke=vt=>{Kg(vt,{})};D(Qe,vt=>{e(k)==="about"&&vt(Ke)},!0)}d(we,Ee)};D(et,we=>{e(k)==="account"?we(T):we(_e,!1)},!0)}d(De,Fe)};D(Pe,De=>{e(k)==="data_controls"?De(Re):De(je,!1)},!0)}d(Y,G)};D($t,Y=>{e(k)==="audio"?Y(Xe):Y(F,!1)},!0)}d(Ge,gt)};D(Me,Ge=>{e(k)==="personalization"?Ge(ze):Ge(Je,!1)},!0)}d(re,ye)};D(Te,re=>{e(k)==="tools"?re(Le):re(Ae,!1)},!0)}d(Se,$e)};D(Ue,Se=>{e(k)==="connections"?Se(de):Se(N,!1)},!0)}d(Oe,He)};D(ge,Oe=>{e(k)==="interface"?Oe(ke):Oe(R,!1)},!0)}d(fe,ae)};D(pe,fe=>{e(k)==="general"?fe(be):fe(Ne,!1)})}t(he),t(Q),t(le),$((fe,ae,ge,ke)=>{v(w,fe),Be(oe,"aria-label",ae),v(B,ge),Ye(S,1,(n(),o(()=>{var R;return`w-full py-1 text-sm bg-transparent dark:text-gray-300 outline-hidden
								${((R=n())==null?void 0:R.highContrastMode)??!1?"placeholder-gray-800":""}`})),"svelte-12km1ip"),Be(S,"placeholder",ke)},[()=>(P(),o(()=>P().t("Settings"))),()=>(P(),o(()=>P().t("Close settings modal"))),()=>(P(),o(()=>P().t("Search"))),()=>(P(),o(()=>P().t("Search")))]),V("click",oe,()=>{W(!1)}),aa(S,()=>e(b),fe=>s(b,fe)),V("input",S,K),d(H,le)},$$slots:{default:!0},$$legacy:!0}),At(),ee()}var sm=f('<p class="sr-only"> </p>'),om=f('<div class="my-2"><!></div>'),lm=f('<div class="w-full"><div> </div> <div class="my-2.5 px-1.5 markdown-prose-sm !list-none !w-full !max-w-none"></div></div>'),nm=f('<div class=" mb-3 pr-2"><div class="font-semibold text-xl mb-1 dark:text-white"> </div> <hr class="border-gray-50/50 dark:border-gray-850/50 my-2"/> <!></div>'),im=f('<div class="px-6 pt-5 dark:text-white text-black"><div class="flex justify-between items-start"><div class="text-xl font-medium"> <!></div> <button class="self-center"><!></button></div> <div class="flex items-center mt-1"><div class="text-sm dark:text-gray-200"> </div> <div class="flex self-center w-[1px] h-6 mx-2.5 bg-gray-50/50 dark:bg-gray-850/50"></div> <div class="text-sm dark:text-gray-200"> </div></div></div> <div class=" w-full p-4 px-5 text-gray-700 dark:text-gray-100"><div class=" overflow-y-scroll max-h-[30rem] scrollbar-hidden"><div class="mb-3"><!></div></div> <div class="flex justify-end pt-3 text-sm font-medium"><button class="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"><span class="relative"> </span></button></div></div>',1);function dm(M,c){St(c,!1);const r=()=>Ce(Ma,"$config",L),i=()=>Ce(ta,"$settings",L),n=()=>Ce(_,"$i18n",L),P=()=>Ce(ll,"$WEBUI_NAME",L),[L,ee]=Pt(),_=Mt("i18n");let W=me(c,"show",12,!1),u=y(null);const J=async()=>{s(u,await jd())},p=async()=>{localStorage.version=r().version,await ta.set({...i(),version:r().version}),await gr(localStorage.token,{ui:i()}),W(!1)};Kt(()=>We(W()),()=>{W()&&J()}),ca(),It(),qa(M,{size:"xl",get show(){return W()},set show(b){W(b)},children:(b,m)=>{var q=im(),O=Ie(q),K=a(O),Z=a(K),h=a(Z),k=l(h);oc(k,{x:[-1,-.25],y:[0,.5]}),t(Z);var U=l(Z,2),E=a(U);Oa(E,{className:"size-5",children:(j,B)=>{var S=sm(),g=a(S,!0);t(S),$(x=>v(g,x),[()=>(n(),o(()=>n().t("Close")))]),d(j,S)},$$slots:{default:!0}}),t(U),t(K);var se=l(K,2),H=a(se),ne=a(H,!0);t(H);var le=l(H,4),X=a(le);t(le),t(se),t(O);var ue=l(O,2),w=a(ue),oe=a(w),ve=a(oe);{var Q=j=>{var B=dt(),S=Ie(B);Ht(S,1,()=>(e(u),o(()=>Object.keys(e(u)))),wa,(g,x)=>{var z=nm(),ie=a(z),xe=a(ie);t(ie);var he=l(ie,4);Ht(he,1,()=>(e(u),e(x),o(()=>Object.keys(e(u)[e(x)]).filter(pe=>pe!=="date"))),wa,(pe,be)=>{var Ne=lm(),fe=a(Ne),ae=a(fe,!0);t(fe);var ge=l(fe,2);Ht(ge,5,()=>(e(u),e(x),e(be),o(()=>e(u)[e(x)][e(be)])),wa,(ke,R)=>{var Oe=om(),He=a(Oe);ii(He,()=>(We(Xo),e(R),o(()=>{var Ue;return Xo.sanitize((Ue=e(R))==null?void 0:Ue.raw)}))),t(Oe),d(ke,Oe)}),t(ge),t(Ne),$(()=>{Ye(fe,1,`font-semibold uppercase text-xs ${e(be)==="added"?"bg-blue-500/20 text-blue-700 dark:text-blue-200":e(be)==="fixed"?"bg-green-500/20 text-green-700 dark:text-green-200":e(be)==="changed"?"bg-yellow-500/20 text-yellow-700 dark:text-yellow-200":e(be)==="removed"?"bg-red-500/20 text-red-700 dark:text-red-200":""}  w-fit rounded-xl px-2 my-2.5`),v(ae,e(be))}),d(pe,Ne)}),t(z),$(()=>v(xe,`v${e(x)??""} - ${e(u),e(x),o(()=>e(u)[e(x)].date)??""}`)),d(g,z)}),d(j,B)};D(ve,j=>{e(u)&&j(Q)})}t(oe),t(w);var te=l(w,2),A=a(te),I=a(A),C=a(I,!0);t(I),t(A),t(te),t(ue),$((j,B,S,g)=>{v(h,`${j??""}
				${P()??""} `),Be(U,"aria-label",B),v(ne,S),v(X,`v${lr}`),v(C,g)},[()=>(n(),o(()=>n().t("What's New in"))),()=>(n(),o(()=>n().t("Close"))),()=>(n(),o(()=>n().t("Release Notes"))),()=>(n(),o(()=>n().t("Okay, Let's Go!")))]),V("click",U,p),V("click",A,p),d(b,q)},$$slots:{default:!0},$$legacy:!0}),At(),ee()}var vm=f(" <br/> ",1),cm=f('<div class="mt-4 text-sm font-medium text-center"><div> </div></div>'),um=f('<div class="fixed w-full h-full flex z-999"><div class="absolute w-full h-full backdrop-blur-lg bg-white/10 dark:bg-gray-900/50 flex justify-center"><div class="m-auto pb-10 flex flex-col justify-center"><div class="max-w-md"><div class="text-center dark:text-white text-2xl font-medium z-50" style="white-space: pre-wrap;"><!></div> <div class=" mt-4 text-center text-sm dark:text-gray-200 w-full" style="white-space: pre-wrap;"><!></div> <!> <div class=" mt-6 mx-auto relative group w-fit"><button class="relative z-20 flex px-5 py-2 rounded-full bg-white border border-gray-100 dark:border-none hover:bg-gray-100 text-gray-700 transition font-medium text-sm"> </button> <button class="text-xs text-center w-full mt-2 text-gray-400 underline"> </button></div></div></div></div></div>');function fm(M,c){St(c,!1);const r=()=>Ce(Ma,"$config",n),i=()=>Ce(L,"$i18n",n),[n,P]=Pt(),L=Mt("i18n");let ee=y(null);oa(async()=>{s(ee,await Qv(localStorage.token).catch(X=>null))}),It();var _=um(),W=a(_),u=a(W),J=a(u),p=a(J),b=a(p);{var m=X=>{var ue=ia();$(()=>v(ue,r().ui.pending_user_overlay_title)),d(X,ue)},q=X=>{var ue=vm(),w=Ie(ue,!0),oe=l(w,2);$((ve,Q)=>{v(w,ve),v(oe,` ${Q??""}`)},[()=>i().t("Account Activation Pending"),()=>i().t("Contact Admin for WebUI Access")]),d(X,ue)};D(b,X=>{var ue,w;(((w=(ue=r())==null?void 0:ue.ui)==null?void 0:w.pending_user_overlay_title)??"").trim()!==""?X(m):X(q,!1)})}t(p);var O=l(p,2),K=a(O);{var Z=X=>{var ue=dt(),w=Ie(ue);ii(w,()=>{var oe,ve;return Fd.parse(Xo.sanitize((((ve=(oe=r())==null?void 0:oe.ui)==null?void 0:ve.pending_user_overlay_content)??"").replace(/\n/g,"<br>")))}),d(X,ue)},h=X=>{var ue=ia();$((w,oe)=>v(ue,`${w??""}
${oe??""}`),[()=>i().t("Your account status is currently pending activation."),()=>i().t("To access the WebUI, please reach out to the administrator. Admins can manage user statuses from the Admin Panel.")]),d(X,ue)};D(K,X=>{var ue,w;(((w=(ue=r())==null?void 0:ue.ui)==null?void 0:w.pending_user_overlay_content)??"").trim()!==""?X(Z):X(h,!1)})}t(O);var k=l(O,2);{var U=X=>{var ue=cm(),w=a(ue),oe=a(w);t(w),t(ue),$(ve=>v(oe,`${ve??""}: ${e(ee).name??""} (${e(ee).email??""})`),[()=>i().t("Admin")]),d(X,ue)};D(k,X=>{e(ee)&&X(U)})}var E=l(k,2),se=a(E),H=a(se,!0);t(se);var ne=l(se,2),le=a(ne,!0);t(ne),t(E),t(J),t(u),t(W),t(_),$((X,ue)=>{v(H,X),v(le,ue)},[()=>i().t("Check Again"),()=>i().t("Sign Out")]),V("click",se,async()=>{location.href="/"}),V("click",ne,async()=>{localStorage.removeItem("token"),location.href="/auth"}),d(M,_),At(),P()}var gm=f('<div class="flex items-start bg-[#F1F8FE] dark:bg-[#020C1D] border border-[3371D5] dark:border-[#03113B] text-[#2B6CD4] dark:text-[#6795EC] rounded-lg px-3.5 py-3 text-xs max-w-80 pr-2 w-full shadow-lg"><div class="flex-1 font-medium"> <a href="https://github.com/open-webui/open-webui/releases" target="_blank" class="underline"> </a></div> <div class=" shrink-0 pr-1"><button class=" hover:text-blue-900 dark:hover:text-blue-300 transition"><!></button></div></div>');function pm(M,c){St(c,!1);const r=()=>Ce(L,"$i18n",i),[i,n]=Pt(),P=ha(),L=Mt("i18n");let ee=me(c,"version",24,()=>({current:lr,latest:lr}));It();var _=gm(),W=a(_),u=a(W),J=l(u),p=a(J,!0);t(J),t(W);var b=l(W,2),m=a(b),q=a(m);Oa(q,{}),t(m),t(b),t(_),$((O,K)=>{v(u,`${O??""} `),v(p,K)},[()=>(r(),We(ee()),o(()=>r().t("A new version (v{{LATEST_VERSION}}) is now available.",{LATEST_VERSION:ee().latest}))),()=>(r(),o(()=>r().t("Update for the latest features and improvements.")))]),V("click",m,()=>{P("close")}),d(M,_),At(),n()}var mm=f('<div class=" absolute bottom-8 right-8 z-50"><!></div>'),hm=f('<div class="fixed w-full h-full flex z-50"><div class="absolute w-full h-full backdrop-blur-md bg-white/20 dark:bg-gray-900/50 flex justify-center"><div class="m-auto pb-44 flex flex-col justify-center"><div class="max-w-md"><div class="text-center dark:text-white text-2xl font-medium z-50"> <br/> </div> <div class=" mt-4 text-center text-sm dark:text-gray-200 w-full"> <span class="font-medium dark:text-white"> </span> </div> <div class=" mt-6 mx-auto relative group w-fit"><button class="relative z-20 flex px-5 py-2 rounded-full bg-white border border-gray-100 dark:border-none hover:bg-gray-100 transition font-medium text-sm"> </button> <button class="text-xs text-center w-full mt-2 text-gray-400 underline"> </button></div></div></div></div></div>'),_m=f("<div><!></div>"),xm=f("<!> <!> <!>",1),bm=f('<div class="app relative"><div class=" text-gray-700 dark:text-gray-100 bg-white dark:bg-gray-900 h-screen max-h-[100dvh] overflow-auto flex flex-row justify-end"><!></div></div>'),ym=f("<!> <!> <!> <!>",1);function X0(M,c){St(c,!1);const r=()=>Ce(Ma,"$config",b),i=()=>Ce(ta,"$settings",b),n=()=>Ce(O,"$i18n",b),P=()=>Ce(za,"$user",b),L=()=>Ce(pr,"$showSearch",b),ee=()=>Ce(na,"$showSidebar",b),_=()=>Ce($s,"$showSettings",b),W=()=>Ce(Fo,"$showShortcuts",b),u=()=>Ce(nr,"$temporaryChatEnabled",b),J=()=>Ce(sl,"$page",b),p=()=>Ce(ks,"$showChangelog",b),[b,m]=Pt(),{saveAs:q}=Nr,O=Mt("i18n");let K=y(!1),Z=y(null),h=y([]),k=y();const U=()=>{const C=Object.keys(localStorage).filter(j=>j.startsWith("chat-input"));C.length>0&&C.forEach(j=>{localStorage.removeItem(j)})},E=async()=>{try{if(s(Z,await mc("Chats",1)),!e(Z))return;const C=await e(Z).getAllFromIndex("chats","timestamp");s(h,C.map((j,B)=>C[C.length-1-B])),e(h).length===0&&await On("Chats")}catch{}},se=async C=>{let j=await Bd(localStorage.token).catch(B=>null);if(!j)try{j=JSON.parse(localStorage.getItem("settings")??"{}")}catch(B){j={}}j!=null&&j.ui&&ta.set(j.ui),C&&await C()},H=async()=>{var C,j,B;Ms.set(await qn(localStorage.token,(j=(C=r())==null?void 0:C.features)!=null&&j.enable_direct_connections?((B=i())==null?void 0:B.directConnections)??null:null))},ne=async()=>{var j;let C=await Kn(((j=i())==null?void 0:j.toolServers)??[]);C=C.filter(B=>!B||B.error?(Ve.error(n().t("Failed to connect to {{URL}} OpenAPI tool server",{URL:B==null?void 0:B.url})),!1):!0),Jn.set(C)},le=async()=>{const C=await Td(localStorage.token);qd.set(C)},X=async()=>{const C=await Nd(localStorage.token);Zd.set(C)};oa(async()=>{var B,S,g,x,z,ie,xe,he,pe,be,Ne,fe,ae,ge,ke;if(P()===void 0||P()===null){await ga("/auth");return}if(!["user","admin"].includes((B=P())==null?void 0:B.role))return;U(),await Promise.all([E(),le(),X(),se(async()=>{await Promise.all([H(),ne()])})]);const C=(R,Oe)=>{const Ue=((Oe==null?void 0:Oe.keys)||[]).map(Le=>Le.toLowerCase()),de=Ue.includes("ctrl")||Ue.includes("mod"),N=Ue.includes("shift"),Se=Ue.includes("alt"),$e=Ue.filter(Le=>!["ctrl","shift","alt","mod"].includes(Le)),Te=R.key.toLowerCase();return!(N&&!R.shiftKey||de&&!(R.ctrlKey||R.metaKey)||!de&&(R.ctrlKey||R.metaKey)||Se&&!R.altKey||!Se&&R.altKey||$e.length&&!$e.includes(Te))};if((()=>{document.addEventListener("keydown",async R=>{var Oe,He,Ue,de,N,Se,$e,Te,Le,Ae,re,ye;C(R,Sa[Pa.SEARCH])?(R.preventDefault(),pr.set(!L())):C(R,Sa[Pa.NEW_CHAT])?(R.preventDefault(),(Oe=document.getElementById("sidebar-new-chat-button"))==null||Oe.click()):C(R,Sa[Pa.FOCUS_INPUT])?(R.preventDefault(),(He=document.getElementById("chat-input"))==null||He.focus()):C(R,Sa[Pa.COPY_LAST_CODE_BLOCK])?(R.preventDefault(),(Ue=[...document.getElementsByClassName("copy-code-button")].at(-1))==null||Ue.click()):C(R,Sa[Pa.COPY_LAST_RESPONSE])?(R.preventDefault(),(de=[...document.getElementsByClassName("copy-response-button")].at(-1))==null||de.click()):C(R,Sa[Pa.TOGGLE_SIDEBAR])?(R.preventDefault(),na.set(!ee())):C(R,Sa[Pa.DELETE_CHAT])?(R.preventDefault(),(N=document.getElementById("delete-chat-button"))==null||N.click()):C(R,Sa[Pa.OPEN_SETTINGS])?(R.preventDefault(),$s.set(!_())):C(R,Sa[Pa.SHOW_SHORTCUTS])?(R.preventDefault(),Fo.set(!W())):C(R,Sa[Pa.CLOSE_MODAL])?(R.preventDefault(),$s.set(!1),Fo.set(!1)):C(R,Sa[Pa.NEW_TEMPORARY_CHAT])?(R.preventDefault(),((Se=P())==null?void 0:Se.role)!=="admin"&&((Le=(Te=($e=P())==null?void 0:$e.permissions)==null?void 0:Te.chat)!=null&&Le.temporary_enforced)?nr.set(!0):nr.set(!u()),await ga("/"),setTimeout(()=>{var Me;(Me=document.getElementById("new-chat-button"))==null||Me.click()},0)):C(R,Sa[Pa.GENERATE_MESSAGE_PAIR])?(R.preventDefault(),(Ae=document.getElementById("generate-message-pair-button"))==null||Ae.click()):C(R,Sa[Pa.REGENERATE_RESPONSE])&&((re=document.activeElement)==null?void 0:re.id)==="chat-input"&&(R.preventDefault(),(ye=[...document.getElementsByClassName("regenerate-response-button")].at(-1))==null||ye.click())})})(),((S=P())==null?void 0:S.role)==="admin"&&(((g=i())==null?void 0:g.showChangelog)??!0)&&ks.set(((x=i())==null?void 0:x.version)!==r().version),(((z=P())==null?void 0:z.role)==="admin"||(((he=(xe=(ie=P())==null?void 0:ie.permissions)==null?void 0:xe.chat)==null?void 0:he.temporary)??!0))&&(J().url.searchParams.get("temporary-chat")==="true"&&nr.set(!0),((pe=P())==null?void 0:pe.role)!=="admin"&&((fe=(Ne=(be=P())==null?void 0:be.permissions)==null?void 0:Ne.chat)!=null&&fe.temporary_enforced)&&nr.set(!0)),((ae=P())==null?void 0:ae.role)==="admin"&&((ke=(ge=r())==null?void 0:ge.features)!=null&&ke.enable_version_update_check))if(localStorage.dismissedUpdateToast){const R=new Date(Number(localStorage.dismissedUpdateToast));new Date-R>24*60*60*1e3&&ue()}else ue();await va(),s(K,!0)});const ue=async()=>{s(k,await Vn(localStorage.token).catch(C=>({current:lr,latest:lr})))};It();var w=ym(),oe=Ie(w);rm(oe,{get show(){return Ss(),_()},set show(C){Cs($s,C)},$$legacy:!0});var ve=l(oe,2);dm(ve,{get show(){return Ss(),p()},set show(C){Cs(ks,C)},$$legacy:!0});var Q=l(ve,2);{var te=C=>{var j=mm(),B=a(j);pm(B,{get version(){return e(k)},$$events:{close:()=>{localStorage.setItem("dismissedUpdateToast",Date.now().toString()),s(k,null)}}}),t(j),rl(1,j,()=>Rn,()=>({duration:100})),d(C,j)};D(Q,C=>{var j;e(k)&&Yn(e(k).latest,e(k).current)&&(((j=i())==null?void 0:j.showUpdateToast)??!0)&&C(te)})}var A=l(Q,2);{var I=C=>{var j=bm(),B=a(j),S=a(B);{var g=z=>{fm(z,{})},x=z=>{var ie=xm(),xe=Ie(ie);{var he=ae=>{var ge=hm(),ke=a(ge),R=a(ke),Oe=a(R),He=a(Oe),Ue=a(He,!0),de=l(Ue,2);t(He);var N=l(He,2),Se=a(N),$e=l(Se),Te=a($e);t($e);var Le=l($e);t(N);var Ae=l(N,2),re=a(Ae),ye=a(re,!0);t(re);var Me=l(re,2),ze=a(Me,!0);t(Me),t(Ae),t(Oe),t(R),t(ke),t(ge),$((Je,Ge,gt,$t,Xe,F,Y,G,Pe)=>{v(Ue,Je),v(de,` ${Ge??""}`),v(Se,`${gt??""} `),v(Te,`${$t??""} > ${Xe??""} > ${F??""}`),v(Le,`. ${Y??""}`),v(ye,G),v(ze,Pe)},[()=>n().t("Important Update"),()=>n().t("Action Required for Chat Log Storage"),()=>n().t("Saving chat logs directly to your browser's storage is no longer supported. Please take a moment to download and delete your chat logs by clicking the button below. Don't worry, you can easily re-import your chat logs to the backend through"),()=>n().t("Settings"),()=>n().t("Chats"),()=>n().t("Import Chats"),()=>n().t("This ensures that your valuable conversations are securely saved to your backend database. Thank you!"),()=>n().t("Download & Delete"),()=>n().t("Close")]),V("click",re,async()=>{let Je=new Blob([JSON.stringify(e(h))],{type:"application/json"});q(Je,`chat-export-${Date.now()}.json`);const Ge=e(Z).transaction("chats","readwrite");await Promise.all([Ge.store.clear(),Ge.done]),await On("Chats"),s(h,[])}),V("click",Me,async()=>{s(h,[])}),d(ae,ge)};D(xe,ae=>{e(h).length>0&&ae(he)})}var pe=l(xe,2);_g(pe,{});var be=l(pe,2);{var Ne=ae=>{var ge=dt(),ke=Ie(ge);Mr(ke,c,"default",{},null),d(ae,ge)},fe=ae=>{var ge=_m(),ke=a(ge);$a(ke,{className:"size-5"}),t(ge),$(()=>Ye(ge,1,`w-full flex-1 h-full flex items-center justify-center ${ee()?"  md:max-w-[calc(100%-var(--sidebar-width))]":" "}`)),d(ae,ge)};D(be,ae=>{e(K)?ae(Ne):ae(fe,!1)})}d(z,ie)};D(S,z=>{var ie;["user","admin"].includes((ie=P())==null?void 0:ie.role)?z(x,!1):z(g)})}t(B),t(j),d(C,j)};D(A,C=>{P()&&C(I)})}d(M,w),At(),m()}export{X0 as component};
//# sourceMappingURL=2.Bq1-5Ft9.js.map
