import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as T,g as W,o as y,d as _,e as d,a as w,b as x,i,m as c,j as o,n as a}from"../chunks/0WpKKl27.js";import{i as B}from"../chunks/Cmf4RC8y.js";import{k as C}from"../chunks/fZxlt1qL.js";import{i as D}from"../chunks/C3k0oZ3o.js";import{s as J,a as M}from"../chunks/BVrWTcfB.js";import{g as P}from"../chunks/B5RARo22.js";import{c as Q,g as j}from"../chunks/gENSTQXg.js";import{T as F}from"../chunks/BwFqwAiy.js";import{W as E}from"../chunks/DLhnqOlE.js";import{t as H}from"../chunks/PCOILo-8.js";import{e as L,c as z}from"../chunks/cX8aofVu.js";import{t as l}from"../chunks/DYdr9DjX.js";function ce(v,S){T(S,!1);const m=()=>M(N,"$i18n",I),[I,$]=J(),N=W("i18n");let p=c(!1),u=c(!1),r=c(null);const O=async t=>{const s=L(t.content);if(z((s==null?void 0:s.required_open_webui_version)??"0.0.0",E)){l.error(m().t("Open WebUI version (v{{OPEN_WEBUI_VERSION}}) is lower than required version (v{{REQUIRED_VERSION}})",{OPEN_WEBUI_VERSION:E,REQUIRED_VERSION:(s==null?void 0:s.required_open_webui_version)??"0.0.0"}));return}await Q(localStorage.token,{id:t.id,name:t.name,meta:t.meta,content:t.content,access_control:t.access_control}).catch(n=>(l.error(`${n}`),null))&&(l.success(m().t("Tool created successfully")),H.set(await j(localStorage.token)),await P("/workspace/tools"))};y(()=>{window.addEventListener("message",async t=>{["https://openwebui.com","https://www.openwebui.com","http://localhost:9999"].includes(t.origin)&&(i(r,JSON.parse(t.data)),o(r))}),(window.opener??!1)&&window.opener.postMessage("loaded","*"),sessionStorage.tool&&(i(r,JSON.parse(sessionStorage.tool)),sessionStorage.removeItem("tool"),o(r),i(u,!0)),i(p,!0)}),D();var g=_(),h=d(g);{var R=t=>{var s=_(),f=d(s);C(f,()=>{var n;return(n=o(r))==null?void 0:n.content},n=>{{let b=a(()=>{var e;return((e=o(r))==null?void 0:e.id)??""}),k=a(()=>{var e;return((e=o(r))==null?void 0:e.name)??""}),V=a(()=>{var e;return((e=o(r))==null?void 0:e.meta)??{description:""}}),U=a(()=>{var e;return((e=o(r))==null?void 0:e.content)??""}),q=a(()=>{var e;return((e=o(r))==null?void 0:e.access_control)!==void 0?o(r).access_control:{}});F(n,{get id(){return o(b)},get name(){return o(k)},get meta(){return o(V)},get content(){return o(U)},get accessControl(){return o(q)},get clone(){return o(u)},onSave:e=>{O(e)}})}}),w(t,s)};B(h,t=>{o(p)&&t(R)})}w(v,g),x(),$()}export{ce as component};
//# sourceMappingURL=41.CCOjpHHp.js.map
