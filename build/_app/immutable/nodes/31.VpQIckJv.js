import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as Fe,y as ht,g as Je,f as m,c as r,e as K,k as d,r as t,t as B,w as i,s as $,a as v,d as Se,l as _e,i as n,m as b,j as e,n as T,b as Qe,o as wt,q as yt,v as bt,h as kt,$ as jt,x as Et,u as Pe,A as Lt,z as Nt}from"../chunks/0WpKKl27.js";import{i as U}from"../chunks/Cmf4RC8y.js";import{e as Pt,i as zt}from"../chunks/u5Cnd4mY.js";import{h as St}from"../chunks/Bwqchdu-.js";import{r as Ct,a as Dt}from"../chunks/CZ1y6KaE.js";import{b as It}from"../chunks/kb1CvZ3a.js";import{b as Ut}from"../chunks/Bo3ZTtFv.js";import{i as Ze}from"../chunks/C3k0oZ3o.js";import{a as ge,s as et}from"../chunks/BVrWTcfB.js";import{d as de,r as Bt}from"../chunks/BC4znSyB.js";import{t as ve}from"../chunks/DYdr9DjX.js";import{W as Kt,u as Mt}from"../chunks/PCOILo-8.js";import{s as Ot,d as Wt,e as At}from"../chunks/D93vMDi1.js";import{g as Rt}from"../chunks/B5RARo22.js";import{k as He}from"../chunks/cX8aofVu.js";import{C as Tt}from"../chunks/ByHAJgVC.js";import{s as Vt}from"../chunks/3-JilrU5.js";import{p as Ge}from"../chunks/DpN1w328.js";import"../chunks/BtReZMDb.js";import{b as qt,c as Xe}from"../chunks/DA2vpIKA.js";import{f as Ht}from"../chunks/Dbtivbjp.js";import{D as Gt}from"../chunks/DD5ATWsz.js";import{G as Xt}from"../chunks/CYXXpf3O.js";import{T as xe}from"../chunks/Db0gdTVr.js";import{D as Yt}from"../chunks/CmPVC7JK.js";import{E as Ft}from"../chunks/C2rnPICT.js";import{B as Ye}from"../chunks/DUufguWK.js";import{S as Jt}from"../chunks/BqWDuYyJ.js";import{P as Qt}from"../chunks/BonmQdqt.js";import{S as ze}from"../chunks/BO1efK8r.js";import{X as Zt}from"../chunks/CZmZoefv.js";import{V as er}from"../chunks/3t3HGsuI.js";import{L as tr}from"../chunks/l5Bi75JT.js";var rr=m('<button class="self-center w-fit text-sm p-1.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl" type="button"><!></button>'),ar=m('<!> <div class="flex items-center"> </div>',1),sr=m('<!> <div class="flex items-center"> </div>',1),or=m("<!> <!>",1),lr=m('<div slot="content"><!></div>');function ir(Z,V){Fe(V,!1);const a=()=>ge(he,"$i18n",$e),[$e,q]=et(),ee=ht(),he=Je("i18n");let ce=Ge(V,"onExport",8,null),H=Ge(V,"onClose",8,()=>{}),M=b(!1);Ze(),Gt(Z,{align:"end",get show(){return e(M)},set show(k){n(M,k)},$$events:{change:k=>{k.detail===!1&&H()()}},children:(k,fe)=>{{let E=T(()=>(a(),i(()=>a().t("More"))));xe(k,{get content(){return e(E)},children:(h,L)=>{var _=Se(),N=K(_);Vt(N,V,"default",{},j=>{var w=rr(),te=r(w);Ft(te,{className:"size-5"}),t(w),_e("click",w,P=>{P.stopPropagation(),n(M,!0)}),v(j,w)}),v(h,_)},$$slots:{default:!0}})}},$$slots:{default:!0,content:(k,fe)=>{var E=lr(),h=r(E);qt(h,{class:"w-full max-w-[170px] rounded-2xl px-1 py-1 border border-gray-100  dark:border-gray-800 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",side:"bottom",align:"end",get transition(){return Ht},children:(L,_)=>{var N=or(),j=K(N);{var w=P=>{Xe(P,{class:"flex gap-2 items-center px-3 py-1.5 text-sm cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{ce()()}},children:(re,G)=>{var O=ar(),W=K(O);Yt(W,{});var A=d(W,2),ae=r(A,!0);t(A),B(we=>$(ae,we),[()=>(a(),i(()=>a().t("Export")))]),v(re,O)},$$slots:{default:!0}})};U(j,P=>{ce()&&P(w)})}var te=d(j,2);Xe(te,{class:"flex  gap-2  items-center px-3 py-1.5 text-sm   cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{ee("delete")}},children:(P,re)=>{var G=sr(),O=K(G);Xt(O,{});var W=d(O,2),A=r(W,!0);t(W),B(ae=>$(A,ae),[()=>(a(),i(()=>a().t("Delete")))]),v(P,G)},$$slots:{default:!0}}),v(L,N)},$$slots:{default:!0}}),t(E),v(k,E)}},$$legacy:!0}),Qe(),q()}var nr=m('<div class="self-center pl-1.5 translate-y-[0.5px] rounded-l-xl bg-transparent"><button class="p-0.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-900 transition"><!></button></div>'),dr=m("<div><!></div>"),vr=m('<div class="flex items-center gap-2"><div class=" flex self-center"><!></div></div>'),cr=m('<div class=" flex items-center gap-2"><div class=" text-sm font-medium line-clamp-1 capitalize"> </div></div>'),fr=m('<div class=" text-xs text-gray-500 line-clamp-1 hidden sm:block"> </div>'),ur=m('<button class=" flex space-x-4 cursor-pointer text-left w-full px-3 py-2.5 dark:hover:bg-gray-850/50 hover:bg-gray-50 transition rounded-2xl"><div class=" w-full"><div class=" self-center flex-1 justify-between"><div class="flex items-center justify-between -my-1 h-8"><div class=" flex gap-2 items-center justify-between w-full"><div><!></div> <!></div> <!></div> <div class=" flex items-center gap-1 justify-between px-1.5"><!> <div class="flex items-center gap-2 shrink-0"><!> <div class="text-xs text-gray-500 shrink-0"><!></div></div></div></div></div></button>'),mr=m('<div class="w-full flex justify-center py-4 text-xs animate-pulse items-center gap-2"><!> <div class=" "> </div></div>'),pr=m('<div class=" my-2 px-3 grid grid-cols-1 lg:grid-cols-2 gap-2"></div> <!>',1),_r=m('<div class=" w-full h-full flex flex-col justify-center items-center my-16 mb-24"><div class="max-w-md text-center"><div class=" text-3xl mb-3">ðŸ˜•</div> <div class=" text-lg font-medium mb-1"> </div> <div class=" text-gray-500 text-center text-xs"> </div></div></div>'),gr=m('<div class="w-full h-full flex justify-center items-center py-10"><!></div>'),xr=m('<!> <div class="flex flex-col gap-1 px-1 mt-1.5 mb-3"><div class="flex justify-between items-center"><div class="flex items-center md:self-center text-xl font-medium px-0.5 gap-2 shrink-0"><div> </div> <div class="text-lg font-medium text-gray-500 dark:text-gray-500"> </div></div> <div class="flex w-full justify-end gap-1.5"><a class=" px-2 py-1.5 rounded-xl bg-black text-white dark:bg-white dark:text-black transition font-medium text-sm flex items-center" href="/workspace/knowledge/create"><!> <div class=" hidden md:block md:ml-1 text-xs"> </div></a></div></div></div> <div class="py-2 bg-white dark:bg-gray-900 rounded-3xl border border-gray-100/30 dark:border-gray-850/30"><div class=" flex w-full space-x-2 py-0.5 px-3.5 pb-2"><div class="flex flex-1"><div class=" self-center ml-1 mr-3"><!></div> <input class=" w-full text-sm py-1 rounded-r-xl outline-hidden bg-transparent"/> <!></div></div> <div class="px-3 flex w-full bg-transparent overflow-x-auto scrollbar-none -mx-1"><div class="flex gap-0.5 w-fit text-center text-sm rounded-full bg-transparent px-1.5 whitespace-nowrap"><!></div></div> <!></div> <div class=" text-gray-500 text-xs m-2"> </div>',1),$r=m('<div class="w-full h-full flex justify-center items-center"><!></div>');function hr(Z,V){Fe(V,!1);const a=()=>ge(ce,"$i18n",ee),$e=()=>ge(Kt,"$WEBUI_NAME",ee),q=()=>ge(Mt,"$user",ee),[ee,he]=et();de.extend(Bt);const ce=Je("i18n");let H=b(!1),M=b(!1),k=b(),fe=b(null),E=1,h=b(""),L=b(""),_=b(null),N=b(null),j=b(!1),w=b(!1);const te=()=>{E=1,n(_,null),n(N,null),n(j,!1),n(w,!1)},P=async()=>{e(j)||(E+=1,await G())},re=async()=>{te(),await G()},G=async()=>{n(w,!0);const c=await Ot(localStorage.token,e(h),e(L),E).catch(()=>[]);if(c){n(N,c.total);const f=c.items;(f??[]).length===0?n(j,!0):n(j,!1),e(_)?n(_,[...e(_),...f]):n(_,f)}return n(w,!1),c},O=async c=>{await Wt(localStorage.token,c.id).catch(z=>{ve.error(`${z}`)})&&(ve.success(a().t("Knowledge deleted successfully.")),re())},W=async c=>{try{const f=await At(localStorage.token,c.id);if(f){const z=URL.createObjectURL(f),S=document.createElement("a");S.href=z,S.download=`${c.name}.zip`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(z),ve.success(a().t("Knowledge exported successfully"))}}catch(f){ve.error(`${f}`)}};wt(async()=>{n(L,(localStorage==null?void 0:localStorage.workspaceViewOption)||""),n(H,!0)}),yt(()=>(e(H),e(h),e(L)),()=>{e(H)&&e(h)!==void 0&&e(L)!==void 0&&re()}),bt(),Ze();var A=Se();St("ovc1wm",c=>{kt(f=>{jt.title=`
		${f??""} â€¢ ${$e()??""}
	`},[()=>(a(),i(()=>a().t("Knowledge")))])});var ae=K(A);{var we=c=>{var f=xr(),z=K(f);Tt(z,{get show(){return e(M)},set show(l){n(M,l)},$$events:{confirm:()=>{O(e(fe))}},$$legacy:!0});var S=d(z,2),Ce=r(S),ye=r(Ce),be=r(ye),rt=r(be,!0);t(be);var De=d(be,2),at=r(De,!0);t(De),t(ye);var Ie=d(ye,2),Ue=r(Ie),Be=r(Ue);Qt(Be,{className:"size-3",strokeWidth:"2.5"});var Ke=d(Be,2),st=r(Ke,!0);t(Ke),t(Ue),t(Ie),t(Ce),t(S);var ke=d(S,2),je=r(ke),Me=r(je),Ee=r(Me),ot=r(Ee);Jt(ot,{className:"size-3.5"}),t(Ee);var ue=d(Ee,2);Ct(ue);var lt=d(ue,2);{var it=l=>{var x=nr(),C=r(x),se=r(C);Zt(se,{className:"size-3",strokeWidth:"2"}),t(C),t(x),_e("click",C,()=>{n(h,"")}),v(l,x)};U(lt,l=>{e(h)&&l(it)})}t(Me),t(je);var me=d(je,2),Le=r(me),nt=r(Le);er(nt,{onChange:async l=>{localStorage.workspaceViewOption=l,await Et()},get value(){return e(L)},set value(l){n(L,l)},$$legacy:!0}),t(Le),Ut(Le,l=>n(k,l),()=>e(k)),t(me);var dt=d(me,2);{var vt=l=>{var x=Se(),C=K(x);{var se=X=>{var Y=pr(),F=K(Y);Pt(F,5,()=>e(_),zt,(D,s)=>{var R=ur(),I=r(R),le=r(I),J=r(le),ie=r(J),ne=r(ie),mt=r(ne);{let u=T(()=>(a(),i(()=>a().t("Collection"))));Ye(mt,{type:"success",get content(){return e(u)}})}t(ne);var pt=d(ne,2);{var _t=u=>{var o=dr(),g=r(o);{let p=T(()=>(a(),i(()=>a().t("Read Only"))));Ye(g,{type:"muted",get content(){return e(p)}})}t(o),v(u,o)};U(pt,u=>{e(s),i(()=>{var o;return!((o=e(s))!=null&&o.write_access)})&&u(_t)})}t(ie);var gt=d(ie,2);{var xt=u=>{var o=vr(),g=r(o),p=r(g);{let y=T(()=>(q(),e(s),i(()=>q().role==="admin"?()=>{W(e(s))}:null)));ir(p,{get onExport(){return e(y)},$$events:{delete:()=>{n(fe,e(s)),n(M,!0)}}})}t(g),t(o),v(u,o)};U(gt,u=>{e(s),q(),i(()=>{var o,g;return((o=e(s))==null?void 0:o.write_access)||((g=q())==null?void 0:g.role)==="admin"})&&u(xt)})}t(J);var We=d(J,2),Ae=r(We);{let u=T(()=>(e(s),i(()=>{var o;return((o=e(s))==null?void 0:o.description)??e(s).name})));xe(Ae,{get content(){return e(u)},children:(o,g)=>{var p=cr(),y=r(p),Q=r(y,!0);t(y),t(p),B(()=>$(Q,(e(s),i(()=>e(s).name)))),v(o,p)},$$slots:{default:!0}})}var Re=d(Ae,2),Te=r(Re);{let u=T(()=>(Pe(de),e(s),i(()=>de(e(s).updated_at*1e3).format("LLLL"))));xe(Te,{get content(){return e(u)},children:(o,g)=>{var p=fr(),y=r(p);t(p),B((Q,pe)=>$(y,`${Q??""}
													${pe??""}`),[()=>(a(),i(()=>a().t("Updated"))),()=>(Pe(de),e(s),i(()=>de(e(s).updated_at*1e3).fromNow()))]),v(o,p)},$$slots:{default:!0}})}var Ve=d(Te,2),$t=r(Ve);{let u=T(()=>(e(s),a(),i(()=>{var o,g;return((g=(o=e(s))==null?void 0:o.user)==null?void 0:g.email)??a().t("Deleted User")})));xe($t,{get content(){return e(u)},className:"flex shrink-0",placement:"top-start",children:(o,g)=>{Lt();var p=Nt();B(y=>$(p,y),[()=>(a(),Pe(He),e(s),i(()=>{var y,Q,pe,qe;return a().t("By {{name}}",{name:He(((Q=(y=e(s))==null?void 0:y.user)==null?void 0:Q.name)??((qe=(pe=e(s))==null?void 0:pe.user)==null?void 0:qe.email)??a().t("Deleted User"))})}))]),v(o,p)},$$slots:{default:!0}})}t(Ve),t(Re),t(We),t(le),t(I),t(R),_e("click",R,()=>{var u,o;(o=(u=e(s))==null?void 0:u.meta)!=null&&o.document?ve.error(a().t("Only collections can be edited, create a new knowledge base to edit/add documents.")):Rt(`/workspace/knowledge/${e(s).id}`)}),v(D,R)}),t(F);var oe=d(F,2);{var Ne=D=>{tr(D,{$$events:{visible:s=>{e(w)||P()}},children:(s,R)=>{var I=mr(),le=r(I);ze(le,{className:" size-4"});var J=d(le,2),ie=r(J,!0);t(J),t(I),B(ne=>$(ie,ne),[()=>(a(),i(()=>a().t("Loading...")))]),v(s,I)},$$slots:{default:!0}})};U(oe,D=>{e(j)||D(Ne)})}v(X,Y)},ut=X=>{var Y=_r(),F=r(Y),oe=d(r(F),2),Ne=r(oe,!0);t(oe);var D=d(oe,2),s=r(D,!0);t(D),t(F),t(Y),B((R,I)=>{$(Ne,R),$(s,I)},[()=>(a(),i(()=>a().t("No knowledge found"))),()=>(a(),i(()=>a().t("Try adjusting your search or filter to find what you are looking for.")))]),v(X,Y)};U(C,X=>{e(_),i(()=>(e(_)??[]).length!==0)?X(se):X(ut,!1)})}v(l,x)},ct=l=>{var x=gr(),C=r(x);ze(C,{className:"size-4"}),t(x),v(l,x)};U(dt,l=>{e(_)!==null&&e(N)!==null?l(vt):l(ct,!1)})}t(ke);var Oe=d(ke,2),ft=r(Oe);t(Oe),B((l,x,C,se)=>{$(rt,l),$(at,e(N)),$(st,x),Dt(ue,"placeholder",C),$(ft,`â“˜ ${se??""}`)},[()=>(a(),i(()=>a().t("Knowledge"))),()=>(a(),i(()=>a().t("New Knowledge"))),()=>(a(),i(()=>a().t("Search Knowledge"))),()=>(a(),i(()=>a().t("Use '#' in the prompt input to load and include your knowledge.")))]),It(ue,()=>e(h),l=>n(h,l)),_e("wheel",me,l=>{l.deltaY!==0&&(l.preventDefault(),l.currentTarget.scrollLeft+=l.deltaY)}),v(c,f)},tt=c=>{var f=$r(),z=r(f);ze(z,{className:"size-5"}),t(f),v(c,f)};U(ae,c=>{e(H)?c(we):c(tt,!1)})}v(Z,A),Qe(),he()}function ra(Z){hr(Z,{})}export{ra as component};
//# sourceMappingURL=31.VpQIckJv.js.map
