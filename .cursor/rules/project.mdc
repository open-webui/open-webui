---
description: Open WebUI Customization Rules - Focus on UI/UX modifications within license compliance
globs: ["static/**/*", "**/*.css", "**/*.svg", "**/*.png", "**/*.ico", "**/custom.*", "**/theme*"]
alwaysApply: true
---

# Open WebUI Customization Rules

## Primary Objective
Customize Open WebUI appearance, branding, and interface within license compliance for ≤50 users, enabling complete white-labeling with required attribution.

## License Compliance Requirements (CRITICAL)

### White-Labeling Rules for ≤50 Users
- ✅ **Complete logo replacement** - Replace ALL Open WebUI logos
- ✅ **Full branding removal** - Remove Open WebUI branding from interface
- ⚠️ **Attribution REQUIRED** - Must maintain Open WebUI attribution in About section
- ❌ **Never exceed 50 users** without license upgrade

### Legal Compliance Checks
- Always verify user count before deployment
- Maintain required attribution in About section
- Document all branding modifications
- Keep license compliance documentation updated

## Asset Management Standards

### Logo and Icon Specifications (EXACT)
```
Required Logo Assets:
- logo.png: 512x512px (main application logo)
- favicon.ico: 16x16, 32x32, 48x48px (multi-size ICO file)
- favicon.png: 32x32px (standard favicon)
- favicon-96x96.png: 96x96px (high-resolution favicon)
- favicon.svg: SVG format (scalable vector)
- favicon-dark.png: 32x32px (dark theme variant)
- apple-touch-icon.png: 180x180px (iOS/PWA icon)
```

### File Location Standards
- **Frontend Assets**: `static/static/` - All favicon variants, iOS icons
- **Backend Assets**: `backend/open_webui/static/` - Main logo, backend favicons
- **Custom CSS**: `static/custom.css` - Primary customization file
- **Themes**: `static/themes/` - Custom theme definitions
- **Backgrounds**: `static/backgrounds/` - Chat background images

## Customization Workflow Rules

### Development Testing Policy
**CRITICAL: DO NOT test solutions by running the development server.** The user always has the server and Open WebUI application running in a new tab and sees changes in real time or reloads the server manually. Focus on code verification through build processes and type checking instead.

### Before Any Modifications
```bash
# ALWAYS create backup before changes
cp -r static/static customization-backup/static-$(date +%Y%m%d)
cp -r backend/open_webui/static customization-backup/backend-static-$(date +%Y%m%d)
```

### Git Workflow (ENFORCED)
- ALWAYS work on `customization` branch
- NEVER commit directly to `main`
- Use specific commit prefixes:
  - `brand:` - Logo and branding changes
  - `theme:` - Theme and color modifications  
  - `ui:` - Interface layout changes
  - `assets:` - Asset additions/replacements

### Testing Requirements (MANDATORY)
Before each commit, verify:
- [ ] All theme variants work (Light, Dark, OLED, "Her")
- [ ] Mobile responsiveness maintained
- [ ] Logo visibility on all backgrounds
- [ ] Performance impact minimal
- [ ] Accessibility standards met
- [ ] Browser compatibility (Firefox primary)

## Theme System Customization

### Available Theme Modifications
- **Light Theme** - Clean, bright interface customization
- **Dark Theme** - Dark mode styling modifications
- **OLED Dark Theme** - True black theme for OLED displays
- **"Her" Theme** - Special themed interface modifications

### CSS Customization Standards
```css
/* Use CSS variables for theme switching */
:root {
  --primary-color: #your-brand-color;
  --background-color: #your-bg-color;
  --text-color: #your-text-color;
}

/* Maintain responsive design */
@media (max-width: 768px) {
  /* Mobile-specific styles */
}

/* Accessibility compliance */
.button:focus {
  outline: 2px solid var(--focus-color);
}
```

## Interface Component Rules

### Chat Interface Styling
- Customize message bubbles, colors, spacing
- Maintain message readability
- Preserve markdown rendering capability
- Keep code syntax highlighting functional

### Sidebar Customization
- Modify navigation styling
- Maintain mobile swipe gestures
- Preserve responsive design
- Keep accessibility navigation

### Form and Button Design
- Custom button styles within usability standards
- Input field styling with proper contrast
- Dropdown styling maintaining functionality
- Maintain keyboard navigation

## Asset Optimization Requirements

### Image Standards
- **File size limit**: Logo files under 100KB
- **Format requirements**: PNG for logos, ICO for favicons, SVG for scalable
- **Quality standards**: Optimize for web without quality loss
- **Variant requirements**: Create dark theme variants where needed

### Performance Standards
- CSS files under 50KB uncompressed
- Image compression without visible quality loss
- Lazy loading for background images
- Minimal impact on page load speed

## Quality Assurance Protocols

### Visual Testing Checklist
```bash
# Test all customizations across:
1. Theme variants (Light/Dark/OLED/"Her")
2. Screen sizes (Desktop/Tablet/Mobile)
3. Browsers (Firefox primary, Chrome/Safari secondary)
4. Accessibility tools (contrast checkers)
5. Performance tools (PageSpeed Insights)
```

### Accessibility Requirements
- Maintain WCAG 2.1 AA compliance
- Verify color contrast ratios (4.5:1 minimum)
- Test keyboard navigation
- Validate screen reader compatibility
- Check focus indicators

## Localization and Text Customization

### Interface Text Modification
- Modify UI labels and messages
- Maintain context and clarity
- Test across supported languages (20+)
- Preserve formatting and special characters

### Custom Announcements
- Use rich markdown banners
- Maintain responsive design
- Test across themes
- Keep accessibility in mind

## Advanced Customization Features

### Rich Content Support
- Maintain markdown rendering quality
- Preserve code syntax highlighting
- Keep SVG interactions (pan/zoom)
- Maintain interactive artifacts functionality

### User Interface Settings
- Enable theme selection options
- Provide background customization
- Allow layout preference selection
- Include accessibility options

## Emergency Recovery Procedures

### Asset Recovery
```bash
# Restore from timestamped backup
cp -r customization-backup/static-[YYYYMMDD]/* static/static/
cp -r customization-backup/backend-static-[YYYYMMDD]/* backend/open_webui/static/

# Reset CSS modifications
git checkout HEAD -- static/custom.css
```

### Git Recovery
```bash
# Revert problematic commit
git revert [commit-hash]

# Reset to last working state
git reset --hard HEAD~1
```

## Deployment Standards

### Pre-Deployment Verification
- License compliance confirmed (≤50 users, attribution present)
- All customizations tested and documented
- Performance benchmarks met
- Backup procedures verified
- Recovery procedures tested

### Client Deployment Checklist
- [ ] Custom branding applied and tested
- [ ] Theme functionality verified
- [ ] Mobile responsiveness confirmed
- [ ] Accessibility standards met
- [ ] Performance optimized
- [ ] License compliance documented
- [ ] Client training materials prepared