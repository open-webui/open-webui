# ğŸ—ï¸ **OPEN WEBUI - ARQUITETURA TÃ‰CNICA**
## **DOCUMENTAÃ‡ÃƒO COMPLETA PARA DESENVOLVIMENTO**

---

## ğŸ“Š **VISÃƒO GERAL DA ARQUITETURA**

### **ğŸ¯ STACK TECNOLÃ“GICO ATUAL**
- **Frontend**: SvelteKit + TypeScript + TailwindCSS
- **Backend**: FastAPI + Python + SQLAlchemy
- **Database**: SQLite (default) / PostgreSQL / MySQL
- **AI Engine**: Ollama + Multi-provider support
- **ContainerizaÃ§Ã£o**: Docker + Compose
- **Build**: Vite + SvelteKit Adapter

---

## ğŸ“ **ESTRUTURA DE DIRETÃ“RIOS**

```
open-webui/
â”œâ”€â”€ ğŸ“ src/                          # ğŸ¯ FRONTEND (FOCO MODIFICAÃ‡ÃƒO)
â”‚   â”œâ”€â”€ ğŸ“ lib/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ apis/                 # Clientes API
â”‚   â”‚   â”œâ”€â”€ ğŸ“ components/           # Componentes Svelte
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ admin/           # Admin components
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ chat/            # Chat interface
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ common/          # Componentes reutilizÃ¡veis
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ icons/           # Ãcones SVG
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ layout/          # Layout components
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ workspace/       # Workspace components
â”‚   â”‚   â”œâ”€â”€ ğŸ“ stores/              # Estado global Svelte
â”‚   â”‚   â”œâ”€â”€ ğŸ“ utils/               # UtilitÃ¡rios frontend
â”‚   â”‚   â””â”€â”€ ğŸ“ constants/           # Constantes
â”‚   â”œâ”€â”€ ğŸ“ routes/                  # PÃ¡ginas SvelteKit
â”‚   â”œâ”€â”€ ğŸ“ styles/                  # CSS global
â”‚   â”œâ”€â”€ app.html                    # Template HTML base
â”‚   â””â”€â”€ app.d.ts                    # Tipos TypeScript
â”œâ”€â”€ ğŸ“ backend/                      # API FastAPI
â”‚   â”œâ”€â”€ ğŸ“ open_webui/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ routers/             # Endpoints API
â”‚   â”‚   â”œâ”€â”€ ğŸ“ models/              # Models SQLAlchemy
â”‚   â”‚   â”œâ”€â”€ ğŸ“ utils/               # UtilitÃ¡rios backend
â”‚   â”‚   â””â”€â”€ main.py                 # Entrada principal
â”‚   â””â”€â”€ requirements.txt            # DependÃªncias Python
â”œâ”€â”€ ğŸ“ static/                      # Assets estÃ¡ticos
â”œâ”€â”€ ğŸ“ kubernetes/                  # Manifests K8s
â”œâ”€â”€ ğŸ“ docker/                      # ConfiguraÃ§Ãµes Docker
â”œâ”€â”€ package.json                    # DependÃªncias Node.js
â”œâ”€â”€ vite.config.ts                  # ConfiguraÃ§Ã£o Vite
â”œâ”€â”€ svelte.config.js                # ConfiguraÃ§Ã£o Svelte
â”œâ”€â”€ tailwind.config.js              # ConfiguraÃ§Ã£o Tailwind
â””â”€â”€ tsconfig.json                   # ConfiguraÃ§Ã£o TypeScript
```

---

## ğŸ¨ **FRONTEND - COMPONENTES PRINCIPAIS**

### **ğŸ“± LAYOUT HIERARCHY**
```
App
â”œâ”€â”€ Header/Navbar                   # ğŸ¯ ALVO: Branding Alest+GOL
â”œâ”€â”€ Sidebar                         # ğŸ¯ ALVO: NavegaÃ§Ã£o personalizada
â”œâ”€â”€ Main Content
â”‚   â”œâ”€â”€ Chat Interface              # ğŸ¯ ALVO: UI conversacional
â”‚   â”œâ”€â”€ Settings Panel             # ğŸ¯ ALVO: ConfiguraÃ§Ãµes
â”‚   â”œâ”€â”€ Model Selector              # ğŸ¯ ALVO: SeleÃ§Ã£o de modelos
â”‚   â””â”€â”€ Workspace                   # ğŸ¯ ALVO: Ãrea de trabalho
â””â”€â”€ Footer                          # ğŸ¯ ALVO: RodapÃ© branded
```

### **ğŸ¨ COMPONENTES DE UI CRÃTICOS**

#### **ğŸ“ src/lib/components/layout/**
```
layout/
â”œâ”€â”€ Navbar.svelte                   # â­ PRIORIDADE 1: Header principal
â”œâ”€â”€ Sidebar.svelte                  # â­ PRIORIDADE 1: Menu lateral
â”œâ”€â”€ Footer.svelte                   # â­ PRIORIDADE 2: RodapÃ©
â””â”€â”€ TopBar.svelte                   # â­ PRIORIDADE 2: Barra superior
```

#### **ğŸ“ src/lib/components/chat/**
```
chat/
â”œâ”€â”€ Messages.svelte                 # â­ PRIORIDADE 1: Ãrea de mensagens
â”œâ”€â”€ MessageInput.svelte             # â­ PRIORIDADE 1: Input de chat
â”œâ”€â”€ MessageBubble.svelte            # â­ PRIORIDADE 2: Bolhas de mensagem
â””â”€â”€ ChatControls.svelte             # â­ PRIORIDADE 2: Controles do chat
```

#### **ğŸ“ src/lib/components/common/**
```
common/
â”œâ”€â”€ Button.svelte                   # â­ PRIORIDADE 1: BotÃµes
â”œâ”€â”€ Modal.svelte                    # â­ PRIORIDADE 2: Modais
â”œâ”€â”€ Card.svelte                     # â­ PRIORIDADE 2: Cards
â”œâ”€â”€ Input.svelte                    # â­ PRIORIDADE 2: Inputs
â””â”€â”€ Dropdown.svelte                 # â­ PRIORIDADE 3: Dropdowns
```

---

## ğŸ¨ **SISTEMA DE ESTILOS ATUAL**

### **ğŸ¨ TAILWIND CONFIGURATION**
```javascript
// tailwind.config.js - ATUAL
module.exports = {
  content: ['./src/**/*.{html,js,svelte,ts}'],
  theme: {
    extend: {
      colors: {
        // Colors atuais para modificar
        primary: colors.blue,
        gray: colors.zinc,
      },
      fontFamily: {
        sans: ['Inter', 'system-ui', 'sans-serif'],
      },
    },
  },
  plugins: [
    require('@tailwindcss/typography'),
    require('@tailwindcss/forms'),
  ],
}
```

### **ğŸ¨ CSS VARIABLES ATUAIS**
```css
/* src/styles/tailwind.css - ATUAL */
:root {
  --primary-50: 239 246 255;    /* Para modificar */
  --primary-100: 219 234 254;   /* Para modificar */
  --primary-500: 59 130 246;    /* Para modificar */
  --primary-600: 37 99 235;     /* Para modificar */
  --primary-700: 29 78 216;     /* Para modificar */
  
  /* Dark mode variants */
  --primary-dark-50: 30 58 138;
  --primary-dark-100: 30 64 175;
}
```

---

## ğŸ› ï¸ **STORES (ESTADO GLOBAL)**

### **ğŸ“Š PRINCIPAIS STORES SVELTE**
```typescript
// src/lib/stores/index.ts
export const user = writable(null);           # Estado do usuÃ¡rio
export const settings = writable({});         # ConfiguraÃ§Ãµes globais
export const models = writable([]);           # Modelos disponÃ­veis
export const chats = writable([]);            # Conversas
export const theme = writable('dark');        # ğŸ¯ TEMA ATUAL
export const sidebar = writable(true);        # Estado da sidebar
```

### **ğŸ¨ THEME STORE - ALVO PRINCIPAL**
```typescript
// src/lib/stores/theme.js - MODIFICAR
import { writable } from 'svelte/store';

export const theme = writable('default'); // Modificar para 'alest-gol'

export const themes = {
  default: {
    name: 'Default',
    colors: { /* cores atuais */ }
  },
  // ğŸ¯ ADICIONAR TEMA ALEST-GOL
  'alest-gol': {
    name: 'Alest + GOL',
    colors: {
      primary: '#FF6B00',
      secondary: '#003366',
      accent: '#2C2C2C'
    }
  }
};
```

---

## ğŸŒ **PÃGINAS E ROTAS**

### **ğŸ“ ESTRUTURA DE ROTAS ATUAIS**
```
src/routes/
â”œâ”€â”€ +layout.svelte                  # ğŸ¯ Layout global - MODIFICAR
â”œâ”€â”€ +page.svelte                    # Homepage/Dashboard
â”œâ”€â”€ c/                              # Chat routes
â”‚   â”œâ”€â”€ [id]/
â”‚   â”‚   â””â”€â”€ +page.svelte           # Chat especÃ­fico
â”œâ”€â”€ admin/                          # Admin panel
â”‚   â”œâ”€â”€ +layout.svelte             # Layout admin
â”‚   â””â”€â”€ +page.svelte               # Dashboard admin
â”œâ”€â”€ settings/                       # ConfiguraÃ§Ãµes
â”‚   â””â”€â”€ +page.svelte              # PÃ¡gina settings
â””â”€â”€ auth/                          # AutenticaÃ§Ã£o
    â”œâ”€â”€ signin/
    â””â”€â”€ signup/
```

### **ğŸ¯ LAYOUT PRINCIPAL PARA MODIFICAR**
```svelte
<!-- src/routes/+layout.svelte - TARGET -->
<script lang="ts">
  import '../styles/tailwind.css';  // ğŸ¯ Estilos globais
  import Navbar from '$lib/components/layout/Navbar.svelte';
  import Sidebar from '$lib/components/layout/Sidebar.svelte';
  
  // ğŸ¯ Imports para adicionar tema Alest-GOL
</script>

<!-- ğŸ¯ Estrutura HTML para personalizar -->
<div class="app">
  <Navbar />
  <div class="main-container">
    <Sidebar />
    <main class="content">
      <slot />
    </main>
  </div>
</div>
```

---

## ğŸ”§ **CONFIGURAÃ‡Ã•ES DE BUILD**

### **âš™ï¸ VITE CONFIG ATUAL**
```typescript
// vite.config.ts
import { sveltekit } from '@sveltejs/kit/vite';
import { defineConfig } from 'vite';

export default defineConfig({
  plugins: [sveltekit()],
  define: {
    APP_VERSION: JSON.stringify(process.env.npm_package_version),
  },
  server: {
    port: 5173,  // Dev server
    proxy: {
      '/api': 'http://localhost:8080'  // Backend proxy
    }
  }
});
```

### **âš™ï¸ SVELTE CONFIG ATUAL**
```javascript
// svelte.config.js
import adapter from '@sveltejs/adapter-node';
import { vitePreprocess } from '@sveltejs/kit/vite';

export default {
  preprocess: vitePreprocess(),
  kit: {
    adapter: adapter(),
    files: {
      assets: 'static'
    }
  }
};
```

---

## ğŸ¨ **PLANO DE MODIFICAÃ‡ÃƒO FRONTEND**

### **ğŸ¯ FASE 1: SETUP DO TEMA**
1. **Modificar `tailwind.config.js`**
   - Adicionar cores Alest-GOL
   - Configurar paleta expandida
   - Setup de dark/light modes

2. **Atualizar CSS Variables**
   - Definir custom properties
   - Criar sistema de tokens
   - Configurar transiÃ§Ãµes de tema

3. **Criar Theme Store**
   - Implementar store de tema
   - Sistema de toggle de temas
   - PersistÃªncia local

### **ğŸ¯ FASE 2: COMPONENTES BASE**
1. **Layout Components**
   - `Navbar.svelte` - Header com branding
   - `Sidebar.svelte` - Menu lateral personalizado
   - `Footer.svelte` - RodapÃ© com logos

2. **UI Components**
   - `Button.svelte` - BotÃµes com cores da marca
   - `Card.svelte` - Cards com design system
   - `Modal.svelte` - Modais branded

### **ğŸ¯ FASE 3: CHAT INTERFACE**
1. **Chat Components**
   - `Messages.svelte` - Interface de conversaÃ§Ã£o
   - `MessageInput.svelte` - Input personalizado
   - `MessageBubble.svelte` - Bolhas com cores da marca

2. **Interactive Elements**
   - Loading states personalizados
   - Animations e micro-interactions
   - Feedback visual aprimorado

### **ğŸ¯ FASE 4: ASSETS E BRANDING**
1. **Visual Assets**
   - Logos Alest + GOL
   - Ãcones personalizados
   - Patterns e backgrounds

2. **Typography**
   - Fontes corporativas
   - Hierarquia tipogrÃ¡fica
   - Responsive typography

---

## ğŸ“Š **APIS E INTEGRAÃ‡Ã•ES**

### **ğŸ”Œ CLIENT APIs (src/lib/apis/)**
```
apis/
â”œâ”€â”€ ollama.js                       # Cliente Ollama
â”œâ”€â”€ openai.js                       # Cliente OpenAI
â”œâ”€â”€ chats.js                        # API de conversas
â”œâ”€â”€ users.js                        # API de usuÃ¡rios
â”œâ”€â”€ models.js                       # API de modelos
â””â”€â”€ configs.js                      # API de configuraÃ§Ãµes
```

### **ğŸ¤– INTEGRAÃ‡ÃƒO COM OLLAMA**
```typescript
// src/lib/apis/ollama.js - NÃƒO MODIFICAR FUNCIONALIDADE
export const getModels = async () => {
  // MantÃ©m lÃ³gica existente
  // Apenas modifica UI de apresentaÃ§Ã£o
};

export const chat = async (messages) => {
  // MantÃ©m integraÃ§Ã£o com Ollama
  // UI do chat Ã© que serÃ¡ personalizada
};
```

---

## ğŸš€ **COMANDOS DE DESENVOLVIMENTO**

### **ğŸ’» FRONTEND DEVELOPMENT**
```bash
# Instalar dependÃªncias
npm install

# Modo desenvolvimento (SvelteKit)
npm run dev                         # Porta 5173

# Build para produÃ§Ã£o
npm run build

# Preview da build
npm run preview

# Linting e formataÃ§Ã£o
npm run lint
npm run format
```

### **ğŸ³ DOCKER DEVELOPMENT**
```bash
# Containers atuais funcionando
docker ps                          # Ver status

# Open WebUI (porta 3000)
docker logs open-webui             # Ver logs

# Ollama (porta 11434)  
docker logs ollama                 # Ver logs Ollama

# Restart containers se necessÃ¡rio
docker restart open-webui ollama
```

### **ğŸ§ª TESTING**
```bash
# Testes unitÃ¡rios (se configurados)
npm run test

# Testes E2E (se configurados)
npm run test:e2e

# Coverage
npm run test:coverage
```

---

## ğŸ¯ **PONTOS DE MODIFICAÃ‡ÃƒO PRIORITÃRIOS**

### **ğŸ¨ HIGH PRIORITY (Modificar primeiro)**
1. **`tailwind.config.js`** - Cores e tema base
2. **`src/routes/+layout.svelte`** - Layout global  
3. **`src/lib/components/layout/Navbar.svelte`** - Header
4. **`src/lib/components/layout/Sidebar.svelte`** - Menu lateral
5. **`src/lib/stores/theme.js`** - Sistema de temas

### **ğŸ¨ MEDIUM PRIORITY (Segunda fase)**
1. **`src/lib/components/chat/Messages.svelte`** - Interface chat
2. **`src/lib/components/common/Button.svelte`** - BotÃµes
3. **`src/lib/components/common/Card.svelte`** - Cards
4. **`src/styles/tailwind.css`** - CSS global customizado

### **ğŸ¨ LOW PRIORITY (Refinamentos)**
1. **`src/lib/components/icons/*`** - Ãcones personalizados
2. **`static/*`** - Assets estÃ¡ticos (logos, imagens)
3. **AnimaÃ§Ãµes e micro-interactions**
4. **Mobile optimizations**

---

## âš ï¸ **CUIDADOS E RESTRIÃ‡Ã•ES**

### **âŒ NÃƒO MODIFICAR**
- **`backend/`** - LÃ³gica do servidor
- **`src/lib/apis/`** - Clientes API (apenas UI)
- **Funcionalidades de chat e IA**
- **Sistema de autenticaÃ§Ã£o**
- **ConfiguraÃ§Ãµes do Ollama**

### **âœ… PODE MODIFICAR LIVREMENTE**
- **Todos os `.svelte` components**
- **CSS e estilos (`.css`, `.scss`)**
- **`tailwind.config.js`**
- **Assets em `static/`**
- **Stores de UI (tema, layout)**

### **âš ï¸ MODIFICAR COM CUIDADO**
- **`src/routes/+layout.svelte`** - Manter funcionalidade
- **Stores globais** - NÃ£o quebrar estado da app
- **TypeScript types** - Manter tipagem

---

**ğŸ“… DOCUMENTO CRIADO**: Dezembro 2024
**ğŸ¯ STATUS**: Arquitetura mapeada - Pronto para desenvolvimento
**ğŸ‘¥ TARGET**: Frontend Team - CustomizaÃ§Ã£o Alest+GOL
**ğŸ”„ VERSÃƒO**: Open WebUI v0.6.18 