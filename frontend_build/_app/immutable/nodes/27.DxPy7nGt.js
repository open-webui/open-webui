import{s as h,l as w,i as S,d as M,j as c,p as D,q as E,n as N}from"../chunks/scheduler.CRl-z1y4.js";import{S as C,i as P,a as u,c as q,t as d,b as J,d as O,m as j,e as A,g as L}from"../chunks/index.Ci9MLlfz.js";import{t as m}from"../chunks/Toaster.svelte_svelte_type_style_lang.CQ9dEDgo.js";import{g as v}from"../chunks/entry.CKIhGktT.js";import{a as x,c as z,m as b}from"../chunks/index.iZ7GkiWf.js";import{c as B}from"../chunks/index.ChrzGGh2.js";import{g as F}from"../chunks/index.BPZ_ALe6.js";import{M as G}from"../chunks/ModelEditor.Cgl29FNH.js";function y(n){let a,s;return a=new G({props:{model:n[0],onSubmit:n[2]}}),{c(){J(a.$$.fragment)},l(r){O(a.$$.fragment,r)},m(r,e){j(a,r,e),s=!0},p(r,e){const t={};e&1&&(t.model=r[0]),a.$set(t)},i(r){s||(d(a.$$.fragment,r),s=!0)},o(r){u(a.$$.fragment,r),s=!1},d(r){A(a,r)}}}function H(n){let a=n[0],s,r,e=y(n);return{c(){e.c(),s=w()},l(t){e.l(t),s=w()},m(t,i){e.m(t,i),S(t,s,i),r=!0},p(t,[i]){i&1&&h(a,a=t[0])?(L(),u(e,1,1,N),q(),e=y(t),e.c(),d(e,1),e.m(s.parentNode,s)):e.p(t,i)},i(t){r||(d(e),r=!0)},o(t){u(e),r=!1},d(t){t&&M(s),e.d(t)}}}function K(n,a,s){let r,e,t,i;c(n,x,o=>s(4,e=o)),c(n,z,o=>s(5,t=o)),c(n,b,o=>s(6,i=o));const f=D("i18n");c(n,f,o=>s(3,r=o));const k=async o=>{var g;if(i.find(_=>_.id===o.id)){m.error(`Error: A model with the ID '${o.id}' already exists. Please select a different ID to proceed.`);return}if(o.id===""){m.error("Error: Model ID cannot be empty. Please enter a valid ID to proceed.");return}o&&await B(localStorage.token,{...o,meta:{...o.meta,profile_image_url:o.meta.profile_image_url??"/static/favicon.png",suggestion_prompts:o.meta.suggestion_prompts?o.meta.suggestion_prompts.filter(p=>p.content!==""):null},params:{...o.params}}).catch(p=>(m.error(`${p}`),null))&&(await b.set(await F(localStorage.token,((g=t==null?void 0:t.features)==null?void 0:g.enable_direct_connections)&&((e==null?void 0:e.directConnections)??null))),m.success(r.t("Model created successfully!")),await v("/workspace/models"))};let l=null;return E(async()=>{window.addEventListener("message",async o=>{["https://openwebui.com","https://www.openwebui.com","http://localhost:5173"].includes(o.origin)&&s(0,l=JSON.parse(o.data))}),(window.opener??!1)&&window.opener.postMessage("loaded","*"),sessionStorage.model&&(s(0,l=JSON.parse(sessionStorage.model)),sessionStorage.removeItem("model"))}),[l,f,k]}class Z extends C{constructor(a){super(),P(this,a,K,H,h,{})}}export{Z as component};
//# sourceMappingURL=27.DxPy7nGt.js.map
