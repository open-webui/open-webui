import{s as _,l,i as g,d as w,p as k,j as S,q as b,n as y}from"../chunks/scheduler.CRl-z1y4.js";import{S as h,i as $,a as m,c as P,t as i,b as N,d as q,m as C,e as E,g as J}from"../chunks/index.Ci9MLlfz.js";import{t as u}from"../chunks/Toaster.svelte_svelte_type_style_lang.CQ9dEDgo.js";import{g as M}from"../chunks/entry.CKIhGktT.js";import{p as O}from"../chunks/index.iZ7GkiWf.js";import{c as j,g as v}from"../chunks/index.At-5C9ij.js";import{P as I}from"../chunks/PromptEditor.SxSLm8xO.js";function f(a){let r,n;return r=new I({props:{prompt:a[0],onSubmit:a[2]}}),{c(){N(r.$$.fragment)},l(o){q(r.$$.fragment,o)},m(o,e){C(r,o,e),n=!0},p(o,e){const t={};e&1&&(t.prompt=o[0]),r.$set(t)},i(o){n||(i(r.$$.fragment,o),n=!0)},o(o){m(r.$$.fragment,o),n=!1},d(o){E(r,o)}}}function L(a){let r=a[0],n,o,e=f(a);return{c(){e.c(),n=l()},l(t){e.l(t),n=l()},m(t,p){e.m(t,p),g(t,n,p),o=!0},p(t,[p]){p&1&&_(r,r=t[0])?(J(),m(e,1,1,y),P(),e=f(t),e.c(),i(e,1),e.m(n.parentNode,n)):e.p(t,p)},i(t){o||(i(e),o=!0)},o(t){m(e),o=!1},d(t){t&&w(n),e.d(t)}}}function z(a,r,n){let o;const e=k("i18n");S(a,e,s=>n(3,o=s));let t=null;const p=async s=>{await j(localStorage.token,s).catch(d=>(u.error(`${d}`),null))&&(u.success(o.t("Prompt created successfully")),await O.set(await v(localStorage.token)),await M("/workspace/prompts"))};return b(async()=>{if(window.addEventListener("message",async s=>{if(!["https://openwebui.com","https://www.openwebui.com","http://localhost:5173"].includes(s.origin))return;const c=JSON.parse(s.data);console.log(c),n(0,t={title:c.title,command:c.command,content:c.content,access_control:null})}),(window.opener??!1)&&window.opener.postMessage("loaded","*"),sessionStorage.prompt){const s=JSON.parse(sessionStorage.prompt);n(0,t={title:s.title,command:s.command,content:s.content,access_control:null}),sessionStorage.removeItem("prompt")}}),[t,e,p]}class Q extends h{constructor(r){super(),$(this,r,z,L,_,{})}}export{Q as component};
//# sourceMappingURL=30.BnS55w5j.js.map
