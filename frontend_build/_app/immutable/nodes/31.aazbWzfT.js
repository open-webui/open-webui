import{s as w,l as g,i as $,d as b,j as d,p as P,q as h}from"../chunks/scheduler.CRl-z1y4.js";import{S as y,i as S,t as m,a as u,c as C,b as q,d as B,m as j,e as E,g as M}from"../chunks/index.Ci9MLlfz.js";import{t as i}from"../chunks/Toaster.svelte_svelte_type_style_lang.CQ9dEDgo.js";import{g as l}from"../chunks/entry.CKIhGktT.js";import{p as N}from"../chunks/index.iZ7GkiWf.js";import{a as z,u as A,g as D}from"../chunks/index.At-5C9ij.js";import{p as F}from"../chunks/stores.DnCpNxKe.js";import{P as G}from"../chunks/PromptEditor.SxSLm8xO.js";function _(n){let e,r;return e=new G({props:{prompt:n[0],onSubmit:n[2],edit:!0}}),{c(){q(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,o){j(e,t,o),r=!0},p(t,o){const a={};o&1&&(a.prompt=t[0]),e.$set(a)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){u(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function H(n){let e,r,t=n[0]&&_(n);return{c(){t&&t.c(),e=g()},l(o){t&&t.l(o),e=g()},m(o,a){t&&t.m(o,a),$(o,e,a),r=!0},p(o,[a]){o[0]?t?(t.p(o,a),a&1&&m(t,1)):(t=_(o),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(M(),u(t,1,1,()=>{t=null}),C())},i(o){r||(m(t),r=!0)},o(o){u(t),r=!1},d(o){o&&b(e),t&&t.d(o)}}}function I(n,e,r){let t,o;d(n,F,s=>r(3,t=s));const a=P("i18n");d(n,a,s=>r(4,o=s));let f=null;const k=async s=>{console.log(s),await A(localStorage.token,s).catch(p=>(i.error(`${p}`),null))&&(i.success(o.t("Prompt updated successfully")),await N.set(await D(localStorage.token)),await l("/workspace/prompts"))};return h(async()=>{const s=t.url.searchParams.get("command");if(s){const c=await z(localStorage.token,s.replace(/\//g,"")).catch(p=>(i.error(`${p}`),null));c?r(0,f={title:c.title,command:c.command,content:c.content,access_control:(c==null?void 0:c.access_control)??null}):l("/workspace/prompts")}else l("/workspace/prompts")}),[f,a,k]}class V extends y{constructor(e){super(),S(this,e,I,H,w,{})}}export{V as component};
//# sourceMappingURL=31.aazbWzfT.js.map
