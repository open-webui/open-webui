{"version":3,"file":"15.Bu4pJUrp.js","sources":["../../../../../../src/lib/components/channel/Messages/Message/ProfilePreview.svelte","../../../../../../src/lib/components/icons/ChatBubbleOvalEllipsis.svelte","../../../../../../src/lib/components/icons/FaceSmile.svelte","../../../../../../node_modules/@sveltejs/svelte-virtual-list/VirtualList.svelte","../../../../../../src/lib/components/channel/Messages/Message/ReactionPicker.svelte","../../../../../../src/lib/components/channel/Messages/Message.svelte","../../../../../../src/lib/components/channel/Messages.svelte","../../../../../../src/lib/components/channel/MessageInput/InputMenu.svelte","../../../../../../src/lib/components/channel/MessageInput.svelte","../../../../../../src/lib/components/channel/Navbar.svelte","../../../../../../src/lib/components/channel/Thread.svelte","../../../../../../src/lib/components/channel/Channel.svelte","../../../../../../src/routes/(app)/channels/[id]/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { createEventDispatcher } from 'svelte';\n\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\timport { activeUserIds } from '$lib/stores';\n\n\texport let side = 'right';\n\texport let align = 'top';\n\n\texport let user = null;\n\tlet show = false;\n\n\tconst dispatch = createEventDispatcher();\n</script>\n\n<DropdownMenu.Root\n\tbind:open={show}\n\tcloseFocus={false}\n\tonOpenChange={(state) => {\n\t\tdispatch('change', state);\n\t}}\n\ttypeahead={false}\n>\n\t<DropdownMenu.Trigger>\n\t\t<slot />\n\t</DropdownMenu.Trigger>\n\n\t<slot name=\"content\">\n\t\t<DropdownMenu.Content\n\t\t\tclass=\"max-w-full w-[240px] rounded-lg z-[9999] bg-white dark:bg-black dark:text-white shadow-lg\"\n\t\t\tsideOffset={8}\n\t\t\t{side}\n\t\t\t{align}\n\t\t\ttransition={flyAndScale}\n\t\t>\n\t\t\t{#if user}\n\t\t\t\t<div class=\" flex flex-col gap-2 w-full rounded-lg\">\n\t\t\t\t\t<div class=\"py-8 relative bg-gray-900 rounded-t-lg\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tcrossorigin=\"anonymous\"\n\t\t\t\t\t\t\tsrc={user?.profile_image_url ?? `${WEBUI_BASE_URL}/static/favicon.png`}\n\t\t\t\t\t\t\tclass=\" absolute -bottom-5 left-3 size-12 ml-0.5 object-cover rounded-full -translate-y-[1px]\"\n\t\t\t\t\t\t\talt=\"profile\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\" flex flex-col pt-4 pb-2.5 px-4\">\n\t\t\t\t\t\t<div class=\" -mb-1\">\n\t\t\t\t\t\t\t<span class=\"font-medium text-sm line-clamp-1\"> {user.name} </span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\" flex items-center gap-2\">\n\t\t\t\t\t\t\t{#if $activeUserIds.includes(user.id)}\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span class=\"relative flex size-2\">\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tclass=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<span class=\"relative inline-flex rounded-full size-2 bg-green-500\" />\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\" -translate-y-[1px]\">\n\t\t\t\t\t\t\t\t\t<span class=\"text-xs\"> Active </span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span class=\"relative flex size-2\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"relative inline-flex rounded-full size-2 bg-gray-500\" />\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\" -translate-y-[1px]\">\n\t\t\t\t\t\t\t\t\t<span class=\"text-xs\"> Away </span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</DropdownMenu.Content>\n\t</slot>\n</DropdownMenu.Root>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M15.182 15.182a4.5 4.5 0 0 1-6.364 0M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Z\"\n\t/>\n</svg>\n","<script>\n\timport { onMount, tick } from 'svelte';\n\n\t// props\n\texport let items;\n\texport let height = '100%';\n\texport let itemHeight = undefined;\n\n\tlet foo;\n\n\t// read-only, but visible to consumers via bind:start\n\texport let start = 0;\n\texport let end = 0;\n\n\t// local state\n\tlet height_map = [];\n\tlet rows;\n\tlet viewport;\n\tlet contents;\n\tlet viewport_height = 0;\n\tlet visible;\n\tlet mounted;\n\n\tlet top = 0;\n\tlet bottom = 0;\n\tlet average_height;\n\n\t$: visible = items.slice(start, end).map((data, i) => {\n\t\treturn { index: i + start, data };\n\t});\n\n\t// whenever `items` changes, invalidate the current heightmap\n\t$: if (mounted) refresh(items, viewport_height, itemHeight);\n\n\tasync function refresh(items, viewport_height, itemHeight) {\n\t\tconst { scrollTop } = viewport;\n\n\t\tawait tick(); // wait until the DOM is up to date\n\n\t\tlet content_height = top - scrollTop;\n\t\tlet i = start;\n\n\t\twhile (content_height < viewport_height && i < items.length) {\n\t\t\tlet row = rows[i - start];\n\n\t\t\tif (!row) {\n\t\t\t\tend = i + 1;\n\t\t\t\tawait tick(); // render the newly visible row\n\t\t\t\trow = rows[i - start];\n\t\t\t}\n\n\t\t\tconst row_height = height_map[i] = itemHeight || row.offsetHeight;\n\t\t\tcontent_height += row_height;\n\t\t\ti += 1;\n\t\t}\n\n\t\tend = i;\n\n\t\tconst remaining = items.length - end;\n\t\taverage_height = (top + content_height) / end;\n\n\t\tbottom = remaining * average_height;\n\t\theight_map.length = items.length;\n\n\t}\n\n\tasync function handle_scroll() {\n\t\tconst { scrollTop } = viewport;\n\n\t\tconst old_start = start;\n\n\t\tfor (let v = 0; v < rows.length; v += 1) {\n\t\t\theight_map[start + v] = itemHeight || rows[v].offsetHeight;\n\t\t}\n\n\t\tlet i = 0;\n\t\tlet y = 0;\n\n\t\twhile (i < items.length) {\n\t\t\tconst row_height = height_map[i] || average_height;\n\t\t\tif (y + row_height > scrollTop) {\n\t\t\t\tstart = i;\n\t\t\t\ttop = y;\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\ty += row_height;\n\t\t\ti += 1;\n\t\t}\n\n\t\twhile (i < items.length) {\n\t\t\ty += height_map[i] || average_height;\n\t\t\ti += 1;\n\n\t\t\tif (y > scrollTop + viewport_height) break;\n\t\t}\n\n\t\tend = i;\n\n\t\tconst remaining = items.length - end;\n\t\taverage_height = y / end;\n\n\t\twhile (i < items.length) height_map[i++] = average_height;\n\t\tbottom = remaining * average_height;\n\n\t\t// prevent jumping if we scrolled up into unknown territory\n\t\tif (start < old_start) {\n\t\t\tawait tick();\n\n\t\t\tlet expected_height = 0;\n\t\t\tlet actual_height = 0;\n\n\t\t\tfor (let i = start; i < old_start; i +=1) {\n\t\t\t\tif (rows[i - start]) {\n\t\t\t\t\texpected_height += height_map[i];\n\t\t\t\t\tactual_height += itemHeight || rows[i - start].offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst d = actual_height - expected_height;\n\t\t\tviewport.scrollTo(0, scrollTop + d);\n\t\t}\n\n\t\t// TODO if we overestimated the space these\n\t\t// rows would occupy we may need to add some\n\t\t// more. maybe we can just call handle_scroll again?\n\t}\n\n\t// trigger initial refresh\n\tonMount(() => {\n\t\trows = contents.getElementsByTagName('svelte-virtual-list-row');\n\t\tmounted = true;\n\t});\n</script>\n\n<style>\n\tsvelte-virtual-list-viewport {\n\t\tposition: relative;\n\t\toverflow-y: auto;\n\t\t-webkit-overflow-scrolling:touch;\n\t\tdisplay: block;\n\t}\n\n\tsvelte-virtual-list-contents, svelte-virtual-list-row {\n\t\tdisplay: block;\n\t}\n\n\tsvelte-virtual-list-row {\n\t\toverflow: hidden;\n\t}\n</style>\n\n<svelte-virtual-list-viewport\n\tbind:this={viewport}\n\tbind:offsetHeight={viewport_height}\n\ton:scroll={handle_scroll}\n\tstyle=\"height: {height};\"\n>\n\t<svelte-virtual-list-contents\n\t\tbind:this={contents}\n\t\tstyle=\"padding-top: {top}px; padding-bottom: {bottom}px;\"\n\t>\n\t\t{#each visible as row (row.index)}\n\t\t\t<svelte-virtual-list-row>\n\t\t\t\t<slot item={row.data}>Missing template</slot>\n\t\t\t</svelte-virtual-list-row>\n\t\t{/each}\n\t</svelte-virtual-list-contents>\n</svelte-virtual-list-viewport>\n","<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport emojiGroups from '$lib/emoji-groups.json';\n\timport emojiShortCodes from '$lib/emoji-shortcodes.json';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport VirtualList from '@sveltejs/svelte-virtual-list';\n\n\texport let onClose = () => {};\n\texport let onSubmit = (name) => {};\n\texport let side = 'top';\n\texport let align = 'start';\n\texport let user = null;\n\n\tlet show = false;\n\tlet emojis = emojiShortCodes;\n\tlet search = '';\n\tlet flattenedEmojis = [];\n\tlet emojiRows = [];\n\n\t// Reactive statement to filter the emojis based on search query\n\t$: {\n\t\tif (search) {\n\t\t\temojis = Object.keys(emojiShortCodes).reduce((acc, key) => {\n\t\t\t\tif (key.includes(search)) {\n\t\t\t\t\tacc[key] = emojiShortCodes[key];\n\t\t\t\t} else {\n\t\t\t\t\tif (Array.isArray(emojiShortCodes[key])) {\n\t\t\t\t\t\tconst filtered = emojiShortCodes[key].filter((emoji) => emoji.includes(search));\n\t\t\t\t\t\tif (filtered.length) {\n\t\t\t\t\t\t\tacc[key] = filtered;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (emojiShortCodes[key].includes(search)) {\n\t\t\t\t\t\t\tacc[key] = emojiShortCodes[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\t\t} else {\n\t\t\temojis = emojiShortCodes;\n\t\t}\n\t}\n\t// Flatten emoji groups and group them into rows of 8 for virtual scrolling\n\t$: {\n\t\tflattenedEmojis = [];\n\t\tObject.keys(emojiGroups).forEach((group) => {\n\t\t\tconst groupEmojis = emojiGroups[group].filter((emoji) => emojis[emoji]);\n\t\t\tif (groupEmojis.length > 0) {\n\t\t\t\tflattenedEmojis.push({ type: 'group', label: group });\n\t\t\t\tflattenedEmojis.push(\n\t\t\t\t\t...groupEmojis.map((emoji) => ({\n\t\t\t\t\t\ttype: 'emoji',\n\t\t\t\t\t\tname: emoji,\n\t\t\t\t\t\tshortCodes:\n\t\t\t\t\t\t\ttypeof emojiShortCodes[emoji] === 'string'\n\t\t\t\t\t\t\t\t? [emojiShortCodes[emoji]]\n\t\t\t\t\t\t\t\t: emojiShortCodes[emoji]\n\t\t\t\t\t}))\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\t// Group emojis into rows of 8\n\t\temojiRows = [];\n\t\tlet currentRow = [];\n\t\tflattenedEmojis.forEach((item) => {\n\t\t\tif (item.type === 'emoji') {\n\t\t\t\tcurrentRow.push(item);\n\t\t\t\tif (currentRow.length === 8) {\n\t\t\t\t\temojiRows.push(currentRow);\n\t\t\t\t\tcurrentRow = [];\n\t\t\t\t}\n\t\t\t} else if (item.type === 'group') {\n\t\t\t\tif (currentRow.length > 0) {\n\t\t\t\t\temojiRows.push(currentRow); // Push the remaining row\n\t\t\t\t\tcurrentRow = [];\n\t\t\t\t}\n\t\t\t\temojiRows.push([item]); // Add the group label as a separate row\n\t\t\t}\n\t\t});\n\t\tif (currentRow.length > 0) {\n\t\t\temojiRows.push(currentRow); // Push the final row\n\t\t}\n\t}\n\tconst ROW_HEIGHT = 48; // Approximate height for a row with multiple emojis\n\t// Handle emoji selection\n\tfunction selectEmoji(emoji) {\n\t\tconst selectedCode = emoji.shortCodes[0];\n\t\tonSubmit(selectedCode);\n\t\tshow = false;\n\t}\n</script>\n\n<DropdownMenu.Root\n\tbind:open={show}\n\tcloseFocus={false}\n\tonOpenChange={(state) => {\n\t\tif (!state) {\n\t\t\tsearch = '';\n\t\t\tonClose();\n\t\t}\n\t}}\n\ttypeahead={false}\n>\n\t<DropdownMenu.Trigger>\n\t\t<slot />\n\t</DropdownMenu.Trigger>\n\t<DropdownMenu.Content\n\t\tclass=\"max-w-full w-80 bg-gray-50 dark:bg-gray-850 rounded-lg z-[9999] shadow-lg dark:text-white\"\n\t\tsideOffset={8}\n\t\t{side}\n\t\t{align}\n\t\ttransition={flyAndScale}\n\t>\n\t\t<div class=\"mb-1 px-3 pt-2 pb-2\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"w-full text-sm bg-transparent outline-none\"\n\t\t\t\tplaceholder=\"Search all emojis\"\n\t\t\t\tbind:value={search}\n\t\t\t/>\n\t\t</div>\n\t\t<!-- Virtualized Emoji List -->\n\t\t<div class=\"w-full flex justify-start h-96 overflow-y-auto px-3 pb-3 text-sm\">\n\t\t\t{#if emojiRows.length === 0}\n\t\t\t\t<div class=\"text-center text-xs text-gray-500 dark:text-gray-400\">No results</div>\n\t\t\t{:else}\n\t\t\t\t<div class=\"w-full flex ml-0.5\">\n\t\t\t\t\t<VirtualList rowHeight={ROW_HEIGHT} items={emojiRows} height={384} let:item>\n\t\t\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t\t\t{#if item.length === 1 && item[0].type === 'group'}\n\t\t\t\t\t\t\t\t<!-- Render group header -->\n\t\t\t\t\t\t\t\t<div class=\"text-xs font-medium mb-2 text-gray-500 dark:text-gray-400\">\n\t\t\t\t\t\t\t\t\t{item[0].label}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<!-- Render emojis in a row -->\n\t\t\t\t\t\t\t\t<div class=\"flex items-center gap-1.5 w-full\">\n\t\t\t\t\t\t\t\t\t{#each item as emojiItem}\n\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\tcontent={emojiItem.shortCodes.map((code) => `:${code}:`).join(', ')}\n\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"p-1.5 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => selectEmoji(emojiItem)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc=\"/assets/emojis/{emojiItem.name.toLowerCase()}.svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\talt={emojiItem.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"size-5\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</VirtualList>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t</DropdownMenu.Content>\n</DropdownMenu.Root>\n","<script lang=\"ts\">\n\timport dayjs from 'dayjs';\n\timport relativeTime from 'dayjs/plugin/relativeTime';\n\timport isToday from 'dayjs/plugin/isToday';\n\timport isYesterday from 'dayjs/plugin/isYesterday';\n\timport localizedFormat from 'dayjs/plugin/localizedFormat';\n\n\tdayjs.extend(relativeTime);\n\tdayjs.extend(isToday);\n\tdayjs.extend(isYesterday);\n\tdayjs.extend(localizedFormat);\n\n\timport { getContext, onMount } from 'svelte';\n\tconst i18n = getContext<Writable<i18nType>>('i18n');\n\n\timport { settings, user, shortCodesToEmojis } from '$lib/stores';\n\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\n\timport Markdown from '$lib/components/chat/Messages/Markdown.svelte';\n\timport ProfileImage from '$lib/components/chat/Messages/ProfileImage.svelte';\n\timport Name from '$lib/components/chat/Messages/Name.svelte';\n\timport ConfirmDialog from '$lib/components/common/ConfirmDialog.svelte';\n\timport GarbageBin from '$lib/components/icons/GarbageBin.svelte';\n\timport Pencil from '$lib/components/icons/Pencil.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport Textarea from '$lib/components/common/Textarea.svelte';\n\timport Image from '$lib/components/common/Image.svelte';\n\timport FileItem from '$lib/components/common/FileItem.svelte';\n\timport ProfilePreview from './Message/ProfilePreview.svelte';\n\timport ChatBubbleOvalEllipsis from '$lib/components/icons/ChatBubbleOvalEllipsis.svelte';\n\timport FaceSmile from '$lib/components/icons/FaceSmile.svelte';\n\timport ReactionPicker from './Message/ReactionPicker.svelte';\n\timport ChevronRight from '$lib/components/icons/ChevronRight.svelte';\n\timport { formatDate } from '$lib/utils';\n\n\texport let message;\n\texport let showUserProfile = true;\n\texport let thread = false;\n\n\texport let onDelete: Function = () => {};\n\texport let onEdit: Function = () => {};\n\texport let onThread: Function = () => {};\n\texport let onReaction: Function = () => {};\n\n\tlet showButtons = false;\n\n\tlet edit = false;\n\tlet editedContent = null;\n\tlet showDeleteConfirmDialog = false;\n</script>\n\n<ConfirmDialog\n\tbind:show={showDeleteConfirmDialog}\n\ttitle={$i18n.t('Delete Message')}\n\tmessage={$i18n.t('Are you sure you want to delete this message?')}\n\tonConfirm={async () => {\n\t\tawait onDelete();\n\t}}\n/>\n\n{#if message}\n\t<div\n\t\tclass=\"flex flex-col justify-between px-5 {showUserProfile\n\t\t\t? 'pt-1.5 pb-0.5'\n\t\t\t: ''} w-full {($settings?.widescreenMode ?? null)\n\t\t\t? 'max-w-full'\n\t\t\t: 'max-w-5xl'} mx-auto group hover:bg-gray-300/5 dark:hover:bg-gray-700/5 transition relative\"\n\t>\n\t\t{#if !edit}\n\t\t\t<div\n\t\t\t\tclass=\" absolute {showButtons ? '' : 'invisible group-hover:visible'} right-1 -top-2 z-10\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"flex gap-1 rounded-lg bg-white dark:bg-gray-850 shadow-md p-0.5 border border-gray-100 dark:border-gray-800\"\n\t\t\t\t>\n\t\t\t\t\t<ReactionPicker\n\t\t\t\t\t\tonClose={() => (showButtons = false)}\n\t\t\t\t\t\tonSubmit={(name) => {\n\t\t\t\t\t\t\tshowButtons = false;\n\t\t\t\t\t\t\tonReaction(name);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Add Reaction')}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"hover:bg-gray-100 dark:hover:bg-gray-800 transition rounded-lg p-1\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tshowButtons = true;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<FaceSmile />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</ReactionPicker>\n\n\t\t\t\t\t{#if !thread}\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Reply in Thread')}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"hover:bg-gray-100 dark:hover:bg-gray-800 transition rounded-lg p-1\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tonThread(message.id);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ChatBubbleOvalEllipsis />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if message.user_id === $user.id || $user.role === 'admin'}\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Edit')}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"hover:bg-gray-100 dark:hover:bg-gray-800 transition rounded-lg p-1\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tedit = true;\n\t\t\t\t\t\t\t\t\teditedContent = message.content;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Pencil />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Delete')}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"hover:bg-gray-100 dark:hover:bg-gray-800 transition rounded-lg p-1\"\n\t\t\t\t\t\t\t\ton:click={() => (showDeleteConfirmDialog = true)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<GarbageBin />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<div\n\t\t\tclass=\" flex w-full message-{message.id}\"\n\t\t\tid=\"message-{message.id}\"\n\t\t\tdir={$settings.chatDirection}\n\t\t>\n\t\t\t<div\n\t\t\t\tclass={`flex-shrink-0 ${($settings?.chatDirection ?? 'LTR') === 'LTR' ? 'mr-3' : 'ml-3'} w-9`}\n\t\t\t>\n\t\t\t\t{#if showUserProfile}\n\t\t\t\t\t<ProfilePreview user={message.user}>\n\t\t\t\t\t\t<ProfileImage\n\t\t\t\t\t\t\tsrc={message.user?.profile_image_url ??\n\t\t\t\t\t\t\t\t($i18n.language === 'dg-DG' ? `/doge.png` : `${WEBUI_BASE_URL}/static/favicon.png`)}\n\t\t\t\t\t\t\tclassName={'size-8 translate-y-1 ml-0.5'}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ProfilePreview>\n\t\t\t\t{:else}\n\t\t\t\t\t<!-- <div class=\"w-7 h-7 rounded-full bg-transparent\" /> -->\n\n\t\t\t\t\t{#if message.created_at}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"mt-1.5 flex flex-shrink-0 items-center text-xs self-center invisible group-hover:visible text-gray-500 font-medium first-letter:capitalize\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Tooltip content={dayjs(message.created_at / 1000000).format('LLLL')}>\n\t\t\t\t\t\t\t\t{dayjs(message.created_at / 1000000).format('HH:mm')}\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"flex-auto w-0 pl-1\">\n\t\t\t\t{#if showUserProfile}\n\t\t\t\t\t<Name>\n\t\t\t\t\t\t<div class=\" self-end text-base shrink-0 font-medium truncate\">\n\t\t\t\t\t\t\t{message?.user?.name}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{#if message.created_at}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\" self-center text-xs invisible group-hover:visible text-gray-400 font-medium first-letter:capitalize ml-0.5 translate-y-[1px]\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Tooltip content={dayjs(message.created_at / 1000000).format('LLLL')}>\n\t\t\t\t\t\t\t\t\t<span class=\"line-clamp-1\">{formatDate(message.created_at / 1000000)}</span>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</Name>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if (message?.data?.files ?? []).length > 0}\n\t\t\t\t\t<div class=\"my-2.5 w-full flex overflow-x-auto gap-2 flex-wrap\">\n\t\t\t\t\t\t{#each message?.data?.files as file}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{#if file.type === 'image'}\n\t\t\t\t\t\t\t\t\t<Image src={file.url} alt={file.name} imageClassName=\" max-h-96 rounded-lg\" />\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<FileItem\n\t\t\t\t\t\t\t\t\t\titem={file}\n\t\t\t\t\t\t\t\t\t\turl={file.url}\n\t\t\t\t\t\t\t\t\t\tname={file.name}\n\t\t\t\t\t\t\t\t\t\ttype={file.type}\n\t\t\t\t\t\t\t\t\t\tsize={file?.size}\n\t\t\t\t\t\t\t\t\t\tcolorClassName=\"bg-white dark:bg-gray-850 \"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if edit}\n\t\t\t\t\t<div class=\"py-2\">\n\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\tclassName=\" bg-transparent outline-none w-full resize-none\"\n\t\t\t\t\t\t\tbind:value={editedContent}\n\t\t\t\t\t\t\tonKeydown={(e) => {\n\t\t\t\t\t\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\t\t\t\t\tdocument.getElementById('close-edit-message-button')?.click();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst isCmdOrCtrlPressed = e.metaKey || e.ctrlKey;\n\t\t\t\t\t\t\t\tconst isEnterPressed = e.key === 'Enter';\n\n\t\t\t\t\t\t\t\tif (isCmdOrCtrlPressed && isEnterPressed) {\n\t\t\t\t\t\t\t\t\tdocument.getElementById('confirm-edit-message-button')?.click();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class=\" mt-2 mb-1 flex justify-end text-sm font-medium\">\n\t\t\t\t\t\t\t<div class=\"flex space-x-1.5\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tid=\"close-edit-message-button\"\n\t\t\t\t\t\t\t\t\tclass=\"px-4 py-2 bg-white dark:bg-gray-900 hover:bg-gray-100 text-gray-800 dark:text-gray-100 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tedit = false;\n\t\t\t\t\t\t\t\t\t\teditedContent = null;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{$i18n.t('Cancel')}\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tid=\"confirm-edit-message-button\"\n\t\t\t\t\t\t\t\t\tclass=\" px-4 py-2 bg-gray-900 dark:bg-white hover:bg-gray-850 text-gray-100 dark:text-gray-800 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\t\tonEdit(editedContent);\n\t\t\t\t\t\t\t\t\t\tedit = false;\n\t\t\t\t\t\t\t\t\t\teditedContent = null;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{$i18n.t('Save')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{:else}\n\t\t\t\t\t<div class=\" min-w-full markdown-prose\">\n\t\t\t\t\t\t<Markdown\n\t\t\t\t\t\t\tid={message.id}\n\t\t\t\t\t\t\tcontent={message.content}\n\t\t\t\t\t\t/>{#if message.created_at !== message.updated_at}<span class=\"text-gray-500 text-[10px]\"\n\t\t\t\t\t\t\t\t>(edited)</span\n\t\t\t\t\t\t\t>{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if (message?.reactions ?? []).length > 0}\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"flex items-center flex-wrap gap-y-1.5 gap-1 mt-1 mb-2\">\n\t\t\t\t\t\t\t\t{#each message.reactions as reaction}\n\t\t\t\t\t\t\t\t\t<Tooltip content={`:${reaction.name}:`}>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flex items-center gap-1.5 transition rounded-xl px-2 py-1 cursor-pointer {reaction.user_ids.includes(\n\t\t\t\t\t\t\t\t\t\t\t\t$user.id\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t? ' bg-blue-300/10 outline outline-blue-500/50 outline-1'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'bg-gray-300/10 dark:bg-gray-500/10 hover:outline hover:outline-gray-700/30 dark:hover:outline-gray-300/30 hover:outline-1'}\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tonReaction(reaction.name);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{#if $shortCodesToEmojis[reaction.name]}\n\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc=\"/assets/emojis/{$shortCodesToEmojis[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treaction.name\n\t\t\t\t\t\t\t\t\t\t\t\t\t].toLowerCase()}.svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\talt={reaction.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\" size-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{reaction.name}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t\t\t{#if reaction.user_ids.length > 0}\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"text-xs font-medium text-gray-500 dark:text-gray-400\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{reaction.user_ids?.length}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{/each}\n\n\t\t\t\t\t\t\t\t<ReactionPicker\n\t\t\t\t\t\t\t\t\tonSubmit={(name) => {\n\t\t\t\t\t\t\t\t\t\tonReaction(name);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Add Reaction')}>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flex items-center gap-1.5 bg-gray-500/10 hover:outline hover:outline-gray-700/30 dark:hover:outline-gray-300/30 hover:outline-1 transition rounded-xl px-1 py-1 cursor-pointer text-gray-500 dark:text-gray-400\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<FaceSmile />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t</ReactionPicker>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if !thread && message.reply_count > 0}\n\t\t\t\t\t\t<div class=\"flex items-center gap-1.5 -mt-0.5 mb-1.5\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"flex items-center text-xs py-1 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tonThread(message.id);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"font-medium mr-1\">\n\t\t\t\t\t\t\t\t\t{$i18n.t('{{COUNT}} Replies', { COUNT: message.reply_count })}</span\n\t\t\t\t\t\t\t\t><span>\n\t\t\t\t\t\t\t\t\t{' - '}{$i18n.t('Last reply')}\n\t\t\t\t\t\t\t\t\t{dayjs.unix(message.latest_reply_at / 1000000000).fromNow()}</span\n\t\t\t\t\t\t\t\t>\n\n\t\t\t\t\t\t\t\t<span class=\"ml-1\">\n\t\t\t\t\t\t\t\t\t<ChevronRight className=\"size-2.5\" strokeWidth=\"3\" />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<!-- {$i18n.t('View Replies')} -->\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\n\timport dayjs from 'dayjs';\n\timport relativeTime from 'dayjs/plugin/relativeTime';\n\timport isToday from 'dayjs/plugin/isToday';\n\timport isYesterday from 'dayjs/plugin/isYesterday';\n\n\tdayjs.extend(relativeTime);\n\tdayjs.extend(isToday);\n\tdayjs.extend(isYesterday);\n\timport { tick, getContext, onMount, createEventDispatcher } from 'svelte';\n\n\timport { settings, user } from '$lib/stores';\n\n\timport Message from './Messages/Message.svelte';\n\timport Loader from '../common/Loader.svelte';\n\timport Spinner from '../common/Spinner.svelte';\n\timport { addReaction, deleteMessage, removeReaction, updateMessage } from '$lib/apis/channels';\n\n\tconst i18n = getContext('i18n');\n\n\texport let id = null;\n\texport let channel = null;\n\texport let messages = [];\n\texport let top = false;\n\texport let thread = false;\n\n\texport let onLoad: Function = () => {};\n\texport let onThread: Function = () => {};\n\n\tlet messagesLoading = false;\n\n\tconst loadMoreMessages = async () => {\n\t\t// scroll slightly down to disable continuous loading\n\t\tconst element = document.getElementById('messages-container');\n\t\telement.scrollTop = element.scrollTop + 100;\n\n\t\tmessagesLoading = true;\n\n\t\tawait onLoad();\n\n\t\tawait tick();\n\t\tmessagesLoading = false;\n\t};\n</script>\n\n{#if messages}\n\t{@const messageList = messages.slice().reverse()}\n\t<div>\n\t\t{#if !top}\n\t\t\t<Loader\n\t\t\t\ton:visible={(e) => {\n\t\t\t\t\tconsole.log('visible');\n\t\t\t\t\tif (!messagesLoading) {\n\t\t\t\t\t\tloadMoreMessages();\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div class=\"w-full flex justify-center py-1 text-xs animate-pulse items-center gap-2\">\n\t\t\t\t\t<Spinner className=\" size-4\" />\n\t\t\t\t\t<div class=\" \">Loading...</div>\n\t\t\t\t</div>\n\t\t\t</Loader>\n\t\t{:else if !thread}\n\t\t\t<div\n\t\t\t\tclass=\"px-5\n\t\t\t\n\t\t\t{($settings?.widescreenMode ?? null) ? 'max-w-full' : 'max-w-5xl'} mx-auto\"\n\t\t\t>\n\t\t\t\t{#if channel}\n\t\t\t\t\t<div class=\"flex flex-col gap-1.5 pb-5 pt-10\">\n\t\t\t\t\t\t<div class=\"text-2xl font-medium capitalize\">{channel.name}</div>\n\n\t\t\t\t\t\t<div class=\" text-gray-500\">\n\t\t\t\t\t\t\tThis channel was created on {dayjs(channel.created_at / 1000000).format(\n\t\t\t\t\t\t\t\t'MMMM D, YYYY'\n\t\t\t\t\t\t\t)}. This is the very beginning of the {channel.name}\n\t\t\t\t\t\t\tchannel.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{:else}\n\t\t\t\t\t<div class=\"flex justify-center text-xs items-center gap-2 py-5\">\n\t\t\t\t\t\t<div class=\" \">Start of the channel</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if messageList.length > 0}\n\t\t\t\t\t<hr class=\" border-gray-50 dark:border-gray-700/20 py-2.5 w-full\" />\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{/if}\n\n\t\t{#each messageList as message, messageIdx (id ? `${id}-${message.id}` : message.id)}\n\t\t\t<Message\n\t\t\t\t{message}\n\t\t\t\t{thread}\n\t\t\t\tshowUserProfile={messageIdx === 0 ||\n\t\t\t\t\tmessageList.at(messageIdx - 1)?.user_id !== message.user_id}\n\t\t\t\tonDelete={() => {\n\t\t\t\t\tmessages = messages.filter((m) => m.id !== message.id);\n\n\t\t\t\t\tconst res = deleteMessage(localStorage.token, message.channel_id, message.id).catch(\n\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t\tonEdit={(content) => {\n\t\t\t\t\tmessages = messages.map((m) => {\n\t\t\t\t\t\tif (m.id === message.id) {\n\t\t\t\t\t\t\tm.content = content;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn m;\n\t\t\t\t\t});\n\n\t\t\t\t\tconst res = updateMessage(localStorage.token, message.channel_id, message.id, {\n\t\t\t\t\t\tcontent: content\n\t\t\t\t\t}).catch((error) => {\n\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tonThread={(id) => {\n\t\t\t\t\tonThread(id);\n\t\t\t\t}}\n\t\t\t\tonReaction={(name) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t(message?.reactions ?? [])\n\t\t\t\t\t\t\t.find((reaction) => reaction.name === name)\n\t\t\t\t\t\t\t?.user_ids?.includes($user.id) ??\n\t\t\t\t\t\tfalse\n\t\t\t\t\t) {\n\t\t\t\t\t\tmessages = messages.map((m) => {\n\t\t\t\t\t\t\tif (m.id === message.id) {\n\t\t\t\t\t\t\t\tconst reaction = m.reactions.find((reaction) => reaction.name === name);\n\n\t\t\t\t\t\t\t\tif (reaction) {\n\t\t\t\t\t\t\t\t\treaction.user_ids = reaction.user_ids.filter((id) => id !== $user.id);\n\t\t\t\t\t\t\t\t\treaction.count = reaction.user_ids.length;\n\n\t\t\t\t\t\t\t\t\tif (reaction.count === 0) {\n\t\t\t\t\t\t\t\t\t\tm.reactions = m.reactions.filter((r) => r.name !== name);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn m;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst res = removeReaction(\n\t\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\t\tmessage.channel_id,\n\t\t\t\t\t\t\tmessage.id,\n\t\t\t\t\t\t\tname\n\t\t\t\t\t\t).catch((error) => {\n\t\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmessages = messages.map((m) => {\n\t\t\t\t\t\t\tif (m.id === message.id) {\n\t\t\t\t\t\t\t\tif (m.reactions) {\n\t\t\t\t\t\t\t\t\tconst reaction = m.reactions.find((reaction) => reaction.name === name);\n\n\t\t\t\t\t\t\t\t\tif (reaction) {\n\t\t\t\t\t\t\t\t\t\treaction.user_ids.push($user.id);\n\t\t\t\t\t\t\t\t\t\treaction.count = reaction.user_ids.length;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tm.reactions.push({\n\t\t\t\t\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\t\t\t\t\tuser_ids: [$user.id],\n\t\t\t\t\t\t\t\t\t\t\tcount: 1\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn m;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst res = addReaction(localStorage.token, message.channel_id, message.id, name).catch(\n\t\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t/>\n\t\t{/each}\n\n\t\t<div class=\"pb-6\" />\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport { getContext, onMount, tick } from 'svelte';\n\n\timport { config, user, tools as _tools, mobile } from '$lib/stores';\n\timport { getTools } from '$lib/apis/tools';\n\n\timport Dropdown from '$lib/components/common/Dropdown.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport DocumentArrowUpSolid from '$lib/components/icons/DocumentArrowUpSolid.svelte';\n\timport Switch from '$lib/components/common/Switch.svelte';\n\timport GlobeAltSolid from '$lib/components/icons/GlobeAltSolid.svelte';\n\timport WrenchSolid from '$lib/components/icons/WrenchSolid.svelte';\n\timport CameraSolid from '$lib/components/icons/CameraSolid.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let screenCaptureHandler: Function;\n\texport let uploadFilesHandler: Function;\n\n\texport let onClose: Function = () => {};\n\n\tlet show = false;\n\n\t$: if (show) {\n\t\tinit();\n\t}\n\n\tconst init = async () => {};\n</script>\n\n<Dropdown\n\tbind:show\n\ton:change={(e) => {\n\t\tif (e.detail === false) {\n\t\t\tonClose();\n\t\t}\n\t}}\n>\n\t<Tooltip content={$i18n.t('More')}>\n\t\t<slot />\n\t</Tooltip>\n\n\t<div slot=\"content\">\n\t\t<DropdownMenu.Content\n\t\t\tclass=\"w-full max-w-[200px] rounded-xl px-1 py-1  border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow\"\n\t\t\tsideOffset={15}\n\t\t\talignOffset={-8}\n\t\t\tside=\"top\"\n\t\t\talign=\"start\"\n\t\t\ttransition={flyAndScale}\n\t\t>\n\t\t\t{#if !$mobile}\n\t\t\t\t<DropdownMenu.Item\n\t\t\t\t\tclass=\"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tscreenCaptureHandler();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<CameraSolid />\n\t\t\t\t\t<div class=\" line-clamp-1\">{$i18n.t('Capture')}</div>\n\t\t\t\t</DropdownMenu.Item>\n\t\t\t{/if}\n\n\t\t\t<DropdownMenu.Item\n\t\t\t\tclass=\"flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tuploadFilesHandler();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<DocumentArrowUpSolid />\n\t\t\t\t<div class=\"line-clamp-1\">{$i18n.t('Upload Files')}</div>\n\t\t\t</DropdownMenu.Item>\n\t\t</DropdownMenu.Content>\n\t</div>\n</Dropdown>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport { v4 as uuidv4 } from 'uuid';\n\n\timport { tick, getContext, onMount, onDestroy } from 'svelte';\n\n\tconst i18n = getContext('i18n');\n\n\timport { config, mobile, settings, socket } from '$lib/stores';\n\timport { blobToFile, compressImage } from '$lib/utils';\n\n\timport Tooltip from '../common/Tooltip.svelte';\n\timport RichTextInput from '../common/RichTextInput.svelte';\n\timport VoiceRecording from '../chat/MessageInput/VoiceRecording.svelte';\n\timport InputMenu from './MessageInput/InputMenu.svelte';\n\timport { uploadFile } from '$lib/apis/files';\n\timport { WEBUI_API_BASE_URL } from '$lib/constants';\n\timport FileItem from '../common/FileItem.svelte';\n\timport Image from '../common/Image.svelte';\n\timport { transcribeAudio } from '$lib/apis/audio';\n\timport FilesOverlay from '../chat/MessageInput/FilesOverlay.svelte';\n\n\texport let placeholder = $i18n.t('Send a Message');\n\texport let transparentBackground = false;\n\n\texport let id = null;\n\n\tlet draggedOver = false;\n\n\tlet recording = false;\n\tlet content = '';\n\tlet files = [];\n\n\tlet filesInputElement;\n\tlet inputFiles;\n\n\texport let typingUsers = [];\n\n\texport let onSubmit: Function;\n\texport let onChange: Function;\n\texport let scrollEnd = true;\n\texport let scrollToBottom: Function = () => {};\n\n\tconst screenCaptureHandler = async () => {\n\t\ttry {\n\t\t\t// Request screen media\n\t\t\tconst mediaStream = await navigator.mediaDevices.getDisplayMedia({\n\t\t\t\tvideo: { cursor: 'never' },\n\t\t\t\taudio: false\n\t\t\t});\n\t\t\t// Once the user selects a screen, temporarily create a video element\n\t\t\tconst video = document.createElement('video');\n\t\t\tvideo.srcObject = mediaStream;\n\t\t\t// Ensure the video loads without affecting user experience or tab switching\n\t\t\tawait video.play();\n\t\t\t// Set up the canvas to match the video dimensions\n\t\t\tconst canvas = document.createElement('canvas');\n\t\t\tcanvas.width = video.videoWidth;\n\t\t\tcanvas.height = video.videoHeight;\n\t\t\t// Grab a single frame from the video stream using the canvas\n\t\t\tconst context = canvas.getContext('2d');\n\t\t\tcontext.drawImage(video, 0, 0, canvas.width, canvas.height);\n\t\t\t// Stop all video tracks (stop screen sharing) after capturing the image\n\t\t\tmediaStream.getTracks().forEach((track) => track.stop());\n\n\t\t\t// bring back focus to this current tab, so that the user can see the screen capture\n\t\t\twindow.focus();\n\n\t\t\t// Convert the canvas to a Base64 image URL\n\t\t\tconst imageUrl = canvas.toDataURL('image/png');\n\t\t\t// Add the captured image to the files array to render it\n\t\t\tfiles = [...files, { type: 'image', url: imageUrl }];\n\t\t\t// Clean memory: Clear video srcObject\n\t\t\tvideo.srcObject = null;\n\t\t} catch (error) {\n\t\t\t// Handle any errors (e.g., user cancels screen sharing)\n\t\t\tconsole.error('Error capturing screen:', error);\n\t\t}\n\t};\n\n\tconst inputFilesHandler = async (inputFiles) => {\n\t\tinputFiles.forEach((file) => {\n\t\t\tconsole.log('Processing file:', {\n\t\t\t\tname: file.name,\n\t\t\t\ttype: file.type,\n\t\t\t\tsize: file.size,\n\t\t\t\textension: file.name.split('.').at(-1)\n\t\t\t});\n\n\t\t\tif (\n\t\t\t\t($config?.file?.max_size ?? null) !== null &&\n\t\t\t\tfile.size > ($config?.file?.max_size ?? 0) * 1024 * 1024\n\t\t\t) {\n\t\t\t\tconsole.log('File exceeds max size limit:', {\n\t\t\t\t\tfileSize: file.size,\n\t\t\t\t\tmaxSize: ($config?.file?.max_size ?? 0) * 1024 * 1024\n\t\t\t\t});\n\t\t\t\ttoast.error(\n\t\t\t\t\t$i18n.t(`File size should not exceed {{maxSize}} MB.`, {\n\t\t\t\t\t\tmaxSize: $config?.file?.max_size\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (['image/gif', 'image/webp', 'image/jpeg', 'image/png'].includes(file['type'])) {\n\t\t\t\tlet reader = new FileReader();\n\n\t\t\t\treader.onload = async (event) => {\n\t\t\t\t\tlet imageUrl = event.target.result;\n\n\t\t\t\t\tif ($settings?.imageCompression ?? false) {\n\t\t\t\t\t\tconst width = $settings?.imageCompressionSize?.width ?? null;\n\t\t\t\t\t\tconst height = $settings?.imageCompressionSize?.height ?? null;\n\n\t\t\t\t\t\tif (width || height) {\n\t\t\t\t\t\t\timageUrl = await compressImage(imageUrl, width, height);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfiles = [\n\t\t\t\t\t\t...files,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'image',\n\t\t\t\t\t\t\turl: `${imageUrl}`\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\t\t\t\t};\n\n\t\t\t\treader.readAsDataURL(file);\n\t\t\t} else {\n\t\t\t\tuploadFileHandler(file);\n\t\t\t}\n\t\t});\n\t};\n\n\tconst uploadFileHandler = async (file) => {\n\t\tconst tempItemId = uuidv4();\n\t\tconst fileItem = {\n\t\t\ttype: 'file',\n\t\t\tfile: '',\n\t\t\tid: null,\n\t\t\turl: '',\n\t\t\tname: file.name,\n\t\t\tcollection_name: '',\n\t\t\tstatus: 'uploading',\n\t\t\tsize: file.size,\n\t\t\terror: '',\n\t\t\titemId: tempItemId\n\t\t};\n\n\t\tif (fileItem.size == 0) {\n\t\t\ttoast.error($i18n.t('You cannot upload an empty file.'));\n\t\t\treturn null;\n\t\t}\n\n\t\tfiles = [...files, fileItem];\n\t\t// Check if the file is an audio file and transcribe/convert it to text file\n\t\tif (['audio/mpeg', 'audio/wav', 'audio/ogg', 'audio/x-m4a'].includes(file['type'])) {\n\t\t\tconst res = await transcribeAudio(localStorage.token, file).catch((error) => {\n\t\t\t\ttoast.error(`${error}`);\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\t\tif (res) {\n\t\t\t\tconsole.log(res);\n\t\t\t\tconst blob = new Blob([res.text], { type: 'text/plain' });\n\t\t\t\tfile = blobToFile(blob, `${file.name}.txt`);\n\n\t\t\t\tfileItem.name = file.name;\n\t\t\t\tfileItem.size = file.size;\n\t\t\t}\n\t\t}\n\n\t\ttry {\n\t\t\t// During the file upload, file content is automatically extracted.\n\t\t\tconst uploadedFile = await uploadFile(localStorage.token, file);\n\n\t\t\tif (uploadedFile) {\n\t\t\t\tconsole.log('File upload completed:', {\n\t\t\t\t\tid: uploadedFile.id,\n\t\t\t\t\tname: fileItem.name,\n\t\t\t\t\tcollection: uploadedFile?.meta?.collection_name\n\t\t\t\t});\n\n\t\t\t\tif (uploadedFile.error) {\n\t\t\t\t\tconsole.warn('File upload warning:', uploadedFile.error);\n\t\t\t\t\ttoast.warning(uploadedFile.error);\n\t\t\t\t}\n\n\t\t\t\tfileItem.status = 'uploaded';\n\t\t\t\tfileItem.file = uploadedFile;\n\t\t\t\tfileItem.id = uploadedFile.id;\n\t\t\t\tfileItem.collection_name =\n\t\t\t\t\tuploadedFile?.meta?.collection_name || uploadedFile?.collection_name;\n\t\t\t\tfileItem.url = `${WEBUI_API_BASE_URL}/files/${uploadedFile.id}`;\n\n\t\t\t\tfiles = files;\n\t\t\t} else {\n\t\t\t\tfiles = files.filter((item) => item?.itemId !== tempItemId);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\ttoast.error(`${e}`);\n\t\t\tfiles = files.filter((item) => item?.itemId !== tempItemId);\n\t\t}\n\t};\n\n\tconst handleKeyDown = (event: KeyboardEvent) => {\n\t\tif (event.key === 'Escape') {\n\t\t\tconsole.log('Escape');\n\t\t\tdraggedOver = false;\n\t\t}\n\t};\n\n\tconst onDragOver = (e) => {\n\t\te.preventDefault();\n\n\t\t// Check if a file is being draggedOver.\n\t\tif (e.dataTransfer?.types?.includes('Files')) {\n\t\t\tdraggedOver = true;\n\t\t} else {\n\t\t\tdraggedOver = false;\n\t\t}\n\t};\n\n\tconst onDragLeave = () => {\n\t\tdraggedOver = false;\n\t};\n\n\tconst onDrop = async (e) => {\n\t\te.preventDefault();\n\t\tconsole.log(e);\n\n\t\tif (e.dataTransfer?.files) {\n\t\t\tconst inputFiles = Array.from(e.dataTransfer?.files);\n\t\t\tif (inputFiles && inputFiles.length > 0) {\n\t\t\t\tconsole.log(inputFiles);\n\t\t\t\tinputFilesHandler(inputFiles);\n\t\t\t}\n\t\t}\n\n\t\tdraggedOver = false;\n\t};\n\n\tconst submitHandler = async () => {\n\t\tif (content === '' && files.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tonSubmit({\n\t\t\tcontent,\n\t\t\tdata: {\n\t\t\t\tfiles: files\n\t\t\t}\n\t\t});\n\n\t\tcontent = '';\n\t\tfiles = [];\n\n\t\tawait tick();\n\n\t\tconst chatInputElement = document.getElementById(`chat-input-${id}`);\n\t\tchatInputElement?.focus();\n\t};\n\n\t$: if (content) {\n\t\tonChange();\n\t}\n\n\tonMount(async () => {\n\t\twindow.setTimeout(() => {\n\t\t\tconst chatInput = document.getElementById(`chat-input-${id}`);\n\t\t\tchatInput?.focus();\n\t\t}, 0);\n\n\t\twindow.addEventListener('keydown', handleKeyDown);\n\t\tawait tick();\n\n\t\tconst dropzoneElement = document.getElementById('channel-container');\n\n\t\tdropzoneElement?.addEventListener('dragover', onDragOver);\n\t\tdropzoneElement?.addEventListener('drop', onDrop);\n\t\tdropzoneElement?.addEventListener('dragleave', onDragLeave);\n\t});\n\n\tonDestroy(() => {\n\t\tconsole.log('destroy');\n\t\twindow.removeEventListener('keydown', handleKeyDown);\n\n\t\tconst dropzoneElement = document.getElementById('channel-container');\n\n\t\tif (dropzoneElement) {\n\t\t\tdropzoneElement?.removeEventListener('dragover', onDragOver);\n\t\t\tdropzoneElement?.removeEventListener('drop', onDrop);\n\t\t\tdropzoneElement?.removeEventListener('dragleave', onDragLeave);\n\t\t}\n\t});\n</script>\n\n<FilesOverlay show={draggedOver} />\n\n<input\n\tbind:this={filesInputElement}\n\tbind:files={inputFiles}\n\ttype=\"file\"\n\thidden\n\tmultiple\n\ton:change={async () => {\n\t\tif (inputFiles && inputFiles.length > 0) {\n\t\t\tinputFilesHandler(Array.from(inputFiles));\n\t\t} else {\n\t\t\ttoast.error($i18n.t(`File not found.`));\n\t\t}\n\n\t\tfilesInputElement.value = '';\n\t}}\n/>\n<div class=\"bg-transparent\">\n\t<div\n\t\tclass=\"{($settings?.widescreenMode ?? null)\n\t\t\t? 'max-w-full'\n\t\t\t: 'max-w-6xl'} px-2.5 mx-auto inset-x-0 relative\"\n\t>\n\t\t<div class=\"absolute top-0 left-0 right-0 mx-auto inset-x-0 bg-transparent flex justify-center\">\n\t\t\t<div class=\"flex flex-col px-3 w-full\">\n\t\t\t\t<div class=\"relative\">\n\t\t\t\t\t{#if scrollEnd === false}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\" absolute -top-12 left-0 right-0 flex justify-center z-30 pointer-events-none\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\" bg-white border border-gray-100 dark:border-none dark:bg-white/20 p-1.5 rounded-full pointer-events-auto\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tscrollEnd = true;\n\t\t\t\t\t\t\t\t\tscrollToBottom();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\tclass=\"w-5 h-5\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\td=\"M10 3a.75.75 0 01.75.75v10.638l3.96-4.158a.75.75 0 111.08 1.04l-5.25 5.5a.75.75 0 01-1.08 0l-5.25-5.5a.75.75 0 111.08-1.04l3.96 4.158V3.75A.75.75 0 0110 3z\"\n\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"relative\">\n\t\t\t\t\t<div class=\" -mt-5\">\n\t\t\t\t\t\t{#if typingUsers.length > 0}\n\t\t\t\t\t\t\t<div class=\" text-xs px-4 mb-1\">\n\t\t\t\t\t\t\t\t<span class=\" font-normal text-black dark:text-white\">\n\t\t\t\t\t\t\t\t\t{typingUsers.map((user) => user.name).join(', ')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{$i18n.t('is typing...')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"\">\n\t\t\t{#if recording}\n\t\t\t\t<VoiceRecording\n\t\t\t\t\tbind:recording\n\t\t\t\t\ton:cancel={async () => {\n\t\t\t\t\t\trecording = false;\n\n\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\tdocument.getElementById(`chat-input-${id}`)?.focus();\n\t\t\t\t\t}}\n\t\t\t\t\ton:confirm={async (e) => {\n\t\t\t\t\t\tconst { text, filename } = e.detail;\n\t\t\t\t\t\tcontent = `${content}${text} `;\n\t\t\t\t\t\trecording = false;\n\n\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\tdocument.getElementById(`chat-input-${id}`)?.focus();\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t{:else}\n\t\t\t\t<form\n\t\t\t\t\tclass=\"w-full flex gap-1.5\"\n\t\t\t\t\ton:submit|preventDefault={() => {\n\t\t\t\t\t\tsubmitHandler();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex-1 flex flex-col relative w-full rounded-3xl px-1 bg-gray-600/5 dark:bg-gray-400/5 dark:text-gray-100\"\n\t\t\t\t\t\tdir={$settings?.chatDirection ?? 'LTR'}\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if files.length > 0}\n\t\t\t\t\t\t\t<div class=\"mx-2 mt-2.5 -mb-1 flex flex-wrap gap-2\">\n\t\t\t\t\t\t\t\t{#each files as file, fileIdx}\n\t\t\t\t\t\t\t\t\t{#if file.type === 'image'}\n\t\t\t\t\t\t\t\t\t\t<div class=\" relative group\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"relative\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={file.url}\n\t\t\t\t\t\t\t\t\t\t\t\t\talt=\"input\"\n\t\t\t\t\t\t\t\t\t\t\t\t\timageClassName=\" h-16 w-16 rounded-xl object-cover\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\" absolute -top-1 -right-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\" bg-white text-black border border-white rounded-full group-hover:visible invisible transition\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfiles.splice(fileIdx, 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfiles = files;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<FileItem\n\t\t\t\t\t\t\t\t\t\t\titem={file}\n\t\t\t\t\t\t\t\t\t\t\tname={file.name}\n\t\t\t\t\t\t\t\t\t\t\ttype={file.type}\n\t\t\t\t\t\t\t\t\t\t\tsize={file?.size}\n\t\t\t\t\t\t\t\t\t\t\tloading={file.status === 'uploading'}\n\t\t\t\t\t\t\t\t\t\t\tdismissible={true}\n\t\t\t\t\t\t\t\t\t\t\tedit={true}\n\t\t\t\t\t\t\t\t\t\t\ton:dismiss={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tfiles.splice(fileIdx, 1);\n\t\t\t\t\t\t\t\t\t\t\t\tfiles = files;\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(file);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t<div class=\"px-2.5\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"scrollbar-hidden font-primary text-left bg-transparent dark:text-gray-100 outline-none w-full pt-3 px-1 rounded-xl resize-none h-fit max-h-80 overflow-auto\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<RichTextInput\n\t\t\t\t\t\t\t\t\tbind:value={content}\n\t\t\t\t\t\t\t\t\tid={`chat-input-${id}`}\n\t\t\t\t\t\t\t\t\tmessageInput={true}\n\t\t\t\t\t\t\t\t\tshiftEnter={!$mobile ||\n\t\t\t\t\t\t\t\t\t\t!(\n\t\t\t\t\t\t\t\t\t\t\t'ontouchstart' in window ||\n\t\t\t\t\t\t\t\t\t\t\tnavigator.maxTouchPoints > 0 ||\n\t\t\t\t\t\t\t\t\t\t\tnavigator.msMaxTouchPoints > 0\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{placeholder}\n\t\t\t\t\t\t\t\t\tlargeTextAsFile={$settings?.largeTextAsFile ?? false}\n\t\t\t\t\t\t\t\t\ton:keydown={async (e) => {\n\t\t\t\t\t\t\t\t\t\te = e.detail.event;\n\t\t\t\t\t\t\t\t\t\tconst isCtrlPressed = e.ctrlKey || e.metaKey; // metaKey is for Cmd key on Mac\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t!$mobile ||\n\t\t\t\t\t\t\t\t\t\t\t!(\n\t\t\t\t\t\t\t\t\t\t\t\t'ontouchstart' in window ||\n\t\t\t\t\t\t\t\t\t\t\t\tnavigator.maxTouchPoints > 0 ||\n\t\t\t\t\t\t\t\t\t\t\t\tnavigator.msMaxTouchPoints > 0\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t// Prevent Enter key from creating a new line\n\t\t\t\t\t\t\t\t\t\t\t// Uses keyCode '13' for Enter key for chinese/japanese keyboards\n\t\t\t\t\t\t\t\t\t\t\tif (e.keyCode === 13 && !e.shiftKey) {\n\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// Submit the content when Enter key is pressed\n\t\t\t\t\t\t\t\t\t\t\tif (content !== '' && e.keyCode === 13 && !e.shiftKey) {\n\t\t\t\t\t\t\t\t\t\t\t\tsubmitHandler();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('Escape');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\ton:paste={async (e) => {\n\t\t\t\t\t\t\t\t\t\te = e.detail.event;\n\t\t\t\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\" flex justify-between mb-2.5 mt-1.5 mx-0.5\">\n\t\t\t\t\t\t\t<div class=\"ml-1 self-end flex space-x-1\">\n\t\t\t\t\t\t\t\t<InputMenu\n\t\t\t\t\t\t\t\t\t{screenCaptureHandler}\n\t\t\t\t\t\t\t\t\tuploadFilesHandler={() => {\n\t\t\t\t\t\t\t\t\t\tfilesInputElement.click();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"bg-transparent hover:bg-white/80 text-gray-800 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-1.5 outline-none focus:outline-none\"\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\taria-label=\"More\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"size-5\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</InputMenu>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"self-end flex space-x-1 mr-1\">\n\t\t\t\t\t\t\t\t{#if content === ''}\n\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Record voice')}>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tid=\"voice-input-button\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\" text-gray-600 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-200 transition rounded-full p-1.5 mr-0.5 self-center\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet stream = await navigator.mediaDevices\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.getUserMedia({ audio: true })\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.catch(function (err) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoast.error(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$i18n.t(`Permission denied when accessing microphone: {{error}}`, {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\terror: err\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (stream) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecording = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst tracks = stream.getTracks();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttracks.forEach((track) => track.stop());\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tstream = null;\n\t\t\t\t\t\t\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttoast.error($i18n.t('Permission denied when accessing microphone'));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\taria-label=\"Voice Input\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-5 h-5 translate-y-[0.5px]\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<path d=\"M7 4a3 3 0 016 0v6a3 3 0 11-6 0V4z\" />\n\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M5.5 9.643a.75.75 0 00-1.5 0V10c0 3.06 2.29 5.585 5.25 5.954V17.5h-1.5a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-1.5v-1.546A6.001 6.001 0 0016 10v-.357a.75.75 0 00-1.5 0V10a4.5 4.5 0 01-9 0v-.357z\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t<div class=\" flex items-center\">\n\t\t\t\t\t\t\t\t\t<div class=\" flex items-center\">\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Send message')}>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"send-message-button\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{content !== '' || files.length !== 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 '\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled'} transition rounded-full p-1.5 self-center\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={content === '' && files.length === 0}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"size-5\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport { getContext } from 'svelte';\n\timport { toast } from 'svelte-sonner';\n\n\timport { showArchivedChats, showSidebar, user } from '$lib/stores';\n\n\timport { slide } from 'svelte/transition';\n\timport { page } from '$app/stores';\n\n\timport UserMenu from '$lib/components/layout/Sidebar/UserMenu.svelte';\n\timport MenuLines from '../icons/MenuLines.svelte';\n\timport PencilSquare from '../icons/PencilSquare.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let channel;\n</script>\n\n<nav class=\"sticky top-0 z-30 w-full px-1.5 py-1.5 -mb-8 flex items-center drag-region\">\n\t<div\n\t\tclass=\" bg-gradient-to-b via-50% from-white via-white to-transparent dark:from-gray-900 dark:via-gray-900 dark:to-transparent pointer-events-none absolute inset-0 -bottom-7 z-[-1] blur\"\n\t></div>\n\n\t<div class=\" flex max-w-full w-full mx-auto px-1 pt-0.5 bg-transparent\">\n\t\t<div class=\"flex items-center w-full max-w-full\">\n\t\t\t<div\n\t\t\t\tclass=\"{$showSidebar\n\t\t\t\t\t? 'md:hidden'\n\t\t\t\t\t: ''} mr-1 self-start flex flex-none items-center text-gray-600 dark:text-gray-400\"\n\t\t\t>\n\t\t\t\t<button\n\t\t\t\t\tid=\"sidebar-toggle-button\"\n\t\t\t\t\tclass=\"cursor-pointer px-2 py-2 flex rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tshowSidebar.set(!$showSidebar);\n\t\t\t\t\t}}\n\t\t\t\t\taria-label=\"Toggle Sidebar\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\" m-auto self-center\">\n\t\t\t\t\t\t<MenuLines />\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tclass=\"flex-1 overflow-hidden max-w-full py-0.5\n\t\t\t{$showSidebar ? 'ml-1' : ''}\n\t\t\t\"\n\t\t\t>\n\t\t\t\t{#if channel}\n\t\t\t\t\t<div class=\"line-clamp-1 capitalize font-medium font-primary text-lg\">\n\t\t\t\t\t\t{channel.name}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"self-start flex flex-none items-center text-gray-600 dark:text-gray-400\">\n\t\t\t\t{#if $user !== undefined}\n\t\t\t\t\t<UserMenu\n\t\t\t\t\t\tclassName=\"max-w-[200px]\"\n\t\t\t\t\t\trole={$user.role}\n\t\t\t\t\t\ton:show={(e) => {\n\t\t\t\t\t\t\tif (e.detail === 'archived-chat') {\n\t\t\t\t\t\t\t\tshowArchivedChats.set(true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"select-none flex rounded-xl p-1.5 w-full hover:bg-gray-50 dark:hover:bg-gray-850 transition\"\n\t\t\t\t\t\t\taria-label=\"User Menu\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\" self-center\">\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={$user.profile_image_url}\n\t\t\t\t\t\t\t\t\tclass=\"size-6 object-cover rounded-full\"\n\t\t\t\t\t\t\t\t\talt=\"User profile\"\n\t\t\t\t\t\t\t\t\tdraggable=\"false\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</UserMenu>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</nav>\n","<script lang=\"ts\">\n\timport { goto } from '$app/navigation';\n\n\timport { socket, user } from '$lib/stores';\n\n\timport { getChannelThreadMessages, sendMessage } from '$lib/apis/channels';\n\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\timport MessageInput from './MessageInput.svelte';\n\timport Messages from './Messages.svelte';\n\timport { onDestroy, onMount, tick } from 'svelte';\n\timport { toast } from 'svelte-sonner';\n\n\texport let threadId = null;\n\texport let channel = null;\n\n\texport let onClose = () => {};\n\n\tlet messages = null;\n\tlet top = false;\n\n\tlet typingUsers = [];\n\tlet typingUsersTimeout = {};\n\n\tlet messagesContainerElement = null;\n\n\t$: if (threadId) {\n\t\tinitHandler();\n\t}\n\n\tconst scrollToBottom = () => {\n\t\tmessagesContainerElement.scrollTop = messagesContainerElement.scrollHeight;\n\t};\n\n\tconst initHandler = async () => {\n\t\tmessages = null;\n\t\ttop = false;\n\n\t\ttypingUsers = [];\n\t\ttypingUsersTimeout = {};\n\n\t\tif (channel) {\n\t\t\tmessages = await getChannelThreadMessages(localStorage.token, channel.id, threadId);\n\n\t\t\tif (messages.length < 50) {\n\t\t\t\ttop = true;\n\t\t\t}\n\n\t\t\tawait tick();\n\t\t\tscrollToBottom();\n\t\t} else {\n\t\t\tgoto('/');\n\t\t}\n\t};\n\n\tconst channelEventHandler = async (event) => {\n\t\tconsole.log(event);\n\t\tif (event.channel_id === channel.id) {\n\t\t\tconst type = event?.data?.type ?? null;\n\t\t\tconst data = event?.data?.data ?? null;\n\n\t\t\tif (type === 'message') {\n\t\t\t\tif ((data?.parent_id ?? null) === threadId) {\n\t\t\t\t\tif (messages) {\n\t\t\t\t\t\tmessages = [data, ...messages];\n\n\t\t\t\t\t\tif (typingUsers.find((user) => user.id === event.user.id)) {\n\t\t\t\t\t\t\ttypingUsers = typingUsers.filter((user) => user.id !== event.user.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'message:update') {\n\t\t\t\tif (messages) {\n\t\t\t\t\tconst idx = messages.findIndex((message) => message.id === data.id);\n\n\t\t\t\t\tif (idx !== -1) {\n\t\t\t\t\t\tmessages[idx] = data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'message:delete') {\n\t\t\t\tif (messages) {\n\t\t\t\t\tmessages = messages.filter((message) => message.id !== data.id);\n\t\t\t\t}\n\t\t\t} else if (type.includes('message:reaction')) {\n\t\t\t\tif (messages) {\n\t\t\t\t\tconst idx = messages.findIndex((message) => message.id === data.id);\n\t\t\t\t\tif (idx !== -1) {\n\t\t\t\t\t\tmessages[idx] = data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'typing' && event.message_id === threadId) {\n\t\t\t\tif (event.user.id === $user.id) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttypingUsers = data.typing\n\t\t\t\t\t? [\n\t\t\t\t\t\t\t...typingUsers,\n\t\t\t\t\t\t\t...(typingUsers.find((user) => user.id === event.user.id)\n\t\t\t\t\t\t\t\t? []\n\t\t\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tid: event.user.id,\n\t\t\t\t\t\t\t\t\t\t\tname: event.user.name\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]\n\t\t\t\t\t: typingUsers.filter((user) => user.id !== event.user.id);\n\n\t\t\t\tif (typingUsersTimeout[event.user.id]) {\n\t\t\t\t\tclearTimeout(typingUsersTimeout[event.user.id]);\n\t\t\t\t}\n\n\t\t\t\ttypingUsersTimeout[event.user.id] = setTimeout(() => {\n\t\t\t\t\ttypingUsers = typingUsers.filter((user) => user.id !== event.user.id);\n\t\t\t\t}, 5000);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst submitHandler = async ({ content, data }) => {\n\t\tif (!content) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst res = await sendMessage(localStorage.token, channel.id, {\n\t\t\tparent_id: threadId,\n\t\t\tcontent: content,\n\t\t\tdata: data\n\t\t}).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t\treturn null;\n\t\t});\n\t};\n\n\tconst onChange = async () => {\n\t\t$socket?.emit('channel-events', {\n\t\t\tchannel_id: channel.id,\n\t\t\tmessage_id: threadId,\n\t\t\tdata: {\n\t\t\t\ttype: 'typing',\n\t\t\t\tdata: {\n\t\t\t\t\ttyping: true\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tonMount(() => {\n\t\t$socket?.on('channel-events', channelEventHandler);\n\t});\n\n\tonDestroy(() => {\n\t\t$socket?.off('channel-events', channelEventHandler);\n\t});\n</script>\n\n{#if channel}\n\t<div class=\"flex flex-col w-full h-full bg-gray-50 dark:bg-gray-850\">\n\t\t<div class=\"flex items-center justify-between px-3.5 pt-3\">\n\t\t\t<div class=\" font-medium text-lg\">Thread</div>\n\n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 p-2\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<XMark />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\" max-h-full w-full overflow-y-auto pt-3\" bind:this={messagesContainerElement}>\n\t\t\t<Messages\n\t\t\t\tid={threadId}\n\t\t\t\t{channel}\n\t\t\t\t{messages}\n\t\t\t\t{top}\n\t\t\t\tthread={true}\n\t\t\t\tonLoad={async () => {\n\t\t\t\t\tconst newMessages = await getChannelThreadMessages(\n\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\tchannel.id,\n\t\t\t\t\t\tthreadId,\n\t\t\t\t\t\tmessages.length\n\t\t\t\t\t);\n\n\t\t\t\t\tmessages = [...messages, ...newMessages];\n\n\t\t\t\t\tif (newMessages.length < 50) {\n\t\t\t\t\t\ttop = true;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t/>\n\n\t\t\t<div class=\" pb-[1rem]\">\n\t\t\t\t<MessageInput id={threadId} {typingUsers} {onChange} onSubmit={submitHandler} />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport { Pane, PaneGroup, PaneResizer } from 'paneforge';\n\n\timport { onDestroy, onMount, tick } from 'svelte';\n\timport { goto } from '$app/navigation';\n\n\timport { chatId, showSidebar, socket, user } from '$lib/stores';\n\timport { getChannelById, getChannelMessages, sendMessage } from '$lib/apis/channels';\n\n\timport Messages from './Messages.svelte';\n\timport MessageInput from './MessageInput.svelte';\n\timport Navbar from './Navbar.svelte';\n\timport Drawer from '../common/Drawer.svelte';\n\timport EllipsisVertical from '../icons/EllipsisVertical.svelte';\n\timport Thread from './Thread.svelte';\n\n\texport let id = '';\n\n\tlet scrollEnd = true;\n\tlet messagesContainerElement = null;\n\n\tlet top = false;\n\n\tlet channel = null;\n\tlet messages = null;\n\n\tlet threadId = null;\n\n\tlet typingUsers = [];\n\tlet typingUsersTimeout = {};\n\n\t$: if (id) {\n\t\tinitHandler();\n\t}\n\n\tconst scrollToBottom = () => {\n\t\tif (messagesContainerElement) {\n\t\t\tmessagesContainerElement.scrollTop = messagesContainerElement.scrollHeight;\n\t\t}\n\t};\n\n\tconst initHandler = async () => {\n\t\ttop = false;\n\t\tmessages = null;\n\t\tchannel = null;\n\t\tthreadId = null;\n\n\t\ttypingUsers = [];\n\t\ttypingUsersTimeout = {};\n\n\t\tchannel = await getChannelById(localStorage.token, id).catch((error) => {\n\t\t\treturn null;\n\t\t});\n\n\t\tif (channel) {\n\t\t\tmessages = await getChannelMessages(localStorage.token, id, 0);\n\n\t\t\tif (messages) {\n\t\t\t\tscrollToBottom();\n\n\t\t\t\tif (messages.length < 50) {\n\t\t\t\t\ttop = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tgoto('/');\n\t\t}\n\t};\n\n\tconst channelEventHandler = async (event) => {\n\t\tif (event.channel_id === id) {\n\t\t\tconst type = event?.data?.type ?? null;\n\t\t\tconst data = event?.data?.data ?? null;\n\n\t\t\tif (type === 'message') {\n\t\t\t\tif ((data?.parent_id ?? null) === null) {\n\t\t\t\t\tmessages = [data, ...messages];\n\n\t\t\t\t\tif (typingUsers.find((user) => user.id === event.user.id)) {\n\t\t\t\t\t\ttypingUsers = typingUsers.filter((user) => user.id !== event.user.id);\n\t\t\t\t\t}\n\n\t\t\t\t\tawait tick();\n\t\t\t\t\tif (scrollEnd) {\n\t\t\t\t\t\tscrollToBottom();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'message:update') {\n\t\t\t\tconst idx = messages.findIndex((message) => message.id === data.id);\n\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tmessages[idx] = data;\n\t\t\t\t}\n\t\t\t} else if (type === 'message:delete') {\n\t\t\t\tmessages = messages.filter((message) => message.id !== data.id);\n\t\t\t} else if (type === 'message:reply') {\n\t\t\t\tconst idx = messages.findIndex((message) => message.id === data.id);\n\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tmessages[idx] = data;\n\t\t\t\t}\n\t\t\t} else if (type.includes('message:reaction')) {\n\t\t\t\tconst idx = messages.findIndex((message) => message.id === data.id);\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tmessages[idx] = data;\n\t\t\t\t}\n\t\t\t} else if (type === 'typing' && event.message_id === null) {\n\t\t\t\tif (event.user.id === $user.id) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttypingUsers = data.typing\n\t\t\t\t\t? [\n\t\t\t\t\t\t\t...typingUsers,\n\t\t\t\t\t\t\t...(typingUsers.find((user) => user.id === event.user.id)\n\t\t\t\t\t\t\t\t? []\n\t\t\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tid: event.user.id,\n\t\t\t\t\t\t\t\t\t\t\tname: event.user.name\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]\n\t\t\t\t\t: typingUsers.filter((user) => user.id !== event.user.id);\n\n\t\t\t\tif (typingUsersTimeout[event.user.id]) {\n\t\t\t\t\tclearTimeout(typingUsersTimeout[event.user.id]);\n\t\t\t\t}\n\n\t\t\t\ttypingUsersTimeout[event.user.id] = setTimeout(() => {\n\t\t\t\t\ttypingUsers = typingUsers.filter((user) => user.id !== event.user.id);\n\t\t\t\t}, 5000);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst submitHandler = async ({ content, data }) => {\n\t\tif (!content && (data?.files ?? []).length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst res = await sendMessage(localStorage.token, id, { content: content, data: data }).catch(\n\t\t\t(error) => {\n\t\t\t\ttoast.error(`${error}`);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t);\n\n\t\tif (res) {\n\t\t\tmessagesContainerElement.scrollTop = messagesContainerElement.scrollHeight;\n\t\t}\n\t};\n\n\tconst onChange = async () => {\n\t\t$socket?.emit('channel-events', {\n\t\t\tchannel_id: id,\n\t\t\tmessage_id: null,\n\t\t\tdata: {\n\t\t\t\ttype: 'typing',\n\t\t\t\tdata: {\n\t\t\t\t\ttyping: true\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tlet mediaQuery;\n\tlet largeScreen = false;\n\n\tonMount(() => {\n\t\tif ($chatId) {\n\t\t\tchatId.set('');\n\t\t}\n\n\t\t$socket?.on('channel-events', channelEventHandler);\n\n\t\tmediaQuery = window.matchMedia('(min-width: 1024px)');\n\n\t\tconst handleMediaQuery = async (e) => {\n\t\t\tif (e.matches) {\n\t\t\t\tlargeScreen = true;\n\t\t\t} else {\n\t\t\t\tlargeScreen = false;\n\t\t\t}\n\t\t};\n\n\t\tmediaQuery.addEventListener('change', handleMediaQuery);\n\t\thandleMediaQuery(mediaQuery);\n\t});\n\n\tonDestroy(() => {\n\t\t$socket?.off('channel-events', channelEventHandler);\n\t});\n</script>\n\n<svelte:head>\n\t<title>#{channel?.name ?? 'Channel'} | Open WebUI</title>\n</svelte:head>\n\n<div\n\tclass=\"h-screen max-h-[100dvh] transition-width duration-200 ease-in-out {$showSidebar\n\t\t? 'md:max-w-[calc(100%-260px)]'\n\t\t: ''} w-full max-w-full flex flex-col\"\n\tid=\"channel-container\"\n>\n\t<PaneGroup direction=\"horizontal\" class=\"w-full h-full\">\n\t\t<Pane defaultSize={50} minSize={50} class=\"h-full flex flex-col w-full relative\">\n\t\t\t<Navbar {channel} />\n\n\t\t\t<div class=\"flex-1 overflow-y-auto\">\n\t\t\t\t{#if channel}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\" pb-2.5 max-w-full z-10 scrollbar-hidden w-full h-full pt-6 flex-1 flex flex-col-reverse overflow-auto\"\n\t\t\t\t\t\tid=\"messages-container\"\n\t\t\t\t\t\tbind:this={messagesContainerElement}\n\t\t\t\t\t\ton:scroll={(e) => {\n\t\t\t\t\t\t\tscrollEnd = Math.abs(messagesContainerElement.scrollTop) <= 50;\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{#key id}\n\t\t\t\t\t\t\t<Messages\n\t\t\t\t\t\t\t\t{channel}\n\t\t\t\t\t\t\t\t{messages}\n\t\t\t\t\t\t\t\t{top}\n\t\t\t\t\t\t\t\tonThread={(id) => {\n\t\t\t\t\t\t\t\t\tthreadId = id;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonLoad={async () => {\n\t\t\t\t\t\t\t\t\tconst newMessages = await getChannelMessages(\n\t\t\t\t\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\tmessages.length\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\tmessages = [...messages, ...newMessages];\n\n\t\t\t\t\t\t\t\t\tif (newMessages.length < 50) {\n\t\t\t\t\t\t\t\t\t\ttop = true;\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/key}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\" pb-[1rem]\">\n\t\t\t\t<MessageInput\n\t\t\t\t\tid=\"root\"\n\t\t\t\t\t{typingUsers}\n\t\t\t\t\t{onChange}\n\t\t\t\t\tonSubmit={submitHandler}\n\t\t\t\t\t{scrollToBottom}\n\t\t\t\t\t{scrollEnd}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Pane>\n\n\t\t{#if !largeScreen}\n\t\t\t{#if threadId !== null}\n\t\t\t\t<Drawer\n\t\t\t\t\tshow={threadId !== null}\n\t\t\t\t\ton:close={() => {\n\t\t\t\t\t\tthreadId = null;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\" {threadId !== null ? ' h-screen  w-full' : 'px-6 py-4'} h-full\">\n\t\t\t\t\t\t<Thread\n\t\t\t\t\t\t\t{threadId}\n\t\t\t\t\t\t\t{channel}\n\t\t\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\t\t\tthreadId = null;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Drawer>\n\t\t\t{/if}\n\t\t{:else if threadId !== null}\n\t\t\t<PaneResizer\n\t\t\t\tclass=\"relative flex w-[3px] items-center justify-center bg-background group bg-gray-50 dark:bg-gray-850\"\n\t\t\t>\n\t\t\t\t<div class=\"z-10 flex h-7 w-5 items-center justify-center rounded-sm\">\n\t\t\t\t\t<EllipsisVertical className=\"size-4 invisible group-hover:visible\" />\n\t\t\t\t</div>\n\t\t\t</PaneResizer>\n\n\t\t\t<Pane defaultSize={50} minSize={30} class=\"h-full w-full\">\n\t\t\t\t<div class=\"h-full w-full shadow-xl\">\n\t\t\t\t\t<Thread\n\t\t\t\t\t\t{threadId}\n\t\t\t\t\t\t{channel}\n\t\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\t\tthreadId = null;\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Pane>\n\t\t{/if}\n\t</PaneGroup>\n</div>\n","<script lang=\"ts\">\n\timport { page } from '$app/stores';\n\n\timport Channel from '$lib/components/channel/Channel.svelte';\n</script>\n\n<Channel id={$page.params.id} />\n"],"names":["t1_value","ctx","show_if","_a","WEBUI_BASE_URL","attr","img","img_src_value","insert_hydration","target","div4","anchor","append_hydration","div0","div3","div1","span","div2","dirty","set_data","t1","create_if_block","flyAndScale","side","$$props","align","user","show","dispatch","createEventDispatcher","state","value","svg","path","className","strokeWidth","get_default_slot_context","svelte_virtual_list_row","get_key","i","svelte_virtual_list_viewport","svelte_virtual_list_contents","items","height","itemHeight","start","end","height_map","rows","viewport","contents","viewport_height","visible","mounted","top","bottom","average_height","refresh","scrollTop","tick","content_height","row","row_height","$$invalidate","remaining","handle_scroll","old_start","v","y","expected_height","actual_height","d","onMount","$$value","data","ROW_HEIGHT","div","each_blocks","t","t_value","img_alt_value","button","func","tooltip_changes","input","code","onClose","onSubmit","name","emojis","emojiShortCodes","search","flattenedEmojis","emojiRows","selectEmoji","emoji","selectedCode","click_handler","emojiItem","acc","key","filtered","emojiGroups","group","groupEmojis","currentRow","item","create_if_block_13","create_if_block_9","if_block3","_b","create_if_block_7","div0_class_value","div2_class_value","div2_id_value","div2_dir_value","current","_c","_d","create_if_block_15","create_if_block_14","if_block","create_if_block_12","profilepreview_changes","dayjs","formatDate","create_if_block_10","t0","t0_value","fileitem_changes","image_changes","if_block0","create_if_block_6","if_block1","create_if_block_3","if_block2","create_if_block_2","markdown_changes","button0","button1","t3","t3_value","each_value","ensure_array_like","src_url_equal","create_if_block_5","create_if_block_4","button_class_value","span0","span1","span2","t2","t2_value","t4","t4_value","relativeTime","isToday","isYesterday","localizedFormat","i18n","getContext","message","showUserProfile","thread","onDelete","onEdit","onThread","onReaction","showButtons","edit","editedContent","showDeleteConfirmDialog","func_1","click_handler_3","e","isCmdOrCtrlPressed","isEnterPressed","reaction","child_ctx","t5_value","t5","hr","message_1_changes","get_if_ctx","id","channel","messages","onLoad","messagesLoading","loadMoreMessages","element","m","deleteMessage","error","toast","content","updateMessage","$user","r","removeReaction","addReaction","screenCaptureHandler","uploadFilesHandler","init","create_if_block_1","form","div7","div6","div5","richtextinput_changes","button_disabled_value","placeholder","$i18n","transparentBackground","draggedOver","recording","files","filesInputElement","inputFiles","typingUsers","onChange","scrollEnd","scrollToBottom","mediaStream","video","canvas","track","imageUrl","inputFilesHandler","file","$config","reader","event","$settings","width","compressImage","uploadFileHandler","tempItemId","uuidv4","fileItem","res","transcribeAudio","blob","blobToFile","uploadedFile","uploadFile","WEBUI_API_BASE_URL","handleKeyDown","onDragOver","onDragLeave","onDrop","submitHandler","chatInputElement","chatInput","dropzoneElement","onDestroy","text","filename","fileIdx","$mobile","stream","err","usermenu_changes","nav","showSidebar","$showSidebar","showArchivedChats","threadId","typingUsersTimeout","messagesContainerElement","initHandler","getChannelThreadMessages","goto","channelEventHandler","type","idx","sendMessage","$socket","newMessages","drawer_changes","div_class_value","getChannelById","getChannelMessages","mediaQuery","largeScreen","$chatId","chatId","handleMediaQuery"],"mappings":"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","x_google_ignoreList":[3]}