import{s as Fe,E as Pe,F as Ue,a as w,d,f as c,i as S,g as p,n as ce,e as g,c as v,Q as gt,B as st,k as O,o as q,y as De,A as xe,p as nt,j as je,N as ot,u as ie,t as _e,b as ge,h as ve,C as Se,z as vt,H as et,q as wt,M as $t}from"../chunks/scheduler.CRl-z1y4.js";import{S as Ae,i as We,t as D,g as Ce,c as Te,a as V,b as L,d as K,m as j,e as H,f as Ve}from"../chunks/index.Ci9MLlfz.js";import{F as bt}from"../chunks/fuse.CU2r43ac.js";import{t as G}from"../chunks/Toaster.svelte_svelte_type_style_lang.CQ9dEDgo.js";import{g as kt}from"../chunks/entry.CKIhGktT.js";import{p as yt}from"../chunks/stores.DnCpNxKe.js";import{s as It,n as Et}from"../chunks/index.iZ7GkiWf.js";import{u as Dt,a as xt}from"../chunks/index.BpBMeWAg.js";import{b as Vt,r as Ft,e as Ct,f as Tt,u as Nt,h as Bt,g as Mt}from"../chunks/index.J3n-LmoC.js";import{t as St}from"../chunks/index.CXWwS1xV.js";import{n as ct,v as At,o as Wt}from"../chunks/index.DD5gL1tX.js";import{S as zt}from"../chunks/Spinner.B5qNQZjw.js";import{e as ft}from"../chunks/each.Cd7EUOR7.js";import{F as Pt}from"../chunks/FileItem.Lzieq5vp.js";import{A as Ut,D as Lt}from"../chunks/Drawer.DZSWC3Dw.js";import"../chunks/updater.e7zyckLc.js";import{D as Kt,M as Ze}from"../chunks/Dropdown.9uTl7bwK.js";import{b as jt}from"../chunks/menu-trigger.HLnuFu5_.js";import{f as Ht}from"../chunks/index.BFuekP1B.js";import{T as tt}from"../chunks/Tooltip.DuavYtFf.js";import{F as Ot}from"../chunks/FolderOpen.BjOOvh2K.js";import"../chunks/relativeTime.BDz4fsXT.js";import{M as qt}from"../chunks/Modal.DNebWnXQ.js";import{R as at,V as Rt}from"../chunks/RichTextInput.B10G3PGl.js";import{X as Xt}from"../chunks/XMark.DKXpQqi-.js";import{M as Qt}from"../chunks/Mic.Dn0CLKN8.js";import{C as Yt}from"../chunks/ConfirmDialog.BpLky8Hi.js";import{C as Gt}from"../chunks/ChevronLeft.Dk6bIOFh.js";import{A as Jt,L as Zt}from"../chunks/AccessControlModal.G05MVtqd.js";function el(s){let e,t;return{c(){e=Pe("svg"),t=Pe("path"),this.h()},l(l){e=Ue(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=w(e);t=Ue(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(t).forEach(d),r.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m15 11.25-3-3m0 0-3 3m3-3v7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){S(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:ce,o:ce,d(l){l&&d(e)}}}function tl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=a=>{"className"in a&&t(0,l=a.className),"strokeWidth"in a&&t(1,r=a.strokeWidth)},[l,r]}class ll extends Ae{constructor(e){super(),We(this,e,tl,el,Fe,{className:0,strokeWidth:1})}}function ut(s,e,t){const l=s.slice();return l[6]=e[t],l}function dt(s){var o,i,f,u,$,I;let e,t,l,r;function a(){return s[4](s[6])}function n(){return s[5](s[6])}return t=new Pt({props:{className:"w-full",colorClassName:(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition",small:s[2],item:s[6],name:((o=s[6])==null?void 0:o.name)??((f=(i=s[6])==null?void 0:i.meta)==null?void 0:f.name),type:"file",size:((u=s[6])==null?void 0:u.size)??((I=($=s[6])==null?void 0:$.meta)==null?void 0:I.size)??"",loading:s[6].status==="uploading",dismissible:!0}}),t.$on("click",a),t.$on("dismiss",n),{c(){e=g("div"),L(t.$$.fragment),l=O(),this.h()},l(k){e=v(k,"DIV",{class:!0});var x=w(e);K(t.$$.fragment,x),l=q(x),x.forEach(d),this.h()},h(){c(e,"class","mt-1 px-2")},m(k,x){S(k,e,x),j(t,e,null),p(e,l),r=!0},p(k,x){var T,N,W,F,A,y;s=k;const b={};x&3&&(b.colorClassName=(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition"),x&4&&(b.small=s[2]),x&2&&(b.item=s[6]),x&2&&(b.name=((T=s[6])==null?void 0:T.name)??((W=(N=s[6])==null?void 0:N.meta)==null?void 0:W.name)),x&2&&(b.size=((F=s[6])==null?void 0:F.size)??((y=(A=s[6])==null?void 0:A.meta)==null?void 0:y.size)??""),x&2&&(b.loading=s[6].status==="uploading"),t.$set(b)},i(k){r||(D(t.$$.fragment,k),r=!0)},o(k){V(t.$$.fragment,k),r=!1},d(k){k&&d(e),H(t)}}}function rl(s){let e,t,l=ft(s[1]),r=[];for(let n=0;n<l.length;n+=1)r[n]=dt(ut(s,l,n));const a=n=>V(r[n],1,1,()=>{r[n]=null});return{c(){e=g("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=v(n,"DIV",{class:!0});var o=w(e);for(let i=0;i<r.length;i+=1)r[i].l(o);o.forEach(d),this.h()},h(){c(e,"class","max-h-full flex flex-col w-full")},m(n,o){S(n,e,o);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);t=!0},p(n,[o]){if(o&15){l=ft(n[1]);let i;for(i=0;i<l.length;i+=1){const f=ut(n,l,i);r[i]?(r[i].p(f,o),D(r[i],1)):(r[i]=dt(f),r[i].c(),D(r[i],1),r[i].m(e,null))}for(Ce(),i=l.length;i<r.length;i+=1)a(i);Te()}},i(n){if(!t){for(let o=0;o<l.length;o+=1)D(r[o]);t=!0}},o(n){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)V(r[o]);t=!1},d(n){n&&d(e),gt(r,n)}}}function sl(s,e,t){const l=st();let{selectedFileId:r=null}=e,{files:a=[]}=e,{small:n=!1}=e;const o=f=>{f.status!=="uploading"&&l("click",f.id)},i=f=>{f.status!=="uploading"&&l("delete",f.id)};return s.$$set=f=>{"selectedFileId"in f&&t(0,r=f.selectedFileId),"files"in f&&t(1,a=f.files),"small"in f&&t(2,n=f.small)},[r,a,n,l,o,i]}class nl extends Ae{constructor(e){super(),We(this,e,sl,rl,Fe,{selectedFileId:0,files:1,small:2})}}function ol(s){let e,t;return{c(){e=Pe("svg"),t=Pe("path"),this.h()},l(l){e=Ue(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=w(e);t=Ue(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(t).forEach(d),r.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){S(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:ce,o:ce,d(l){l&&d(e)}}}function al(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=a=>{"className"in a&&t(0,l=a.className),"strokeWidth"in a&&t(1,r=a.strokeWidth)},[l,r]}class il extends Ae{constructor(e){super(),We(this,e,al,ol,Fe,{className:0,strokeWidth:1})}}function cl(s){let e,t;return{c(){e=Pe("svg"),t=Pe("path"),this.h()},l(l){e=Ue(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=w(e);t=Ue(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(t).forEach(d),r.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){S(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:ce,o:ce,d(l){l&&d(e)}}}function fl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=a=>{"className"in a&&t(0,l=a.className),"strokeWidth"in a&&t(1,r=a.strokeWidth)},[l,r]}class ul extends Ae{constructor(e){super(),We(this,e,fl,cl,Fe,{className:0,strokeWidth:1})}}function dl(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>',l,r;return{c(){e=g("button"),e.innerHTML=t,this.h()},l(a){e=v(a,"BUTTON",{class:!0,"data-svelte-h":!0}),ot(e)!=="svelte-144k6kh"&&(e.innerHTML=t),this.h()},h(){c(e,"class","p-1.5 rounded-xl hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition font-medium text-sm flex items-center space-x-1")},m(a,n){S(a,e,n),l||(r=ie(e,"click",s[9]),l=!0)},p:ce,d(a){a&&d(e),l=!1,r()}}}function ml(s){let e,t;return e=new tt({props:{content:s[2].t("Add Content"),$$slots:{default:[dl]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const a={};r&4&&(a.content=l[2].t("Add Content")),r&4098&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function hl(s){let e,t,l,r=s[2].t("Upload files")+"",a,n;return e=new ll({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=O(),l=g("div"),a=_e(r),this.h()},l(o){K(e.$$.fragment,o),t=q(o),l=v(o,"DIV",{class:!0});var i=w(l);a=ge(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(o,i){j(e,o,i),S(o,t,i),S(o,l,i),p(l,a),n=!0},p(o,i){(!n||i&4)&&r!==(r=o[2].t("Upload files")+"")&&ve(a,r)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){o&&(d(t),d(l)),H(e,o)}}}function pl(s){let e,t,l,r=s[2].t("Upload directory")+"",a,n;return e=new Ot({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=O(),l=g("div"),a=_e(r),this.h()},l(o){K(e.$$.fragment,o),t=q(o),l=v(o,"DIV",{class:!0});var i=w(l);a=ge(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(o,i){j(e,o,i),S(o,t,i),S(o,l,i),p(l,a),n=!0},p(o,i){(!n||i&4)&&r!==(r=o[2].t("Upload directory")+"")&&ve(a,r)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){o&&(d(t),d(l)),H(e,o)}}}function _l(s){let e,t,l,r=s[2].t("Sync directory")+"",a,n;return e=new ul({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=O(),l=g("div"),a=_e(r),this.h()},l(o){K(e.$$.fragment,o),t=q(o),l=v(o,"DIV",{class:!0});var i=w(l);a=ge(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(o,i){j(e,o,i),S(o,t,i),S(o,l,i),p(l,a),n=!0},p(o,i){(!n||i&4)&&r!==(r=o[2].t("Sync directory")+"")&&ve(a,r)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){o&&(d(t),d(l)),H(e,o)}}}function gl(s){let e,t;return e=new Ze({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[_l]},$$scope:{ctx:s}}}),e.$on("click",s[7]),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const a={};r&4100&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function vl(s){let e,t,l,r=s[2].t("Add text content")+"",a,n;return e=new il({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=O(),l=g("div"),a=_e(r),this.h()},l(o){K(e.$$.fragment,o),t=q(o),l=v(o,"DIV",{class:!0});var i=w(l);a=ge(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(o,i){j(e,o,i),S(o,t,i),S(o,l,i),p(l,a),n=!0},p(o,i){(!n||i&4)&&r!==(r=o[2].t("Add text content")+"")&&ve(a,r)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){o&&(d(t),d(l)),H(e,o)}}}function wl(s){let e,t,l,r,a,n,o,i;return e=new Ze({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[hl]},$$scope:{ctx:s}}}),e.$on("click",s[5]),l=new Ze({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[pl]},$$scope:{ctx:s}}}),l.$on("click",s[6]),a=new tt({props:{content:s[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files."),className:"w-full",$$slots:{default:[gl]},$$scope:{ctx:s}}}),o=new Ze({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[vl]},$$scope:{ctx:s}}}),o.$on("click",s[8]),{c(){L(e.$$.fragment),t=O(),L(l.$$.fragment),r=O(),L(a.$$.fragment),n=O(),L(o.$$.fragment)},l(f){K(e.$$.fragment,f),t=q(f),K(l.$$.fragment,f),r=q(f),K(a.$$.fragment,f),n=q(f),K(o.$$.fragment,f)},m(f,u){j(e,f,u),S(f,t,u),j(l,f,u),S(f,r,u),j(a,f,u),S(f,n,u),j(o,f,u),i=!0},p(f,u){const $={};u&4100&&($.$$scope={dirty:u,ctx:f}),e.$set($);const I={};u&4100&&(I.$$scope={dirty:u,ctx:f}),l.$set(I);const k={};u&4&&(k.content=f[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files.")),u&4100&&(k.$$scope={dirty:u,ctx:f}),a.$set(k);const x={};u&4100&&(x.$$scope={dirty:u,ctx:f}),o.$set(x)},i(f){i||(D(e.$$.fragment,f),D(l.$$.fragment,f),D(a.$$.fragment,f),D(o.$$.fragment,f),i=!0)},o(f){V(e.$$.fragment,f),V(l.$$.fragment,f),V(a.$$.fragment,f),V(o.$$.fragment,f),i=!1},d(f){f&&(d(t),d(r),d(n)),H(e,f),H(l,f),H(a,f),H(o,f)}}}function $l(s){let e,t,l;return t=new jt({props:{class:"w-full max-w-44 rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow",sideOffset:4,side:"bottom",align:"end",transition:Ht,$$slots:{default:[wl]},$$scope:{ctx:s}}}),{c(){e=g("div"),L(t.$$.fragment),this.h()},l(r){e=v(r,"DIV",{slot:!0});var a=w(e);K(t.$$.fragment,a),a.forEach(d),this.h()},h(){c(e,"slot","content")},m(r,a){S(r,e,a),j(t,e,null),l=!0},p(r,a){const n={};a&4100&&(n.$$scope={dirty:a,ctx:r}),t.$set(n)},i(r){l||(D(t.$$.fragment,r),l=!0)},o(r){V(t.$$.fragment,r),l=!1},d(r){r&&d(e),H(t)}}}function bl(s){let e,t,l;function r(n){s[10](n)}let a={align:"end",$$slots:{content:[$l],default:[ml]},$$scope:{ctx:s}};return s[1]!==void 0&&(a.show=s[1]),e=new Kt({props:a}),De.push(()=>Ve(e,"show",r)),e.$on("change",s[11]),{c(){L(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,o){j(e,n,o),l=!0},p(n,[o]){const i={};o&4102&&(i.$$scope={dirty:o,ctx:n}),!t&&o&2&&(t=!0,i.show=n[1],xe(()=>t=!1)),e.$set(i)},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){H(e,n)}}}function kl(s,e,t){let l;const r=st(),a=nt("i18n");je(s,a,b=>t(2,l=b));let{onClose:n=()=>{}}=e,o=!1;const i=()=>{r("upload",{type:"files"})},f=()=>{r("upload",{type:"directory"})},u=()=>{r("sync",{type:"directory"})},$=()=>{r("upload",{type:"text"})},I=b=>{b.stopPropagation(),t(1,o=!0)};function k(b){o=b,t(1,o)}const x=b=>{b.detail===!1&&n()};return s.$$set=b=>{"onClose"in b&&t(0,n=b.onClose)},[n,o,l,r,a,i,f,u,$,I,k,x]}class yl extends Ae{constructor(e){super(),We(this,e,kl,bl,Fe,{onClose:0})}}function Il(s){let e,t;return e=new tt({props:{content:s[4].t("Voice Input"),$$slots:{default:[Dl]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const a={};r&16&&(a.content=l[4].t("Voice Input")),r&65560&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function El(s){let e,t,l,r;function a(o){s[10](o)}let n={className:"p-1"};return s[3]!==void 0&&(n.recording=s[3]),t=new Rt({props:n}),De.push(()=>Ve(t,"recording",a)),t.$on("cancel",s[11]),t.$on("confirm",s[12]),{c(){e=g("div"),L(t.$$.fragment),this.h()},l(o){e=v(o,"DIV",{class:!0});var i=w(e);K(t.$$.fragment,i),i.forEach(d),this.h()},h(){c(e,"class","max-w-full w-full")},m(o,i){S(o,e,i),j(t,e,null),r=!0},p(o,i){const f={};!l&&i&8&&(l=!0,f.recording=o[3],xe(()=>l=!1)),t.$set(f)},i(o){r||(D(t.$$.fragment,o),r=!0)},o(o){V(t.$$.fragment,o),r=!1},d(o){o&&d(e),H(t)}}}function Dl(s){let e,t,l,r,a;return t=new Qt({props:{className:"size-5"}}),{c(){e=g("button"),L(t.$$.fragment),this.h()},l(n){e=v(n,"BUTTON",{class:!0,type:!0});var o=w(e);K(t.$$.fragment,o),o.forEach(d),this.h()},h(){c(e,"class","p-2 bg-gray-50 text-gray-700 dark:bg-gray-700 dark:text-white transition rounded-full"),c(e,"type","button")},m(n,o){S(n,e,o),j(t,e,null),l=!0,r||(a=ie(e,"click",s[13]),r=!0)},p:ce,i(n){l||(D(t.$$.fragment,n),l=!0)},o(n){V(t.$$.fragment,n),l=!1},d(n){n&&d(e),H(t),r=!1,a()}}}function xl(s){let e,t=s[4].t("Save")+"",l;return{c(){e=g("button"),l=_e(t),this.h()},l(r){e=v(r,"BUTTON",{class:!0,type:!0});var a=w(e);l=ge(a,t),a.forEach(d),this.h()},h(){c(e,"class","px-3.5 py-2 bg-black text-white dark:bg-white dark:text-black transition rounded-full"),c(e,"type","submit")},m(r,a){S(r,e,a),p(e,l)},p(r,a){a&16&&t!==(t=r[4].t("Save")+"")&&ve(l,t)},d(r){r&&d(e)}}}function Vl(s){let e,t,l,r,a,n,o,i,f,u,$,I,k,x,b,T,N,W,F,A,y,z,X,h,_,U,Q;l=new Xt({props:{className:"size-3.5"}});function J(M){s[9](M)}let le={placeholder:s[4].t("Write something..."),preserveBreaks:!0};s[2]!==void 0&&(le.value=s[2]),b=new at({props:le}),De.push(()=>Ve(b,"value",J));const se=[El,Il],Z=[];function fe(M,Y){return M[3]?0:1}return A=fe(s),y=Z[A]=se[A](s),h=new tt({props:{content:s[4].t("Save"),$$slots:{default:[xl]},$$scope:{ctx:s}}}),{c(){e=g("div"),t=g("button"),L(l.$$.fragment),r=O(),a=g("div"),n=g("form"),o=g("div"),i=g("div"),f=g("div"),u=g("div"),$=g("input"),k=O(),x=g("div"),L(b.$$.fragment),N=O(),W=g("div"),F=g("div"),y.c(),z=O(),X=g("div"),L(h.$$.fragment),this.h()},l(M){e=v(M,"DIV",{class:!0});var Y=w(e);t=v(Y,"BUTTON",{class:!0,type:!0});var te=w(t);K(l.$$.fragment,te),te.forEach(d),Y.forEach(d),r=q(M),a=v(M,"DIV",{class:!0});var me=w(a);n=v(me,"FORM",{class:!0});var de=w(n);o=v(de,"DIV",{class:!0});var we=w(o);i=v(we,"DIV",{class:!0});var ue=w(i);f=v(ue,"DIV",{class:!0});var Ne=w(f);u=v(Ne,"DIV",{class:!0});var oe=w(u);$=v(oe,"INPUT",{class:!0,type:!0,placeholder:!0}),oe.forEach(d),Ne.forEach(d),k=q(ue),x=v(ue,"DIV",{class:!0});var ae=w(x);K(b.$$.fragment,ae),ae.forEach(d),ue.forEach(d),we.forEach(d),N=q(de),W=v(de,"DIV",{class:!0});var $e=w(W);F=v($e,"DIV",{class:!0});var pe=w(F);y.l(pe),pe.forEach(d),z=q($e),X=v($e,"DIV",{class:!0});var Be=w(X);K(h.$$.fragment,Be),Be.forEach(d),$e.forEach(d),de.forEach(d),me.forEach(d),this.h()},h(){c(t,"class","self-center dark:text-white"),c(t,"type","button"),c(e,"class","absolute top-0 right-0 p-5"),c($,"class","w-full text-3xl font-semibold bg-transparent outline-none svelte-1vx7r9s"),c($,"type","text"),c($,"placeholder",I=s[4].t("Title")),$.required=!0,c(u,"class","w-full"),c(f,"class","flex-shrink-0 w-full flex justify-between items-center"),c(x,"class","flex-1 w-full h-full"),c(i,"class","max-w-3xl py-2 md:py-10 w-full flex flex-col gap-2"),c(o,"class","flex-1 w-full h-full flex justify-center overflow-auto px-5 py-4"),c(F,"class",""),c(X,"class","flex-shrink-0"),c(W,"class","flex flex-row items-center justify-end text-sm font-medium flex-shrink-0 mt-1 p-4 gap-1.5"),c(n,"class","flex flex-col w-full h-full"),c(a,"class","flex flex-col md:flex-row w-full h-full md:space-x-4 dark:text-gray-200")},m(M,Y){S(M,e,Y),p(e,t),j(l,t,null),S(M,r,Y),S(M,a,Y),p(a,n),p(n,o),p(o,i),p(i,f),p(f,u),p(u,$),Se($,s[1]),p(i,k),p(i,x),j(b,x,null),p(n,N),p(n,W),p(W,F),Z[A].m(F,null),p(W,z),p(W,X),j(h,X,null),_=!0,U||(Q=[ie(t,"click",s[7]),ie($,"input",s[8]),ie(n,"submit",vt(s[14]))],U=!0)},p(M,Y){(!_||Y&16&&I!==(I=M[4].t("Title")))&&c($,"placeholder",I),Y&2&&$.value!==M[1]&&Se($,M[1]);const te={};Y&16&&(te.placeholder=M[4].t("Write something...")),!T&&Y&4&&(T=!0,te.value=M[2],xe(()=>T=!1)),b.$set(te);let me=A;A=fe(M),A===me?Z[A].p(M,Y):(Ce(),V(Z[me],1,1,()=>{Z[me]=null}),Te(),y=Z[A],y?y.p(M,Y):(y=Z[A]=se[A](M),y.c()),D(y,1),y.m(F,null));const de={};Y&16&&(de.content=M[4].t("Save")),Y&65552&&(de.$$scope={dirty:Y,ctx:M}),h.$set(de)},i(M){_||(D(l.$$.fragment,M),D(b.$$.fragment,M),D(y),D(h.$$.fragment,M),_=!0)},o(M){V(l.$$.fragment,M),V(b.$$.fragment,M),V(y),V(h.$$.fragment,M),_=!1},d(M){M&&(d(e),d(r),d(a)),H(l),H(b),Z[A].d(),H(h),U=!1,et(Q)}}}function Fl(s){let e,t,l;function r(n){s[15](n)}let a={size:"full",containerClassName:"",className:"h-full bg-white dark:bg-gray-900",$$slots:{default:[Vl]},$$scope:{ctx:s}};return s[0]!==void 0&&(a.show=s[0]),e=new qt({props:a}),De.push(()=>Ve(e,"show",r)),{c(){L(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,o){j(e,n,o),l=!0},p(n,[o]){const i={};o&65567&&(i.$$scope={dirty:o,ctx:n}),!t&&o&1&&(t=!0,i.show=n[0],xe(()=>t=!1)),e.$set(i)},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){H(e,n)}}}function Cl(s,e,t){let l;const r=nt("i18n");je(s,r,F=>t(4,l=F));const a=st();let{show:n=!1}=e,o="Untitled",i="",f=!1;const u=()=>{t(0,n=!1)};function $(){o=this.value,t(1,o)}function I(F){i=F,t(2,i)}function k(F){f=F,t(3,f)}const x=()=>{t(3,f=!1)},b=F=>{const{text:A,filename:y}=F.detail;t(2,i=`${i}${A} `),t(3,f=!1)},T=async()=>{try{let F=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(A){return G.error(l.t("Permission denied when accessing microphone: {{error}}",{error:A})),null});F&&(t(3,f=!0),F.getTracks().forEach(y=>y.stop())),F=null}catch{G.error(l.t("Permission denied when accessing microphone"))}},N=()=>{if(o.trim()===""||i.trim()===""){G.error(l.t("Please fill in all fields.")),t(1,o=o.trim()),t(2,i=i.trim());return}a("submit",{name:o,content:i}),t(0,n=!1),t(1,o=""),t(2,i="")};function W(F){n=F,t(0,n)}return s.$$set=F=>{"show"in F&&t(0,n=F.show)},[n,o,i,f,l,r,a,u,$,I,k,x,b,T,N,W]}class Tl extends Ae{constructor(e){super(),We(this,e,Cl,Fl,Fe,{show:0})}}function mt(s){let e,t,l,r,a,n,o;return a=new Ut({props:{$$slots:{default:[Nl]},$$scope:{ctx:s}}}),{c(){e=g("div"),t=g("div"),l=g("div"),r=g("div"),L(a.$$.fragment),this.h()},l(i){e=v(i,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var f=w(e);t=v(f,"DIV",{class:!0});var u=w(t);l=v(u,"DIV",{class:!0});var $=w(l);r=v($,"DIV",{class:!0});var I=w(r);K(a.$$.fragment,I),I.forEach(d),$.forEach(d),u.forEach(d),f.forEach(d),this.h()},h(){c(r,"class","max-w-md"),c(l,"class","m-auto pt-64 flex flex-col justify-center"),c(t,"class","absolute w-full h-full backdrop-blur bg-gray-800/40 flex justify-center"),c(e,"class",n="fixed "+(s[13]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"),c(e,"id","dropzone"),c(e,"role","region"),c(e,"aria-label","Drag and Drop Container")},m(i,f){S(i,e,f),p(e,t),p(t,l),p(l,r),j(a,r,null),o=!0},p(i,f){const u={};f[2]&4&&(u.$$scope={dirty:f,ctx:i}),a.$set(u),(!o||f[0]&8192&&n!==(n="fixed "+(i[13]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"))&&c(e,"class",n)},i(i){o||(D(a.$$.fragment,i),o=!0)},o(i){V(a.$$.fragment,i),o=!1},d(i){i&&d(e),H(a)}}}function Nl(s){let e,t="Drop any files here to add to my documents";return{c(){e=g("div"),e.textContent=t,this.h()},l(l){e=v(l,"DIV",{class:!0,"data-svelte-h":!0}),ot(e)!=="svelte-19eg75t"&&(e.textContent=t),this.h()},h(){c(e,"class","mt-2 text-center text-sm dark:text-gray-200 w-full")},m(l,r){S(l,e,r)},p:ce,d(l){l&&d(e)}}}function Bl(s){let e,t;return e=new zt({}),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p:ce,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function Ml(s){let e,t,l,r,a,n,o,i,f,u,$,I,k,x,b,T,N=s[12].t("Access")+"",W,F,A,y,z,X,h,_,U,Q,J,le,se,Z,fe,M='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg>',Y,te,me,de,we,ue,Ne,oe,ae,$e,pe,Be,He;function lt(E){s[31](E)}function rt(E){s[32](E)}let Le={onChange:s[30],accessRoles:["read","write"]};s[7]!==void 0&&(Le.show=s[7]),s[0].access_control!==void 0&&(Le.accessControl=s[0].access_control),e=new Jt({props:Le}),De.push(()=>Ve(e,"show",lt)),De.push(()=>Ve(e,"accessControl",rt)),x=new Zt({props:{strokeWidth:"2.5",className:"size-3.5"}});const Oe=[Al,Sl],be=[];function qe(E,ee){return E[3]?0:!E[3]&&E[2]!==null?1:-1}~(h=qe(s))&&(_=be[h]=Oe[h](s)),ue=new yl({}),ue.$on("upload",s[47]),ue.$on("sync",s[48]);const Re=[Ll,Ul],ke=[];function Xe(E,ee){return E[9].length>0?0:1}return oe=Xe(s),ae=ke[oe]=Re[oe](s),{c(){L(e.$$.fragment),r=O(),a=g("div"),n=g("div"),o=g("div"),i=g("div"),f=g("div"),u=g("input"),$=O(),I=g("div"),k=g("button"),L(x.$$.fragment),b=O(),T=g("div"),W=_e(N),F=O(),A=g("div"),y=g("input"),z=O(),X=g("div"),_&&_.c(),U=O(),Q=g("div"),J=g("div"),le=g("div"),se=g("div"),Z=g("div"),fe=g("div"),fe.innerHTML=M,Y=O(),te=g("input"),de=O(),we=g("div"),L(ue.$$.fragment),Ne=O(),ae.c(),this.h()},l(E){K(e.$$.fragment,E),r=q(E),a=v(E,"DIV",{class:!0});var ee=w(a);n=v(ee,"DIV",{class:!0});var Me=w(n);o=v(Me,"DIV",{class:!0});var ye=w(o);i=v(ye,"DIV",{class:!0});var Ie=w(i);f=v(Ie,"DIV",{class:!0});var Qe=w(f);u=v(Qe,"INPUT",{type:!0,class:!0,placeholder:!0}),Qe.forEach(d),$=q(Ie),I=v(Ie,"DIV",{class:!0});var Ye=w(I);k=v(Ye,"BUTTON",{class:!0,type:!0});var ze=w(k);K(x.$$.fragment,ze),b=q(ze),T=v(ze,"DIV",{class:!0});var Ge=w(T);W=ge(Ge,N),Ge.forEach(d),ze.forEach(d),Ye.forEach(d),Ie.forEach(d),F=q(ye),A=v(ye,"DIV",{class:!0});var Je=w(A);y=v(Je,"INPUT",{type:!0,class:!0,placeholder:!0}),Je.forEach(d),ye.forEach(d),Me.forEach(d),ee.forEach(d),z=q(E),X=v(E,"DIV",{class:!0});var m=w(X);_&&_.l(m),U=q(m),Q=v(m,"DIV",{class:!0});var C=w(Q);J=v(C,"DIV",{class:!0});var P=w(J);le=v(P,"DIV",{class:!0});var B=w(le);se=v(B,"DIV",{class:!0});var R=w(se);Z=v(R,"DIV",{class:!0});var re=w(Z);fe=v(re,"DIV",{class:!0,"data-svelte-h":!0}),ot(fe)!=="svelte-or7cnz"&&(fe.innerHTML=M),Y=q(re),te=v(re,"INPUT",{class:!0,placeholder:!0}),de=q(re),we=v(re,"DIV",{});var he=w(we);K(ue.$$.fragment,he),he.forEach(d),re.forEach(d),R.forEach(d),Ne=q(B),ae.l(B),B.forEach(d),P.forEach(d),C.forEach(d),m.forEach(d),this.h()},h(){c(u,"type","text"),c(u,"class","text-left w-full font-semibold text-2xl font-primary bg-transparent outline-none"),c(u,"placeholder","Knowledge Name"),c(f,"class","w-full"),c(T,"class","text-sm font-medium flex-shrink-0"),c(k,"class","bg-gray-50 hover:bg-gray-100 text-black dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white transition px-2 py-1 rounded-full flex gap-1 items-center"),c(k,"type","button"),c(I,"class","self-center flex-shrink-0"),c(i,"class","flex items-center justify-between w-full px-0.5 mb-1"),c(y,"type","text"),c(y,"class","text-left text-xs w-full text-gray-500 bg-transparent outline-none"),c(y,"placeholder","Knowledge Description"),c(A,"class","flex w-full px-1"),c(o,"class","flex-1"),c(n,"class","flex w-full"),c(a,"class","w-full mb-2.5"),c(fe,"class","self-center ml-1 mr-3"),c(te,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-none bg-transparent"),c(te,"placeholder",me=s[12].t("Search Collection")),c(Z,"class","flex mb-0.5"),c(se,"class","px-3"),c(le,"class","w-full h-full flex flex-col"),c(J,"class","flex flex-col w-full space-x-2 rounded-lg h-full"),c(Q,"class",$e=(s[3]?"flex-shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"),c(X,"class","flex flex-row flex-1 h-full max-h-full pb-2.5 gap-3")},m(E,ee){j(e,E,ee),S(E,r,ee),S(E,a,ee),p(a,n),p(n,o),p(o,i),p(i,f),p(f,u),Se(u,s[0].name),p(i,$),p(i,I),p(I,k),j(x,k,null),p(k,b),p(k,T),p(T,W),p(o,F),p(o,A),p(A,y),Se(y,s[0].description),S(E,z,ee),S(E,X,ee),~h&&be[h].m(X,null),p(X,U),p(X,Q),p(Q,J),p(J,le),p(le,se),p(se,Z),p(Z,fe),p(Z,Y),p(Z,te),Se(te,s[1]),p(Z,de),p(Z,we),j(ue,we,null),p(le,Ne),ke[oe].m(le,null),pe=!0,Be||(He=[ie(u,"input",s[33]),ie(u,"input",s[34]),ie(k,"click",s[35]),ie(y,"input",s[36]),ie(y,"input",s[37]),ie(te,"input",s[45]),ie(te,"focus",s[46])],Be=!0)},p(E,ee){const Me={};!t&&ee[0]&128&&(t=!0,Me.show=E[7],xe(()=>t=!1)),!l&&ee[0]&1&&(l=!0,Me.accessControl=E[0].access_control,xe(()=>l=!1)),e.$set(Me),ee[0]&1&&u.value!==E[0].name&&Se(u,E[0].name),(!pe||ee[0]&4096)&&N!==(N=E[12].t("Access")+"")&&ve(W,N),ee[0]&1&&y.value!==E[0].description&&Se(y,E[0].description);let ye=h;h=qe(E),h===ye?~h&&be[h].p(E,ee):(_&&(Ce(),V(be[ye],1,1,()=>{be[ye]=null}),Te()),~h?(_=be[h],_?_.p(E,ee):(_=be[h]=Oe[h](E),_.c()),D(_,1),_.m(X,U)):_=null),(!pe||ee[0]&4096&&me!==(me=E[12].t("Search Collection")))&&c(te,"placeholder",me),ee[0]&2&&te.value!==E[1]&&Se(te,E[1]);let Ie=oe;oe=Xe(E),oe===Ie?ke[oe].p(E,ee):(Ce(),V(ke[Ie],1,1,()=>{ke[Ie]=null}),Te(),ae=ke[oe],ae?ae.p(E,ee):(ae=ke[oe]=Re[oe](E),ae.c()),D(ae,1),ae.m(le,null)),(!pe||ee[0]&8&&$e!==($e=(E[3]?"flex-shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"))&&c(Q,"class",$e)},i(E){pe||(D(e.$$.fragment,E),D(x.$$.fragment,E),D(_),D(ue.$$.fragment,E),D(ae),pe=!0)},o(E){V(e.$$.fragment,E),V(x.$$.fragment,E),V(_),V(ue.$$.fragment,E),V(ae),pe=!1},d(E){E&&(d(r),d(a),d(z),d(X)),H(e,E),H(x),~h&&be[h].d(),H(ue),ke[oe].d(),Be=!1,et(He)}}}function Sl(s){let e,t;return e=new Lt({props:{className:"h-full",show:s[2]!==null,$$slots:{default:[Wl]},$$scope:{ctx:s}}}),e.$on("close",s[44]),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const a={};r[0]&4&&(a.show=l[2]!==null),r[0]&5124|r[2]&4&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function Al(s){let e,t,l,r;const a=[Pl,zl],n=[];function o(i,f){return i[10]?0:1}return t=o(s),l=n[t]=a[t](s),{c(){e=g("div"),l.c(),this.h()},l(i){e=v(i,"DIV",{class:!0});var f=w(e);l.l(f),f.forEach(d),this.h()},h(){c(e,"class","flex-1 flex justify-start w-full h-full max-h-full")},m(i,f){S(i,e,f),n[t].m(e,null),r=!0},p(i,f){let u=t;t=o(i),t===u?n[t].p(i,f):(Ce(),V(n[u],1,1,()=>{n[u]=null}),Te(),l=n[t],l?l.p(i,f):(l=n[t]=a[t](i),l.c()),D(l,1),l.m(e,null))},i(i){r||(D(l),r=!0)},o(i){V(l),r=!1},d(i){i&&d(e),n[t].d()}}}function ht(s){let e,t,l;function r(n){s[43](n)}let a={className:"input-prose-sm",placeholder:s[12].t("Add content here"),preserveBreaks:!0};return s[10].data.content!==void 0&&(a.value=s[10].data.content),e=new at({props:a}),De.push(()=>Ve(e,"value",r)),{c(){L(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,o){j(e,n,o),l=!0},p(n,o){const i={};o[0]&4096&&(i.placeholder=n[12].t("Add content here")),!t&&o[0]&1024&&(t=!0,i.value=n[10].data.content,xe(()=>t=!1)),e.$set(i)},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){H(e,n)}}}function Wl(s){var X,h;let e,t,l,r,a,n,o,i,f=((h=(X=s[10])==null?void 0:X.meta)==null?void 0:h.name)+"",u,$,I,k,x=s[12].t("Save")+"",b,T,N,W=s[10].id,F,A,y;n=new Gt({props:{strokeWidth:"2.5"}});let z=ht(s);return{c(){e=g("div"),t=g("div"),l=g("div"),r=g("div"),a=g("button"),L(n.$$.fragment),o=O(),i=g("div"),u=_e(f),$=O(),I=g("div"),k=g("button"),b=_e(x),T=O(),N=g("div"),z.c(),this.h()},l(_){e=v(_,"DIV",{class:!0});var U=w(e);t=v(U,"DIV",{class:!0});var Q=w(t);l=v(Q,"DIV",{class:!0});var J=w(l);r=v(J,"DIV",{class:!0});var le=w(r);a=v(le,"BUTTON",{class:!0});var se=w(a);K(n.$$.fragment,se),se.forEach(d),le.forEach(d),o=q(J),i=v(J,"DIV",{class:!0});var Z=w(i);u=ge(Z,f),Z.forEach(d),$=q(J),I=v(J,"DIV",{});var fe=w(I);k=v(fe,"BUTTON",{class:!0});var M=w(k);b=ge(M,x),M.forEach(d),fe.forEach(d),J.forEach(d),T=q(Q),N=v(Q,"DIV",{class:!0});var Y=w(N);z.l(Y),Y.forEach(d),Q.forEach(d),U.forEach(d),this.h()},h(){c(a,"class","w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850"),c(r,"class","mr-2"),c(i,"class","flex-1 text-xl line-clamp-1"),c(k,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),c(l,"class","flex-shrink-0 mt-1 mb-2 flex items-center"),c(N,"class","flex-1 w-full h-full max-h-full py-2.5 px-3.5 rounded-lg text-sm bg-transparent overflow-y-auto scrollbar-hidden"),c(t,"class","flex flex-col w-full h-full max-h-full"),c(e,"class","flex flex-col justify-start h-full max-h-full p-2")},m(_,U){S(_,e,U),p(e,t),p(t,l),p(l,r),p(r,a),j(n,a,null),p(l,o),p(l,i),p(i,u),p(l,$),p(l,I),p(I,k),p(k,b),p(t,T),p(t,N),z.m(N,null),F=!0,A||(y=[ie(a,"click",s[41]),ie(k,"click",s[42])],A=!0)},p(_,U){var Q,J;(!F||U[0]&1024)&&f!==(f=((J=(Q=_[10])==null?void 0:Q.meta)==null?void 0:J.name)+"")&&ve(u,f),(!F||U[0]&4096)&&x!==(x=_[12].t("Save")+"")&&ve(b,x),U[0]&1024&&Fe(W,W=_[10].id)?(Ce(),V(z,1,1,ce),Te(),z=ht(_),z.c(),D(z,1),z.m(N,null)):z.p(_,U)},i(_){F||(D(n.$$.fragment,_),D(z),F=!0)},o(_){V(n.$$.fragment,_),V(z),F=!1},d(_){_&&d(e),H(n),z.d(_),A=!1,et(y)}}}function zl(s){let e,t,l=s[12].t("Drag and drop a file to upload or select a file to view")+"",r;return{c(){e=g("div"),t=g("div"),r=_e(l),this.h()},l(a){e=v(a,"DIV",{class:!0});var n=w(e);t=v(n,"DIV",{class:!0});var o=w(t);r=ge(o,l),o.forEach(d),n.forEach(d),this.h()},h(){c(t,"class","m-auto text-xs text-center text-gray-200 dark:text-gray-700"),c(e,"class","h-full flex w-full")},m(a,n){S(a,e,n),p(e,t),p(t,r)},p(a,n){n[0]&4096&&l!==(l=a[12].t("Drag and drop a file to upload or select a file to view")+"")&&ve(r,l)},i:ce,o:ce,d(a){a&&d(e)}}}function Pl(s){var z,X;let e,t,l,r,a,n=((X=(z=s[10])==null?void 0:z.meta)==null?void 0:X.name)+"",o,i,f,u,$,I=s[12].t("Save")+"",k,x,b,T=s[10].id,N,W,F,A=!jl,y=pt(s);return{c(){e=g("div"),t=g("div"),l=O(),r=g("div"),a=g("a"),o=_e(n),f=O(),u=g("div"),$=g("button"),k=_e(I),x=O(),b=g("div"),y.c(),this.h()},l(h){e=v(h,"DIV",{class:!0});var _=w(e);t=v(_,"DIV",{class:!0});var U=w(t);l=q(U),r=v(U,"DIV",{class:!0});var Q=w(r);a=v(Q,"A",{class:!0,href:!0,target:!0});var J=w(a);o=ge(J,n),J.forEach(d),Q.forEach(d),f=q(U),u=v(U,"DIV",{});var le=w(u);$=v(le,"BUTTON",{class:!0});var se=w($);k=ge(se,I),se.forEach(d),le.forEach(d),U.forEach(d),x=q(_),b=v(_,"DIV",{class:!0});var Z=w(b);y.l(Z),Z.forEach(d),_.forEach(d),this.h()},h(){c(a,"class","hover:text-gray-500 hover:dark:text-gray-100 hover:underline flex-grow line-clamp-1"),c(a,"href",i=s[10].id?`/api/v1/files/${s[10].id}/content`:"#"),c(a,"target","_blank"),c(r,"class","flex-1 text-xl font-medium"),c($,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),c(t,"class","flex-shrink-0 mb-2 flex items-center"),c(b,"class","flex-1 w-full h-full max-h-full text-sm bg-transparent outline-none overflow-y-auto scrollbar-hidden"),c(e,"class","flex flex-col w-full h-full max-h-full")},m(h,_){S(h,e,_),p(e,t),p(t,l),p(t,r),p(r,a),p(a,o),p(t,f),p(t,u),p(u,$),p($,k),p(e,x),p(e,b),y.m(b,null),N=!0,W||(F=ie($,"click",s[39]),W=!0)},p(h,_){var U,Q;(!N||_[0]&1024)&&n!==(n=((Q=(U=h[10])==null?void 0:U.meta)==null?void 0:Q.name)+"")&&ve(o,n),(!N||_[0]&1024&&i!==(i=h[10].id?`/api/v1/files/${h[10].id}/content`:"#"))&&c(a,"href",i),(!N||_[0]&4096)&&I!==(I=h[12].t("Save")+"")&&ve(k,I),_[0]&1024&&Fe(T,T=h[10].id)?(Ce(),V(y,1,1,ce),Te(),y=pt(h),y.c(),D(y,1),y.m(b,null)):y.p(h,_)},i(h){N||(D(A),D(y),N=!0)},o(h){V(A),V(y),N=!1},d(h){h&&d(e),y.d(h),W=!1,F()}}}function pt(s){let e,t,l;function r(n){s[40](n)}let a={className:"input-prose-sm",placeholder:s[12].t("Add content here"),preserveBreaks:!0};return s[10].data.content!==void 0&&(a.value=s[10].data.content),e=new at({props:a}),De.push(()=>Ve(e,"value",r)),{c(){L(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,o){j(e,n,o),l=!0},p(n,o){const i={};o[0]&4096&&(i.placeholder=n[12].t("Add content here")),!t&&o[0]&1024&&(t=!0,i.value=n[10].data.content,xe(()=>t=!1)),e.$set(i)},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){H(e,n)}}}function Ul(s){let e,t,l=s[12].t("No content found")+"",r;return{c(){e=g("div"),t=g("div"),r=_e(l),this.h()},l(a){e=v(a,"DIV",{class:!0});var n=w(e);t=v(n,"DIV",{});var o=w(t);r=ge(o,l),o.forEach(d),n.forEach(d),this.h()},h(){c(e,"class","my-3 flex flex-col justify-center text-center text-gray-500 text-xs")},m(a,n){S(a,e,n),p(e,t),p(t,r)},p(a,n){n[0]&4096&&l!==(l=a[12].t("No content found")+"")&&ve(r,l)},i:ce,o:ce,d(a){a&&d(e)}}}function Ll(s){let e,t,l;return t=new nl({props:{small:!0,files:s[9],selectedFileId:s[2]}}),t.$on("click",s[49]),t.$on("delete",s[50]),{c(){e=g("div"),L(t.$$.fragment),this.h()},l(r){e=v(r,"DIV",{class:!0});var a=w(e);K(t.$$.fragment,a),a.forEach(d),this.h()},h(){c(e,"class","flex overflow-y-auto h-full w-full scrollbar-hidden text-xs")},m(r,a){S(r,e,a),j(t,e,null),l=!0},p(r,a){const n={};a[0]&512&&(n.files=r[9]),a[0]&4&&(n.selectedFileId=r[2]),t.$set(n)},i(r){l||(D(t.$$.fragment,r),l=!0)},o(r){V(t.$$.fragment,r),l=!1},d(r){r&&d(e),H(t)}}}function Kl(s){let e,t,l,r,a,n,o,i,f,u,$,I,k,x,b,T=s[11]&&mt(s);function N(h){s[24](h)}let W={message:s[12].t("This will reset the knowledge base and sync all files. Do you wish to continue?")};s[6]!==void 0&&(W.show=s[6]),t=new Yt({props:W}),De.push(()=>Ve(t,"show",N)),t.$on("confirm",s[25]);function F(h){s[26](h)}let A={};s[5]!==void 0&&(A.show=s[5]),a=new Tl({props:A}),De.push(()=>Ve(a,"show",F)),a.$on("submit",s[27]);const y=[Ml,Bl],z=[];function X(h,_){return h[4]&&h[0]?0:1}return $=X(s),I=z[$]=y[$](s),{c(){T&&T.c(),e=O(),L(t.$$.fragment),r=O(),L(a.$$.fragment),o=O(),i=g("input"),f=O(),u=g("div"),I.c(),this.h()},l(h){T&&T.l(h),e=q(h),K(t.$$.fragment,h),r=q(h),K(a.$$.fragment,h),o=q(h),i=v(h,"INPUT",{id:!0,type:!0}),f=q(h),u=v(h,"DIV",{class:!0,id:!0});var _=w(u);I.l(_),_.forEach(d),this.h()},h(){c(i,"id","files-input"),c(i,"type","file"),i.multiple=!0,i.hidden=!0,c(u,"class","flex flex-col w-full translate-y-1"),c(u,"id","collection-container")},m(h,_){T&&T.m(h,_),S(h,e,_),j(t,h,_),S(h,r,_),j(a,h,_),S(h,o,_),S(h,i,_),S(h,f,_),S(h,u,_),z[$].m(u,null),k=!0,x||(b=[ie(i,"change",s[28]),ie(i,"change",s[29])],x=!0)},p(h,_){h[11]?T?(T.p(h,_),_[0]&2048&&D(T,1)):(T=mt(h),T.c(),D(T,1),T.m(e.parentNode,e)):T&&(Ce(),V(T,1,1,()=>{T=null}),Te());const U={};_[0]&4096&&(U.message=h[12].t("This will reset the knowledge base and sync all files. Do you wish to continue?")),!l&&_[0]&64&&(l=!0,U.show=h[6],xe(()=>l=!1)),t.$set(U);const Q={};!n&&_[0]&32&&(n=!0,Q.show=h[5],xe(()=>n=!1)),a.$set(Q);let J=$;$=X(h),$===J?z[$].p(h,_):(Ce(),V(z[J],1,1,()=>{z[J]=null}),Te(),I=z[$],I?I.p(h,_):(I=z[$]=y[$](h),I.c()),D(I,1),I.m(u,null))},i(h){k||(D(T),D(t.$$.fragment,h),D(a.$$.fragment,h),D(I),k=!0)},o(h){V(T),V(t.$$.fragment,h),V(a.$$.fragment,h),V(I),k=!1},d(h){h&&(d(e),d(r),d(o),d(i),d(f),d(u)),T&&T.d(h),H(t,h),H(a,h),z[$].d(),x=!1,et(b)}}}let jl=!0;function Hl(s,e,t){let l,r,a;je(s,yt,m=>t(54,l=m)),je(s,It,m=>t(13,a=m));const n=nt("i18n");je(s,n,m=>t(12,r=m));let o=!0,i,f=null,u=null,$="",I=!1,k=!1,x=!1,b=null,T=[],N=null,W=null,F=null,A=null,y,z=!1;const X=(m,C)=>{const P=new Blob([C],{type:"text/plain"}),B=ct(P,`${m}.txt`);return console.log(B),B},h=async m=>{console.log(m);const C=At(),P={type:"file",file:"",id:null,url:"",name:m.name,size:m.size,status:"uploading",error:"",itemId:C};if(P.size==0)return G.error(r.t("You cannot upload an empty file.")),null;if(t(0,u.files=[...u.files??[],P],u),["audio/mpeg","audio/wav","audio/ogg","audio/x-m4a"].includes(m.type)){const B=await St(localStorage.token,m).catch(R=>(G.error(`${R}`),null));if(B){console.log(B);const R=new Blob([B.text],{type:"text/plain"});m=ct(R,`${m.name}.txt`)}}try{const B=await Dt(localStorage.token,m).catch(R=>(G.error(`${R}`),null));B?(console.log(B),t(0,u.files=u.files.map(R=>(R.itemId===C&&(R.id=B.id),delete R.itemId,R)),u),await Z(B.id)):G.error(r.t("Failed to upload file."))}catch(B){G.error(`${B}`)}},_=async()=>{const m="showDirectoryPicker"in window;try{m?await Q():await J()}catch(C){le(C)}},U=m=>m.split("/").some(C=>C.startsWith(".")),Q=async()=>{const m=await window.showDirectoryPicker();let C=0,P=0;const B=()=>{const he=P/C*100;G.info(`Upload Progress: ${P}/${C} (${he.toFixed(2)}%)`)};async function R(he){for await(const ne of he.values())ne.name.startsWith(".")||(ne.kind==="file"?C++:ne.kind==="directory"&&(ne.name.startsWith(".")||await R(ne)))}async function re(he,ne=""){for await(const Ee of he.values()){if(Ee.name.startsWith("."))continue;const Ke=ne?`${ne}/${Ee.name}`:Ee.name;if(!U(Ke))if(Ee.kind==="file"){const it=await Ee.getFile(),_t=new File([it],Ke,{type:it.type});await h(_t),P++,B()}else Ee.kind==="directory"&&(Ee.name.startsWith(".")||await re(Ee,Ke))}}await R(m),B(),C>0?await re(m):console.log("No files to upload.")},J=async()=>new Promise((m,C)=>{const P=document.createElement("input");P.type="file",P.webkitdirectory=!0,P.directory=!0,P.multiple=!0,P.style.display="none",document.body.appendChild(P),P.onchange=async()=>{try{const B=Array.from(P.files).filter(ne=>!U(ne.webkitRelativePath));let R=B.length,re=0;const he=()=>{const ne=re/R*100;G.info(`Upload Progress: ${re}/${R} (${ne.toFixed(2)}%)`)};he();for(const ne of B)if(!ne.name.startsWith(".")){const Ee=ne.webkitRelativePath||ne.name,Ke=new File([ne],Ee,{type:ne.type});await h(Ke),re++,he()}document.body.removeChild(P),m()}catch(B){C(B)}},P.onerror=B=>{document.body.removeChild(P),C(B)},P.click()}),le=m=>{m.name==="AbortError"?G.info("Directory selection was cancelled"):(G.error("Error accessing directory"),console.error("Directory access error:",m))},se=async()=>{if(((u==null?void 0:u.files)??[]).length>0){const m=await Ft(localStorage.token,f).catch(C=>{G.error(`${C}`)});m&&(t(0,u=m),G.success(r.t("Knowledge reset successfully.")),_())}else _()},Z=async m=>{const C=await Ct(localStorage.token,f,m).catch(P=>(G.error(`${P}`),null));C?(t(0,u=C),G.success(r.t("File added successfully."))):(G.error(r.t("Failed to add file.")),t(0,u.files=u.files.filter(P=>P.id!==m),u))},fe=async m=>{try{console.log("Starting file deletion process for:",m);const C=await Tt(localStorage.token,f,m);console.log("Knowledge base updated:",C),C&&(t(0,u=C),G.success(r.t("File removed successfully.")))}catch(C){console.error("Error in deleteFileHandler:",C),G.error(`${C}`)}},M=async()=>{const m=N.id,C=N.data.content,P=xt(localStorage.token,m,C).catch(R=>{G.error(`${R}`)}),B=await Nt(localStorage.token,f,m).catch(R=>{G.error(`${R}`)});P&&B&&(t(0,u=B),G.success(r.t("File content updated successfully.")))},Y=()=>{console.log("debounce"),A&&clearTimeout(A),A=setTimeout(async()=>{if(u.name.trim()===""||u.description.trim()===""){G.error(r.t("Please fill in all fields."));return}await Bt(localStorage.token,f,{...u,name:u.name,description:u.description,access_control:u.access_control}).catch(C=>{G.error(`${C}`)})&&(G.success(r.t("Knowledge updated successfully")),Et.set(await Mt(localStorage.token)))},1e3)},te=async m=>{m.matches?t(3,o=!0):t(3,o=!1)},me=m=>{var C,P;m.preventDefault(),(P=(C=m.dataTransfer)==null?void 0:C.types)!=null&&P.includes("Files")?t(11,z=!0):t(11,z=!1)},de=()=>{t(11,z=!1)},we=async m=>{var C,P,B,R;if(m.preventDefault(),t(11,z=!1),(P=(C=m.dataTransfer)==null?void 0:C.types)!=null&&P.includes("Files")&&(B=m.dataTransfer)!=null&&B.files){const re=(R=m.dataTransfer)==null?void 0:R.files;if(re&&re.length>0)for(const he of re)await h(he);else G.error(r.t("File not found."))}};wt(async()=>{y=window.matchMedia("(min-width: 1024px)"),y.addEventListener("change",te),te(y);const m=document.getElementById("collection-container");o&&Math.floor(300/m.clientWidth*100),new ResizeObserver(R=>{for(let re of R)re.contentRect.width}).observe(m),t(4,f=l.params.id);const P=await Vt(localStorage.token,f).catch(R=>(G.error(`${R}`),null));P?t(0,u=P):kt("/workspace/knowledge");const B=document.querySelector("body");B==null||B.addEventListener("dragover",me),B==null||B.addEventListener("drop",we),B==null||B.addEventListener("dragleave",de)}),$t(()=>{y==null||y.removeEventListener("change",te);const m=document.querySelector("body");m==null||m.removeEventListener("dragover",me),m==null||m.removeEventListener("drop",we),m==null||m.removeEventListener("dragleave",de)});function ue(m){k=m,t(6,k)}const Ne=()=>{se()};function oe(m){I=m,t(5,I)}const ae=m=>{const C=X(m.detail.name,m.detail.content);h(C)};function $e(){b=this.files,t(8,b)}const pe=async()=>{if(b&&b.length>0){for(const C of b)Wt(1e3),await h(C);t(8,b=null);const m=document.getElementById("files-input");m&&(m.value="")}else G.error(r.t("File not found."))},Be=()=>{Y()};function He(m){x=m,t(7,x)}function lt(m){s.$$.not_equal(u.access_control,m)&&(u.access_control=m,t(0,u))}function rt(){u.name=this.value,t(0,u)}const Le=()=>{Y()},Oe=()=>{t(7,x=!0)};function be(){u.description=this.value,t(0,u)}const qe=()=>{Y()},Re=()=>{i.expand()},ke=()=>{M()};function Xe(m){s.$$.not_equal(N.data.content,m)&&(N.data.content=m,t(10,N),t(2,W),t(0,u))}const E=()=>{t(2,W=null)},ee=()=>{M()};function Me(m){s.$$.not_equal(N.data.content,m)&&(N.data.content=m,t(10,N),t(2,W),t(0,u))}const ye=()=>{t(2,W=null)};function Ie(){$=this.value,t(1,$)}const Qe=()=>{t(2,W=null)},Ye=m=>{m.detail.type==="directory"?_():m.detail.type==="text"?t(5,I=!0):document.getElementById("files-input").click()},ze=m=>{t(6,k=!0)},Ge=m=>{t(2,W=W===m.detail?null:m.detail)},Je=m=>{console.log(m.detail),t(2,W=null),fe(m.detail)};return s.$$.update=()=>{if(s.$$.dirty[0]&1&&u&&u.files&&t(23,F=new bt(u.files,{keys:["meta.name","meta.description"]})),s.$$.dirty[0]&8388611&&F&&t(9,T=$?F.search($).map(m=>m.item):(u==null?void 0:u.files)??[]),s.$$.dirty[0]&5)if(W){const m=((u==null?void 0:u.files)??[]).find(C=>C.id===W);m?(m.data=m.data??{content:""},t(10,N=m)):t(10,N=null)}else t(10,N=null)},[u,$,W,o,f,I,k,x,b,T,N,z,r,a,n,i,X,h,_,se,fe,M,Y,F,ue,Ne,oe,ae,$e,pe,Be,He,lt,rt,Le,Oe,be,qe,Re,ke,Xe,E,ee,Me,ye,Ie,Qe,Ye,ze,Ge,Je]}class Ol extends Ae{constructor(e){super(),We(this,e,Hl,Kl,Fe,{},null,[-1,-1,-1])}}function ql(s){let e,t;return e=new Ol({}),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p:ce,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}class kr extends Ae{constructor(e){super(),We(this,e,null,ql,Fe,{})}}export{kr as component};
//# sourceMappingURL=24.Dhww9Wf4.js.map
