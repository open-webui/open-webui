{"version":3,"file":"28.Cwn4QB1g.js","sources":["../../../../../../src/routes/(app)/workspace/models/edit/+page.svelte"],"sourcesContent":["<script>\n\timport { toast } from 'svelte-sonner';\n\timport { goto } from '$app/navigation';\n\n\timport { onMount, getContext } from 'svelte';\n\tconst i18n = getContext('i18n');\n\n\timport { page } from '$app/stores';\n\timport { config, models, settings } from '$lib/stores';\n\n\timport { getModelById, updateModelById } from '$lib/apis/models';\n\n\timport { getModels } from '$lib/apis';\n\timport ModelEditor from '$lib/components/workspace/Models/ModelEditor.svelte';\n\n\tlet model = null;\n\n\tonMount(async () => {\n\t\tconst _id = $page.url.searchParams.get('id');\n\t\tif (_id) {\n\t\t\tmodel = await getModelById(localStorage.token, _id).catch((e) => {\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\t\tif (!model) {\n\t\t\t\tgoto('/workspace/models');\n\t\t\t}\n\t\t} else {\n\t\t\tgoto('/workspace/models');\n\t\t}\n\t});\n\n\tconst onSubmit = async (modelInfo) => {\n\t\tconst res = await updateModelById(localStorage.token, modelInfo.id, modelInfo);\n\n\t\tif (res) {\n\t\t\tawait models.set(\n\t\t\t\tawait getModels(\n\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t$config?.features?.enable_direct_connections && ($settings?.directConnections ?? null)\n\t\t\t\t)\n\t\t\t);\n\t\t\ttoast.success($i18n.t('Model updated successfully'));\n\t\t\tawait goto('/workspace/models');\n\t\t}\n\t};\n</script>\n\n{#if model}\n\t<ModelEditor edit={true} {model} {onSubmit} />\n{/if}\n"],"names":["ctx","create_if_block","i18n","getContext","model","onMount","_id","$page","getModelById","e","goto","modelInfo","updateModelById","models","getModels","_a","$config","$settings","toast","$i18n"],"mappings":"2oBAiDoB,6PADfA,EAAK,CAAA,GAAAC,EAAAD,CAAA,8FAALA,EAAK,CAAA,oQA3CHE,EAAOC,EAAW,MAAM,qBAU1B,IAAAC,EAAQ,KAEZ,OAAAC,EAAO,SAAA,OACAC,EAAMC,EAAM,IAAI,aAAa,IAAI,IAAI,EACvCD,OACHF,EAAK,MAASI,EAAa,aAAa,MAAOF,CAAG,EAAE,MAAOG,GACnD,OAGHL,GACJM,EAAK,mBAAmB,GAGzBA,EAAK,mBAAmB,eAIFC,GAAS,OACvB,MAASC,EAAgB,aAAa,MAAOD,EAAU,GAAIA,CAAS,IAGtE,MAAAE,EAAO,IAAG,MACTC,EACL,aAAa,QACbC,EAAAC,GAAA,YAAAA,EAAS,WAAT,YAAAD,EAAmB,8BAA8BE,GAAA,YAAAA,EAAW,oBAAqB,KAAI,CAAA,EAGvFC,EAAM,QAAQC,EAAM,EAAE,4BAA4B,CAAA,EAC5C,MAAAT,EAAK,mBAAmB"}