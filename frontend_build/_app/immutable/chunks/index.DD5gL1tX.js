import{a as ot,c as H,g as W}from"./_commonjsHelpers.BosuxZz1.js";import{d as N,r as it}from"./relativeTime.BDz4fsXT.js";import{e as K}from"./index.iZ7GkiWf.js";let z;const ct=new Uint8Array(16);function lt(){if(!z&&(z=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!z))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return z(ct)}const E=[];for(let t=0;t<256;++t)E.push((t+256).toString(16).slice(1));function ht(t,e=0){return E[t[e+0]]+E[t[e+1]]+E[t[e+2]]+E[t[e+3]]+"-"+E[t[e+4]]+E[t[e+5]]+"-"+E[t[e+6]]+E[t[e+7]]+"-"+E[t[e+8]]+E[t[e+9]]+"-"+E[t[e+10]]+E[t[e+11]]+E[t[e+12]]+E[t[e+13]]+E[t[e+14]]+E[t[e+15]]}const ut=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),q={randomUUID:ut};function ft(t,e,r){if(q.randomUUID&&!e&&!t)return q.randomUUID();t=t||{};const n=t.random||(t.rng||lt)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,ht(n)}var dt={exports:{}};const xt={},pt=Object.freeze(Object.defineProperty({__proto__:null,default:xt},Symbol.toStringTag,{value:"Module"})),Z=ot(pt);/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.10.1
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2023
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",r=typeof window=="object",n=r?window:{};n.JS_SHA256_NO_WINDOW&&(r=!1);var u=!r&&typeof self=="object",h=!n.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;h?n=H:u&&(n=self);var x=!n.JS_SHA256_NO_COMMON_JS&&!0&&t.exports,p=!n.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",a="0123456789abcdef".split(""),w=[-2147483648,8388608,32768,128],y=[24,16,8,0],U=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],I=["hex","array","digest","arrayBuffer"],v=[];(n.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(s){return Object.prototype.toString.call(s)==="[object Array]"}),p&&(n.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(s){return typeof s=="object"&&s.buffer&&s.buffer.constructor===ArrayBuffer});var B=function(s,l){return function(f){return new A(l,!0).update(f)[s]()}},_=function(s){var l=B("hex",s);h&&(l=M(l,s)),l.create=function(){return new A(s)},l.update=function(d){return l.create().update(d)};for(var f=0;f<I.length;++f){var c=I[f];l[c]=B(c,s)}return l},M=function(s,l){var f=Z,c=Z.Buffer,d=l?"sha224":"sha256",i;c.from&&!n.JS_SHA256_NO_BUFFER_FROM?i=c.from:i=function(o){return new c(o)};var g=function(o){if(typeof o=="string")return f.createHash(d).update(o,"utf8").digest("hex");if(o==null)throw new Error(e);return o.constructor===ArrayBuffer&&(o=new Uint8Array(o)),Array.isArray(o)||ArrayBuffer.isView(o)||o.constructor===c?f.createHash(d).update(i(o)).digest("hex"):s(o)};return g},O=function(s,l){return function(f,c){return new k(f,l,!0).update(c)[s]()}},L=function(s){var l=O("hex",s);l.create=function(d){return new k(d,s)},l.update=function(d,i){return l.create(d).update(i)};for(var f=0;f<I.length;++f){var c=I[f];l[c]=O(c,s)}return l};function A(s,l){l?(v[0]=v[16]=v[1]=v[2]=v[3]=v[4]=v[5]=v[6]=v[7]=v[8]=v[9]=v[10]=v[11]=v[12]=v[13]=v[14]=v[15]=0,this.blocks=v):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=s}A.prototype.update=function(s){if(!this.finalized){var l,f=typeof s;if(f!=="string"){if(f==="object"){if(s===null)throw new Error(e);if(p&&s.constructor===ArrayBuffer)s=new Uint8Array(s);else if(!Array.isArray(s)&&(!p||!ArrayBuffer.isView(s)))throw new Error(e)}else throw new Error(e);l=!0}for(var c,d=0,i,g=s.length,o=this.blocks;d<g;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),l)for(i=this.start;d<g&&i<64;++d)o[i>>2]|=s[d]<<y[i++&3];else for(i=this.start;d<g&&i<64;++d)c=s.charCodeAt(d),c<128?o[i>>2]|=c<<y[i++&3]:c<2048?(o[i>>2]|=(192|c>>6)<<y[i++&3],o[i>>2]|=(128|c&63)<<y[i++&3]):c<55296||c>=57344?(o[i>>2]|=(224|c>>12)<<y[i++&3],o[i>>2]|=(128|c>>6&63)<<y[i++&3],o[i>>2]|=(128|c&63)<<y[i++&3]):(c=65536+((c&1023)<<10|s.charCodeAt(++d)&1023),o[i>>2]|=(240|c>>18)<<y[i++&3],o[i>>2]|=(128|c>>12&63)<<y[i++&3],o[i>>2]|=(128|c>>6&63)<<y[i++&3],o[i>>2]|=(128|c&63)<<y[i++&3]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=o[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},A.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var s=this.blocks,l=this.lastByteIndex;s[16]=this.block,s[l>>2]|=w[l&3],this.block=s[16],l>=56&&(this.hashed||this.hash(),s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),s[14]=this.hBytes<<3|this.bytes>>>29,s[15]=this.bytes<<3,this.hash()}},A.prototype.hash=function(){var s=this.h0,l=this.h1,f=this.h2,c=this.h3,d=this.h4,i=this.h5,g=this.h6,o=this.h7,F=this.blocks,b,D,T,R,m,C,Y,$,V,J,P;for(b=16;b<64;++b)m=F[b-15],D=(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3,m=F[b-2],T=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10,F[b]=F[b-16]+D+F[b-7]+T<<0;for(P=l&f,b=0;b<64;b+=4)this.first?(this.is224?($=300032,m=F[0]-1413257819,o=m-150054599<<0,c=m+24177077<<0):($=704751109,m=F[0]-210244248,o=m-1521486534<<0,c=m+143694565<<0),this.first=!1):(D=(s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10),T=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),$=s&l,R=$^s&f^P,Y=d&i^~d&g,m=o+T+Y+U[b]+F[b],C=D+R,o=c+m<<0,c=m+C<<0),D=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),T=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),V=c&s,R=V^c&l^$,Y=o&d^~o&i,m=g+T+Y+U[b+1]+F[b+1],C=D+R,g=f+m<<0,f=m+C<<0,D=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),T=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),J=f&c,R=J^f&s^V,Y=g&o^~g&d,m=i+T+Y+U[b+2]+F[b+2],C=D+R,i=l+m<<0,l=m+C<<0,D=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),T=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),P=l&f,R=P^l&c^J,Y=i&g^~i&o,m=d+T+Y+U[b+3]+F[b+3],C=D+R,d=s+m<<0,s=m+C<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+s<<0,this.h1=this.h1+l<<0,this.h2=this.h2+f<<0,this.h3=this.h3+c<<0,this.h4=this.h4+d<<0,this.h5=this.h5+i<<0,this.h6=this.h6+g<<0,this.h7=this.h7+o<<0},A.prototype.hex=function(){this.finalize();var s=this.h0,l=this.h1,f=this.h2,c=this.h3,d=this.h4,i=this.h5,g=this.h6,o=this.h7,F=a[s>>28&15]+a[s>>24&15]+a[s>>20&15]+a[s>>16&15]+a[s>>12&15]+a[s>>8&15]+a[s>>4&15]+a[s&15]+a[l>>28&15]+a[l>>24&15]+a[l>>20&15]+a[l>>16&15]+a[l>>12&15]+a[l>>8&15]+a[l>>4&15]+a[l&15]+a[f>>28&15]+a[f>>24&15]+a[f>>20&15]+a[f>>16&15]+a[f>>12&15]+a[f>>8&15]+a[f>>4&15]+a[f&15]+a[c>>28&15]+a[c>>24&15]+a[c>>20&15]+a[c>>16&15]+a[c>>12&15]+a[c>>8&15]+a[c>>4&15]+a[c&15]+a[d>>28&15]+a[d>>24&15]+a[d>>20&15]+a[d>>16&15]+a[d>>12&15]+a[d>>8&15]+a[d>>4&15]+a[d&15]+a[i>>28&15]+a[i>>24&15]+a[i>>20&15]+a[i>>16&15]+a[i>>12&15]+a[i>>8&15]+a[i>>4&15]+a[i&15]+a[g>>28&15]+a[g>>24&15]+a[g>>20&15]+a[g>>16&15]+a[g>>12&15]+a[g>>8&15]+a[g>>4&15]+a[g&15];return this.is224||(F+=a[o>>28&15]+a[o>>24&15]+a[o>>20&15]+a[o>>16&15]+a[o>>12&15]+a[o>>8&15]+a[o>>4&15]+a[o&15]),F},A.prototype.toString=A.prototype.hex,A.prototype.digest=function(){this.finalize();var s=this.h0,l=this.h1,f=this.h2,c=this.h3,d=this.h4,i=this.h5,g=this.h6,o=this.h7,F=[s>>24&255,s>>16&255,s>>8&255,s&255,l>>24&255,l>>16&255,l>>8&255,l&255,f>>24&255,f>>16&255,f>>8&255,f&255,c>>24&255,c>>16&255,c>>8&255,c&255,d>>24&255,d>>16&255,d>>8&255,d&255,i>>24&255,i>>16&255,i>>8&255,i&255,g>>24&255,g>>16&255,g>>8&255,g&255];return this.is224||F.push(o>>24&255,o>>16&255,o>>8&255,o&255),F},A.prototype.array=A.prototype.digest,A.prototype.arrayBuffer=function(){this.finalize();var s=new ArrayBuffer(this.is224?28:32),l=new DataView(s);return l.setUint32(0,this.h0),l.setUint32(4,this.h1),l.setUint32(8,this.h2),l.setUint32(12,this.h3),l.setUint32(16,this.h4),l.setUint32(20,this.h5),l.setUint32(24,this.h6),this.is224||l.setUint32(28,this.h7),s};function k(s,l,f){var c,d=typeof s;if(d==="string"){var i=[],g=s.length,o=0,F;for(c=0;c<g;++c)F=s.charCodeAt(c),F<128?i[o++]=F:F<2048?(i[o++]=192|F>>6,i[o++]=128|F&63):F<55296||F>=57344?(i[o++]=224|F>>12,i[o++]=128|F>>6&63,i[o++]=128|F&63):(F=65536+((F&1023)<<10|s.charCodeAt(++c)&1023),i[o++]=240|F>>18,i[o++]=128|F>>12&63,i[o++]=128|F>>6&63,i[o++]=128|F&63);s=i}else if(d==="object"){if(s===null)throw new Error(e);if(p&&s.constructor===ArrayBuffer)s=new Uint8Array(s);else if(!Array.isArray(s)&&(!p||!ArrayBuffer.isView(s)))throw new Error(e)}else throw new Error(e);s.length>64&&(s=new A(l,!0).update(s).array());var b=[],D=[];for(c=0;c<64;++c){var T=s[c]||0;b[c]=92^T,D[c]=54^T}A.call(this,l,f),this.update(D),this.oKeyPad=b,this.inner=!0,this.sharedMemory=f}k.prototype=new A,k.prototype.finalize=function(){if(A.prototype.finalize.call(this),this.inner){this.inner=!1;var s=this.array();A.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(s),A.prototype.finalize.call(this)}};var S=_();S.sha256=S,S.sha224=_(!0),S.sha256.hmac=L(),S.sha224.hmac=L(!0),x?t.exports=S:(n.sha256=S.sha256,n.sha224=S.sha224)})()})(dt);var X={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(H,function(){return function(r,n,u){n.prototype.isToday=function(){var h="YYYY-MM-DD",x=u();return this.format(h)===x.format(h)}}})})(X);var gt=X.exports;const Ft=W(gt);var Q={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(H,function(){return function(r,n,u){n.prototype.isYesterday=function(){var h="YYYY-MM-DD",x=u().subtract(1,"day");return this.format(h)===x.format(h)}}})})(Q);var mt=Q.exports;const yt=W(mt);var tt={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(H,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(n,u,h){var x=u.prototype,p=x.format;h.en.formats=r,x.format=function(a){a===void 0&&(a="YYYY-MM-DDTHH:mm:ssZ");var w=this.$locale().formats,y=function(U,I){return U.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(v,B,_){var M=_&&_.toUpperCase();return B||I[_]||r[_]||I[M].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(O,L,A){return L||A.slice(1)})})}(a,w===void 0?{}:w);return p.call(this,y)}}})})(tt);var vt=tt.exports;const bt=W(vt);var j=(t=>(t.PUNCTUATION="punctuation",t.PARAGRAPHS="paragraphs",t.NONE="none",t))(j||{});N.extend(it);N.extend(Ft);N.extend(yt);N.extend(bt);const Ot=t=>new Promise(e=>setTimeout(e,t)),Nt=(t,e,r,n)=>{const u=/{{char}}/gi,h=/{{user}}/gi,x=/{{VIDEO_FILE_ID_([a-f0-9-]+)}}/gi,p=/{{HTML_FILE_ID_([a-f0-9-]+)}}/gi;return r!=null&&(t=t.replace(u,r)),n!=null&&(t=t.replace(h,n)),t=t.replace(x,(a,w)=>`<video src="${`${K}/api/v1/files/${w}/content`}" controls></video>`),t=t.replace(p,(a,w)=>`<iframe src="${`${K}/api/v1/files/${w}/content/html`}" width="100%" frameborder="0" onload="this.style.height=(this.contentWindow.document.body.scrollHeight+20)+'px';"></iframe>`),Array.isArray(e)&&e.forEach((a,w)=>{const y=`\\[${w}\\]`,U=new RegExp(y,"g");t=t.replace(U,`<source_id data="${w}" title="${a}" />`)}),t},$t=t=>t.replace(/<\|[a-z]*$/,"").replace(/<\|[a-z]+\|$/,"").replace(/<$/,"").replaceAll(/<\|[a-z]+\|>/g," ").replaceAll("<","&lt;").replaceAll(">","&gt;").trim(),Lt=t=>t.trim();function kt(t){return new DOMParser().parseFromString(t,"text/html").documentElement.textContent}const Pt=t=>t.charAt(0).toUpperCase()+t.slice(1),zt=t=>{let e="";return new TransformStream({transform(r,n){e+=r;const u=e.split(t);u.slice(0,-1).forEach(h=>n.enqueue(h)),e=u[u.length-1]},flush(r){e&&r.enqueue(e)}})},jt=t=>{const e={messages:{},currentId:null};let r=null,n=null;for(const u of t)n=ft(),r!==null&&(e.messages[r].childrenIds=[...e.messages[r].childrenIds,n]),e.messages[n]={...u,id:n,parentId:r,childrenIds:[]},r=n;return e.currentId=n,e},wt=()=>{const t=document.createElement("canvas"),e=t.getContext("2d");t.height=1,t.width=1;const r=new ImageData(t.width,t.height),n=r.data;for(let h=0;h<r.data.length;h+=1)h%4!==3?n[h]=Math.floor(256*Math.random()):n[h]=255;e.putImageData(r,0,0);const u=e.getImageData(0,0,t.width,t.height).data;for(let h=0;h<u.length;h+=1)if(u[h]!==n[h])return console.log("canvasPixelTest: Wrong canvas pixel RGB value detected:",u[h],"at:",h,"expected:",n[h]),console.log("canvasPixelTest: Canvas blocking or spoofing is likely"),!1;return!0},Ht=async(t,e,r)=>new Promise((n,u)=>{const h=new Image;h.onload=()=>{const x=document.createElement("canvas");let p=h.width,a=h.height;if(e&&r){if(p<=e&&a<=r){n(t);return}p/a>e/r?(a=Math.round(e*a/p),p=e):(p=Math.round(r*p/a),a=r)}else if(e){if(p<=e){n(t);return}a=Math.round(e*a/p),p=e}else if(r){if(a<=r){n(t);return}p=Math.round(r*p/a),a=r}x.width=p,x.height=a,x.getContext("2d").drawImage(h,0,0,p,a);const y=x.toDataURL();n(y)},h.onerror=x=>u(x),h.src=t}),Vt=t=>{const e=document.createElement("canvas"),r=e.getContext("2d");if(e.width=100,e.height=100,!wt())return console.log("generateInitialsImage: failed pixel test, fingerprint evasion is likely. Using default image."),"/user.png";r.fillStyle="#F39C12",r.fillRect(0,0,e.width,e.height),r.fillStyle="#FFFFFF",r.font="40px Helvetica",r.textAlign="center",r.textBaseline="middle";const n=t.trim(),u=n.length>0?n[0]+(n.split(" ").length>1?n[n.lastIndexOf(" ")+1]:""):"";return r.fillText(u.toUpperCase(),e.width/2,e.height/2),e.toDataURL()},Jt=t=>{const e=N(t);return N(),e.isToday()?`Today at ${e.format("LT")}`:e.isYesterday()?`Yesterday at ${e.format("LT")}`:`${e.format("L")} at ${e.format("LT")}`},Wt=async t=>{let e=!1;if(!navigator.clipboard){const r=document.createElement("textarea");r.value=t,r.style.top="0",r.style.left="0",r.style.position="fixed",document.body.appendChild(r),r.focus(),r.select();try{const u=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+u),e=!0}catch(n){console.error("Fallback: Oops, unable to copy",n)}return document.body.removeChild(r),e}return e=await navigator.clipboard.writeText(t).then(()=>(console.log("Async: Copying to clipboard was successful!"),!0)).catch(r=>(console.error("Async: Could not copy text: ",r),!1)),e},Gt=(t,e)=>e==="0.0.0"?!1:e.localeCompare(t,void 0,{numeric:!0,sensitivity:"case",caseFirst:"upper"})<0,Kt=t=>{const e=/\[([^\]]+)\]/g,r=[];let n;for(;(n=e.exec(t))!==null;)r.push({word:n[1],startIndex:n.index,endIndex:e.lastIndex-1});return r},qt=(t,e)=>{console.log("inputString",t);const r=t.split(`
`),u=r.pop().split(" ");(u.at(-1)===e||e===""&&u.at(-1)==="\\#")&&u.pop();let h=u.join(" ");h!==""&&(h+=" ");const x=[...r,h].join(`
`);return console.log("resultString",x),x},Zt=t=>"mapping"in t[0]?"openai":"webui",Xt=async(t=!1)=>{const e=await new Promise((u,h)=>{navigator.geolocation.getCurrentPosition(u,h)}).catch(u=>{throw console.error("Error getting user location:",u),u});if(!e)return"Location not available";const{latitude:r,longitude:n}=e.coords;return t?{latitude:r,longitude:n}:`${r.toFixed(3)}, ${n.toFixed(3)} (lat, long)`},At=t=>{var p,a,w,y,U,I,v,B;const e=t.mapping,r=[];let n="",u=null;for(const _ in e){const M=e[_];n=_;try{if(r.length==0&&(M.message==null||((p=M.message.content.parts)==null?void 0:p[0])==""&&M.message.content.text==null))continue;{const O={id:_,parentId:u,childrenIds:M.children||[],role:((w=(a=M.message)==null?void 0:a.author)==null?void 0:w.role)!=="user"?"assistant":"user",content:((I=(U=(y=M.message)==null?void 0:y.content)==null?void 0:U.parts)==null?void 0:I[0])||((B=(v=M.message)==null?void 0:v.content)==null?void 0:B.text)||"",model:"gpt-3.5-turbo",done:!0,context:null};r.push(O),u=n}}catch(O){console.log("Error with",M,`
Error:`,O)}}const h={};return r.forEach(_=>h[_.id]=_),{history:{currentId:n,messages:h},models:["gpt-3.5-turbo"],messages:r,options:{},timestamp:t.create_time,title:t.title??"New Chat"}},Et=t=>{const e=t.messages;if(e.length===0||e[e.length-1].childrenIds.length!==0||e[0].parentId!==null)return!1;for(const u of e)if(typeof u.content!="string")return!1;return!0},Qt=t=>{const e=[];let r=0;for(const n of t){const u=At(n);Et(u)?e.push({id:n.id,user_id:"",title:n.title,chat:u,timestamp:n.timestamp}):r++}return console.log(r,"Conversations could not be imported"),e},te=t=>{let e;try{e=new URL(t)}catch{return!1}return e.protocol==="http:"||e.protocol==="https:"},_t=t=>{const e=/[\uD800-\uDBFF][\uDC00-\uDFFF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g;return t.replace(e,"")},Dt=t=>t.replace(/(```[\s\S]*?```)/g,"").replace(/^\|.*\|$/gm,"").replace(/(?:\*\*|__)(.*?)(?:\*\*|__)/g,"$1").replace(/(?:[*_])(.*?)(?:[*_])/g,"$1").replace(/~~(.*?)~~/g,"$1").replace(/`([^`]+)`/g,"$1").replace(/!?\[([^\]]*)\](?:\([^)]+\)|\[[^\]]*\])/g,"$1").replace(/^\[[^\]]+\]:\s*.*$/gm,"").replace(/^#{1,6}\s+/gm,"").replace(/^\s*[-*+]\s+/gm,"").replace(/^\s*(?:\d+\.)\s+/gm,"").replace(/^\s*>[> ]*/gm,"").replace(/^\s*:\s+/gm,"").replace(/\[\^[^\]]*\]/g,"").replace(/[-*_~]/g,"").replace(/\n{2,}/g,`
`),G=t=>Dt(_t(t.trim())),Tt=(t,e)=>{for(const r of e)t=t.replace(new RegExp(`<details\\s+type="${r}"[^>]*>.*?<\\/details>`,"gis"),"");return t},et=/```[\s\S]*?```/g,Mt=t=>{const e=[];let r=0;t=t.replace(et,u=>{const h=`\0${r}\0`;return e[r++]=u,h});let n=t.split(new RegExp("(?<=[.!?])\\s+"));return n=n.map(u=>u.replace(/\u0000(\d+)\u0000/g,(h,x)=>e[x])),n.map(G).filter(Boolean)},Ut=t=>{const e=[];let r=0;t=t.replace(et,u=>{const h=`\0${r}\0`;return e[r++]=u,h});let n=t.split(/\n+/);return n=n.map(u=>u.replace(/\u0000(\d+)\u0000/g,(h,x)=>e[x])),n.map(G).filter(Boolean)},It=t=>Mt(t).reduce((e,r)=>{const n=e.length-1;if(n>=0){const u=e[n],h=u.split(/\s+/).length,x=u.length;h<4||x<50?e[n]=u+" "+r:e.push(r)}else e.push(r);return e},[]),ee=(t,e="punctuation")=>{t=Tt(t,["reasoning","code_interpreter"]);const r=[];switch(e){default:case j.PUNCTUATION:r.push(...It(t));break;case j.PARAGRAPHS:r.push(...Ut(t));break;case j.NONE:r.push(G(t));break}return r},re=(t,e)=>new File([t],e,{type:t.type}),se=(t,e)=>({"{{USER_NAME}}":t,"{{USER_LOCATION}}":e||"Unknown","{{CURRENT_DATETIME}}":St(),"{{CURRENT_DATE}}":rt(),"{{CURRENT_TIME}}":st(),"{{CURRENT_WEEKDAY}}":at(),"{{CURRENT_TIMEZONE}}":nt(),"{{USER_LANGUAGE}}":localStorage.getItem("locale")||"en-US"}),ne=(t,e,r)=>{const n=new Date,u=n.getFullYear()+"-"+String(n.getMonth()+1).padStart(2,"0")+"-"+String(n.getDate()).padStart(2,"0"),h=n.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}),x=at(),p=nt(),a=localStorage.getItem("locale")||"en-US";return t=t.replace("{{CURRENT_DATETIME}}",`${u} ${h}`),t=t.replace("{{CURRENT_DATE}}",u),t=t.replace("{{CURRENT_TIME}}",h),t=t.replace("{{CURRENT_WEEKDAY}}",x),t=t.replace("{{CURRENT_TIMEZONE}}",p),t=t.replace("{{USER_LANGUAGE}}",a),e&&(t=t.replace("{{USER_NAME}}",e)),r&&(t=t.replace("{{USER_LOCATION}}",r)),t},ae=t=>{const e=new Date,r=new Date(t*1e3),u=(e.getTime()-r.getTime())/(1e3*3600*24),h=e.getDate(),x=e.getMonth(),p=e.getFullYear(),a=r.getDate(),w=r.getMonth(),y=r.getFullYear();return p===y&&x===w&&h===a?"Today":p===y&&x===w&&h-a===1?"Yesterday":u<=7?"Previous 7 days":u<=30?"Previous 30 days":p===y?r.toLocaleString("default",{month:"long"}):r.getFullYear().toString()},oe=t=>{const e={};let r=!1,n=!1;const u=/^\s*([a-z_]+):\s*(.*)\s*$/i,h=t.split(`
`);if(h[0].trim()!=='"""')return{};r=!0;for(let x=1;x<h.length;x++){const p=h[x];if(p.includes('"""')&&r){n=!0;break}if(r&&!n){const a=u.exec(p);if(a){const[,w,y]=a;e[w.trim()]=y.trim()}}}return e},ie=(t,e,r)=>{const n=t.map(h=>h.code);return e.map(h=>n.find(x=>x.startsWith(h))).find(Boolean)||r},rt=()=>new Date().toISOString().split("T")[0],st=()=>new Date().toTimeString().split(" ")[0],St=()=>`${rt()} ${st()}`,nt=()=>Intl.DateTimeFormat().resolvedOptions().timeZone,at=()=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date().getDay()],Rt=(t,e)=>{if(e===null)return[];const r=t.messages[e];return r!=null&&r.parentId?[...Rt(t,r.parentId),r]:[r]},ce=t=>{if(t==null)return"Unknown size";if(typeof t!="number"||t<0)return"Invalid size";if(t===0)return"0 B";const e=["B","KB","MB","GB","TB"];let r=0;for(;t>=1024&&r<e.length-1;)t/=1024,r++;return`${t.toFixed(1)} ${e[r]}`},le=t=>(console.log(typeof t),t?t.split(`
`).length:0);export{Zt as A,Qt as B,rt as C,st as D,St as E,nt as F,at as G,qt as H,te as I,Kt as J,ne as K,Tt as L,se as M,kt as N,Nt as O,Lt as P,j as T,pt as _,Xt as a,Rt as b,Gt as c,jt as d,oe as e,$t as f,ae as g,Pt as h,ce as i,le as j,Vt as k,bt as l,Wt as m,re as n,Ot as o,ie as p,Ft as q,yt as r,zt as s,Jt as t,ht as u,ft as v,Ht as w,ee as x,Z as y,wt as z};
//# sourceMappingURL=index.DD5gL1tX.js.map
