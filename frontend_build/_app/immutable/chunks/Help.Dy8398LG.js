import{s as Fe,l as Ae,i as A,n as ye,d as _,B as un,q as kn,e as V,t as Ie,k as ee,ai as Ri,c as z,a as C,b as Se,o as te,aj as Ui,f as m,g as E,h as Me,P as tl,N as ft,u as ke,y as We,S as et,A as qe,j as ae,p as jt,D as $e,r as Qt,v as xt,w as $t,x as en,Q as Mn,E as Te,F as Ve,H as on,T as Qn,M as ll,z as jl,C as Dn,ao as st,U as Yt,V as Et,W as Bn,Y as vn,J as ln,$ as me,a1 as Ol,ap as io,ah as Wi,_ as ao,aq as gt,a2 as Il,al as Wa,ar as Fa,am as ja,I as fs,an as ds,R as hs,O as Ql,m as Ya}from"./scheduler.CRl-z1y4.js";import{S as Re,i as Ue,t as S,g as He,a as N,c as Be,j as ms,f as Je,b as ne,d as se,m as le,e as oe,h as xl}from"./index.Ci9MLlfz.js";import{g as Fi}from"./globals.D0QH3NT1.js";import{e as vt,u as bo,o as vo}from"./each.Cd7EUOR7.js";import{t as nt}from"./Toaster.svelte_svelte_type_style_lang.CQ9dEDgo.js";import{C as Xa,D as Ka,F as Za,a as ji,b as Ga,P as qa}from"./FilesOverlay.Dke2SGtR.js";import{g as Po}from"./entry.CKIhGktT.js";import{p as Ja}from"./stores.DnCpNxKe.js";import{t as ul,u as xn,c as Yl,p as Yi,n as Xi,m as dl,a as Zn,i as wo,T as Xo,e as Hl,d as Qa,S as gs,V as Sn,H as Ft,l as ko,X as Gn,G as jn,W as Ki,h as cl,s as Ko,E as xa,f as _s,y as $a,z as il,r as ec,J as $l,F as tc,B as al,q as nc}from"./index.iZ7GkiWf.js";import{a as lc,C as oc,D as sc,E as rc,F as ic,G as ac,H as so,I as ps,v as el,n as Zi,w as cc,b as In,J as uc,m as $o,f as co,K as fc,L as dc,M as hc,d as mc,x as Oo}from"./index.DD5gL1tX.js";import{f as Zo,i as bl,C as gc,u as Ho,d as _c,a as pc}from"./index.BVXN1SfG.js";import{d as bc}from"./index.C1J9xu5V.js";import{p as vc,h as wc}from"./index.BIMdWfwV.js";import{M as kc,a as yc,b as Ec,T as Ic,S as Sc,P as Cc,q as Dc}from"./index.ClS3Anu9.js";import{h as Mc,i as bs,j as vs}from"./index.C22GtvMW.js";import{q as Tc,r as Vc,s as zc,t as Nc,v as Pc,w as Oc}from"./index.BPZ_ALe6.js";import{g as es,j as Hc,k as Bc,l as Ac}from"./index.DFQ-xI8M.js";import{f as vl}from"./index.JHD1JQaA.js";import{m as Sl,p as ws}from"./marked.esm._0_gBwjO.js";import{t as Gi,s as Lc}from"./index.CXWwS1xV.js";import{u as Rc,b as Uc}from"./index.BpBMeWAg.js";import"./updater.e7zyckLc.js";import{D as yo,M as wn}from"./Dropdown.9uTl7bwK.js";import{b as Eo}from"./menu-trigger.HLnuFu5_.js";import{f as Xl}from"./index.BFuekP1B.js";import{T as Pt}from"./Tooltip.DuavYtFf.js";import{S as Wc}from"./Switch.XdZuashh.js";import{W as Fc}from"./WrenchSolid.BtG7rOpH.js";import{V as jc,R as Yc}from"./RichTextInput.B10G3PGl.js";import{g as Xc}from"./index.At-5C9ij.js";import{g as Kc}from"./index.J3n-LmoC.js";import{F as qi}from"./fuse.CU2r43ac.js";import{d as Zc,r as Gc}from"./relativeTime.BDz4fsXT.js";import{S as Io}from"./Spinner.B5qNQZjw.js";import{F as Ji}from"./FileItem.Lzieq5vp.js";import{h as On,ba as Qi,bb as ts,bc as Bo,bd as Ao,ah as qc,be as Jc,bf as Qc,af as xi,bg as xc}from"./Markdown.DIm7mEBt.js";import{X as So}from"./XMark.DKXpQqi-.js";import{G as $c}from"./GlobeAlt.DueHkXLJ.js";import{K as eu,S as tu,E as nu,M as lu}from"./Messages.DrfmHWIR.js";import{S as ou}from"./Selector.BIS03Tn0.js";import{f as su}from"./FileSaver.min.CimDdHIv.js";import{a as ru}from"./index.DYrR30bJ.js";import{U as iu}from"./UserMenu.B3JbC2bg.js";import{M as au}from"./MenuLines.Doyu-mr9.js";import{M as cu}from"./Modal.DNebWnXQ.js";import{A as uu}from"./AdvancedParams.CqEcd9qI.js";import{g as fu,j as du,k as hu,l as mu}from"./index.9W4jP9JS.js";import{V as gu,H as _u}from"./Heart.YMLj5iRO.js";import{C as ro}from"./Collapsible.an7Zv-qh.js";import{D as pu}from"./Drawer.DZSWC3Dw.js";import{w as Qe,a as Pn,d as kl}from"./index.BWHQf96I.js";import{g as nl,a as Bl}from"./spread.CgU5AtxT.js";import{E as bu}from"./EllipsisVertical.Bn1p_fvw.js";import{C as vu}from"./ConfirmDialog.BpLky8Hi.js";function wu(l){let e;for(;e=l.sourceEvent;)l=e;return l}function Fn(l,e){if(l=wu(l),e===void 0&&(e=l.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var n=t.createSVGPoint();return n.x=l.clientX,n.y=l.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[l.clientX-o.left-e.clientLeft,l.clientY-o.top-e.clientTop]}}return[l.pageX,l.pageY]}const ku={passive:!1},Al={capture:!0,passive:!1};function Lo(l){l.stopImmediatePropagation()}function yl(l){l.preventDefault(),l.stopImmediatePropagation()}function $i(l){var e=l.document.documentElement,t=On(l).on("dragstart.drag",yl,Al);"onselectstart"in e?t.on("selectstart.drag",yl,Al):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ea(l,e){var t=l.document.documentElement,n=On(l).on("dragstart.drag",null);e&&(n.on("click.drag",yl,Al),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in t?n.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const eo=l=>()=>l;function Go(l,{sourceEvent:e,subject:t,target:n,identifier:o,active:s,x:i,y:r,dx:a,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:l,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:r,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}Go.prototype.on=function(){var l=this._.on.apply(this._,arguments);return l===this._?this:l};function yu(l){return!l.ctrlKey&&!l.button}function Eu(){return this.parentNode}function Iu(l,e){return e??{x:l.x,y:l.y}}function Su(){return navigator.maxTouchPoints||"ontouchstart"in this}function Cu(){var l=yu,e=Eu,t=Iu,n=Su,o={},s=Qi("start","drag","end"),i=0,r,a,c,u,f=0;function h(I){I.on("mousedown.drag",d).filter(n).on("touchstart.drag",w).on("touchmove.drag",g,ku).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(I,T){if(!(u||!l.call(this,I,T))){var M=k(this,e.call(this,I,T),I,T,"mouse");M&&(On(I.view).on("mousemove.drag",p,Al).on("mouseup.drag",b,Al),$i(I.view),Lo(I),c=!1,r=I.clientX,a=I.clientY,M("start",I))}}function p(I){if(yl(I),!c){var T=I.clientX-r,M=I.clientY-a;c=T*T+M*M>f}o.mouse("drag",I)}function b(I){On(I.view).on("mousemove.drag mouseup.drag",null),ea(I.view,c),yl(I),o.mouse("end",I)}function w(I,T){if(l.call(this,I,T)){var M=I.changedTouches,y=e.call(this,I,T),H=M.length,O,B;for(O=0;O<H;++O)(B=k(this,y,I,T,M[O].identifier,M[O]))&&(Lo(I),B("start",I,M[O]))}}function g(I){var T=I.changedTouches,M=T.length,y,H;for(y=0;y<M;++y)(H=o[T[y].identifier])&&(yl(I),H("drag",I,T[y]))}function v(I){var T=I.changedTouches,M=T.length,y,H;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),y=0;y<M;++y)(H=o[T[y].identifier])&&(Lo(I),H("end",I,T[y]))}function k(I,T,M,y,H,O){var B=s.copy(),j=Fn(O||M,T),Z,L,D;if((D=t.call(I,new Go("beforestart",{sourceEvent:M,target:h,identifier:H,active:i,x:j[0],y:j[1],dx:0,dy:0,dispatch:B}),y))!=null)return Z=D.x-j[0]||0,L=D.y-j[1]||0,function Y(P,F,G){var K=j,X;switch(P){case"start":o[H]=Y,X=i++;break;case"end":delete o[H],--i;case"drag":j=Fn(G||F,T),X=i;break}B.call(P,I,new Go(P,{sourceEvent:F,subject:D,target:h,identifier:H,active:X,x:j[0]+Z,y:j[1]+L,dx:j[0]-K[0],dy:j[1]-K[1],dispatch:B}),y)}}return h.filter=function(I){return arguments.length?(l=typeof I=="function"?I:eo(!!I),h):l},h.container=function(I){return arguments.length?(e=typeof I=="function"?I:eo(I),h):e},h.subject=function(I){return arguments.length?(t=typeof I=="function"?I:eo(I),h):t},h.touchable=function(I){return arguments.length?(n=typeof I=="function"?I:eo(!!I),h):n},h.on=function(){var I=s.on.apply(s,arguments);return I===s?h:I},h.clickDistance=function(I){return arguments.length?(f=(I=+I)*I,h):Math.sqrt(f)},h}var Du=1e-12;function ks(l){return((l=Math.exp(l))+1/l)/2}function Mu(l){return((l=Math.exp(l))-1/l)/2}function Tu(l){return((l=Math.exp(2*l))-1)/(l+1)}const Vu=function l(e,t,n){function o(s,i){var r=s[0],a=s[1],c=s[2],u=i[0],f=i[1],h=i[2],d=u-r,p=f-a,b=d*d+p*p,w,g;if(b<Du)g=Math.log(h/c)/e,w=function(y){return[r+y*d,a+y*p,c*Math.exp(e*y*g)]};else{var v=Math.sqrt(b),k=(h*h-c*c+n*b)/(2*c*t*v),I=(h*h-c*c-n*b)/(2*h*t*v),T=Math.log(Math.sqrt(k*k+1)-k),M=Math.log(Math.sqrt(I*I+1)-I);g=(M-T)/e,w=function(y){var H=y*g,O=ks(T),B=c/(t*v)*(O*Tu(e*H+T)-Mu(T));return[r+B*d,a+B*p,c*O/ks(e*H+T)]}}return w.duration=g*1e3*e/Math.SQRT2,w}return o.rho=function(s){var i=Math.max(.001,+s),r=i*i,a=r*r;return l(i,r,a)},o}(Math.SQRT2,2,4),to=l=>()=>l;function zu(l,{sourceEvent:e,target:t,transform:n,dispatch:o}){Object.defineProperties(this,{type:{value:l,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:o}})}function Ro(l){l.stopImmediatePropagation()}function Pl(l){l.preventDefault(),l.stopImmediatePropagation()}function Nu(l){return(!l.ctrlKey||l.type==="wheel")&&!l.button}function Pu(){var l=this;return l instanceof SVGElement?(l=l.ownerSVGElement||l,l.hasAttribute("viewBox")?(l=l.viewBox.baseVal,[[l.x,l.y],[l.x+l.width,l.y+l.height]]):[[0,0],[l.width.baseVal.value,l.height.baseVal.value]]):[[0,0],[l.clientWidth,l.clientHeight]]}function ys(){return this.__zoom||ts}function Ou(l){return-l.deltaY*(l.deltaMode===1?.05:l.deltaMode?1:.002)*(l.ctrlKey?10:1)}function Hu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bu(l,e,t){var n=l.invertX(e[0][0])-t[0][0],o=l.invertX(e[1][0])-t[1][0],s=l.invertY(e[0][1])-t[0][1],i=l.invertY(e[1][1])-t[1][1];return l.translate(o>n?(n+o)/2:Math.min(0,n)||Math.max(0,o),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function Au(){var l=Nu,e=Pu,t=Bu,n=Ou,o=Hu,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],r=250,a=Vu,c=Qi("start","zoom","end"),u,f,h,d=500,p=150,b=0,w=10;function g(D){D.property("__zoom",ys).on("wheel.zoom",H,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",B).filter(o).on("touchstart.zoom",j).on("touchmove.zoom",Z).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(D,Y,P,F){var G=D.selection?D.selection():D;G.property("__zoom",ys),D!==G?T(D,Y,P,F):G.interrupt().each(function(){M(this,arguments).event(F).start().zoom(null,typeof Y=="function"?Y.apply(this,arguments):Y).end()})},g.scaleBy=function(D,Y,P,F){g.scaleTo(D,function(){var G=this.__zoom.k,K=typeof Y=="function"?Y.apply(this,arguments):Y;return G*K},P,F)},g.scaleTo=function(D,Y,P,F){g.transform(D,function(){var G=e.apply(this,arguments),K=this.__zoom,X=P==null?I(G):typeof P=="function"?P.apply(this,arguments):P,Q=K.invert(X),W=typeof Y=="function"?Y.apply(this,arguments):Y;return t(k(v(K,W),X,Q),G,i)},P,F)},g.translateBy=function(D,Y,P,F){g.transform(D,function(){return t(this.__zoom.translate(typeof Y=="function"?Y.apply(this,arguments):Y,typeof P=="function"?P.apply(this,arguments):P),e.apply(this,arguments),i)},null,F)},g.translateTo=function(D,Y,P,F,G){g.transform(D,function(){var K=e.apply(this,arguments),X=this.__zoom,Q=F==null?I(K):typeof F=="function"?F.apply(this,arguments):F;return t(ts.translate(Q[0],Q[1]).scale(X.k).translate(typeof Y=="function"?-Y.apply(this,arguments):-Y,typeof P=="function"?-P.apply(this,arguments):-P),K,i)},F,G)};function v(D,Y){return Y=Math.max(s[0],Math.min(s[1],Y)),Y===D.k?D:new Bo(Y,D.x,D.y)}function k(D,Y,P){var F=Y[0]-P[0]*D.k,G=Y[1]-P[1]*D.k;return F===D.x&&G===D.y?D:new Bo(D.k,F,G)}function I(D){return[(+D[0][0]+ +D[1][0])/2,(+D[0][1]+ +D[1][1])/2]}function T(D,Y,P,F){D.on("start.zoom",function(){M(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(F).end()}).tween("zoom",function(){var G=this,K=arguments,X=M(G,K).event(F),Q=e.apply(G,K),W=P==null?I(Q):typeof P=="function"?P.apply(G,K):P,J=Math.max(Q[1][0]-Q[0][0],Q[1][1]-Q[0][1]),q=G.__zoom,ce=typeof Y=="function"?Y.apply(G,K):Y,ge=a(q.invert(W).concat(J/q.k),ce.invert(W).concat(J/ce.k));return function(re){if(re===1)re=ce;else{var Pe=ge(re),x=J/Pe[2];re=new Bo(x,W[0]-Pe[0]*x,W[1]-Pe[1]*x)}X.zoom(null,re)}})}function M(D,Y,P){return!P&&D.__zooming||new y(D,Y)}function y(D,Y){this.that=D,this.args=Y,this.active=0,this.sourceEvent=null,this.extent=e.apply(D,Y),this.taps=0}y.prototype={event:function(D){return D&&(this.sourceEvent=D),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(D,Y){return this.mouse&&D!=="mouse"&&(this.mouse[1]=Y.invert(this.mouse[0])),this.touch0&&D!=="touch"&&(this.touch0[1]=Y.invert(this.touch0[0])),this.touch1&&D!=="touch"&&(this.touch1[1]=Y.invert(this.touch1[0])),this.that.__zoom=Y,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(D){var Y=On(this.that).datum();c.call(D,this.that,new zu(D,{sourceEvent:this.sourceEvent,target:g,type:D,transform:this.that.__zoom,dispatch:c}),Y)}};function H(D,...Y){if(!l.apply(this,arguments))return;var P=M(this,Y).event(D),F=this.__zoom,G=Math.max(s[0],Math.min(s[1],F.k*Math.pow(2,n.apply(this,arguments)))),K=Fn(D);if(P.wheel)(P.mouse[0][0]!==K[0]||P.mouse[0][1]!==K[1])&&(P.mouse[1]=F.invert(P.mouse[0]=K)),clearTimeout(P.wheel);else{if(F.k===G)return;P.mouse=[K,F.invert(K)],Ao(this),P.start()}Pl(D),P.wheel=setTimeout(X,p),P.zoom("mouse",t(k(v(F,G),P.mouse[0],P.mouse[1]),P.extent,i));function X(){P.wheel=null,P.end()}}function O(D,...Y){if(h||!l.apply(this,arguments))return;var P=D.currentTarget,F=M(this,Y,!0).event(D),G=On(D.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",J,!0),K=Fn(D,P),X=D.clientX,Q=D.clientY;$i(D.view),Ro(D),F.mouse=[K,this.__zoom.invert(K)],Ao(this),F.start();function W(q){if(Pl(q),!F.moved){var ce=q.clientX-X,ge=q.clientY-Q;F.moved=ce*ce+ge*ge>b}F.event(q).zoom("mouse",t(k(F.that.__zoom,F.mouse[0]=Fn(q,P),F.mouse[1]),F.extent,i))}function J(q){G.on("mousemove.zoom mouseup.zoom",null),ea(q.view,F.moved),Pl(q),F.event(q).end()}}function B(D,...Y){if(l.apply(this,arguments)){var P=this.__zoom,F=Fn(D.changedTouches?D.changedTouches[0]:D,this),G=P.invert(F),K=P.k*(D.shiftKey?.5:2),X=t(k(v(P,K),F,G),e.apply(this,Y),i);Pl(D),r>0?On(this).transition().duration(r).call(T,X,F,D):On(this).call(g.transform,X,F,D)}}function j(D,...Y){if(l.apply(this,arguments)){var P=D.touches,F=P.length,G=M(this,Y,D.changedTouches.length===F).event(D),K,X,Q,W;for(Ro(D),X=0;X<F;++X)Q=P[X],W=Fn(Q,this),W=[W,this.__zoom.invert(W),Q.identifier],G.touch0?!G.touch1&&G.touch0[2]!==W[2]&&(G.touch1=W,G.taps=0):(G.touch0=W,K=!0,G.taps=1+!!u);u&&(u=clearTimeout(u)),K&&(G.taps<2&&(f=W[0],u=setTimeout(function(){u=null},d)),Ao(this),G.start())}}function Z(D,...Y){if(this.__zooming){var P=M(this,Y).event(D),F=D.changedTouches,G=F.length,K,X,Q,W;for(Pl(D),K=0;K<G;++K)X=F[K],Q=Fn(X,this),P.touch0&&P.touch0[2]===X.identifier?P.touch0[0]=Q:P.touch1&&P.touch1[2]===X.identifier&&(P.touch1[0]=Q);if(X=P.that.__zoom,P.touch1){var J=P.touch0[0],q=P.touch0[1],ce=P.touch1[0],ge=P.touch1[1],re=(re=ce[0]-J[0])*re+(re=ce[1]-J[1])*re,Pe=(Pe=ge[0]-q[0])*Pe+(Pe=ge[1]-q[1])*Pe;X=v(X,Math.sqrt(re/Pe)),Q=[(J[0]+ce[0])/2,(J[1]+ce[1])/2],W=[(q[0]+ge[0])/2,(q[1]+ge[1])/2]}else if(P.touch0)Q=P.touch0[0],W=P.touch0[1];else return;P.zoom("touch",t(k(X,Q,W),P.extent,i))}}function L(D,...Y){if(this.__zooming){var P=M(this,Y).event(D),F=D.changedTouches,G=F.length,K,X;for(Ro(D),h&&clearTimeout(h),h=setTimeout(function(){h=null},d),K=0;K<G;++K)X=F[K],P.touch0&&P.touch0[2]===X.identifier?delete P.touch0:P.touch1&&P.touch1[2]===X.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(X=Fn(X,this),Math.hypot(f[0]-X[0],f[1]-X[1])<w)){var Q=On(this).on("dblclick.zoom");Q&&Q.apply(this,arguments)}}}return g.wheelDelta=function(D){return arguments.length?(n=typeof D=="function"?D:to(+D),g):n},g.filter=function(D){return arguments.length?(l=typeof D=="function"?D:to(!!D),g):l},g.touchable=function(D){return arguments.length?(o=typeof D=="function"?D:to(!!D),g):o},g.extent=function(D){return arguments.length?(e=typeof D=="function"?D:to([[+D[0][0],+D[0][1]],[+D[1][0],+D[1][1]]]),g):e},g.scaleExtent=function(D){return arguments.length?(s[0]=+D[0],s[1]=+D[1],g):[s[0],s[1]]},g.translateExtent=function(D){return arguments.length?(i[0][0]=+D[0][0],i[1][0]=+D[1][0],i[0][1]=+D[0][1],i[1][1]=+D[1][1],g):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},g.constrain=function(D){return arguments.length?(t=D,g):t},g.duration=function(D){return arguments.length?(r=+D,g):r},g.interpolate=function(D){return arguments.length?(a=D,g):a},g.on=function(){var D=c.on.apply(c,arguments);return D===c?g:D},g.clickDistance=function(D){return arguments.length?(b=(D=+D)*D,g):Math.sqrt(b)},g.tapDistance=function(D){return arguments.length?(w=+D,g):w},g}function Lu(l){let e,t,n,o,s,i,r;return a(),{feed:c,reset:a};function a(){e=!0,t="",n=0,o=-1,s=void 0,i=void 0,r=""}function c(f){t=t?t+f:f,e&&Ru(t)&&(t=t.slice(ta.length)),e=!1;const h=t.length;let d=0,p=!1;for(;d<h;){p&&(t[d]===`
`&&++d,p=!1);let b=-1,w=o,g;for(let v=n;b<0&&v<h;++v)g=t[v],g===":"&&w<0?w=v-d:g==="\r"?(p=!0,b=v-d):g===`
`&&(b=v-d);if(b<0){n=h-d,o=w;break}else n=0,o=-1;u(t,d,w,b),d+=b+1}d===h?t="":d>0&&(t=t.slice(d))}function u(f,h,d,p){if(p===0){r.length>0&&(l({type:"event",id:s,event:i||void 0,data:r.slice(0,-1)}),r="",s=void 0),i=void 0;return}const b=d<0,w=f.slice(h,h+(b?p:d));let g=0;b?g=p:f[h+d+1]===" "?g=d+2:g=d+1;const v=h+g,k=p-g,I=f.slice(v,v+k).toString();if(w==="data")r+=I?"".concat(I,`
`):`
`;else if(w==="event")i=I;else if(w==="id"&&!I.includes("\0"))s=I;else if(w==="retry"){const T=parseInt(I,10);Number.isNaN(T)||l({type:"reconnect-interval",value:T})}}}const ta=[239,187,191];function Ru(l){return ta.every((e,t)=>l.charCodeAt(t)===e)}class Uu extends TransformStream{constructor(){let e;super({start(t){e=Lu(n=>{n.type==="event"&&t.enqueue(n)})},transform(t){e.feed(t)}})}}async function Wu(l,e){const t=l.pipeThrough(new TextDecoderStream).pipeThrough(new Uu).getReader();let n=Fu(t);return e&&(n=ju(n)),n}async function*Fu(l){var e,t,n;for(;;){const{value:o,done:s}=await l.read();if(s){yield{done:!0,value:""};break}if(!o)continue;const i=o.data;if(i.startsWith("[DONE]")){yield{done:!0,value:""};break}try{const r=JSON.parse(i);if(console.log(r),r.error){yield{done:!0,value:"",error:r.error};break}if(r.sources){yield{done:!1,value:"",sources:r.sources};continue}if(r.selected_model_id){yield{done:!1,value:"",selectedModelId:r.selected_model_id};continue}if(r.usage){yield{done:!1,value:"",usage:r.usage};continue}yield{done:!1,value:((n=(t=(e=r.choices)==null?void 0:e[0])==null?void 0:t.delta)==null?void 0:n.content)??""}}catch(r){console.error("Error extracting delta from SSE event:",r)}}}async function*ju(l){for await(const e of l){if(e.done){yield e;return}if(e.error){yield e;continue}if(e.sources){yield e;continue}if(e.selectedModelId){yield e;continue}if(e.usage){yield e;continue}let t=e.value;if(t.length<5){yield{done:!1,value:t};continue}for(;t!="";){const n=Math.min(Math.floor(Math.random()*3)+1,t.length);yield{done:!1,value:t.slice(0,n)},(document==null?void 0:document.visibilityState)!=="hidden"&&await Yu(5),t=t.slice(n)}}}const Yu=l=>new Promise(e=>setTimeout(e,l));function Es(l){let e,t=l[2]&&Is(l);return{c(){t&&t.c(),e=Ae()},l(n){t&&t.l(n),e=Ae()},m(n,o){t&&t.m(n,o),A(n,e,o)},p(n,o){n[2]?t?(t.p(n,o),o&4&&S(t,1)):(t=Is(n),t.c(),S(t,1),t.m(e.parentNode,e)):t&&(He(),N(t,1,1,()=>{t=null}),Be())},d(n){n&&_(e),t&&t.d(n)}}}function Is(l){let e,t,n,o,s=l[1].type+"",i,r,a,c,u,f,h=Sl.parse(ws.sanitize(l[1].content))+"",d,p,b,w,g,v=l[1].url&&Ss(),k=l[1].url&&Cs(),I=l[1].dismissible&&Ds(l);return{c(){e=V("div"),t=V("div"),n=V("div"),o=V("div"),i=Ie(s),a=ee(),v&&v.c(),c=ee(),u=V("div"),f=new Ri(!1),d=ee(),k&&k.c(),p=ee(),b=V("div"),I&&I.c(),this.h()},l(T){e=z(T,"DIV",{class:!0});var M=C(e);t=z(M,"DIV",{class:!0});var y=C(t);n=z(y,"DIV",{class:!0});var H=C(n);o=z(H,"DIV",{class:!0});var O=C(o);i=Se(O,s),O.forEach(_),a=te(H),v&&v.l(H),H.forEach(_),c=te(y),u=z(y,"DIV",{class:!0});var B=C(u);f=Ui(B,!1),B.forEach(_),y.forEach(_),d=te(M),k&&k.l(M),p=te(M),b=z(M,"DIV",{class:!0});var j=C(b);I&&I.l(j),j.forEach(_),M.forEach(_),this.h()},h(){m(o,"class",r="text-xs font-bold "+(l[3][l[1].type]??l[3].info)+" w-fit px-2 rounded uppercase line-clamp-1 mr-0.5"),m(n,"class","flex justify-between self-start"),f.a=null,m(u,"class","flex-1 text-xs text-gray-700 dark:text-white"),m(t,"class","flex flex-col md:flex-row md:items-center flex-1 text-sm w-fit gap-1.5"),m(b,"class","flex self-start"),m(e,"class","top-0 left-0 right-0 p-2 mx-4 px-3 flex justify-center items-center relative rounded-xl border border-gray-50 dark:border-gray-850 text-gray-800 dark:text-gary-100 bg-white dark:bg-gray-900 backdrop-blur-xl z-30")},m(T,M){A(T,e,M),E(e,t),E(t,n),E(n,o),E(o,i),E(n,a),v&&v.m(n,null),E(t,c),E(t,u),f.m(h,u),E(e,d),k&&k.m(e,null),E(e,p),E(e,b),I&&I.m(b,null),g=!0},p(T,M){(!g||M&2)&&s!==(s=T[1].type+"")&&Me(i,s),(!g||M&2&&r!==(r="text-xs font-bold "+(T[3][T[1].type]??T[3].info)+" w-fit px-2 rounded uppercase line-clamp-1 mr-0.5"))&&m(o,"class",r),T[1].url?v||(v=Ss(),v.c(),v.m(n,null)):v&&(v.d(1),v=null),(!g||M&2)&&h!==(h=Sl.parse(ws.sanitize(T[1].content))+"")&&f.p(h),T[1].url?k||(k=Cs(),k.c(),k.m(e,p)):k&&(k.d(1),k=null),T[1].dismissible?I?I.p(T,M):(I=Ds(T),I.c(),I.m(b,null)):I&&(I.d(1),I=null)},i(T){g||(T&&tl(()=>{g&&(w||(w=ms(e,vl,{delay:100,duration:300},!0)),w.run(1))}),g=!0)},o(T){T&&(w||(w=ms(e,vl,{delay:100,duration:300},!1)),w.run(0)),g=!1},d(T){T&&_(e),v&&v.d(),k&&k.d(),I&&I.d(),T&&w&&w.end()}}}function Ss(l){let e,t='<a class="text-gray-700 dark:text-white text-xs font-semibold underline" href="/assets/files/whitepaper.pdf" target="_blank">Learn More</a> <div class="ml-1 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg></div>';return{c(){e=V("div"),e.innerHTML=t,this.h()},l(n){e=z(n,"DIV",{class:!0,"data-svelte-h":!0}),ft(e)!=="svelte-o2pz5m"&&(e.innerHTML=t),this.h()},h(){m(e,"class","flex md:hidden group w-fit md:items-center")},m(n,o){A(n,e,o)},d(n){n&&_(e)}}}function Cs(l){let e,t='<a class="text-gray-700 dark:text-white text-xs font-semibold underline" href="/" target="_blank">Learn More</a> <div class="ml-1 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4"><path fill-rule="evenodd" d="M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path></svg></div>';return{c(){e=V("div"),e.innerHTML=t,this.h()},l(n){e=z(n,"DIV",{class:!0,"data-svelte-h":!0}),ft(e)!=="svelte-1wr7se3"&&(e.innerHTML=t),this.h()},h(){m(e,"class","hidden md:flex group w-fit md:items-center")},m(n,o){A(n,e,o)},d(n){n&&_(e)}}}function Ds(l){let e,t="Ã—",n,o;return{c(){e=V("button"),e.textContent=t,this.h()},l(s){e=z(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ft(e)!=="svelte-o8kh4p"&&(e.textContent=t),this.h()},h(){m(e,"class","-mt-1 -mb-2 -translate-y-[1px] ml-1.5 mr-1 text-gray-400 dark:hover:text-white")},m(s,i){A(s,e,i),n||(o=ke(e,"click",l[5]),n=!0)},p:ye,d(s){s&&_(e),n=!1,o()}}}function Xu(l){let e,t=!l[0]&&Es(l);return{c(){t&&t.c(),e=Ae()},l(n){t&&t.l(n),e=Ae()},m(n,o){t&&t.m(n,o),A(n,e,o)},p(n,[o]){n[0]?t&&(t.d(1),t=null):t?t.p(n,o):(t=Es(n),t.c(),t.m(e.parentNode,e))},i:ye,o:ye,d(n){n&&_(e),t&&t.d(n)}}}function Ku(l,e,t){const n=un();let{banner:o={id:"",type:"info",title:"",content:"",url:"",dismissable:!0,timestamp:Math.floor(Date.now()/1e3)}}=e,{dismissed:s=!1}=e,i=!1;const r={info:"bg-blue-500/20 text-blue-700 dark:text-blue-200 ",success:"bg-green-500/20 text-green-700 dark:text-green-200",warning:"bg-yellow-500/20 text-yellow-700 dark:text-yellow-200",error:"bg-red-500/20 text-red-700 dark:text-red-200"},a=u=>{t(0,s=!0),n("dismiss",u)};kn(()=>{t(2,i=!0)});const c=()=>{a(o.id)};return l.$$set=u=>{"banner"in u&&t(1,o=u.banner),"dismissed"in u&&t(0,s=u.dismissed)},[s,o,i,r,a,c]}class Zu extends Re{constructor(e){super(),Ue(this,e,Ku,Xu,Fe,{banner:1,dismissed:0})}}let Ll="",Rl="";async function Gu(){var t,n;const l=await fetch("/api/config");if(!l.ok)throw new Error("Failed to fetch Google Drive credentials");const e=await l.json();if(Ll=(t=e.google_drive)==null?void 0:t.api_key,Rl=(n=e.google_drive)==null?void 0:n.client_id,!Ll||!Rl)throw new Error("Google Drive API credentials not configured")}const qu=["https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.file"],Ju=()=>{if(!Ll||!Rl)throw new Error("Google Drive API credentials not configured");if(Ll===""||Rl==="")throw new Error("Please configure valid Google Drive API credentials")};let no=null,Ms=!1;const Qu=()=>new Promise((l,e)=>{if(typeof gapi>"u"){const t=document.createElement("script");t.src="https://apis.google.com/js/api.js",t.onload=()=>{gapi.load("picker",()=>{l(!0)})},t.onerror=e,document.body.appendChild(t)}else gapi.load("picker",()=>{l(!0)})}),xu=()=>new Promise((l,e)=>{if(typeof google>"u"){const t=document.createElement("script");t.src="https://accounts.google.com/gsi/client",t.onload=l,t.onerror=e,document.body.appendChild(t)}else l(!0)}),$u=async()=>no||new Promise((l,e)=>{google.accounts.oauth2.initTokenClient({client_id:Rl,scope:qu.join(" "),callback:n=>{n.access_token?(no=n.access_token,l(no)):e(new Error("Failed to get access token"))},error_callback:n=>{e(new Error(n.message||"OAuth error occurred"))}}).requestAccessToken()}),ef=async()=>{Ms||(await Gu(),Ju(),await Promise.all([Qu(),xu()]),Ms=!0)},tf=()=>new Promise(async(l,e)=>{try{console.log("Initializing Google Drive Picker..."),await ef(),console.log("Getting auth token...");const t=await $u();if(!t)throw console.error("Failed to get OAuth token"),new Error("Unable to get OAuth token");console.log("Auth token obtained successfully"),new google.picker.PickerBuilder().enableFeature(google.picker.Feature.NAV_HIDDEN).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).addView(new google.picker.DocsView().setIncludeFolders(!1).setSelectFolderEnabled(!1).setMimeTypes("application/pdf,text/plain,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.google-apps.document,application/vnd.google-apps.spreadsheet,application/vnd.google-apps.presentation")).setOAuthToken(t).setDeveloperKey(Ll).setCallback(async o=>{if(o[google.picker.Response.ACTION]===google.picker.Action.PICKED)try{const s=o[google.picker.Response.DOCUMENTS][0],i=s[google.picker.Document.ID],r=s[google.picker.Document.NAME],a=s[google.picker.Document.URL];if(!i||!r)throw new Error("Required file details missing");const c=s[google.picker.Document.MIME_TYPE];let u,f;c.includes("google-apps")?(c.includes("document")?f="text/plain":c.includes("spreadsheet")?f="text/csv":c.includes("presentation")?f="text/plain":f="application/pdf",u=`https://www.googleapis.com/drive/v3/files/${i}/export?mimeType=${encodeURIComponent(f)}`):u=`https://www.googleapis.com/drive/v3/files/${i}?alt=media`;const h=await fetch(u,{headers:{Authorization:`Bearer ${t}`,Accept:"*/*"}});if(!h.ok){const b=await h.text();throw console.error("Download failed:",{status:h.status,statusText:h.statusText,error:b}),new Error(`Failed to download file (${h.status}): ${b}`)}const d=await h.blob(),p={id:i,name:r,url:u,blob:d,headers:{Authorization:`Bearer ${t}`,Accept:"*/*"}};l(p)}catch(s){e(s)}else o[google.picker.Response.ACTION]===google.picker.Action.CANCEL&&l(null)}).build().setVisible(!0)}catch(t){console.error("Google Drive Picker error:",t),e(t)}});function Ts(l,e,t){const n=l.slice();return n[26]=e[t],n}function nf(l){let e;const t=l[15].default,n=Qt(t,l,l[23],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&8388608)&&xt(n,t,o,o[23],e?en(t,o[23],s,null):$t(o[23]),null)},i(o){e||(S(n,o),e=!0)},o(o){N(n,o),e=!1},d(o){n&&n.d(o)}}}function lf(l){let e,t;return e=new Pt({props:{content:l[8].t("More"),$$slots:{default:[nf]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&256&&(s.content=n[8].t("More")),o&8388608&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function Vs(l){let e,t,n,o,s=vt(Object.keys(l[6])),i=[];for(let a=0;a<s.length;a+=1)i[a]=zs(Ts(l,s,a));const r=a=>N(i[a],1,1,()=>{i[a]=null});return{c(){e=V("div");for(let a=0;a<i.length;a+=1)i[a].c();t=ee(),n=V("hr"),this.h()},l(a){e=z(a,"DIV",{class:!0});var c=C(e);for(let u=0;u<i.length;u+=1)i[u].l(c);c.forEach(_),t=te(a),n=z(a,"HR",{class:!0}),this.h()},h(){m(e,"class","max-h-28 overflow-y-auto scrollbar-hidden"),m(n,"class","border-black/5 dark:border-white/5 my-1")},m(a,c){A(a,e,c);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(e,null);A(a,t,c),A(a,n,c),o=!0},p(a,c){if(c&65){s=vt(Object.keys(a[6]));let u;for(u=0;u<s.length;u+=1){const f=Ts(a,s,u);i[u]?(i[u].p(f,c),S(i[u],1)):(i[u]=zs(f),i[u].c(),S(i[u],1),i[u].m(e,null))}for(He(),u=s.length;u<i.length;u+=1)r(u);Be()}},i(a){if(!o){for(let c=0;c<s.length;c+=1)S(i[c]);o=!0}},o(a){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)N(i[c]);o=!1},d(a){a&&(_(e),_(t),_(n)),Mn(i,a)}}}function of(l){let e,t,n,o,s=l[6][l[26]].name+"",i,r;return t=new Fc({}),{c(){e=V("div"),ne(t.$$.fragment),n=ee(),o=V("div"),i=Ie(s),this.h()},l(a){e=z(a,"DIV",{class:!0});var c=C(e);se(t.$$.fragment,c),c.forEach(_),n=te(a),o=z(a,"DIV",{class:!0});var u=C(o);i=Se(u,s),u.forEach(_),this.h()},h(){m(e,"class","flex-shrink-0"),m(o,"class","truncate")},m(a,c){A(a,e,c),le(t,e,null),A(a,n,c),A(a,o,c),E(o,i),r=!0},p(a,c){(!r||c&64)&&s!==(s=a[6][a[26]].name+"")&&Me(i,s)},i(a){r||(S(t.$$.fragment,a),r=!0)},o(a){N(t.$$.fragment,a),r=!1},d(a){a&&(_(e),_(n),_(o)),oe(t)}}}function zs(l){var d;let e,t,n,o,s,i,r,a,c,u;n=new Pt({props:{content:((d=l[6][l[26]])==null?void 0:d.description)??"",placement:"top-start",className:"flex flex-1 gap-2 items-center",$$slots:{default:[of]},$$scope:{ctx:l}}});function f(...p){return l[16](l[26],...p)}i=new Wc({props:{state:l[6][l[26]].enabled}}),i.$on("change",f);function h(){return l[17](l[26])}return{c(){e=V("button"),t=V("div"),ne(n.$$.fragment),o=ee(),s=V("div"),ne(i.$$.fragment),r=ee(),this.h()},l(p){e=z(p,"BUTTON",{class:!0});var b=C(e);t=z(b,"DIV",{class:!0});var w=C(t);se(n.$$.fragment,w),w.forEach(_),o=te(b),s=z(b,"DIV",{class:!0});var g=C(s);se(i.$$.fragment,g),g.forEach(_),r=te(b),b.forEach(_),this.h()},h(){m(t,"class","flex-1 truncate"),m(s,"class","flex-shrink-0"),m(e,"class","flex w-full justify-between gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer rounded-xl")},m(p,b){A(p,e,b),E(e,t),le(n,t,null),E(e,o),E(e,s),le(i,s,null),E(e,r),a=!0,c||(u=ke(e,"click",h),c=!0)},p(p,b){var v;l=p;const w={};b&64&&(w.content=((v=l[6][l[26]])==null?void 0:v.description)??""),b&8388672&&(w.$$scope={dirty:b,ctx:l}),n.$set(w);const g={};b&64&&(g.state=l[6][l[26]].enabled),i.$set(g)},i(p){a||(S(n.$$.fragment,p),S(i.$$.fragment,p),a=!0)},o(p){N(n.$$.fragment,p),N(i.$$.fragment,p),a=!1},d(p){p&&_(e),oe(n),oe(i),c=!1,u()}}}function sf(l){let e,t,n,o=l[8].t("Capture")+"",s,i;return e=new Xa({}),{c(){ne(e.$$.fragment),t=ee(),n=V("div"),s=Ie(o),this.h()},l(r){se(e.$$.fragment,r),t=te(r),n=z(r,"DIV",{class:!0});var a=C(n);s=Se(a,o),a.forEach(_),this.h()},h(){m(n,"class","line-clamp-1")},m(r,a){le(e,r,a),A(r,t,a),A(r,n,a),E(n,s),i=!0},p(r,a){(!i||a&256)&&o!==(o=r[8].t("Capture")+"")&&Me(s,o)},i(r){i||(S(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){r&&(_(t),_(n)),oe(e,r)}}}function rf(l){let e,t;return e=new wn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl "+(l[7]?"":"opacity-50"),$$slots:{default:[sf]},$$scope:{ctx:l}}}),e.$on("click",l[18]),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&128&&(s.class="flex gap-2 items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl "+(n[7]?"":"opacity-50")),o&8388864&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function af(l){let e,t,n,o=l[8].t("Upload Files")+"",s,i;return e=new Ka({}),{c(){ne(e.$$.fragment),t=ee(),n=V("div"),s=Ie(o),this.h()},l(r){se(e.$$.fragment,r),t=te(r),n=z(r,"DIV",{class:!0});var a=C(n);s=Se(a,o),a.forEach(_),this.h()},h(){m(n,"class","line-clamp-1")},m(r,a){le(e,r,a),A(r,t,a),A(r,n,a),E(n,s),i=!0},p(r,a){(!i||a&256)&&o!==(o=r[8].t("Upload Files")+"")&&Me(s,o)},i(r){i||(S(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){r&&(_(t),_(n)),oe(e,r)}}}function cf(l){let e,t;return e=new wn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl "+(l[7]?"":"opacity-50"),$$slots:{default:[af]},$$scope:{ctx:l}}}),e.$on("click",l[19]),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&128&&(s.class="flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl "+(n[7]?"":"opacity-50")),o&8388864&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function Ns(l){let e,t;return e=new wn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[uf]},$$scope:{ctx:l}}}),e.$on("click",l[20]),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&8388864&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function uf(l){let e,t,n,o,s,i,r,a,c,u=l[8].t("Google Drive")+"",f;return{c(){e=Te("svg"),t=Te("path"),n=Te("path"),o=Te("path"),s=Te("path"),i=Te("path"),r=Te("path"),a=ee(),c=V("div"),f=Ie(u),this.h()},l(h){e=Ve(h,"svg",{xmlns:!0,viewBox:!0,class:!0});var d=C(e);t=Ve(d,"path",{d:!0,fill:!0}),C(t).forEach(_),n=Ve(d,"path",{d:!0,fill:!0}),C(n).forEach(_),o=Ve(d,"path",{d:!0,fill:!0}),C(o).forEach(_),s=Ve(d,"path",{d:!0,fill:!0}),C(s).forEach(_),i=Ve(d,"path",{d:!0,fill:!0}),C(i).forEach(_),r=Ve(d,"path",{d:!0,fill:!0}),C(r).forEach(_),d.forEach(_),a=te(h),c=z(h,"DIV",{class:!0});var p=C(c);f=Se(p,u),p.forEach(_),this.h()},h(){m(t,"d","m6.6 66.85 3.85 6.65c.8 1.4 1.95 2.5 3.3 3.3l13.75-23.8h-27.5c0 1.55.4 3.1 1.2 4.5z"),m(t,"fill","#0066da"),m(n,"d","m43.65 25-13.75-23.8c-1.35.8-2.5 1.9-3.3 3.3l-25.4 44a9.06 9.06 0 0 0 -1.2 4.5h27.5z"),m(n,"fill","#00ac47"),m(o,"d","m73.55 76.8c1.35-.8 2.5-1.9 3.3-3.3l1.6-2.75 7.65-13.25c.8-1.4 1.2-2.95 1.2-4.5h-27.502l5.852 11.5z"),m(o,"fill","#ea4335"),m(s,"d","m43.65 25 13.75-23.8c-1.35-.8-2.9-1.2-4.5-1.2h-18.5c-1.6 0-3.15.45-4.5 1.2z"),m(s,"fill","#00832d"),m(i,"d","m59.8 53h-32.3l-13.75 23.8c1.35.8 2.9 1.2 4.5 1.2h50.8c1.6 0 3.15-.45 4.5-1.2z"),m(i,"fill","#2684fc"),m(r,"d","m73.4 26.5-12.7-22c-.8-1.4-1.95-2.5-3.3-3.3l-13.75 23.8 16.15 28h27.45c0-1.55-.4-3.1-1.2-4.5z"),m(r,"fill","#ffba00"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 87.3 78"),m(e,"class","w-5 h-5"),m(c,"class","line-clamp-1")},m(h,d){A(h,e,d),E(e,t),E(e,n),E(e,o),E(e,s),E(e,i),E(e,r),A(h,a,d),A(h,c,d),E(c,f)},p(h,d){d&256&&u!==(u=h[8].t("Google Drive")+"")&&Me(f,u)},d(h){h&&(_(e),_(a),_(c))}}}function ff(l){var f,h;let e=Object.keys(l[6]).length>0,t,n,o,s,i,r,a,c=e&&Vs(l);n=new Pt({props:{content:l[7]?"":l[8].t("You do not have permission to upload files"),className:"w-full",$$slots:{default:[rf]},$$scope:{ctx:l}}}),s=new Pt({props:{content:l[7]?"":l[8].t("You do not have permission to upload files"),className:"w-full",$$slots:{default:[cf]},$$scope:{ctx:l}}});let u=((h=(f=l[9])==null?void 0:f.features)==null?void 0:h.enable_google_drive_integration)&&Ns(l);return{c(){c&&c.c(),t=ee(),ne(n.$$.fragment),o=ee(),ne(s.$$.fragment),i=ee(),u&&u.c(),r=Ae()},l(d){c&&c.l(d),t=te(d),se(n.$$.fragment,d),o=te(d),se(s.$$.fragment,d),i=te(d),u&&u.l(d),r=Ae()},m(d,p){c&&c.m(d,p),A(d,t,p),le(n,d,p),A(d,o,p),le(s,d,p),A(d,i,p),u&&u.m(d,p),A(d,r,p),a=!0},p(d,p){var g,v;p&64&&(e=Object.keys(d[6]).length>0),e?c?(c.p(d,p),p&64&&S(c,1)):(c=Vs(d),c.c(),S(c,1),c.m(t.parentNode,t)):c&&(He(),N(c,1,1,()=>{c=null}),Be());const b={};p&384&&(b.content=d[7]?"":d[8].t("You do not have permission to upload files")),p&8388994&&(b.$$scope={dirty:p,ctx:d}),n.$set(b);const w={};p&384&&(w.content=d[7]?"":d[8].t("You do not have permission to upload files")),p&8388996&&(w.$$scope={dirty:p,ctx:d}),s.$set(w),(v=(g=d[9])==null?void 0:g.features)!=null&&v.enable_google_drive_integration?u?(u.p(d,p),p&512&&S(u,1)):(u=Ns(d),u.c(),S(u,1),u.m(r.parentNode,r)):u&&(He(),N(u,1,1,()=>{u=null}),Be())},i(d){a||(S(c),S(n.$$.fragment,d),S(s.$$.fragment,d),S(u),a=!0)},o(d){N(c),N(n.$$.fragment,d),N(s.$$.fragment,d),N(u),a=!1},d(d){d&&(_(t),_(o),_(i),_(r)),c&&c.d(d),oe(n,d),oe(s,d),u&&u.d(d)}}}function df(l){let e,t,n;return t=new Eo({props:{class:"w-full max-w-[220px] rounded-xl px-1 py-1  border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow",sideOffset:15,alignOffset:-8,side:"top",align:"start",transition:Xl,$$slots:{default:[ff]},$$scope:{ctx:l}}}),{c(){e=V("div"),ne(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{slot:!0});var s=C(e);se(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"slot","content")},m(o,s){A(o,e,s),le(t,e,null),n=!0},p(o,s){const i={};s&8389583&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),oe(t)}}}function hf(l){let e,t,n,o,s,i,r;function a(u){l[21](u)}let c={$$slots:{content:[df],default:[lf]},$$scope:{ctx:l}};return l[5]!==void 0&&(c.show=l[5]),n=new yo({props:c}),We.push(()=>Je(n,"show",a)),n.$on("change",l[22]),{c(){e=V("input"),t=ee(),ne(n.$$.fragment),this.h()},l(u){e=z(u,"INPUT",{id:!0,type:!0,accept:!0,capture:!0,style:!0}),t=te(u),se(n.$$.fragment,u),this.h()},h(){m(e,"id","camera-input"),m(e,"type","file"),m(e,"accept","image/*"),m(e,"capture","environment"),et(e,"display","none")},m(u,f){A(u,e,f),A(u,t,f),le(n,u,f),s=!0,i||(r=ke(e,"change",l[12]),i=!0)},p(u,[f]){const h={};f&8389583&&(h.$$scope={dirty:f,ctx:u}),!o&&f&32&&(o=!0,h.show=u[5],qe(()=>o=!1)),n.$set(h)},i(u){s||(S(n.$$.fragment,u),s=!0)},o(u){N(n.$$.fragment,u),s=!1},d(u){u&&(_(e),_(t)),oe(n,u),i=!1,r()}}}function mf(l,e,t){let n,o,s,i;ae(l,ul,L=>t(24,n=L)),ae(l,xn,L=>t(14,o=L)),ae(l,Yl,L=>t(9,i=L));let{$$slots:r={},$$scope:a}=e;const c=jt("i18n");ae(l,c,L=>t(8,s=L));let{screenCaptureHandler:u}=e,{uploadFilesHandler:f}=e,{inputFilesHandler:h}=e,{uploadGoogleDriveHandler:d}=e,{selectedToolIds:p=[]}=e,{onClose:b}=e,w={},g=!1,v=!0;const k=async()=>{n===null&&await ul.set(await es(localStorage.token)),t(6,w=n.reduce((L,D,Y,P)=>(L[D.id]={name:D.name,description:D.meta.description,enabled:p.includes(D.id)},L),{}))},I=()=>{const L=navigator.userAgent||navigator.vendor||window.opera;return/android|iphone|ipad|ipod|windows phone/i.test(L)};function T(L){var Y;const D=Array.from((Y=L.target)==null?void 0:Y.files);D&&D.length>0&&(console.log(D),h(D))}const M=async(L,D)=>{const Y=D.detail;await $e(),Y?t(0,p=[...p,L]):t(0,p=p.filter(P=>P!==L))},y=L=>{t(6,w[L].enabled=!w[L].enabled,w)},H=()=>{if(v)if(!I())u();else{const L=document.getElementById("camera-input");L&&L.click()}},O=()=>{v&&f()},B=()=>{d()};function j(L){g=L,t(5,g)}const Z=L=>{L.detail===!1&&b()};return l.$$set=L=>{"screenCaptureHandler"in L&&t(1,u=L.screenCaptureHandler),"uploadFilesHandler"in L&&t(2,f=L.uploadFilesHandler),"inputFilesHandler"in L&&t(13,h=L.inputFilesHandler),"uploadGoogleDriveHandler"in L&&t(3,d=L.uploadGoogleDriveHandler),"selectedToolIds"in L&&t(0,p=L.selectedToolIds),"onClose"in L&&t(4,b=L.onClose),"$$scope"in L&&t(23,a=L.$$scope)},l.$$.update=()=>{var L,D;l.$$.dirty&32&&g&&k(),l.$$.dirty&16384&&t(7,v=o.role==="admin"||((D=(L=o==null?void 0:o.permissions)==null?void 0:L.chat)==null?void 0:D.file_upload))},[p,u,f,d,b,g,w,v,s,i,c,I,T,h,o,r,M,y,H,O,B,j,Z,a]}class gf extends Re{constructor(e){super(),Ue(this,e,mf,hf,Fe,{screenCaptureHandler:1,uploadFilesHandler:2,inputFilesHandler:13,uploadGoogleDriveHandler:3,selectedToolIds:0,onClose:4})}}function Ps(l,e,t){const n=l.slice();return n[0]=e[t],n[15]=t,n}function Os(l){let e,t,n,o,s,i,r,a='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg>',c,u,f=l[3].t("Tip: Update multiple variable slots consecutively by pressing the tab key in the chat input after each replacement.")+"",h,d=vt(l[2]),p=[];for(let b=0;b<d.length;b+=1)p[b]=Hs(Ps(l,d,b));return{c(){e=V("div"),t=V("div"),n=V("div"),o=V("div");for(let b=0;b<p.length;b+=1)p[b].c();s=ee(),i=V("div"),r=V("div"),r.innerHTML=a,c=ee(),u=V("div"),h=Ie(f),this.h()},l(b){e=z(b,"DIV",{id:!0,class:!0});var w=C(e);t=z(w,"DIV",{class:!0});var g=C(t);n=z(g,"DIV",{class:!0});var v=C(n);o=z(v,"DIV",{class:!0});var k=C(o);for(let M=0;M<p.length;M+=1)p[M].l(k);k.forEach(_),s=te(v),i=z(v,"DIV",{class:!0});var I=C(i);r=z(I,"DIV",{"data-svelte-h":!0}),ft(r)!=="svelte-cdi12d"&&(r.innerHTML=a),c=te(I),u=z(I,"DIV",{class:!0});var T=C(u);h=Se(T,f),T.forEach(_),I.forEach(_),v.forEach(_),g.forEach(_),w.forEach(_),this.h()},h(){m(o,"class","m-1 overflow-y-auto p-1 space-y-0.5 scrollbar-hidden"),m(u,"class","line-clamp-1"),m(i,"class","px-2 pt-0.5 pb-1 text-xs text-gray-600 dark:text-gray-100 bg-white dark:bg-gray-900 rounded-b-xl flex items-center space-x-1"),m(n,"class","max-h-60 flex flex-col w-full rounded-xl bg-white dark:bg-gray-900 dark:text-gray-100"),m(t,"class","flex w-full rounded-xl border border-gray-50 dark:border-gray-850"),m(e,"id","commands-container"),m(e,"class","px-2 mb-2 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(b,w){A(b,e,w),E(e,t),E(t,n),E(n,o);for(let g=0;g<p.length;g+=1)p[g]&&p[g].m(o,null);E(n,s),E(n,i),E(i,r),E(i,c),E(i,u),E(u,h)},p(b,w){if(w&38){d=vt(b[2]);let g;for(g=0;g<d.length;g+=1){const v=Ps(b,d,g);p[g]?p[g].p(v,w):(p[g]=Hs(v),p[g].c(),p[g].m(o,null))}for(;g<p.length;g+=1)p[g].d(1);p.length=d.length}w&8&&f!==(f=b[3].t("Tip: Update multiple variable slots consecutively by pressing the tab key in the chat input after each replacement.")+"")&&Me(h,f)},d(b){b&&_(e),Mn(p,b)}}}function Hs(l){let e,t,n=l[0].command+"",o,s,i,r=l[0].title+"",a,c,u,f,h;function d(){return l[11](l[0])}function p(){return l[12](l[15])}return{c(){e=V("button"),t=V("div"),o=Ie(n),s=ee(),i=V("div"),a=Ie(r),c=ee(),this.h()},l(b){e=z(b,"BUTTON",{class:!0,type:!0});var w=C(e);t=z(w,"DIV",{class:!0});var g=C(t);o=Se(g,n),g.forEach(_),s=te(w),i=z(w,"DIV",{class:!0});var v=C(i);a=Se(v,r),v.forEach(_),c=te(w),w.forEach(_),this.h()},h(){m(t,"class","font-medium text-black dark:text-gray-100"),m(i,"class","text-xs text-gray-600 dark:text-gray-100"),m(e,"class",u="px-3 py-1.5 rounded-xl w-full text-left "+(l[15]===l[1]?"  bg-gray-50 dark:bg-gray-850 selected-command-option-button":"")),m(e,"type","button")},m(b,w){A(b,e,w),E(e,t),E(t,o),E(e,s),E(e,i),E(i,a),E(e,c),f||(h=[ke(e,"click",d),ke(e,"mousemove",p),ke(e,"focus",pf)],f=!0)},p(b,w){l=b,w&4&&n!==(n=l[0].command+"")&&Me(o,n),w&4&&r!==(r=l[0].title+"")&&Me(a,r),w&2&&u!==(u="px-3 py-1.5 rounded-xl w-full text-left "+(l[15]===l[1]?"  bg-gray-50 dark:bg-gray-850 selected-command-option-button":""))&&m(e,"class",u)},d(b){b&&_(e),f=!1,on(h)}}}function _f(l){let e,t=l[2].length>0&&Os(l);return{c(){t&&t.c(),e=Ae()},l(n){t&&t.l(n),e=Ae()},m(n,o){t&&t.m(n,o),A(n,e,o)},p(n,[o]){n[2].length>0?t?t.p(n,o):(t=Os(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ye,o:ye,d(n){n&&_(e),t&&t.d(n)}}}const pf=()=>{};function bf(l,e,t){let n,o,s;ae(l,xn,g=>t(13,n=g)),ae(l,Yi,g=>t(10,s=g));const i=jt("i18n");ae(l,i,g=>t(3,o=g));let{files:r}=e,{prompt:a=""}=e,{command:c=""}=e,u=0,f=[];const h=()=>{t(1,u=Math.max(0,u-1))},d=()=>{t(1,u=Math.min(u+1,f.length-1))},p=async g=>{let v=g.content;if(g.content.includes("{{CLIPBOARD}}")){const T=await navigator.clipboard.readText().catch(H=>(nt.error(o.t("Failed to read clipboard contents")),"{{CLIPBOARD}}")),M=await navigator.clipboard.read();let y=null;for(const H of M)for(const O of H.types)if(O.startsWith("image/")){const B=await H.getType(O);y=URL.createObjectURL(B)}y&&t(6,r=[...r,{type:"image",url:y}]),v=v.replaceAll("{{CLIPBOARD}}",T)}if(g.content.includes("{{USER_LOCATION}}")){const T=await lc();v=v.replaceAll("{{USER_LOCATION}}",String(T))}if(g.content.includes("{{USER_NAME}}")){console.log(n);const T=n.name||"User";v=v.replaceAll("{{USER_NAME}}",T)}if(g.content.includes("{{USER_LANGUAGE}}")){const T=localStorage.getItem("locale")||"en-US";v=v.replaceAll("{{USER_LANGUAGE}}",T)}if(g.content.includes("{{CURRENT_DATE}}")){const T=oc();v=v.replaceAll("{{CURRENT_DATE}}",T)}if(g.content.includes("{{CURRENT_TIME}}")){const T=sc();v=v.replaceAll("{{CURRENT_TIME}}",T)}if(g.content.includes("{{CURRENT_DATETIME}}")){const T=rc();v=v.replaceAll("{{CURRENT_DATETIME}}",T)}if(g.content.includes("{{CURRENT_TIMEZONE}}")){const T=ic();v=v.replaceAll("{{CURRENT_TIMEZONE}}",T)}if(g.content.includes("{{CURRENT_WEEKDAY}}")){const T=ac();v=v.replaceAll("{{CURRENT_WEEKDAY}}",T)}t(0,a=v);const k=document.getElementById("chat-input-container"),I=document.getElementById("chat-input");await $e(),k&&(k.style.height="",k.style.height=Math.min(k.scrollHeight,200)+"px"),await $e(),I&&(I.focus(),I.dispatchEvent(new Event("input")))},b=g=>{p(g)},w=g=>{t(1,u=g)};return l.$$set=g=>{"files"in g&&t(6,r=g.files),"prompt"in g&&t(0,a=g.prompt),"command"in g&&t(7,c=g.command)},l.$$.update=()=>{l.$$.dirty&1152&&t(2,f=s.filter(g=>g.command.toLowerCase().includes(c.toLowerCase())).sort((g,v)=>g.title.localeCompare(v.title))),l.$$.dirty&128&&c&&t(1,u=0)},[a,u,f,o,i,p,r,c,h,d,s,b,w]}class vf extends Re{constructor(e){super(),Ue(this,e,bf,_f,Fe,{files:6,prompt:0,command:7,selectUp:8,selectDown:9})}get selectUp(){return this.$$.ctx[8]}get selectDown(){return this.$$.ctx[9]}}function Bs(l,e,t){const n=l.slice();return n[19]=e[t],n[21]=t,n}function As(l){let e,t,n,o,s,i,r,a=vt(l[2]),c=[];for(let d=0;d<a.length;d+=1)c[d]=Ls(Bs(l,a,d));function u(d,p){var b,w;if(p&1&&(i=null),p&1&&(r=null),i==null&&(i=!!d[0].split(" ").some(Df)),i)return Sf;if(r==null&&(r=!!((w=(b=d[0].split(" "))==null?void 0:b.at(0))!=null&&w.substring(1).startsWith("http"))),r)return If}let f=u(l,-1),h=f&&f(l);return{c(){e=V("div"),t=V("div"),n=V("div"),o=V("div");for(let d=0;d<c.length;d+=1)c[d].c();s=ee(),h&&h.c(),this.h()},l(d){e=z(d,"DIV",{id:!0,class:!0});var p=C(e);t=z(p,"DIV",{class:!0});var b=C(t);n=z(b,"DIV",{class:!0});var w=C(n);o=z(w,"DIV",{class:!0});var g=C(o);for(let v=0;v<c.length;v+=1)c[v].l(g);s=te(g),h&&h.l(g),g.forEach(_),w.forEach(_),b.forEach(_),p.forEach(_),this.h()},h(){m(o,"class","m-1 overflow-y-auto p-1 rounded-r-xl space-y-0.5 scrollbar-hidden"),m(n,"class","max-h-60 flex flex-col w-full rounded-xl bg-white dark:bg-gray-900 dark:text-gray-100"),m(t,"class","flex w-full rounded-xl border border-gray-50 dark:border-gray-850"),m(e,"id","commands-container"),m(e,"class","px-2 mb-2 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(d,p){A(d,e,p),E(e,t),E(t,n),E(n,o);for(let b=0;b<c.length;b+=1)c[b]&&c[b].m(o,null);E(o,s),h&&h.m(o,null)},p(d,p){if(p&38){a=vt(d[2]);let b;for(b=0;b<a.length;b+=1){const w=Bs(d,a,b);c[b]?c[b].p(w,p):(c[b]=Ls(w),c[b].c(),c[b].m(o,s))}for(;b<c.length;b+=1)c[b].d(1);c.length=a.length}f===(f=u(d,p))&&h?h.p(d,p):(h&&h.d(1),h=f&&f(d),h&&(h.c(),h.m(o,null)))},d(d){d&&_(e),Mn(c,d),h&&h.d()}}}function wf(l){let e,t="Collection";return{c(){e=V("div"),e.textContent=t,this.h()},l(n){e=z(n,"DIV",{class:!0,"data-svelte-h":!0}),ft(e)!=="svelte-2leuop"&&(e.textContent=t),this.h()},h(){m(e,"class","bg-green-500/20 text-green-700 dark:text-green-200 rounded uppercase text-xs font-bold px-1 flex-shrink-0")},m(n,o){A(n,e,o)},d(n){n&&_(e)}}}function kf(l){let e,t="File";return{c(){e=V("div"),e.textContent=t,this.h()},l(n){e=z(n,"DIV",{class:!0,"data-svelte-h":!0}),ft(e)!=="svelte-1hk0ird"&&(e.textContent=t),this.h()},h(){m(e,"class","bg-gray-500/20 text-gray-700 dark:text-gray-200 rounded uppercase text-xs font-bold px-1 flex-shrink-0")},m(n,o){A(n,e,o)},d(n){n&&_(e)}}}function yf(l){let e,t="Document";return{c(){e=V("div"),e.textContent=t,this.h()},l(n){e=z(n,"DIV",{class:!0,"data-svelte-h":!0}),ft(e)!=="svelte-o57xc2"&&(e.textContent=t),this.h()},h(){m(e,"class","bg-gray-500/20 text-gray-700 dark:text-gray-200 rounded uppercase text-xs font-bold px-1 flex-shrink-0")},m(n,o){A(n,e,o)},d(n){n&&_(e)}}}function Ef(l){let e,t="Legacy";return{c(){e=V("div"),e.textContent=t,this.h()},l(n){e=z(n,"DIV",{class:!0,"data-svelte-h":!0}),ft(e)!=="svelte-1dukunw"&&(e.textContent=t),this.h()},h(){m(e,"class","bg-gray-500/20 text-gray-700 dark:text-gray-200 rounded uppercase text-xs font-bold px-1 flex-shrink-0")},m(n,o){A(n,e,o)},d(n){n&&_(e)}}}function Ls(l){var I,T;let e,t,n,o,s,i=((I=l[19])==null?void 0:I.name)+"",r,a,c,u=((T=l[19])==null?void 0:T.description)+"",f,h,d,p;function b(M,y){var H,O,B;return M[19].legacy?Ef:(O=(H=M[19])==null?void 0:H.meta)!=null&&O.document?yf:((B=M[19])==null?void 0:B.type)==="file"?kf:wf}let w=b(l),g=w(l);function v(){return l[13](l[19])}function k(){return l[14](l[21])}return{c(){e=V("button"),t=V("div"),n=V("div"),g.c(),o=ee(),s=V("div"),r=Ie(i),a=ee(),c=V("div"),f=Ie(u),this.h()},l(M){e=z(M,"BUTTON",{class:!0,type:!0});var y=C(e);t=z(y,"DIV",{});var H=C(t);n=z(H,"DIV",{class:!0});var O=C(n);g.l(O),o=te(O),s=z(O,"DIV",{class:!0});var B=C(s);r=Se(B,i),B.forEach(_),O.forEach(_),a=te(H),c=z(H,"DIV",{class:!0});var j=C(c);f=Se(j,u),j.forEach(_),H.forEach(_),y.forEach(_),this.h()},h(){m(s,"class","line-clamp-1"),m(n,"class","font-medium text-black dark:text-gray-100 flex items-center gap-1"),m(c,"class","text-xs text-gray-600 dark:text-gray-100 line-clamp-1"),m(e,"class",h="px-3 py-1.5 rounded-xl w-full text-left flex justify-between items-center "+(l[21]===l[1]?" bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button":"")),m(e,"type","button")},m(M,y){A(M,e,y),E(e,t),E(t,n),g.m(n,null),E(n,o),E(n,s),E(s,r),E(t,a),E(t,c),E(c,f),d||(p=[ke(e,"click",v),ke(e,"mousemove",k)],d=!0)},p(M,y){var H,O;l=M,w!==(w=b(l))&&(g.d(1),g=w(l),g&&(g.c(),g.m(n,o))),y&4&&i!==(i=((H=l[19])==null?void 0:H.name)+"")&&Me(r,i),y&4&&u!==(u=((O=l[19])==null?void 0:O.description)+"")&&Me(f,u),y&2&&h!==(h="px-3 py-1.5 rounded-xl w-full text-left flex justify-between items-center "+(l[21]===l[1]?" bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button":""))&&m(e,"class",h)},d(M){M&&_(e),g.d(),d=!1,on(p)}}}function If(l){var f,h;let e,t,n=((h=(f=l[0].split(" "))==null?void 0:f.at(0))==null?void 0:h.substring(1))+"",o,s,i,r=l[3].t("Web")+"",a,c,u;return{c(){e=V("button"),t=V("div"),o=Ie(n),s=ee(),i=V("div"),a=Ie(r),this.h()},l(d){e=z(d,"BUTTON",{class:!0,type:!0});var p=C(e);t=z(p,"DIV",{class:!0});var b=C(t);o=Se(b,n),b.forEach(_),s=te(p),i=z(p,"DIV",{class:!0});var w=C(i);a=Se(w,r),w.forEach(_),p.forEach(_),this.h()},h(){m(t,"class","font-medium text-black dark:text-gray-100 line-clamp-1"),m(i,"class","text-xs text-gray-600 line-clamp-1"),m(e,"class","px-3 py-1.5 rounded-xl w-full text-left bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button"),m(e,"type","button")},m(d,p){A(d,e,p),E(e,t),E(t,o),E(e,s),E(e,i),E(i,a),c||(u=ke(e,"click",l[16]),c=!0)},p(d,p){var b,w;p&1&&n!==(n=((w=(b=d[0].split(" "))==null?void 0:b.at(0))==null?void 0:w.substring(1))+"")&&Me(o,n),p&8&&r!==(r=d[3].t("Web")+"")&&Me(a,r)},d(d){d&&_(e),c=!1,u()}}}function Sf(l){var f,h;let e,t,n=((h=(f=l[0].split(" "))==null?void 0:f.at(0))==null?void 0:h.substring(1))+"",o,s,i,r=l[3].t("Youtube")+"",a,c,u;return{c(){e=V("button"),t=V("div"),o=Ie(n),s=ee(),i=V("div"),a=Ie(r),this.h()},l(d){e=z(d,"BUTTON",{class:!0,type:!0});var p=C(e);t=z(p,"DIV",{class:!0});var b=C(t);o=Se(b,n),b.forEach(_),s=te(p),i=z(p,"DIV",{class:!0});var w=C(i);a=Se(w,r),w.forEach(_),p.forEach(_),this.h()},h(){m(t,"class","font-medium text-black dark:text-gray-100 line-clamp-1"),m(i,"class","text-xs text-gray-600 line-clamp-1"),m(e,"class","px-3 py-1.5 rounded-xl w-full text-left bg-gray-50 dark:bg-gray-850 dark:text-gray-100 selected-command-option-button"),m(e,"type","button")},m(d,p){A(d,e,p),E(e,t),E(t,o),E(e,s),E(e,i),E(i,a),c||(u=ke(e,"click",l[15]),c=!0)},p(d,p){var b,w;p&1&&n!==(n=((w=(b=d[0].split(" "))==null?void 0:b.at(0))==null?void 0:w.substring(1))+"")&&Me(o,n),p&8&&r!==(r=d[3].t("Youtube")+"")&&Me(a,r)},d(d){d&&_(e),c=!1,u()}}}function Cf(l){var o,s;let e=l[2].length>0||((s=(o=l[0].split(" "))==null?void 0:o.at(0))==null?void 0:s.substring(1).startsWith("http")),t,n=e&&As(l);return{c(){n&&n.c(),t=Ae()},l(i){n&&n.l(i),t=Ae()},m(i,r){n&&n.m(i,r),A(i,t,r)},p(i,[r]){var a,c;r&5&&(e=i[2].length>0||((c=(a=i[0].split(" "))==null?void 0:a.at(0))==null?void 0:c.substring(1).startsWith("http"))),e?n?n.p(i,r):(n=As(i),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:ye,o:ye,d(i){i&&_(t),n&&n.d(i)}}}const Df=l=>l.substring(1).startsWith("https://www.youtube.com")||l.substring(1).startsWith("https://youtu.be");function Mf(l,e,t){let n,o;ae(l,Xi,M=>t(17,n=M)),Zc.extend(Gc);const s=jt("i18n");ae(l,s,M=>t(3,o=M));let{prompt:i=""}=e,{command:r=""}=e;const a=un();let c=0,u=[],f=null,h=[];const d=()=>{t(1,c=Math.max(0,c-1))},p=()=>{t(1,c=Math.min(c+1,h.length-1))},b=async M=>{a("select",M),t(0,i=so(i,r));const y=document.getElementById("chat-input");await $e(),y==null||y.focus(),await $e()},w=async M=>{a("url",M),t(0,i=so(i,r));const y=document.getElementById("chat-input");await $e(),y==null||y.focus(),await $e()},g=async M=>{a("youtube",M),t(0,i=so(i,r));const y=document.getElementById("chat-input");await $e(),y==null||y.focus(),await $e()};kn(()=>{let M=n.filter(B=>{var j;return(j=B==null?void 0:B.meta)==null?void 0:j.document}).map(B=>({...B,type:"file"})),y=M.length>0?[{name:"All Documents",legacy:!0,type:"collection",description:"Deprecated (legacy collection), please create a new knowledge base.",title:o.t("All Documents"),collection_names:M.map(B=>B.id)},...M.reduce((B,j)=>{var Z;return[...new Set([...B,...(((Z=j==null?void 0:j.meta)==null?void 0:Z.tags)??[]).map(L=>L.name)])]},[]).map(B=>({name:B,legacy:!0,type:"collection",description:"Deprecated (legacy collection), please create a new knowledge base.",collection_names:M.filter(j=>{var Z;return(((Z=j==null?void 0:j.meta)==null?void 0:Z.tags)??[]).map(L=>L.name).includes(B)}).map(j=>j.id)}))]:[],H=n.filter(B=>{var j;return!((j=B==null?void 0:B.meta)!=null&&j.document)}).map(B=>({...B,type:"collection"})),O=n.length>0?[...n.reduce((B,j)=>[...new Set([...B,...((j==null?void 0:j.files)??[]).map(Z=>({...Z,collection:{name:j.name,description:j.description}}))])],[]).map(B=>{var j,Z,L;return{...B,name:(j=B==null?void 0:B.meta)==null?void 0:j.name,description:`${(Z=B==null?void 0:B.collection)==null?void 0:Z.name} - ${(L=B==null?void 0:B.collection)==null?void 0:L.description}`,type:"file"}})]:[];t(11,u=[...H,...O,...y,...M].map(B=>{var j,Z;return{...B,...B!=null&&B.legacy||(j=B==null?void 0:B.meta)!=null&&j.legacy||(Z=B==null?void 0:B.meta)!=null&&Z.document?{legacy:!0}:{}}})),t(12,f=new qi(u,{keys:["name","description"]}))});const v=M=>{console.log(M),b(M)},k=M=>{t(1,c=M)},I=()=>{var y,H;const M=(H=(y=i.split(" "))==null?void 0:y.at(0))==null?void 0:H.substring(1);ps(M)?g(M):nt.error(o.t("Oops! Looks like the URL is invalid. Please double-check and try again."))},T=()=>{var y,H;const M=(H=(y=i.split(" "))==null?void 0:y.at(0))==null?void 0:H.substring(1);ps(M)?w(M):nt.error(o.t("Oops! Looks like the URL is invalid. Please double-check and try again."))};return l.$$set=M=>{"prompt"in M&&t(0,i=M.prompt),"command"in M&&t(8,r=M.command)},l.$$.update=()=>{l.$$.dirty&6400&&f&&t(2,h=r.slice(1)?f.search(r).map(M=>M.item):u),l.$$.dirty&256&&r&&t(1,c=0)},[i,c,h,o,s,b,w,g,r,d,p,u,f,v,k,I,T]}class Tf extends Re{constructor(e){super(),Ue(this,e,Mf,Cf,Fe,{prompt:0,command:8,selectUp:9,selectDown:10})}get selectUp(){return this.$$.ctx[9]}get selectDown(){return this.$$.ctx[10]}}function Rs(l,e,t){const n=l.slice();return n[12]=e[t],n[14]=t,n}function Us(l){let e,t,n,o,s=vt(l[1]),i=[];for(let r=0;r<s.length;r+=1)i[r]=Ws(Rs(l,s,r));return{c(){e=V("div"),t=V("div"),n=V("div"),o=V("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=z(r,"DIV",{id:!0,class:!0});var a=C(e);t=z(a,"DIV",{class:!0});var c=C(t);n=z(c,"DIV",{class:!0});var u=C(n);o=z(u,"DIV",{class:!0});var f=C(o);for(let h=0;h<i.length;h+=1)i[h].l(f);f.forEach(_),u.forEach(_),c.forEach(_),a.forEach(_),this.h()},h(){m(o,"class","m-1 overflow-y-auto p-1 rounded-r-lg space-y-0.5 scrollbar-hidden"),m(n,"class","max-h-60 flex flex-col w-full rounded-xl bg-white dark:bg-gray-900 dark:text-gray-100"),m(t,"class","flex w-full rounded-xl border border-gray-50 dark:border-gray-850"),m(e,"id","commands-container"),m(e,"class","px-2 mb-2 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(r,a){A(r,e,a),E(e,t),E(t,n),E(n,o);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(o,null)},p(r,a){if(a&7){s=vt(r[1]);let c;for(c=0;c<s.length;c+=1){const u=Rs(r,s,c);i[c]?i[c].p(u,a):(i[c]=Ws(u),i[c].c(),i[c].m(o,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=s.length}},d(r){r&&_(e),Mn(i,r)}}}function Ws(l){let e,t,n,o,s,i,r=l[12].name+"",a,c,u,f,h;function d(){return l[7](l[12])}function p(){return l[8](l[14])}return{c(){e=V("button"),t=V("div"),n=V("img"),i=ee(),a=Ie(r),c=ee(),this.h()},l(b){e=z(b,"BUTTON",{class:!0,type:!0});var w=C(e);t=z(w,"DIV",{class:!0});var g=C(t);n=z(g,"IMG",{src:!0,alt:!0,class:!0}),i=te(g),a=Se(g,r),g.forEach(_),c=te(w),w.forEach(_),this.h()},h(){var b,w,g,v;Qn(n.src,o=((g=(w=(b=l[12])==null?void 0:b.info)==null?void 0:w.meta)==null?void 0:g.profile_image_url)??"/static/favicon.png")||m(n,"src",o),m(n,"alt",s=((v=l[12])==null?void 0:v.name)??l[12].id),m(n,"class","rounded-full size-6 items-center mr-2"),m(t,"class","flex font-medium text-black dark:text-gray-100 line-clamp-1"),m(e,"class",u="px-3 py-1.5 rounded-xl w-full text-left "+(l[14]===l[0]?"bg-gray-50 dark:bg-gray-850 selected-command-option-button":"")),m(e,"type","button")},m(b,w){A(b,e,w),E(e,t),E(t,n),E(t,i),E(t,a),E(e,c),f||(h=[ke(e,"click",d),ke(e,"mousemove",p),ke(e,"focus",zf)],f=!0)},p(b,w){var g,v,k,I;l=b,w&2&&!Qn(n.src,o=((k=(v=(g=l[12])==null?void 0:g.info)==null?void 0:v.meta)==null?void 0:k.profile_image_url)??"/static/favicon.png")&&m(n,"src",o),w&2&&s!==(s=((I=l[12])==null?void 0:I.name)??l[12].id)&&m(n,"alt",s),w&2&&r!==(r=l[12].name+"")&&Me(a,r),w&1&&u!==(u="px-3 py-1.5 rounded-xl w-full text-left "+(l[14]===l[0]?"bg-gray-50 dark:bg-gray-850 selected-command-option-button":""))&&m(e,"class",u)},d(b){b&&_(e),f=!1,on(h)}}}function Vf(l){let e,t=l[1].length>0&&Us(l);return{c(){t&&t.c(),e=Ae()},l(n){t&&t.l(n),e=Ae()},m(n,o){t&&t.m(n,o),A(n,e,o)},p(n,[o]){n[1].length>0?t?t.p(n,o):(t=Us(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ye,o:ye,d(n){n&&_(e),t&&t.d(n)}}}const zf=()=>{};function Nf(l,e,t){let n;ae(l,dl,p=>t(6,n=p)),jt("i18n");const o=un();let{command:s=""}=e,i=0,r=[],a=new qi(n.filter(p=>{var b,w;return!((w=(b=p==null?void 0:p.info)==null?void 0:b.meta)!=null&&w.hidden)}).map(p=>{var w,g,v,k,I;return{...p,modelName:p==null?void 0:p.name,tags:(v=(g=(w=p==null?void 0:p.info)==null?void 0:w.meta)==null?void 0:g.tags)==null?void 0:v.map(T=>T.name).join(" "),desc:(I=(k=p==null?void 0:p.info)==null?void 0:k.meta)==null?void 0:I.description}}),{keys:["value","tags","modelName"],threshold:.3});const c=()=>{t(0,i=Math.max(0,i-1))},u=()=>{t(0,i=Math.min(i+1,r.length-1))},f=async p=>{t(3,s=""),o("select",p)};kn(async()=>{await $e();const p=document.getElementById("chat-input");await $e(),p==null||p.focus(),await $e()});const h=p=>{f(p)},d=p=>{t(0,i=p)};return l.$$set=p=>{"command"in p&&t(3,s=p.command)},l.$$.update=()=>{l.$$.dirty&72&&t(1,r=s.slice(1)?a.search(s).map(p=>p.item):n.filter(p=>{var b,w;return!((w=(b=p==null?void 0:p.info)==null?void 0:b.meta)!=null&&w.hidden)})),l.$$.dirty&8&&s&&t(0,i=0)},[i,r,f,s,c,u,n,h,d]}class Pf extends Re{constructor(e){super(),Ue(this,e,Nf,Vf,Fe,{command:3,selectUp:4,selectDown:5})}get selectUp(){return this.$$.ctx[4]}get selectDown(){return this.$$.ctx[5]}}function Fs(l){let e,t,n,o;const s=[Hf,Of],i=[];function r(a,c){return a[4]?1:0}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ae()},l(a){t.l(a),n=Ae()},m(a,c){i[e].m(a,c),A(a,n,c),o=!0},p(a,c){let u=e;e=r(a),e===u?i[e].p(a,c):(He(),N(i[u],1,1,()=>{i[u]=null}),Be(),t=i[e],t?t.p(a,c):(t=i[e]=s[e](a),t.c()),S(t,1),t.m(n.parentNode,n))},i(a){o||(S(t),o=!0)},o(a){N(t),o=!1},d(a){a&&_(n),i[e].d(a)}}}function Of(l){let e,t,n,o,s;return o=new Io({}),{c(){e=V("div"),t=V("div"),n=V("div"),ne(o.$$.fragment),this.h()},l(i){e=z(i,"DIV",{id:!0,class:!0});var r=C(e);t=z(r,"DIV",{class:!0});var a=C(t);n=z(a,"DIV",{class:!0});var c=C(n);se(o.$$.fragment,c),c.forEach(_),a.forEach(_),r.forEach(_),this.h()},h(){m(n,"class","max-h-60 flex flex-col w-full rounded-xl bg-white dark:bg-gray-900 dark:text-gray-100"),m(t,"class","flex w-full rounded-xl border border-gray-50 dark:border-gray-850"),m(e,"id","commands-container"),m(e,"class","px-2 mb-2 text-left w-full absolute bottom-0 left-0 right-0 z-10")},m(i,r){A(i,e,r),E(e,t),E(t,n),le(o,n,null),s=!0},p:ye,i(i){s||(S(o.$$.fragment,i),s=!0)},o(i){N(o.$$.fragment,i),s=!1},d(i){i&&_(e),oe(o)}}}function Hf(l){let e,t,n,o,s,i,r;const a=[Lf,Af,Bf],c=[];function u(f,h){var d,p,b;return h&4&&(e=null),h&4&&(t=null),h&4&&(n=null),e==null&&(e=((d=f[2])==null?void 0:d.charAt(0))==="/"),e?0:(t==null&&(t=!!(((p=f[2])==null?void 0:p.charAt(0))==="#"&&f[2].startsWith("#")&&!f[2].includes("# ")||f[2].slice(0,2)==="\\#"&&f[2].startsWith("#")&&!f[2].includes("# "))),t?1:(n==null&&(n=((b=f[2])==null?void 0:b.charAt(0))==="@"),n?2:-1))}return~(o=u(l,-1))&&(s=c[o]=a[o](l)),{c(){s&&s.c(),i=Ae()},l(f){s&&s.l(f),i=Ae()},m(f,h){~o&&c[o].m(f,h),A(f,i,h),r=!0},p(f,h){let d=o;o=u(f,h),o===d?~o&&c[o].p(f,h):(s&&(He(),N(c[d],1,1,()=>{c[d]=null}),Be()),~o?(s=c[o],s?s.p(f,h):(s=c[o]=a[o](f),s.c()),S(s,1),s.m(i.parentNode,i)):s=null)},i(f){r||(S(s),r=!0)},o(f){N(s),r=!1},d(f){f&&_(i),~o&&c[o].d(f)}}}function Bf(l){let e,t,n={command:l[2]};return e=new Pf({props:n}),l[17](e),e.$on("select",l[18]),{c(){ne(e.$$.fragment)},l(o){se(e.$$.fragment,o)},m(o,s){le(e,o,s),t=!0},p(o,s){const i={};s&4&&(i.command=o[2]),e.$set(i)},i(o){t||(S(e.$$.fragment,o),t=!0)},o(o){N(e.$$.fragment,o),t=!1},d(o){l[17](null),oe(e,o)}}}function Af(l){let e,t,n;function o(i){l[13](i)}let s={command:l[2].includes("\\#")?l[2].slice(2):l[2]};return l[0]!==void 0&&(s.prompt=l[0]),e=new Tf({props:s}),l[12](e),We.push(()=>Je(e,"prompt",o)),e.$on("youtube",l[14]),e.$on("url",l[15]),e.$on("select",l[16]),{c(){ne(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,r){le(e,i,r),n=!0},p(i,r){const a={};r&4&&(a.command=i[2].includes("\\#")?i[2].slice(2):i[2]),!t&&r&1&&(t=!0,a.prompt=i[0],qe(()=>t=!1)),e.$set(a)},i(i){n||(S(e.$$.fragment,i),n=!0)},o(i){N(e.$$.fragment,i),n=!1},d(i){l[12](null),oe(e,i)}}}function Lf(l){let e,t,n,o;function s(a){l[10](a)}function i(a){l[11](a)}let r={command:l[2]};return l[0]!==void 0&&(r.prompt=l[0]),l[1]!==void 0&&(r.files=l[1]),e=new vf({props:r}),l[9](e),We.push(()=>Je(e,"prompt",s)),We.push(()=>Je(e,"files",i)),{c(){ne(e.$$.fragment)},l(a){se(e.$$.fragment,a)},m(a,c){le(e,a,c),o=!0},p(a,c){const u={};c&4&&(u.command=a[2]),!t&&c&1&&(t=!0,u.prompt=a[0],qe(()=>t=!1)),!n&&c&2&&(n=!0,u.files=a[1],qe(()=>n=!1)),e.$set(u)},i(a){o||(S(e.$$.fragment,a),o=!0)},o(a){N(e.$$.fragment,a),o=!1},d(a){l[9](null),oe(e,a)}}}function Rf(l){let e,t,n=l[3]&&Fs(l);return{c(){n&&n.c(),e=Ae()},l(o){n&&n.l(o),e=Ae()},m(o,s){n&&n.m(o,s),A(o,e,s),t=!0},p(o,[s]){o[3]?n?(n.p(o,s),s&8&&S(n,1)):(n=Fs(o),n.c(),S(n,1),n.m(e.parentNode,e)):n&&(He(),N(n,1,1,()=>{n=null}),Be())},i(o){t||(S(n),t=!0)},o(o){N(n),t=!1},d(o){o&&_(e),n&&n.d(o)}}}function Uf(l,e,t){const n=un();let{prompt:o=""}=e,{files:s=[]}=e,i=!1,r=null;const a=()=>{r==null||r.selectUp()},c=()=>{r==null||r.selectDown()};let u="",f=!1;const h=async()=>{t(4,i=!0),await Promise.all([(async()=>{Yi.set(await Xc(localStorage.token))})(),(async()=>{Xi.set(await Kc(localStorage.token))})()]),t(4,i=!1)};function d(y){We[y?"unshift":"push"](()=>{r=y,t(5,r)})}function p(y){o=y,t(0,o)}function b(y){s=y,t(1,s)}function w(y){We[y?"unshift":"push"](()=>{r=y,t(5,r)})}function g(y){o=y,t(0,o)}const v=y=>{console.log(y),n("upload",{type:"youtube",data:y.detail})},k=y=>{console.log(y),n("upload",{type:"web",data:y.detail})},I=y=>{console.log(y),!s.find(H=>H.id===y.detail.id)&&(t(1,s=[...s,{...y.detail,status:"processed"}]),n("select"))};function T(y){We[y?"unshift":"push"](()=>{r=y,t(5,r)})}const M=y=>{t(0,o=so(o,u)),n("select",{type:"model",data:y.detail})};return l.$$set=y=>{"prompt"in y&&t(0,o=y.prompt),"files"in y&&t(1,s=y.files)},l.$$.update=()=>{var y,H;l.$$.dirty&1&&t(2,u=((H=(y=o==null?void 0:o.split(`
`).pop())==null?void 0:y.split(" "))==null?void 0:H.pop())??""),l.$$.dirty&4&&t(3,f=["/","#","@"].includes(u==null?void 0:u.charAt(0))||u.slice(0,2)==="\\#"),l.$$.dirty&8&&f&&h()},[o,s,u,f,i,r,n,a,c,d,p,b,w,g,v,k,I,T,M]}class Wf extends Re{constructor(e){super(),Ue(this,e,Uf,Rf,Fe,{prompt:0,files:1,selectUp:7,selectDown:8})}get selectUp(){return this.$$.ctx[7]}get selectDown(){return this.$$.ctx[8]}}function Ff(l){let e,t;return{c(){e=Te("svg"),t=Te("path"),this.h()},l(n){e=Ve(n,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=C(e);t=Ve(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),C(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"fill-rule","evenodd"),m(t,"d","M12 5a7 7 0 0 0-7 7v1.17c.313-.11.65-.17 1-.17h2a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H6a3 3 0 0 1-3-3v-6a9 9 0 0 1 18 0v6a3 3 0 0 1-3 3h-2a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h2c.35 0 .687.06 1 .17V12a7 7 0 0 0-7-7Z"),m(t,"clip-rule","evenodd"),m(e,"aria-hidden","true"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","currentColor"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){A(n,e,o),E(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:ye,o:ye,d(n){n&&_(e)}}}function jf(l,e,t){let{className:n="w-4 h-4"}=e,{strokeWidth:o="0"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class Yf extends Re{constructor(e){super(),Ue(this,e,jf,Ff,Fe,{className:0,strokeWidth:1})}}function Xf(l){let e,t;return{c(){e=Te("svg"),t=Te("path"),this.h()},l(n){e=Ve(n,"svg",{class:!0,"stroke-width":!0,"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0});var o=C(e);t=Ve(o,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"stroke","currentColor"),m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"stroke-width","2"),m(t,"d","m3 16 5-7 6 6.5m6.5 2.5L16 13l-4.286 6M14 10h.01M4 19h16a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1Z"),m(e,"class",l[0]),m(e,"stroke-width",l[1]),m(e,"aria-hidden","true"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24")},m(n,o){A(n,e,o),E(e,t)},p(n,[o]){o&1&&m(e,"class",n[0]),o&2&&m(e,"stroke-width",n[1])},i:ye,o:ye,d(n){n&&_(e)}}}function Kf(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="1.5"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class Zf extends Re{constructor(e){super(),Ue(this,e,Kf,Xf,Fe,{className:0,strokeWidth:1})}}function Gf(l){let e,t;return{c(){e=Te("svg"),t=Te("path"),this.h()},l(n){e=Ve(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=C(e);t=Ve(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","m6.75 7.5 3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0 0 21 18V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v12a2.25 2.25 0 0 0 2.25 2.25Z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){A(n,e,o),E(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:ye,o:ye,d(n){n&&_(e)}}}function qf(l,e,t){let{className:n="w-4 h-4"}=e,{strokeWidth:o="1.5"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class Jf extends Re{constructor(e){super(),Ue(this,e,qf,Gf,Fe,{className:0,strokeWidth:1})}}function js(l,e,t){const n=l.slice();return n[85]=e[t],n[87]=t,n}function Ys(l,e,t){const n=l.slice();return n[88]=e[t],n[90]=t,n}function Xs(l){var F,G;let e,t,n,o,s,i,r,a,c,u,f,h,d,p,b,w,g,v,k,I,T,M,y,H,O=l[6]===!1&&((F=l[12])==null?void 0:F.currentId)&&Ks(l),B=(l[0]!==void 0||l[3].length>0||l[5]||(((G=l[24])==null?void 0:G.webSearch)??!1)==="always"||l[4]||l[7])&&Zs(l);function j(K){l[43](K)}function Z(K){l[44](K)}let L={};l[1]!==void 0&&(L.prompt=l[1]),l[2]!==void 0&&(L.files=l[2]),a=new Wf({props:L}),l[42](a),We.push(()=>Je(a,"prompt",j)),We.push(()=>Je(a,"files",Z)),a.$on("upload",l[45]),a.$on("select",l[46]);const D=[$f,xf],Y=[];function P(K,X){return K[17]?0:1}return v=P(l),k=Y[v]=D[v](l),{c(){e=V("div"),t=V("div"),n=V("div"),o=V("div"),O&&O.c(),s=ee(),i=V("div"),B&&B.c(),r=ee(),ne(a.$$.fragment),h=ee(),d=V("div"),p=V("div"),b=V("div"),w=V("input"),g=ee(),k.c(),this.h()},l(K){e=z(K,"DIV",{class:!0});var X=C(e);t=z(X,"DIV",{class:!0});var Q=C(t);n=z(Q,"DIV",{class:!0});var W=C(n);o=z(W,"DIV",{class:!0});var J=C(o);O&&O.l(J),J.forEach(_),s=te(W),i=z(W,"DIV",{class:!0});var q=C(i);B&&B.l(q),r=te(q),se(a.$$.fragment,q),q.forEach(_),W.forEach(_),Q.forEach(_),h=te(X),d=z(X,"DIV",{class:!0});var ce=C(d);p=z(ce,"DIV",{class:!0});var ge=C(p);b=z(ge,"DIV",{class:!0});var re=C(b);w=z(re,"INPUT",{type:!0}),g=te(re),k.l(re),re.forEach(_),ge.forEach(_),ce.forEach(_),X.forEach(_),this.h()},h(){var K,X;m(o,"class","relative"),m(i,"class","w-full relative"),m(n,"class",f="flex flex-col px-3 "+(((K=l[24])==null?void 0:K.widescreenMode)??null?"max-w-full":"max-w-6xl")+" w-full"),m(t,"class","mx-auto inset-x-0 bg-transparent flex justify-center"),m(w,"type","file"),w.hidden=!0,w.multiple=!0,m(b,"class",""),m(p,"class",I=(((X=l[24])==null?void 0:X.widescreenMode)??null?"max-w-full":"max-w-6xl")+" px-2.5 mx-auto inset-x-0"),m(d,"class",T=l[8]?"bg-transparent":"bg-white dark:bg-gray-900"),m(e,"class","w-full font-primary")},m(K,X){A(K,e,X),E(e,t),E(t,n),E(n,o),O&&O.m(o,null),E(n,s),E(n,i),B&&B.m(i,null),E(i,r),le(a,i,null),E(e,h),E(e,d),E(d,p),E(p,b),E(b,w),l[47](w),E(b,g),Y[v].m(b,null),M=!0,y||(H=[ke(w,"change",l[48]),ke(w,"change",l[49])],y=!0)},p(K,X){var J,q,ce,ge;K[6]===!1&&((J=K[12])!=null&&J.currentId)?O?O.p(K,X):(O=Ks(K),O.c(),O.m(o,null)):O&&(O.d(1),O=null),K[0]!==void 0||K[3].length>0||K[5]||(((q=K[24])==null?void 0:q.webSearch)??!1)==="always"||K[4]||K[7]?B?(B.p(K,X),X[0]&16777401&&S(B,1)):(B=Zs(K),B.c(),S(B,1),B.m(i,r)):B&&(He(),N(B,1,1,()=>{B=null}),Be());const Q={};!c&&X[0]&2&&(c=!0,Q.prompt=K[1],qe(()=>c=!1)),!u&&X[0]&4&&(u=!0,Q.files=K[2],qe(()=>u=!1)),a.$set(Q),(!M||X[0]&16777216&&f!==(f="flex flex-col px-3 "+(((ce=K[24])==null?void 0:ce.widescreenMode)??null?"max-w-full":"max-w-6xl")+" w-full"))&&m(n,"class",f);let W=v;v=P(K),v===W?Y[v].p(K,X):(He(),N(Y[W],1,1,()=>{Y[W]=null}),Be(),k=Y[v],k?k.p(K,X):(k=Y[v]=D[v](K),k.c()),S(k,1),k.m(b,null)),(!M||X[0]&16777216&&I!==(I=(((ge=K[24])==null?void 0:ge.widescreenMode)??null?"max-w-full":"max-w-6xl")+" px-2.5 mx-auto inset-x-0"))&&m(p,"class",I),(!M||X[0]&256&&T!==(T=K[8]?"bg-transparent":"bg-white dark:bg-gray-900"))&&m(d,"class",T)},i(K){M||(S(B),S(a.$$.fragment,K),S(k),M=!0)},o(K){N(B),N(a.$$.fragment,K),N(k),M=!1},d(K){K&&_(e),O&&O.d(),B&&B.d(),l[42](null),oe(a),l[47](null),Y[v].d(),y=!1,on(H)}}}function Ks(l){let e,t,n='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M10 3a.75.75 0 01.75.75v10.638l3.96-4.158a.75.75 0 111.08 1.04l-5.25 5.5a.75.75 0 01-1.08 0l-5.25-5.5a.75.75 0 111.08-1.04l3.96 4.158V3.75A.75.75 0 0110 3z" clip-rule="evenodd"></path></svg>',o,s;return{c(){e=V("div"),t=V("button"),t.innerHTML=n,this.h()},l(i){e=z(i,"DIV",{class:!0});var r=C(e);t=z(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ft(t)!=="svelte-h8r9o0"&&(t.innerHTML=n),r.forEach(_),this.h()},h(){m(t,"class","bg-white border border-gray-100 dark:border-none dark:bg-white/20 p-1.5 rounded-full pointer-events-auto"),m(e,"class","absolute -top-12 left-0 right-0 flex justify-center z-30 pointer-events-none")},m(i,r){A(i,e,r),E(e,t),o||(s=ke(t,"click",l[38]),o=!0)},p:ye,d(i){i&&_(e),o=!1,s()}}}function Zs(l){var h;let e,t,n,o,s,i,r=l[3].length>0&&Gs(l),a=(l[5]||(((h=l[24])==null?void 0:h.webSearch)??!1)==="always")&&Qs(l),c=l[4]&&xs(l),u=l[7]&&$s(l),f=l[0]!==void 0&&er(l);return{c(){e=V("div"),r&&r.c(),t=ee(),a&&a.c(),n=ee(),c&&c.c(),o=ee(),u&&u.c(),s=ee(),f&&f.c(),this.h()},l(d){e=z(d,"DIV",{class:!0});var p=C(e);r&&r.l(p),t=te(p),a&&a.l(p),n=te(p),c&&c.l(p),o=te(p),u&&u.l(p),s=te(p),f&&f.l(p),p.forEach(_),this.h()},h(){m(e,"class","px-3 pb-0.5 pt-1.5 text-left w-full flex flex-col absolute bottom-0 left-0 right-0 bg-gradient-to-t from-white dark:from-gray-900 z-10")},m(d,p){A(d,e,p),r&&r.m(e,null),E(e,t),a&&a.m(e,null),E(e,n),c&&c.m(e,null),E(e,o),u&&u.m(e,null),E(e,s),f&&f.m(e,null),i=!0},p(d,p){var b;d[3].length>0?r?(r.p(d,p),p[0]&8&&S(r,1)):(r=Gs(d),r.c(),S(r,1),r.m(e,t)):r&&(He(),N(r,1,1,()=>{r=null}),Be()),d[5]||(((b=d[24])==null?void 0:b.webSearch)??!1)==="always"?a?a.p(d,p):(a=Qs(d),a.c(),a.m(e,n)):a&&(a.d(1),a=null),d[4]?c?c.p(d,p):(c=xs(d),c.c(),c.m(e,o)):c&&(c.d(1),c=null),d[7]?u?u.p(d,p):(u=$s(d),u.c(),u.m(e,s)):u&&(u.d(1),u=null),d[0]!==void 0?f?(f.p(d,p),p[0]&1&&S(f,1)):(f=er(d),f.c(),S(f,1),f.m(e,null)):f&&(He(),N(f,1,1,()=>{f=null}),Be())},i(d){i||(S(r),S(f),i=!0)},o(d){N(r),N(f),i=!1},d(d){d&&_(e),r&&r.d(),a&&a.d(),c&&c.d(),u&&u.d(),f&&f.d()}}}function Gs(l){let e,t,n,o='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-yellow-500"></span></span>',s,i,r=[],a=new Map,c,u=vt(l[3].map(l[39]));const f=h=>h[90];for(let h=0;h<u.length;h+=1){let d=Ys(l,u,h),p=f(d);a.set(p,r[h]=Js(p,d))}return{c(){e=V("div"),t=V("div"),n=V("div"),n.innerHTML=o,s=ee(),i=V("div");for(let h=0;h<r.length;h+=1)r[h].c();this.h()},l(h){e=z(h,"DIV",{class:!0});var d=C(e);t=z(d,"DIV",{class:!0});var p=C(t);n=z(p,"DIV",{class:!0,"data-svelte-h":!0}),ft(n)!=="svelte-1exsj7u"&&(n.innerHTML=o),s=te(p),i=z(p,"DIV",{class:!0});var b=C(i);for(let w=0;w<r.length;w+=1)r[w].l(b);b.forEach(_),p.forEach(_),d.forEach(_),this.h()},h(){m(n,"class","pl-1"),m(i,"class","text-ellipsis line-clamp-1 flex"),m(t,"class","flex items-center gap-2.5 text-sm dark:text-gray-500"),m(e,"class","flex items-center justify-between w-full")},m(h,d){A(h,e,d),E(e,t),E(t,n),E(t,s),E(t,i);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(i,null);c=!0},p(h,d){d[0]&268435464&&(u=vt(h[3].map(h[39])),He(),r=bo(r,d,f,1,h,u,a,i,vo,Js,null,Ys),Be())},i(h){if(!c){for(let d=0;d<u.length;d+=1)S(r[d]);c=!0}},o(h){for(let d=0;d<r.length;d+=1)N(r[d]);c=!1},d(h){h&&_(e);for(let d=0;d<r.length;d+=1)r[d].d()}}}function Qf(l){let e=l[88].name+"",t;return{c(){t=Ie(e)},l(n){t=Se(n,e)},m(n,o){A(n,t,o)},p(n,o){o[0]&268435464&&e!==(e=n[88].name+"")&&Me(t,e)},d(n){n&&_(t)}}}function qs(l){let e,t=", ";return{c(){e=V("span"),e.textContent=t},l(n){e=z(n,"SPAN",{"data-svelte-h":!0}),ft(e)!=="svelte-1okzske"&&(e.textContent=t)},m(n,o){A(n,e,o)},d(n){n&&_(e)}}}function Js(l,e){var a,c;let t,n,o,s,i;n=new Pt({props:{content:((c=(a=e[88])==null?void 0:a.meta)==null?void 0:c.description)??"",className:" "+(e[90]!==0?"pl-0.5":"")+" flex-shrink-0",placement:"top",$$slots:{default:[Qf]},$$scope:{ctx:e}}});let r=e[90]!==e[3].length-1&&qs();return{key:l,first:null,c(){t=Ae(),ne(n.$$.fragment),o=ee(),r&&r.c(),s=Ae(),this.h()},l(u){t=Ae(),se(n.$$.fragment,u),o=te(u),r&&r.l(u),s=Ae(),this.h()},h(){this.first=t},m(u,f){A(u,t,f),le(n,u,f),A(u,o,f),r&&r.m(u,f),A(u,s,f),i=!0},p(u,f){var d,p;e=u;const h={};f[0]&268435464&&(h.content=((p=(d=e[88])==null?void 0:d.meta)==null?void 0:p.description)??""),f[0]&268435464&&(h.className=" "+(e[90]!==0?"pl-0.5":"")+" flex-shrink-0"),f[0]&268435464|f[2]&536870912&&(h.$$scope={dirty:f,ctx:e}),n.$set(h),e[90]!==e[3].length-1?r||(r=qs(),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},i(u){i||(S(n.$$.fragment,u),i=!0)},o(u){N(n.$$.fragment,u),i=!1},d(u){u&&(_(t),_(o),_(s)),oe(n,u),r&&r.d(u)}}}function Qs(l){let e,t,n,o='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-blue-500"></span></span>',s,i,r=l[25].t("Search the internet")+"",a;return{c(){e=V("div"),t=V("div"),n=V("div"),n.innerHTML=o,s=ee(),i=V("div"),a=Ie(r),this.h()},l(c){e=z(c,"DIV",{class:!0});var u=C(e);t=z(u,"DIV",{class:!0});var f=C(t);n=z(f,"DIV",{class:!0,"data-svelte-h":!0}),ft(n)!=="svelte-19sghfm"&&(n.innerHTML=o),s=te(f),i=z(f,"DIV",{class:!0});var h=C(i);a=Se(h,r),h.forEach(_),f.forEach(_),u.forEach(_),this.h()},h(){m(n,"class","pl-1"),m(i,"class","translate-y-[0.5px]"),m(t,"class","flex items-center gap-2.5 text-sm dark:text-gray-500"),m(e,"class","flex items-center justify-between w-full")},m(c,u){A(c,e,u),E(e,t),E(t,n),E(t,s),E(t,i),E(i,a)},p(c,u){u[0]&33554432&&r!==(r=c[25].t("Search the internet")+"")&&Me(a,r)},d(c){c&&_(e)}}}function xs(l){let e,t,n,o='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-teal-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-teal-500"></span></span>',s,i,r=l[25].t("Generate an image")+"",a;return{c(){e=V("div"),t=V("div"),n=V("div"),n.innerHTML=o,s=ee(),i=V("div"),a=Ie(r),this.h()},l(c){e=z(c,"DIV",{class:!0});var u=C(e);t=z(u,"DIV",{class:!0});var f=C(t);n=z(f,"DIV",{class:!0,"data-svelte-h":!0}),ft(n)!=="svelte-kf1e3u"&&(n.innerHTML=o),s=te(f),i=z(f,"DIV",{class:!0});var h=C(i);a=Se(h,r),h.forEach(_),f.forEach(_),u.forEach(_),this.h()},h(){m(n,"class","pl-1"),m(i,"class","translate-y-[0.5px]"),m(t,"class","flex items-center gap-2.5 text-sm dark:text-gray-500"),m(e,"class","flex items-center justify-between w-full")},m(c,u){A(c,e,u),E(e,t),E(t,n),E(t,s),E(t,i),E(i,a)},p(c,u){u[0]&33554432&&r!==(r=c[25].t("Generate an image")+"")&&Me(a,r)},d(c){c&&_(e)}}}function $s(l){let e,t,n,o='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-green-500"></span></span>',s,i,r=l[25].t("Execute code for analysis")+"",a;return{c(){e=V("div"),t=V("div"),n=V("div"),n.innerHTML=o,s=ee(),i=V("div"),a=Ie(r),this.h()},l(c){e=z(c,"DIV",{class:!0});var u=C(e);t=z(u,"DIV",{class:!0});var f=C(t);n=z(f,"DIV",{class:!0,"data-svelte-h":!0}),ft(n)!=="svelte-12j611w"&&(n.innerHTML=o),s=te(f),i=z(f,"DIV",{class:!0});var h=C(i);a=Se(h,r),h.forEach(_),f.forEach(_),u.forEach(_),this.h()},h(){m(n,"class","pl-1"),m(i,"class","translate-y-[0.5px]"),m(t,"class","flex items-center gap-2.5 text-sm dark:text-gray-500"),m(e,"class","flex items-center justify-between w-full")},m(c,u){A(c,e,u),E(e,t),E(t,n),E(t,s),E(t,i),E(i,a)},p(c,u){u[0]&33554432&&r!==(r=c[25].t("Execute code for analysis")+"")&&Me(a,r)},d(c){c&&_(e)}}}function er(l){let e,t,n,o,s,i,r,a,c=l[0].name+"",u,f,h,d,p,b,w,g;return p=new So({}),{c(){e=V("div"),t=V("div"),n=V("img"),s=ee(),i=V("div"),r=Ie("Talking to "),a=V("span"),u=Ie(c),f=ee(),h=V("div"),d=V("button"),ne(p.$$.fragment),this.h()},l(v){e=z(v,"DIV",{class:!0});var k=C(e);t=z(k,"DIV",{class:!0});var I=C(t);n=z(I,"IMG",{crossorigin:!0,alt:!0,class:!0,src:!0}),s=te(I),i=z(I,"DIV",{class:!0});var T=C(i);r=Se(T,"Talking to "),a=z(T,"SPAN",{class:!0});var M=C(a);u=Se(M,c),M.forEach(_),T.forEach(_),I.forEach(_),f=te(k),h=z(k,"DIV",{});var y=C(h);d=z(y,"BUTTON",{class:!0});var H=C(d);se(p.$$.fragment,H),H.forEach(_),y.forEach(_),k.forEach(_),this.h()},h(){var v,k,I;m(n,"crossorigin","anonymous"),m(n,"alt","model profile"),m(n,"class","size-3.5 max-w-[28px] object-cover rounded-full"),Qn(n.src,o=((I=(k=(v=l[14].find(l[40]))==null?void 0:v.info)==null?void 0:k.meta)==null?void 0:I.profile_image_url)??(l[25].language==="dg-DG"?"/doge.png":`${Hl}/static/favicon.png`))||m(n,"src",o),m(a,"class","font-medium"),m(i,"class","translate-y-[0.5px]"),m(t,"class","pl-[1px] flex items-center gap-2 text-sm dark:text-gray-500"),m(d,"class","flex items-center dark:text-gray-500"),m(e,"class","flex items-center justify-between w-full")},m(v,k){A(v,e,k),E(e,t),E(t,n),E(t,s),E(t,i),E(i,r),E(i,a),E(a,u),E(e,f),E(e,h),E(h,d),le(p,d,null),b=!0,w||(g=ke(d,"click",l[41]),w=!0)},p(v,k){var I,T,M;(!b||k[0]&33570817&&!Qn(n.src,o=((M=(T=(I=v[14].find(v[40]))==null?void 0:I.info)==null?void 0:T.meta)==null?void 0:M.profile_image_url)??(v[25].language==="dg-DG"?"/doge.png":`${Hl}/static/favicon.png`)))&&m(n,"src",o),(!b||k[0]&1)&&c!==(c=v[0].name+"")&&Me(u,c)},i(v){b||(S(p.$$.fragment,v),b=!0)},o(v){N(p.$$.fragment,v),b=!1},d(v){v&&_(e),oe(p),w=!1,g()}}}function xf(l){var G,K;let e,t,n,o,s,i,r,a,c,u,f,h,d,p,b,w,g,v,k,I,T,M,y=l[2].length>0&&tr(l);const H=[od,ld],O=[];function B(X,Q){var W;return((W=X[24])==null?void 0:W.richTextInput)??!0?0:1}s=B(l),i=O[s]=H[s](l);function j(X){l[72](X)}let Z={screenCaptureHandler:l[34],inputFilesHandler:l[36],uploadFilesHandler:l[69],uploadGoogleDriveHandler:l[70],onClose:l[71],$$slots:{default:[sd]},$$scope:{ctx:l}};l[3]!==void 0&&(Z.selectedToolIds=l[3]),u=new gf({props:Z}),We.push(()=>Je(u,"selectedToolIds",j));let L=l[27]&&or(l),D=(!((G=l[12])!=null&&G.currentId)||((K=l[12].messages[l[12].currentId])==null?void 0:K.done)==!0)&&ar(l);const Y=[fd,ud],P=[];function F(X,Q){var W;return!X[12].currentId||((W=X[12].messages[X[12].currentId])==null?void 0:W.done)==!0?0:1}return g=F(l),v=P[g]=Y[g](l),{c(){e=V("form"),t=V("div"),y&&y.c(),n=ee(),o=V("div"),i.c(),r=ee(),a=V("div"),c=V("div"),ne(u.$$.fragment),h=ee(),d=V("div"),L&&L.c(),p=ee(),b=V("div"),D&&D.c(),w=ee(),v.c(),this.h()},l(X){e=z(X,"FORM",{class:!0});var Q=C(e);t=z(Q,"DIV",{class:!0,dir:!0});var W=C(t);y&&y.l(W),n=te(W),o=z(W,"DIV",{class:!0});var J=C(o);i.l(J),J.forEach(_),r=te(W),a=z(W,"DIV",{class:!0});var q=C(a);c=z(q,"DIV",{class:!0});var ce=C(c);se(u.$$.fragment,ce),h=te(ce),d=z(ce,"DIV",{class:!0});var ge=C(d);L&&L.l(ge),ge.forEach(_),ce.forEach(_),p=te(q),b=z(q,"DIV",{class:!0});var re=C(b);D&&D.l(re),w=te(re),v.l(re),re.forEach(_),q.forEach(_),W.forEach(_),Q.forEach(_),this.h()},h(){var X;m(o,"class","px-2.5"),m(d,"class","flex gap-0.5 items-center overflow-x-auto scrollbar-none flex-1"),m(c,"class","ml-1 self-end gap-0.5 flex items-center flex-1 max-w-[80%]"),m(b,"class","self-end flex space-x-1 mr-1 flex-shrink-0"),m(a,"class","flex justify-between mt-1.5 mb-2.5 mx-0.5 max-w-full"),m(t,"class","flex-1 flex flex-col relative w-full rounded-3xl px-1 bg-gray-600/5 dark:bg-gray-400/5 dark:text-gray-100"),m(t,"dir",k=((X=l[24])==null?void 0:X.chatDirection)??"LTR"),m(e,"class","w-full flex gap-1.5")},m(X,Q){A(X,e,Q),E(e,t),y&&y.m(t,null),E(t,n),E(t,o),O[s].m(o,null),E(t,r),E(t,a),E(a,c),le(u,c,null),E(c,h),E(c,d),L&&L.m(d,null),E(a,p),E(a,b),D&&D.m(b,null),E(b,w),P[g].m(b,null),I=!0,T||(M=ke(e,"submit",jl(l[79])),T=!0)},p(X,Q){var ce,ge,re;X[2].length>0?y?(y.p(X,Q),Q[0]&4&&S(y,1)):(y=tr(X),y.c(),S(y,1),y.m(t,n)):y&&(He(),N(y,1,1,()=>{y=null}),Be());let W=s;s=B(X),s===W?O[s].p(X,Q):(He(),N(O[W],1,1,()=>{O[W]=null}),Be(),i=O[s],i?i.p(X,Q):(i=O[s]=H[s](X),i.c()),S(i,1),i.m(o,null));const J={};Q[0]&524288&&(J.uploadFilesHandler=X[69]),Q[0]&33554432&&(J.uploadGoogleDriveHandler=X[70]),Q[2]&536870912&&(J.$$scope={dirty:Q,ctx:X}),!f&&Q[0]&8&&(f=!0,J.selectedToolIds=X[3],qe(()=>f=!1)),u.$set(J),X[27]?L?(L.p(X,Q),Q[0]&134217728&&S(L,1)):(L=or(X),L.c(),S(L,1),L.m(d,null)):L&&(He(),N(L,1,1,()=>{L=null}),Be()),!((ce=X[12])!=null&&ce.currentId)||((ge=X[12].messages[X[12].currentId])==null?void 0:ge.done)==!0?D?(D.p(X,Q),Q[0]&4096&&S(D,1)):(D=ar(X),D.c(),S(D,1),D.m(b,w)):D&&(He(),N(D,1,1,()=>{D=null}),Be());let q=g;g=F(X),g===q?P[g].p(X,Q):(He(),N(P[q],1,1,()=>{P[q]=null}),Be(),v=P[g],v?v.p(X,Q):(v=P[g]=Y[g](X),v.c()),S(v,1),v.m(b,null)),(!I||Q[0]&16777216&&k!==(k=((re=X[24])==null?void 0:re.chatDirection)??"LTR"))&&m(t,"dir",k)},i(X){I||(S(y),S(i),S(u.$$.fragment,X),S(L),S(D),S(v),I=!0)},o(X){N(y),N(i),N(u.$$.fragment,X),N(L),N(D),N(v),I=!1},d(X){X&&_(e),y&&y.d(),O[s].d(),oe(u),L&&L.d(),D&&D.d(),P[g].d(),T=!1,M()}}}function $f(l){let e,t,n;function o(i){l[50](i)}let s={};return l[17]!==void 0&&(s.recording=l[17]),e=new jc({props:s}),We.push(()=>Je(e,"recording",o)),e.$on("cancel",l[51]),e.$on("confirm",l[52]),{c(){ne(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,r){le(e,i,r),n=!0},p(i,r){const a={};!t&&r[0]&131072&&(t=!0,a.recording=i[17],qe(()=>t=!1)),e.$set(a)},i(i){n||(S(e.$$.fragment,i),n=!0)},o(i){N(e.$$.fragment,i),n=!1},d(i){oe(e,i)}}}function tr(l){let e,t,n=vt(l[2]),o=[];for(let i=0;i<n.length;i+=1)o[i]=lr(js(l,n,i));const s=i=>N(o[i],1,1,()=>{o[i]=null});return{c(){e=V("div");for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){e=z(i,"DIV",{class:!0});var r=C(e);for(let a=0;a<o.length;a+=1)o[a].l(r);r.forEach(_),this.h()},h(){m(e,"class","mx-2 mt-2.5 -mb-1 flex items-center flex-wrap gap-2")},m(i,r){A(i,e,r);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);t=!0},p(i,r){if(r[0]&41945093){n=vt(i[2]);let a;for(a=0;a<n.length;a+=1){const c=js(i,n,a);o[a]?(o[a].p(c,r),S(o[a],1)):(o[a]=lr(c),o[a].c(),S(o[a],1),o[a].m(e,null))}for(He(),a=n.length;a<o.length;a+=1)s(a);Be()}},i(i){if(!t){for(let r=0;r<n.length;r+=1)S(o[r]);t=!0}},o(i){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)N(o[r]);t=!1},d(i){i&&_(e),Mn(o,i)}}}function ed(l){var s;let e,t;function n(){return l[55](l[85],l[87])}function o(){return l[56](l[85])}return e=new Ji({props:{item:l[85],name:l[85].name,type:l[85].type,size:(s=l[85])==null?void 0:s.size,loading:l[85].status==="uploading",dismissible:!0,edit:!0}}),e.$on("dismiss",n),e.$on("click",o),{c(){ne(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,r){le(e,i,r),t=!0},p(i,r){var c;l=i;const a={};r[0]&4&&(a.item=l[85]),r[0]&4&&(a.name=l[85].name),r[0]&4&&(a.type=l[85].type),r[0]&4&&(a.size=(c=l[85])==null?void 0:c.size),r[0]&4&&(a.loading=l[85].status==="uploading"),e.$set(a)},i(i){t||(S(e.$$.fragment,i),t=!0)},o(i){N(e.$$.fragment,i),t=!1},d(i){oe(e,i)}}}function td(l){let e,t,n,o,s,i,r,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',c,u,f,h;n=new qc({props:{src:l[85].url,alt:"input",imageClassName:" size-14 rounded-xl object-cover"}});let d=(l[0]?l[23].length===0:l[11].length!==l[23].length)&&nr(l);function p(){return l[54](l[87])}return{c(){e=V("div"),t=V("div"),ne(n.$$.fragment),o=ee(),d&&d.c(),s=ee(),i=V("div"),r=V("button"),r.innerHTML=a,c=ee(),this.h()},l(b){e=z(b,"DIV",{class:!0});var w=C(e);t=z(w,"DIV",{class:!0});var g=C(t);se(n.$$.fragment,g),o=te(g),d&&d.l(g),g.forEach(_),s=te(w),i=z(w,"DIV",{class:!0});var v=C(i);r=z(v,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ft(r)!=="svelte-4ewxlv"&&(r.innerHTML=a),v.forEach(_),c=te(w),w.forEach(_),this.h()},h(){m(t,"class","relative flex items-center"),m(r,"class","bg-white text-black border border-white rounded-full group-hover:visible invisible transition"),m(r,"type","button"),m(i,"class","absolute -top-1 -right-1"),m(e,"class","relative group")},m(b,w){A(b,e,w),E(e,t),le(n,t,null),E(t,o),d&&d.m(t,null),E(e,s),E(e,i),E(i,r),E(e,c),u=!0,f||(h=ke(r,"click",p),f=!0)},p(b,w){l=b;const g={};w[0]&4&&(g.src=l[85].url),n.$set(g),(l[0]?l[23].length===0:l[11].length!==l[23].length)?d?(d.p(l,w),w[0]&8390657&&S(d,1)):(d=nr(l),d.c(),S(d,1),d.m(t,null)):d&&(He(),N(d,1,1,()=>{d=null}),Be())},i(b){u||(S(n.$$.fragment,b),S(d),u=!0)},o(b){N(n.$$.fragment,b),N(d),u=!1},d(b){b&&_(e),oe(n),d&&d.d(),f=!1,h()}}}function nr(l){let e,t;return e=new Pt({props:{className:" absolute top-1 left-1",content:l[25].t("{{ models }}",{models:[...l[0]?[l[0]]:l[11]].filter(l[53]).join(", ")}),$$slots:{default:[nd]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o[0]&41945089&&(s.content=n[25].t("{{ models }}",{models:[...n[0]?[n[0]]:n[11]].filter(n[53]).join(", ")})),o[2]&536870912&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function nd(l){let e,t;return{c(){e=Te("svg"),t=Te("path"),this.h()},l(n){e=Ve(n,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var o=C(e);t=Ve(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),C(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"fill-rule","evenodd"),m(t,"d","M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"),m(t,"clip-rule","evenodd"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"fill","currentColor"),m(e,"class","size-4 fill-yellow-300")},m(n,o){A(n,e,o),E(e,t)},p:ye,d(n){n&&_(e)}}}function lr(l){let e,t,n,o;const s=[td,ed],i=[];function r(a,c){return a[85].type==="image"?0:1}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ae()},l(a){t.l(a),n=Ae()},m(a,c){i[e].m(a,c),A(a,n,c),o=!0},p(a,c){let u=e;e=r(a),e===u?i[e].p(a,c):(He(),N(i[u],1,1,()=>{i[u]=null}),Be(),t=i[e],t?t.p(a,c):(t=i[e]=s[e](a),t.c()),S(t,1),t.m(n.parentNode,n))},i(a){o||(S(t),o=!0)},o(a){N(t),o=!1},d(a){a&&_(n),i[e].d(a)}}}function ld(l){let e,t,n,o;return{c(){e=V("textarea"),this.h()},l(s){e=z(s,"TEXTAREA",{id:!0,class:!0,placeholder:!0,rows:!0}),C(e).forEach(_),this.h()},h(){m(e,"id","chat-input"),m(e,"class","scrollbar-hidden bg-transparent dark:text-gray-100 outline-none w-full pt-3 px-1 resize-none"),m(e,"placeholder",t=l[13]?l[13]:l[25].t("Send a Message")),m(e,"rows","1")},m(s,i){A(s,e,i),l[62](e),Dn(e,l[1]),n||(o=[ke(e,"input",l[63]),ke(e,"keypress",l[64]),ke(e,"keydown",l[65]),ke(e,"input",l[66]),ke(e,"focus",l[67]),ke(e,"paste",l[68])],n=!0)},p(s,i){i[0]&33562624&&t!==(t=s[13]?s[13]:s[25].t("Send a Message"))&&m(e,"placeholder",t),i[0]&2&&Dn(e,s[1])},i:ye,o:ye,d(s){s&&_(e),l[62](null),n=!1,on(o)}}}function od(l){var r,a;let e,t,n,o;function s(c){l[59](c)}let i={id:"chat-input",messageInput:!0,shiftEnter:!l[29]||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),placeholder:l[13]?l[13]:l[25].t("Send a Message"),largeTextAsFile:((r=l[24])==null?void 0:r.largeTextAsFile)??!1,autocomplete:(a=l[26])==null?void 0:a.features.enable_autocomplete_generation,generateAutoCompletion:l[57]};return l[1]!==void 0&&(i.value=l[1]),t=new Yc({props:i}),l[58](t),We.push(()=>Je(t,"value",s)),t.$on("keydown",l[60]),t.$on("paste",l[61]),{c(){e=V("div"),ne(t.$$.fragment),this.h()},l(c){e=z(c,"DIV",{class:!0});var u=C(e);se(t.$$.fragment,u),u.forEach(_),this.h()},h(){m(e,"class","scrollbar-hidden text-left bg-transparent dark:text-gray-100 outline-none w-full pt-3 px-1 resize-none h-fit max-h-80 overflow-auto")},m(c,u){A(c,e,u),le(t,e,null),o=!0},p(c,u){var h,d;const f={};u[0]&536870912&&(f.shiftEnter=!c[29]||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)),u[0]&33562624&&(f.placeholder=c[13]?c[13]:c[25].t("Send a Message")),u[0]&16777216&&(f.largeTextAsFile=((h=c[24])==null?void 0:h.largeTextAsFile)??!1),u[0]&67108864&&(f.autocomplete=(d=c[26])==null?void 0:d.features.enable_autocomplete_generation),u[0]&33591296&&(f.generateAutoCompletion=c[57]),!n&&u[0]&2&&(n=!0,f.value=c[1],qe(()=>n=!1)),t.$set(f)},i(c){o||(S(t.$$.fragment,c),o=!0)},o(c){N(t.$$.fragment,c),o=!1},d(c){c&&_(e),l[58](null),oe(t)}}}function sd(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path d="M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z"></path></svg>';return{c(){e=V("button"),e.innerHTML=t,this.h()},l(n){e=z(n,"BUTTON",{class:!0,type:!0,"aria-label":!0,"data-svelte-h":!0}),ft(e)!=="svelte-m9exdk"&&(e.innerHTML=t),this.h()},h(){m(e,"class","bg-transparent hover:bg-gray-100 text-gray-800 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-1.5 outline-none focus:outline-none"),m(e,"type","button"),m(e,"aria-label","More")},m(n,o){A(n,e,o)},p:ye,d(n){n&&_(e)}}}function or(l){var a,c,u,f,h,d,p,b,w,g,v,k,I,T,M;let e,t,n,o,s=((c=(a=l[26])==null?void 0:a.features)==null?void 0:c.enable_web_search)&&(l[27].role==="admin"||((h=(f=(u=l[27])==null?void 0:u.permissions)==null?void 0:f.features)==null?void 0:h.web_search))&&sr(l),i=((p=(d=l[26])==null?void 0:d.features)==null?void 0:p.enable_image_generation)&&(l[27].role==="admin"||((g=(w=(b=l[27])==null?void 0:b.permissions)==null?void 0:w.features)==null?void 0:g.image_generation))&&rr(l),r=((k=(v=l[26])==null?void 0:v.features)==null?void 0:k.enable_code_interpreter)&&(l[27].role==="admin"||((M=(T=(I=l[27])==null?void 0:I.permissions)==null?void 0:T.features)==null?void 0:M.code_interpreter))&&ir(l);return{c(){s&&s.c(),e=ee(),i&&i.c(),t=ee(),r&&r.c(),n=Ae()},l(y){s&&s.l(y),e=te(y),i&&i.l(y),t=te(y),r&&r.l(y),n=Ae()},m(y,H){s&&s.m(y,H),A(y,e,H),i&&i.m(y,H),A(y,t,H),r&&r.m(y,H),A(y,n,H),o=!0},p(y,H){var O,B,j,Z,L,D,Y,P,F,G,K,X,Q,W,J;(B=(O=y[26])==null?void 0:O.features)!=null&&B.enable_web_search&&(y[27].role==="admin"||(L=(Z=(j=y[27])==null?void 0:j.permissions)==null?void 0:Z.features)!=null&&L.web_search)?s?(s.p(y,H),H[0]&201326592&&S(s,1)):(s=sr(y),s.c(),S(s,1),s.m(e.parentNode,e)):s&&(He(),N(s,1,1,()=>{s=null}),Be()),(Y=(D=y[26])==null?void 0:D.features)!=null&&Y.enable_image_generation&&(y[27].role==="admin"||(G=(F=(P=y[27])==null?void 0:P.permissions)==null?void 0:F.features)!=null&&G.image_generation)?i?(i.p(y,H),H[0]&201326592&&S(i,1)):(i=rr(y),i.c(),S(i,1),i.m(t.parentNode,t)):i&&(He(),N(i,1,1,()=>{i=null}),Be()),(X=(K=y[26])==null?void 0:K.features)!=null&&X.enable_code_interpreter&&(y[27].role==="admin"||(J=(W=(Q=y[27])==null?void 0:Q.permissions)==null?void 0:W.features)!=null&&J.code_interpreter)?r?(r.p(y,H),H[0]&201326592&&S(r,1)):(r=ir(y),r.c(),S(r,1),r.m(n.parentNode,n)):r&&(He(),N(r,1,1,()=>{r=null}),Be())},i(y){o||(S(s),S(i),S(r),o=!0)},o(y){N(s),N(i),N(r),o=!1},d(y){y&&(_(e),_(t),_(n)),s&&s.d(y),i&&i.d(y),r&&r.d(y)}}}function sr(l){let e,t;return e=new Pt({props:{content:l[25].t("Search the internet"),placement:"top",$$slots:{default:[rd]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o[0]&33554432&&(s.content=n[25].t("Search the internet")),o[0]&50331680|o[2]&536870912&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function rd(l){let e,t,n,o,s=l[25].t("Web Search")+"",i,r,a,c,u;return t=new $c({props:{className:"size-5",strokeWidth:"1.75"}}),{c(){e=V("button"),ne(t.$$.fragment),n=ee(),o=V("span"),i=Ie(s),this.h()},l(f){e=z(f,"BUTTON",{type:!0,class:!0});var h=C(e);se(t.$$.fragment,h),n=te(h),o=z(h,"SPAN",{class:!0});var d=C(o);i=Se(d,s),d.forEach(_),h.forEach(_),this.h()},h(){var f;m(o,"class","hidden @sm:block whitespace-nowrap overflow-hidden text-ellipsis translate-y-[0.5px] mr-0.5"),m(e,"type","button"),m(e,"class",r="px-1.5 @sm:px-2.5 py-1.5 flex gap-1.5 items-center text-sm rounded-full font-medium transition-colors duration-300 focus:outline-none max-w-full overflow-hidden "+(l[5]||(((f=l[24])==null?void 0:f.webSearch)??!1)==="always"?"bg-blue-100 dark:bg-blue-500/20 text-blue-500 dark:text-blue-400":"bg-transparent text-gray-600 dark:text-gray-400 border-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800"))},m(f,h){A(f,e,h),le(t,e,null),E(e,n),E(e,o),E(o,i),a=!0,c||(u=ke(e,"click",jl(l[73])),c=!0)},p(f,h){var d;(!a||h[0]&33554432)&&s!==(s=f[25].t("Web Search")+"")&&Me(i,s),(!a||h[0]&16777248&&r!==(r="px-1.5 @sm:px-2.5 py-1.5 flex gap-1.5 items-center text-sm rounded-full font-medium transition-colors duration-300 focus:outline-none max-w-full overflow-hidden "+(f[5]||(((d=f[24])==null?void 0:d.webSearch)??!1)==="always"?"bg-blue-100 dark:bg-blue-500/20 text-blue-500 dark:text-blue-400":"bg-transparent text-gray-600 dark:text-gray-400 border-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800")))&&m(e,"class",r)},i(f){a||(S(t.$$.fragment,f),a=!0)},o(f){N(t.$$.fragment,f),a=!1},d(f){f&&_(e),oe(t),c=!1,u()}}}function rr(l){let e,t;return e=new Pt({props:{content:l[25].t("Generate an image"),placement:"top",$$slots:{default:[id]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o[0]&33554432&&(s.content=n[25].t("Generate an image")),o[0]&33554448|o[2]&536870912&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function id(l){let e,t,n,o,s=l[25].t("Image")+"",i,r,a,c,u;return t=new Zf({props:{className:"size-5",strokeWidth:"1.75"}}),{c(){e=V("button"),ne(t.$$.fragment),n=ee(),o=V("span"),i=Ie(s),this.h()},l(f){e=z(f,"BUTTON",{type:!0,class:!0});var h=C(e);se(t.$$.fragment,h),n=te(h),o=z(h,"SPAN",{class:!0});var d=C(o);i=Se(d,s),d.forEach(_),h.forEach(_),this.h()},h(){m(o,"class","hidden @sm:block whitespace-nowrap overflow-hidden text-ellipsis translate-y-[0.5px] mr-0.5"),m(e,"type","button"),m(e,"class",r="px-1.5 @sm:px-2.5 py-1.5 flex gap-1.5 items-center text-sm rounded-full font-medium transition-colors duration-300 focus:outline-none max-w-full overflow-hidden "+(l[4]?"bg-gray-100 dark:bg-gray-500/20 text-gray-600 dark:text-gray-400":"bg-transparent text-gray-600 dark:text-gray-300 border-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 "))},m(f,h){A(f,e,h),le(t,e,null),E(e,n),E(e,o),E(o,i),a=!0,c||(u=ke(e,"click",jl(l[74])),c=!0)},p(f,h){(!a||h[0]&33554432)&&s!==(s=f[25].t("Image")+"")&&Me(i,s),(!a||h[0]&16&&r!==(r="px-1.5 @sm:px-2.5 py-1.5 flex gap-1.5 items-center text-sm rounded-full font-medium transition-colors duration-300 focus:outline-none max-w-full overflow-hidden "+(f[4]?"bg-gray-100 dark:bg-gray-500/20 text-gray-600 dark:text-gray-400":"bg-transparent text-gray-600 dark:text-gray-300 border-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 ")))&&m(e,"class",r)},i(f){a||(S(t.$$.fragment,f),a=!0)},o(f){N(t.$$.fragment,f),a=!1},d(f){f&&_(e),oe(t),c=!1,u()}}}function ir(l){let e,t;return e=new Pt({props:{content:l[25].t("Execute code for analysis"),placement:"top",$$slots:{default:[ad]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o[0]&33554432&&(s.content=n[25].t("Execute code for analysis")),o[0]&33554560|o[2]&536870912&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function ad(l){let e,t,n,o,s=l[25].t("Code Interpreter")+"",i,r,a,c,u;return t=new Jf({props:{className:"size-5",strokeWidth:"1.75"}}),{c(){e=V("button"),ne(t.$$.fragment),n=ee(),o=V("span"),i=Ie(s),this.h()},l(f){e=z(f,"BUTTON",{type:!0,class:!0});var h=C(e);se(t.$$.fragment,h),n=te(h),o=z(h,"SPAN",{class:!0});var d=C(o);i=Se(d,s),d.forEach(_),h.forEach(_),this.h()},h(){m(o,"class","hidden @sm:block whitespace-nowrap overflow-hidden text-ellipsis translate-y-[0.5px] mr-0.5"),m(e,"type","button"),m(e,"class",r="px-1.5 @sm:px-2.5 py-1.5 flex gap-1.5 items-center text-sm rounded-full font-medium transition-colors duration-300 focus:outline-none max-w-full overflow-hidden "+(l[7]?"bg-gray-100 dark:bg-gray-500/20 text-gray-600 dark:text-gray-400":"bg-transparent text-gray-600 dark:text-gray-300 border-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 "))},m(f,h){A(f,e,h),le(t,e,null),E(e,n),E(e,o),E(o,i),a=!0,c||(u=ke(e,"click",jl(l[75])),c=!0)},p(f,h){(!a||h[0]&33554432)&&s!==(s=f[25].t("Code Interpreter")+"")&&Me(i,s),(!a||h[0]&128&&r!==(r="px-1.5 @sm:px-2.5 py-1.5 flex gap-1.5 items-center text-sm rounded-full font-medium transition-colors duration-300 focus:outline-none max-w-full overflow-hidden "+(f[7]?"bg-gray-100 dark:bg-gray-500/20 text-gray-600 dark:text-gray-400":"bg-transparent text-gray-600 dark:text-gray-300 border-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 ")))&&m(e,"class",r)},i(f){a||(S(t.$$.fragment,f),a=!0)},o(f){N(t.$$.fragment,f),a=!1},d(f){f&&_(e),oe(t),c=!1,u()}}}function ar(l){let e,t;return e=new Pt({props:{content:l[25].t("Record voice"),$$slots:{default:[cd]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o[0]&33554432&&(s.content=n[25].t("Record voice")),o[0]&33685504|o[2]&536870912&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function cd(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 translate-y-[0.5px]"><path d="M7 4a3 3 0 016 0v6a3 3 0 11-6 0V4z"></path><path d="M5.5 9.643a.75.75 0 00-1.5 0V10c0 3.06 2.29 5.585 5.25 5.954V17.5h-1.5a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-1.5v-1.546A6.001 6.001 0 0016 10v-.357a.75.75 0 00-1.5 0V10a4.5 4.5 0 01-9 0v-.357z"></path></svg>',n,o;return{c(){e=V("button"),e.innerHTML=t,this.h()},l(s){e=z(s,"BUTTON",{id:!0,class:!0,type:!0,"aria-label":!0,"data-svelte-h":!0}),ft(e)!=="svelte-4nqm9k"&&(e.innerHTML=t),this.h()},h(){m(e,"id","voice-input-button"),m(e,"class","text-gray-600 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-200 transition rounded-full p-1.5 mr-0.5 self-center"),m(e,"type","button"),m(e,"aria-label","Voice Input")},m(s,i){A(s,e,i),n||(o=ke(e,"click",l[76]),n=!0)},p:ye,d(s){s&&_(e),n=!1,o()}}}function ud(l){let e,t,n;return t=new Pt({props:{content:l[25].t("Stop"),$$slots:{default:[dd]},$$scope:{ctx:l}}}),{c(){e=V("div"),ne(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=C(e);se(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"class","flex items-center")},m(o,s){A(o,e,s),le(t,e,null),n=!0},p(o,s){const i={};s[0]&33554432&&(i.content=o[25].t("Stop")),s[0]&1024|s[2]&536870912&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),oe(t)}}}function fd(l){let e,t,n,o;const s=[md,hd],i=[];function r(a,c){return a[1]===""&&a[2].length===0?0:1}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ae()},l(a){t.l(a),n=Ae()},m(a,c){i[e].m(a,c),A(a,n,c),o=!0},p(a,c){let u=e;e=r(a),e===u?i[e].p(a,c):(He(),N(i[u],1,1,()=>{i[u]=null}),Be(),t=i[e],t?t.p(a,c):(t=i[e]=s[e](a),t.c()),S(t,1),t.m(n.parentNode,n))},i(a){o||(S(t),o=!0)},o(a){N(t),o=!1},d(a){a&&_(n),i[e].d(a)}}}function dd(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-5"><path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm6-2.438c0-.724.588-1.312 1.313-1.312h4.874c.725 0 1.313.588 1.313 1.313v4.874c0 .725-.588 1.313-1.313 1.313H9.564a1.312 1.312 0 01-1.313-1.313V9.564z" clip-rule="evenodd"></path></svg>',n,o;return{c(){e=V("button"),e.innerHTML=t,this.h()},l(s){e=z(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ft(e)!=="svelte-nqxd5x"&&(e.innerHTML=t),this.h()},h(){m(e,"class","bg-white hover:bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-1.5")},m(s,i){A(s,e,i),n||(o=ke(e,"click",l[78]),n=!0)},p:ye,d(s){s&&_(e),n=!1,o()}}}function hd(l){let e,t,n;return t=new Pt({props:{content:l[25].t("Send message"),$$slots:{default:[gd]},$$scope:{ctx:l}}}),{c(){e=V("div"),ne(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=C(e);se(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"class","flex items-center")},m(o,s){A(o,e,s),le(t,e,null),n=!0},p(o,s){const i={};s[0]&33554432&&(i.content=o[25].t("Send message")),s[0]&16777254|s[2]&536870912&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),oe(t)}}}function md(l){let e,t,n;return t=new Pt({props:{content:l[25].t("Call"),$$slots:{default:[_d]},$$scope:{ctx:l}}}),{c(){e=V("div"),ne(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=C(e);se(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"class","flex items-center")},m(o,s){A(o,e,s),le(t,e,null),n=!0},p(o,s){const i={};s[0]&33554432&&(i.content=o[25].t("Call")),s[0]&1191184416|s[2]&536870912&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),oe(t)}}}function gd(l){let e,t,n,o,s;return{c(){e=V("button"),t=Te("svg"),n=Te("path"),this.h()},l(i){e=z(i,"BUTTON",{id:!0,class:!0,type:!0});var r=C(e);t=Ve(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var a=C(t);n=Ve(a,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),C(n).forEach(_),a.forEach(_),r.forEach(_),this.h()},h(){var i;m(n,"fill-rule","evenodd"),m(n,"d","M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z"),m(n,"clip-rule","evenodd"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"viewBox","0 0 16 16"),m(t,"fill","currentColor"),m(t,"class","size-5"),m(e,"id","send-message-button"),m(e,"class",o=(l[1]===""&&l[2].length===0?"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled":l[5]||(((i=l[24])==null?void 0:i.webSearch)??!1)==="always"?"bg-blue-500 text-white hover:bg-blue-400 ":"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ")+" transition rounded-full p-1.5 self-center"),m(e,"type","submit"),e.disabled=s=l[1]===""&&l[2].length===0},m(i,r){A(i,e,r),E(e,t),E(t,n)},p(i,r){var a;r[0]&16777254&&o!==(o=(i[1]===""&&i[2].length===0?"text-white bg-gray-200 dark:text-gray-900 dark:bg-gray-700 disabled":i[5]||(((a=i[24])==null?void 0:a.webSearch)??!1)==="always"?"bg-blue-500 text-white hover:bg-blue-400 ":"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ")+" transition rounded-full p-1.5 self-center")&&m(e,"class",o),r[0]&6&&s!==(s=i[1]===""&&i[2].length===0)&&(e.disabled=s)},d(i){i&&_(e)}}}function _d(l){let e,t,n,o,s,i;return t=new Yf({props:{className:"size-5"}}),{c(){e=V("button"),ne(t.$$.fragment),this.h()},l(r){e=z(r,"BUTTON",{class:!0,type:!0,"aria-label":!0});var a=C(e);se(t.$$.fragment,a),a.forEach(_),this.h()},h(){var r;m(e,"class",n=(l[5]||(((r=l[24])==null?void 0:r.webSearch)??!1)==="always"?"bg-blue-500 text-white hover:bg-blue-400 ":"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100")+" transition rounded-full p-1.5 self-center"),m(e,"type","button"),m(e,"aria-label","Call")},m(r,a){A(r,e,a),le(t,e,null),o=!0,s||(i=ke(e,"click",l[77]),s=!0)},p(r,a){var c;(!o||a[0]&16777248&&n!==(n=(r[5]||(((c=r[24])==null?void 0:c.webSearch)??!1)==="always"?"bg-blue-500 text-white hover:bg-blue-400 ":"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100")+" transition rounded-full p-1.5 self-center"))&&m(e,"class",n)},i(r){o||(S(t.$$.fragment,r),o=!0)},o(r){N(t.$$.fragment,r),o=!1},d(r){r&&_(e),oe(t),s=!1,i()}}}function pd(l){let e,t,n,o;e=new Za({props:{show:l[22]}});let s=l[16]&&Xs(l);return{c(){ne(e.$$.fragment),t=ee(),s&&s.c(),n=Ae()},l(i){se(e.$$.fragment,i),t=te(i),s&&s.l(i),n=Ae()},m(i,r){le(e,i,r),A(i,t,r),s&&s.m(i,r),A(i,n,r),o=!0},p(i,r){const a={};r[0]&4194304&&(a.show=i[22]),e.$set(a),i[16]?s?(s.p(i,r),r[0]&65536&&S(s,1)):(s=Xs(i),s.c(),S(s,1),s.m(n.parentNode,n)):s&&(He(),N(s,1,1,()=>{s=null}),Be())},i(i){o||(S(e.$$.fragment,i),S(s),o=!0)},o(i){N(e.$$.fragment,i),N(s),o=!1},d(i){i&&(_(t),_(n)),oe(e,i),s&&s.d(i)}}}function bd(l,e,t){let n,o,s,i,r,a,c,u;ae(l,Zn,U=>t(24,n=U)),ae(l,Yl,U=>t(26,s=U)),ae(l,xn,U=>t(27,i=U)),ae(l,dl,U=>t(14,r=U)),ae(l,ul,U=>t(28,a=U)),ae(l,wo,U=>t(29,c=U)),ae(l,Xo,U=>t(30,u=U));const f=un(),h=jt("i18n");ae(l,h,U=>t(25,o=U));let{transparentBackground:d=!1}=e,{onChange:p=()=>{}}=e,{createMessagePair:b}=e,{stopResponse:w}=e,{autoScroll:g=!1}=e,{atSelectedModel:v=void 0}=e,{selectedModels:k}=e,I=[],{history:T}=e,{prompt:M=""}=e,{files:y=[]}=e,{selectedToolIds:H=[]}=e,{imageGenerationEnabled:O=!1}=e,{webSearchEnabled:B=!1}=e,{codeInterpreterEnabled:j=!1}=e,Z=!1,L=!1,D,Y,P,F,G=!1,{placeholder:K=""}=e,X=[];const Q=()=>{const U=document.getElementById("messages-container");U.scrollTo({top:U.scrollHeight,behavior:"smooth"})},W=async()=>{try{const U=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"never"},audio:!1}),Ne=document.createElement("video");Ne.srcObject=U,await Ne.play();const Ze=document.createElement("canvas");Ze.width=Ne.videoWidth,Ze.height=Ne.videoHeight,Ze.getContext("2d").drawImage(Ne,0,0,Ze.width,Ze.height),U.getTracks().forEach(at=>at.stop()),window.focus();const je=Ze.toDataURL("image/png");t(2,y=[...y,{type:"image",url:je}]),Ne.srcObject=null}catch(U){console.error("Error capturing screen:",U)}},J=async(U,Ne=!1)=>{var je,at,hn,an;if((i==null?void 0:i.role)!=="admin"&&!(((at=(je=i==null?void 0:i.permissions)==null?void 0:je.chat)==null?void 0:at.file_upload)??!0))return nt.error(o.t("You do not have permission to upload files.")),null;const Ze=el(),xe={type:"file",file:"",id:null,url:"",name:U.name,collection_name:"",status:"uploading",size:U.size,error:"",itemId:Ze,...Ne?{context:"full"}:{}};if(xe.size==0)return nt.error(o.t("You cannot upload an empty file.")),null;if(t(2,y=[...y,xe]),["audio/mpeg","audio/wav","audio/ogg","audio/x-m4a"].includes(U.type)){const ut=await Gi(localStorage.token,U).catch(Lt=>(nt.error(`${Lt}`),null));if(ut){console.log(ut);const Lt=new Blob([ut.text],{type:"text/plain"});U=Zi(Lt,`${U.name}.txt`),xe.name=U.name,xe.size=U.size}}try{const ut=await Rc(localStorage.token,U);ut?(console.log("File upload completed:",{id:ut.id,name:xe.name,collection:(hn=ut==null?void 0:ut.meta)==null?void 0:hn.collection_name}),ut.error&&(console.warn("File upload warning:",ut.error),nt.warning(ut.error)),xe.status="uploaded",xe.file=ut,xe.id=ut.id,xe.collection_name=((an=ut==null?void 0:ut.meta)==null?void 0:an.collection_name)||(ut==null?void 0:ut.collection_name),xe.url=`${Qa}/files/${ut.id}`,t(2,y)):t(2,y=y.filter(Lt=>(Lt==null?void 0:Lt.itemId)!==Ze))}catch(ut){nt.error(`${ut}`),t(2,y=y.filter(Lt=>(Lt==null?void 0:Lt.itemId)!==Ze))}},q=async U=>{console.log("Input files handler called with:",U),U.forEach(Ne=>{var Ze,xe,je,at;if(console.log("Processing file:",{name:Ne.name,type:Ne.type,size:Ne.size,extension:Ne.name.split(".").at(-1)}),(((Ze=s==null?void 0:s.file)==null?void 0:Ze.max_size)??null)!==null&&Ne.size>(((xe=s==null?void 0:s.file)==null?void 0:xe.max_size)??0)*1024*1024){console.log("File exceeds max size limit:",{fileSize:Ne.size,maxSize:(((je=s==null?void 0:s.file)==null?void 0:je.max_size)??0)*1024*1024}),nt.error(o.t("File size should not exceed {{maxSize}} MB.",{maxSize:(at=s==null?void 0:s.file)==null?void 0:at.max_size}));return}if(["image/gif","image/webp","image/jpeg","image/png"].includes(Ne.type)){if(X.length===0){nt.error(o.t("Selected model(s) do not support image inputs"));return}let hn=new FileReader;hn.onload=async an=>{var Lt,Tn;let ut=an.target.result;if((n==null?void 0:n.imageCompression)??!1){const An=((Lt=n==null?void 0:n.imageCompressionSize)==null?void 0:Lt.width)??null,pn=((Tn=n==null?void 0:n.imageCompressionSize)==null?void 0:Tn.height)??null;(An||pn)&&(ut=await cc(ut,An,pn))}t(2,y=[...y,{type:"image",url:`${ut}`}])},hn.readAsDataURL(Ne)}else J(Ne)})},ce=U=>{U.key==="Escape"&&(console.log("Escape"),t(22,G=!1))},ge=U=>{var Ne,Ze;U.preventDefault(),(Ze=(Ne=U.dataTransfer)==null?void 0:Ne.types)!=null&&Ze.includes("Files")?t(22,G=!0):t(22,G=!1)},re=()=>{t(22,G=!1)},Pe=async U=>{var Ne,Ze;if(U.preventDefault(),console.log(U),(Ne=U.dataTransfer)!=null&&Ne.files){const xe=Array.from((Ze=U.dataTransfer)==null?void 0:Ze.files);xe&&xe.length>0&&(console.log(xe),q(xe))}t(22,G=!1)};kn(async()=>{t(16,Z=!0),window.setTimeout(()=>{const Ne=document.getElementById("chat-input");Ne==null||Ne.focus()},0),window.addEventListener("keydown",ce),await $e();const U=document.getElementById("chat-container");U==null||U.addEventListener("dragover",ge),U==null||U.addEventListener("drop",Pe),U==null||U.addEventListener("dragleave",re)}),ll(()=>{console.log("destroy"),window.removeEventListener("keydown",ce);const U=document.getElementById("chat-container");U&&(U==null||U.removeEventListener("dragover",ge),U==null||U.removeEventListener("drop",Pe),U==null||U.removeEventListener("dragleave",re))});const x=()=>{t(6,g=!0),Q()},ue=U=>a?a.find(Ne=>Ne.id===U):{id:U,name:U},Ee=U=>U.id===v.id,Xe=()=>{t(0,v=void 0)};function Ke(U){We[U?"unshift":"push"](()=>{P=U,t(20,P)})}function fe(U){M=U,t(1,M)}function lt(U){y=U,t(2,y)}const it=U=>{f("upload",U.detail)},zt=U=>{const Ne=U.detail;(Ne==null?void 0:Ne.type)==="model"&&t(0,v=Ne.data);const Ze=document.getElementById("chat-input");Ze==null||Ze.focus()};function Ct(U){We[U?"unshift":"push"](()=>{Y=U,t(19,Y)})}function Ht(){F=this.files,t(21,F)}const wt=async()=>{if(F&&F.length>0){const U=Array.from(F);q(U)}else nt.error(o.t("File not found."));t(19,Y.value="",Y)};function Ut(U){L=U,t(17,L)}const pe=async()=>{var U;t(17,L=!1),await $e(),(U=document.getElementById("chat-input"))==null||U.focus()},Ye=async U=>{var xe;const{text:Ne,filename:Ze}=U.detail;t(1,M=`${M}${Ne} `),t(17,L=!1),await $e(),(xe=document.getElementById("chat-input"))==null||xe.focus(),((n==null?void 0:n.speechAutoSend)??!1)&&f("submit",M)},ot=U=>!X.includes(U),he=U=>{y.splice(U,1),t(2,y)},kt=async(U,Ne)=>{U.type!=="collection"&&!(U!=null&&U.collection)&&U.id&&await Uc(localStorage.token,U.id),y.splice(Ne,1),t(2,y)},ht=U=>{console.log(U)},bt=async U=>{(I.length===0||!I.at(0))&&nt.error(o.t("Please select a model first."));const Ne=await Tc(localStorage.token,I.at(0),U,T!=null&&T.currentId?In(T,T.currentId):null).catch(Ze=>(console.log(Ze),null));return console.log(Ne),Ne};function De(U){We[U?"unshift":"push"](()=>{D=U,t(18,D)})}function Nt(U){M=U,t(1,M)}const mt=async U=>{var xe;U=U.detail.event;const Ne=U.ctrlKey||U.metaKey,Ze=document.getElementById("commands-container");if(U.key==="Escape"&&w(),Ne&&U.key==="Enter"&&U.shiftKey&&(U.preventDefault(),b(M)),M===""&&Ne&&U.key.toLowerCase()==="r"){U.preventDefault(),console.log("regenerate");const je=[...document.getElementsByClassName("regenerate-response-button")].at(-1);je==null||je.click()}if(M===""&&U.key=="ArrowUp"){U.preventDefault();const je=[...document.getElementsByClassName("user-message")].at(-1);if(je){je.scrollIntoView({block:"center"});const at=[...document.getElementsByClassName("edit-user-message-button")].at(-1);at==null||at.click()}}if(Ze){if(Ze&&U.key==="ArrowUp"&&(U.preventDefault(),P.selectUp(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),Ze&&U.key==="ArrowDown"&&(U.preventDefault(),P.selectDown(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),Ze&&U.key==="Tab"){U.preventDefault();const je=[...document.getElementsByClassName("selected-command-option-button")].at(-1);je==null||je.click()}if(Ze&&U.key==="Enter"){U.preventDefault();const je=[...document.getElementsByClassName("selected-command-option-button")].at(-1);je?je==null||je.click():(xe=document.getElementById("send-message-button"))==null||xe.click()}}else(!c||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0))&&(U.keyCode===13&&!U.shiftKey&&U.preventDefault(),M!==""&&U.keyCode===13&&!U.shiftKey&&f("submit",M));U.key==="Escape"&&(console.log("Escape"),t(0,v=void 0),t(3,H=[]),t(5,B=!1),t(4,O=!1))},de=async U=>{U=U.detail.event,console.log(U);const Ne=U.clipboardData||window.clipboardData;if(Ne&&Ne.items){for(const Ze of Ne.items)if(Ze.type.indexOf("image")!==-1){const xe=Ze.getAsFile(),je=new FileReader;je.onload=function(at){t(2,y=[...y,{type:"image",url:`${at.target.result}`}])},je.readAsDataURL(xe)}else if(Ze.type==="text/plain"&&((n==null?void 0:n.largeTextAsFile)??!1)){const xe=Ne.getData("text/plain");if(xe.length>gs){U.preventDefault();const je=new Blob([xe],{type:"text/plain"}),at=new File([je],`Pasted_Text_${Date.now()}.txt`,{type:"text/plain"});await J(at,!0)}}}};function Ce(U){We[U?"unshift":"push"](()=>{D=U,t(18,D)})}function ze(){M=this.value,t(1,M)}const Ge=U=>{(!c||!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0))&&(U.key==="Enter"&&!U.shiftKey&&U.preventDefault(),M!==""&&U.key==="Enter"&&!U.shiftKey&&f("submit",M))},It=async U=>{var xe;const Ne=U.ctrlKey||U.metaKey,Ze=document.getElementById("commands-container");if(U.key==="Escape"&&w(),Ne&&U.key==="Enter"&&U.shiftKey&&(U.preventDefault(),b(M)),M===""&&Ne&&U.key.toLowerCase()==="r"){U.preventDefault(),console.log("regenerate");const je=[...document.getElementsByClassName("regenerate-response-button")].at(-1);je==null||je.click()}if(M===""&&U.key=="ArrowUp"){U.preventDefault();const je=[...document.getElementsByClassName("user-message")].at(-1),at=[...document.getElementsByClassName("edit-user-message-button")].at(-1);console.log(je),je.scrollIntoView({block:"center"}),at==null||at.click()}if(Ze&&U.key==="ArrowUp"&&(U.preventDefault(),P.selectUp(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),Ze&&U.key==="ArrowDown"&&(U.preventDefault(),P.selectDown(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),Ze&&U.key==="Enter"){U.preventDefault();const je=[...document.getElementsByClassName("selected-command-option-button")].at(-1);U.shiftKey?t(1,M=`${M}
`):je?je==null||je.click():(xe=document.getElementById("send-message-button"))==null||xe.click()}if(Ze&&U.key==="Tab"){U.preventDefault();const je=[...document.getElementsByClassName("selected-command-option-button")].at(-1);je==null||je.click()}else if(U.key==="Tab"){const je=uc(M);if(je.length>0){const at=je.at(0),hn=M;t(1,M=M.substring(0,(at==null?void 0:at.endIndex)+1)),await $e(),U.target.scrollTop=U.target.scrollHeight,t(1,M=hn),await $e(),U.preventDefault(),U.target.setSelectionRange(at==null?void 0:at.startIndex,at.endIndex+1)}U.target.style.height="",U.target.style.height=Math.min(U.target.scrollHeight,320)+"px"}U.key==="Escape"&&(console.log("Escape"),t(0,v=void 0),t(3,H=[]),t(5,B=!1),t(4,O=!1))},yt=async U=>{U.target.style.height="",U.target.style.height=Math.min(U.target.scrollHeight,320)+"px"},Dt=async U=>{U.target.style.height="",U.target.style.height=Math.min(U.target.scrollHeight,320)+"px"},Mt=async U=>{const Ne=U.clipboardData||window.clipboardData;if(Ne&&Ne.items){for(const Ze of Ne.items)if(Ze.type.indexOf("image")!==-1){const xe=Ze.getAsFile(),je=new FileReader;je.onload=function(at){t(2,y=[...y,{type:"image",url:`${at.target.result}`}])},je.readAsDataURL(xe)}else if(Ze.type==="text/plain"&&((n==null?void 0:n.largeTextAsFile)??!1)){const xe=Ne.getData("text/plain");if(xe.length>gs){U.preventDefault();const je=new Blob([xe],{type:"text/plain"}),at=new File([je],`Pasted_Text_${Date.now()}.txt`,{type:"text/plain"});await J(at,!0)}}}},sn=()=>{Y.click()},Bt=async()=>{try{const U=await tf();if(U){const Ne=new File([U.blob],U.name,{type:U.blob.type});await J(Ne)}else console.log("No file was selected from Google Drive")}catch(U){console.error("Google Drive Error:",U),nt.error(o.t("Error accessing Google Drive: {{error}}",{error:U.message}))}},At=async()=>{await $e();const U=document.getElementById("chat-input");U==null||U.focus()};function Kt(U){H=U,t(3,H)}const Gt=()=>t(5,B=!B),tn=()=>t(4,O=!O),rn=()=>t(7,j=!j),Wt=async()=>{try{let U=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(Ne){return nt.error(o.t("Permission denied when accessing microphone: {{error}}",{error:Ne})),null});U&&(t(17,L=!0),U.getTracks().forEach(Ze=>Ze.stop())),U=null}catch{nt.error(o.t("Permission denied when accessing microphone"))}},_t=async()=>{var U,Ne,Ze;if(k.length>1){nt.error(o.t("Select only one model to call"));return}if(s.audio.stt.engine==="web"){nt.error(o.t("Call feature is not supported when using Web STT engine"));return}try{let xe=await navigator.mediaDevices.getUserMedia({audio:!0});xe&&xe.getTracks().forEach(at=>at.stop()),xe=null,u||(await Xo.set(new eu({dtype:((Ze=(Ne=(U=n.audio)==null?void 0:U.tts)==null?void 0:Ne.engineConfig)==null?void 0:Ze.dtype)??"fp32"})),await u.init()),Sn.set(!0),Ft.set(!0)}catch{nt.error(o.t("Permission denied when accessing media devices"))}},Jt=()=>{w()},fn=()=>{f("submit",M)};return l.$$set=U=>{"transparentBackground"in U&&t(8,d=U.transparentBackground),"onChange"in U&&t(37,p=U.onChange),"createMessagePair"in U&&t(9,b=U.createMessagePair),"stopResponse"in U&&t(10,w=U.stopResponse),"autoScroll"in U&&t(6,g=U.autoScroll),"atSelectedModel"in U&&t(0,v=U.atSelectedModel),"selectedModels"in U&&t(11,k=U.selectedModels),"history"in U&&t(12,T=U.history),"prompt"in U&&t(1,M=U.prompt),"files"in U&&t(2,y=U.files),"selectedToolIds"in U&&t(3,H=U.selectedToolIds),"imageGenerationEnabled"in U&&t(4,O=U.imageGenerationEnabled),"webSearchEnabled"in U&&t(5,B=U.webSearchEnabled),"codeInterpreterEnabled"in U&&t(7,j=U.codeInterpreterEnabled),"placeholder"in U&&t(13,K=U.placeholder)},l.$$.update=()=>{l.$$.dirty[0]&2049&&t(15,I=v!==void 0?[v.id]:k),l.$$.dirty[0]&62|l.$$.dirty[1]&64&&p({prompt:M,files:y,selectedToolIds:H,imageGenerationEnabled:O,webSearchEnabled:B}),l.$$.dirty[0]&18433&&t(23,X=[...v?[v]:k].filter(U=>{var Ne,Ze,xe,je;return((je=(xe=(Ze=(Ne=r.find(at=>at.id===U))==null?void 0:Ne.info)==null?void 0:Ze.meta)==null?void 0:xe.capabilities)==null?void 0:je.vision)??!0}))},[v,M,y,H,O,B,g,j,d,b,w,k,T,K,r,I,Z,L,D,Y,P,F,G,X,n,o,s,i,a,c,u,f,h,Q,W,J,q,p,x,ue,Ee,Xe,Ke,fe,lt,it,zt,Ct,Ht,wt,Ut,pe,Ye,ot,he,kt,ht,bt,De,Nt,mt,de,Ce,ze,Ge,It,yt,Dt,Mt,sn,Bt,At,Kt,Gt,tn,rn,Wt,_t,Jt,fn]}class na extends Re{constructor(e){super(),Ue(this,e,bd,pd,Fe,{transparentBackground:8,onChange:37,createMessagePair:9,stopResponse:10,autoScroll:6,atSelectedModel:0,selectedModels:11,history:12,prompt:1,files:2,selectedToolIds:3,imageGenerationEnabled:4,webSearchEnabled:5,codeInterpreterEnabled:7,placeholder:13},null,[-1,-1,-1])}}function cr(l,e,t){const n=l.slice();return n[12]=e[t],n[13]=e,n[14]=t,n}function vd(l){let e,t,n;return t=new Pt({props:{content:l[4].t("Remove Model"),$$slots:{default:[kd]},$$scope:{ctx:l}}}),{c(){e=V("div"),ne(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=C(e);se(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"class","self-center mx-1 disabled:text-gray-600 disabled:hover:text-gray-600 -translate-y-[0.5px]")},m(o,s){A(o,e,s),le(t,e,null),n=!0},p(o,s){const i={};s&16&&(i.content=o[4].t("Remove Model")),s&32771&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),oe(t)}}}function wd(l){let e,t,n;return t=new Pt({props:{content:l[4].t("Add Model"),$$slots:{default:[yd]},$$scope:{ctx:l}}}),{c(){e=V("div"),ne(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=C(e);se(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"class","self-center mx-1 disabled:text-gray-600 disabled:hover:text-gray-600 -translate-y-[0.5px]")},m(o,s){A(o,e,s),le(t,e,null),n=!0},p(o,s){const i={};s&16&&(i.content=o[4].t("Add Model")),s&32771&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),oe(t)}}}function kd(l){let e,t,n,o,s;function i(){return l[10](l[14])}return{c(){e=V("button"),t=Te("svg"),n=Te("path"),this.h()},l(r){e=z(r,"BUTTON",{"aria-label":!0});var a=C(e);t=Ve(a,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var c=C(t);n=Ve(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(n).forEach(_),c.forEach(_),a.forEach(_),this.h()},h(){m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M19.5 12h-15"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"fill","none"),m(t,"viewBox","0 0 24 24"),m(t,"stroke-width","2"),m(t,"stroke","currentColor"),m(t,"class","size-3"),e.disabled=l[1],m(e,"aria-label","Remove Model")},m(r,a){A(r,e,a),E(e,t),E(t,n),o||(s=ke(e,"click",i),o=!0)},p(r,a){l=r,a&2&&(e.disabled=l[1])},d(r){r&&_(e),o=!1,s()}}}function yd(l){let e,t,n,o,s;return{c(){e=V("button"),t=Te("svg"),n=Te("path"),this.h()},l(i){e=z(i,"BUTTON",{class:!0,"aria-label":!0});var r=C(e);t=Ve(r,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=C(t);n=Ve(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(n).forEach(_),a.forEach(_),r.forEach(_),this.h()},h(){m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M12 6v12m6-6H6"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"fill","none"),m(t,"viewBox","0 0 24 24"),m(t,"stroke-width","2"),m(t,"stroke","currentColor"),m(t,"class","size-3.5"),m(e,"class",""),e.disabled=l[1],m(e,"aria-label","Add Model")},m(i,r){A(i,e,r),E(e,t),E(t,n),o||(s=ke(e,"click",l[9]),o=!0)},p(i,r){r&2&&(e.disabled=i[1])},d(i){i&&_(e),o=!1,s()}}}function ur(l){var w,g,v;let e,t,n,o,s,i,r,a,c,u;function f(k){l[8](k,l[12],l[13],l[14])}let h={id:`${l[14]}`,placeholder:l[4].t("Select a model"),items:l[3].map(dr),showTemporaryChatControl:l[5].role==="user"?((v=(g=(w=l[5])==null?void 0:w.permissions)==null?void 0:g.chat)==null?void 0:v.temporary)??!0:!0};l[12]!==void 0&&(h.value=l[12]),o=new ou({props:h}),We.push(()=>Je(o,"value",f));const d=[wd,vd],p=[];function b(k,I){return k[14]===0?0:1}return r=b(l),a=p[r]=d[r](l),{c(){e=V("div"),t=V("div"),n=V("div"),ne(o.$$.fragment),i=ee(),a.c(),c=ee(),this.h()},l(k){e=z(k,"DIV",{class:!0});var I=C(e);t=z(I,"DIV",{class:!0});var T=C(t);n=z(T,"DIV",{class:!0});var M=C(n);se(o.$$.fragment,M),M.forEach(_),T.forEach(_),i=te(I),a.l(I),c=te(I),I.forEach(_),this.h()},h(){m(n,"class","mr-1 max-w-full"),m(t,"class","overflow-hidden w-full"),m(e,"class","flex w-full max-w-fit")},m(k,I){A(k,e,I),E(e,t),E(t,n),le(o,n,null),E(e,i),p[r].m(e,null),E(e,c),u=!0},p(k,I){var M,y,H;l=k;const T={};I&16&&(T.placeholder=l[4].t("Select a model")),I&8&&(T.items=l[3].map(dr)),I&32&&(T.showTemporaryChatControl=l[5].role==="user"?((H=(y=(M=l[5])==null?void 0:M.permissions)==null?void 0:y.chat)==null?void 0:H.temporary)??!0:!0),!s&&I&1&&(s=!0,T.value=l[12],qe(()=>s=!1)),o.$set(T),a.p(l,I)},i(k){u||(S(o.$$.fragment,k),S(a),u=!0)},o(k){N(o.$$.fragment,k),N(a),u=!1},d(k){k&&_(e),oe(o),p[r].d()}}}function fr(l){let e,t,n=l[4].t("Set as default")+"",o,s,i;return{c(){e=V("div"),t=V("button"),o=Ie(n),this.h()},l(r){e=z(r,"DIV",{class:!0});var a=C(e);t=z(a,"BUTTON",{});var c=C(t);o=Se(c,n),c.forEach(_),a.forEach(_),this.h()},h(){m(e,"class","absolute text-left mt-[1px] ml-1 text-[0.7rem] text-gray-500 font-primary")},m(r,a){A(r,e,a),E(e,t),E(t,o),s||(i=ke(t,"click",l[7]),s=!0)},p(r,a){a&16&&n!==(n=r[4].t("Set as default")+"")&&Me(o,n)},d(r){r&&_(e),s=!1,i()}}}function Ed(l){let e,t,n,o,s=vt(l[0]),i=[];for(let c=0;c<s.length;c+=1)i[c]=ur(cr(l,s,c));const r=c=>N(i[c],1,1,()=>{i[c]=null});let a=l[2]&&fr(l);return{c(){e=V("div");for(let c=0;c<i.length;c+=1)i[c].c();t=ee(),a&&a.c(),n=Ae(),this.h()},l(c){e=z(c,"DIV",{class:!0});var u=C(e);for(let f=0;f<i.length;f+=1)i[f].l(u);u.forEach(_),t=te(c),a&&a.l(c),n=Ae(),this.h()},h(){m(e,"class","flex flex-col w-full items-start")},m(c,u){A(c,e,u);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(e,null);A(c,t,u),a&&a.m(c,u),A(c,n,u),o=!0},p(c,[u]){if(u&59){s=vt(c[0]);let f;for(f=0;f<s.length;f+=1){const h=cr(c,s,f);i[f]?(i[f].p(h,u),S(i[f],1)):(i[f]=ur(h),i[f].c(),S(i[f],1),i[f].m(e,null))}for(He(),f=s.length;f<i.length;f+=1)r(f);Be()}c[2]?a?a.p(c,u):(a=fr(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i(c){if(!o){for(let u=0;u<s.length;u+=1)S(i[u]);o=!0}},o(c){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)N(i[u]);o=!1},d(c){c&&(_(e),_(t),_(n)),Mn(i,c),a&&a.d(c)}}}const dr=l=>({value:l.id,label:l.name,model:l});function Id(l,e,t){let n,o,s,i;ae(l,dl,b=>t(3,n=b)),ae(l,Zn,b=>t(11,s=b)),ae(l,xn,b=>t(5,i=b));const r=jt("i18n");ae(l,r,b=>t(4,o=b));let{selectedModels:a=[""]}=e,{disabled:c=!1}=e,{showSetDefault:u=!0}=e;const f=async()=>{if(a.filter(w=>w==="").length){nt.error(o.t("Choose a model before saving..."));return}Zn.set({...s,models:a}),await Mc(localStorage.token,{ui:s}),nt.success(o.t("Default model updated"))};function h(b,w,g,v){g[v]=b,t(0,a),t(3,n)}const d=()=>{t(0,a=[...a,""])},p=b=>{a.splice(b,1),t(0,a),t(3,n)};return l.$$set=b=>{"selectedModels"in b&&t(0,a=b.selectedModels),"disabled"in b&&t(1,c=b.disabled),"showSetDefault"in b&&t(2,u=b.showSetDefault)},l.$$.update=()=>{l.$$.dirty&9&&a.length>0&&n.length>0&&t(0,a=a.map(b=>n.map(w=>w.id).includes(b)?b:""))},[a,c,u,n,o,i,r,f,h,d,p]}class Sd extends Re{constructor(e){super(),Ue(this,e,Id,Ed,Fe,{selectedModels:0,disabled:1,showSetDefault:2})}}function Cd(l){let e,t;return{c(){e=Te("svg"),t=Te("path"),this.h()},l(n){e=Ve(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=C(e);t=Ve(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","M9 6.75V15m6-6v8.25m.503 3.498 4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 0 0-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0Z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){A(n,e,o),E(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:ye,o:ye,d(n){n&&_(e)}}}function Dd(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="2"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}let Md=class extends Re{constructor(e){super(),Ue(this,e,Dd,Cd,Fe,{className:0,strokeWidth:1})}};function Td(l){let e,t;return{c(){e=Te("svg"),t=Te("path"),this.h()},l(n){e=Ve(n,"svg",{xmlns:!0,viewBox:!0,stroke:!0,fill:!0,class:!0,"stroke-width":!0});var o=C(e);t=Ve(o,"path",{d:!0}),C(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"d","M18.75 12.75h1.5a.75.75 0 0 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5ZM12 6a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 12 6ZM12 18a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 12 18ZM3.75 6.75h1.5a.75.75 0 1 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5ZM5.25 18.75h-1.5a.75.75 0 0 1 0-1.5h1.5a.75.75 0 0 1 0 1.5ZM3 12a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 3 12ZM9 3.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM12.75 12a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0ZM9 15.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"stroke","currentColor"),m(e,"fill","currentColor"),m(e,"class",l[0]),m(e,"stroke-width",l[1])},m(n,o){A(n,e,o),E(e,t)},p(n,[o]){o&1&&m(e,"class",n[0]),o&2&&m(e,"stroke-width",n[1])},i:ye,o:ye,d(n){n&&_(e)}}}function Vd(l,e,t){let{className:n="w-4 h-4"}=e,{strokeWidth:o="1.5"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class ns extends Re{constructor(e){super(),Ue(this,e,Vd,Td,Fe,{className:0,strokeWidth:1})}}function zd(l){let e,t;return{c(){e=Te("svg"),t=Te("path"),this.h()},l(n){e=Ve(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=C(e);t=Ve(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){A(n,e,o),E(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:ye,o:ye,d(n){n&&_(e)}}}function Nd(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="2"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class Pd extends Re{constructor(e){super(),Ue(this,e,Nd,zd,Fe,{className:0,strokeWidth:1})}}function Od(l){let e;const t=l[13].default,n=Qt(t,l,l[23],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&8388608)&&xt(n,t,o,o[23],e?en(t,o[23],s,null):$t(o[23]),null)},i(o){e||(S(n,o),e=!0)},o(o){N(n,o),e=!1},d(o){n&&n.d(o)}}}function hr(l){let e,t;return e=new wn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-controls-button",$$slots:{default:[Hd]},$$scope:{ctx:l}}}),e.$on("click",l[14]),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&8388640&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function Hd(l){let e,t,n,o=l[5].t("Controls")+"",s,i;return e=new ns({props:{className:" size-4",strokeWidth:"0.5"}}),{c(){ne(e.$$.fragment),t=ee(),n=V("div"),s=Ie(o),this.h()},l(r){se(e.$$.fragment,r),t=te(r),n=z(r,"DIV",{class:!0});var a=C(n);s=Se(a,o),a.forEach(_),this.h()},h(){m(n,"class","flex items-center")},m(r,a){le(e,r,a),A(r,t,a),A(r,n,a),E(n,s),i=!0},p(r,a){(!i||a&32)&&o!==(o=r[5].t("Controls")+"")&&Me(s,o)},i(r){i||(S(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){r&&(_(t),_(n)),oe(e,r)}}}function mr(l){let e,t;return e=new wn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[Bd]},$$scope:{ctx:l}}}),e.$on("click",l[15]),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&8388640&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function Bd(l){let e,t,n,o,s=l[5].t("Share")+"",i;return{c(){e=Te("svg"),t=Te("path"),n=ee(),o=V("div"),i=Ie(s),this.h()},l(r){e=Ve(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var a=C(e);t=Ve(a,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),C(t).forEach(_),a.forEach(_),n=te(r),o=z(r,"DIV",{class:!0});var c=C(o);i=Se(c,s),c.forEach(_),this.h()},h(){m(t,"fill-rule","evenodd"),m(t,"d","M15.75 4.5a3 3 0 1 1 .825 2.066l-8.421 4.679a3.002 3.002 0 0 1 0 1.51l8.421 4.679a3 3 0 1 1-.729 1.31l-8.421-4.678a3 3 0 1 1 0-4.132l8.421-4.679a3 3 0 0 1-.096-.755Z"),m(t,"clip-rule","evenodd"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"fill","currentColor"),m(e,"class","size-4"),m(o,"class","flex items-center")},m(r,a){A(r,e,a),E(e,t),A(r,n,a),A(r,o,a),E(o,i)},p(r,a){a&32&&s!==(s=r[5].t("Share")+"")&&Me(i,s)},d(r){r&&(_(e),_(n),_(o))}}}function Ad(l){let e,t,n,o=l[5].t("Overview")+"",s,i;return e=new Md({props:{className:" size-4",strokeWidth:"1.5"}}),{c(){ne(e.$$.fragment),t=ee(),n=V("div"),s=Ie(o),this.h()},l(r){se(e.$$.fragment,r),t=te(r),n=z(r,"DIV",{class:!0});var a=C(n);s=Se(a,o),a.forEach(_),this.h()},h(){m(n,"class","flex items-center")},m(r,a){le(e,r,a),A(r,t,a),A(r,n,a),E(n,s),i=!0},p(r,a){(!i||a&32)&&o!==(o=r[5].t("Overview")+"")&&Me(s,o)},i(r){i||(S(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){r&&(_(t),_(n)),oe(e,r)}}}function Ld(l){let e,t,n,o=l[5].t("Artifacts")+"",s,i;return e=new Pd({props:{className:" size-4",strokeWidth:"1.5"}}),{c(){ne(e.$$.fragment),t=ee(),n=V("div"),s=Ie(o),this.h()},l(r){se(e.$$.fragment,r),t=te(r),n=z(r,"DIV",{class:!0});var a=C(n);s=Se(a,o),a.forEach(_),this.h()},h(){m(n,"class","flex items-center")},m(r,a){le(e,r,a),A(r,t,a),A(r,n,a),E(n,s),i=!0},p(r,a){(!i||a&32)&&o!==(o=r[5].t("Artifacts")+"")&&Me(s,o)},i(r){i||(S(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){r&&(_(t),_(n)),oe(e,r)}}}function Rd(l){let e,t,n,o,s=l[5].t("Download")+"",i;return{c(){e=Te("svg"),t=Te("path"),n=ee(),o=V("div"),i=Ie(s),this.h()},l(r){e=Ve(r,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var a=C(e);t=Ve(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(t).forEach(_),a.forEach(_),n=te(r),o=z(r,"DIV",{class:!0});var c=C(o);i=Se(c,s),c.forEach(_),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","size-4"),m(o,"class","flex items-center")},m(r,a){A(r,e,a),E(e,t),A(r,n,a),A(r,o,a),E(o,i)},p(r,a){a&32&&s!==(s=r[5].t("Download")+"")&&Me(i,s)},d(r){r&&(_(e),_(n),_(o))}}}function Ud(l){let e,t=l[5].t("Export chat (.json)")+"",n;return{c(){e=V("div"),n=Ie(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=C(e);n=Se(s,t),s.forEach(_),this.h()},h(){m(e,"class","flex items-center line-clamp-1")},m(o,s){A(o,e,s),E(e,n)},p(o,s){s&32&&t!==(t=o[5].t("Export chat (.json)")+"")&&Me(n,t)},d(o){o&&_(e)}}}function Wd(l){let e,t=l[5].t("Plain text (.txt)")+"",n;return{c(){e=V("div"),n=Ie(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=C(e);n=Se(s,t),s.forEach(_),this.h()},h(){m(e,"class","flex items-center line-clamp-1")},m(o,s){A(o,e,s),E(e,n)},p(o,s){s&32&&t!==(t=o[5].t("Plain text (.txt)")+"")&&Me(n,t)},d(o){o&&_(e)}}}function Fd(l){let e,t=l[5].t("PDF document (.pdf)")+"",n;return{c(){e=V("div"),n=Ie(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=C(e);n=Se(s,t),s.forEach(_),this.h()},h(){m(e,"class","flex items-center line-clamp-1")},m(o,s){A(o,e,s),E(e,n)},p(o,s){s&32&&t!==(t=o[5].t("PDF document (.pdf)")+"")&&Me(n,t)},d(o){o&&_(e)}}}function jd(l){let e,t,n,o,s,i;return e=new wn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Ud]},$$scope:{ctx:l}}}),e.$on("click",l[18]),n=new wn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Wd]},$$scope:{ctx:l}}}),n.$on("click",l[19]),s=new wn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Fd]},$$scope:{ctx:l}}}),s.$on("click",l[20]),{c(){ne(e.$$.fragment),t=ee(),ne(n.$$.fragment),o=ee(),ne(s.$$.fragment)},l(r){se(e.$$.fragment,r),t=te(r),se(n.$$.fragment,r),o=te(r),se(s.$$.fragment,r)},m(r,a){le(e,r,a),A(r,t,a),le(n,r,a),A(r,o,a),le(s,r,a),i=!0},p(r,a){const c={};a&8388640&&(c.$$scope={dirty:a,ctx:r}),e.$set(c);const u={};a&8388640&&(u.$$scope={dirty:a,ctx:r}),n.$set(u);const f={};a&8388640&&(f.$$scope={dirty:a,ctx:r}),s.$set(f)},i(r){i||(S(e.$$.fragment,r),S(n.$$.fragment,r),S(s.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),N(n.$$.fragment,r),N(s.$$.fragment,r),i=!1},d(r){r&&(_(t),_(o)),oe(e,r),oe(n,r),oe(s,r)}}}function Yd(l){let e,t,n,o;return e=new yc({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Rd]},$$scope:{ctx:l}}}),n=new Ec({props:{class:"w-full rounded-xl px-1 py-1.5 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",transition:Xl,sideOffset:8,$$slots:{default:[jd]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment),t=ee(),ne(n.$$.fragment)},l(s){se(e.$$.fragment,s),t=te(s),se(n.$$.fragment,s)},m(s,i){le(e,s,i),A(s,t,i),le(n,s,i),o=!0},p(s,i){const r={};i&8388640&&(r.$$scope={dirty:i,ctx:s}),e.$set(r);const a={};i&8388640&&(a.$$scope={dirty:i,ctx:s}),n.$set(a)},i(s){o||(S(e.$$.fragment,s),S(n.$$.fragment,s),o=!0)},o(s){N(e.$$.fragment,s),N(n.$$.fragment,s),o=!1},d(s){s&&_(t),oe(e,s),oe(n,s)}}}function Xd(l){let e,t,n,o=l[5].t("Copy")+"",s,i;return e=new Jc({props:{className:" size-4",strokeWidth:"1.5"}}),{c(){ne(e.$$.fragment),t=ee(),n=V("div"),s=Ie(o),this.h()},l(r){se(e.$$.fragment,r),t=te(r),n=z(r,"DIV",{class:!0});var a=C(n);s=Se(a,o),a.forEach(_),this.h()},h(){m(n,"class","flex items-center")},m(r,a){le(e,r,a),A(r,t,a),A(r,n,a),E(n,s),i=!0},p(r,a){(!i||a&32)&&o!==(o=r[5].t("Copy")+"")&&Me(s,o)},i(r){i||(S(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){r&&(_(t),_(n)),oe(e,r)}}}function gr(l){let e,t,n,o,s;return o=new Ic({props:{chatId:l[1].id}}),{c(){e=V("hr"),t=ee(),n=V("div"),ne(o.$$.fragment),this.h()},l(i){e=z(i,"HR",{class:!0}),t=te(i),n=z(i,"DIV",{class:!0});var r=C(n);se(o.$$.fragment,r),r.forEach(_),this.h()},h(){m(e,"class","border-gray-50 dark:border-gray-850 my-0.5"),m(n,"class","flex p-1")},m(i,r){A(i,e,r),A(i,t,r),A(i,n,r),le(o,n,null),s=!0},p(i,r){const a={};r&2&&(a.chatId=i[1].id),o.$set(a)},i(i){s||(S(o.$$.fragment,i),s=!0)},o(i){N(o.$$.fragment,i),s=!1},d(i){i&&(_(e),_(t),_(n)),oe(o)}}}function Kd(l){let e,t,n,o,s,i,r,a,c,u,f,h,d=l[4]&&hr(l),p=!l[3]&&mr(l);n=new wn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-overview-button",$$slots:{default:[Ad]},$$scope:{ctx:l}}}),n.$on("click",l[16]),s=new wn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-overview-button",$$slots:{default:[Ld]},$$scope:{ctx:l}}}),s.$on("click",l[17]),r=new kc({props:{$$slots:{default:[Yd]},$$scope:{ctx:l}}}),c=new wn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-copy-button",$$slots:{default:[Xd]},$$scope:{ctx:l}}}),c.$on("click",l[21]);let b=!l[3]&&gr(l);return{c(){d&&d.c(),e=ee(),p&&p.c(),t=ee(),ne(n.$$.fragment),o=ee(),ne(s.$$.fragment),i=ee(),ne(r.$$.fragment),a=ee(),ne(c.$$.fragment),u=ee(),b&&b.c(),f=Ae()},l(w){d&&d.l(w),e=te(w),p&&p.l(w),t=te(w),se(n.$$.fragment,w),o=te(w),se(s.$$.fragment,w),i=te(w),se(r.$$.fragment,w),a=te(w),se(c.$$.fragment,w),u=te(w),b&&b.l(w),f=Ae()},m(w,g){d&&d.m(w,g),A(w,e,g),p&&p.m(w,g),A(w,t,g),le(n,w,g),A(w,o,g),le(s,w,g),A(w,i,g),le(r,w,g),A(w,a,g),le(c,w,g),A(w,u,g),b&&b.m(w,g),A(w,f,g),h=!0},p(w,g){w[4]?d?(d.p(w,g),g&16&&S(d,1)):(d=hr(w),d.c(),S(d,1),d.m(e.parentNode,e)):d&&(He(),N(d,1,1,()=>{d=null}),Be()),w[3]?p&&(He(),N(p,1,1,()=>{p=null}),Be()):p?(p.p(w,g),g&8&&S(p,1)):(p=mr(w),p.c(),S(p,1),p.m(t.parentNode,t));const v={};g&8388640&&(v.$$scope={dirty:g,ctx:w}),n.$set(v);const k={};g&8388640&&(k.$$scope={dirty:g,ctx:w}),s.$set(k);const I={};g&8388640&&(I.$$scope={dirty:g,ctx:w}),r.$set(I);const T={};g&8388640&&(T.$$scope={dirty:g,ctx:w}),c.$set(T),w[3]?b&&(He(),N(b,1,1,()=>{b=null}),Be()):b?(b.p(w,g),g&8&&S(b,1)):(b=gr(w),b.c(),S(b,1),b.m(f.parentNode,f))},i(w){h||(S(d),S(p),S(n.$$.fragment,w),S(s.$$.fragment,w),S(r.$$.fragment,w),S(c.$$.fragment,w),S(b),h=!0)},o(w){N(d),N(p),N(n.$$.fragment,w),N(s.$$.fragment,w),N(r.$$.fragment,w),N(c.$$.fragment,w),N(b),h=!1},d(w){w&&(_(e),_(t),_(o),_(i),_(a),_(u),_(f)),d&&d.d(w),p&&p.d(w),oe(n,w),oe(s,w),oe(r,w),oe(c,w),b&&b.d(w)}}}function Zd(l){let e,t,n;return t=new Eo({props:{class:"w-full max-w-[200px] rounded-xl px-1 py-1.5  z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:8,side:"bottom",align:"end",transition:Xl,$$slots:{default:[Kd]},$$scope:{ctx:l}}}),{c(){e=V("div"),ne(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{slot:!0});var s=C(e);se(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"slot","content")},m(o,s){A(o,e,s),le(t,e,null),n=!0},p(o,s){const i={};s&8388667&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),oe(t)}}}function Gd(l){let e,t;return e=new yo({props:{$$slots:{content:[Zd],default:[Od]},$$scope:{ctx:l}}}),e.$on("change",l[22]),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,[o]){const s={};o&8388667&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function qd(l,e,t){let n,o,s;ae(l,ko,Z=>t(3,n=Z)),ae(l,wo,Z=>t(4,o=Z));let{$$slots:i={},$$scope:r}=e;const{saveAs:a}=su,c=jt("i18n");ae(l,c,Z=>t(5,s=Z));let{shareEnabled:u=!1}=e,{shareHandler:f}=e,{downloadHandler:h}=e,{chat:d}=e,{onClose:p=()=>{}}=e;const b=async()=>{const Z=d.chat.history;return In(Z,Z.currentId).reduce((Y,P,F,G)=>`${Y}### ${P.role.toUpperCase()}
${P.content}

`,"").trim()},w=async()=>{const Z=await b();let L=new Blob([Z],{type:"text/plain"});a(L,`chat-${d.chat.title}.txt`)},g=async()=>{const Z=d.chat.history,L=In(Z,Z.currentId),D=await ru(d.chat.title,L),Y=window.URL.createObjectURL(D),P=document.createElement("a");P.href=Y,P.download=`chat-${d.chat.title}.pdf`,document.body.appendChild(P),P.click(),document.body.removeChild(P),window.URL.revokeObjectURL(Y)},v=async()=>{if(d.id){let Z=null;d.id==="local"||n?Z=d:Z=await Zo(localStorage.token,d.id);let L=new Blob([JSON.stringify([Z])],{type:"application/json"});a(L,`chat-export-${Date.now()}.json`)}},k=async()=>{await Ft.set(!0),await Gn.set(!1),await jn.set(!1)},I=()=>{f()},T=async()=>{await Ft.set(!0),await Gn.set(!0),await jn.set(!1)},M=async()=>{await Ft.set(!0),await jn.set(!0),await Gn.set(!1)},y=()=>{v()},H=()=>{w()},O=()=>{g()},B=async()=>{await $o(await b()).catch(L=>{console.error(L)})&&nt.success(s.t("Copied to clipboard"))},j=Z=>{Z.detail===!1&&p()};return l.$$set=Z=>{"shareEnabled"in Z&&t(11,u=Z.shareEnabled),"shareHandler"in Z&&t(0,f=Z.shareHandler),"downloadHandler"in Z&&t(12,h=Z.downloadHandler),"chat"in Z&&t(1,d=Z.chat),"onClose"in Z&&t(2,p=Z.onClose),"$$scope"in Z&&t(23,r=Z.$$scope)},[f,d,p,n,o,s,c,b,w,g,v,u,h,i,k,I,T,M,y,H,O,B,j,r]}class Jd extends Re{constructor(e){super(),Ue(this,e,qd,Gd,Fe,{shareEnabled:11,shareHandler:0,downloadHandler:12,chat:1,onClose:2})}}function _r(l){let e,t,n;function o(i){l[18](i)}let s={showSetDefault:!l[2]};return l[0]!==void 0&&(s.selectedModels=l[0]),e=new Sd({props:s}),We.push(()=>Je(e,"selectedModels",o)),{c(){ne(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,r){le(e,i,r),n=!0},p(i,r){const a={};r&4&&(a.showSetDefault=!i[2]),!t&&r&1&&(t=!0,a.selectedModels=i[0],qe(()=>t=!1)),e.$set(a)},i(i){n||(S(e.$$.fragment,i),n=!0)},o(i){N(e.$$.fragment,i),n=!1},d(i){oe(e,i)}}}function Qd(l){let e,t;return e=new Pt({props:{content:l[12].t("Controls"),$$slots:{default:[$d]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&4096&&(s.content=n[12].t("Controls")),o&67117056&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function xd(l){let e,t;return e=new Jd({props:{chat:l[3],shareEnabled:l[2],shareHandler:l[19],downloadHandler:l[20],$$slots:{default:[eh]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&8&&(s.chat=n[3]),o&4&&(s.shareEnabled=n[2]),o&32&&(s.shareHandler=n[19]),o&64&&(s.downloadHandler=n[20]),o&67108864&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function $d(l){let e,t,n,o,s,i;return n=new ns({props:{className:" size-5",strokeWidth:"0.5"}}),{c(){e=V("button"),t=V("div"),ne(n.$$.fragment),this.h()},l(r){e=z(r,"BUTTON",{class:!0,"aria-label":!0});var a=C(e);t=z(a,"DIV",{class:!0});var c=C(t);se(n.$$.fragment,c),c.forEach(_),a.forEach(_),this.h()},h(){m(t,"class","m-auto self-center"),m(e,"class","flex cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(e,"aria-label","Controls")},m(r,a){A(r,e,a),E(e,t),le(n,t,null),o=!0,s||(i=ke(e,"click",l[21]),s=!0)},p:ye,i(r){o||(S(n.$$.fragment,r),o=!0)},o(r){N(n.$$.fragment,r),o=!1},d(r){r&&_(e),oe(n),s=!1,i()}}}function eh(l){let e,t='<div class="m-auto self-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"></path></svg></div>';return{c(){e=V("button"),e.innerHTML=t,this.h()},l(n){e=z(n,"BUTTON",{class:!0,id:!0,"data-svelte-h":!0}),ft(e)!=="svelte-xd5mtd"&&(e.innerHTML=t),this.h()},h(){m(e,"class","flex cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(e,"id","chat-context-menu-button")},m(n,o){A(n,e,o)},p:ye,d(n){n&&_(e)}}}function pr(l){let e,t;return e=new Pt({props:{content:l[12].t("Controls"),$$slots:{default:[th]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&4096&&(s.content=n[12].t("Controls")),o&67117056&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function th(l){let e,t,n,o,s,i;return n=new ns({props:{className:" size-5",strokeWidth:"0.5"}}),{c(){e=V("button"),t=V("div"),ne(n.$$.fragment),this.h()},l(r){e=z(r,"BUTTON",{class:!0,"aria-label":!0});var a=C(e);t=z(a,"DIV",{class:!0});var c=C(t);se(n.$$.fragment,c),c.forEach(_),a.forEach(_),this.h()},h(){m(t,"class","m-auto self-center"),m(e,"class","flex cursor-pointer px-2 py-2 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(e,"aria-label","Controls")},m(r,a){A(r,e,a),E(e,t),le(n,t,null),o=!0,s||(i=ke(e,"click",l[22]),s=!0)},p:ye,i(r){o||(S(n.$$.fragment,r),o=!0)},o(r){N(n.$$.fragment,r),o=!1},d(r){r&&_(e),oe(n),s=!1,i()}}}function nh(l){let e,t,n,o,s,i,r;return n=new Cc({props:{className:" size-5",strokeWidth:"2"}}),{c(){e=V("button"),t=V("div"),ne(n.$$.fragment),this.h()},l(a){e=z(a,"BUTTON",{id:!0,class:!0,"aria-label":!0});var c=C(e);t=z(c,"DIV",{class:!0});var u=C(t);se(n.$$.fragment,u),u.forEach(_),c.forEach(_),this.h()},h(){m(t,"class","m-auto self-center"),m(e,"id","new-chat-button"),m(e,"class",o="flex "+(l[8]?"md:hidden":"")+" cursor-pointer px-2 py-2 rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(e,"aria-label","New Chat")},m(a,c){A(a,e,c),E(e,t),le(n,t,null),s=!0,i||(r=ke(e,"click",l[23]),i=!0)},p(a,c){(!s||c&256&&o!==(o="flex "+(a[8]?"md:hidden":"")+" cursor-pointer px-2 py-2 rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-850 transition"))&&m(e,"class",o)},i(a){s||(S(n.$$.fragment,a),s=!0)},o(a){N(n.$$.fragment,a),s=!1},d(a){a&&_(e),oe(n),i=!1,r()}}}function br(l){let e,t;return e=new iu({props:{className:"max-w-[200px]",role:l[11].role,$$slots:{default:[lh]},$$scope:{ctx:l}}}),e.$on("show",l[24]),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&2048&&(s.role=n[11].role),o&67110912&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function lh(l){let e,t,n,o;return{c(){e=V("button"),t=V("div"),n=V("img"),this.h()},l(s){e=z(s,"BUTTON",{class:!0,"aria-label":!0});var i=C(e);t=z(i,"DIV",{class:!0});var r=C(t);n=z(r,"IMG",{src:!0,class:!0,alt:!0,draggable:!0}),r.forEach(_),i.forEach(_),this.h()},h(){Qn(n.src,o=l[11].profile_image_url)||m(n,"src",o),m(n,"class","size-6 object-cover rounded-full"),m(n,"alt","User profile"),m(n,"draggable","false"),m(t,"class","self-center"),m(e,"class","select-none flex rounded-xl p-1.5 w-full hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(e,"aria-label","User Menu")},m(s,i){A(s,e,i),E(e,t),E(t,n)},p(s,i){i&2048&&!Qn(n.src,o=s[11].profile_image_url)&&m(n,"src",o)},d(s){s&&_(e)}}}function oh(l){var X,Q,W;let e,t,n,o,s,i,r,a,c,u,f,h,d,p,b,w,g,v,k,I,T,M,y,H,O,B,j;function Z(J){l[16](J)}let L={chatId:l[7]};l[5]!==void 0&&(L.show=l[5]),e=new Sc({props:L}),We.push(()=>Je(e,"show",Z)),h=new au({});let D=l[4]&&_r(l);const Y=[xd,Qd],P=[];function F(J,q){var ce,ge,re;return J[2]&&J[3]&&(J[3].id||J[9])?0:J[10]&&(J[11].role==="admin"||(re=(ge=(ce=J[11])==null?void 0:ce.permissions)==null?void 0:ge.chat)!=null&&re.controls)?1:-1}~(k=F(l))&&(I=P[k]=Y[k](l));let G=!l[10]&&(l[11].role==="admin"||((W=(Q=(X=l[11])==null?void 0:X.permissions)==null?void 0:Q.chat)==null?void 0:W.controls))&&pr(l);y=new Pt({props:{content:l[12].t("New Chat"),$$slots:{default:[nh]},$$scope:{ctx:l}}});let K=l[11]!==void 0&&br(l);return{c(){ne(e.$$.fragment),n=ee(),o=V("nav"),s=V("div"),i=ee(),r=V("div"),a=V("div"),c=V("div"),u=V("button"),f=V("div"),ne(h.$$.fragment),p=ee(),b=V("div"),D&&D.c(),g=ee(),v=V("div"),I&&I.c(),T=ee(),G&&G.c(),M=ee(),ne(y.$$.fragment),H=ee(),K&&K.c(),this.h()},l(J){se(e.$$.fragment,J),n=te(J),o=z(J,"NAV",{class:!0});var q=C(o);s=z(q,"DIV",{class:!0}),C(s).forEach(_),i=te(q),r=z(q,"DIV",{class:!0});var ce=C(r);a=z(ce,"DIV",{class:!0});var ge=C(a);c=z(ge,"DIV",{class:!0});var re=C(c);u=z(re,"BUTTON",{id:!0,class:!0,"aria-label":!0});var Pe=C(u);f=z(Pe,"DIV",{class:!0});var x=C(f);se(h.$$.fragment,x),x.forEach(_),Pe.forEach(_),re.forEach(_),p=te(ge),b=z(ge,"DIV",{class:!0});var ue=C(b);D&&D.l(ue),ue.forEach(_),g=te(ge),v=z(ge,"DIV",{class:!0});var Ee=C(v);I&&I.l(Ee),T=te(Ee),G&&G.l(Ee),M=te(Ee),se(y.$$.fragment,Ee),H=te(Ee),K&&K.l(Ee),Ee.forEach(_),ge.forEach(_),ce.forEach(_),q.forEach(_),this.h()},h(){m(s,"class","bg-gradient-to-b via-50% from-white via-white to-transparent dark:from-gray-900 dark:via-gray-900 dark:to-transparent pointer-events-none absolute inset-0 -bottom-7 z-[-1] blur"),m(f,"class","m-auto self-center"),m(u,"id","sidebar-toggle-button"),m(u,"class","cursor-pointer px-2 py-2 flex rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition"),m(u,"aria-label","Toggle Sidebar"),m(c,"class",d=(l[8]?"md:hidden":"")+" mr-1 self-start flex flex-none items-center text-gray-600 dark:text-gray-400"),m(b,"class",w="flex-1 overflow-hidden max-w-full py-0.5 "+(l[8]?"ml-1":"")),m(v,"class","self-start flex flex-none items-center text-gray-600 dark:text-gray-400"),m(a,"class","flex items-center w-full max-w-full"),m(r,"class","flex max-w-full w-full mx-auto px-1 pt-0.5 bg-transparent"),m(o,"class","sticky top-0 z-30 w-full px-1.5 py-1.5 -mb-8 flex items-center drag-region")},m(J,q){le(e,J,q),A(J,n,q),A(J,o,q),E(o,s),E(o,i),E(o,r),E(r,a),E(a,c),E(c,u),E(u,f),le(h,f,null),E(a,p),E(a,b),D&&D.m(b,null),E(a,g),E(a,v),~k&&P[k].m(v,null),E(v,T),G&&G.m(v,null),E(v,M),le(y,v,null),E(v,H),K&&K.m(v,null),O=!0,B||(j=ke(u,"click",l[17]),B=!0)},p(J,[q]){var Pe,x,ue;const ce={};q&128&&(ce.chatId=J[7]),!t&&q&32&&(t=!0,ce.show=J[5],qe(()=>t=!1)),e.$set(ce),(!O||q&256&&d!==(d=(J[8]?"md:hidden":"")+" mr-1 self-start flex flex-none items-center text-gray-600 dark:text-gray-400"))&&m(c,"class",d),J[4]?D?(D.p(J,q),q&16&&S(D,1)):(D=_r(J),D.c(),S(D,1),D.m(b,null)):D&&(He(),N(D,1,1,()=>{D=null}),Be()),(!O||q&256&&w!==(w="flex-1 overflow-hidden max-w-full py-0.5 "+(J[8]?"ml-1":"")))&&m(b,"class",w);let ge=k;k=F(J),k===ge?~k&&P[k].p(J,q):(I&&(He(),N(P[ge],1,1,()=>{P[ge]=null}),Be()),~k?(I=P[k],I?I.p(J,q):(I=P[k]=Y[k](J),I.c()),S(I,1),I.m(v,T)):I=null),!J[10]&&(J[11].role==="admin"||(ue=(x=(Pe=J[11])==null?void 0:Pe.permissions)==null?void 0:x.chat)!=null&&ue.controls)?G?(G.p(J,q),q&3072&&S(G,1)):(G=pr(J),G.c(),S(G,1),G.m(v,M)):G&&(He(),N(G,1,1,()=>{G=null}),Be());const re={};q&4096&&(re.content=J[12].t("New Chat")),q&67109122&&(re.$$scope={dirty:q,ctx:J}),y.$set(re),J[11]!==void 0?K?(K.p(J,q),q&2048&&S(K,1)):(K=br(J),K.c(),S(K,1),K.m(v,null)):K&&(He(),N(K,1,1,()=>{K=null}),Be())},i(J){O||(S(e.$$.fragment,J),S(h.$$.fragment,J),S(D),S(I),S(G),S(y.$$.fragment,J),S(K),O=!0)},o(J){N(e.$$.fragment,J),N(h.$$.fragment,J),N(D),N(I),N(G),N(y.$$.fragment,J),N(K),O=!1},d(J){J&&(_(n),_(o)),oe(e,J),oe(h),D&&D.d(),~k&&P[k].d(),G&&G.d(),oe(y),K&&K.d(),B=!1,j()}}}function sh(l,e,t){let n,o,s,i,r,a,c,u;ae(l,Ki,L=>t(25,n=L)),ae(l,cl,L=>t(7,o=L)),ae(l,Ko,L=>t(8,s=L)),ae(l,ko,L=>t(9,i=L)),ae(l,wo,L=>t(10,r=L)),ae(l,xn,L=>t(11,a=L)),ae(l,Ft,L=>t(13,u=L));const f=jt("i18n");ae(l,f,L=>t(12,c=L));let{initNewChat:h}=e,{title:d=n}=e,{shareEnabled:p=!1}=e,{chat:b}=e,{selectedModels:w}=e,{showModelSelector:g=!0}=e,v=!1,k=!1;function I(L){v=L,t(5,v)}const T=()=>{Ko.set(!s)};function M(L){w=L,t(0,w)}const y=()=>{t(5,v=!v)},H=()=>{t(6,k=!k)},O=async()=>{await Ft.set(!u)},B=async()=>{await Ft.set(!u)},j=()=>{h()},Z=L=>{L.detail==="archived-chat"&&xa.set(!0)};return l.$$set=L=>{"initNewChat"in L&&t(1,h=L.initNewChat),"title"in L&&t(15,d=L.title),"shareEnabled"in L&&t(2,p=L.shareEnabled),"chat"in L&&t(3,b=L.chat),"selectedModels"in L&&t(0,w=L.selectedModels),"showModelSelector"in L&&t(4,g=L.showModelSelector)},[w,h,p,b,g,v,k,o,s,i,r,a,c,u,f,d,I,T,M,y,H,O,B,j,Z]}class rh extends Re{constructor(e){super(),Ue(this,e,sh,oh,Fe,{initNewChat:1,title:15,shareEnabled:2,chat:3,selectedModels:0,showModelSelector:4})}}function Ot(l){if(typeof l=="string"||typeof l=="number")return""+l;let e="";if(Array.isArray(l))for(let t=0,n;t<l.length;t++)(n=Ot(l[t]))!==""&&(e+=(e&&" ")+n);else for(let t in l)l[t]&&(e+=(e&&" ")+t);return e}const Kl={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:l=>`Node type "${l}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:l=>`The old edge with id=${l} does not exist.`,error009:l=>`Marker type "${l}" doesn't exist.`,error008:(l,{id:e,sourceHandle:t,targetHandle:n})=>`Couldn't create edge for ${l} handle id: "${l==="source"?t:n}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:l=>`Edge type "${l}" not found. Using fallback type "default".`,error012:l=>`Node with id "${l}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(l="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${l}/dist/style.css' or base.css to make sure everything is working properly.`},uo=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var fl;(function(l){l.Strict="strict",l.Loose="loose"})(fl||(fl={}));var Yn;(function(l){l.Free="free",l.Vertical="vertical",l.Horizontal="horizontal"})(Yn||(Yn={}));var fo;(function(l){l.Partial="partial",l.Full="full"})(fo||(fo={}));const qo={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var El;(function(l){l.Bezier="default",l.Straight="straight",l.Step="step",l.SmoothStep="smoothstep",l.SimpleBezier="simplebezier"})(El||(El={}));var ho;(function(l){l.Arrow="arrow",l.ArrowClosed="arrowclosed"})(ho||(ho={}));var rt;(function(l){l.Left="left",l.Top="top",l.Right="right",l.Bottom="bottom"})(rt||(rt={}));const vr={[rt.Left]:rt.Right,[rt.Right]:rt.Left,[rt.Top]:rt.Bottom,[rt.Bottom]:rt.Top};function ih(l,e){if(!l&&!e)return!0;if(!l||!e||l.size!==e.size)return!1;if(!l.size&&!e.size)return!0;for(const t of l.keys())if(!e.has(t))return!1;return!0}function wr(l,e,t){if(!t)return;const n=[];l.forEach((o,s)=>{e!=null&&e.has(s)||n.push(o)}),n.length&&t(n)}function kr(l){return l===null?null:l?"valid":"invalid"}const ah=l=>"id"in l&&"source"in l&&"target"in l,ch=l=>"id"in l&&"position"in l&&!("source"in l)&&!("target"in l),ls=l=>"id"in l&&"internals"in l&&!("source"in l)&&!("target"in l),Co=(l,e=[0,0])=>{const{width:t,height:n}=Vl(l),o=l.origin??e,s=t*o[0],i=n*o[1];return{x:l.position.x-s,y:l.position.y-i}},uh=(l,e={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(l.length===0)return{x:0,y:0,width:0,height:0};const t=l.reduce((n,o)=>{const s=typeof o=="string";let i=!e.nodeLookup&&!s?o:void 0;e.nodeLookup&&(i=s?e.nodeLookup.get(o):ls(o)?o:e.nodeLookup.get(o.id));const r=i?mo(i,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Mo(n,r)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return To(t)},Do=(l,e={})=>{if(l.size===0)return{x:0,y:0,width:0,height:0};let t={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return l.forEach(n=>{if(e.filter===void 0||e.filter(n)){const o=mo(n);t=Mo(t,o)}}),To(t)},la=(l,e,[t,n,o]=[0,0,1],s=!1,i=!1)=>{const r={...Zl(e,[t,n,o]),width:e.width/o,height:e.height/o},a=[];for(const c of l.values()){const{measured:u,selectable:f=!0,hidden:h=!1}=c;if(i&&!f||h)continue;const d=u.width??c.width??c.initialWidth??null,p=u.height??c.height??c.initialHeight??null,b=Ul(r,Ml(c)),w=(d??0)*(p??0),g=s&&b>0;(!c.internals.handleBounds||g||b>=w||c.dragging)&&a.push(c)}return a},Jo=(l,e)=>{const t=new Set;return l.forEach(n=>{t.add(n.id)}),e.filter(n=>t.has(n.source)||t.has(n.target))};function yr(l,e){const t=new Map,n=e!=null&&e.nodes?new Set(e.nodes.map(o=>o.id)):null;return l.forEach(o=>{o.measured.width&&o.measured.height&&((e==null?void 0:e.includeHiddenNodes)||!o.hidden)&&(!n||n.has(o.id))&&t.set(o.id,o)}),t}async function Er({nodes:l,width:e,height:t,panZoom:n,minZoom:o,maxZoom:s},i){if(l.size===0)return Promise.resolve(!1);const r=Do(l),a=ss(r,e,t,(i==null?void 0:i.minZoom)??o,(i==null?void 0:i.maxZoom)??s,(i==null?void 0:i.padding)??.1);return await n.setViewport(a,{duration:i==null?void 0:i.duration}),Promise.resolve(!0)}function fh({nodeId:l,nextPosition:e,nodeLookup:t,nodeOrigin:n=[0,0],nodeExtent:o,onError:s}){const i=t.get(l),r=i.parentId?t.get(i.parentId):void 0,{x:a,y:c}=r?r.internals.positionAbsolute:{x:0,y:0},u=i.origin??n;let f=o;if(i.extent==="parent"&&!i.expandParent)if(!r)s==null||s("005",Kl.error005());else{const d=r.measured.width,p=r.measured.height;d&&p&&(f=[[a,c],[a+d,c+p]])}else r&&Wl(i.extent)&&(f=[[i.extent[0][0]+a,i.extent[0][1]+c],[i.extent[1][0]+a,i.extent[1][1]+c]]);const h=Wl(f)?Dl(e,f,i.measured):e;return{position:{x:h.x-a+i.measured.width*u[0],y:h.y-c+i.measured.height*u[1]},positionAbsolute:h}}async function oa({nodesToRemove:l=[],edgesToRemove:e=[],nodes:t,edges:n,onBeforeDelete:o}){const s=new Set(l.map(h=>h.id)),i=[];for(const h of t){if(h.deletable===!1)continue;const d=s.has(h.id),p=!d&&h.parentId&&i.find(b=>b.id===h.parentId);(d||p)&&i.push(h)}const r=new Set(e.map(h=>h.id)),a=n.filter(h=>h.deletable!==!1),u=Jo(i,a);for(const h of a)r.has(h.id)&&!u.find(p=>p.id===h.id)&&u.push(h);if(!o)return{edges:u,nodes:i};const f=await o({nodes:i,edges:u});return typeof f=="boolean"?f?{edges:u,nodes:i}:{edges:[],nodes:[]}:f}const Cl=(l,e=0,t=1)=>Math.min(Math.max(l,e),t),Dl=(l={x:0,y:0},e,t)=>({x:Cl(l.x,e[0][0],e[1][0]-((t==null?void 0:t.width)??0)),y:Cl(l.y,e[0][1],e[1][1]-((t==null?void 0:t.height)??0))});function sa(l,e,t){const{width:n,height:o}=Vl(t),{x:s,y:i}=t.internals.positionAbsolute;return Dl(l,[[s,i],[s+n,i+o]],e)}const Ir=(l,e,t)=>l<e?Cl(Math.abs(l-e),1,e)/e:l>t?-Cl(Math.abs(l-t),1,e)/e:0,ra=(l,e,t=15,n=40)=>{const o=Ir(l.x,n,e.width-n)*t,s=Ir(l.y,n,e.height-n)*t;return[o,s]},Mo=(l,e)=>({x:Math.min(l.x,e.x),y:Math.min(l.y,e.y),x2:Math.max(l.x2,e.x2),y2:Math.max(l.y2,e.y2)}),Qo=({x:l,y:e,width:t,height:n})=>({x:l,y:e,x2:l+t,y2:e+n}),To=({x:l,y:e,x2:t,y2:n})=>({x:l,y:e,width:t-l,height:n-e}),Ml=(l,e=[0,0])=>{var o,s;const{x:t,y:n}=ls(l)?l.internals.positionAbsolute:Co(l,e);return{x:t,y:n,width:((o=l.measured)==null?void 0:o.width)??l.width??l.initialWidth??0,height:((s=l.measured)==null?void 0:s.height)??l.height??l.initialHeight??0}},mo=(l,e=[0,0])=>{var o,s;const{x:t,y:n}=ls(l)?l.internals.positionAbsolute:Co(l,e);return{x:t,y:n,x2:t+(((o=l.measured)==null?void 0:o.width)??l.width??l.initialWidth??0),y2:n+(((s=l.measured)==null?void 0:s.height)??l.height??l.initialHeight??0)}},dh=(l,e)=>To(Mo(Qo(l),Qo(e))),Ul=(l,e)=>{const t=Math.max(0,Math.min(l.x+l.width,e.x+e.width)-Math.max(l.x,e.x)),n=Math.max(0,Math.min(l.y+l.height,e.y+e.height)-Math.max(l.y,e.y));return Math.ceil(t*n)},Sr=l=>Hn(l.width)&&Hn(l.height)&&Hn(l.x)&&Hn(l.y),Hn=l=>!isNaN(l)&&isFinite(l),hh=(l,e)=>{},os=(l,e=[1,1])=>({x:e[0]*Math.round(l.x/e[0]),y:e[1]*Math.round(l.y/e[1])}),Zl=({x:l,y:e},[t,n,o],s=!1,i=[1,1])=>{const r={x:(l-t)/o,y:(e-n)/o};return s?os(r,i):r},ia=({x:l,y:e},[t,n,o])=>({x:l*o+t,y:e*o+n}),ss=(l,e,t,n,o,s)=>{const i=e/(l.width*(1+s)),r=t/(l.height*(1+s)),a=Math.min(i,r),c=Cl(a,n,o),u=l.x+l.width/2,f=l.y+l.height/2,h=e/2-u*c,d=t/2-f*c;return{x:h,y:d,zoom:c}},go=()=>{var l;return typeof navigator<"u"&&((l=navigator==null?void 0:navigator.userAgent)==null?void 0:l.indexOf("Mac"))>=0};function Wl(l){return l!==void 0&&l!=="parent"}function Vl(l){var e,t;return{width:((e=l.measured)==null?void 0:e.width)??l.width??l.initialWidth??0,height:((t=l.measured)==null?void 0:t.height)??l.height??l.initialHeight??0}}function Cr(l){var e,t;return(((e=l.measured)==null?void 0:e.width)??l.width??l.initialWidth)!==void 0&&(((t=l.measured)==null?void 0:t.height)??l.height??l.initialHeight)!==void 0}function mh(l,e={width:0,height:0},t,n,o){let s=t;const i={...l};for(;s;){const r=n.get(s);if(s=r==null?void 0:r.parentId,r){const a=r.origin||o;i.x+=r.internals.positionAbsolute.x-(e.width??0)*a[0],i.y+=r.internals.positionAbsolute.y-(e.height??0)*a[1]}}return i}function Uo(l,{snapGrid:e=[0,0],snapToGrid:t=!1,transform:n}){const{x:o,y:s}=qn(l),i=Zl({x:o,y:s},n),{x:r,y:a}=t?os(i,e):i;return{xSnapped:r,ySnapped:a,...i}}const aa=l=>({width:l.offsetWidth,height:l.offsetHeight}),gh=l=>{var e;return((e=l.getRootNode)==null?void 0:e.call(l))||(window==null?void 0:window.document)},_h=["INPUT","SELECT","TEXTAREA"];function ph(l){var n,o;const e=((o=(n=l.composedPath)==null?void 0:n.call(l))==null?void 0:o[0])||l.target;return _h.includes(e==null?void 0:e.nodeName)||(e==null?void 0:e.hasAttribute("contenteditable"))||!!(e!=null&&e.closest(".nokey"))}const ca=l=>"clientX"in l,qn=(l,e)=>{var s,i;const t=ca(l),n=t?l.clientX:(s=l.touches)==null?void 0:s[0].clientX,o=t?l.clientY:(i=l.touches)==null?void 0:i[0].clientY;return{x:n-((e==null?void 0:e.left)??0),y:o-((e==null?void 0:e.top)??0)}},Dr=(l,e,t,n,o)=>{const s=e.querySelectorAll(`.${l}`);return!s||!s.length?null:Array.from(s).map(i=>{const r=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:l,nodeId:o,position:i.getAttribute("data-handlepos"),x:(r.left-t.left)/n,y:(r.top-t.top)/n,...aa(i)}})};function bh({sourceX:l,sourceY:e,targetX:t,targetY:n,sourceControlX:o,sourceControlY:s,targetControlX:i,targetControlY:r}){const a=l*.125+o*.375+i*.375+t*.125,c=e*.125+s*.375+r*.375+n*.125,u=Math.abs(a-l),f=Math.abs(c-e);return[a,c,u,f]}function lo(l,e){return l>=0?.5*l:e*25*Math.sqrt(-l)}function Mr({pos:l,x1:e,y1:t,x2:n,y2:o,c:s}){switch(l){case rt.Left:return[e-lo(e-n,s),t];case rt.Right:return[e+lo(n-e,s),t];case rt.Top:return[e,t-lo(t-o,s)];case rt.Bottom:return[e,t+lo(o-t,s)]}}function ua({sourceX:l,sourceY:e,sourcePosition:t=rt.Bottom,targetX:n,targetY:o,targetPosition:s=rt.Top,curvature:i=.25}){const[r,a]=Mr({pos:t,x1:l,y1:e,x2:n,y2:o,c:i}),[c,u]=Mr({pos:s,x1:n,y1:o,x2:l,y2:e,c:i}),[f,h,d,p]=bh({sourceX:l,sourceY:e,targetX:n,targetY:o,sourceControlX:r,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${l},${e} C${r},${a} ${c},${u} ${n},${o}`,f,h,d,p]}function fa({sourceX:l,sourceY:e,targetX:t,targetY:n}){const o=Math.abs(t-l)/2,s=t<l?t+o:t-o,i=Math.abs(n-e)/2,r=n<e?n+i:n-i;return[s,r,o,i]}function vh({sourceNode:l,targetNode:e,selected:t=!1,zIndex:n=0,elevateOnSelect:o=!1}){if(!o)return n;const s=t||e.selected||l.selected,i=Math.max(l.internals.z||0,e.internals.z||0,1e3);return n+(s?i:0)}function wh({sourceNode:l,targetNode:e,width:t,height:n,transform:o}){const s=Mo(mo(l),mo(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const i={x:-o[0]/o[2],y:-o[1]/o[2],width:t/o[2],height:n/o[2]};return Ul(i,To(s))>0}const kh=({source:l,sourceHandle:e,target:t,targetHandle:n})=>`xy-edge__${l}${e||""}-${t}${n||""}`,yh=(l,e)=>e.some(t=>t.source===l.source&&t.target===l.target&&(t.sourceHandle===l.sourceHandle||!t.sourceHandle&&!l.sourceHandle)&&(t.targetHandle===l.targetHandle||!t.targetHandle&&!l.targetHandle)),Eh=(l,e)=>{if(!l.source||!l.target)return e;let t;return ah(l)?t={...l}:t={...l,id:kh(l)},yh(t,e)?e:(t.sourceHandle===null&&delete t.sourceHandle,t.targetHandle===null&&delete t.targetHandle,e.concat(t))};function da({sourceX:l,sourceY:e,targetX:t,targetY:n}){const[o,s,i,r]=fa({sourceX:l,sourceY:e,targetX:t,targetY:n});return[`M ${l},${e}L ${t},${n}`,o,s,i,r]}const Tr={[rt.Left]:{x:-1,y:0},[rt.Right]:{x:1,y:0},[rt.Top]:{x:0,y:-1},[rt.Bottom]:{x:0,y:1}},Ih=({source:l,sourcePosition:e=rt.Bottom,target:t})=>e===rt.Left||e===rt.Right?l.x<t.x?{x:1,y:0}:{x:-1,y:0}:l.y<t.y?{x:0,y:1}:{x:0,y:-1},Vr=(l,e)=>Math.sqrt(Math.pow(e.x-l.x,2)+Math.pow(e.y-l.y,2));function Sh({source:l,sourcePosition:e=rt.Bottom,target:t,targetPosition:n=rt.Top,center:o,offset:s}){const i=Tr[e],r=Tr[n],a={x:l.x+i.x*s,y:l.y+i.y*s},c={x:t.x+r.x*s,y:t.y+r.y*s},u=Ih({source:a,sourcePosition:e,target:c}),f=u.x!==0?"x":"y",h=u[f];let d=[],p,b;const w={x:0,y:0},g={x:0,y:0},[v,k,I,T]=fa({sourceX:l.x,sourceY:l.y,targetX:t.x,targetY:t.y});if(i[f]*r[f]===-1){p=o.x??v,b=o.y??k;const y=[{x:p,y:a.y},{x:p,y:c.y}],H=[{x:a.x,y:b},{x:c.x,y:b}];i[f]===h?d=f==="x"?y:H:d=f==="x"?H:y}else{const y=[{x:a.x,y:c.y}],H=[{x:c.x,y:a.y}];if(f==="x"?d=i.x===h?H:y:d=i.y===h?y:H,e===n){const L=Math.abs(l[f]-t[f]);if(L<=s){const D=Math.min(s-1,s-L);i[f]===h?w[f]=(a[f]>l[f]?-1:1)*D:g[f]=(c[f]>t[f]?-1:1)*D}}if(e!==n){const L=f==="x"?"y":"x",D=i[f]===r[L],Y=a[L]>c[L],P=a[L]<c[L];(i[f]===1&&(!D&&Y||D&&P)||i[f]!==1&&(!D&&P||D&&Y))&&(d=f==="x"?y:H)}const O={x:a.x+w.x,y:a.y+w.y},B={x:c.x+g.x,y:c.y+g.y},j=Math.max(Math.abs(O.x-d[0].x),Math.abs(B.x-d[0].x)),Z=Math.max(Math.abs(O.y-d[0].y),Math.abs(B.y-d[0].y));j>=Z?(p=(O.x+B.x)/2,b=d[0].y):(p=d[0].x,b=(O.y+B.y)/2)}return[[l,{x:a.x+w.x,y:a.y+w.y},...d,{x:c.x+g.x,y:c.y+g.y},t],p,b,I,T]}function Ch(l,e,t,n){const o=Math.min(Vr(l,e)/2,Vr(e,t)/2,n),{x:s,y:i}=e;if(l.x===s&&s===t.x||l.y===i&&i===t.y)return`L${s} ${i}`;if(l.y===i){const c=l.x<t.x?-1:1,u=l.y<t.y?1:-1;return`L ${s+o*c},${i}Q ${s},${i} ${s},${i+o*u}`}const r=l.x<t.x?1:-1,a=l.y<t.y?-1:1;return`L ${s},${i+o*a}Q ${s},${i} ${s+o*r},${i}`}function _o({sourceX:l,sourceY:e,sourcePosition:t=rt.Bottom,targetX:n,targetY:o,targetPosition:s=rt.Top,borderRadius:i=5,centerX:r,centerY:a,offset:c=20}){const[u,f,h,d,p]=Sh({source:{x:l,y:e},sourcePosition:t,target:{x:n,y:o},targetPosition:s,center:{x:r,y:a},offset:c});return[u.reduce((w,g,v)=>{let k="";return v>0&&v<u.length-1?k=Ch(u[v-1],g,u[v+1],i):k=`${v===0?"M":"L"}${g.x} ${g.y}`,w+=k,w},""),f,h,d,p]}function zr(l){var e;return l&&!!(l.internals.handleBounds||(e=l.handles)!=null&&e.length)&&!!(l.measured.width||l.width||l.initialWidth)}function Dh(l){var f;const{sourceNode:e,targetNode:t}=l;if(!zr(e)||!zr(t))return null;const n=e.internals.handleBounds||Nr(e.handles),o=t.internals.handleBounds||Nr(t.handles),s=Pr((n==null?void 0:n.source)??[],l.sourceHandle),i=Pr(l.connectionMode===fl.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),l.targetHandle);if(!s||!i)return(f=l.onError)==null||f.call(l,"008",Kl.error008(s?"target":"source",{id:l.id,sourceHandle:l.sourceHandle,targetHandle:l.targetHandle})),null;const r=(s==null?void 0:s.position)||rt.Bottom,a=(i==null?void 0:i.position)||rt.Top,c=Fl(e,s,r),u=Fl(t,i,a);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y,sourcePosition:r,targetPosition:a}}function Nr(l){if(!l)return null;const e=[],t=[];for(const n of l)n.width=n.width??1,n.height=n.height??1,n.type==="source"?e.push(n):n.type==="target"&&t.push(n);return{source:e,target:t}}function Fl(l,e,t=rt.Left,n=!1){const o=((e==null?void 0:e.x)??0)+l.internals.positionAbsolute.x,s=((e==null?void 0:e.y)??0)+l.internals.positionAbsolute.y,{width:i,height:r}=e??Vl(l);if(n)return{x:o+i/2,y:s+r/2};switch((e==null?void 0:e.position)??t){case rt.Top:return{x:o+i/2,y:s};case rt.Right:return{x:o+i,y:s+r/2};case rt.Bottom:return{x:o+i/2,y:s+r};case rt.Left:return{x:o,y:s+r/2}}}function Pr(l,e){return l&&(e?l.find(t=>t.id===e):l[0])||null}function xo(l,e){return l?typeof l=="string"?l:`${e?`${e}__`:""}${Object.keys(l).sort().map(n=>`${n}=${l[n]}`).join("&")}`:""}function Mh(l,{id:e,defaultColor:t,defaultMarkerStart:n,defaultMarkerEnd:o}){const s=new Set;return l.reduce((i,r)=>([r.markerStart||n,r.markerEnd||o].forEach(a=>{if(a&&typeof a=="object"){const c=xo(a,e);s.has(c)||(i.push({id:c,color:a.color||t,...a}),s.add(c))}}),i),[]).sort((i,r)=>i.id.localeCompare(r.id))}const ha={nodeOrigin:[0,0],nodeExtent:uo,elevateNodesOnSelect:!0,defaults:{}},Th={...ha,checkEquality:!0};function ma(l,e){const t={...l};for(const n in e)e[n]!==void 0&&(t[n]=e[n]);return t}function ga(l,e,t,n){var r,a;const o=ma(Th,n),s=new Map(e),i=o!=null&&o.elevateNodesOnSelect?1e3:0;e.clear(),t.clear();for(const c of l){let u=s.get(c.id);if(o.checkEquality&&c===(u==null?void 0:u.internals.userNode))e.set(c.id,u);else{const f=Co(c,o.nodeOrigin),h=Wl(c.extent)?c.extent:o.nodeExtent,d=Dl(f,h,Vl(c));u={...o.defaults,...c,measured:{width:(r=c.measured)==null?void 0:r.width,height:(a=c.measured)==null?void 0:a.height},internals:{positionAbsolute:d,handleBounds:c.measured?u==null?void 0:u.internals.handleBounds:void 0,z:pa(c,i),userNode:c}},e.set(c.id,u)}c.parentId&&_a(u,e,t,n)}}function Vh(l,e){if(!l.parentId)return;const t=e.get(l.parentId);t?t.set(l.id,l):e.set(l.parentId,new Map([[l.id,l]]))}function _a(l,e,t,n){const{elevateNodesOnSelect:o,nodeOrigin:s,nodeExtent:i}=ma(ha,n),r=l.parentId,a=e.get(r);if(!a){console.warn(`Parent node ${r} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Vh(l,t);const c=o?1e3:0,{x:u,y:f,z:h}=zh(l,a,s,i,c),{positionAbsolute:d}=l.internals,p=u!==d.x||f!==d.y;(p||h!==l.internals.z)&&(l.internals={...l.internals,positionAbsolute:p?{x:u,y:f}:d,z:h})}function pa(l,e){return(Hn(l.zIndex)?l.zIndex:0)+(l.selected?e:0)}function zh(l,e,t,n,o){const{x:s,y:i}=e.internals.positionAbsolute,r=Vl(l),a=Co(l,t),c=Wl(l.extent)?Dl(a,l.extent,r):a;let u=Dl({x:s+c.x,y:i+c.y},n,r);l.extent==="parent"&&(u=sa(u,r,e));const f=pa(l,o),h=e.internals.z??0;return{x:u.x,y:u.y,z:h>f?h:f}}function Nh(l,e,t,n=[0,0]){var i;const o=[],s=new Map;for(const r of l){const a=e.get(r.parentId);if(!a)continue;const c=((i=s.get(r.parentId))==null?void 0:i.expandedRect)??Ml(a),u=dh(c,r.rect);s.set(r.parentId,{expandedRect:u,parent:a})}return s.size>0&&s.forEach(({expandedRect:r,parent:a},c)=>{var k;const u=a.internals.positionAbsolute,f=Vl(a),h=a.origin??n,d=r.x<u.x?Math.round(Math.abs(u.x-r.x)):0,p=r.y<u.y?Math.round(Math.abs(u.y-r.y)):0,b=Math.max(f.width,Math.round(r.width)),w=Math.max(f.height,Math.round(r.height)),g=(b-f.width)*h[0],v=(w-f.height)*h[1];(d>0||p>0||g||v)&&(o.push({id:c,type:"position",position:{x:a.position.x-d+g,y:a.position.y-p+v}}),(k=t.get(c))==null||k.forEach(I=>{l.some(T=>T.id===I.id)||o.push({id:I.id,type:"position",position:{x:I.position.x+d,y:I.position.y+p}})})),(f.width<r.width||f.height<r.height||d||p)&&o.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:b+(d?h[0]*d-g:0),height:w+(p?h[1]*p-v:0)}})}),o}function Ph(l,e,t,n,o,s){const i=n==null?void 0:n.querySelector(".xyflow__viewport");let r=!1;if(!i)return{changes:[],updatedInternals:r};const a=[],c=window.getComputedStyle(i),{m22:u}=new window.DOMMatrixReadOnly(c.transform),f=[];for(const h of l.values()){const d=e.get(h.id);if(d)if(d.hidden)d.internals={...d.internals,handleBounds:void 0},r=!0;else{const p=aa(h.nodeElement),b=d.measured.width!==p.width||d.measured.height!==p.height;if(!!(p.width&&p.height&&(b||!d.internals.handleBounds||h.force))){const g=h.nodeElement.getBoundingClientRect(),v=Wl(d.extent)?d.extent:s;let{positionAbsolute:k}=d.internals;d.parentId&&d.extent==="parent"?k=sa(k,p,e.get(d.parentId)):v&&(k=Dl(k,v,p)),d.measured=p,d.internals={...d.internals,positionAbsolute:k,handleBounds:{source:Dr("source",h.nodeElement,g,u,d.id),target:Dr("target",h.nodeElement,g,u,d.id)}},d.parentId&&_a(d,e,t,{nodeOrigin:o}),r=!0,b&&(a.push({id:d.id,type:"dimensions",dimensions:p}),d.expandParent&&d.parentId&&f.push({id:d.id,parentId:d.parentId,rect:Ml(d,o)}))}}}if(f.length>0){const h=Nh(f,e,t,o);a.push(...h)}return{changes:a,updatedInternals:r}}async function Oh({delta:l,panZoom:e,transform:t,translateExtent:n,width:o,height:s}){if(!e||!l.x&&!l.y)return Promise.resolve(!1);const i=await e.setViewportConstrained({x:t[0]+l.x,y:t[1]+l.y,zoom:t[2]},[[0,0],[o,s]],n),r=!!i&&(i.x!==t[0]||i.y!==t[1]||i.k!==t[2]);return Promise.resolve(r)}function ba(l,e,t){l.clear(),e.clear();for(const n of t){const{source:o,target:s,sourceHandle:i=null,targetHandle:r=null}=n,a=`${o}-source-${i}`,c=`${s}-target-${r}`,u=l.get(a)||new Map,f=l.get(c)||new Map,h={edgeId:n.id,source:o,target:s,sourceHandle:i,targetHandle:r};e.set(n.id,n),l.set(a,u.set(`${s}-${r}`,h)),l.set(c,f.set(`${o}-${i}`,h))}}function va(l,e){if(!l.parentId)return!1;const t=e.get(l.parentId);return t?t.selected?!0:va(t,e):!1}function Or(l,e,t){let n=l;do{if(n!=null&&n.matches(e))return!0;if(n===t)return!1;n=n.parentElement}while(n);return!1}function Hh(l,e,t,n){const o=new Map;for(const[s,i]of l)if((i.selected||i.id===n)&&(!i.parentId||!va(i,l))&&(i.draggable||e&&typeof i.draggable>"u")){const r=l.get(s);r&&o.set(s,{id:s,position:r.position||{x:0,y:0},distance:{x:t.x-r.internals.positionAbsolute.x,y:t.y-r.internals.positionAbsolute.y},extent:r.extent,parentId:r.parentId,origin:r.origin,expandParent:r.expandParent,internals:{positionAbsolute:r.internals.positionAbsolute||{x:0,y:0}},measured:{width:r.measured.width??0,height:r.measured.height??0}})}return o}function Wo({nodeId:l,dragItems:e,nodeLookup:t,dragging:n=!0}){var i,r;const o=[];for(const[a,c]of e){const u=(i=t.get(a))==null?void 0:i.internals.userNode;u&&o.push({...u,position:c.position,dragging:n})}if(!l)return[o[0],o];const s=t.get(l).internals.userNode;return[{...s,position:((r=e.get(l))==null?void 0:r.position)||s.position,dragging:n},o]}function Bh({onNodeMouseDown:l,getStoreItems:e,onDragStart:t,onDrag:n,onDragStop:o}){let s={x:null,y:null},i=0,r=new Map,a=!1,c={x:0,y:0},u=null,f=!1,h=null,d=!1;function p({noDragClassName:w,handleSelector:g,domNode:v,isSelectable:k,nodeId:I,nodeClickDistance:T=0}){h=On(v);function M({x:B,y:j},Z){const{nodeLookup:L,nodeExtent:D,snapGrid:Y,snapToGrid:P,nodeOrigin:F,onNodeDrag:G,onSelectionDrag:K,onError:X,updateNodePositions:Q}=e();s={x:B,y:j};let W=!1,J={x:0,y:0,x2:0,y2:0};if(r.size>1&&D){const q=Do(r);J=Qo(q)}for(const[q,ce]of r){let ge={x:B-ce.distance.x,y:j-ce.distance.y};P&&(ge=os(ge,Y));let re=[[D[0][0],D[0][1]],[D[1][0],D[1][1]]];if(r.size>1&&D&&!ce.extent){const{positionAbsolute:ue}=ce.internals,Ee=ue.x-J.x+D[0][0],Xe=ue.x+ce.measured.width-J.x2+D[1][0],Ke=ue.y-J.y+D[0][1],fe=ue.y+ce.measured.height-J.y2+D[1][1];re=[[Ee,Ke],[Xe,fe]]}const{position:Pe,positionAbsolute:x}=fh({nodeId:q,nextPosition:ge,nodeLookup:L,nodeExtent:re,nodeOrigin:F,onError:X});W=W||ce.position.x!==Pe.x||ce.position.y!==Pe.y,ce.position=Pe,ce.internals.positionAbsolute=x}if(W&&(Q(r,!0),Z&&(n||G||!I&&K))){const[q,ce]=Wo({nodeId:I,dragItems:r,nodeLookup:L});n==null||n(Z,r,q,ce),G==null||G(Z,q,ce),I||K==null||K(Z,ce)}}async function y(){if(!u)return;const{transform:B,panBy:j,autoPanSpeed:Z}=e(),[L,D]=ra(c,u,Z);(L!==0||D!==0)&&(s.x=(s.x??0)-L/B[2],s.y=(s.y??0)-D/B[2],await j({x:L,y:D})&&M(s,null)),i=requestAnimationFrame(y)}function H(B){var W;const{nodeLookup:j,multiSelectionActive:Z,nodesDraggable:L,transform:D,snapGrid:Y,snapToGrid:P,selectNodesOnDrag:F,onNodeDragStart:G,onSelectionDragStart:K,unselectNodesAndEdges:X}=e();f=!0,(!F||!k)&&!Z&&I&&((W=j.get(I))!=null&&W.selected||X()),k&&F&&I&&(l==null||l(I));const Q=Uo(B.sourceEvent,{transform:D,snapGrid:Y,snapToGrid:P});if(s=Q,r=Hh(j,L,Q,I),r.size>0&&(t||G||!I&&K)){const[J,q]=Wo({nodeId:I,dragItems:r,nodeLookup:j});t==null||t(B.sourceEvent,r,J,q),G==null||G(B.sourceEvent,J,q),I||K==null||K(B.sourceEvent,q)}}const O=Cu().clickDistance(T).on("start",B=>{const{domNode:j,nodeDragThreshold:Z,transform:L,snapGrid:D,snapToGrid:Y}=e();d=!1,Z===0&&H(B),s=Uo(B.sourceEvent,{transform:L,snapGrid:D,snapToGrid:Y}),u=(j==null?void 0:j.getBoundingClientRect())||null,c=qn(B.sourceEvent,u)}).on("drag",B=>{const{autoPanOnNodeDrag:j,transform:Z,snapGrid:L,snapToGrid:D,nodeDragThreshold:Y}=e(),P=Uo(B.sourceEvent,{transform:Z,snapGrid:L,snapToGrid:D});if(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1&&(d=!0),!d){if(!a&&j&&f&&(a=!0,y()),!f){const F=P.xSnapped-(s.x??0),G=P.ySnapped-(s.y??0);Math.sqrt(F*F+G*G)>Y&&H(B)}(s.x!==P.xSnapped||s.y!==P.ySnapped)&&r&&f&&(c=qn(B.sourceEvent,u),M(P,B.sourceEvent))}}).on("end",B=>{if(!(!f||d)&&(a=!1,f=!1,cancelAnimationFrame(i),r.size>0)){const{nodeLookup:j,updateNodePositions:Z,onNodeDragStop:L,onSelectionDragStop:D}=e();if(Z(r,!1),o||L||!I&&D){const[Y,P]=Wo({nodeId:I,dragItems:r,nodeLookup:j,dragging:!1});o==null||o(B.sourceEvent,r,Y,P),L==null||L(B.sourceEvent,Y,P),I||D==null||D(B.sourceEvent,P)}}}).filter(B=>{const j=B.target;return!B.button&&(!w||!Or(j,`.${w}`,v))&&(!g||Or(j,g,v))});h.call(O)}function b(){h==null||h.on(".drag",null)}return{update:p,destroy:b}}function Ah(l,e,t){const n=[],o={x:l.x-t,y:l.y-t,width:t*2,height:t*2};for(const s of e.values())Ul(o,Ml(s))>0&&n.push(s);return n}const Lh=250;function Rh(l,e,t,n){var r,a;let o=[],s=1/0;const i=Ah(l,t,e+Lh);for(const c of i){const u=[...((r=c.internals.handleBounds)==null?void 0:r.source)??[],...((a=c.internals.handleBounds)==null?void 0:a.target)??[]];for(const f of u){if(n.nodeId===f.nodeId&&n.type===f.type&&n.id===f.id)continue;const{x:h,y:d}=Fl(c,f,f.position,!0),p=Math.sqrt(Math.pow(h-l.x,2)+Math.pow(d-l.y,2));p>e||(p<s?(o=[{...f,x:h,y:d}],s=p):p===s&&o.push({...f,x:h,y:d}))}}if(!o.length)return null;if(o.length>1){const c=n.type==="source"?"target":"source";return o.find(u=>u.type===c)??o[0]}return o[0]}function wa(l,e,t,n,o,s=!1){var c,u,f;const i=n.get(l);if(!i)return null;const r=o==="strict"?(c=i.internals.handleBounds)==null?void 0:c[e]:[...((u=i.internals.handleBounds)==null?void 0:u.source)??[],...((f=i.internals.handleBounds)==null?void 0:f.target)??[]],a=(t?r==null?void 0:r.find(h=>h.id===t):r==null?void 0:r[0])??null;return a&&s?{...a,...Fl(i,a,a.position,!0)}:a}function ka(l,e){return l||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function Uh(l,e){let t=null;return e?t=!0:l&&!e&&(t=!1),t}const ya=()=>!0;function Wh(l,{connectionMode:e,connectionRadius:t,handleId:n,nodeId:o,edgeUpdaterType:s,isTarget:i,domNode:r,nodeLookup:a,lib:c,autoPanOnConnect:u,flowId:f,panBy:h,cancelConnection:d,onConnectStart:p,onConnect:b,onConnectEnd:w,isValidConnection:g=ya,onReconnectEnd:v,updateConnection:k,getTransform:I,getFromHandle:T,autoPanSpeed:M}){const y=gh(l.target);let H=0,O;const{x:B,y:j}=qn(l),Z=y==null?void 0:y.elementFromPoint(B,j),L=ka(s,Z),D=r==null?void 0:r.getBoundingClientRect();if(!D||!L)return;const Y=wa(o,L,n,a,e);if(!Y)return;let P=qn(l,D),F=!1,G=null,K=!1,X=null;function Q(){if(!u||!D)return;const[x,ue]=ra(P,D,M);h({x,y:ue}),H=requestAnimationFrame(Q)}const W={...Y,nodeId:o,type:L,position:Y.position},J=a.get(o),ce={inProgress:!0,isValid:null,from:Fl(J,W,rt.Left,!0),fromHandle:W,fromPosition:W.position,fromNode:J,to:P,toHandle:null,toPosition:vr[W.position],toNode:null};k(ce);let ge=ce;p==null||p(l,{nodeId:o,handleId:n,handleType:L});function re(x){if(!T()||!W){Pe(x);return}const ue=I();P=qn(x,D),O=Rh(Zl(P,ue,!1,[1,1]),t,a,W),F||(Q(),F=!0);const Ee=Ea(x,{handle:O,connectionMode:e,fromNodeId:o,fromHandleId:n,fromType:i?"target":"source",isValidConnection:g,doc:y,lib:c,flowId:f,nodeLookup:a});X=Ee.handleDomNode,G=Ee.connection,K=Uh(!!O,Ee.isValid);const Xe={...ge,isValid:K,to:O&&K?ia({x:O.x,y:O.y},ue):P,toHandle:Ee.toHandle,toPosition:K&&Ee.toHandle?Ee.toHandle.position:vr[W.position],toNode:Ee.toHandle?a.get(Ee.toHandle.nodeId):null};K&&O&&ge.toHandle&&Xe.toHandle&&ge.toHandle.type===Xe.toHandle.type&&ge.toHandle.nodeId===Xe.toHandle.nodeId&&ge.toHandle.id===Xe.toHandle.id&&ge.to.x===Xe.to.x&&ge.to.y===Xe.to.y||(k(Xe),ge=Xe)}function Pe(x){(O||X)&&G&&K&&(b==null||b(G));const{inProgress:ue,...Ee}=ge,Xe={...Ee,toPosition:ge.toHandle?ge.toPosition:null};w==null||w(x,Xe),s&&(v==null||v(x,Xe)),d(),cancelAnimationFrame(H),F=!1,K=!1,G=null,X=null,y.removeEventListener("mousemove",re),y.removeEventListener("mouseup",Pe),y.removeEventListener("touchmove",re),y.removeEventListener("touchend",Pe)}y.addEventListener("mousemove",re),y.addEventListener("mouseup",Pe),y.addEventListener("touchmove",re),y.addEventListener("touchend",Pe)}function Ea(l,{handle:e,connectionMode:t,fromNodeId:n,fromHandleId:o,fromType:s,doc:i,lib:r,flowId:a,isValidConnection:c=ya,nodeLookup:u}){const f=s==="target",h=e?i.querySelector(`.${r}-flow__handle[data-id="${a}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`):null,{x:d,y:p}=qn(l),b=i.elementFromPoint(d,p),w=b!=null&&b.classList.contains(`${r}-flow__handle`)?b:h,g={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const v=ka(void 0,w),k=w.getAttribute("data-nodeid"),I=w.getAttribute("data-handleid"),T=w.classList.contains("connectable"),M=w.classList.contains("connectableend");if(!k||!v)return g;const y={source:f?k:n,sourceHandle:f?I:o,target:f?n:k,targetHandle:f?o:I};g.connection=y;const O=T&&M&&(t===fl.Strict?f&&v==="source"||!f&&v==="target":k!==n||I!==o);g.isValid=O&&c(y),g.toHandle=wa(k,v,I,u,t,!1)}return g}const Fh={onPointerDown:Wh,isValid:Ea},jh=(l,e)=>l.x!==e.x||l.y!==e.y||l.zoom!==e.k,Vo=l=>({x:l.x,y:l.y,zoom:l.k}),Fo=({x:l,y:e,zoom:t})=>ts.translate(l,e).scale(t),wl=(l,e)=>l.target.closest(`.${e}`),Ia=(l,e)=>e===2&&Array.isArray(l)&&l.includes(2),jo=(l,e=0,t=()=>{})=>{const n=typeof e=="number"&&e>0;return n||t(),n?l.transition().duration(e).on("end",t):l},Sa=l=>{const e=l.ctrlKey&&go()?10:1;return-l.deltaY*(l.deltaMode===1?.05:l.deltaMode?1:.002)*e};function Yh({zoomPanValues:l,noWheelClassName:e,d3Selection:t,d3Zoom:n,panOnScrollMode:o,panOnScrollSpeed:s,zoomOnPinch:i,onPanZoomStart:r,onPanZoom:a,onPanZoomEnd:c}){return u=>{if(wl(u,e))return!1;u.preventDefault(),u.stopImmediatePropagation();const f=t.property("__zoom").k||1;if(u.ctrlKey&&i){const w=Fn(u),g=Sa(u),v=f*Math.pow(2,g);n.scaleTo(t,v,w,u);return}const h=u.deltaMode===1?20:1;let d=o===Yn.Vertical?0:u.deltaX*h,p=o===Yn.Horizontal?0:u.deltaY*h;!go()&&u.shiftKey&&o!==Yn.Vertical&&(d=u.deltaY*h,p=0),n.translateBy(t,-(d/f)*s,-(p/f)*s,{internal:!0});const b=Vo(t.property("__zoom"));clearTimeout(l.panScrollTimeout),l.isPanScrolling||(l.isPanScrolling=!0,r==null||r(u,b)),l.isPanScrolling&&(a==null||a(u,b),l.panScrollTimeout=setTimeout(()=>{c==null||c(u,b),l.isPanScrolling=!1},150))}}function Xh({noWheelClassName:l,preventScrolling:e,d3ZoomHandler:t}){return function(n,o){if(!e&&n.type==="wheel"&&!n.ctrlKey||wl(n,l))return null;n.preventDefault(),t.call(this,n,o)}}function Kh({zoomPanValues:l,onDraggingChange:e,onPanZoomStart:t}){return n=>{var s,i,r;if((s=n.sourceEvent)!=null&&s.internal)return;const o=Vo(n.transform);l.mouseButton=((i=n.sourceEvent)==null?void 0:i.button)||0,l.isZoomingOrPanning=!0,l.prevViewport=o,((r=n.sourceEvent)==null?void 0:r.type)==="mousedown"&&e(!0),t&&(t==null||t(n.sourceEvent,o))}}function Zh({zoomPanValues:l,panOnDrag:e,onPaneContextMenu:t,onTransformChange:n,onPanZoom:o}){return s=>{var i,r;l.usedRightMouseButton=!!(t&&Ia(e,l.mouseButton??0)),(i=s.sourceEvent)!=null&&i.sync||n([s.transform.x,s.transform.y,s.transform.k]),o&&!((r=s.sourceEvent)!=null&&r.internal)&&(o==null||o(s.sourceEvent,Vo(s.transform)))}}function Gh({zoomPanValues:l,panOnDrag:e,panOnScroll:t,onDraggingChange:n,onPanZoomEnd:o,onPaneContextMenu:s}){return i=>{var r;if(!((r=i.sourceEvent)!=null&&r.internal)&&(l.isZoomingOrPanning=!1,s&&Ia(e,l.mouseButton??0)&&!l.usedRightMouseButton&&i.sourceEvent&&s(i.sourceEvent),l.usedRightMouseButton=!1,n(!1),o&&jh(l.prevViewport,i.transform))){const a=Vo(i.transform);l.prevViewport=a,clearTimeout(l.timerId),l.timerId=setTimeout(()=>{o==null||o(i.sourceEvent,a)},t?150:0)}}}function qh({zoomActivationKeyPressed:l,zoomOnScroll:e,zoomOnPinch:t,panOnDrag:n,panOnScroll:o,zoomOnDoubleClick:s,userSelectionActive:i,noWheelClassName:r,noPanClassName:a,lib:c}){return u=>{var p;const f=l||e,h=t&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(wl(u,`${c}-flow__node`)||wl(u,`${c}-flow__edge`)))return!0;if(!n&&!f&&!o&&!s&&!t||i||wl(u,r)&&u.type==="wheel"||wl(u,a)&&(u.type!=="wheel"||o&&u.type==="wheel"&&!l)||!t&&u.ctrlKey&&u.type==="wheel")return!1;if(!t&&u.type==="touchstart"&&((p=u.touches)==null?void 0:p.length)>1)return u.preventDefault(),!1;if(!f&&!o&&!h&&u.type==="wheel"||!n&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(n)&&!n.includes(u.button)&&u.type==="mousedown")return!1;const d=Array.isArray(n)&&n.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&d}}function Jh({domNode:l,minZoom:e,maxZoom:t,paneClickDistance:n,translateExtent:o,viewport:s,onPanZoom:i,onPanZoomStart:r,onPanZoomEnd:a,onDraggingChange:c}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=l.getBoundingClientRect(),h=Au().clickDistance(!Hn(n)||n<0?0:n).scaleExtent([e,t]).translateExtent(o),d=On(l).call(h);k({x:s.x,y:s.y,zoom:Cl(s.zoom,e,t)},[[0,0],[f.width,f.height]],o);const p=d.on("wheel.zoom"),b=d.on("dblclick.zoom");h.wheelDelta(Sa);function w(Z,L){return d?new Promise(D=>{h==null||h.transform(jo(d,L==null?void 0:L.duration,()=>D(!0)),Z)}):Promise.resolve(!1)}function g({noWheelClassName:Z,noPanClassName:L,onPaneContextMenu:D,userSelectionActive:Y,panOnScroll:P,panOnDrag:F,panOnScrollMode:G,panOnScrollSpeed:K,preventScrolling:X,zoomOnPinch:Q,zoomOnScroll:W,zoomOnDoubleClick:J,zoomActivationKeyPressed:q,lib:ce,onTransformChange:ge}){Y&&!u.isZoomingOrPanning&&v();const Pe=P&&!q&&!Y?Yh({zoomPanValues:u,noWheelClassName:Z,d3Selection:d,d3Zoom:h,panOnScrollMode:G,panOnScrollSpeed:K,zoomOnPinch:Q,onPanZoomStart:r,onPanZoom:i,onPanZoomEnd:a}):Xh({noWheelClassName:Z,preventScrolling:X,d3ZoomHandler:p});if(d.on("wheel.zoom",Pe,{passive:!1}),!Y){const ue=Kh({zoomPanValues:u,onDraggingChange:c,onPanZoomStart:r});h.on("start",ue);const Ee=Zh({zoomPanValues:u,panOnDrag:F,onPaneContextMenu:!!D,onPanZoom:i,onTransformChange:ge});h.on("zoom",Ee);const Xe=Gh({zoomPanValues:u,panOnDrag:F,panOnScroll:P,onPaneContextMenu:D,onPanZoomEnd:a,onDraggingChange:c});h.on("end",Xe)}const x=qh({zoomActivationKeyPressed:q,panOnDrag:F,zoomOnScroll:W,panOnScroll:P,zoomOnDoubleClick:J,zoomOnPinch:Q,userSelectionActive:Y,noPanClassName:L,noWheelClassName:Z,lib:ce});h.filter(x),J?d.on("dblclick.zoom",b):d.on("dblclick.zoom",null)}function v(){h.on("zoom",null)}async function k(Z,L,D){const Y=Fo(Z),P=h==null?void 0:h.constrain()(Y,L,D);return P&&await w(P),new Promise(F=>F(P))}async function I(Z,L){const D=Fo(Z);return await w(D,L),new Promise(Y=>Y(D))}function T(Z){if(d){const L=Fo(Z),D=d.property("__zoom");(D.k!==Z.zoom||D.x!==Z.x||D.y!==Z.y)&&(h==null||h.transform(d,L,null,{sync:!0}))}}function M(){const Z=d?Qc(d.node()):{x:0,y:0,k:1};return{x:Z.x,y:Z.y,zoom:Z.k}}function y(Z,L){return d?new Promise(D=>{h==null||h.scaleTo(jo(d,L==null?void 0:L.duration,()=>D(!0)),Z)}):Promise.resolve(!1)}function H(Z,L){return d?new Promise(D=>{h==null||h.scaleBy(jo(d,L==null?void 0:L.duration,()=>D(!0)),Z)}):Promise.resolve(!1)}function O(Z){h==null||h.scaleExtent(Z)}function B(Z){h==null||h.translateExtent(Z)}function j(Z){const L=!Hn(Z)||Z<0?0:Z;h==null||h.clickDistance(L)}return{update:g,destroy:v,setViewport:I,setViewportConstrained:k,getViewport:M,scaleTo:y,scaleBy:H,setScaleExtent:O,setTranslateExtent:B,syncViewport:T,setClickDistance:j}}var Hr;(function(l){l.Line="line",l.Handle="handle"})(Hr||(Hr={}));function Qh(l){let e,t,n,o,s,i;const r=l[45].default,a=Qt(r,l,l[44],null);return{c(){e=V("div"),a&&a.c(),this.h()},l(c){e=z(c,"DIV",{"data-handleid":!0,"data-nodeid":!0,"data-handlepos":!0,"data-id":!0,class:!0,style:!0,role:!0,tabindex:!0});var u=C(e);a&&a.l(u),u.forEach(_),this.h()},h(){m(e,"data-handleid",l[6]),m(e,"data-nodeid",l[14]),m(e,"data-handlepos",l[2]),m(e,"data-id",t=l[13]+"-"+l[14]+"-"+(l[0]||null)+"-"+l[1]),m(e,"class",n=Ot(["svelte-flow__handle",`svelte-flow__handle-${l[2]}`,"nodrag","nopan",l[2],l[4]])),m(e,"style",l[3]),m(e,"role","button"),m(e,"tabindex","-1"),st(e,"valid",l[7]),st(e,"connectingto",l[5]),st(e,"connectingfrom",l[9]),st(e,"source",!l[11]),st(e,"target",l[11]),st(e,"connectablestart",l[12]),st(e,"connectableend",l[12]),st(e,"connectable",l[12]),st(e,"connectionindicator",l[12]&&(!l[10]||l[8]))},m(c,u){A(c,e,u),a&&a.m(e,null),o=!0,s||(i=[ke(e,"mousedown",l[32]),ke(e,"touchstart",l[32])],s=!0)},p(c,u){a&&a.p&&(!o||u[1]&8192)&&xt(a,r,c,c[44],o?en(r,c[44],u,null):$t(c[44]),null),(!o||u[0]&64)&&m(e,"data-handleid",c[6]),(!o||u[0]&4)&&m(e,"data-handlepos",c[2]),(!o||u[0]&8195&&t!==(t=c[13]+"-"+c[14]+"-"+(c[0]||null)+"-"+c[1]))&&m(e,"data-id",t),(!o||u[0]&20&&n!==(n=Ot(["svelte-flow__handle",`svelte-flow__handle-${c[2]}`,"nodrag","nopan",c[2],c[4]])))&&m(e,"class",n),(!o||u[0]&8)&&m(e,"style",c[3]),(!o||u[0]&148)&&st(e,"valid",c[7]),(!o||u[0]&52)&&st(e,"connectingto",c[5]),(!o||u[0]&532)&&st(e,"connectingfrom",c[9]),(!o||u[0]&2068)&&st(e,"source",!c[11]),(!o||u[0]&2068)&&st(e,"target",c[11]),(!o||u[0]&4116)&&st(e,"connectablestart",c[12]),(!o||u[0]&4116)&&st(e,"connectableend",c[12]),(!o||u[0]&4116)&&st(e,"connectable",c[12]),(!o||u[0]&5396)&&st(e,"connectionindicator",c[12]&&(!c[10]||c[8]))},i(c){o||(S(a,c),o=!0)},o(c){N(a,c),o=!1},d(c){c&&_(e),a&&a.d(c),s=!1,on(i)}}}function xh(l,e,t){let n,o,s,i,r,a,c,u,f,h,d,p,b,w,g,v,k,I,T,M,y,H,O,B,j,{$$slots:Z={},$$scope:L}=e,{id:D=void 0}=e,{type:Y="source"}=e,{position:P=rt.Top}=e,{style:F=void 0}=e,{isValidConnection:G=void 0}=e,{onconnect:K=void 0}=e,{ondisconnect:X=void 0}=e,{isConnectable:Q=void 0}=e,{class:W=void 0}=e;const J=jt("svelteflow__node_id"),q=jt("svelteflow__node_connectable");ae(l,q,De=>t(43,j=De));const ce=Xt(),{connectionMode:ge,domNode:re,nodeLookup:Pe,connectionRadius:x,viewport:ue,isValidConnection:Ee,lib:Xe,addEdge:Ke,onedgecreate:fe,panBy:lt,cancelConnection:it,updateConnection:zt,autoPanOnConnect:Ct,edges:Ht,connectionLookup:wt,onconnect:Ut,onconnectstart:pe,onconnectend:Ye,flowId:ot,connection:he}=ce;ae(l,ge,De=>t(40,h=De)),ae(l,re,De=>t(55,O=De)),ae(l,Pe,De=>t(54,H=De)),ae(l,x,De=>t(56,B=De)),ae(l,ue,De=>t(46,b=De)),ae(l,Ee,De=>t(51,I=De)),ae(l,Xe,De=>t(53,y=De)),ae(l,fe,De=>t(50,k=De)),ae(l,Ct,De=>t(52,M=De)),ae(l,Ht,De=>t(42,p=De)),ae(l,wt,De=>t(41,d=De)),ae(l,Ut,De=>t(49,v=De)),ae(l,pe,De=>t(48,g=De)),ae(l,Ye,De=>t(47,w=De)),ae(l,ot,De=>t(13,T=De)),ae(l,he,De=>t(39,f=De));function kt(De){const Nt=ca(De);(Nt&&De.button===0||!Nt)&&Fh.onPointerDown(De,{handleId:s,nodeId:J,isTarget:n,connectionRadius:B,domNode:O,nodeLookup:H,connectionMode:h,lib:y,autoPanOnConnect:M,flowId:T,isValidConnection:G??I,updateConnection:zt,cancelConnection:it,panBy:lt,onConnect:mt=>{const de=k?k(mt):mt;de&&(Ke(de),v==null||v(mt))},onConnectStart:(mt,de)=>{g==null||g(mt,{nodeId:de.nodeId,handleId:de.handleId,handleType:de.handleType})},onConnectEnd:(mt,de)=>{w==null||w(mt,de)},getTransform:()=>[b.x,b.y,b.zoom],getFromHandle:()=>f.fromHandle})}let ht=null,bt;return l.$$set=De=>{"id"in De&&t(0,D=De.id),"type"in De&&t(1,Y=De.type),"position"in De&&t(2,P=De.position),"style"in De&&t(3,F=De.style),"isValidConnection"in De&&t(33,G=De.isValidConnection),"onconnect"in De&&t(34,K=De.onconnect),"ondisconnect"in De&&t(35,X=De.ondisconnect),"isConnectable"in De&&t(36,Q=De.isConnectable),"class"in De&&t(4,W=De.class),"$$scope"in De&&t(44,L=De.$$scope)},l.$$.update=()=>{var De,Nt,mt,de,Ce,ze,Ge,It,yt;if(l.$$.dirty[0]&2&&t(11,n=Y==="target"),l.$$.dirty[1]&4128&&t(12,o=Q!==void 0?Q:j),l.$$.dirty[0]&1&&t(6,s=D||null),l.$$.dirty[0]&3|l.$$.dirty[1]&3096&&(K||X)&&t(38,bt=d.get(`${J}-${Y}-${D||null}`)),l.$$.dirty[1]&216){if(ht&&!ih(bt,ht)){const Dt=bt??new Map;wr(ht,Dt,X),wr(Dt,ht,K)}t(37,ht=bt??new Map)}l.$$.dirty[1]&256&&t(10,i=!!f.fromHandle),l.$$.dirty[0]&66|l.$$.dirty[1]&256&&t(9,r=((De=f.fromHandle)==null?void 0:De.nodeId)===J&&((Nt=f.fromHandle)==null?void 0:Nt.type)===Y&&((mt=f.fromHandle)==null?void 0:mt.id)===s),l.$$.dirty[0]&66|l.$$.dirty[1]&256&&t(5,a=((de=f.toHandle)==null?void 0:de.nodeId)===J&&((Ce=f.toHandle)==null?void 0:Ce.type)===Y&&((ze=f.toHandle)==null?void 0:ze.id)===s),l.$$.dirty[0]&66|l.$$.dirty[1]&768&&t(8,c=h===fl.Strict?((Ge=f.fromHandle)==null?void 0:Ge.type)!==Y:J!==((It=f.fromHandle)==null?void 0:It.nodeId)||s!==((yt=f.fromHandle)==null?void 0:yt.id)),l.$$.dirty[0]&32|l.$$.dirty[1]&256&&t(7,u=a&&f.isValid)},[D,Y,P,F,W,a,s,u,c,r,i,n,o,T,J,q,ge,re,Pe,x,ue,Ee,Xe,fe,Ct,Ht,wt,Ut,pe,Ye,ot,he,kt,G,K,X,Q,ht,bt,f,h,d,p,j,L,Z]}class Tl extends Re{constructor(e){super(),Ue(this,e,xh,Qh,Fe,{id:0,type:1,position:2,style:3,isValidConnection:33,onconnect:34,ondisconnect:35,isConnectable:36,class:4},null,[-1,-1])}}function $h(l){var a;let e,t,n=((a=l[0])==null?void 0:a.label)+"",o,s,i,r;return e=new Tl({props:{type:"target",position:l[1]??rt.Top}}),i=new Tl({props:{type:"source",position:l[2]??rt.Bottom}}),{c(){ne(e.$$.fragment),t=ee(),o=Ie(n),s=ee(),ne(i.$$.fragment)},l(c){se(e.$$.fragment,c),t=te(c),o=Se(c,n),s=te(c),se(i.$$.fragment,c)},m(c,u){le(e,c,u),A(c,t,u),A(c,o,u),A(c,s,u),le(i,c,u),r=!0},p(c,[u]){var d;const f={};u&2&&(f.position=c[1]??rt.Top),e.$set(f),(!r||u&1)&&n!==(n=((d=c[0])==null?void 0:d.label)+"")&&Me(o,n);const h={};u&4&&(h.position=c[2]??rt.Bottom),i.$set(h)},i(c){r||(S(e.$$.fragment,c),S(i.$$.fragment,c),r=!0)},o(c){N(e.$$.fragment,c),N(i.$$.fragment,c),r=!1},d(c){c&&(_(t),_(o),_(s)),oe(e,c),oe(i,c)}}}function em(l,e,t){const n=["data","targetPosition","sourcePosition"];Yt(e,n);let{data:o={label:"Node"}}=e,{targetPosition:s=void 0}=e,{sourcePosition:i=void 0}=e;return l.$$set=r=>{e=Et(Et({},e),Bn(r)),t(3,Yt(e,n)),"data"in r&&t(0,o=r.data),"targetPosition"in r&&t(1,s=r.targetPosition),"sourcePosition"in r&&t(2,i=r.sourcePosition)},[o,s,i]}class Ca extends Re{constructor(e){super(),Ue(this,e,em,$h,Fe,{data:0,targetPosition:1,sourcePosition:2})}}function tm(l){var i;let e=((i=l[0])==null?void 0:i.label)+"",t,n,o,s;return o=new Tl({props:{type:"source",position:l[1]??rt.Bottom}}),{c(){t=Ie(e),n=ee(),ne(o.$$.fragment)},l(r){t=Se(r,e),n=te(r),se(o.$$.fragment,r)},m(r,a){A(r,t,a),A(r,n,a),le(o,r,a),s=!0},p(r,[a]){var u;(!s||a&1)&&e!==(e=((u=r[0])==null?void 0:u.label)+"")&&Me(t,e);const c={};a&2&&(c.position=r[1]??rt.Bottom),o.$set(c)},i(r){s||(S(o.$$.fragment,r),s=!0)},o(r){N(o.$$.fragment,r),s=!1},d(r){r&&(_(t),_(n)),oe(o,r)}}}function nm(l,e,t){const n=["data","sourcePosition"];Yt(e,n);let{data:o={label:"Node"}}=e,{sourcePosition:s=void 0}=e;return l.$$set=i=>{e=Et(Et({},e),Bn(i)),t(2,Yt(e,n)),"data"in i&&t(0,o=i.data),"sourcePosition"in i&&t(1,s=i.sourcePosition)},[o,s]}class lm extends Re{constructor(e){super(),Ue(this,e,nm,tm,Fe,{data:0,sourcePosition:1})}}function om(l){var i;let e=((i=l[0])==null?void 0:i.label)+"",t,n,o,s;return o=new Tl({props:{type:"target",position:l[1]??rt.Top}}),{c(){t=Ie(e),n=ee(),ne(o.$$.fragment)},l(r){t=Se(r,e),n=te(r),se(o.$$.fragment,r)},m(r,a){A(r,t,a),A(r,n,a),le(o,r,a),s=!0},p(r,[a]){var u;(!s||a&1)&&e!==(e=((u=r[0])==null?void 0:u.label)+"")&&Me(t,e);const c={};a&2&&(c.position=r[1]??rt.Top),o.$set(c)},i(r){s||(S(o.$$.fragment,r),s=!0)},o(r){N(o.$$.fragment,r),s=!1},d(r){r&&(_(t),_(n)),oe(o,r)}}}function sm(l,e,t){const n=["data","targetPosition"];Yt(e,n);let{data:o={label:"Node"}}=e,{targetPosition:s=void 0}=e;return l.$$set=i=>{e=Et(Et({},e),Bn(i)),t(2,Yt(e,n)),"data"in i&&t(0,o=i.data),"targetPosition"in i&&t(1,s=i.targetPosition)},[o,s]}class rm extends Re{constructor(e){super(),Ue(this,e,sm,om,Fe,{data:0,targetPosition:1})}}function im(l,e,t){const n=[];return Yt(e,n),l.$$set=o=>{e=Et(Et({},e),Bn(o)),t(0,Yt(e,n))},[]}class am extends Re{constructor(e){super(),Ue(this,e,im,null,Fe,{})}}function Br(l,e,t){if(!e)return;const n=t?e.querySelector(t):e;n&&n.appendChild(l)}function cm(l,{target:e,domNode:t}){return Br(l,t,e),{async update({target:n,domNode:o}){Br(l,o,n)},destroy(){l.parentNode&&l.parentNode.removeChild(l)}}}function um(l){let e,t,n,o,s;const i=l[3].default,r=Qt(i,l,l[2],null);return{c(){e=V("div"),r&&r.c()},l(a){e=z(a,"DIV",{});var c=C(e);r&&r.l(c),c.forEach(_)},m(a,c){A(a,e,c),r&&r.m(e,null),n=!0,o||(s=vn(t=cm.call(null,e,{target:".svelte-flow__edgelabel-renderer",domNode:l[0]})),o=!0)},p(a,[c]){r&&r.p&&(!n||c&4)&&xt(r,i,a,a[2],n?en(i,a[2],c,null):$t(a[2]),null),t&&ln(t.update)&&c&1&&t.update.call(null,{target:".svelte-flow__edgelabel-renderer",domNode:a[0]})},i(a){n||(S(r,a),n=!0)},o(a){N(r,a),n=!1},d(a){a&&_(e),r&&r.d(a),o=!1,s()}}}function fm(l,e,t){let n,{$$slots:o={},$$scope:s}=e;const{domNode:i}=Xt();return ae(l,i,r=>t(0,n=r)),l.$$set=r=>{"$$scope"in r&&t(2,s=r.$$scope)},[n,i,s,o]}class dm extends Re{constructor(e){super(),Ue(this,e,fm,um,Fe,{})}}function Da(){const{edgeLookup:l,selectionRect:e,selectionRectMode:t,multiselectionKeyPressed:n,addSelectedEdges:o,unselectNodesAndEdges:s,elementsSelectable:i}=Xt();return r=>{const a=me(l).get(r);if(!a){console.warn("012",Kl.error012(r));return}(a.selectable||me(i)&&typeof a.selectable>"u")&&(e.set(null),t.set(null),a.selected?a.selected&&me(n)&&s({nodes:[],edges:[a]}):o([r]))}}function hm(l){let e,t,n=`translate(-50%, -50%) translate(${l[1]}px,${l[2]}px)`,o,s,i;const r=l[5].default,a=Qt(r,l,l[7],null);return{c(){e=V("div"),a&&a.c(),this.h()},l(c){e=z(c,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var u=C(e);a&&a.l(u),u.forEach(_),this.h()},h(){m(e,"class","svelte-flow__edge-label"),m(e,"style",t="pointer-events: all;"+l[0]),m(e,"role","button"),m(e,"tabindex","-1"),et(e,"transform",n)},m(c,u){A(c,e,u),a&&a.m(e,null),o=!0,s||(i=[ke(e,"keyup",gm),ke(e,"click",l[6])],s=!0)},p(c,u){a&&a.p&&(!o||u&128)&&xt(a,r,c,c[7],o?en(r,c[7],u,null):$t(c[7]),null),(!o||u&1&&t!==(t="pointer-events: all;"+c[0]))&&m(e,"style",t);const f=u&1;(u&7&&n!==(n=`translate(-50%, -50%) translate(${c[1]}px,${c[2]}px)`)||f)&&et(e,"transform",n)},i(c){o||(S(a,c),o=!0)},o(c){N(a,c),o=!1},d(c){c&&_(e),a&&a.d(c),s=!1,on(i)}}}function mm(l){let e,t;return e=new dm({props:{$$slots:{default:[hm]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,[o]){const s={};o&135&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}const gm=()=>{};function _m(l,e,t){let{$$slots:n={},$$scope:o}=e,{style:s=void 0}=e,{x:i=void 0}=e,{y:r=void 0}=e;const a=Da(),c=jt("svelteflow__edge_id"),u=()=>{c&&a(c)};return l.$$set=f=>{"style"in f&&t(0,s=f.style),"x"in f&&t(1,i=f.x),"y"in f&&t(2,r=f.y),"$$scope"in f&&t(7,o=f.$$scope)},[s,i,r,a,c,n,u,o]}class pm extends Re{constructor(e){super(),Ue(this,e,_m,mm,Fe,{style:0,x:1,y:2})}}function bm(l){let e;return{c(){e=Te("path"),this.h()},l(t){e=Ve(t,"path",{d:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,class:!0}),C(e).forEach(_),this.h()},h(){m(e,"d",l[1]),m(e,"stroke-opacity",0),m(e,"stroke-width",l[10]),m(e,"fill","none"),m(e,"class","svelte-flow__edge-interaction")},m(t,n){A(t,e,n)},p(t,n){n&2&&m(e,"d",t[1])},d(t){t&&_(e)}}}function Ar(l){let e,t;return e=new pm({props:{x:l[3],y:l[4],style:l[5],$$slots:{default:[vm]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&8&&(s.x=n[3]),o&16&&(s.y=n[4]),o&32&&(s.style=n[5]),o&4100&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function vm(l){let e;return{c(){e=Ie(l[2])},l(t){e=Se(t,l[2])},m(t,n){A(t,e,n)},p(t,n){n&4&&Me(e,t[2])},d(t){t&&_(e)}}}function wm(l){let e,t,n,o,s,i,r=l[10]&&bm(l),a=l[2]&&Ar(l);return{c(){e=Te("path"),n=ee(),r&&r.c(),o=ee(),a&&a.c(),s=Ae(),this.h()},l(c){e=Ve(c,"path",{id:!0,d:!0,class:!0,"marker-start":!0,"marker-end":!0,fill:!0,style:!0}),C(e).forEach(_),n=te(c),r&&r.l(c),o=te(c),a&&a.l(c),s=Ae(),this.h()},h(){m(e,"id",l[0]),m(e,"d",l[1]),m(e,"class",t=Ot(["svelte-flow__edge-path",l[9]])),m(e,"marker-start",l[6]),m(e,"marker-end",l[7]),m(e,"fill","none"),m(e,"style",l[8])},m(c,u){A(c,e,u),A(c,n,u),r&&r.m(c,u),A(c,o,u),a&&a.m(c,u),A(c,s,u),i=!0},p(c,[u]){(!i||u&1)&&m(e,"id",c[0]),(!i||u&2)&&m(e,"d",c[1]),(!i||u&512&&t!==(t=Ot(["svelte-flow__edge-path",c[9]])))&&m(e,"class",t),(!i||u&64)&&m(e,"marker-start",c[6]),(!i||u&128)&&m(e,"marker-end",c[7]),(!i||u&256)&&m(e,"style",c[8]),c[10]&&r.p(c,u),c[2]?a?(a.p(c,u),u&4&&S(a,1)):(a=Ar(c),a.c(),S(a,1),a.m(s.parentNode,s)):a&&(He(),N(a,1,1,()=>{a=null}),Be())},i(c){i||(S(a),i=!0)},o(c){N(a),i=!1},d(c){c&&(_(e),_(n),_(o),_(s)),r&&r.d(c),a&&a.d(c)}}}function km(l,e,t){let{id:n=void 0}=e,{path:o}=e,{label:s=void 0}=e,{labelX:i=void 0}=e,{labelY:r=void 0}=e,{labelStyle:a=void 0}=e,{markerStart:c=void 0}=e,{markerEnd:u=void 0}=e,{style:f=void 0}=e,{interactionWidth:h=20}=e,{class:d=void 0}=e,p=h===void 0?20:h;return l.$$set=b=>{"id"in b&&t(0,n=b.id),"path"in b&&t(1,o=b.path),"label"in b&&t(2,s=b.label),"labelX"in b&&t(3,i=b.labelX),"labelY"in b&&t(4,r=b.labelY),"labelStyle"in b&&t(5,a=b.labelStyle),"markerStart"in b&&t(6,c=b.markerStart),"markerEnd"in b&&t(7,u=b.markerEnd),"style"in b&&t(8,f=b.style),"interactionWidth"in b&&t(11,h=b.interactionWidth),"class"in b&&t(9,d=b.class)},[n,o,s,i,r,a,c,u,f,d,p,h]}class zo extends Re{constructor(e){super(),Ue(this,e,km,wm,Fe,{id:0,path:1,label:2,labelX:3,labelY:4,labelStyle:5,markerStart:6,markerEnd:7,style:8,interactionWidth:11,class:9})}}function ym(l){let e,t;return e=new zo({props:{path:l[8],labelX:l[7],labelY:l[6],label:l[0],labelStyle:l[1],markerStart:l[3],markerEnd:l[4],interactionWidth:l[5],style:l[2]}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,[o]){const s={};o&256&&(s.path=n[8]),o&128&&(s.labelX=n[7]),o&64&&(s.labelY=n[6]),o&1&&(s.label=n[0]),o&2&&(s.labelStyle=n[1]),o&8&&(s.markerStart=n[3]),o&16&&(s.markerEnd=n[4]),o&32&&(s.interactionWidth=n[5]),o&4&&(s.style=n[2]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function Em(l,e,t){let n,o,s;const i=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Yt(e,i);let{label:r=void 0}=e,{labelStyle:a=void 0}=e,{style:c=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{interactionWidth:h=void 0}=e,{sourceX:d}=e,{sourceY:p}=e,{sourcePosition:b}=e,{targetX:w}=e,{targetY:g}=e,{targetPosition:v}=e;return l.$$set=k=>{e=Et(Et({},e),Bn(k)),t(15,Yt(e,i)),"label"in k&&t(0,r=k.label),"labelStyle"in k&&t(1,a=k.labelStyle),"style"in k&&t(2,c=k.style),"markerStart"in k&&t(3,u=k.markerStart),"markerEnd"in k&&t(4,f=k.markerEnd),"interactionWidth"in k&&t(5,h=k.interactionWidth),"sourceX"in k&&t(9,d=k.sourceX),"sourceY"in k&&t(10,p=k.sourceY),"sourcePosition"in k&&t(11,b=k.sourcePosition),"targetX"in k&&t(12,w=k.targetX),"targetY"in k&&t(13,g=k.targetY),"targetPosition"in k&&t(14,v=k.targetPosition)},l.$$.update=()=>{l.$$.dirty&32256&&t(8,[n,o,s]=ua({sourceX:d,sourceY:p,targetX:w,targetY:g,sourcePosition:b,targetPosition:v}),n,(t(7,o),t(9,d),t(10,p),t(12,w),t(13,g),t(11,b),t(14,v)),(t(6,s),t(9,d),t(10,p),t(12,w),t(13,g),t(11,b),t(14,v)))},[r,a,c,u,f,h,s,o,n,d,p,b,w,g,v]}class Ma extends Re{constructor(e){super(),Ue(this,e,Em,ym,Fe,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function Im(l){let e,t;return e=new zo({props:{path:l[8],labelX:l[7],labelY:l[6],label:l[0],labelStyle:l[1],markerStart:l[3],markerEnd:l[4],interactionWidth:l[5],style:l[2]}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,[o]){const s={};o&256&&(s.path=n[8]),o&128&&(s.labelX=n[7]),o&64&&(s.labelY=n[6]),o&1&&(s.label=n[0]),o&2&&(s.labelStyle=n[1]),o&8&&(s.markerStart=n[3]),o&16&&(s.markerEnd=n[4]),o&32&&(s.interactionWidth=n[5]),o&4&&(s.style=n[2]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function Sm(l,e,t){let n,o,s;const i=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Yt(e,i);let{label:r=void 0}=e,{labelStyle:a=void 0}=e,{style:c=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{interactionWidth:h=void 0}=e,{sourceX:d}=e,{sourceY:p}=e,{sourcePosition:b}=e,{targetX:w}=e,{targetY:g}=e,{targetPosition:v}=e;return l.$$set=k=>{e=Et(Et({},e),Bn(k)),t(15,Yt(e,i)),"label"in k&&t(0,r=k.label),"labelStyle"in k&&t(1,a=k.labelStyle),"style"in k&&t(2,c=k.style),"markerStart"in k&&t(3,u=k.markerStart),"markerEnd"in k&&t(4,f=k.markerEnd),"interactionWidth"in k&&t(5,h=k.interactionWidth),"sourceX"in k&&t(9,d=k.sourceX),"sourceY"in k&&t(10,p=k.sourceY),"sourcePosition"in k&&t(11,b=k.sourcePosition),"targetX"in k&&t(12,w=k.targetX),"targetY"in k&&t(13,g=k.targetY),"targetPosition"in k&&t(14,v=k.targetPosition)},l.$$.update=()=>{l.$$.dirty&32256&&t(8,[n,o,s]=_o({sourceX:d,sourceY:p,targetX:w,targetY:g,sourcePosition:b,targetPosition:v}),n,(t(7,o),t(9,d),t(10,p),t(12,w),t(13,g),t(11,b),t(14,v)),(t(6,s),t(9,d),t(10,p),t(12,w),t(13,g),t(11,b),t(14,v)))},[r,a,c,u,f,h,s,o,n,d,p,b,w,g,v]}class Cm extends Re{constructor(e){super(),Ue(this,e,Sm,Im,Fe,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function Dm(l){let e,t;return e=new zo({props:{path:l[8],labelX:l[7],labelY:l[6],label:l[0],labelStyle:l[1],markerStart:l[3],markerEnd:l[4],interactionWidth:l[5],style:l[2]}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,[o]){const s={};o&256&&(s.path=n[8]),o&128&&(s.labelX=n[7]),o&64&&(s.labelY=n[6]),o&1&&(s.label=n[0]),o&2&&(s.labelStyle=n[1]),o&8&&(s.markerStart=n[3]),o&16&&(s.markerEnd=n[4]),o&32&&(s.interactionWidth=n[5]),o&4&&(s.style=n[2]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function Mm(l,e,t){let n,o,s;const i=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"];Yt(e,i);let{label:r=void 0}=e,{labelStyle:a=void 0}=e,{style:c=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{interactionWidth:h=void 0}=e,{sourceX:d}=e,{sourceY:p}=e,{targetX:b}=e,{targetY:w}=e;return l.$$set=g=>{e=Et(Et({},e),Bn(g)),t(13,Yt(e,i)),"label"in g&&t(0,r=g.label),"labelStyle"in g&&t(1,a=g.labelStyle),"style"in g&&t(2,c=g.style),"markerStart"in g&&t(3,u=g.markerStart),"markerEnd"in g&&t(4,f=g.markerEnd),"interactionWidth"in g&&t(5,h=g.interactionWidth),"sourceX"in g&&t(9,d=g.sourceX),"sourceY"in g&&t(10,p=g.sourceY),"targetX"in g&&t(11,b=g.targetX),"targetY"in g&&t(12,w=g.targetY)},l.$$.update=()=>{l.$$.dirty&7680&&t(8,[n,o,s]=da({sourceX:d,sourceY:p,targetX:b,targetY:w}),n,(t(7,o),t(9,d),t(10,p),t(11,b),t(12,w)),(t(6,s),t(9,d),t(10,p),t(11,b),t(12,w)))},[r,a,c,u,f,h,s,o,n,d,p,b,w]}class Tm extends Re{constructor(e){super(),Ue(this,e,Mm,Dm,Fe,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,targetX:11,targetY:12})}}function Vm(l){let e,t;return e=new zo({props:{path:l[8],labelX:l[7],labelY:l[6],label:l[0],labelStyle:l[1],markerStart:l[3],markerEnd:l[4],interactionWidth:l[5],style:l[2]}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,[o]){const s={};o&256&&(s.path=n[8]),o&128&&(s.labelX=n[7]),o&64&&(s.labelY=n[6]),o&1&&(s.label=n[0]),o&2&&(s.labelStyle=n[1]),o&8&&(s.markerStart=n[3]),o&16&&(s.markerEnd=n[4]),o&32&&(s.interactionWidth=n[5]),o&4&&(s.style=n[2]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function zm(l,e,t){let n,o,s;const i=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Yt(e,i);let{label:r=void 0}=e,{labelStyle:a=void 0}=e,{style:c=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{interactionWidth:h=void 0}=e,{sourceX:d}=e,{sourceY:p}=e,{sourcePosition:b}=e,{targetX:w}=e,{targetY:g}=e,{targetPosition:v}=e;return l.$$set=k=>{e=Et(Et({},e),Bn(k)),t(15,Yt(e,i)),"label"in k&&t(0,r=k.label),"labelStyle"in k&&t(1,a=k.labelStyle),"style"in k&&t(2,c=k.style),"markerStart"in k&&t(3,u=k.markerStart),"markerEnd"in k&&t(4,f=k.markerEnd),"interactionWidth"in k&&t(5,h=k.interactionWidth),"sourceX"in k&&t(9,d=k.sourceX),"sourceY"in k&&t(10,p=k.sourceY),"sourcePosition"in k&&t(11,b=k.sourcePosition),"targetX"in k&&t(12,w=k.targetX),"targetY"in k&&t(13,g=k.targetY),"targetPosition"in k&&t(14,v=k.targetPosition)},l.$$.update=()=>{l.$$.dirty&32256&&t(8,[n,o,s]=_o({sourceX:d,sourceY:p,targetX:w,targetY:g,sourcePosition:b,targetPosition:v,borderRadius:0}),n,(t(7,o),t(9,d),t(10,p),t(12,w),t(13,g),t(11,b),t(14,v)),(t(6,s),t(9,d),t(10,p),t(12,w),t(13,g),t(11,b),t(14,v)))},[r,a,c,u,f,h,s,o,n,d,p,b,w,g,v]}class Nm extends Re{constructor(e){super(),Ue(this,e,zm,Vm,Fe,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function Pm(l,e){const t=l.set,n=e.set,o=me(l),s=me(e);let r=o.length===0&&s.length>0?s:o;l.set(r);const a=c=>{const u=t(c);return r=u,n(r),u};l.set=e.set=a,l.update=e.update=c=>a(c(r))}function Om(l,e){const t=l.set,n=e.set;let o=me(e);l.set(o);const s=i=>{t(i),n(i),o=i};l.set=e.set=s,l.update=e.update=i=>s(i(o))}const Hm=(l,e,t)=>{if(!t)return;const n=me(l),o=e.set,s=t.set;let i=t?me(t):{x:0,y:0,zoom:1};e.set(i),e.set=r=>(o(r),s(r),i=r,r),t.set=r=>(n==null||n.syncViewport(r),o(r),s(r),i=r,r),e.update=r=>{e.set(r(i))},t.update=r=>{t.set(r(i))}},Bm=(l,e,t,n=[0,0],o=uo)=>{const{subscribe:s,set:i,update:r}=Qe([]);let a=l,c={},u=!0;const f=b=>(ga(b,e,t,{elevateNodesOnSelect:u,nodeOrigin:n,nodeExtent:o,defaults:c,checkEquality:!1}),a=b,i(a),a),h=b=>f(b(a)),d=b=>{c=b},p=b=>{u=b.elevateNodesOnSelect??u};return f(a),{subscribe:s,set:f,update:h,setDefaultOptions:d,setOptions:p}},Am=(l,e,t,n)=>{const{subscribe:o,set:s,update:i}=Qe([]);let r=l,a={};const c=h=>{const d=a?h.map(p=>({...a,...p})):h;ba(e,t,d),r=d,s(r)},u=h=>c(h(r)),f=h=>{a=h};return c(r),{subscribe:o,set:c,update:u,setDefaultOptions:f}},Ta={input:lm,output:rm,default:Ca,group:am},Va={straight:Tm,smoothstep:Cm,default:Ma,step:Nm},Lm=({nodes:l=[],edges:e=[],width:t,height:n,fitView:o,nodeOrigin:s,nodeExtent:i})=>{const r=new Map,a=new Map,c=new Map,u=new Map,f=s??[0,0],h=i??uo;ga(l,r,a,{nodeExtent:h,nodeOrigin:f,elevateNodesOnSelect:!1,checkEquality:!1}),ba(c,u,e);let d={x:0,y:0,zoom:1};if(o&&t&&n){const p=Do(r,{filter:b=>!!((b.width||b.initialWidth)&&(b.height||b.initialHeight))});d=ss(p,t,n,.5,2,.1)}return{flowId:Qe(null),nodes:Bm(l,r,a,f,h),nodeLookup:Pn(r),parentLookup:Pn(a),edgeLookup:Pn(u),visibleNodes:Pn([]),edges:Am(e,c,u),visibleEdges:Pn([]),connectionLookup:Pn(c),height:Qe(500),width:Qe(500),minZoom:Qe(.5),maxZoom:Qe(2),nodeOrigin:Qe(f),nodeDragThreshold:Qe(1),nodeExtent:Qe(h),translateExtent:Qe(uo),autoPanOnNodeDrag:Qe(!0),autoPanOnConnect:Qe(!0),fitViewOnInit:Qe(!1),fitViewOnInitDone:Qe(!1),fitViewOptions:Qe(void 0),panZoom:Qe(null),snapGrid:Qe(null),dragging:Qe(!1),selectionRect:Qe(null),selectionKeyPressed:Qe(!1),multiselectionKeyPressed:Qe(!1),deleteKeyPressed:Qe(!1),panActivationKeyPressed:Qe(!1),zoomActivationKeyPressed:Qe(!1),selectionRectMode:Qe(null),selectionMode:Qe(fo.Partial),nodeTypes:Qe(Ta),edgeTypes:Qe(Va),viewport:Qe(d),connectionMode:Qe(fl.Strict),domNode:Qe(null),connection:Pn(qo),connectionLineType:Qe(El.Bezier),connectionRadius:Qe(20),isValidConnection:Qe(()=>!0),nodesDraggable:Qe(!0),nodesConnectable:Qe(!0),elementsSelectable:Qe(!0),selectNodesOnDrag:Qe(!0),markers:Pn([]),defaultMarkerColor:Qe("#b1b1b7"),lib:Pn("svelte"),onlyRenderVisibleElements:Qe(!1),onerror:Qe(hh),ondelete:Qe(void 0),onedgecreate:Qe(void 0),onconnect:Qe(void 0),onconnectstart:Qe(void 0),onconnectend:Qe(void 0),onbeforedelete:Qe(void 0),nodesInitialized:Qe(!1),edgesInitialized:Qe(!1),viewportInitialized:Qe(!1),initialized:Pn(!1)}};function Rm(l){const e=kl([l.edges,l.nodes,l.nodeLookup,l.onlyRenderVisibleElements,l.viewport,l.width,l.height],([t,,n,o,s,i,r])=>o&&i&&r?t.filter(c=>{const u=n.get(c.source),f=n.get(c.target);return u&&f&&wh({sourceNode:u,targetNode:f,width:i,height:r,transform:[s.x,s.y,s.zoom]})}):t);return kl([e,l.nodes,l.nodeLookup,l.connectionMode,l.onerror],([t,,n,o,s])=>t.reduce((r,a)=>{const c=n.get(a.source),u=n.get(a.target);if(!c||!u)return r;const f=Dh({id:a.id,sourceNode:c,targetNode:u,sourceHandle:a.sourceHandle||null,targetHandle:a.targetHandle||null,connectionMode:o,onError:s});return f&&r.push({...a,zIndex:vh({selected:a.selected,zIndex:a.zIndex,sourceNode:c,targetNode:u,elevateOnSelect:!1}),...f}),r},[]))}function Um(l){return kl([l.nodeLookup,l.onlyRenderVisibleElements,l.width,l.height,l.viewport,l.nodes],([e,t,n,o,s])=>{const i=[s.x,s.y,s.zoom];return t?la(e,{x:0,y:0,width:n,height:o},i,!0):Array.from(e.values())})}const No=Symbol();function za({nodes:l,edges:e,width:t,height:n,fitView:o,nodeOrigin:s,nodeExtent:i}){const r=Lm({nodes:l,edges:e,width:t,height:n,fitView:o,nodeOrigin:s,nodeExtent:i});function a(P){r.nodeTypes.set({...Ta,...P})}function c(P){r.edgeTypes.set({...Va,...P})}function u(P){const F=me(r.edges);r.edges.set(Eh(P,F))}const f=(P,F=!1)=>{var K;const G=me(r.nodeLookup);for(const[X,Q]of P){const W=(K=G.get(X))==null?void 0:K.internals.userNode;W&&(W.position=Q.position,W.dragging=F)}r.nodes.update(X=>X)};function h(P){var X,Q,W;const F=me(r.nodeLookup),{changes:G,updatedInternals:K}=Ph(P,F,me(r.parentLookup),me(r.domNode),me(r.nodeOrigin));if(K){if(!me(r.fitViewOnInitDone)&&me(r.fitViewOnInit)){const J=me(r.fitViewOptions),q=p({...J,nodes:J==null?void 0:J.nodes});r.fitViewOnInitDone.set(q)}for(const J of G){const q=(X=F.get(J.id))==null?void 0:X.internals.userNode;if(q)switch(J.type){case"dimensions":{const ce={...q.measured,...J.dimensions};J.setAttributes&&(q.width=((Q=J.dimensions)==null?void 0:Q.width)??q.width,q.height=((W=J.dimensions)==null?void 0:W.height)??q.height),q.measured=ce;break}case"position":q.position=J.position??q.position;break}}r.nodes.update(J=>J),me(r.nodesInitialized)||r.nodesInitialized.set(!0)}}function d(P){const F=me(r.panZoom);if(!F)return Promise.resolve(!1);const G=yr(me(r.nodeLookup),P);return Er({nodes:G,width:me(r.width),height:me(r.height),minZoom:me(r.minZoom),maxZoom:me(r.maxZoom),panZoom:F},P)}function p(P){const F=me(r.panZoom);if(!F)return!1;const G=yr(me(r.nodeLookup),P);return Er({nodes:G,width:me(r.width),height:me(r.height),minZoom:me(r.minZoom),maxZoom:me(r.maxZoom),panZoom:F},P),G.size>0}function b(P,F){const G=me(r.panZoom);return G?G.scaleBy(P,F):Promise.resolve(!1)}function w(P){return b(1.2,P)}function g(P){return b(1/1.2,P)}function v(P){const F=me(r.panZoom);F&&(F.setScaleExtent([P,me(r.maxZoom)]),r.minZoom.set(P))}function k(P){const F=me(r.panZoom);F&&(F.setScaleExtent([me(r.minZoom),P]),r.maxZoom.set(P))}function I(P){const F=me(r.panZoom);F&&(F.setTranslateExtent(P),r.translateExtent.set(P))}function T(P){let F=!1;return P.forEach(G=>{G.selected&&(G.selected=!1,F=!0)}),F}function M(P){var F;(F=me(r.panZoom))==null||F.setClickDistance(P)}function y(P){T((P==null?void 0:P.nodes)||me(r.nodes))&&r.nodes.set(me(r.nodes)),T((P==null?void 0:P.edges)||me(r.edges))&&r.edges.set(me(r.edges))}r.deleteKeyPressed.subscribe(async P=>{var F;if(P){const G=me(r.nodes),K=me(r.edges),X=G.filter(q=>q.selected),Q=K.filter(q=>q.selected),{nodes:W,edges:J}=await oa({nodesToRemove:X,edgesToRemove:Q,nodes:G,edges:K,onBeforeDelete:me(r.onbeforedelete)});(W.length||J.length)&&(r.nodes.update(q=>q.filter(ce=>!W.some(ge=>ge.id===ce.id))),r.edges.update(q=>q.filter(ce=>!J.some(ge=>ge.id===ce.id))),(F=me(r.ondelete))==null||F({nodes:W,edges:J}))}});function H(P){const F=me(r.multiselectionKeyPressed);r.nodes.update(G=>G.map(K=>{const X=P.includes(K.id),Q=F&&K.selected||X;return K.selected=Q,K})),F||r.edges.update(G=>G.map(K=>(K.selected=!1,K)))}function O(P){const F=me(r.multiselectionKeyPressed);r.edges.update(G=>G.map(K=>{const X=P.includes(K.id),Q=F&&K.selected||X;return K.selected=Q,K})),F||r.nodes.update(G=>G.map(K=>(K.selected=!1,K)))}function B(P){var G;const F=(G=me(r.nodes))==null?void 0:G.find(K=>K.id===P);if(!F){console.warn("012",Kl.error012(P));return}r.selectionRect.set(null),r.selectionRectMode.set(null),F.selected?F.selected&&me(r.multiselectionKeyPressed)&&y({nodes:[F],edges:[]}):H([P])}function j(P){const F=me(r.viewport);return Oh({delta:P,panZoom:me(r.panZoom),transform:[F.x,F.y,F.zoom],translateExtent:me(r.translateExtent),width:me(r.width),height:me(r.height)})}const Z=Qe(qo),L=P=>{Z.set({...P})};function D(){Z.set(qo)}function Y(){r.fitViewOnInitDone.set(!1),r.selectionRect.set(null),r.selectionRectMode.set(null),r.snapGrid.set(null),r.isValidConnection.set(()=>!0),y(),D()}return{...r,visibleEdges:Rm(r),visibleNodes:Um(r),connection:kl([Z,r.viewport],([P,F])=>P.inProgress?{...P,to:Zl(P.to,[F.x,F.y,F.zoom])}:{...P}),markers:kl([r.edges,r.defaultMarkerColor,r.flowId],([P,F,G])=>Mh(P,{defaultColor:F,id:G})),initialized:(()=>{let P=!1;const F=me(r.nodes).length,G=me(r.edges).length;return kl([r.nodesInitialized,r.edgesInitialized,r.viewportInitialized],([K,X,Q])=>P||(F===0?P=Q:G===0?P=Q&&K:P=Q&&K&&X,P))})(),syncNodeStores:P=>Pm(r.nodes,P),syncEdgeStores:P=>Om(r.edges,P),syncViewport:P=>Hm(r.panZoom,r.viewport,P),setNodeTypes:a,setEdgeTypes:c,addEdge:u,updateNodePositions:f,updateNodeInternals:h,zoomIn:w,zoomOut:g,fitView:P=>d(P),setMinZoom:v,setMaxZoom:k,setTranslateExtent:I,setPaneClickDistance:M,unselectNodesAndEdges:y,addSelectedNodes:H,addSelectedEdges:O,handleNodeSelection:B,panBy:j,updateConnection:L,cancelConnection:D,reset:Y}}function Xt(){const l=jt(No);if(!l)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return l.getStore()}function Wm({nodes:l,edges:e,width:t,height:n,fitView:o,nodeOrigin:s,nodeExtent:i}){const r=za({nodes:l,edges:e,width:t,height:n,fitView:o,nodeOrigin:s,nodeExtent:i});return Ol(No,{getStore:()=>r}),r}function Fm(l,e){const{panZoom:t,minZoom:n,maxZoom:o,initialViewport:s,viewport:i,dragging:r,translateExtent:a,paneClickDistance:c}=e,u=Jh({domNode:l,minZoom:n,maxZoom:o,translateExtent:a,viewport:s,paneClickDistance:c,onDraggingChange:r.set}),f=u.getViewport();return i.set(f),t.set(u),u.update(e),{update(h){u.update(h)}}}function jm(l){let e,t,n,o,s;const i=l[35].default,r=Qt(i,l,l[34],null);return{c(){e=V("div"),r&&r.c(),this.h()},l(a){e=z(a,"DIV",{class:!0});var c=C(e);r&&r.l(c),c.forEach(_),this.h()},h(){m(e,"class","svelte-flow__zoom svelte-4xkw84")},m(a,c){A(a,e,c),r&&r.m(e,null),n=!0,o||(s=vn(t=Fm.call(null,e,{viewport:l[18],minZoom:l[12],maxZoom:l[13],initialViewport:l[11],dragging:l[23],panZoom:l[19],onPanZoomStart:l[0],onPanZoom:l[1],onPanZoomEnd:l[2],zoomOnScroll:l[5],zoomOnDoubleClick:l[6],zoomOnPinch:l[7],panOnScroll:l[9],panOnDrag:l[10],panOnScrollSpeed:.5,panOnScrollMode:l[3]||Yn.Free,zoomActivationKeyPressed:l[14],preventScrolling:typeof l[4]=="boolean"?l[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!l[15],translateExtent:l[16],lib:l[17],paneClickDistance:l[8],onTransformChange:l[29]})),o=!0)},p(a,c){r&&r.p&&(!n||c[1]&8)&&xt(r,i,a,a[34],n?en(i,a[34],c,null):$t(a[34]),null),t&&ln(t.update)&&c[0]&262143&&t.update.call(null,{viewport:a[18],minZoom:a[12],maxZoom:a[13],initialViewport:a[11],dragging:a[23],panZoom:a[19],onPanZoomStart:a[0],onPanZoom:a[1],onPanZoomEnd:a[2],zoomOnScroll:a[5],zoomOnDoubleClick:a[6],zoomOnPinch:a[7],panOnScroll:a[9],panOnDrag:a[10],panOnScrollSpeed:.5,panOnScrollMode:a[3]||Yn.Free,zoomActivationKeyPressed:a[14],preventScrolling:typeof a[4]=="boolean"?a[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!a[15],translateExtent:a[16],lib:a[17],paneClickDistance:a[8],onTransformChange:a[29]})},i(a){n||(S(r,a),n=!0)},o(a){N(r,a),n=!1},d(a){a&&_(e),r&&r.d(a),o=!1,s()}}}function Ym(l,e,t){let n,o,s,i,r,a,c,u,f,h,d,{$$slots:p={},$$scope:b}=e,{initialViewport:w=void 0}=e,{onMoveStart:g=void 0}=e,{onMove:v=void 0}=e,{onMoveEnd:k=void 0}=e,{panOnScrollMode:I}=e,{preventScrolling:T}=e,{zoomOnScroll:M}=e,{zoomOnDoubleClick:y}=e,{zoomOnPinch:H}=e,{panOnDrag:O}=e,{panOnScroll:B}=e,{paneClickDistance:j}=e;const{viewport:Z,panZoom:L,selectionRect:D,minZoom:Y,maxZoom:P,dragging:F,translateExtent:G,lib:K,panActivationKeyPressed:X,zoomActivationKeyPressed:Q,viewportInitialized:W}=Xt();ae(l,D,q=>t(15,f=q)),ae(l,Y,q=>t(12,a=q)),ae(l,P,q=>t(13,c=q)),ae(l,G,q=>t(16,h=q)),ae(l,K,q=>t(17,d=q)),ae(l,X,q=>t(33,r=q)),ae(l,Q,q=>t(14,u=q)),ae(l,W,q=>t(36,i=q));const J=q=>Z.set({x:q[0],y:q[1],zoom:q[2]});return kn(()=>{io(W,i=!0,i)}),l.$$set=q=>{"initialViewport"in q&&t(30,w=q.initialViewport),"onMoveStart"in q&&t(0,g=q.onMoveStart),"onMove"in q&&t(1,v=q.onMove),"onMoveEnd"in q&&t(2,k=q.onMoveEnd),"panOnScrollMode"in q&&t(3,I=q.panOnScrollMode),"preventScrolling"in q&&t(4,T=q.preventScrolling),"zoomOnScroll"in q&&t(5,M=q.zoomOnScroll),"zoomOnDoubleClick"in q&&t(6,y=q.zoomOnDoubleClick),"zoomOnPinch"in q&&t(7,H=q.zoomOnPinch),"panOnDrag"in q&&t(31,O=q.panOnDrag),"panOnScroll"in q&&t(32,B=q.panOnScroll),"paneClickDistance"in q&&t(8,j=q.paneClickDistance),"$$scope"in q&&t(34,b=q.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&1073741824&&t(11,n=w||{x:0,y:0,zoom:1}),l.$$.dirty[1]&5&&t(10,o=r||O),l.$$.dirty[1]&6&&t(9,s=r||B)},[g,v,k,I,T,M,y,H,j,s,o,n,a,c,u,f,h,d,Z,L,D,Y,P,F,G,K,X,Q,W,J,w,O,B,r,b,p]}class Xm extends Re{constructor(e){super(),Ue(this,e,Ym,jm,Fe,{initialViewport:30,onMoveStart:0,onMove:1,onMoveEnd:2,panOnScrollMode:3,preventScrolling:4,zoomOnScroll:5,zoomOnDoubleClick:6,zoomOnPinch:7,panOnDrag:31,panOnScroll:32,paneClickDistance:8},null,[-1,-1])}}function Km(l){let e,t,n,o;const s=l[28].default,i=Qt(s,l,l[27],null);return{c(){e=V("div"),i&&i.c(),this.h()},l(r){e=z(r,"DIV",{class:!0});var a=C(e);i&&i.l(a),a.forEach(_),this.h()},h(){m(e,"class","svelte-flow__pane svelte-1esy7hx"),st(e,"draggable",l[0]===!0||Array.isArray(l[0])&&l[0].includes(0)),st(e,"dragging",l[4]),st(e,"selection",l[1])},m(r,a){A(r,e,a),i&&i.m(e,null),l[29](e),t=!0,n||(o=[ke(e,"click",function(){ln(l[3]?void 0:oo(l[15],l[2]))&&(l[3]?void 0:oo(l[15],l[2])).apply(this,arguments)}),ke(e,"pointerdown",function(){ln(l[3]?l[16]:void 0)&&(l[3]?l[16]:void 0).apply(this,arguments)}),ke(e,"pointermove",function(){ln(l[3]?l[17]:void 0)&&(l[3]?l[17]:void 0).apply(this,arguments)}),ke(e,"pointerup",function(){ln(l[3]?l[18]:void 0)&&(l[3]?l[18]:void 0).apply(this,arguments)}),ke(e,"contextmenu",function(){ln(oo(l[19],l[2]))&&oo(l[19],l[2]).apply(this,arguments)})],n=!0)},p(r,a){l=r,i&&i.p&&(!t||a[0]&134217728)&&xt(i,s,l,l[27],t?en(s,l[27],a,null):$t(l[27]),null),(!t||a[0]&1)&&st(e,"draggable",l[0]===!0||Array.isArray(l[0])&&l[0].includes(0)),(!t||a[0]&16)&&st(e,"dragging",l[4]),(!t||a[0]&2)&&st(e,"selection",l[1])},i(r){t||(S(i,r),t=!0)},o(r){N(i,r),t=!1},d(r){r&&_(e),i&&i.d(r),l[29](null),n=!1,on(o)}}}function oo(l,e){return t=>{t.target===e&&(l==null||l(t))}}function Lr(l){return e=>{const t=l.includes(e.id);return e.selected!==t&&(e.selected=t),e}}function Zm(l,e,t){let n,o,s,i,r,a,c,u,f,h,d,p,b,{$$slots:w={},$$scope:g}=e,{panOnDrag:v=void 0}=e,{selectionOnDrag:k=void 0}=e;const I=un(),{nodes:T,nodeLookup:M,edges:y,viewport:H,dragging:O,elementsSelectable:B,selectionRect:j,selectionRectMode:Z,selectionKeyPressed:L,selectionMode:D,panActivationKeyPressed:Y,unselectNodesAndEdges:P}=Xt();ae(l,M,re=>t(36,f=re)),ae(l,y,re=>t(33,a=re)),ae(l,H,re=>t(35,u=re)),ae(l,O,re=>t(4,b=re)),ae(l,B,re=>t(25,d=re)),ae(l,j,re=>t(24,h=re)),ae(l,Z,re=>t(23,r=re)),ae(l,L,re=>t(22,i=re)),ae(l,D,re=>t(34,c=re)),ae(l,Y,re=>t(26,p=re));let F,G=null,K=[],X=!1;function Q(re){if(X){X=!1;return}I("paneclick",{event:re}),P(),Z.set(null)}function W(re){var ue,Ee;if(G=F.getBoundingClientRect(),!B||!o||re.button!==0||re.target!==F||!G)return;(Ee=(ue=re.target)==null?void 0:ue.setPointerCapture)==null||Ee.call(ue,re.pointerId);const{x:Pe,y:x}=qn(re,G);P(),j.set({width:0,height:0,startX:Pe,startY:x,x:Pe,y:x})}function J(re){if(!o||!G||!h)return;X=!0;const Pe=qn(re,G),x=h.startX??0,ue=h.startY??0,Ee={...h,x:Pe.x<x?Pe.x:x,y:Pe.y<ue?Pe.y:ue,width:Math.abs(Pe.x-x),height:Math.abs(Pe.y-ue)},Xe=K.map(it=>it.id),Ke=Jo(K,a).map(it=>it.id);K=la(f,Ee,[u.x,u.y,u.zoom],c===fo.Partial,!0);const fe=Jo(K,a).map(it=>it.id),lt=K.map(it=>it.id);(Xe.length!==lt.length||lt.some(it=>!Xe.includes(it)))&&T.update(it=>it.map(Lr(lt))),(Ke.length!==fe.length||fe.some(it=>!Ke.includes(it)))&&y.update(it=>it.map(Lr(fe))),Z.set("user"),j.set(Ee)}function q(re){var Pe,x;re.button===0&&((x=(Pe=re.target)==null?void 0:Pe.releasePointerCapture)==null||x.call(Pe,re.pointerId),!o&&r==="user"&&re.target===F&&(Q==null||Q(re)),j.set(null),K.length>0&&io(Z,r="nodes",r),i&&(X=!1))}const ce=re=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){re.preventDefault();return}I("panecontextmenu",{event:re})};function ge(re){We[re?"unshift":"push"](()=>{F=re,t(2,F)})}return l.$$set=re=>{"panOnDrag"in re&&t(0,v=re.panOnDrag),"selectionOnDrag"in re&&t(20,k=re.selectionOnDrag),"$$scope"in re&&t(27,g=re.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&67108865&&t(21,n=p||v),l.$$.dirty[0]&24117248&&t(1,o=i||h||k&&n!==!0),l.$$.dirty[0]&41943042&&t(3,s=d&&(o||r==="user"))},[v,o,F,s,b,M,y,H,O,B,j,Z,L,D,Y,Q,W,J,q,ce,k,n,i,r,h,d,p,g,w,ge]}class Gm extends Re{constructor(e){super(),Ue(this,e,Zm,Km,Fe,{panOnDrag:0,selectionOnDrag:20},null,[-1,-1])}}function qm(l){let e,t;const n=l[3].default,o=Qt(n,l,l[2],null);return{c(){e=V("div"),o&&o.c(),this.h()},l(s){e=z(s,"DIV",{class:!0,style:!0});var i=C(e);o&&o.l(i),i.forEach(_),this.h()},h(){m(e,"class","svelte-flow__viewport xyflow__viewport svelte-1floaup"),et(e,"transform","translate("+l[0].x+"px, "+l[0].y+"px) scale("+l[0].zoom+")")},m(s,i){A(s,e,i),o&&o.m(e,null),t=!0},p(s,[i]){o&&o.p&&(!t||i&4)&&xt(o,n,s,s[2],t?en(n,s[2],i,null):$t(s[2]),null),(!t||i&1)&&et(e,"transform","translate("+s[0].x+"px, "+s[0].y+"px) scale("+s[0].zoom+")")},i(s){t||(S(o,s),t=!0)},o(s){N(o,s),t=!1},d(s){s&&_(e),o&&o.d(s)}}}function Jm(l,e,t){let n,{$$slots:o={},$$scope:s}=e;const{viewport:i}=Xt();return ae(l,i,r=>t(0,n=r)),l.$$set=r=>{"$$scope"in r&&t(2,s=r.$$scope)},[n,i,s,o]}class Qm extends Re{constructor(e){super(),Ue(this,e,Jm,qm,Fe,{})}}function Na(l,e){const{store:t,onDrag:n,onDragStart:o,onDragStop:s,onNodeMouseDown:i}=e,r=Bh({onDrag:n,onDragStart:o,onDragStop:s,onNodeMouseDown:i,getStoreItems:()=>{const c=me(t.snapGrid),u=me(t.viewport);return{nodes:me(t.nodes),nodeLookup:me(t.nodeLookup),edges:me(t.edges),nodeExtent:me(t.nodeExtent),snapGrid:c||[0,0],snapToGrid:!!c,nodeOrigin:me(t.nodeOrigin),multiSelectionActive:me(t.multiselectionKeyPressed),domNode:me(t.domNode),transform:[u.x,u.y,u.zoom],autoPanOnNodeDrag:me(t.autoPanOnNodeDrag),nodesDraggable:me(t.nodesDraggable),selectNodesOnDrag:me(t.selectNodesOnDrag),nodeDragThreshold:me(t.nodeDragThreshold),unselectNodesAndEdges:t.unselectNodesAndEdges,updateNodePositions:t.updateNodePositions,panBy:t.panBy}}});function a(c,u){if(u.disabled){r.destroy();return}r.update({domNode:c,noDragClassName:u.noDragClass,handleSelector:u.handleSelector,nodeId:u.nodeId,isSelectable:u.isSelectable,nodeClickDistance:u.nodeClickDistance})}return a(l,e),{update(c){a(l,c)},destroy(){r.destroy()}}}function xm({width:l,height:e,initialWidth:t,initialHeight:n,measuredWidth:o,measuredHeight:s}){if(o===void 0&&s===void 0){const i=l??t,r=e??n;return{width:i?`width:${i}px;`:"",height:r?`height:${r}px;`:""}}return{width:l?`width:${l}px;`:"",height:e?`height:${e}px;`:""}}function Rr(l){let e,t,n,o,s,i=`translate(${l[12]}px, ${l[13]}px)`,r,a,c;var u=l[27];function f(h,d){return{props:{data:h[2],id:h[1],selected:h[3],selectable:h[5],deletable:h[7],sourcePosition:h[14],targetPosition:h[15],zIndex:h[16],dragging:h[9],draggable:h[4],dragHandle:h[19],parentId:h[21],type:h[25],isConnectable:h[28],positionAbsoluteX:h[12],positionAbsoluteY:h[13],width:h[17],height:h[18]}}}return u&&(t=ao(u,f(l))),{c(){e=V("div"),t&&ne(t.$$.fragment),this.h()},l(h){e=z(h,"DIV",{"data-id":!0,class:!0,style:!0});var d=C(e);t&&se(t.$$.fragment,d),d.forEach(_),this.h()},h(){m(e,"data-id",l[1]),m(e,"class",n=Ot(["svelte-flow__node",`svelte-flow__node-${l[25]}`,l[23]])),m(e,"style",o=(l[10]??"")+";"+l[26].width+l[26].height),st(e,"dragging",l[9]),st(e,"selected",l[3]),st(e,"draggable",l[4]),st(e,"connectable",l[6]),st(e,"selectable",l[5]),st(e,"nopan",l[4]),st(e,"parent",l[11]),et(e,"z-index",l[16]),et(e,"transform",i),et(e,"visibility",l[20]?"visible":"hidden")},m(h,d){A(h,e,d),t&&le(t,e,null),l[50](e),r=!0,a||(c=[vn(s=Na.call(null,e,{nodeId:l[1],isSelectable:l[5],disabled:!1,handleSelector:l[19],noDragClass:"nodrag",nodeClickDistance:l[22],onNodeMouseDown:l[31],onDrag:l[47],onDragStart:l[48],onDragStop:l[49],store:l[29]})),ke(e,"click",l[34]),ke(e,"mouseenter",l[51]),ke(e,"mouseleave",l[52]),ke(e,"mousemove",l[53]),ke(e,"contextmenu",l[54])],a=!0)},p(h,d){if(d[0]&134217728&&u!==(u=h[27])){if(t){He();const b=t;N(b.$$.fragment,1,0,()=>{oe(b,1)}),Be()}u?(t=ao(u,f(h)),ne(t.$$.fragment),S(t.$$.fragment,1),le(t,e,null)):t=null}else if(u){const b={};d[0]&4&&(b.data=h[2]),d[0]&2&&(b.id=h[1]),d[0]&8&&(b.selected=h[3]),d[0]&32&&(b.selectable=h[5]),d[0]&128&&(b.deletable=h[7]),d[0]&16384&&(b.sourcePosition=h[14]),d[0]&32768&&(b.targetPosition=h[15]),d[0]&65536&&(b.zIndex=h[16]),d[0]&512&&(b.dragging=h[9]),d[0]&16&&(b.draggable=h[4]),d[0]&524288&&(b.dragHandle=h[19]),d[0]&2097152&&(b.parentId=h[21]),d[0]&33554432&&(b.type=h[25]),d[0]&268435456&&(b.isConnectable=h[28]),d[0]&4096&&(b.positionAbsoluteX=h[12]),d[0]&8192&&(b.positionAbsoluteY=h[13]),d[0]&131072&&(b.width=h[17]),d[0]&262144&&(b.height=h[18]),t.$set(b)}(!r||d[0]&2)&&m(e,"data-id",h[1]),(!r||d[0]&41943040&&n!==(n=Ot(["svelte-flow__node",`svelte-flow__node-${h[25]}`,h[23]])))&&m(e,"class",n),(!r||d[0]&67109888&&o!==(o=(h[10]??"")+";"+h[26].width+h[26].height))&&m(e,"style",o),s&&ln(s.update)&&d[0]&4718626&&s.update.call(null,{nodeId:h[1],isSelectable:h[5],disabled:!1,handleSelector:h[19],noDragClass:"nodrag",nodeClickDistance:h[22],onNodeMouseDown:h[31],onDrag:h[47],onDragStart:h[48],onDragStop:h[49],store:h[29]}),(!r||d[0]&41943552)&&st(e,"dragging",h[9]),(!r||d[0]&41943048)&&st(e,"selected",h[3]),(!r||d[0]&41943056)&&st(e,"draggable",h[4]),(!r||d[0]&41943104)&&st(e,"connectable",h[6]),(!r||d[0]&41943072)&&st(e,"selectable",h[5]),(!r||d[0]&41943056)&&st(e,"nopan",h[4]),(!r||d[0]&41945088)&&st(e,"parent",h[11]);const p=d[0]&67109888;(d[0]&67175424||p)&&et(e,"z-index",h[16]),(d[0]&67122176&&i!==(i=`translate(${h[12]}px, ${h[13]}px)`)||p)&&et(e,"transform",i),(d[0]&68158464||p)&&et(e,"visibility",h[20]?"visible":"hidden")},i(h){r||(t&&S(t.$$.fragment,h),r=!0)},o(h){t&&N(t.$$.fragment,h),r=!1},d(h){h&&_(e),t&&oe(t),l[50](null),a=!1,on(c)}}}function $m(l){let e,t,n=!l[8]&&Rr(l);return{c(){n&&n.c(),e=Ae()},l(o){n&&n.l(o),e=Ae()},m(o,s){n&&n.m(o,s),A(o,e,s),t=!0},p(o,s){o[8]?n&&(He(),N(n,1,1,()=>{n=null}),Be()):n?(n.p(o,s),s[0]&256&&S(n,1)):(n=Rr(o),n.c(),S(n,1),n.m(e.parentNode,e))},i(o){t||(S(n),t=!0)},o(o){N(n),t=!1},d(o){o&&_(e),n&&n.d(o)}}}function eg(l,e,t){let n,o,s,i,r,a,{node:c}=e,{id:u}=e,{data:f={}}=e,{selected:h=!1}=e,{draggable:d=void 0}=e,{selectable:p=void 0}=e,{connectable:b=!0}=e,{deletable:w=!0}=e,{hidden:g=!1}=e,{dragging:v=!1}=e,{resizeObserver:k=null}=e,{style:I=void 0}=e,{type:T="default"}=e,{isParent:M=!1}=e,{positionX:y}=e,{positionY:H}=e,{sourcePosition:O=void 0}=e,{targetPosition:B=void 0}=e,{zIndex:j}=e,{measuredWidth:Z=void 0}=e,{measuredHeight:L=void 0}=e,{initialWidth:D=void 0}=e,{initialHeight:Y=void 0}=e,{width:P=void 0}=e,{height:F=void 0}=e,{dragHandle:G=void 0}=e,{initialized:K=!1}=e,{parentId:X=void 0}=e,{nodeClickDistance:Q=void 0}=e,{class:W=""}=e;const J=Xt(),{nodeTypes:q,nodeDragThreshold:ce,selectNodesOnDrag:ge,handleNodeSelection:re,updateNodeInternals:Pe}=J;ae(l,q,he=>t(46,r=he));let x,ue=null;const Ee=un(),Xe=Qe(b);ae(l,Xe,he=>t(28,a=he));let Ke,fe,lt;Ol("svelteflow__node_id",u),Ol("svelteflow__node_connectable",Xe),ll(()=>{ue&&(k==null||k.unobserve(ue))});function it(he){p&&(!me(ge)||!d||me(ce)>0)&&re(u),Ee("nodeclick",{node:c.internals.userNode,event:he})}const zt=(he,kt,ht,bt)=>{Ee("nodedrag",{event:he,targetNode:ht,nodes:bt})},Ct=(he,kt,ht,bt)=>{Ee("nodedragstart",{event:he,targetNode:ht,nodes:bt})},Ht=(he,kt,ht,bt)=>{Ee("nodedragstop",{event:he,targetNode:ht,nodes:bt})};function wt(he){We[he?"unshift":"push"](()=>{x=he,t(24,x)})}const Ut=he=>Ee("nodemouseenter",{node:c,event:he}),pe=he=>Ee("nodemouseleave",{node:c,event:he}),Ye=he=>Ee("nodemousemove",{node:c,event:he}),ot=he=>Ee("nodecontextmenu",{node:c,event:he});return l.$$set=he=>{"node"in he&&t(0,c=he.node),"id"in he&&t(1,u=he.id),"data"in he&&t(2,f=he.data),"selected"in he&&t(3,h=he.selected),"draggable"in he&&t(4,d=he.draggable),"selectable"in he&&t(5,p=he.selectable),"connectable"in he&&t(6,b=he.connectable),"deletable"in he&&t(7,w=he.deletable),"hidden"in he&&t(8,g=he.hidden),"dragging"in he&&t(9,v=he.dragging),"resizeObserver"in he&&t(35,k=he.resizeObserver),"style"in he&&t(10,I=he.style),"type"in he&&t(36,T=he.type),"isParent"in he&&t(11,M=he.isParent),"positionX"in he&&t(12,y=he.positionX),"positionY"in he&&t(13,H=he.positionY),"sourcePosition"in he&&t(14,O=he.sourcePosition),"targetPosition"in he&&t(15,B=he.targetPosition),"zIndex"in he&&t(16,j=he.zIndex),"measuredWidth"in he&&t(37,Z=he.measuredWidth),"measuredHeight"in he&&t(38,L=he.measuredHeight),"initialWidth"in he&&t(39,D=he.initialWidth),"initialHeight"in he&&t(40,Y=he.initialHeight),"width"in he&&t(17,P=he.width),"height"in he&&t(18,F=he.height),"dragHandle"in he&&t(19,G=he.dragHandle),"initialized"in he&&t(20,K=he.initialized),"parentId"in he&&t(21,X=he.parentId),"nodeClickDistance"in he&&t(22,Q=he.nodeClickDistance),"class"in he&&t(23,W=he.class)},l.$$.update=()=>{l.$$.dirty[1]&32&&t(25,n=T||"default"),l.$$.dirty[0]&33554432|l.$$.dirty[1]&32768&&t(45,o=!!r[n]),l.$$.dirty[0]&33554432|l.$$.dirty[1]&32768&&t(27,s=r[n]||Ca),l.$$.dirty[1]&16416&&(o||console.warn("003",Kl.error003(T))),l.$$.dirty[0]&393216|l.$$.dirty[1]&960&&t(26,i=xm({width:P,height:F,initialWidth:D,initialHeight:Y,measuredWidth:Z,measuredHeight:L})),l.$$.dirty[0]&64&&Xe.set(!!b),l.$$.dirty[0]&50380802|l.$$.dirty[1]&14336&&((Ke&&n!==Ke||fe&&O!==fe||lt&&B!==lt)&&requestAnimationFrame(()=>Pe(new Map([[u,{id:u,nodeElement:x,force:!0}]]))),t(42,Ke=n),t(43,fe=O),t(44,lt=B)),l.$$.dirty[0]&17825792|l.$$.dirty[1]&1040&&k&&(x!==ue||!K)&&(ue&&k.unobserve(ue),x&&k.observe(x),t(41,ue=x))},[c,u,f,h,d,p,b,w,g,v,I,M,y,H,O,B,j,P,F,G,K,X,Q,W,x,n,i,s,a,J,q,re,Ee,Xe,it,k,T,Z,L,D,Y,ue,Ke,fe,lt,o,r,zt,Ct,Ht,wt,Ut,pe,Ye,ot]}class tg extends Re{constructor(e){super(),Ue(this,e,eg,$m,Wi,{node:0,id:1,data:2,selected:3,draggable:4,selectable:5,connectable:6,deletable:7,hidden:8,dragging:9,resizeObserver:35,style:10,type:36,isParent:11,positionX:12,positionY:13,sourcePosition:14,targetPosition:15,zIndex:16,measuredWidth:37,measuredHeight:38,initialWidth:39,initialHeight:40,width:17,height:18,dragHandle:19,initialized:20,parentId:21,nodeClickDistance:22,class:23},null,[-1,-1])}}const{Map:ng}=Fi;function Ur(l,e,t){const n=l.slice();return n[21]=e[t],n}function Wr(l,e){let t,n,o;return n=new tg({props:{node:e[21],id:e[21].id,data:e[21].data,selected:!!e[21].selected,hidden:!!e[21].hidden,draggable:!!(e[21].draggable||e[2]&&typeof e[21].draggable>"u"),selectable:!!(e[21].selectable||e[3]&&typeof e[21].selectable>"u"),connectable:!!(e[21].connectable||e[4]&&typeof e[21].connectable>"u"),deletable:e[21].deletable??!0,positionX:e[21].internals.positionAbsolute.x,positionY:e[21].internals.positionAbsolute.y,isParent:e[5].has(e[21].id),style:e[21].style,class:e[21].class,type:e[21].type??"default",sourcePosition:e[21].sourcePosition,targetPosition:e[21].targetPosition,dragging:e[21].dragging,zIndex:e[21].internals.z??0,dragHandle:e[21].dragHandle,initialized:Cr(e[21]),width:e[21].width,height:e[21].height,initialWidth:e[21].initialWidth,initialHeight:e[21].initialHeight,measuredWidth:e[21].measured.width,measuredHeight:e[21].measured.height,parentId:e[21].parentId,resizeObserver:e[11],nodeClickDistance:e[0]}}),n.$on("nodeclick",e[12]),n.$on("nodemouseenter",e[13]),n.$on("nodemousemove",e[14]),n.$on("nodemouseleave",e[15]),n.$on("nodedrag",e[16]),n.$on("nodedragstart",e[17]),n.$on("nodedragstop",e[18]),n.$on("nodecontextmenu",e[19]),{key:l,first:null,c(){t=Ae(),ne(n.$$.fragment),this.h()},l(s){t=Ae(),se(n.$$.fragment,s),this.h()},h(){this.first=t},m(s,i){A(s,t,i),le(n,s,i),o=!0},p(s,i){e=s;const r={};i&2&&(r.node=e[21]),i&2&&(r.id=e[21].id),i&2&&(r.data=e[21].data),i&2&&(r.selected=!!e[21].selected),i&2&&(r.hidden=!!e[21].hidden),i&6&&(r.draggable=!!(e[21].draggable||e[2]&&typeof e[21].draggable>"u")),i&10&&(r.selectable=!!(e[21].selectable||e[3]&&typeof e[21].selectable>"u")),i&18&&(r.connectable=!!(e[21].connectable||e[4]&&typeof e[21].connectable>"u")),i&2&&(r.deletable=e[21].deletable??!0),i&2&&(r.positionX=e[21].internals.positionAbsolute.x),i&2&&(r.positionY=e[21].internals.positionAbsolute.y),i&34&&(r.isParent=e[5].has(e[21].id)),i&2&&(r.style=e[21].style),i&2&&(r.class=e[21].class),i&2&&(r.type=e[21].type??"default"),i&2&&(r.sourcePosition=e[21].sourcePosition),i&2&&(r.targetPosition=e[21].targetPosition),i&2&&(r.dragging=e[21].dragging),i&2&&(r.zIndex=e[21].internals.z??0),i&2&&(r.dragHandle=e[21].dragHandle),i&2&&(r.initialized=Cr(e[21])),i&2&&(r.width=e[21].width),i&2&&(r.height=e[21].height),i&2&&(r.initialWidth=e[21].initialWidth),i&2&&(r.initialHeight=e[21].initialHeight),i&2&&(r.measuredWidth=e[21].measured.width),i&2&&(r.measuredHeight=e[21].measured.height),i&2&&(r.parentId=e[21].parentId),i&1&&(r.nodeClickDistance=e[0]),n.$set(r)},i(s){o||(S(n.$$.fragment,s),o=!0)},o(s){N(n.$$.fragment,s),o=!1},d(s){s&&_(t),oe(n,s)}}}function lg(l){let e,t=[],n=new ng,o,s=vt(l[1]);const i=r=>r[21].id;for(let r=0;r<s.length;r+=1){let a=Ur(l,s,r),c=i(a);n.set(c,t[r]=Wr(c,a))}return{c(){e=V("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=z(r,"DIV",{class:!0});var a=C(e);for(let c=0;c<t.length;c+=1)t[c].l(a);a.forEach(_),this.h()},h(){m(e,"class","svelte-flow__nodes svelte-tf4uy4")},m(r,a){A(r,e,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);o=!0},p(r,[a]){a&2111&&(s=vt(r[1]),He(),t=bo(t,a,i,1,r,s,n,e,vo,Wr,null,Ur),Be())},i(r){if(!o){for(let a=0;a<s.length;a+=1)S(t[a]);o=!0}},o(r){for(let a=0;a<t.length;a+=1)N(t[a]);o=!1},d(r){r&&_(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function og(l,e,t){let n,o,s,i,r,{nodeClickDistance:a=0}=e;const{visibleNodes:c,nodesDraggable:u,nodesConnectable:f,elementsSelectable:h,updateNodeInternals:d,parentLookup:p}=Xt();ae(l,c,H=>t(1,n=H)),ae(l,u,H=>t(2,o=H)),ae(l,f,H=>t(4,i=H)),ae(l,h,H=>t(3,s=H)),ae(l,p,H=>t(5,r=H));const b=typeof ResizeObserver>"u"?null:new ResizeObserver(H=>{const O=new Map;H.forEach(B=>{const j=B.target.getAttribute("data-id");O.set(j,{id:j,nodeElement:B.target,force:!0})}),d(O)});ll(()=>{b==null||b.disconnect()});function w(H){gt.call(this,l,H)}function g(H){gt.call(this,l,H)}function v(H){gt.call(this,l,H)}function k(H){gt.call(this,l,H)}function I(H){gt.call(this,l,H)}function T(H){gt.call(this,l,H)}function M(H){gt.call(this,l,H)}function y(H){gt.call(this,l,H)}return l.$$set=H=>{"nodeClickDistance"in H&&t(0,a=H.nodeClickDistance)},[a,n,o,s,i,r,c,u,f,h,p,b,w,g,v,k,I,T,M,y]}class sg extends Re{constructor(e){super(),Ue(this,e,og,lg,Fe,{nodeClickDistance:0})}}function Fr(l){let e,t,n,o,s,i,r,a;var c=l[27];function u(f,h){return{props:{id:f[0],source:f[1],target:f[2],sourceX:f[14],sourceY:f[15],targetX:f[16],targetY:f[17],sourcePosition:f[18],targetPosition:f[19],animated:f[6],selected:f[7],label:f[10],labelStyle:f[11],data:f[3],style:f[4],interactionWidth:f[21],selectable:f[24],deletable:f[8]??!0,type:f[23],sourceHandleId:f[12],targetHandleId:f[13],markerStart:f[26],markerEnd:f[25]}}}return c&&(n=ao(c,u(l))),{c(){e=Te("svg"),t=Te("g"),n&&ne(n.$$.fragment),this.h()},l(f){e=Ve(f,"svg",{});var h=C(e);t=Ve(h,"g",{class:!0,"data-id":!0,"aria-label":!0,role:!0});var d=C(t);n&&se(n.$$.fragment,d),d.forEach(_),h.forEach(_),this.h()},h(){m(t,"class",o=Ot(["svelte-flow__edge",l[22]])),m(t,"data-id",l[0]),m(t,"aria-label",s=l[20]===null?void 0:l[20]?l[20]:`Edge from ${l[1]} to ${l[2]}`),m(t,"role","img"),st(t,"animated",l[6]),st(t,"selected",l[7]),st(t,"selectable",l[24]),et(e,"z-index",l[5])},m(f,h){A(f,e,h),E(e,t),n&&le(n,t,null),i=!0,r||(a=[ke(t,"click",l[32]),ke(t,"contextmenu",l[41]),ke(t,"mouseenter",l[42]),ke(t,"mouseleave",l[43])],r=!0)},p(f,h){if(h[0]&134217728&&c!==(c=f[27])){if(n){He();const d=n;N(d.$$.fragment,1,0,()=>{oe(d,1)}),Be()}c?(n=ao(c,u(f)),ne(n.$$.fragment),S(n.$$.fragment,1),le(n,t,null)):n=null}else if(c){const d={};h[0]&1&&(d.id=f[0]),h[0]&2&&(d.source=f[1]),h[0]&4&&(d.target=f[2]),h[0]&16384&&(d.sourceX=f[14]),h[0]&32768&&(d.sourceY=f[15]),h[0]&65536&&(d.targetX=f[16]),h[0]&131072&&(d.targetY=f[17]),h[0]&262144&&(d.sourcePosition=f[18]),h[0]&524288&&(d.targetPosition=f[19]),h[0]&64&&(d.animated=f[6]),h[0]&128&&(d.selected=f[7]),h[0]&1024&&(d.label=f[10]),h[0]&2048&&(d.labelStyle=f[11]),h[0]&8&&(d.data=f[3]),h[0]&16&&(d.style=f[4]),h[0]&2097152&&(d.interactionWidth=f[21]),h[0]&16777216&&(d.selectable=f[24]),h[0]&256&&(d.deletable=f[8]??!0),h[0]&8388608&&(d.type=f[23]),h[0]&4096&&(d.sourceHandleId=f[12]),h[0]&8192&&(d.targetHandleId=f[13]),h[0]&67108864&&(d.markerStart=f[26]),h[0]&33554432&&(d.markerEnd=f[25]),n.$set(d)}(!i||h[0]&4194304&&o!==(o=Ot(["svelte-flow__edge",f[22]])))&&m(t,"class",o),(!i||h[0]&1)&&m(t,"data-id",f[0]),(!i||h[0]&1048582&&s!==(s=f[20]===null?void 0:f[20]?f[20]:`Edge from ${f[1]} to ${f[2]}`))&&m(t,"aria-label",s),(!i||h[0]&4194368)&&st(t,"animated",f[6]),(!i||h[0]&4194432)&&st(t,"selected",f[7]),(!i||h[0]&20971520)&&st(t,"selectable",f[24]),h[0]&32&&et(e,"z-index",f[5])},i(f){i||(n&&S(n.$$.fragment,f),i=!0)},o(f){n&&N(n.$$.fragment,f),i=!1},d(f){f&&_(e),n&&oe(n),r=!1,on(a)}}}function rg(l){let e,t,n=!l[9]&&Fr(l);return{c(){n&&n.c(),e=Ae()},l(o){n&&n.l(o),e=Ae()},m(o,s){n&&n.m(o,s),A(o,e,s),t=!0},p(o,s){o[9]?n&&(He(),N(n,1,1,()=>{n=null}),Be()):n?(n.p(o,s),s[0]&512&&S(n,1)):(n=Fr(o),n.c(),S(n,1),n.m(e.parentNode,e))},i(o){t||(S(n),t=!0)},o(o){N(n),t=!1},d(o){o&&_(e),n&&n.d(o)}}}function ig(l,e,t){let n,o,s,i,r,a,c,u,f,{id:h}=e,{type:d="default"}=e,{source:p=""}=e,{target:b=""}=e,{data:w={}}=e,{style:g=void 0}=e,{zIndex:v=void 0}=e,{animated:k=!1}=e,{selected:I=!1}=e,{selectable:T=void 0}=e,{deletable:M=void 0}=e,{hidden:y=!1}=e,{label:H=void 0}=e,{labelStyle:O=void 0}=e,{markerStart:B=void 0}=e,{markerEnd:j=void 0}=e,{sourceHandle:Z=void 0}=e,{targetHandle:L=void 0}=e,{sourceX:D}=e,{sourceY:Y}=e,{targetX:P}=e,{targetY:F}=e,{sourcePosition:G}=e,{targetPosition:K}=e,{ariaLabel:X=void 0}=e,{interactionWidth:Q=void 0}=e,{class:W=""}=e;Ol("svelteflow__edge_id",h);const{edgeLookup:J,edgeTypes:q,flowId:ce,elementsSelectable:ge}=Xt();ae(l,J,fe=>t(44,a=fe)),ae(l,q,fe=>t(40,f=fe)),ae(l,ce,fe=>t(39,u=fe)),ae(l,ge,fe=>t(38,c=fe));const re=un(),Pe=Da();function x(fe){const lt=a.get(h);lt&&(Pe(h),re("edgeclick",{event:fe,edge:lt}))}function ue(fe,lt){const it=a.get(h);it&&re(lt,{event:fe,edge:it})}const Ee=fe=>{ue(fe,"edgecontextmenu")},Xe=fe=>{ue(fe,"edgemouseenter")},Ke=fe=>{ue(fe,"edgemouseleave")};return l.$$set=fe=>{"id"in fe&&t(0,h=fe.id),"type"in fe&&t(34,d=fe.type),"source"in fe&&t(1,p=fe.source),"target"in fe&&t(2,b=fe.target),"data"in fe&&t(3,w=fe.data),"style"in fe&&t(4,g=fe.style),"zIndex"in fe&&t(5,v=fe.zIndex),"animated"in fe&&t(6,k=fe.animated),"selected"in fe&&t(7,I=fe.selected),"selectable"in fe&&t(35,T=fe.selectable),"deletable"in fe&&t(8,M=fe.deletable),"hidden"in fe&&t(9,y=fe.hidden),"label"in fe&&t(10,H=fe.label),"labelStyle"in fe&&t(11,O=fe.labelStyle),"markerStart"in fe&&t(36,B=fe.markerStart),"markerEnd"in fe&&t(37,j=fe.markerEnd),"sourceHandle"in fe&&t(12,Z=fe.sourceHandle),"targetHandle"in fe&&t(13,L=fe.targetHandle),"sourceX"in fe&&t(14,D=fe.sourceX),"sourceY"in fe&&t(15,Y=fe.sourceY),"targetX"in fe&&t(16,P=fe.targetX),"targetY"in fe&&t(17,F=fe.targetY),"sourcePosition"in fe&&t(18,G=fe.sourcePosition),"targetPosition"in fe&&t(19,K=fe.targetPosition),"ariaLabel"in fe&&t(20,X=fe.ariaLabel),"interactionWidth"in fe&&t(21,Q=fe.interactionWidth),"class"in fe&&t(22,W=fe.class)},l.$$.update=()=>{l.$$.dirty[1]&8&&t(23,n=d||"default"),l.$$.dirty[0]&8388608|l.$$.dirty[1]&512&&t(27,o=f[n]||Ma),l.$$.dirty[1]&288&&t(26,s=B?`url('#${xo(B,u)}')`:void 0),l.$$.dirty[1]&320&&t(25,i=j?`url('#${xo(j,u)}')`:void 0),l.$$.dirty[1]&144&&t(24,r=T??c)},[h,p,b,w,g,v,k,I,M,y,H,O,Z,L,D,Y,P,F,G,K,X,Q,W,n,r,i,s,o,J,q,ce,ge,x,ue,d,T,B,j,c,u,f,Ee,Xe,Ke]}class ag extends Re{constructor(e){super(),Ue(this,e,ig,rg,Wi,{id:0,type:34,source:1,target:2,data:3,style:4,zIndex:5,animated:6,selected:7,selectable:35,deletable:8,hidden:9,label:10,labelStyle:11,markerStart:36,markerEnd:37,sourceHandle:12,targetHandle:13,sourceX:14,sourceY:15,targetX:16,targetY:17,sourcePosition:18,targetPosition:19,ariaLabel:20,interactionWidth:21,class:22},null,[-1,-1])}}function cg(l,e,t){let{onMount:n=void 0}=e,{onDestroy:o=void 0}=e;return kn(()=>(n==null||n(),o)),l.$$set=s=>{"onMount"in s&&t(0,n=s.onMount),"onDestroy"in s&&t(1,o=s.onDestroy)},[n,o]}class ug extends Re{constructor(e){super(),Ue(this,e,cg,null,Fe,{onMount:0,onDestroy:1})}}function jr(l,e,t){const n=l.slice();return n[2]=e[t],n}function Yr(l,e){let t,n,o;const s=[e[2]];let i={};for(let r=0;r<s.length;r+=1)i=Et(i,s[r]);return n=new bg({props:i}),{key:l,first:null,c(){t=Ae(),ne(n.$$.fragment),this.h()},l(r){t=Ae(),se(n.$$.fragment,r),this.h()},h(){this.first=t},m(r,a){A(r,t,a),le(n,r,a),o=!0},p(r,a){e=r;const c=a&1?nl(s,[Bl(e[2])]):{};n.$set(c)},i(r){o||(S(n.$$.fragment,r),o=!0)},o(r){N(n.$$.fragment,r),o=!1},d(r){r&&_(t),oe(n,r)}}}function fg(l){let e,t=[],n=new Map,o,s=vt(l[0]);const i=r=>r[2].id;for(let r=0;r<s.length;r+=1){let a=jr(l,s,r),c=i(a);n.set(c,t[r]=Yr(c,a))}return{c(){e=Te("defs");for(let r=0;r<t.length;r+=1)t[r].c()},l(r){e=Ve(r,"defs",{});var a=C(e);for(let c=0;c<t.length;c+=1)t[c].l(a);a.forEach(_)},m(r,a){A(r,e,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);o=!0},p(r,[a]){a&1&&(s=vt(r[0]),He(),t=bo(t,a,i,1,r,s,n,e,vo,Yr,null,jr),Be())},i(r){if(!o){for(let a=0;a<s.length;a+=1)S(t[a]);o=!0}},o(r){for(let a=0;a<t.length;a+=1)N(t[a]);o=!1},d(r){r&&_(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function dg(l,e,t){let n;const{markers:o}=Xt();return ae(l,o,s=>t(0,n=s)),[n,o]}class hg extends Re{constructor(e){super(),Ue(this,e,dg,fg,Fe,{})}}function mg(l){let e;return{c(){e=Te("polyline"),this.h()},l(t){e=Ve(t,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),C(e).forEach(_),this.h()},h(){m(e,"stroke",l[6]),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"stroke-width",l[7]),m(e,"fill",l[6]),m(e,"points","-5,-4 0,0 -5,4 -5,-4")},m(t,n){A(t,e,n)},p(t,n){n&64&&m(e,"stroke",t[6]),n&128&&m(e,"stroke-width",t[7]),n&64&&m(e,"fill",t[6])},d(t){t&&_(e)}}}function gg(l){let e;return{c(){e=Te("polyline"),this.h()},l(t){e=Ve(t,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),C(e).forEach(_),this.h()},h(){m(e,"stroke",l[6]),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"stroke-width",l[7]),m(e,"fill","none"),m(e,"points","-5,-4 0,0 -5,4")},m(t,n){A(t,e,n)},p(t,n){n&64&&m(e,"stroke",t[6]),n&128&&m(e,"stroke-width",t[7])},d(t){t&&_(e)}}}function _g(l){let e,t,n;function o(r,a){if(r[1]===ho.Arrow)return gg;if(r[1]===ho.ArrowClosed)return mg}let s=o(l),i=s&&s(l);return{c(){e=Te("marker"),i&&i.c(),this.h()},l(r){e=Ve(r,"marker",{class:!0,id:!0,markerWidth:!0,markerHeight:!0,viewBox:!0,markerUnits:!0,orient:!0,refX:!0,refY:!0});var a=C(e);i&&i.l(a),a.forEach(_),this.h()},h(){m(e,"class","svelte-flow__arrowhead"),m(e,"id",l[0]),m(e,"markerWidth",t=`${l[2]}`),m(e,"markerHeight",n=`${l[3]}`),m(e,"viewBox","-10 -10 20 20"),m(e,"markerUnits",l[4]),m(e,"orient",l[5]),m(e,"refX","0"),m(e,"refY","0")},m(r,a){A(r,e,a),i&&i.m(e,null)},p(r,[a]){s===(s=o(r))&&i?i.p(r,a):(i&&i.d(1),i=s&&s(r),i&&(i.c(),i.m(e,null))),a&1&&m(e,"id",r[0]),a&4&&t!==(t=`${r[2]}`)&&m(e,"markerWidth",t),a&8&&n!==(n=`${r[3]}`)&&m(e,"markerHeight",n),a&16&&m(e,"markerUnits",r[4]),a&32&&m(e,"orient",r[5])},i:ye,o:ye,d(r){r&&_(e),i&&i.d()}}}function pg(l,e,t){let{id:n}=e,{type:o}=e,{width:s=12.5}=e,{height:i=12.5}=e,{markerUnits:r="strokeWidth"}=e,{orient:a="auto-start-reverse"}=e,{color:c=void 0}=e,{strokeWidth:u=void 0}=e;return l.$$set=f=>{"id"in f&&t(0,n=f.id),"type"in f&&t(1,o=f.type),"width"in f&&t(2,s=f.width),"height"in f&&t(3,i=f.height),"markerUnits"in f&&t(4,r=f.markerUnits),"orient"in f&&t(5,a=f.orient),"color"in f&&t(6,c=f.color),"strokeWidth"in f&&t(7,u=f.strokeWidth)},[n,o,s,i,r,a,c,u]}class bg extends Re{constructor(e){super(),Ue(this,e,pg,_g,Fe,{id:0,type:1,width:2,height:3,markerUnits:4,orient:5,color:6,strokeWidth:7})}}function Xr(l,e,t){const n=l.slice();return n[14]=e[t],n}function Kr(l,e){let t,n,o;return n=new ag({props:{id:e[14].id,source:e[14].source,target:e[14].target,data:e[14].data,style:e[14].style,animated:e[14].animated,selected:e[14].selected,selectable:e[14].selectable??e[1],deletable:e[14].deletable,hidden:e[14].hidden,label:e[14].label,labelStyle:e[14].labelStyle,markerStart:e[14].markerStart,markerEnd:e[14].markerEnd,sourceHandle:e[14].sourceHandle,targetHandle:e[14].targetHandle,sourceX:e[14].sourceX,sourceY:e[14].sourceY,targetX:e[14].targetX,targetY:e[14].targetY,sourcePosition:e[14].sourcePosition,targetPosition:e[14].targetPosition,ariaLabel:e[14].ariaLabel,interactionWidth:e[14].interactionWidth,class:e[14].class,type:e[14].type||"default",zIndex:e[14].zIndex}}),n.$on("edgeclick",e[7]),n.$on("edgecontextmenu",e[8]),n.$on("edgemouseenter",e[9]),n.$on("edgemouseleave",e[10]),{key:l,first:null,c(){t=Ae(),ne(n.$$.fragment),this.h()},l(s){t=Ae(),se(n.$$.fragment,s),this.h()},h(){this.first=t},m(s,i){A(s,t,i),le(n,s,i),o=!0},p(s,i){e=s;const r={};i&1&&(r.id=e[14].id),i&1&&(r.source=e[14].source),i&1&&(r.target=e[14].target),i&1&&(r.data=e[14].data),i&1&&(r.style=e[14].style),i&1&&(r.animated=e[14].animated),i&1&&(r.selected=e[14].selected),i&3&&(r.selectable=e[14].selectable??e[1]),i&1&&(r.deletable=e[14].deletable),i&1&&(r.hidden=e[14].hidden),i&1&&(r.label=e[14].label),i&1&&(r.labelStyle=e[14].labelStyle),i&1&&(r.markerStart=e[14].markerStart),i&1&&(r.markerEnd=e[14].markerEnd),i&1&&(r.sourceHandle=e[14].sourceHandle),i&1&&(r.targetHandle=e[14].targetHandle),i&1&&(r.sourceX=e[14].sourceX),i&1&&(r.sourceY=e[14].sourceY),i&1&&(r.targetX=e[14].targetX),i&1&&(r.targetY=e[14].targetY),i&1&&(r.sourcePosition=e[14].sourcePosition),i&1&&(r.targetPosition=e[14].targetPosition),i&1&&(r.ariaLabel=e[14].ariaLabel),i&1&&(r.interactionWidth=e[14].interactionWidth),i&1&&(r.class=e[14].class),i&1&&(r.type=e[14].type||"default"),i&1&&(r.zIndex=e[14].zIndex),n.$set(r)},i(s){o||(S(n.$$.fragment,s),o=!0)},o(s){N(n.$$.fragment,s),o=!1},d(s){s&&_(t),oe(n,s)}}}function Zr(l){let e,t;return e=new ug({props:{onMount:l[11],onDestroy:l[12]}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&4&&(s.onMount=n[11]),o&4&&(s.onDestroy=n[12]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function vg(l){let e,t,n,o,s=[],i=new Map,r,a;n=new hg({});let c=vt(l[0]);const u=h=>h[14].id;for(let h=0;h<c.length;h+=1){let d=Xr(l,c,h),p=u(d);i.set(p,s[h]=Kr(p,d))}let f=l[0].length>0&&Zr(l);return{c(){e=V("div"),t=Te("svg"),ne(n.$$.fragment),o=ee();for(let h=0;h<s.length;h+=1)s[h].c();r=ee(),f&&f.c(),this.h()},l(h){e=z(h,"DIV",{class:!0});var d=C(e);t=Ve(d,"svg",{class:!0});var p=C(t);se(n.$$.fragment,p),p.forEach(_),o=te(d);for(let b=0;b<s.length;b+=1)s[b].l(d);r=te(d),f&&f.l(d),d.forEach(_),this.h()},h(){m(t,"class","svelte-flow__marker"),m(e,"class","svelte-flow__edges")},m(h,d){A(h,e,d),E(e,t),le(n,t,null),E(e,o);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(e,null);E(e,r),f&&f.m(e,null),a=!0},p(h,[d]){d&3&&(c=vt(h[0]),He(),s=bo(s,d,u,1,h,c,i,e,vo,Kr,r,Xr),Be()),h[0].length>0?f?(f.p(h,d),d&1&&S(f,1)):(f=Zr(h),f.c(),S(f,1),f.m(e,null)):f&&(He(),N(f,1,1,()=>{f=null}),Be())},i(h){if(!a){S(n.$$.fragment,h);for(let d=0;d<c.length;d+=1)S(s[d]);S(f),a=!0}},o(h){N(n.$$.fragment,h);for(let d=0;d<s.length;d+=1)N(s[d]);N(f),a=!1},d(h){h&&_(e),oe(n);for(let d=0;d<s.length;d+=1)s[d].d();f&&f.d()}}}function wg(l,e,t){let n,o,s,{defaultEdgeOptions:i}=e;const{visibleEdges:r,edgesInitialized:a,edges:{setDefaultOptions:c},elementsSelectable:u}=Xt();ae(l,r,g=>t(0,n=g)),ae(l,a,g=>t(2,s=g)),ae(l,u,g=>t(1,o=g)),kn(()=>{i&&c(i)});function f(g){gt.call(this,l,g)}function h(g){gt.call(this,l,g)}function d(g){gt.call(this,l,g)}function p(g){gt.call(this,l,g)}const b=()=>{io(a,s=!0,s)},w=()=>{io(a,s=!1,s)};return l.$$set=g=>{"defaultEdgeOptions"in g&&t(6,i=g.defaultEdgeOptions)},[n,o,s,r,a,u,i,f,h,d,p,b,w]}class kg extends Re{constructor(e){super(),Ue(this,e,wg,vg,Fe,{defaultEdgeOptions:6})}}function Gr(l){let e;return{c(){e=V("div"),this.h()},l(t){e=z(t,"DIV",{class:!0}),C(e).forEach(_),this.h()},h(){m(e,"class","svelte-flow__selection svelte-1iugwpu"),et(e,"width",typeof l[2]=="string"?l[2]:`${l[2]}px`),et(e,"height",typeof l[3]=="string"?l[3]:`${l[3]}px`),et(e,"transform",`translate(${l[0]}px, ${l[1]}px)`)},m(t,n){A(t,e,n)},p(t,n){n&4&&et(e,"width",typeof t[2]=="string"?t[2]:`${t[2]}px`),n&8&&et(e,"height",typeof t[3]=="string"?t[3]:`${t[3]}px`),n&3&&et(e,"transform",`translate(${t[0]}px, ${t[1]}px)`)},d(t){t&&_(e)}}}function yg(l){let e,t=l[4]&&Gr(l);return{c(){t&&t.c(),e=Ae()},l(n){t&&t.l(n),e=Ae()},m(n,o){t&&t.m(n,o),A(n,e,o)},p(n,[o]){n[4]?t?t.p(n,o):(t=Gr(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ye,o:ye,d(n){n&&_(e),t&&t.d(n)}}}function Eg(l,e,t){let{x:n=0}=e,{y:o=0}=e,{width:s=0}=e,{height:i=0}=e,{isVisible:r=!0}=e;return l.$$set=a=>{"x"in a&&t(0,n=a.x),"y"in a&&t(1,o=a.y),"width"in a&&t(2,s=a.width),"height"in a&&t(3,i=a.height),"isVisible"in a&&t(4,r=a.isVisible)},[n,o,s,i,r]}class Pa extends Re{constructor(e){super(),Ue(this,e,Eg,yg,Fe,{x:0,y:1,width:2,height:3,isVisible:4})}}function Ig(l){var n,o,s,i;let e,t;return e=new Pa({props:{isVisible:!!(l[0]&&l[1]==="user"),width:(n=l[0])==null?void 0:n.width,height:(o=l[0])==null?void 0:o.height,x:(s=l[0])==null?void 0:s.x,y:(i=l[0])==null?void 0:i.y}}),{c(){ne(e.$$.fragment)},l(r){se(e.$$.fragment,r)},m(r,a){le(e,r,a),t=!0},p(r,[a]){var u,f,h,d;const c={};a&3&&(c.isVisible=!!(r[0]&&r[1]==="user")),a&1&&(c.width=(u=r[0])==null?void 0:u.width),a&1&&(c.height=(f=r[0])==null?void 0:f.height),a&1&&(c.x=(h=r[0])==null?void 0:h.x),a&1&&(c.y=(d=r[0])==null?void 0:d.y),e.$set(c)},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){N(e.$$.fragment,r),t=!1},d(r){oe(e,r)}}}function Sg(l,e,t){let n,o;const{selectionRect:s,selectionRectMode:i}=Xt();return ae(l,s,r=>t(0,n=r)),ae(l,i,r=>t(1,o=r)),[n,o,s,i]}class Cg extends Re{constructor(e){super(),Ue(this,e,Sg,Ig,Fe,{})}}function qr(l){let e,t,n,o,s;return t=new Pa({props:{width:"100%",height:"100%",x:0,y:0}}),{c(){e=V("div"),ne(t.$$.fragment),this.h()},l(i){e=z(i,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var r=C(e);se(t.$$.fragment,r),r.forEach(_),this.h()},h(){m(e,"class","selection-wrapper nopan svelte-5pxri"),et(e,"width",l[1].width+"px"),et(e,"height",l[1].height+"px"),et(e,"transform","translate("+l[1].x+"px, "+l[1].y+"px)"),m(e,"role","button"),m(e,"tabindex","-1")},m(i,r){A(i,e,r),le(t,e,null),n=!0,o||(s=[vn(Na.call(null,e,{disabled:!1,store:l[2],onDrag:l[11],onDragStart:l[12],onDragStop:l[13]})),ke(e,"contextmenu",l[7]),ke(e,"click",l[8]),ke(e,"keyup",Mg)],o=!0)},p(i,r){(!n||r&2)&&et(e,"width",i[1].width+"px"),(!n||r&2)&&et(e,"height",i[1].height+"px"),(!n||r&2)&&et(e,"transform","translate("+i[1].x+"px, "+i[1].y+"px)")},i(i){n||(S(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){i&&_(e),oe(t),o=!1,on(s)}}}function Dg(l){let e=l[0]==="nodes"&&l[1]&&Hn(l[1].x)&&Hn(l[1].y),t,n,o=e&&qr(l);return{c(){o&&o.c(),t=Ae()},l(s){o&&o.l(s),t=Ae()},m(s,i){o&&o.m(s,i),A(s,t,i),n=!0},p(s,[i]){i&3&&(e=s[0]==="nodes"&&s[1]&&Hn(s[1].x)&&Hn(s[1].y)),e?o?(o.p(s,i),i&3&&S(o,1)):(o=qr(s),o.c(),S(o,1),o.m(t.parentNode,t)):o&&(He(),N(o,1,1,()=>{o=null}),Be())},i(s){n||(S(o),n=!0)},o(s){N(o),n=!1},d(s){s&&_(t),o&&o.d(s)}}}const Mg=()=>{};function Tg(l,e,t){let n,o,s;const i=Xt(),{selectionRectMode:r,nodes:a,nodeLookup:c}=i;ae(l,r,g=>t(0,s=g)),ae(l,a,g=>t(9,n=g)),ae(l,c,g=>t(10,o=g));const u=un();let f=null;function h(g){const v=n.filter(k=>k.selected);u("selectioncontextmenu",{nodes:v,event:g})}function d(g){const v=n.filter(k=>k.selected);u("selectionclick",{nodes:v,event:g})}const p=(g,v,k,I)=>{u("nodedrag",{event:g,targetNode:null,nodes:I})},b=(g,v,k,I)=>{u("nodedragstart",{event:g,targetNode:null,nodes:I})},w=(g,v,k,I)=>{u("nodedragstop",{event:g,targetNode:null,nodes:I})};return l.$$.update=()=>{l.$$.dirty&1537&&s==="nodes"&&t(1,f=Do(o,{filter:g=>!!g.selected}))},[s,f,i,r,a,c,u,h,d,n,o,p,b,w]}class Vg extends Re{constructor(e){super(),Ue(this,e,Tg,Dg,Fe,{})}}function Wn(l,e){let{enabled:t=!0,trigger:n,type:o="keydown"}=e;function s(i){const r=Array.isArray(n)?n:[n],a={alt:i.altKey,ctrl:i.ctrlKey,shift:i.shiftKey,meta:i.metaKey};for(const c of r){const u={modifier:[],preventDefault:!1,enabled:!0,...c},{modifier:f,key:h,callback:d,preventDefault:p,enabled:b}=u;if(b){if(f.length&&!(Array.isArray(f)?f:[f]).map(v=>typeof v=="string"?[v]:v).some(v=>v.every(k=>a[k])))continue;if(i.key===h){p&&i.preventDefault();const w={node:l,trigger:u,originalEvent:i};l.dispatchEvent(new CustomEvent("shortcut",{detail:w})),d==null||d(w)}}}}return t&&l.addEventListener(o,s),{update:i=>{const{enabled:r=!0,type:a="keydown"}=i;t&&(!r||o!==a)?l.removeEventListener(o,s):!t&&r&&l.addEventListener(a,s),t=r,o=a,n=i.trigger},destroy:()=>{l.removeEventListener(o,s)}}}function zg(l){let e,t,n,o,s,i,r,a,c,u,f,h;return{c:ye,l:ye,m(d,p){f||(h=[vn(e=Wn.call(null,window,{trigger:qt(l[0],l[11]),type:"keydown"})),vn(t=Wn.call(null,window,{trigger:qt(l[0],l[12]),type:"keyup"})),vn(n=Wn.call(null,window,{trigger:qt(l[1],l[13]),type:"keydown"})),vn(o=Wn.call(null,window,{trigger:qt(l[1],l[14]),type:"keyup"})),vn(s=Wn.call(null,window,{trigger:qt(l[2],l[15]),type:"keydown"})),vn(i=Wn.call(null,window,{trigger:qt(l[2],l[16]),type:"keyup"})),vn(r=Wn.call(null,window,{trigger:qt(l[3],l[17]),type:"keydown"})),vn(a=Wn.call(null,window,{trigger:qt(l[3],l[18]),type:"keyup"})),vn(c=Wn.call(null,window,{trigger:qt(l[4],l[19]),type:"keydown"})),vn(u=Wn.call(null,window,{trigger:qt(l[4],l[20]),type:"keyup"})),ke(window,"blur",l[10]),ke(window,"contextmenu",l[10])],f=!0)},p(d,[p]){e&&ln(e.update)&&p&1&&e.update.call(null,{trigger:qt(d[0],d[11]),type:"keydown"}),t&&ln(t.update)&&p&1&&t.update.call(null,{trigger:qt(d[0],d[12]),type:"keyup"}),n&&ln(n.update)&&p&2&&n.update.call(null,{trigger:qt(d[1],d[13]),type:"keydown"}),o&&ln(o.update)&&p&2&&o.update.call(null,{trigger:qt(d[1],d[14]),type:"keyup"}),s&&ln(s.update)&&p&4&&s.update.call(null,{trigger:qt(d[2],d[15]),type:"keydown"}),i&&ln(i.update)&&p&4&&i.update.call(null,{trigger:qt(d[2],d[16]),type:"keyup"}),r&&ln(r.update)&&p&8&&r.update.call(null,{trigger:qt(d[3],d[17]),type:"keydown"}),a&&ln(a.update)&&p&8&&a.update.call(null,{trigger:qt(d[3],d[18]),type:"keyup"}),c&&ln(c.update)&&p&16&&c.update.call(null,{trigger:qt(d[4],d[19]),type:"keydown"}),u&&ln(u.update)&&p&16&&u.update.call(null,{trigger:qt(d[4],d[20]),type:"keyup"})},i:ye,o:ye,d(d){f=!1,on(h)}}}function Oa(l){return l!==null&&typeof l=="object"}function Ng(l){return Oa(l)?l.modifier||[]:[]}function Pg(l){return l==null?"":Oa(l)?l.key:l}function qt(l,e){return(Array.isArray(l)?l:[l]).map(n=>{const o=Pg(n);return{key:o,modifier:Ng(n),enabled:o!==null,callback:e}})}function Og(l,e,t){let{selectionKey:n="Shift"}=e,{multiSelectionKey:o=go()?"Meta":"Control"}=e,{deleteKey:s="Backspace"}=e,{panActivationKey:i=" "}=e,{zoomActivationKey:r=go()?"Meta":"Control"}=e;const{selectionKeyPressed:a,multiselectionKeyPressed:c,deleteKeyPressed:u,panActivationKeyPressed:f,zoomActivationKeyPressed:h,selectionRect:d}=Xt();function p(){d.set(null),a.set(!1),c.set(!1),u.set(!1),f.set(!1),h.set(!1)}const b=()=>a.set(!0),w=()=>a.set(!1),g=()=>c.set(!0),v=()=>c.set(!1),k=O=>{!(O.originalEvent.ctrlKey||O.originalEvent.metaKey||O.originalEvent.shiftKey)&&!ph(O.originalEvent)&&u.set(!0)},I=()=>u.set(!1),T=()=>f.set(!0),M=()=>f.set(!1),y=()=>h.set(!0),H=()=>h.set(!1);return l.$$set=O=>{"selectionKey"in O&&t(0,n=O.selectionKey),"multiSelectionKey"in O&&t(1,o=O.multiSelectionKey),"deleteKey"in O&&t(2,s=O.deleteKey),"panActivationKey"in O&&t(3,i=O.panActivationKey),"zoomActivationKey"in O&&t(4,r=O.zoomActivationKey)},[n,o,s,i,r,a,c,u,f,h,p,b,w,g,v,k,I,T,M,y,H]}class Hg extends Re{constructor(e){super(),Ue(this,e,Og,zg,Fe,{selectionKey:0,multiSelectionKey:1,deleteKey:2,panActivationKey:3,zoomActivationKey:4})}}const Bg=l=>({}),Jr=l=>({});function Qr(l){let e,t,n,o;const s=l[13].connectionLine,i=Qt(s,l,l[12],Jr);let r=!l[2]&&xr(l);return{c(){e=Te("svg"),t=Te("g"),i&&i.c(),r&&r.c(),this.h()},l(a){e=Ve(a,"svg",{width:!0,height:!0,class:!0,style:!0});var c=C(e);t=Ve(c,"g",{class:!0});var u=C(t);i&&i.l(u),r&&r.l(u),u.forEach(_),c.forEach(_),this.h()},h(){m(t,"class",n=Ot(["svelte-flow__connection",kr(l[3].isValid)])),m(e,"width",l[5]),m(e,"height",l[6]),m(e,"class","svelte-flow__connectionline"),m(e,"style",l[0])},m(a,c){A(a,e,c),E(e,t),i&&i.m(t,null),r&&r.m(t,null),o=!0},p(a,c){i&&i.p&&(!o||c&4096)&&xt(i,s,a,a[12],o?en(s,a[12],c,Bg):$t(a[12]),Jr),a[2]?r&&(r.d(1),r=null):r?r.p(a,c):(r=xr(a),r.c(),r.m(t,null)),(!o||c&8&&n!==(n=Ot(["svelte-flow__connection",kr(a[3].isValid)])))&&m(t,"class",n),(!o||c&32)&&m(e,"width",a[5]),(!o||c&64)&&m(e,"height",a[6]),(!o||c&1)&&m(e,"style",a[0])},i(a){o||(S(i,a),o=!0)},o(a){N(i,a),o=!1},d(a){a&&_(e),i&&i.d(a),r&&r.d()}}}function xr(l){let e;return{c(){e=Te("path"),this.h()},l(t){e=Ve(t,"path",{d:!0,style:!0,fill:!0,class:!0}),C(e).forEach(_),this.h()},h(){m(e,"d",l[4]),m(e,"style",l[1]),m(e,"fill","none"),m(e,"class","svelte-flow__connection-path")},m(t,n){A(t,e,n)},p(t,n){n&16&&m(e,"d",t[4]),n&2&&m(e,"style",t[1])},d(t){t&&_(e)}}}function Ag(l){let e,t,n=l[3].inProgress&&Qr(l);return{c(){n&&n.c(),e=Ae()},l(o){n&&n.l(o),e=Ae()},m(o,s){n&&n.m(o,s),A(o,e,s),t=!0},p(o,[s]){o[3].inProgress?n?(n.p(o,s),s&8&&S(n,1)):(n=Qr(o),n.c(),S(n,1),n.m(e.parentNode,e)):n&&(He(),N(n,1,1,()=>{n=null}),Be())},i(o){t||(S(n),t=!0)},o(o){N(n),t=!1},d(o){o&&_(e),n&&n.d(o)}}}function Lg(l,e,t){let n,o,s,i,{$$slots:r={},$$scope:a}=e,{containerStyle:c=""}=e,{style:u=""}=e,{isCustomComponent:f=!1}=e;const{width:h,height:d,connection:p,connectionLineType:b}=Xt();ae(l,h,g=>t(5,s=g)),ae(l,d,g=>t(6,i=g)),ae(l,p,g=>t(3,o=g)),ae(l,b,g=>t(11,n=g));let w=null;return l.$$set=g=>{"containerStyle"in g&&t(0,c=g.containerStyle),"style"in g&&t(1,u=g.style),"isCustomComponent"in g&&t(2,f=g.isCustomComponent),"$$scope"in g&&t(12,a=g.$$scope)},l.$$.update=()=>{if(l.$$.dirty&2060&&o.inProgress&&!f){const{from:g,to:v,fromPosition:k,toPosition:I}=o,T={sourceX:g.x,sourceY:g.y,sourcePosition:k,targetX:v.x,targetY:v.y,targetPosition:I};switch(n){case El.Bezier:t(4,[w]=ua(T),w);break;case El.Step:t(4,[w]=_o({...T,borderRadius:0}),w);break;case El.SmoothStep:t(4,[w]=_o(T),w);break;default:t(4,[w]=da(T),w)}}},[c,u,f,o,w,s,i,h,d,p,b,n,a,r]}class Rg extends Re{constructor(e){super(),Ue(this,e,Lg,Ag,Fe,{containerStyle:0,style:1,isCustomComponent:2})}}function Ug(l){let e,t,n;const o=l[8].default,s=Qt(o,l,l[7],null);let i=[{class:t=Ot(["svelte-flow__panel",l[1],...l[2]])},{style:l[0]},l[5]],r={};for(let a=0;a<i.length;a+=1)r=Et(r,i[a]);return{c(){e=V("div"),s&&s.c(),this.h()},l(a){e=z(a,"DIV",{class:!0,style:!0});var c=C(e);s&&s.l(c),c.forEach(_),this.h()},h(){Il(e,r),et(e,"pointer-events",l[3]?"none":"")},m(a,c){A(a,e,c),s&&s.m(e,null),n=!0},p(a,[c]){s&&s.p&&(!n||c&128)&&xt(s,o,a,a[7],n?en(o,a[7],c,null):$t(a[7]),null),Il(e,r=nl(i,[(!n||c&6&&t!==(t=Ot(["svelte-flow__panel",a[1],...a[2]])))&&{class:t},(!n||c&1)&&{style:a[0]},c&32&&a[5]])),et(e,"pointer-events",a[3]?"none":"")},i(a){n||(S(s,a),n=!0)},o(a){N(s,a),n=!1},d(a){a&&_(e),s&&s.d(a)}}}function Wg(l,e,t){let n;const o=["position","style","class"];let s=Yt(e,o),i,{$$slots:r={},$$scope:a}=e,{position:c="top-right"}=e,{style:u=void 0}=e,{class:f=void 0}=e;const{selectionRectMode:h}=Xt();return ae(l,h,d=>t(3,i=d)),l.$$set=d=>{e=Et(Et({},e),Bn(d)),t(5,s=Yt(e,o)),"position"in d&&t(6,c=d.position),"style"in d&&t(0,u=d.style),"class"in d&&t(1,f=d.class),"$$scope"in d&&t(7,a=d.$$scope)},l.$$.update=()=>{l.$$.dirty&64&&t(2,n=`${c}`.split("-"))},[u,f,n,i,h,s,c,a,r]}class Ha extends Re{constructor(e){super(),Ue(this,e,Wg,Ug,Fe,{position:6,style:0,class:1})}}function $r(l){let e,t;return e=new Ha({props:{position:l[1],class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",$$slots:{default:[Fg]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&2&&(s.position=n[1]),o&4&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function Fg(l){let e,t="Svelte Flow";return{c(){e=V("a"),e.textContent=t,this.h()},l(n){e=z(n,"A",{href:!0,target:!0,rel:!0,"aria-label":!0,"data-svelte-h":!0}),ft(e)!=="svelte-2vm8e4"&&(e.textContent=t),this.h()},h(){m(e,"href","https://svelteflow.dev"),m(e,"target","_blank"),m(e,"rel","noopener noreferrer"),m(e,"aria-label","Svelte Flow attribution")},m(n,o){A(n,e,o)},p:ye,d(n){n&&_(e)}}}function jg(l){var o;let e,t,n=!((o=l[0])!=null&&o.hideAttribution)&&$r(l);return{c(){n&&n.c(),e=Ae()},l(s){n&&n.l(s),e=Ae()},m(s,i){n&&n.m(s,i),A(s,e,i),t=!0},p(s,[i]){var r;(r=s[0])!=null&&r.hideAttribution?n&&(He(),N(n,1,1,()=>{n=null}),Be()):n?(n.p(s,i),i&1&&S(n,1)):(n=$r(s),n.c(),S(n,1),n.m(e.parentNode,e))},i(s){t||(S(n),t=!0)},o(s){N(n),t=!1},d(s){s&&_(e),n&&n.d(s)}}}function Yg(l,e,t){let{proOptions:n=void 0}=e,{position:o="bottom-right"}=e;return l.$$set=s=>{"proOptions"in s&&t(0,n=s.proOptions),"position"in s&&t(1,o=s.position)},[n,o]}class Xg extends Re{constructor(e){super(),Ue(this,e,Yg,jg,Fe,{proOptions:0,position:1})}}function ei(l,{nodeTypes:e,edgeTypes:t,minZoom:n,maxZoom:o,translateExtent:s,paneClickDistance:i}){e!==void 0&&l.setNodeTypes(e),t!==void 0&&l.setEdgeTypes(t),n!==void 0&&l.setMinZoom(n),o!==void 0&&l.setMaxZoom(o),s!==void 0&&l.setTranslateExtent(s),i!==void 0&&l.setPaneClickDistance(i)}const Kg=l=>Object.keys(l);function Zg(l,e){Kg(e).forEach(t=>{const n=e[t];n!==void 0&&l[t].set(n)})}function Gg(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function qg(l="light"){return Pn("light",t=>{if(l!=="system"){t(l);return}const n=Gg(),o=()=>t(n!=null&&n.matches?"dark":"light");return t(n!=null&&n.matches?"dark":"light"),n==null||n.addEventListener("change",o),()=>{n==null||n.removeEventListener("change",o)}})}const Jg=l=>({}),ti=l=>({slot:"connectionLine"});function Qg(l){let e;const t=l[75].connectionLine,n=Qt(t,l,l[99],ti);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s[3]&64)&&xt(n,t,o,o[99],e?en(t,o[99],s,Jg):$t(o[99]),ti)},i(o){e||(S(n,o),e=!0)},o(o){N(n,o),e=!1},d(o){n&&n.d(o)}}}function xg(l){let e,t,n,o,s,i,r,a,c,u,f,h;return e=new kg({props:{defaultEdgeOptions:l[21]}}),e.$on("edgeclick",l[78]),e.$on("edgecontextmenu",l[79]),e.$on("edgemouseenter",l[80]),e.$on("edgemouseleave",l[81]),n=new Rg({props:{containerStyle:l[7],style:l[6],isCustomComponent:l[34].connectionLine,$$slots:{connectionLine:[Qg]},$$scope:{ctx:l}}}),c=new sg({props:{nodeClickDistance:l[23]}}),c.$on("nodeclick",l[82]),c.$on("nodemouseenter",l[83]),c.$on("nodemousemove",l[84]),c.$on("nodemouseleave",l[85]),c.$on("nodedragstart",l[86]),c.$on("nodedrag",l[87]),c.$on("nodedragstop",l[88]),c.$on("nodecontextmenu",l[89]),f=new Vg({}),f.$on("selectionclick",l[90]),f.$on("selectioncontextmenu",l[91]),f.$on("nodedragstart",l[92]),f.$on("nodedrag",l[93]),f.$on("nodedragstop",l[94]),{c(){ne(e.$$.fragment),t=ee(),ne(n.$$.fragment),o=ee(),s=V("div"),i=ee(),r=V("div"),a=ee(),ne(c.$$.fragment),u=ee(),ne(f.$$.fragment),this.h()},l(d){se(e.$$.fragment,d),t=te(d),se(n.$$.fragment,d),o=te(d),s=z(d,"DIV",{class:!0}),C(s).forEach(_),i=te(d),r=z(d,"DIV",{class:!0}),C(r).forEach(_),a=te(d),se(c.$$.fragment,d),u=te(d),se(f.$$.fragment,d),this.h()},h(){m(s,"class","svelte-flow__edgelabel-renderer"),m(r,"class","svelte-flow__viewport-portal")},m(d,p){le(e,d,p),A(d,t,p),le(n,d,p),A(d,o,p),A(d,s,p),A(d,i,p),A(d,r,p),A(d,a,p),le(c,d,p),A(d,u,p),le(f,d,p),h=!0},p(d,p){const b={};p[0]&2097152&&(b.defaultEdgeOptions=d[21]),e.$set(b);const w={};p[0]&128&&(w.containerStyle=d[7]),p[0]&64&&(w.style=d[6]),p[1]&8&&(w.isCustomComponent=d[34].connectionLine),p[3]&64&&(w.$$scope={dirty:p,ctx:d}),n.$set(w);const g={};p[0]&8388608&&(g.nodeClickDistance=d[23]),c.$set(g)},i(d){h||(S(e.$$.fragment,d),S(n.$$.fragment,d),S(c.$$.fragment,d),S(f.$$.fragment,d),h=!0)},o(d){N(e.$$.fragment,d),N(n.$$.fragment,d),N(c.$$.fragment,d),N(f.$$.fragment,d),h=!1},d(d){d&&(_(t),_(o),_(s),_(i),_(r),_(a),_(u)),oe(e,d),oe(n,d),oe(c,d),oe(f,d)}}}function $g(l){let e,t,n,o;return e=new Qm({props:{$$slots:{default:[xg]},$$scope:{ctx:l}}}),n=new Cg({}),{c(){ne(e.$$.fragment),t=ee(),ne(n.$$.fragment)},l(s){se(e.$$.fragment,s),t=te(s),se(n.$$.fragment,s)},m(s,i){le(e,s,i),A(s,t,i),le(n,s,i),o=!0},p(s,i){const r={};i[0]&10485952|i[1]&8|i[3]&64&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){o||(S(e.$$.fragment,s),S(n.$$.fragment,s),o=!0)},o(s){N(e.$$.fragment,s),N(n.$$.fragment,s),o=!1},d(s){s&&_(t),oe(e,s),oe(n,s)}}}function e1(l){let e,t;return e=new Gm({props:{panOnDrag:l[17]===void 0?!0:l[17],selectionOnDrag:l[18],$$slots:{default:[$g]},$$scope:{ctx:l}}}),e.$on("paneclick",l[95]),e.$on("panecontextmenu",l[96]),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o[0]&131072&&(s.panOnDrag=n[17]===void 0?!0:n[17]),o[0]&262144&&(s.selectionOnDrag=n[18]),o[0]&10485952|o[1]&8|o[3]&64&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function t1(l){let e,t,n,o,s,i,r,a,c,u,f,h;t=new Hg({props:{selectionKey:l[1],deleteKey:l[5],panActivationKey:l[2],multiSelectionKey:l[3],zoomActivationKey:l[4]}}),o=new Xm({props:{initialViewport:l[31],onMoveStart:l[8],onMove:l[9],onMoveEnd:l[10],panOnScrollMode:l[11]===void 0?Yn.Free:l[11],preventScrolling:l[12]===void 0?!0:l[12],zoomOnScroll:l[13]===void 0?!0:l[13],zoomOnDoubleClick:l[14]===void 0?!0:l[14],zoomOnPinch:l[15]===void 0?!0:l[15],panOnScroll:l[16]===void 0?!1:l[16],panOnDrag:l[17]===void 0?!0:l[17],paneClickDistance:l[22]===void 0?0:l[22],$$slots:{default:[e1]},$$scope:{ctx:l}}}),i=new Xg({props:{proOptions:l[20],position:l[19]}});const d=l[75].default,p=Qt(d,l,l[99],null);let b=[{style:l[24]},{class:a=Ot(["svelte-flow",l[25],l[30]])},{"data-testid":"svelte-flow__wrapper"},l[33],{role:"application"}],w={};for(let g=0;g<b.length;g+=1)w=Et(w,b[g]);return{c(){e=V("div"),ne(t.$$.fragment),n=ee(),ne(o.$$.fragment),s=ee(),ne(i.$$.fragment),r=ee(),p&&p.c(),this.h()},l(g){e=z(g,"DIV",{style:!0,class:!0,"data-testid":!0,role:!0});var v=C(e);se(t.$$.fragment,v),n=te(v),se(o.$$.fragment,v),s=te(v),se(i.$$.fragment,v),r=te(v),p&&p.l(v),v.forEach(_),this.h()},h(){Il(e,w),tl(()=>l[98].call(e)),st(e,"svelte-12wlba6",!0)},m(g,v){A(g,e,v),le(t,e,null),E(e,n),le(o,e,null),E(e,s),le(i,e,null),E(e,r),p&&p.m(e,null),l[97](e),c=Wa(e,l[98].bind(e)),u=!0,f||(h=[ke(e,"dragover",l[76]),ke(e,"drop",l[77])],f=!0)},p(g,v){const k={};v[0]&2&&(k.selectionKey=g[1]),v[0]&32&&(k.deleteKey=g[5]),v[0]&4&&(k.panActivationKey=g[2]),v[0]&8&&(k.multiSelectionKey=g[3]),v[0]&16&&(k.zoomActivationKey=g[4]),t.$set(k);const I={};v[0]&256&&(I.onMoveStart=g[8]),v[0]&512&&(I.onMove=g[9]),v[0]&1024&&(I.onMoveEnd=g[10]),v[0]&2048&&(I.panOnScrollMode=g[11]===void 0?Yn.Free:g[11]),v[0]&4096&&(I.preventScrolling=g[12]===void 0?!0:g[12]),v[0]&8192&&(I.zoomOnScroll=g[13]===void 0?!0:g[13]),v[0]&16384&&(I.zoomOnDoubleClick=g[14]===void 0?!0:g[14]),v[0]&32768&&(I.zoomOnPinch=g[15]===void 0?!0:g[15]),v[0]&65536&&(I.panOnScroll=g[16]===void 0?!1:g[16]),v[0]&131072&&(I.panOnDrag=g[17]===void 0?!0:g[17]),v[0]&4194304&&(I.paneClickDistance=g[22]===void 0?0:g[22]),v[0]&10879168|v[1]&8|v[3]&64&&(I.$$scope={dirty:v,ctx:g}),o.$set(I);const T={};v[0]&1048576&&(T.proOptions=g[20]),v[0]&524288&&(T.position=g[19]),i.$set(T),p&&p.p&&(!u||v[3]&64)&&xt(p,d,g,g[99],u?en(d,g[99],v,null):$t(g[99]),null),Il(e,w=nl(b,[(!u||v[0]&16777216)&&{style:g[24]},(!u||v[0]&1107296256&&a!==(a=Ot(["svelte-flow",g[25],g[30]])))&&{class:a},{"data-testid":"svelte-flow__wrapper"},v[1]&4&&g[33],{role:"application"}])),st(e,"svelte-12wlba6",!0)},i(g){u||(S(t.$$.fragment,g),S(o.$$.fragment,g),S(i.$$.fragment,g),S(p,g),u=!0)},o(g){N(t.$$.fragment,g),N(o.$$.fragment,g),N(i.$$.fragment,g),N(p,g),u=!1},d(g){g&&_(e),oe(t),oe(o),oe(i),p&&p.d(g),l[97](null),c(),f=!1,on(h)}}}function n1(l,e,t){let n;const o=["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"];let s=Yt(e,o),i,r,a=ye,c=()=>(a(),a=fs(H,$=>t(100,r=$)),H),u,f=ye,h=()=>(f(),f=fs(n,$=>t(30,u=$)),n);l.$$.on_destroy.push(()=>a()),l.$$.on_destroy.push(()=>f());let{$$slots:d={},$$scope:p}=e;const b=Fa(d);let{id:w="1"}=e,{nodes:g}=e,{edges:v}=e,{fitView:k=void 0}=e,{fitViewOptions:I=void 0}=e,{minZoom:T=void 0}=e,{maxZoom:M=void 0}=e,{initialViewport:y=void 0}=e,{viewport:H=void 0}=e;c();let{nodeTypes:O=void 0}=e,{edgeTypes:B=void 0}=e,{selectionKey:j=void 0}=e,{selectionMode:Z=void 0}=e,{panActivationKey:L=void 0}=e,{multiSelectionKey:D=void 0}=e,{zoomActivationKey:Y=void 0}=e,{nodesDraggable:P=void 0}=e,{nodesConnectable:F=void 0}=e,{nodeDragThreshold:G=void 0}=e,{elementsSelectable:K=void 0}=e,{snapGrid:X=void 0}=e,{deleteKey:Q=void 0}=e,{connectionRadius:W=void 0}=e,{connectionLineType:J=void 0}=e,{connectionMode:q=fl.Strict}=e,{connectionLineStyle:ce=""}=e,{connectionLineContainerStyle:ge=""}=e,{onMoveStart:re=void 0}=e,{onMove:Pe=void 0}=e,{onMoveEnd:x=void 0}=e,{isValidConnection:ue=void 0}=e,{translateExtent:Ee=void 0}=e,{nodeExtent:Xe=void 0}=e,{onlyRenderVisibleElements:Ke=void 0}=e,{panOnScrollMode:fe=Yn.Free}=e,{preventScrolling:lt=!0}=e,{zoomOnScroll:it=!0}=e,{zoomOnDoubleClick:zt=!0}=e,{zoomOnPinch:Ct=!0}=e,{panOnScroll:Ht=!1}=e,{panOnDrag:wt=!0}=e,{selectionOnDrag:Ut=void 0}=e,{autoPanOnConnect:pe=!0}=e,{autoPanOnNodeDrag:Ye=!0}=e,{onerror:ot=void 0}=e,{ondelete:he=void 0}=e,{onedgecreate:kt=void 0}=e,{attributionPosition:ht=void 0}=e,{proOptions:bt=void 0}=e,{defaultEdgeOptions:De=void 0}=e,{width:Nt=void 0}=e,{height:mt=void 0}=e,{colorMode:de="light"}=e,{onconnect:Ce=void 0}=e,{onconnectstart:ze=void 0}=e,{onconnectend:Ge=void 0}=e,{onbeforedelete:It=void 0}=e,{oninit:yt=void 0}=e,{nodeOrigin:Dt=void 0}=e,{paneClickDistance:Mt=0}=e,{nodeClickDistance:sn=0}=e,{defaultMarkerColor:Bt="#b1b1b7"}=e,{style:At=void 0}=e,{class:Kt=void 0}=e,Gt,tn,rn;const Wt=r||y,_t=ja(No)?Xt():Wm({nodes:me(g),edges:me(v),width:Nt,height:mt,fitView:k,nodeOrigin:Dt,nodeExtent:Xe});kn(()=>(_t.width.set(tn),_t.height.set(rn),_t.domNode.set(Gt),_t.syncNodeStores(g),_t.syncEdgeStores(v),_t.syncViewport(H),k!==void 0&&_t.fitViewOnInit.set(k),I&&_t.fitViewOptions.set(I),ei(_t,{nodeTypes:O,edgeTypes:B,minZoom:T,maxZoom:M,translateExtent:Ee,paneClickDistance:Mt}),()=>{_t.reset()}));const{initialized:Jt}=_t;ae(l,Jt,$=>t(74,i=$));let fn=!1;function U($){gt.call(this,l,$)}function Ne($){gt.call(this,l,$)}function Ze($){gt.call(this,l,$)}function xe($){gt.call(this,l,$)}function je($){gt.call(this,l,$)}function at($){gt.call(this,l,$)}function hn($){gt.call(this,l,$)}function an($){gt.call(this,l,$)}function ut($){gt.call(this,l,$)}function Lt($){gt.call(this,l,$)}function Tn($){gt.call(this,l,$)}function An($){gt.call(this,l,$)}function pn($){gt.call(this,l,$)}function hl($){gt.call(this,l,$)}function ol($){gt.call(this,l,$)}function Cn($){gt.call(this,l,$)}function Ln($){gt.call(this,l,$)}function Xn($){gt.call(this,l,$)}function $n($){gt.call(this,l,$)}function sl($){gt.call(this,l,$)}function Vn($){gt.call(this,l,$)}function ml($){We[$?"unshift":"push"](()=>{Gt=$,t(28,Gt)})}function rl(){tn=this.clientWidth,rn=this.clientHeight,t(26,tn),t(27,rn)}return l.$$set=$=>{e=Et(Et({},e),Bn($)),t(33,s=Yt(e,o)),"id"in $&&t(35,w=$.id),"nodes"in $&&t(36,g=$.nodes),"edges"in $&&t(37,v=$.edges),"fitView"in $&&t(38,k=$.fitView),"fitViewOptions"in $&&t(39,I=$.fitViewOptions),"minZoom"in $&&t(40,T=$.minZoom),"maxZoom"in $&&t(41,M=$.maxZoom),"initialViewport"in $&&t(42,y=$.initialViewport),"viewport"in $&&c(t(0,H=$.viewport)),"nodeTypes"in $&&t(43,O=$.nodeTypes),"edgeTypes"in $&&t(44,B=$.edgeTypes),"selectionKey"in $&&t(1,j=$.selectionKey),"selectionMode"in $&&t(45,Z=$.selectionMode),"panActivationKey"in $&&t(2,L=$.panActivationKey),"multiSelectionKey"in $&&t(3,D=$.multiSelectionKey),"zoomActivationKey"in $&&t(4,Y=$.zoomActivationKey),"nodesDraggable"in $&&t(46,P=$.nodesDraggable),"nodesConnectable"in $&&t(47,F=$.nodesConnectable),"nodeDragThreshold"in $&&t(48,G=$.nodeDragThreshold),"elementsSelectable"in $&&t(49,K=$.elementsSelectable),"snapGrid"in $&&t(50,X=$.snapGrid),"deleteKey"in $&&t(5,Q=$.deleteKey),"connectionRadius"in $&&t(51,W=$.connectionRadius),"connectionLineType"in $&&t(52,J=$.connectionLineType),"connectionMode"in $&&t(53,q=$.connectionMode),"connectionLineStyle"in $&&t(6,ce=$.connectionLineStyle),"connectionLineContainerStyle"in $&&t(7,ge=$.connectionLineContainerStyle),"onMoveStart"in $&&t(8,re=$.onMoveStart),"onMove"in $&&t(9,Pe=$.onMove),"onMoveEnd"in $&&t(10,x=$.onMoveEnd),"isValidConnection"in $&&t(54,ue=$.isValidConnection),"translateExtent"in $&&t(55,Ee=$.translateExtent),"nodeExtent"in $&&t(56,Xe=$.nodeExtent),"onlyRenderVisibleElements"in $&&t(57,Ke=$.onlyRenderVisibleElements),"panOnScrollMode"in $&&t(11,fe=$.panOnScrollMode),"preventScrolling"in $&&t(12,lt=$.preventScrolling),"zoomOnScroll"in $&&t(13,it=$.zoomOnScroll),"zoomOnDoubleClick"in $&&t(14,zt=$.zoomOnDoubleClick),"zoomOnPinch"in $&&t(15,Ct=$.zoomOnPinch),"panOnScroll"in $&&t(16,Ht=$.panOnScroll),"panOnDrag"in $&&t(17,wt=$.panOnDrag),"selectionOnDrag"in $&&t(18,Ut=$.selectionOnDrag),"autoPanOnConnect"in $&&t(58,pe=$.autoPanOnConnect),"autoPanOnNodeDrag"in $&&t(59,Ye=$.autoPanOnNodeDrag),"onerror"in $&&t(60,ot=$.onerror),"ondelete"in $&&t(61,he=$.ondelete),"onedgecreate"in $&&t(62,kt=$.onedgecreate),"attributionPosition"in $&&t(19,ht=$.attributionPosition),"proOptions"in $&&t(20,bt=$.proOptions),"defaultEdgeOptions"in $&&t(21,De=$.defaultEdgeOptions),"width"in $&&t(63,Nt=$.width),"height"in $&&t(64,mt=$.height),"colorMode"in $&&t(65,de=$.colorMode),"onconnect"in $&&t(66,Ce=$.onconnect),"onconnectstart"in $&&t(67,ze=$.onconnectstart),"onconnectend"in $&&t(68,Ge=$.onconnectend),"onbeforedelete"in $&&t(69,It=$.onbeforedelete),"oninit"in $&&t(70,yt=$.oninit),"nodeOrigin"in $&&t(71,Dt=$.nodeOrigin),"paneClickDistance"in $&&t(22,Mt=$.paneClickDistance),"nodeClickDistance"in $&&t(23,sn=$.nodeClickDistance),"defaultMarkerColor"in $&&t(72,Bt=$.defaultMarkerColor),"style"in $&&t(24,At=$.style),"class"in $&&t(25,Kt=$.class),"$$scope"in $&&t(99,p=$.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&201326592&&tn!==void 0&&rn!==void 0&&(_t.width.set(tn),_t.height.set(rn)),l.$$.dirty[2]&6400&&!fn&&i&&(yt==null||yt(),t(73,fn=!0)),l.$$.dirty[1]&2097135632|l.$$.dirty[2]&1777&&Zg(_t,{flowId:w,connectionLineType:J,connectionRadius:W,selectionMode:Z,snapGrid:X,defaultMarkerColor:Bt,nodesDraggable:P,nodesConnectable:F,elementsSelectable:K,onlyRenderVisibleElements:Ke,isValidConnection:ue,autoPanOnConnect:pe,autoPanOnNodeDrag:Ye,onerror:ot,ondelete:he,onedgecreate:kt,connectionMode:q,nodeDragThreshold:G,onconnect:Ce,onconnectstart:ze,onconnectend:Ge,onbeforedelete:It,nodeOrigin:Dt}),l.$$.dirty[0]&4194304|l.$$.dirty[1]&16791040&&ei(_t,{nodeTypes:O,edgeTypes:B,minZoom:T,maxZoom:M,translateExtent:Ee,paneClickDistance:Mt}),l.$$.dirty[2]&8&&h(t(29,n=qg(de)))},[H,j,L,D,Y,Q,ce,ge,re,Pe,x,fe,lt,it,zt,Ct,Ht,wt,Ut,ht,bt,De,Mt,sn,At,Kt,tn,rn,Gt,n,u,Wt,Jt,s,b,w,g,v,k,I,T,M,y,O,B,Z,P,F,G,K,X,W,J,q,ue,Ee,Xe,Ke,pe,Ye,ot,he,kt,Nt,mt,de,Ce,ze,Ge,It,yt,Dt,Bt,fn,i,d,U,Ne,Ze,xe,je,at,hn,an,ut,Lt,Tn,An,pn,hl,ol,Cn,Ln,Xn,$n,sl,Vn,ml,rl,p]}class l1 extends Re{constructor(e){super(),Ue(this,e,n1,t1,Fe,{id:35,nodes:36,edges:37,fitView:38,fitViewOptions:39,minZoom:40,maxZoom:41,initialViewport:42,viewport:0,nodeTypes:43,edgeTypes:44,selectionKey:1,selectionMode:45,panActivationKey:2,multiSelectionKey:3,zoomActivationKey:4,nodesDraggable:46,nodesConnectable:47,nodeDragThreshold:48,elementsSelectable:49,snapGrid:50,deleteKey:5,connectionRadius:51,connectionLineType:52,connectionMode:53,connectionLineStyle:6,connectionLineContainerStyle:7,onMoveStart:8,onMove:9,onMoveEnd:10,isValidConnection:54,translateExtent:55,nodeExtent:56,onlyRenderVisibleElements:57,panOnScrollMode:11,preventScrolling:12,zoomOnScroll:13,zoomOnDoubleClick:14,zoomOnPinch:15,panOnScroll:16,panOnDrag:17,selectionOnDrag:18,autoPanOnConnect:58,autoPanOnNodeDrag:59,onerror:60,ondelete:61,onedgecreate:62,attributionPosition:19,proOptions:20,defaultEdgeOptions:21,width:63,height:64,colorMode:65,onconnect:66,onconnectstart:67,onconnectend:68,onbeforedelete:69,oninit:70,nodeOrigin:71,paneClickDistance:22,nodeClickDistance:23,defaultMarkerColor:72,style:24,class:25},null,[-1,-1,-1,-1])}}function o1(l){let e;const t=l[7].default,n=Qt(t,l,l[6],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,[s]){n&&n.p&&(!e||s&64)&&xt(n,t,o,o[6],e?en(t,o[6],s,null):$t(o[6]),null)},i(o){e||(S(n,o),e=!0)},o(o){N(n,o),e=!1},d(o){n&&n.d(o)}}}function s1(l,e,t){let{$$slots:n={},$$scope:o}=e,{initialNodes:s=void 0}=e,{initialEdges:i=void 0}=e,{initialWidth:r=void 0}=e,{initialHeight:a=void 0}=e,{fitView:c=void 0}=e,{nodeOrigin:u=void 0}=e;const f=za({nodes:s,edges:i,width:r,height:a,nodeOrigin:u,fitView:c});return Ol(No,{getStore:()=>f}),ll(()=>{f.reset()}),l.$$set=h=>{"initialNodes"in h&&t(0,s=h.initialNodes),"initialEdges"in h&&t(1,i=h.initialEdges),"initialWidth"in h&&t(2,r=h.initialWidth),"initialHeight"in h&&t(3,a=h.initialHeight),"fitView"in h&&t(4,c=h.fitView),"nodeOrigin"in h&&t(5,u=h.nodeOrigin),"$$scope"in h&&t(6,o=h.$$scope)},[s,i,r,a,c,u,o,n]}class r1 extends Re{constructor(e){super(),Ue(this,e,s1,o1,Fe,{initialNodes:0,initialEdges:1,initialWidth:2,initialHeight:3,fitView:4,nodeOrigin:5})}}const i1=l=>({}),ni=l=>({class:"button-svg"});function a1(l){let e,t,n,o,s;const i=l[8].default,r=Qt(i,l,l[7],ni);let a=[{type:"button"},{class:t=Ot(["svelte-flow__controls-button",l[0]])},l[6]],c={};for(let u=0;u<a.length;u+=1)c=Et(c,a[u]);return{c(){e=V("button"),r&&r.c(),this.h()},l(u){e=z(u,"BUTTON",{type:!0,class:!0});var f=C(e);r&&r.l(f),f.forEach(_),this.h()},h(){Il(e,c),et(e,"--xy-controls-button-background-color-props",l[1]),et(e,"--xy-controls-button-background-color-hover-props",l[2]),et(e,"--xy-controls-button-color-props",l[3]),et(e,"--xy-controls-button-color-hover-props",l[4]),et(e,"--xy-controls-button-border-color-props",l[5])},m(u,f){A(u,e,f),r&&r.m(e,null),e.autofocus&&e.focus(),n=!0,o||(s=ke(e,"click",l[9]),o=!0)},p(u,[f]){r&&r.p&&(!n||f&128)&&xt(r,i,u,u[7],n?en(i,u[7],f,i1):$t(u[7]),ni),Il(e,c=nl(a,[{type:"button"},(!n||f&1&&t!==(t=Ot(["svelte-flow__controls-button",u[0]])))&&{class:t},f&64&&u[6]])),et(e,"--xy-controls-button-background-color-props",u[1]),et(e,"--xy-controls-button-background-color-hover-props",u[2]),et(e,"--xy-controls-button-color-props",u[3]),et(e,"--xy-controls-button-color-hover-props",u[4]),et(e,"--xy-controls-button-border-color-props",u[5])},i(u){n||(S(r,u),n=!0)},o(u){N(r,u),n=!1},d(u){u&&_(e),r&&r.d(u),o=!1,s()}}}function c1(l,e,t){const n=["class"];let o=Yt(e,n),{$$slots:s={},$$scope:i}=e,{class:r=void 0}=e,a,c,u,f,h;function d(p){gt.call(this,l,p)}return l.$$set=p=>{e=Et(Et({},e),Bn(p)),t(6,o=Yt(e,n)),"class"in p&&t(0,r=p.class),"$$scope"in p&&t(7,i=p.$$scope)},[r,a,c,u,f,h,o,i,s,d]}class po extends Re{constructor(e){super(),Ue(this,e,c1,a1,Fe,{class:0})}}function u1(l){let e,t;return{c(){e=Te("svg"),t=Te("path"),this.h()},l(n){e=Ve(n,"svg",{xmlns:!0,viewBox:!0});var o=C(e);t=Ve(o,"path",{d:!0}),C(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"d","M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 32 32")},m(n,o){A(n,e,o),E(e,t)},p:ye,i:ye,o:ye,d(n){n&&_(e)}}}class f1 extends Re{constructor(e){super(),Ue(this,e,null,u1,Fe,{})}}function d1(l){let e,t;return{c(){e=Te("svg"),t=Te("path"),this.h()},l(n){e=Ve(n,"svg",{xmlns:!0,viewBox:!0});var o=C(e);t=Ve(o,"path",{d:!0}),C(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"d","M0 0h32v4.2H0z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 32 5")},m(n,o){A(n,e,o),E(e,t)},p:ye,i:ye,o:ye,d(n){n&&_(e)}}}class h1 extends Re{constructor(e){super(),Ue(this,e,null,d1,Fe,{})}}function m1(l){let e,t;return{c(){e=Te("svg"),t=Te("path"),this.h()},l(n){e=Ve(n,"svg",{xmlns:!0,viewBox:!0});var o=C(e);t=Ve(o,"path",{d:!0}),C(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"d","M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 32 30")},m(n,o){A(n,e,o),E(e,t)},p:ye,i:ye,o:ye,d(n){n&&_(e)}}}class g1 extends Re{constructor(e){super(),Ue(this,e,null,m1,Fe,{})}}function _1(l){let e,t;return{c(){e=Te("svg"),t=Te("path"),this.h()},l(n){e=Ve(n,"svg",{xmlns:!0,viewBox:!0});var o=C(e);t=Ve(o,"path",{d:!0}),C(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 25 32")},m(n,o){A(n,e,o),E(e,t)},p:ye,i:ye,o:ye,d(n){n&&_(e)}}}class p1 extends Re{constructor(e){super(),Ue(this,e,null,_1,Fe,{})}}function b1(l){let e,t;return{c(){e=Te("svg"),t=Te("path"),this.h()},l(n){e=Ve(n,"svg",{xmlns:!0,viewBox:!0});var o=C(e);t=Ve(o,"path",{d:!0}),C(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 25 32")},m(n,o){A(n,e,o),E(e,t)},p:ye,i:ye,o:ye,d(n){n&&_(e)}}}class v1 extends Re{constructor(e){super(),Ue(this,e,null,b1,Fe,{})}}const w1=l=>({}),li=l=>({}),k1=l=>({}),oi=l=>({});function si(l){let e,t,n,o;const s=[{class:"svelte-flow__controls-zoomin"},{title:"zoom in"},{"aria-label":"zoom in"},{disabled:l[9]},l[17]];let i={$$slots:{default:[y1]},$$scope:{ctx:l}};for(let c=0;c<s.length;c+=1)i=Et(i,s[c]);e=new po({props:i}),e.$on("click",l[18]);const r=[{class:"svelte-flow__controls-zoomout"},{title:"zoom out"},{"aria-label":"zoom out"},{disabled:l[10]},l[17]];let a={$$slots:{default:[E1]},$$scope:{ctx:l}};for(let c=0;c<r.length;c+=1)a=Et(a,r[c]);return n=new po({props:a}),n.$on("click",l[19]),{c(){ne(e.$$.fragment),t=ee(),ne(n.$$.fragment)},l(c){se(e.$$.fragment,c),t=te(c),se(n.$$.fragment,c)},m(c,u){le(e,c,u),A(c,t,u),le(n,c,u),o=!0},p(c,u){const f=u[0]&131584?nl(s,[s[0],s[1],s[2],u[0]&512&&{disabled:c[9]},u[0]&131072&&Bl(c[17])]):{};u[1]&32&&(f.$$scope={dirty:u,ctx:c}),e.$set(f);const h=u[0]&132096?nl(r,[r[0],r[1],r[2],u[0]&1024&&{disabled:c[10]},u[0]&131072&&Bl(c[17])]):{};u[1]&32&&(h.$$scope={dirty:u,ctx:c}),n.$set(h)},i(c){o||(S(e.$$.fragment,c),S(n.$$.fragment,c),o=!0)},o(c){N(e.$$.fragment,c),N(n.$$.fragment,c),o=!1},d(c){c&&_(t),oe(e,c),oe(n,c)}}}function y1(l){let e,t;return e=new f1({}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function E1(l){let e,t;return e=new h1({}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function ri(l){let e,t;const n=[{class:"svelte-flow__controls-fitview"},{title:"fit view"},{"aria-label":"fit view"},l[17]];let o={$$slots:{default:[I1]},$$scope:{ctx:l}};for(let s=0;s<n.length;s+=1)o=Et(o,n[s]);return e=new po({props:o}),e.$on("click",l[20]),{c(){ne(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,i){le(e,s,i),t=!0},p(s,i){const r=i[0]&131072?nl(n,[n[0],n[1],n[2],Bl(s[17])]):{};i[1]&32&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){t||(S(e.$$.fragment,s),t=!0)},o(s){N(e.$$.fragment,s),t=!1},d(s){oe(e,s)}}}function I1(l){let e,t;return e=new g1({}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function ii(l){let e,t;const n=[{class:"svelte-flow__controls-interactive"},{title:"toggle interactivity"},{"aria-label":"toggle interactivity"},l[17]];let o={$$slots:{default:[D1]},$$scope:{ctx:l}};for(let s=0;s<n.length;s+=1)o=Et(o,n[s]);return e=new po({props:o}),e.$on("click",l[21]),{c(){ne(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,i){le(e,s,i),t=!0},p(s,i){const r=i[0]&131072?nl(n,[n[0],n[1],n[2],Bl(s[17])]):{};i[0]&256|i[1]&32&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){t||(S(e.$$.fragment,s),t=!0)},o(s){N(e.$$.fragment,s),t=!1},d(s){oe(e,s)}}}function S1(l){let e,t;return e=new p1({}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function C1(l){let e,t;return e=new v1({}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function D1(l){let e,t,n,o;const s=[C1,S1],i=[];function r(a,c){return a[8]?0:1}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ae()},l(a){t.l(a),n=Ae()},m(a,c){i[e].m(a,c),A(a,n,c),o=!0},p(a,c){let u=e;e=r(a),e!==u&&(He(),N(i[u],1,1,()=>{i[u]=null}),Be(),t=i[e],t||(t=i[e]=s[e](a),t.c()),S(t,1),t.m(n.parentNode,n))},i(a){o||(S(t),o=!0)},o(a){N(t),o=!1},d(a){a&&_(n),i[e].d(a)}}}function M1(l){let e,t,n,o,s,i;const r=l[35].before,a=Qt(r,l,l[36],oi);let c=l[1]&&si(l),u=l[2]&&ri(l),f=l[3]&&ii(l);const h=l[35].default,d=Qt(h,l,l[36],null),p=l[35].after,b=Qt(p,l,l[36],li);return{c(){a&&a.c(),e=ee(),c&&c.c(),t=ee(),u&&u.c(),n=ee(),f&&f.c(),o=ee(),d&&d.c(),s=ee(),b&&b.c()},l(w){a&&a.l(w),e=te(w),c&&c.l(w),t=te(w),u&&u.l(w),n=te(w),f&&f.l(w),o=te(w),d&&d.l(w),s=te(w),b&&b.l(w)},m(w,g){a&&a.m(w,g),A(w,e,g),c&&c.m(w,g),A(w,t,g),u&&u.m(w,g),A(w,n,g),f&&f.m(w,g),A(w,o,g),d&&d.m(w,g),A(w,s,g),b&&b.m(w,g),i=!0},p(w,g){a&&a.p&&(!i||g[1]&32)&&xt(a,r,w,w[36],i?en(r,w[36],g,k1):$t(w[36]),oi),w[1]?c?(c.p(w,g),g[0]&2&&S(c,1)):(c=si(w),c.c(),S(c,1),c.m(t.parentNode,t)):c&&(He(),N(c,1,1,()=>{c=null}),Be()),w[2]?u?(u.p(w,g),g[0]&4&&S(u,1)):(u=ri(w),u.c(),S(u,1),u.m(n.parentNode,n)):u&&(He(),N(u,1,1,()=>{u=null}),Be()),w[3]?f?(f.p(w,g),g[0]&8&&S(f,1)):(f=ii(w),f.c(),S(f,1),f.m(o.parentNode,o)):f&&(He(),N(f,1,1,()=>{f=null}),Be()),d&&d.p&&(!i||g[1]&32)&&xt(d,h,w,w[36],i?en(h,w[36],g,null):$t(w[36]),null),b&&b.p&&(!i||g[1]&32)&&xt(b,p,w,w[36],i?en(p,w[36],g,w1):$t(w[36]),li)},i(w){i||(S(a,w),S(c),S(u),S(f),S(d,w),S(b,w),i=!0)},o(w){N(a,w),N(c),N(u),N(f),N(d,w),N(b,w),i=!1},d(w){w&&(_(e),_(t),_(n),_(o),_(s)),a&&a.d(w),c&&c.d(w),u&&u.d(w),f&&f.d(w),d&&d.d(w),b&&b.d(w)}}}function T1(l){let e,t;return e=new Ha({props:{class:Ot(["svelte-flow__controls",l[7],l[6]]),position:l[0],"data-testid":"svelte-flow__controls","aria-label":l[4]??"Svelte Flow controls",style:l[5],$$slots:{default:[M1]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o[0]&192&&(s.class=Ot(["svelte-flow__controls",n[7],n[6]])),o[0]&1&&(s.position=n[0]),o[0]&16&&(s["aria-label"]=n[4]??"Svelte Flow controls"),o[0]&32&&(s.style=n[5]),o[0]&1806|o[1]&32&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function V1(l,e,t){let n,o,s,i,r,a,c,u,f,h,{$$slots:d={},$$scope:p}=e,{position:b="bottom-left"}=e,{showZoom:w=!0}=e,{showFitView:g=!0}=e,{showLock:v=!0}=e,{buttonBgColor:k=void 0}=e,{buttonBgColorHover:I=void 0}=e,{buttonColor:T=void 0}=e,{buttonColorHover:M=void 0}=e,{buttonBorderColor:y=void 0}=e,{ariaLabel:H=void 0}=e,{style:O=void 0}=e,{orientation:B="vertical"}=e,{fitViewOptions:j=void 0}=e,{class:Z=""}=e;const{zoomIn:L,zoomOut:D,fitView:Y,viewport:P,minZoom:F,maxZoom:G,nodesDraggable:K,nodesConnectable:X,elementsSelectable:Q}=Xt();ae(l,P,re=>t(30,a=re)),ae(l,F,re=>t(31,c=re)),ae(l,G,re=>t(29,r=re)),ae(l,K,re=>t(34,h=re)),ae(l,X,re=>t(33,f=re)),ae(l,Q,re=>t(32,u=re));const W={bgColor:k,bgColorHover:I,color:T,colorHover:M,borderColor:y},J=()=>{L()},q=()=>{D()},ce=()=>{Y(j)},ge=()=>{t(8,n=!n),K.set(n),X.set(n),Q.set(n)};return l.$$set=re=>{"position"in re&&t(0,b=re.position),"showZoom"in re&&t(1,w=re.showZoom),"showFitView"in re&&t(2,g=re.showFitView),"showLock"in re&&t(3,v=re.showLock),"buttonBgColor"in re&&t(22,k=re.buttonBgColor),"buttonBgColorHover"in re&&t(23,I=re.buttonBgColorHover),"buttonColor"in re&&t(24,T=re.buttonColor),"buttonColorHover"in re&&t(25,M=re.buttonColorHover),"buttonBorderColor"in re&&t(26,y=re.buttonBorderColor),"ariaLabel"in re&&t(4,H=re.ariaLabel),"style"in re&&t(5,O=re.style),"orientation"in re&&t(27,B=re.orientation),"fitViewOptions"in re&&t(28,j=re.fitViewOptions),"class"in re&&t(6,Z=re.class),"$$scope"in re&&t(36,p=re.$$scope)},l.$$.update=()=>{l.$$.dirty[1]&14&&t(8,n=h||f||u),l.$$.dirty[0]&1073741824|l.$$.dirty[1]&1&&t(10,o=a.zoom<=c),l.$$.dirty[0]&1610612736&&t(9,s=a.zoom>=r),l.$$.dirty[0]&134217728&&t(7,i=B==="horizontal"?"horizontal":"vertical")},[b,w,g,v,H,O,Z,i,n,s,o,P,F,G,K,X,Q,W,J,q,ce,ge,k,I,T,M,y,B,j,r,a,c,u,f,h,d,p]}let z1=class extends Re{constructor(e){super(),Ue(this,e,V1,T1,Fe,{position:0,showZoom:1,showFitView:2,showLock:3,buttonBgColor:22,buttonBgColorHover:23,buttonColor:24,buttonColorHover:25,buttonBorderColor:26,ariaLabel:4,style:5,orientation:27,fitViewOptions:28,class:6},null,[-1,-1])}};var Jn;(function(l){l.Lines="lines",l.Dots="dots",l.Cross="cross"})(Jn||(Jn={}));function N1(l){let e,t;return{c(){e=Te("circle"),this.h()},l(n){e=Ve(n,"circle",{cx:!0,cy:!0,r:!0,class:!0}),C(e).forEach(_),this.h()},h(){m(e,"cx",l[0]),m(e,"cy",l[0]),m(e,"r",l[0]),m(e,"class",t=Ot(["svelte-flow__background-pattern","dots",l[1]]))},m(n,o){A(n,e,o)},p(n,[o]){o&1&&m(e,"cx",n[0]),o&1&&m(e,"cy",n[0]),o&1&&m(e,"r",n[0]),o&2&&t!==(t=Ot(["svelte-flow__background-pattern","dots",n[1]]))&&m(e,"class",t)},i:ye,o:ye,d(n){n&&_(e)}}}function P1(l,e,t){let{radius:n=5}=e,{class:o=""}=e;return l.$$set=s=>{"radius"in s&&t(0,n=s.radius),"class"in s&&t(1,o=s.class)},[n,o]}class O1 extends Re{constructor(e){super(),Ue(this,e,P1,N1,Fe,{radius:0,class:1})}}function H1(l){let e,t,n;return{c(){e=Te("path"),this.h()},l(o){e=Ve(o,"path",{"stroke-width":!0,d:!0,class:!0}),C(e).forEach(_),this.h()},h(){m(e,"stroke-width",l[0]),m(e,"d",t=`M${l[1][0]/2} 0 V${l[1][1]} M0 ${l[1][1]/2} H${l[1][0]}`),m(e,"class",n=Ot(["svelte-flow__background-pattern",l[2],l[3]]))},m(o,s){A(o,e,s)},p(o,[s]){s&1&&m(e,"stroke-width",o[0]),s&2&&t!==(t=`M${o[1][0]/2} 0 V${o[1][1]} M0 ${o[1][1]/2} H${o[1][0]}`)&&m(e,"d",t),s&12&&n!==(n=Ot(["svelte-flow__background-pattern",o[2],o[3]]))&&m(e,"class",n)},i:ye,o:ye,d(o){o&&_(e)}}}function B1(l,e,t){let{lineWidth:n=1}=e,{dimensions:o}=e,{variant:s=void 0}=e,{class:i=""}=e;return l.$$set=r=>{"lineWidth"in r&&t(0,n=r.lineWidth),"dimensions"in r&&t(1,o=r.dimensions),"variant"in r&&t(2,s=r.variant),"class"in r&&t(3,i=r.class)},[n,o,s,i]}class A1 extends Re{constructor(e){super(),Ue(this,e,B1,H1,Fe,{lineWidth:0,dimensions:1,variant:2,class:3})}}function L1(l){let e,t;return e=new A1({props:{dimensions:l[6],variant:l[0],lineWidth:l[1],class:l[4]}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&64&&(s.dimensions=n[6]),o&1&&(s.variant=n[0]),o&2&&(s.lineWidth=n[1]),o&16&&(s.class=n[4]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function R1(l){let e,t;return e=new O1({props:{radius:l[7]/2,class:l[4]}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&128&&(s.radius=n[7]/2),o&16&&(s.class=n[4]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function U1(l){let e,t,n,o,s,i,r,a,c,u,f,h,d;const p=[R1,L1],b=[];function w(g,v){return g[14]?0:1}return n=w(l),o=b[n]=p[n](l),{c(){e=Te("svg"),t=Te("pattern"),o.c(),u=Te("rect"),this.h()},l(g){e=Ve(g,"svg",{class:!0,"data-testid":!0});var v=C(e);t=Ve(v,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0,patternTransform:!0});var k=C(t);o.l(k),k.forEach(_),u=Ve(v,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),C(u).forEach(_),v.forEach(_),this.h()},h(){m(t,"id",l[11]),m(t,"x",s=l[9].x%l[8][0]),m(t,"y",i=l[9].y%l[8][1]),m(t,"width",r=l[8][0]),m(t,"height",a=l[8][1]),m(t,"patternUnits","userSpaceOnUse"),m(t,"patternTransform",c=`translate(-${l[10][0]},-${l[10][1]})`),m(u,"x","0"),m(u,"y","0"),m(u,"width","100%"),m(u,"height","100%"),m(u,"fill",f=`url(#${l[11]})`),m(e,"class",h=ds(Ot(["svelte-flow__background",l[5]]))+" svelte-1r7pe8d"),m(e,"data-testid","svelte-flow__background"),et(e,"--xy-background-color-props",l[2]),et(e,"--xy-background-pattern-color-props",l[3])},m(g,v){A(g,e,v),E(e,t),b[n].m(t,null),E(e,u),d=!0},p(g,[v]){o.p(g,v),(!d||v&2048)&&m(t,"id",g[11]),(!d||v&768&&s!==(s=g[9].x%g[8][0]))&&m(t,"x",s),(!d||v&768&&i!==(i=g[9].y%g[8][1]))&&m(t,"y",i),(!d||v&256&&r!==(r=g[8][0]))&&m(t,"width",r),(!d||v&256&&a!==(a=g[8][1]))&&m(t,"height",a),(!d||v&1024&&c!==(c=`translate(-${g[10][0]},-${g[10][1]})`))&&m(t,"patternTransform",c),(!d||v&2048&&f!==(f=`url(#${g[11]})`))&&m(u,"fill",f),(!d||v&32&&h!==(h=ds(Ot(["svelte-flow__background",g[5]]))+" svelte-1r7pe8d"))&&m(e,"class",h),v&4&&et(e,"--xy-background-color-props",g[2]),v&8&&et(e,"--xy-background-pattern-color-props",g[3])},i(g){d||(S(o),d=!0)},o(g){N(o),d=!1},d(g){g&&_(e),b[n].d()}}}const W1={[Jn.Dots]:1,[Jn.Lines]:1,[Jn.Cross]:6};function F1(l,e,t){let n,o,s,i,r,a,c,{id:u=void 0}=e,{variant:f=Jn.Dots}=e,{gap:h=20}=e,{size:d=1}=e,{lineWidth:p=1}=e,{bgColor:b=void 0}=e,{patternColor:w=void 0}=e,{patternClass:g=void 0}=e,{class:v=""}=e;const{viewport:k,flowId:I}=Xt();ae(l,k,O=>t(9,a=O)),ae(l,I,O=>t(18,c=O));const T=d||W1[f],M=f===Jn.Dots,y=f===Jn.Cross,H=Array.isArray(h)?h:[h,h];return l.$$set=O=>{"id"in O&&t(15,u=O.id),"variant"in O&&t(0,f=O.variant),"gap"in O&&t(16,h=O.gap),"size"in O&&t(17,d=O.size),"lineWidth"in O&&t(1,p=O.lineWidth),"bgColor"in O&&t(2,b=O.bgColor),"patternColor"in O&&t(3,w=O.patternColor),"patternClass"in O&&t(4,g=O.patternClass),"class"in O&&t(5,v=O.class)},l.$$.update=()=>{l.$$.dirty&294912&&t(11,n=`background-pattern-${c}-${u||""}`),l.$$.dirty&512&&t(8,o=[H[0]*a.zoom||1,H[1]*a.zoom||1]),l.$$.dirty&512&&t(7,s=T*a.zoom),l.$$.dirty&384&&t(6,i=y?[s,s]:o),l.$$.dirty&192&&t(10,r=M?[s/2,s/2]:[i[0]/2,i[1]/2])},[f,p,b,w,g,v,i,s,o,a,r,n,k,I,M,u,h,d,c]}class j1 extends Re{constructor(e){super(),Ue(this,e,F1,U1,Fe,{id:15,variant:0,gap:16,size:17,lineWidth:1,bgColor:2,patternColor:3,patternClass:4,class:5})}}const ai=l=>ch(l);function Y1(){const{zoomIn:l,zoomOut:e,fitView:t,onbeforedelete:n,snapGrid:o,viewport:s,width:i,height:r,minZoom:a,maxZoom:c,panZoom:u,nodes:f,edges:h,domNode:d,nodeLookup:p,nodeOrigin:b,edgeLookup:w,connectionLookup:g}=Xt(),v=T=>{var B,j;const M=me(p),y=ai(T)?T:M.get(T.id),H=y.parentId?mh(y.position,y.measured,y.parentId,M,me(b)):y.position,O={id:y.id,position:H,width:((B=y.measured)==null?void 0:B.width)??y.width,height:((j=y.measured)==null?void 0:j.height)??y.height,data:y.data};return Ml(O)},k=(T,M,y={replace:!1})=>{var B;const H=(B=me(p).get(T))==null?void 0:B.internals.userNode;if(!H)return;const O=typeof M=="function"?M(H):M;y.replace?f.update(j=>j.map(Z=>Z.id===T?ai(O)?O:{...Z,...O}:Z)):(Object.assign(H,O),f.update(j=>j))},I=T=>me(p).get(T);return{zoomIn:l,zoomOut:e,getInternalNode:I,getNode:T=>{var M;return(M=I(T))==null?void 0:M.internals.userNode},getNodes:T=>T===void 0?me(f):ci(me(p),T),getEdge:T=>me(w).get(T),getEdges:T=>T===void 0?me(h):ci(me(w),T),setZoom:(T,M)=>{const y=me(u);return y?y.scaleTo(T,{duration:M==null?void 0:M.duration}):Promise.resolve(!1)},getZoom:()=>me(s).zoom,setViewport:async(T,M)=>{const y=me(s),H=me(u);return H?(await H.setViewport({x:T.x??y.x,y:T.y??y.y,zoom:T.zoom??y.zoom},{duration:M==null?void 0:M.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>me(s),setCenter:async(T,M,y)=>{const H=typeof(y==null?void 0:y.zoom)<"u"?y.zoom:me(c),O=me(u);return O?(await O.setViewport({x:me(i)/2-T*H,y:me(r)/2-M*H,zoom:H},{duration:y==null?void 0:y.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:t,fitBounds:async(T,M)=>{const y=me(u);if(!y)return Promise.resolve(!1);const H=ss(T,me(i),me(r),me(a),me(c),(M==null?void 0:M.padding)??.1);return await y.setViewport(H,{duration:M==null?void 0:M.duration}),Promise.resolve(!0)},getIntersectingNodes:(T,M=!0,y)=>{const H=Sr(T),O=H?T:v(T);return O?(y||me(f)).filter(B=>{const j=me(p).get(B.id);if(!j||!H&&B.id===T.id)return!1;const Z=Ml(j),L=Ul(Z,O);return M&&L>0||L>=O.width*O.height}):[]},isNodeIntersecting:(T,M,y=!0)=>{const O=Sr(T)?T:v(T);if(!O)return!1;const B=Ul(O,M);return y&&B>0||B>=O.width*O.height},deleteElements:async({nodes:T=[],edges:M=[]})=>{const{nodes:y,edges:H}=await oa({nodesToRemove:T,edgesToRemove:M,nodes:me(f),edges:me(h),onBeforeDelete:me(n)});return y&&f.update(O=>O.filter(B=>!y.some(({id:j})=>j===B.id))),H&&h.update(O=>O.filter(B=>!H.some(({id:j})=>j===B.id))),{deletedNodes:y,deletedEdges:H}},screenToFlowPosition:(T,M={snapToGrid:!0})=>{const y=me(d);if(!y)return T;const H=M.snapToGrid?me(o):!1,{x:O,y:B,zoom:j}=me(s),{x:Z,y:L}=y.getBoundingClientRect(),D={x:T.x-Z,y:T.y-L};return Zl(D,[O,B,j],H!==null,H||[1,1])},flowToScreenPosition:T=>{const M=me(d);if(!M)return T;const{x:y,y:H,zoom:O}=me(s),{x:B,y:j}=M.getBoundingClientRect(),Z=ia(T,[y,H,O]);return{x:Z.x+B,y:Z.y+j}},toObject:()=>({nodes:me(f).map(T=>({...T,position:{...T.position},data:{...T.data}})),edges:me(h).map(T=>({...T})),viewport:{...me(s)}}),updateNode:k,updateNodeData:(T,M,y)=>{var B;const H=(B=me(p).get(T))==null?void 0:B.internals.userNode;if(!H)return;const O=typeof M=="function"?M(H):M;H.data=y!=null&&y.replace?O:{...H.data,...O},f.update(j=>j)},getNodesBounds:T=>{const M=me(p),y=me(b);return uh(T,{nodeLookup:M,nodeOrigin:y})},getHandleConnections:({type:T,id:M,nodeId:y})=>{var H;return Array.from(((H=me(g).get(`${y}-${T}-${M??null}`))==null?void 0:H.values())??[])},viewport:s}}function ci(l,e){var n;const t=[];for(const o of e){const s=l.get(o);if(s){const i="internals"in s?(n=s.internals)==null?void 0:n.userNode:s;t.push(i)}}return t}function X1(){const{nodesInitialized:l}=Xt();return{subscribe:l.subscribe}}function ui(l,e,t){const n=l.slice();return n[25]=e[t],n[27]=t,n}function fi(l,e,t){const n=l.slice();return n[22]=e[t],n[24]=t,n}function K1(l){let e,t;return e=new Io({props:{className:"size-4"}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p:ye,i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function Z1(l){let e,t,n,o,s,i,r,a=l[8].t("Tools")+"",c,u,f=l[8].t("Functions")+"",h,d,p,b,w,g,v,k;function I(H,O){if(H[1]==="tools")return q1;if(H[1]==="functions")return G1}let T=I(l),M=T&&T(l),y=l[2]&&mi(l);return{c(){e=V("form"),t=V("div"),n=V("div"),o=V("div"),s=V("div"),i=V("select"),r=V("option"),c=Ie(a),u=V("option"),h=Ie(f),d=ee(),p=V("div"),b=V("select"),M&&M.c(),w=ee(),y&&y.c(),this.h()},l(H){e=z(H,"FORM",{class:!0});var O=C(e);t=z(O,"DIV",{class:!0});var B=C(t);n=z(B,"DIV",{class:!0});var j=C(n);o=z(j,"DIV",{class:!0});var Z=C(o);s=z(Z,"DIV",{class:!0});var L=C(s);i=z(L,"SELECT",{class:!0,placeholder:!0});var D=C(i);r=z(D,"OPTION",{class:!0});var Y=C(r);c=Se(Y,a),Y.forEach(_),u=z(D,"OPTION",{class:!0});var P=C(u);h=Se(P,f),P.forEach(_),D.forEach(_),L.forEach(_),d=te(Z),p=z(Z,"DIV",{class:!0});var F=C(p);b=z(F,"SELECT",{class:!0});var G=C(b);M&&M.l(G),G.forEach(_),F.forEach(_),Z.forEach(_),j.forEach(_),w=te(B),y&&y.l(B),B.forEach(_),O.forEach(_),this.h()},h(){r.__value="tools",Dn(r,r.__value),m(r,"class","bg-gray-100 dark:bg-gray-800"),u.__value="functions",Dn(u,u.__value),m(u,"class","bg-gray-100 dark:bg-gray-800"),m(i,"class","w-full rounded text-xs py-2 px-1 bg-transparent outline-none"),m(i,"placeholder","Select"),l[1]===void 0&&tl(()=>l[13].call(i)),m(s,"class","flex-1"),m(b,"class","w-full rounded py-2 px-1 text-xs bg-transparent outline-none"),l[2]===void 0&&tl(()=>l[14].call(b)),m(p,"class","flex-1"),m(o,"class","flex gap-2"),m(n,"class","space-y-1"),m(t,"class","flex flex-col"),m(e,"class","flex flex-col h-full justify-between space-y-3 text-sm")},m(H,O){A(H,e,O),E(e,t),E(t,n),E(n,o),E(o,s),E(s,i),E(i,r),E(r,c),E(i,u),E(u,h),Ql(i,l[1],!0),E(o,d),E(o,p),E(p,b),M&&M.m(b,null),Ql(b,l[2],!0),E(t,w),y&&y.m(t,null),g=!0,v||(k=[ke(i,"change",l[13]),ke(b,"change",l[14]),ke(b,"change",l[15]),ke(e,"submit",jl(l[18]))],v=!0)},p(H,O){(!g||O&256)&&a!==(a=H[8].t("Tools")+"")&&Me(c,a),(!g||O&256)&&f!==(f=H[8].t("Functions")+"")&&Me(h,f),O&2&&Ql(i,H[1]),T===(T=I(H))&&M?M.p(H,O):(M&&M.d(1),M=T&&T(H),M&&(M.c(),M.m(b,null))),O&196&&Ql(b,H[2]),H[2]?y?(y.p(H,O),O&4&&S(y,1)):(y=mi(H),y.c(),S(y,1),y.m(t,null)):y&&(He(),N(y,1,1,()=>{y=null}),Be())},i(H){g||(S(y),g=!0)},o(H){N(y),g=!1},d(H){H&&_(e),M&&M.d(),y&&y.d(),v=!1,on(k)}}}function G1(l){let e,t=l[8].t("Select a function")+"",n,o,s=vt(l[7]),i=[];for(let r=0;r<s.length;r+=1)i[r]=di(ui(l,s,r));return{c(){e=V("option"),n=Ie(t);for(let r=0;r<i.length;r+=1)i[r].c();o=Ae(),this.h()},l(r){e=z(r,"OPTION",{class:!0});var a=C(e);n=Se(a,t),a.forEach(_);for(let c=0;c<i.length;c+=1)i[c].l(r);o=Ae(),this.h()},h(){e.__value="",Dn(e,e.__value),e.selected=!0,e.disabled=!0,m(e,"class","bg-gray-100 dark:bg-gray-800")},m(r,a){A(r,e,a),E(e,n);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(r,a);A(r,o,a)},p(r,a){if(a&256&&t!==(t=r[8].t("Select a function")+"")&&Me(n,t),a&128){s=vt(r[7]);let c;for(c=0;c<s.length;c+=1){const u=ui(r,s,c);i[c]?i[c].p(u,a):(i[c]=di(u),i[c].c(),i[c].m(o.parentNode,o))}for(;c<i.length;c+=1)i[c].d(1);i.length=s.length}},d(r){r&&(_(e),_(o)),Mn(i,r)}}}function q1(l){let e,t=l[8].t("Select a tool")+"",n,o,s=vt(l[6]),i=[];for(let r=0;r<s.length;r+=1)i[r]=hi(fi(l,s,r));return{c(){e=V("option"),n=Ie(t);for(let r=0;r<i.length;r+=1)i[r].c();o=Ae(),this.h()},l(r){e=z(r,"OPTION",{class:!0});var a=C(e);n=Se(a,t),a.forEach(_);for(let c=0;c<i.length;c+=1)i[c].l(r);o=Ae(),this.h()},h(){e.__value="",Dn(e,e.__value),e.selected=!0,e.disabled=!0,m(e,"class","bg-gray-100 dark:bg-gray-800")},m(r,a){A(r,e,a),E(e,n);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(r,a);A(r,o,a)},p(r,a){if(a&256&&t!==(t=r[8].t("Select a tool")+"")&&Me(n,t),a&64){s=vt(r[6]);let c;for(c=0;c<s.length;c+=1){const u=fi(r,s,c);i[c]?i[c].p(u,a):(i[c]=hi(u),i[c].c(),i[c].m(o.parentNode,o))}for(;c<i.length;c+=1)i[c].d(1);i.length=s.length}},d(r){r&&(_(e),_(o)),Mn(i,r)}}}function di(l){let e,t=l[25].name+"",n,o;return{c(){e=V("option"),n=Ie(t),this.h()},l(s){e=z(s,"OPTION",{class:!0});var i=C(e);n=Se(i,t),i.forEach(_),this.h()},h(){e.__value=o=l[25].id,Dn(e,e.__value),m(e,"class","bg-gray-100 dark:bg-gray-800")},m(s,i){A(s,e,i),E(e,n)},p(s,i){i&128&&t!==(t=s[25].name+"")&&Me(n,t),i&128&&o!==(o=s[25].id)&&(e.__value=o,Dn(e,e.__value))},d(s){s&&_(e)}}}function hi(l){let e,t=l[22].name+"",n,o;return{c(){e=V("option"),n=Ie(t),this.h()},l(s){e=z(s,"OPTION",{class:!0});var i=C(e);n=Se(i,t),i.forEach(_),this.h()},h(){e.__value=o=l[22].id,Dn(e,e.__value),m(e,"class","bg-gray-100 dark:bg-gray-800")},m(s,i){A(s,e,i),E(e,n)},p(s,i){i&64&&t!==(t=s[22].name+"")&&Me(n,t),i&64&&o!==(o=s[22].id)&&(e.__value=o,Dn(e,e.__value))},d(s){s&&_(e)}}}function mi(l){let e,t,n,o,s,i;const r=[Q1,J1],a=[];function c(u,f){return u[3]?1:0}return o=c(l),s=a[o]=r[o](l),{c(){e=V("hr"),t=ee(),n=V("div"),s.c(),this.h()},l(u){e=z(u,"HR",{class:!0}),t=te(u),n=z(u,"DIV",{class:!0});var f=C(n);s.l(f),f.forEach(_),this.h()},h(){m(e,"class","dark:border-gray-800 my-1 w-full"),m(n,"class","my-2 text-xs")},m(u,f){A(u,e,f),A(u,t,f),A(u,n,f),a[o].m(n,null),i=!0},p(u,f){let h=o;o=c(u),o===h?a[o].p(u,f):(He(),N(a[h],1,1,()=>{a[h]=null}),Be(),s=a[o],s?s.p(u,f):(s=a[o]=r[o](u),s.c()),S(s,1),s.m(n,null))},i(u){i||(S(s),i=!0)},o(u){N(s),i=!1},d(u){u&&(_(e),_(t),_(n)),a[o].d()}}}function J1(l){let e,t;return e=new Io({props:{className:"size-5"}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p:ye,i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function Q1(l){let e,t,n;function o(i){l[16](i)}let s={valvesSpec:l[4]};return l[5]!==void 0&&(s.valves=l[5]),e=new gu({props:s}),We.push(()=>Je(e,"valves",o)),e.$on("change",l[17]),{c(){ne(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,r){le(e,i,r),n=!0},p(i,r){const a={};r&16&&(a.valvesSpec=i[4]),!t&&r&32&&(t=!0,a.valves=i[5],qe(()=>t=!1)),e.$set(a)},i(i){n||(S(e.$$.fragment,i),n=!0)},o(i){N(e.$$.fragment,i),n=!1},d(i){oe(e,i)}}}function x1(l){let e,t,n,o;const s=[Z1,K1],i=[];function r(a,c){return a[0]&&!a[3]?0:1}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ae()},l(a){t.l(a),n=Ae()},m(a,c){i[e].m(a,c),A(a,n,c),o=!0},p(a,[c]){let u=e;e=r(a),e===u?i[e].p(a,c):(He(),N(i[u],1,1,()=>{i[u]=null}),Be(),t=i[e],t?t.p(a,c):(t=i[e]=s[e](a),t.c()),S(t,1),t.m(n.parentNode,n))},i(a){o||(S(t),o=!0)},o(a){N(t),o=!1},d(a){a&&_(n),i[e].d(a)}}}function $1(l,e,t){let n,o,s;ae(l,ul,O=>t(6,n=O)),ae(l,_s,O=>t(7,o=O));const i=un(),r=jt("i18n");ae(l,r,O=>t(8,s=O));let{show:a=!1}=e,c="tools",u="",f=!1,h=null,d={},p;const b=async()=>{p&&clearTimeout(p),p=setTimeout(()=>{g()},500)},w=async()=>{var O;if(t(3,f=!0),c==="tools"?(t(5,d=await Hc(localStorage.token,u)),t(4,h=await Bc(localStorage.token,u))):c==="functions"&&(t(5,d=await du(localStorage.token,u)),t(4,h=await hu(localStorage.token,u))),h)for(const B in h.properties)((O=h.properties[B])==null?void 0:O.type)==="array"&&t(5,d[B]=(d[B]??[]).join(","),d);t(3,f=!1)},g=async()=>{var O;if(h){for(const B in h.properties)((O=h.properties[B])==null?void 0:O.type)==="array"&&t(5,d[B]=(d[B]??"").split(",").map(j=>j.trim()),d);if(c==="tools"){const B=await Ac(localStorage.token,u,d).catch(j=>(nt.error(`${j}`),null));B&&(nt.success(s.t("Valves updated")),t(5,d=B))}else if(c==="functions"){const B=await mu(localStorage.token,u,d).catch(j=>(nt.error(`${j}`),null));B&&(nt.success(s.t("Valves updated")),t(5,d=B))}}},v=async()=>{t(3,f=!0),o===null&&_s.set(await fu(localStorage.token)),n===null&&ul.set(await es(localStorage.token)),t(3,f=!1)};function k(){c=hs(this),t(1,c)}function I(){u=hs(this),t(2,u),t(1,c)}const T=async()=>{await $e()};function M(O){d=O,t(5,d)}const y=()=>{b()},H=()=>{g(),i("save")};return l.$$set=O=>{"show"in O&&t(0,a=O.show)},l.$$.update=()=>{l.$$.dirty&2&&c&&t(2,u=""),l.$$.dirty&4&&u&&w(),l.$$.dirty&1&&a&&v()},[a,c,u,f,h,d,n,o,s,i,r,b,g,k,I,T,M,y,H]}class e0 extends Re{constructor(e){super(),Ue(this,e,$1,x1,Fe,{show:0})}}function gi(l,e,t){const n=l.slice();return n[14]=e[t],n[16]=t,n}function t0(l){let e,t=l[3].t("You do not have permission to access this feature.")+"",n;return{c(){e=V("div"),n=Ie(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=C(e);n=Se(s,t),s.forEach(_),this.h()},h(){m(e,"class","text-sm dark:text-gray-300 text-center py-2 px-10")},m(o,s){A(o,e,s),E(e,n)},p(o,s){s&8&&t!==(t=o[3].t("You do not have permission to access this feature.")+"")&&Me(n,t)},i:ye,o:ye,d(o){o&&_(e)}}}function n0(l){let e,t,n,o,s,i,r,a,c,u,f,h,d,p=l[0].length>0&&_i(l);function b(g){l[11](g)}let w={title:l[3].t("Valves"),buttonClassName:"w-full",$$slots:{content:[o0]},$$scope:{ctx:l}};return l[2]!==void 0&&(w.open=l[2]),n=new ro({props:w}),We.push(()=>Je(n,"open",b)),a=new ro({props:{title:l[3].t("System Prompt"),open:!0,buttonClassName:"w-full",$$slots:{content:[s0]},$$scope:{ctx:l}}}),h=new ro({props:{title:l[3].t("Advanced Params"),open:!0,buttonClassName:"w-full",$$slots:{content:[r0]},$$scope:{ctx:l}}}),{c(){e=V("div"),p&&p.c(),t=ee(),ne(n.$$.fragment),s=ee(),i=V("hr"),r=ee(),ne(a.$$.fragment),c=ee(),u=V("hr"),f=ee(),ne(h.$$.fragment),this.h()},l(g){e=z(g,"DIV",{class:!0});var v=C(e);p&&p.l(v),t=te(v),se(n.$$.fragment,v),s=te(v),i=z(v,"HR",{class:!0}),r=te(v),se(a.$$.fragment,v),c=te(v),u=z(v,"HR",{class:!0}),f=te(v),se(h.$$.fragment,v),v.forEach(_),this.h()},h(){m(i,"class","my-2 border-gray-50 dark:border-gray-700/10"),m(u,"class","my-2 border-gray-50 dark:border-gray-700/10"),m(e,"class","dark:text-gray-200 text-sm font-primary py-0.5 px-0.5")},m(g,v){A(g,e,v),p&&p.m(e,null),E(e,t),le(n,e,null),E(e,s),E(e,i),E(e,r),le(a,e,null),E(e,c),E(e,u),E(e,f),le(h,e,null),d=!0},p(g,v){g[0].length>0?p?(p.p(g,v),v&1&&S(p,1)):(p=_i(g),p.c(),S(p,1),p.m(e,t)):p&&(He(),N(p,1,1,()=>{p=null}),Be());const k={};v&8&&(k.title=g[3].t("Valves")),v&131076&&(k.$$scope={dirty:v,ctx:g}),!o&&v&4&&(o=!0,k.open=g[2],qe(()=>o=!1)),n.$set(k);const I={};v&8&&(I.title=g[3].t("System Prompt")),v&131082&&(I.$$scope={dirty:v,ctx:g}),a.$set(I);const T={};v&8&&(T.title=g[3].t("Advanced Params")),v&131090&&(T.$$scope={dirty:v,ctx:g}),h.$set(T)},i(g){d||(S(p),S(n.$$.fragment,g),S(a.$$.fragment,g),S(h.$$.fragment,g),d=!0)},o(g){N(p),N(n.$$.fragment,g),N(a.$$.fragment,g),N(h.$$.fragment,g),d=!1},d(g){g&&_(e),p&&p.d(),oe(n),oe(a),oe(h)}}}function _i(l){let e,t,n,o;return e=new ro({props:{title:l[3].t("Files"),open:!0,buttonClassName:"w-full",$$slots:{content:[l0]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment),t=ee(),n=V("hr"),this.h()},l(s){se(e.$$.fragment,s),t=te(s),n=z(s,"HR",{class:!0}),this.h()},h(){m(n,"class","my-2 border-gray-50 dark:border-gray-700/10")},m(s,i){le(e,s,i),A(s,t,i),A(s,n,i),o=!0},p(s,i){const r={};i&8&&(r.title=s[3].t("Files")),i&131073&&(r.$$scope={dirty:i,ctx:s}),e.$set(r)},i(s){o||(S(e.$$.fragment,s),o=!0)},o(s){N(e.$$.fragment,s),o=!1},d(s){s&&(_(t),_(n)),oe(e,s)}}}function pi(l){var s,i;let e,t;function n(){return l[9](l[16])}function o(){return l[10](l[14])}return e=new Ji({props:{className:"w-full",item:l[14],edit:!0,url:(s=l[14])!=null&&s.url?l[14].url:null,name:l[14].name,type:l[14].type,size:(i=l[14])==null?void 0:i.size,dismissible:!0}}),e.$on("dismiss",n),e.$on("click",o),{c(){ne(e.$$.fragment)},l(r){se(e.$$.fragment,r)},m(r,a){le(e,r,a),t=!0},p(r,a){var u,f;l=r;const c={};a&1&&(c.item=l[14]),a&1&&(c.url=(u=l[14])!=null&&u.url?l[14].url:null),a&1&&(c.name=l[14].name),a&1&&(c.type=l[14].type),a&1&&(c.size=(f=l[14])==null?void 0:f.size),e.$set(c)},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){N(e.$$.fragment,r),t=!1},d(r){oe(e,r)}}}function l0(l){let e,t,n=vt(l[0]),o=[];for(let i=0;i<n.length;i+=1)o[i]=pi(gi(l,n,i));const s=i=>N(o[i],1,1,()=>{o[i]=null});return{c(){e=V("div");for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){e=z(i,"DIV",{class:!0,slot:!0});var r=C(e);for(let a=0;a<o.length;a+=1)o[a].l(r);r.forEach(_),this.h()},h(){m(e,"class","flex flex-col gap-1 mt-1.5"),m(e,"slot","content")},m(i,r){A(i,e,r);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);t=!0},p(i,r){if(r&1){n=vt(i[0]);let a;for(a=0;a<n.length;a+=1){const c=gi(i,n,a);o[a]?(o[a].p(c,r),S(o[a],1)):(o[a]=pi(c),o[a].c(),S(o[a],1),o[a].m(e,null))}for(He(),a=n.length;a<o.length;a+=1)s(a);Be()}},i(i){if(!t){for(let r=0;r<n.length;r+=1)S(o[r]);t=!0}},o(i){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)N(o[r]);t=!1},d(i){i&&_(e),Mn(o,i)}}}function o0(l){let e,t,n;return t=new e0({props:{show:l[2]}}),{c(){e=V("div"),ne(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0,slot:!0});var s=C(e);se(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"class","text-sm"),m(e,"slot","content")},m(o,s){A(o,e,s),le(t,e,null),n=!0},p(o,s){const i={};s&4&&(i.show=o[2]),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),oe(t)}}}function s0(l){let e,t,n,o,s;return{c(){e=V("div"),t=V("textarea"),this.h()},l(i){e=z(i,"DIV",{class:!0,slot:!0});var r=C(e);t=z(r,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),C(t).forEach(_),r.forEach(_),this.h()},h(){m(t,"class","w-full text-xs py-1.5 bg-transparent outline-none resize-none"),m(t,"rows","4"),m(t,"placeholder",n=l[3].t("Enter system prompt")),m(e,"class",""),m(e,"slot","content")},m(i,r){A(i,e,r),E(e,t),Dn(t,l[1].system),o||(s=ke(t,"input",l[12]),o=!0)},p(i,r){r&8&&n!==(n=i[3].t("Enter system prompt"))&&m(t,"placeholder",n),r&2&&Dn(t,i[1].system)},d(i){i&&_(e),o=!1,s()}}}function r0(l){var a;let e,t,n,o,s;function i(c){l[13](c)}let r={admin:((a=l[4])==null?void 0:a.role)==="admin"};return l[1]!==void 0&&(r.params=l[1]),n=new uu({props:r}),We.push(()=>Je(n,"params",i)),{c(){e=V("div"),t=V("div"),ne(n.$$.fragment),this.h()},l(c){e=z(c,"DIV",{class:!0,slot:!0});var u=C(e);t=z(u,"DIV",{});var f=C(t);se(n.$$.fragment,f),f.forEach(_),u.forEach(_),this.h()},h(){m(e,"class","text-sm mt-1.5"),m(e,"slot","content")},m(c,u){A(c,e,u),E(e,t),le(n,t,null),s=!0},p(c,u){var h;const f={};u&16&&(f.admin=((h=c[4])==null?void 0:h.role)==="admin"),!o&&u&2&&(o=!0,f.params=c[1],qe(()=>o=!1)),n.$set(f)},i(c){s||(S(n.$$.fragment,c),s=!0)},o(c){N(n.$$.fragment,c),s=!1},d(c){c&&_(e),oe(n)}}}function i0(l){let e,t,n,o=l[3].t("Chat Controls")+"",s,i,r,a,c,u,f,h,d,p;a=new So({props:{className:"size-3.5"}});const b=[n0,t0],w=[];function g(v,k){var I,T;return v[4].role==="admin"||(T=(I=v[4])==null?void 0:I.permissions.chat)!=null&&T.controls?0:1}return u=g(l),f=w[u]=b[u](l),{c(){e=V("div"),t=V("div"),n=V("div"),s=Ie(o),i=ee(),r=V("button"),ne(a.$$.fragment),c=ee(),f.c(),this.h()},l(v){e=z(v,"DIV",{class:!0});var k=C(e);t=z(k,"DIV",{class:!0});var I=C(t);n=z(I,"DIV",{class:!0});var T=C(n);s=Se(T,o),T.forEach(_),i=te(I),r=z(I,"BUTTON",{class:!0});var M=C(r);se(a.$$.fragment,M),M.forEach(_),I.forEach(_),c=te(k),f.l(k),k.forEach(_),this.h()},h(){m(n,"class","text-lg font-medium self-center font-primary"),m(r,"class","self-center"),m(t,"class","flex items-center justify-between dark:text-gray-100 mb-2"),m(e,"class","dark:text-white")},m(v,k){A(v,e,k),E(e,t),E(t,n),E(n,s),E(t,i),E(t,r),le(a,r,null),E(e,c),w[u].m(e,null),h=!0,d||(p=ke(r,"click",l[8]),d=!0)},p(v,[k]){(!h||k&8)&&o!==(o=v[3].t("Chat Controls")+"")&&Me(s,o);let I=u;u=g(v),u===I?w[u].p(v,k):(He(),N(w[I],1,1,()=>{w[I]=null}),Be(),f=w[u],f?f.p(v,k):(f=w[u]=b[u](v),f.c()),S(f,1),f.m(e,null))},i(v){h||(S(a.$$.fragment,v),S(f),h=!0)},o(v){N(a.$$.fragment,v),N(f),h=!1},d(v){v&&_(e),oe(a),w[u].d(),d=!1,p()}}}function a0(l,e,t){let n,o;ae(l,xn,g=>t(4,o=g));const s=un(),i=jt("i18n");ae(l,i,g=>t(3,n=g));let{models:r=[]}=e,{chatFiles:a=[]}=e,{params:c={}}=e,u=!1;const f=()=>{s("close")},h=g=>{a.splice(g,1),t(0,a)},d=g=>{console.log(g)};function p(g){u=g,t(2,u)}function b(){c.system=this.value,t(1,c)}function w(g){c=g,t(1,c)}return l.$$set=g=>{"models"in g&&t(7,r=g.models),"chatFiles"in g&&t(0,a=g.chatFiles),"params"in g&&t(1,c=g.params)},[a,c,u,n,o,s,i,r,f,h,d,p,b,w]}class Ba extends Re{constructor(e){super(),Ue(this,e,a0,i0,Fe,{models:7,chatFiles:0,params:1})}}function bi(l,e,t){const n=l.slice();return n[10]=e[t],n}function c0(l){let e;const t=l[4].default,n=Qt(t,l,l[8],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&256)&&xt(n,t,o,o[8],e?en(t,o[8],s,null):$t(o[8]),null)},i(o){e||(S(n,o),e=!0)},o(o){N(n,o),e=!1},d(o){n&&n.d(o)}}}function u0(l){var i;let e,t,n=(((i=l[10])==null?void 0:i.label)??"Camera")+"",o,s;return{c(){e=V("div"),t=V("div"),o=Ie(n),s=ee(),this.h()},l(r){e=z(r,"DIV",{class:!0});var a=C(e);t=z(a,"DIV",{class:!0});var c=C(t);o=Se(c,n),c.forEach(_),a.forEach(_),s=te(r),this.h()},h(){m(t,"class","line-clamp-1"),m(e,"class","flex items-center")},m(r,a){A(r,e,a),E(e,t),E(t,o),A(r,s,a)},p(r,a){var c;a&2&&n!==(n=(((c=r[10])==null?void 0:c.label)??"Camera")+"")&&Me(o,n)},d(r){r&&(_(e),_(s))}}}function vi(l){let e,t;function n(){return l[5](l[10])}return e=new wn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[u0]},$$scope:{ctx:l}}}),e.$on("click",n),{c(){ne(e.$$.fragment)},l(o){se(e.$$.fragment,o)},m(o,s){le(e,o,s),t=!0},p(o,s){l=o;const i={};s&258&&(i.$$scope={dirty:s,ctx:l}),e.$set(i)},i(o){t||(S(e.$$.fragment,o),t=!0)},o(o){N(e.$$.fragment,o),t=!1},d(o){oe(e,o)}}}function f0(l){let e,t,n=vt(l[1]),o=[];for(let i=0;i<n.length;i+=1)o[i]=vi(bi(l,n,i));const s=i=>N(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=Ae()},l(i){for(let r=0;r<o.length;r+=1)o[r].l(i);e=Ae()},m(i,r){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(i,r);A(i,e,r),t=!0},p(i,r){if(r&10){n=vt(i[1]);let a;for(a=0;a<n.length;a+=1){const c=bi(i,n,a);o[a]?(o[a].p(c,r),S(o[a],1)):(o[a]=vi(c),o[a].c(),S(o[a],1),o[a].m(e.parentNode,e))}for(He(),a=n.length;a<o.length;a+=1)s(a);Be()}},i(i){if(!t){for(let r=0;r<n.length;r+=1)S(o[r]);t=!0}},o(i){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)N(o[r]);t=!1},d(i){i&&_(e),Mn(o,i)}}}function d0(l){let e,t,n;return t=new Eo({props:{class:"w-full max-w-[180px] rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-[9999] bg-white dark:bg-gray-900 dark:text-white shadow-sm",sideOffset:6,side:"top",align:"start",transition:Xl,$$slots:{default:[f0]},$$scope:{ctx:l}}}),{c(){e=V("div"),ne(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{slot:!0});var s=C(e);se(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"slot","content")},m(o,s){A(o,e,s),le(t,e,null),n=!0},p(o,s){const i={};s&258&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),oe(t)}}}function h0(l){let e,t,n;function o(i){l[6](i)}let s={$$slots:{content:[d0],default:[c0]},$$scope:{ctx:l}};return l[2]!==void 0&&(s.show=l[2]),e=new yo({props:s}),We.push(()=>Je(e,"show",o)),e.$on("change",l[7]),{c(){ne(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,r){le(e,i,r),n=!0},p(i,[r]){const a={};r&258&&(a.$$scope={dirty:r,ctx:i}),!t&&r&4&&(t=!0,a.show=i[2],qe(()=>t=!1)),e.$set(a)},i(i){n||(S(e.$$.fragment,i),n=!0)},o(i){N(e.$$.fragment,i),n=!1},d(i){oe(e,i)}}}function m0(l,e,t){let{$$slots:n={},$$scope:o}=e;jt("i18n");const s=un();let{onClose:i=()=>{}}=e,{devices:r}=e,a=!1;const c=h=>{s("change",h.deviceId)};function u(h){a=h,t(2,a)}const f=h=>{h.detail===!1&&i()};return l.$$set=h=>{"onClose"in h&&t(0,i=h.onClose),"devices"in h&&t(1,r=h.devices),"$$scope"in h&&t(8,o=h.$$scope)},[i,r,a,s,n,c,u,f,o]}class g0 extends Re{constructor(e){super(),Ue(this,e,m0,h0,Fe,{onClose:0,devices:1})}}function wi(l){let e,t,n,o,s,i,r,a,c,u,f,h,d,p,b,w='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"></path></svg>',g,v,k,I=l[4]&&ki(l);function T(D,Y){return D[4]?v0:w0}let M=T(l),y=M(l);const H=[S0,I0],O=[];function B(D,Y){return D[4]?0:1}r=B(l),a=O[r]=H[r](l);function j(D,Y){return D[1]?V0:D[2]?T0:M0}let Z=j(l),L=Z(l);return{c(){e=V("div"),I&&I.c(),t=ee(),n=V("div"),y.c(),o=ee(),s=V("div"),i=V("div"),a.c(),c=ee(),u=V("div"),f=V("button"),h=V("div"),L.c(),d=ee(),p=V("div"),b=V("button"),b.innerHTML=w,this.h()},l(D){e=z(D,"DIV",{class:!0});var Y=C(e);I&&I.l(Y),t=te(Y),n=z(Y,"DIV",{class:!0});var P=C(n);y.l(P),P.forEach(_),o=te(Y),s=z(Y,"DIV",{class:!0});var F=C(s);i=z(F,"DIV",{});var G=C(i);a.l(G),G.forEach(_),c=te(F),u=z(F,"DIV",{});var K=C(u);f=z(K,"BUTTON",{type:!0});var X=C(f);h=z(X,"DIV",{class:!0});var Q=C(h);L.l(Q),Q.forEach(_),X.forEach(_),K.forEach(_),d=te(F),p=z(F,"DIV",{});var W=C(p);b=z(W,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ft(b)!=="svelte-1k5eavb"&&(b.innerHTML=w),W.forEach(_),F.forEach(_),Y.forEach(_),this.h()},h(){m(n,"class","flex justify-center items-center flex-1 h-full w-full max-h-full"),m(h,"class","line-clamp-1 text-sm font-medium"),m(f,"type","button"),m(b,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),m(b,"type","button"),m(s,"class","flex justify-between items-center pb-2 w-full"),m(e,"class","max-w-lg w-full h-full max-h-[100dvh] flex flex-col justify-between p-3 md:p-6")},m(D,Y){A(D,e,Y),I&&I.m(e,null),E(e,t),E(e,n),y.m(n,null),E(e,o),E(e,s),E(s,i),O[r].m(i,null),E(s,c),E(s,u),E(u,f),E(f,h),L.m(h,null),E(s,d),E(s,p),E(p,b),g=!0,v||(k=[ke(f,"click",l[31]),ke(b,"click",l[32])],v=!0)},p(D,Y){D[4]?I?I.p(D,Y):(I=ki(D),I.c(),I.m(e,t)):I&&(I.d(1),I=null),M===(M=T(D))&&y?y.p(D,Y):(y.d(1),y=M(D),y&&(y.c(),y.m(n,null)));let P=r;r=B(D),r===P?O[r].p(D,Y):(He(),N(O[P],1,1,()=>{O[P]=null}),Be(),a=O[r],a?a.p(D,Y):(a=O[r]=H[r](D),a.c()),S(a,1),a.m(i,null)),Z===(Z=j(D))&&L?L.p(D,Y):(L.d(1),L=Z(D),L&&(L.c(),L.m(h,null)))},i(D){g||(S(a),g=!0)},o(D){N(a),g=!1},d(D){D&&_(e),I&&I.d(),y.d(),O[r].d(),L.d(),v=!1,on(k)}}}function ki(l){let e,t,n;function o(r,a){return r[3]?b0:r[1]||r[2]?p0:_0}let s=o(l),i=s(l);return{c(){e=V("button"),i.c(),this.h()},l(r){e=z(r,"BUTTON",{type:!0,class:!0});var a=C(e);i.l(a),a.forEach(_),this.h()},h(){m(e,"type","button"),m(e,"class","flex justify-center items-center w-full h-20 min-h-20")},m(r,a){A(r,e,a),i.m(e,null),t||(n=ke(e,"click",l[26]),t=!0)},p(r,a){s===(s=o(r))&&i?i.p(r,a):(i.d(1),i=s(r),i&&(i.c(),i.m(e,null)))},d(r){r&&_(e),i.d(),t=!1,n()}}}function _0(l){let e,t,n;return{c(){e=V("div"),this.h()},l(o){e=z(o,"DIV",{class:!0,style:!0}),C(e).forEach(_),this.h()},h(){var o,s,i,r,a,c,u,f,h;m(e,"class",t=(l[6]*100>4?" size-[4.5rem]":l[6]*100>2?" size-16":l[6]*100>1?"size-14":"size-12")+" transition-all rounded-full "+((((i=(s=(o=l[0])==null?void 0:o.info)==null?void 0:s.meta)==null?void 0:i.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")+" bg-black dark:bg-white"),m(e,"style",n=(((c=(a=(r=l[0])==null?void 0:r.info)==null?void 0:a.meta)==null?void 0:c.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(h=(f=(u=l[0])==null?void 0:u.info)==null?void 0:f.meta)==null?void 0:h.profile_image_url}');`:"")},m(o,s){A(o,e,s)},p(o,s){var i,r,a,c,u,f,h,d,p;s[0]&65&&t!==(t=(o[6]*100>4?" size-[4.5rem]":o[6]*100>2?" size-16":o[6]*100>1?"size-14":"size-12")+" transition-all rounded-full "+((((a=(r=(i=o[0])==null?void 0:i.info)==null?void 0:r.meta)==null?void 0:a.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")+" bg-black dark:bg-white")&&m(e,"class",t),s[0]&1&&n!==(n=(((f=(u=(c=o[0])==null?void 0:c.info)==null?void 0:u.meta)==null?void 0:f.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(p=(d=(h=o[0])==null?void 0:h.info)==null?void 0:d.meta)==null?void 0:p.profile_image_url}');`:"")&&m(e,"style",n)},d(o){o&&_(e)}}}function p0(l){let e,t,n,o,s,i;return{c(){e=Te("svg"),t=Te("style"),n=Ie(`.spinner_qM83 {
								animation: spinner_8HQG 1.05s infinite;
							}
							.spinner_oXPr {
								animation-delay: 0.1s;
							}
							.spinner_ZTLf {
								animation-delay: 0.2s;
							}
							@keyframes spinner_8HQG {
								0%,
								57.14% {
									animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
									transform: translate(0);
								}
								28.57% {
									animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
									transform: translateY(-6px);
								}
								100% {
									transform: translate(0);
								}
							}
						`),o=Te("circle"),s=Te("circle"),i=Te("circle"),this.h()},l(r){e=Ve(r,"svg",{class:!0,viewBox:!0,fill:!0,xmlns:!0});var a=C(e);t=Ve(a,"style",{});var c=C(t);n=Se(c,`.spinner_qM83 {
								animation: spinner_8HQG 1.05s infinite;
							}
							.spinner_oXPr {
								animation-delay: 0.1s;
							}
							.spinner_ZTLf {
								animation-delay: 0.2s;
							}
							@keyframes spinner_8HQG {
								0%,
								57.14% {
									animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
									transform: translate(0);
								}
								28.57% {
									animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
									transform: translateY(-6px);
								}
								100% {
									transform: translate(0);
								}
							}
						`),c.forEach(_),o=Ve(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),C(o).forEach(_),s=Ve(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),C(s).forEach(_),i=Ve(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),C(i).forEach(_),a.forEach(_),this.h()},h(){m(o,"class","spinner_qM83"),m(o,"cx","4"),m(o,"cy","12"),m(o,"r","3"),m(s,"class","spinner_qM83 spinner_oXPr"),m(s,"cx","12"),m(s,"cy","12"),m(s,"r","3"),m(i,"class","spinner_qM83 spinner_ZTLf"),m(i,"cx","20"),m(i,"cy","12"),m(i,"r","3"),m(e,"class","size-12 text-gray-900 dark:text-gray-400"),m(e,"viewBox","0 0 24 24"),m(e,"fill","currentColor"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(r,a){A(r,e,a),E(e,t),E(t,n),E(e,o),E(e,s),E(e,i)},p:ye,d(r){r&&_(e)}}}function b0(l){let e,t;return{c(){e=V("div"),t=Ie(l[3]),this.h()},l(n){e=z(n,"DIV",{class:!0,style:!0});var o=C(e);t=Se(o,l[3]),o.forEach(_),this.h()},h(){m(e,"class","transition-all rounded-full"),et(e,"font-size",(l[6]*100>4?"4.5":l[6]*100>2?"4.25":l[6]*100>1?"3.75":"3.5")+"rem"),et(e,"width","100%"),et(e,"text-align","center")},m(n,o){A(n,e,o),E(e,t)},p(n,o){o[0]&8&&Me(t,n[3]),o[0]&64&&et(e,"font-size",(n[6]*100>4?"4.5":n[6]*100>2?"4.25":n[6]*100>1?"3.75":"3.5")+"rem")},d(n){n&&_(e)}}}function v0(l){let e,t,n,o,s,i,r,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-6"><path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"></path></svg>',c,u;return{c(){e=V("div"),t=V("video"),n=ee(),o=V("canvas"),s=ee(),i=V("div"),r=V("button"),r.innerHTML=a,this.h()},l(f){e=z(f,"DIV",{class:!0});var h=C(e);t=z(h,"VIDEO",{id:!0,class:!0}),C(t).forEach(_),n=te(h),o=z(h,"CANVAS",{id:!0,style:!0}),C(o).forEach(_),s=te(h),i=z(h,"DIV",{class:!0});var d=C(i);r=z(d,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ft(r)!=="svelte-16ul42n"&&(r.innerHTML=a),d.forEach(_),h.forEach(_),this.h()},h(){m(t,"id","camera-feed"),t.autoplay=!0,m(t,"class","rounded-2xl h-full min-w-full object-cover object-center"),t.playsInline=!0,m(o,"id","camera-canvas"),et(o,"display","none"),m(r,"type","button"),m(r,"class","p-1.5 text-white cursor-pointer backdrop-blur-xl bg-black/10 rounded-full"),m(i,"class","absolute top-4 md:top-8 left-4"),m(e,"class","relative flex video-container w-full max-h-full pt-2 pb-4 md:py-6 px-2 h-full")},m(f,h){A(f,e,h),E(e,t),E(e,n),E(e,o),E(e,s),E(e,i),E(i,r),c||(u=ke(r,"click",l[28]),c=!0)},p:ye,d(f){f&&_(e),c=!1,u()}}}function w0(l){let e,t,n;function o(r,a){return r[3]?E0:r[1]||r[2]?y0:k0}let s=o(l),i=s(l);return{c(){e=V("button"),i.c(),this.h()},l(r){e=z(r,"BUTTON",{type:!0});var a=C(e);i.l(a),a.forEach(_),this.h()},h(){m(e,"type","button")},m(r,a){A(r,e,a),i.m(e,null),t||(n=ke(e,"click",l[27]),t=!0)},p(r,a){s===(s=o(r))&&i?i.p(r,a):(i.d(1),i=s(r),i&&(i.c(),i.m(e,null)))},d(r){r&&_(e),i.d(),t=!1,n()}}}function k0(l){let e,t,n;return{c(){e=V("div"),this.h()},l(o){e=z(o,"DIV",{class:!0,style:!0}),C(e).forEach(_),this.h()},h(){var o,s,i,r,a,c,u,f,h;m(e,"class",t=(l[6]*100>4?" size-52":l[6]*100>2?"size-48":l[6]*100>1?"size-44":"size-40")+" transition-all rounded-full "+((((i=(s=(o=l[0])==null?void 0:o.info)==null?void 0:s.meta)==null?void 0:i.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white")),m(e,"style",n=(((c=(a=(r=l[0])==null?void 0:r.info)==null?void 0:a.meta)==null?void 0:c.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(h=(f=(u=l[0])==null?void 0:u.info)==null?void 0:f.meta)==null?void 0:h.profile_image_url}');`:"")},m(o,s){A(o,e,s)},p(o,s){var i,r,a,c,u,f,h,d,p;s[0]&65&&t!==(t=(o[6]*100>4?" size-52":o[6]*100>2?"size-48":o[6]*100>1?"size-44":"size-40")+" transition-all rounded-full "+((((a=(r=(i=o[0])==null?void 0:i.info)==null?void 0:r.meta)==null?void 0:a.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?" bg-cover bg-center bg-no-repeat":"bg-black dark:bg-white"))&&m(e,"class",t),s[0]&1&&n!==(n=(((f=(u=(c=o[0])==null?void 0:c.info)==null?void 0:u.meta)==null?void 0:f.profile_image_url)??"/static/favicon.png")!=="/static/favicon.png"?`background-image: url('${(p=(d=(h=o[0])==null?void 0:h.info)==null?void 0:d.meta)==null?void 0:p.profile_image_url}');`:"")&&m(e,"style",n)},d(o){o&&_(e)}}}function y0(l){let e,t,n,o,s,i;return{c(){e=Te("svg"),t=Te("style"),n=Ie(`.spinner_qM83 {
									animation: spinner_8HQG 1.05s infinite;
								}
								.spinner_oXPr {
									animation-delay: 0.1s;
								}
								.spinner_ZTLf {
									animation-delay: 0.2s;
								}
								@keyframes spinner_8HQG {
									0%,
									57.14% {
										animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
										transform: translate(0);
									}
									28.57% {
										animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
										transform: translateY(-6px);
									}
									100% {
										transform: translate(0);
									}
								}
							`),o=Te("circle"),s=Te("circle"),i=Te("circle"),this.h()},l(r){e=Ve(r,"svg",{class:!0,viewBox:!0,fill:!0,xmlns:!0});var a=C(e);t=Ve(a,"style",{});var c=C(t);n=Se(c,`.spinner_qM83 {
									animation: spinner_8HQG 1.05s infinite;
								}
								.spinner_oXPr {
									animation-delay: 0.1s;
								}
								.spinner_ZTLf {
									animation-delay: 0.2s;
								}
								@keyframes spinner_8HQG {
									0%,
									57.14% {
										animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
										transform: translate(0);
									}
									28.57% {
										animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
										transform: translateY(-6px);
									}
									100% {
										transform: translate(0);
									}
								}
							`),c.forEach(_),o=Ve(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),C(o).forEach(_),s=Ve(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),C(s).forEach(_),i=Ve(a,"circle",{class:!0,cx:!0,cy:!0,r:!0}),C(i).forEach(_),a.forEach(_),this.h()},h(){m(o,"class","spinner_qM83"),m(o,"cx","4"),m(o,"cy","12"),m(o,"r","3"),m(s,"class","spinner_qM83 spinner_oXPr"),m(s,"cx","12"),m(s,"cy","12"),m(s,"r","3"),m(i,"class","spinner_qM83 spinner_ZTLf"),m(i,"cx","20"),m(i,"cy","12"),m(i,"r","3"),m(e,"class","size-44 text-gray-900 dark:text-gray-400"),m(e,"viewBox","0 0 24 24"),m(e,"fill","currentColor"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(r,a){A(r,e,a),E(e,t),E(t,n),E(e,o),E(e,s),E(e,i)},p:ye,d(r){r&&_(e)}}}function E0(l){let e,t;return{c(){e=V("div"),t=Ie(l[3]),this.h()},l(n){e=z(n,"DIV",{class:!0,style:!0});var o=C(e);t=Se(o,l[3]),o.forEach(_),this.h()},h(){m(e,"class","transition-all rounded-full"),et(e,"font-size",(l[6]*100>4?"13":l[6]*100>2?"12":l[6]*100>1?"11.5":"11")+"rem"),et(e,"width","100%"),et(e,"text-align","center")},m(n,o){A(n,e,o),E(e,t)},p(n,o){o[0]&8&&Me(t,n[3]),o[0]&64&&et(e,"font-size",(n[6]*100>4?"13":n[6]*100>2?"12":n[6]*100>1?"11.5":"11")+"rem")},d(n){n&&_(e)}}}function I0(l){let e,t;return e=new Pt({props:{content:l[11].t("Camera"),$$slots:{default:[C0]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o[0]&2048&&(s.content=n[11].t("Camera")),o[2]&16&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function S0(l){let e,t;return e=new g0({props:{devices:l[8],$$slots:{default:[D0]},$$scope:{ctx:l}}}),e.$on("change",l[29]),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o[0]&256&&(s.devices=n[8]),o[2]&16&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function C0(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"></path></svg>',n,o;return{c(){e=V("button"),e.innerHTML=t,this.h()},l(s){e=z(s,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ft(e)!=="svelte-1n1gs9g"&&(e.innerHTML=t),this.h()},h(){m(e,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),m(e,"type","button")},m(s,i){A(s,e,i),n||(o=ke(e,"click",l[30]),n=!0)},p:ye,d(s){s&&_(e),n=!1,o()}}}function D0(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path fill-rule="evenodd" d="M15.312 11.424a5.5 5.5 0 0 1-9.201 2.466l-.312-.311h2.433a.75.75 0 0 0 0-1.5H3.989a.75.75 0 0 0-.75.75v4.242a.75.75 0 0 0 1.5 0v-2.43l.31.31a7 7 0 0 0 11.712-3.138.75.75 0 0 0-1.449-.39Zm1.23-3.723a.75.75 0 0 0 .219-.53V2.929a.75.75 0 0 0-1.5 0V5.36l-.31-.31A7 7 0 0 0 3.239 8.188a.75.75 0 1 0 1.448.389A5.5 5.5 0 0 1 13.89 6.11l.311.31h-2.432a.75.75 0 0 0 0 1.5h4.243a.75.75 0 0 0 .53-.219Z" clip-rule="evenodd"></path></svg>';return{c(){e=V("button"),e.innerHTML=t,this.h()},l(n){e=z(n,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ft(e)!=="svelte-5e0pue"&&(e.innerHTML=t),this.h()},h(){m(e,"class","p-3 rounded-full bg-gray-50 dark:bg-gray-900"),m(e,"type","button")},m(n,o){A(n,e,o)},p:ye,d(n){n&&_(e)}}}function M0(l){let e=l[11].t("Listening...")+"",t;return{c(){t=Ie(e)},l(n){t=Se(n,e)},m(n,o){A(n,t,o)},p(n,o){o[0]&2048&&e!==(e=n[11].t("Listening...")+"")&&Me(t,e)},d(n){n&&_(t)}}}function T0(l){let e=l[11].t("Tap to interrupt")+"",t;return{c(){t=Ie(e)},l(n){t=Se(n,e)},m(n,o){A(n,t,o)},p(n,o){o[0]&2048&&e!==(e=n[11].t("Tap to interrupt")+"")&&Me(t,e)},d(n){n&&_(t)}}}function V0(l){let e=l[11].t("Thinking...")+"",t;return{c(){t=Ie(e)},l(n){t=Se(n,e)},m(n,o){A(n,t,o)},p(n,o){o[0]&2048&&e!==(e=n[11].t("Thinking...")+"")&&Me(t,e)},d(n){n&&_(t)}}}function z0(l){let e,t,n=l[10]&&wi(l);return{c(){n&&n.c(),e=Ae()},l(o){n&&n.l(o),e=Ae()},m(o,s){n&&n.m(o,s),A(o,e,s),t=!0},p(o,s){o[10]?n?(n.p(o,s),s[0]&1024&&S(n,1)):(n=wi(o),n.c(),S(n,1),n.m(e.parentNode,e)):n&&(He(),N(n,1,1,()=>{n=null}),Be())},i(o){t||(S(n),t=!0)},o(o){N(n),t=!1},d(o){o&&_(e),n&&n.d(o)}}}function N0(l,e,t){let n,o,s,i,r,a;ae(l,dl,de=>t(45,n=de)),ae(l,Yl,de=>t(46,o=de)),ae(l,Zn,de=>t(47,s=de)),ae(l,Xo,de=>t(48,i=de)),ae(l,Sn,de=>t(10,r=de));const c=un(),u=jt("i18n");ae(l,u,de=>t(11,a=de));let{eventTarget:f}=e,{submitPrompt:h}=e,{stopResponse:d}=e,{files:p}=e,{chatId:b}=e,{modelId:w}=e,g=null,v=null,k=!1,I=!1,T=!1,M=null,y=!1,H=null,O=!1,B=0,j=!1,Z,L=null,D=[],Y=[],P=null;const F=async()=>{const de=await navigator.mediaDevices.enumerateDevices();t(8,Y=de.filter(Ce=>Ce.kind==="videoinput")),navigator.mediaDevices.getDisplayMedia&&t(8,Y=[...Y,{deviceId:"screen",label:"Screen Share"}]),console.log(Y),P===null&&Y.length>0&&t(9,P=Y[0].deviceId)},G=async()=>{if(await F(),H===null){t(4,y=!0),await $e();try{await K()}catch(de){console.error("Error accessing webcam: ",de)}}},K=async()=>{const de=document.getElementById("camera-feed");de&&(P==="screen"?t(5,H=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:!1})):t(5,H=await navigator.mediaDevices.getUserMedia({video:{deviceId:P?{exact:P}:void 0}})),H&&(await F(),de.srcObject=H,await de.play()))},X=async()=>{H&&H.getTracks().forEach(Ce=>Ce.stop()),t(5,H=null)},Q=()=>{const de=document.getElementById("camera-feed"),Ce=document.getElementById("camera-canvas");if(!Ce)return;const ze=Ce.getContext("2d");Ce.width=de.videoWidth,Ce.height=de.videoHeight,ze.drawImage(de,0,0,de.videoWidth,de.videoHeight);const Ge=Ce.toDataURL("image/png");return console.log(Ge),Ge},W=async()=>{await X(),t(4,y=!1)},J=-55,q=async de=>{await $e();const Ce=Zi(de,"recording.wav"),ze=await Gi(localStorage.token,Ce).catch(Ge=>(nt.error(`${Ge}`),null));if(ze&&(console.log(ze.text),ze.text!=="")){const Ge=await h(ze.text,{_raw:!0});console.log(Ge)}},ce=async(de=!0)=>{if(r){console.log("%c%s","color: red; font-size: 20px;","ðŸš¨ stopRecordingCallback ðŸš¨");const Ce=D.slice(0);if(D=[],Z=!1,de&&ge(),I){if(t(1,k=!0),t(3,M=null),H){const Ge=Q();t(20,p=[{type:"image",url:Ge}])}const ze=new Blob(Ce,{type:"audio/wav"});await q(ze),I=!1,t(1,k=!1)}}else D=[],Z=!1,L&&L.getTracks().forEach(ze=>ze.stop()),t(7,L=null)},ge=async()=>{r&&(L||t(7,L=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}})),Z=new MediaRecorder(L),Z.onstart=()=>{console.log("Recording started"),D=[],x(L)},Z.ondataavailable=de=>{j&&D.push(de.data)},Z.onstop=de=>{console.log("Recording stopped",L,de),ce()},Z.start())},re=async()=>{try{Z&&Z.stop()}catch(de){console.log("Error stopping audio stream:",de)}L&&(L.getAudioTracks().forEach(function(de){de.stop()}),t(7,L=null))},Pe=de=>{let Ce=0;for(let ze=0;ze<de.length;ze++){const Ge=(de[ze]-128)/128;Ce+=Ge*Ge}return Math.sqrt(Ce/de.length)},x=de=>{const Ce=new AudioContext,ze=Ce.createMediaStreamSource(de),Ge=Ce.createAnalyser();Ge.minDecibels=J,ze.connect(Ge);const It=Ge.frequencyBinCount,yt=new Uint8Array(It),Dt=new Uint8Array(Ge.fftSize);let Mt=Date.now();j=!1,console.log("ðŸ”Š Sound detection started",Mt,j),(()=>{const Bt=()=>{if(!Z||!r)return;if(T&&!((s==null?void 0:s.voiceInterruption)??!1)?(Ge.maxDecibels=0,Ge.minDecibels=-1):(Ge.minDecibels=J,Ge.maxDecibels=-30),Ge.getByteTimeDomainData(Dt),Ge.getByteFrequencyData(yt),t(6,B=Pe(Dt)),yt.some(Kt=>Kt>0)&&(console.log("%c%s","color: red; font-size: 20px;","ðŸ”Š Sound detected"),j||(j=!0,lt()),Mt=Date.now()),j&&Date.now()-Mt>2e3&&(I=!0,Z)){console.log("%c%s","color: red; font-size: 20px;","ðŸ”‡ Silence detected"),Z.stop();return}window.requestAnimationFrame(Bt)};window.requestAnimationFrame(Bt)})()};let ue={},Ee=null,Xe=null;const Ke=de=>r?new Promise(Ce=>{let ze=[];const Ge=setInterval(async()=>{var It,yt,Dt;if(ze=await speechSynthesis.getVoices(),ze.length>0){clearInterval(Ge);const Mt=((It=ze==null?void 0:ze.filter(sn=>{var Bt,At,Kt,Gt;return sn.voiceURI===(((At=(Bt=s==null?void 0:s.audio)==null?void 0:Bt.tts)==null?void 0:At.voice)??((Gt=(Kt=o==null?void 0:o.audio)==null?void 0:Kt.tts)==null?void 0:Gt.voice))}))==null?void 0:It.at(0))??void 0;Xe=new SpeechSynthesisUtterance(de),Xe.rate=((Dt=(yt=s.audio)==null?void 0:yt.tts)==null?void 0:Dt.playbackRate)??1,Mt&&(Xe.voice=Mt),speechSynthesis.speak(Xe),Xe.onend=async sn=>{await new Promise(Bt=>setTimeout(Bt,200)),Ce(sn)}}},100)}):Promise.resolve(),fe=de=>r?new Promise(Ce=>{var Ge,It;const ze=document.getElementById("audioElement");ze&&(ze.src=de.src,ze.muted=!0,ze.playbackRate=((It=(Ge=s.audio)==null?void 0:Ge.tts)==null?void 0:It.playbackRate)??1,ze.play().then(()=>{ze.muted=!1}).catch(yt=>{console.error(yt)}),ze.onended=async yt=>{await new Promise(Dt=>setTimeout(Dt,100)),Ce(yt)})}):Promise.resolve(),lt=async()=>{t(2,T=!1),O&&d(),Xe&&(speechSynthesis.cancel(),Xe=null);const de=document.getElementById("audioElement");de&&(de.muted=!0,de.pause(),de.currentTime=0)};let it=new AbortController;const zt=new Map,Ct=new Map,Ht=async de=>{var Ce,ze,Ge,It,yt,Dt,Mt,sn,Bt,At,Kt,Gt,tn,rn;if(!zt.has(de))try{if((s==null?void 0:s.showEmojiInCall)??!1){const Wt=await Vc(localStorage.token,w,de,b);Wt&&Ct.set(de,Wt)}if(((ze=(Ce=s.audio)==null?void 0:Ce.tts)==null?void 0:ze.engine)==="browser-kokoro"){const Wt=await i.generate({text:de,voice:((It=(Ge=s==null?void 0:s.audio)==null?void 0:Ge.tts)==null?void 0:It.voice)??((Dt=(yt=o==null?void 0:o.audio)==null?void 0:yt.tts)==null?void 0:Dt.voice)}).catch(_t=>{console.error(_t),nt.error(`${_t}`)});Wt&&zt.set(de,new Audio(Wt))}else if(o.audio.tts.engine!==""){const Wt=await Lc(localStorage.token,((sn=(Mt=s==null?void 0:s.audio)==null?void 0:Mt.tts)==null?void 0:sn.defaultVoice)===o.audio.tts.voice?((At=(Bt=s==null?void 0:s.audio)==null?void 0:Bt.tts)==null?void 0:At.voice)??((Gt=(Kt=o==null?void 0:o.audio)==null?void 0:Kt.tts)==null?void 0:Gt.voice):(rn=(tn=o==null?void 0:o.audio)==null?void 0:tn.tts)==null?void 0:rn.voice,de).catch(_t=>(console.error(_t),null));if(Wt){const _t=await Wt.blob(),Jt=URL.createObjectURL(_t);zt.set(de,new Audio(Jt))}}else zt.set(de,!0)}catch(Wt){console.error("Error synthesizing speech:",Wt)}return zt.get(de)};let wt={};const Ut=async(de,Ce)=>{for(;!Ce.aborted;)if(wt[de]&&wt[de].length>0){const ze=wt[de].shift();if(zt.has(ze))if(((s==null?void 0:s.showEmojiInCall)??!1)&&Ct.has(ze)?t(3,M=Ct.get(ze)):t(3,M=null),o.audio.tts.engine!=="")try{console.log("%c%s","color: red; font-size: 20px;",`Playing audio for content: ${ze}`);const Ge=zt.get(ze);await fe(Ge),console.log(`Played audio for content: ${ze}`),await new Promise(It=>setTimeout(It,200))}catch(Ge){console.error("Error playing audio:",Ge)}else await Ke(ze);else wt[de].unshift(ze),console.log(`Audio for "${ze}" not yet available in the cache, re-queued...`),await new Promise(Ge=>setTimeout(Ge,200))}else if(ue[de]&&wt[de]&&wt[de].length===0){t(2,T=!1);break}else await new Promise(ze=>setTimeout(ze,200));console.log(`Audio monitoring and playing stopped for message ID ${de}`)},pe=async de=>{const{id:Ce}=de.detail;O=!0,Ee!==Ce&&(console.log(`Received chat start event for message ID ${Ce}`),Ee=Ce,it&&it.abort(),it=new AbortController,t(2,T=!0),Ut(Ce,it.signal))},Ye=async de=>{const{id:Ce,content:ze}=de.detail;if(Ee===Ce){console.log(`Received chat event for message ID ${Ce}: ${ze}`);try{wt[Ce]===void 0?wt[Ce]=[ze]:wt[Ce].push(ze),console.log(ze),Ht(ze)}catch(Ge){console.error("Failed to fetch or play audio:",Ge)}}},ot=async de=>{const{id:Ce,content:ze}=de.detail;ue[Ce]=!0,O=!1};kn(async()=>{const de=async()=>{try{g=await navigator.wakeLock.request("screen")}catch(Ce){console.log(Ce)}g&&g.addEventListener("release",()=>{console.log("Wake Lock released")})};return"wakeLock"in navigator&&(await de(),document.addEventListener("visibilitychange",async()=>{g!==null&&document.visibilityState==="visible"&&await de()})),t(0,v=n.find(Ce=>Ce.id===w)),ge(),f.addEventListener("chat:start",pe),f.addEventListener("chat",Ye),f.addEventListener("chat:finish",ot),async()=>{await lt(),re(),f.removeEventListener("chat:start",pe),f.removeEventListener("chat",Ye),f.removeEventListener("chat:finish",ot),it.abort(),await $e(),await lt(),await ce(!1),await W()}}),ll(async()=>{await lt(),await ce(!1),await W(),await re(),f.removeEventListener("chat:start",pe),f.removeEventListener("chat",Ye),f.removeEventListener("chat:finish",ot),it.abort(),await $e(),await lt()});const he=()=>{T&&lt()},kt=()=>{T&&lt()},ht=()=>{W()},bt=async de=>{console.log(de.detail),t(9,P=de.detail),await X(),await K()},De=async()=>{await navigator.mediaDevices.getUserMedia({video:!0}),G()},Nt=()=>{T&&lt()},mt=async()=>{await re(),await X(),console.log(L),console.log(H),Sn.set(!1),c("close")};return l.$$set=de=>{"eventTarget"in de&&t(21,f=de.eventTarget),"submitPrompt"in de&&t(22,h=de.submitPrompt),"stopResponse"in de&&t(23,d=de.stopResponse),"files"in de&&t(20,p=de.files),"chatId"in de&&t(24,b=de.chatId),"modelId"in de&&t(25,w=de.modelId)},[v,k,T,M,y,H,B,L,Y,P,r,a,c,u,G,K,X,W,re,lt,p,f,h,d,b,w,he,kt,ht,bt,De,Nt,mt]}class Aa extends Re{constructor(e){super(),Ue(this,e,N0,z0,Fe,{eventTarget:21,submitPrompt:22,stopResponse:23,files:20,chatId:24,modelId:25},null,[-1,-1,-1])}}function P0(l){var I,T,M,y,H,O,B,j,Z,L;let e,t,n,o,s,i,r=(((T=(I=l[0])==null?void 0:I.model)==null?void 0:T.name)??((y=(M=l[0])==null?void 0:M.message)==null?void 0:y.model)??"Assistant")+"",a,c,u,f,h,d,p,b,w;t=new xi({props:{src:((j=(B=(O=(H=l[0])==null?void 0:H.model)==null?void 0:O.info)==null?void 0:B.meta)==null?void 0:j.profile_image_url)??"",className:"size-5 -translate-y-[1px]"}}),f=new _u({props:{className:"size-3 "+((L=(Z=l[0])==null?void 0:Z.message)!=null&&L.favorite?"fill-red-500 stroke-red-500":"hover:fill-red-500 hover:stroke-red-500")+" ",strokeWidth:"2.5"}});function g(D,Y){var P,F;return(F=(P=D[0])==null?void 0:P.message)!=null&&F.error?B0:H0}let v=g(l),k=v(l);return{c(){e=V("div"),ne(t.$$.fragment),n=ee(),o=V("div"),s=V("div"),i=V("div"),a=Ie(r),c=ee(),u=V("button"),ne(f.$$.fragment),d=ee(),k.c(),this.h()},l(D){e=z(D,"DIV",{class:!0});var Y=C(e);se(t.$$.fragment,Y),n=te(Y),o=z(Y,"DIV",{class:!0});var P=C(o);s=z(P,"DIV",{class:!0});var F=C(s);i=z(F,"DIV",{class:!0});var G=C(i);a=Se(G,r),G.forEach(_),c=te(F),u=z(F,"BUTTON",{class:!0});var K=C(u);se(f.$$.fragment,K),K.forEach(_),F.forEach(_),d=te(P),k.l(P),P.forEach(_),Y.forEach(_),this.h()},h(){var D,Y;m(i,"class","text-xs text-black dark:text-white font-medium line-clamp-1"),m(u,"class",h=(Y=(D=l[0])==null?void 0:D.message)!=null&&Y.favorite?"":"invisible group-hover:visible"),m(s,"class","flex justify-between items-center"),m(o,"class","ml-2"),m(e,"class","flex w-full")},m(D,Y){A(D,e,Y),le(t,e,null),E(e,n),E(e,o),E(o,s),E(s,i),E(i,a),E(s,c),E(s,u),le(f,u,null),E(o,d),k.m(o,null),p=!0,b||(w=ke(u,"click",l[1]),b=!0)},p(D,Y){var G,K,X,Q,W,J,q,ce,ge,re,Pe,x;const P={};Y&1&&(P.src=((Q=(X=(K=(G=D[0])==null?void 0:G.model)==null?void 0:K.info)==null?void 0:X.meta)==null?void 0:Q.profile_image_url)??""),t.$set(P),(!p||Y&1)&&r!==(r=(((J=(W=D[0])==null?void 0:W.model)==null?void 0:J.name)??((ce=(q=D[0])==null?void 0:q.message)==null?void 0:ce.model)??"Assistant")+"")&&Me(a,r);const F={};Y&1&&(F.className="size-3 "+((re=(ge=D[0])==null?void 0:ge.message)!=null&&re.favorite?"fill-red-500 stroke-red-500":"hover:fill-red-500 hover:stroke-red-500")+" "),f.$set(F),(!p||Y&1&&h!==(h=(x=(Pe=D[0])==null?void 0:Pe.message)!=null&&x.favorite?"":"invisible group-hover:visible"))&&m(u,"class",h),v===(v=g(D))&&k?k.p(D,Y):(k.d(1),k=v(D),k&&(k.c(),k.m(o,null)))},i(D){p||(S(t.$$.fragment,D),S(f.$$.fragment,D),p=!0)},o(D){N(t.$$.fragment,D),N(f.$$.fragment,D),p=!1},d(D){D&&_(e),oe(t),oe(f),k.d(),b=!1,w()}}}function O0(l){var p,b,w;let e,t,n,o,s,i,r=(((b=(p=l[0])==null?void 0:p.user)==null?void 0:b.name)??"User")+"",a,c,u;t=new xi({props:{src:((w=l[0].user)==null?void 0:w.profile_image_url)??"/user.png",className:"size-5 -translate-y-[1px]"}});function f(g,v){var k,I;return(I=(k=g[0])==null?void 0:k.message)!=null&&I.error?L0:A0}let h=f(l),d=h(l);return{c(){e=V("div"),ne(t.$$.fragment),n=ee(),o=V("div"),s=V("div"),i=V("div"),a=Ie(r),c=ee(),d.c(),this.h()},l(g){e=z(g,"DIV",{class:!0});var v=C(e);se(t.$$.fragment,v),n=te(v),o=z(v,"DIV",{class:!0});var k=C(o);s=z(k,"DIV",{class:!0});var I=C(s);i=z(I,"DIV",{class:!0});var T=C(i);a=Se(T,r),T.forEach(_),I.forEach(_),c=te(k),d.l(k),k.forEach(_),v.forEach(_),this.h()},h(){m(i,"class","text-xs text-black dark:text-white font-medium line-clamp-1"),m(s,"class","flex justify-between items-center"),m(o,"class","ml-2"),m(e,"class","flex w-full")},m(g,v){A(g,e,v),le(t,e,null),E(e,n),E(e,o),E(o,s),E(s,i),E(i,a),E(o,c),d.m(o,null),u=!0},p(g,v){var I,T,M;const k={};v&1&&(k.src=((I=g[0].user)==null?void 0:I.profile_image_url)??"/user.png"),t.$set(k),(!u||v&1)&&r!==(r=(((M=(T=g[0])==null?void 0:T.user)==null?void 0:M.name)??"User")+"")&&Me(a,r),h===(h=f(g))&&d?d.p(g,v):(d.d(1),d=h(g),d&&(d.c(),d.m(o,null)))},i(g){u||(S(t.$$.fragment,g),u=!0)},o(g){N(t.$$.fragment,g),u=!1},d(g){g&&_(e),oe(t),d.d()}}}function H0(l){let e,t=l[0].message.content+"",n;return{c(){e=V("div"),n=Ie(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=C(e);n=Se(s,t),s.forEach(_),this.h()},h(){m(e,"class","text-gray-500 line-clamp-2 text-xs mt-0.5")},m(o,s){A(o,e,s),E(e,n)},p(o,s){s&1&&t!==(t=o[0].message.content+"")&&Me(n,t)},d(o){o&&_(e)}}}function B0(l){let e,t=l[0].message.error.content+"",n;return{c(){e=V("div"),n=Ie(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=C(e);n=Se(s,t),s.forEach(_),this.h()},h(){m(e,"class","text-red-500 line-clamp-2 text-xs mt-0.5")},m(o,s){A(o,e,s),E(e,n)},p(o,s){s&1&&t!==(t=o[0].message.error.content+"")&&Me(n,t)},d(o){o&&_(e)}}}function A0(l){let e,t=l[0].message.content+"",n;return{c(){e=V("div"),n=Ie(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=C(e);n=Se(s,t),s.forEach(_),this.h()},h(){m(e,"class","text-gray-500 line-clamp-2 text-xs mt-0.5")},m(o,s){A(o,e,s),E(e,n)},p(o,s){s&1&&t!==(t=o[0].message.content+"")&&Me(n,t)},d(o){o&&_(e)}}}function L0(l){let e,t=l[0].message.error.content+"",n;return{c(){e=V("div"),n=Ie(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=C(e);n=Se(s,t),s.forEach(_),this.h()},h(){m(e,"class","text-red-500 line-clamp-2 text-xs mt-0.5")},m(o,s){A(o,e,s),E(e,n)},p(o,s){s&1&&t!==(t=o[0].message.error.content+"")&&Me(n,t)},d(o){o&&_(e)}}}function R0(l){let e,t,n,o;const s=[O0,P0],i=[];function r(a,c){return a[0].message.role==="user"?0:1}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ae()},l(a){t.l(a),n=Ae()},m(a,c){i[e].m(a,c),A(a,n,c),o=!0},p(a,c){let u=e;e=r(a),e===u?i[e].p(a,c):(He(),N(i[u],1,1,()=>{i[u]=null}),Be(),t=i[e],t?t.p(a,c):(t=i[e]=s[e](a),t.c()),S(t,1),t.m(n.parentNode,n))},i(a){o||(S(t),o=!0)},o(a){N(t),o=!1},d(a){a&&_(n),i[e].d(a)}}}function U0(l){var a,c;let e,t,n,o,s,i,r;return t=new Pt({props:{content:(c=(a=l[0])==null?void 0:a.message)!=null&&c.error?l[0].message.error.content:l[0].message.content,class:"w-full",allowHTML:!1,$$slots:{default:[R0]},$$scope:{ctx:l}}}),o=new Tl({props:{type:"target",position:rt.Top,class:"w-2 rounded-full dark:bg-gray-900"}}),i=new Tl({props:{type:"source",position:rt.Bottom,class:"w-2 rounded-full dark:bg-gray-900"}}),{c(){e=V("div"),ne(t.$$.fragment),n=ee(),ne(o.$$.fragment),s=ee(),ne(i.$$.fragment),this.h()},l(u){e=z(u,"DIV",{class:!0});var f=C(e);se(t.$$.fragment,f),n=te(f),se(o.$$.fragment,f),s=te(f),se(i.$$.fragment,f),f.forEach(_),this.h()},h(){m(e,"class","px-4 py-3 shadow-md rounded-xl dark:bg-black bg-white border dark:border-gray-900 w-60 h-20 group")},m(u,f){A(u,e,f),le(t,e,null),E(e,n),le(o,e,null),E(e,s),le(i,e,null),r=!0},p(u,[f]){var d,p;const h={};f&1&&(h.content=(p=(d=u[0])==null?void 0:d.message)!=null&&p.error?u[0].message.error.content:u[0].message.content),f&5&&(h.$$scope={dirty:f,ctx:u}),t.$set(h)},i(u){r||(S(t.$$.fragment,u),S(o.$$.fragment,u),S(i.$$.fragment,u),r=!0)},o(u){N(t.$$.fragment,u),N(o.$$.fragment,u),N(i.$$.fragment,u),r=!1},d(u){u&&_(e),oe(t),oe(o),oe(i)}}}function W0(l,e,t){let{data:n}=e;const o=()=>{var s;t(0,n.message.favorite=!(((s=n==null?void 0:n.message)==null?void 0:s.favorite)??!1),n)};return l.$$set=s=>{"data"in s&&t(0,n=s.data)},[n,o]}class F0 extends Re{constructor(e){super(),Ue(this,e,W0,U0,Fe,{data:0})}}function j0(l){let e,t,n,o;return e=new z1({props:{showLock:!1}}),n=new j1({props:{variant:Jn.Dots}}),{c(){ne(e.$$.fragment),t=ee(),ne(n.$$.fragment)},l(s){se(e.$$.fragment,s),t=te(s),se(n.$$.fragment,s)},m(s,i){le(e,s,i),A(s,t,i),le(n,s,i),o=!0},p:ye,i(s){o||(S(e.$$.fragment,s),S(n.$$.fragment,s),o=!0)},o(s){N(e.$$.fragment,s),N(n.$$.fragment,s),o=!1},d(s){s&&_(t),oe(e,s),oe(n,s)}}}function Y0(l){let e,t;return e=new l1({props:{nodes:l[0],nodeTypes:l[1],edges:l[2],fitView:!0,minZoom:.001,colorMode:l[3].includes("dark")||l[3]==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",nodesConnectable:!1,nodesDraggable:!1,oninit:l[5],$$slots:{default:[j0]},$$scope:{ctx:l}}}),e.$on("nodeclick",l[6]),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,[o]){const s={};o&1&&(s.nodes=n[0]),o&2&&(s.nodeTypes=n[1]),o&4&&(s.edges=n[2]),o&8&&(s.colorMode=n[3].includes("dark")||n[3]==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),o&128&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function X0(l,e,t){let n;ae(l,$a,u=>t(3,n=u));const o=un();let{nodes:s}=e,{nodeTypes:i}=e,{edges:r}=e;const a=()=>{console.log("Flow initialized")},c=u=>o("nodeclick",u.detail);return l.$$set=u=>{"nodes"in u&&t(0,s=u.nodes),"nodeTypes"in u&&t(1,i=u.nodeTypes),"edges"in u&&t(2,r=u.edges)},[s,i,r,n,o,a,c]}class K0 extends Re{constructor(e){super(),Ue(this,e,X0,Y0,Fe,{nodes:0,nodeTypes:1,edges:2})}}function Z0(l){let e,t;return{c(){e=Te("svg"),t=Te("path"),this.h()},l(n){e=Ve(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=C(e);t=Ve(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){A(n,e,o),E(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:ye,o:ye,d(n){n&&_(e)}}}function G0(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="1.5"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class La extends Re{constructor(e){super(),Ue(this,e,G0,Z0,Fe,{className:0,strokeWidth:1})}}function yi(l){let e,t;return e=new K0({props:{nodes:l[6],nodeTypes:l[8],edges:l[7]}}),e.$on("nodeclick",l[12]),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p:ye,i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function q0(l){let e,t,n,o,s,i,r,a=l[1].t("Chat Overview")+"",c,u,f,h,d,p,b,w;s=new La({props:{className:"size-3.5"}}),h=new So({props:{className:"size-3.5"}});let g=l[2].length>0&&yi(l);return{c(){e=V("div"),t=V("div"),n=V("div"),o=V("button"),ne(s.$$.fragment),i=ee(),r=V("div"),c=Ie(a),u=ee(),f=V("button"),ne(h.$$.fragment),d=ee(),g&&g.c(),this.h()},l(v){e=z(v,"DIV",{class:!0});var k=C(e);t=z(k,"DIV",{class:!0});var I=C(t);n=z(I,"DIV",{class:!0});var T=C(n);o=z(T,"BUTTON",{class:!0});var M=C(o);se(s.$$.fragment,M),M.forEach(_),i=te(T),r=z(T,"DIV",{class:!0});var y=C(r);c=Se(y,a),y.forEach(_),T.forEach(_),u=te(I),f=z(I,"BUTTON",{class:!0});var H=C(f);se(h.$$.fragment,H),H.forEach(_),I.forEach(_),d=te(k),g&&g.l(k),k.forEach(_),this.h()},h(){m(o,"class","self-center p-0.5"),m(r,"class","text-lg font-medium self-center font-primary"),m(n,"class","flex items-center gap-2.5"),m(f,"class","self-center p-0.5"),m(t,"class","absolute z-50 w-full flex justify-between dark:text-gray-100 px-4 py-3.5"),m(e,"class","w-full h-full relative")},m(v,k){A(v,e,k),E(e,t),E(t,n),E(n,o),le(s,o,null),E(n,i),E(n,r),E(r,c),E(t,u),E(t,f),le(h,f,null),E(e,d),g&&g.m(e,null),p=!0,b||(w=[ke(o,"click",l[10]),ke(f,"click",l[11])],b=!0)},p(v,[k]){(!p||k&2)&&a!==(a=v[1].t("Chat Overview")+"")&&Me(c,a),v[2].length>0?g?(g.p(v,k),k&4&&S(g,1)):(g=yi(v),g.c(),S(g,1),g.m(e,null)):g&&(He(),N(g,1,1,()=>{g=null}),Be())},i(v){p||(S(s.$$.fragment,v),S(h.$$.fragment,v),S(g),p=!0)},o(v){N(s.$$.fragment,v),N(h.$$.fragment,v),N(g),p=!1},d(v){v&&_(e),oe(s),oe(h),g&&g.d(),b=!1,on(w)}}}function J0(l,e,t){let n,o,s,i;ae(l,dl,O=>t(13,n=O)),ae(l,xn,O=>t(14,o=O));const r=un(),a=jt("i18n");ae(l,a,O=>t(1,s=O));const{width:c,height:u}=Xt(),{fitView:f,getViewport:h}=Y1(),d=X1();let{history:p}=e,b=null;const w=Qe([]);ae(l,w,O=>t(2,i=O));const g=Qe([]),v={custom:F0},k=async()=>{b===null?await f({nodes:[{id:p.currentId}]}):await f({nodes:[{id:b}]}),t(0,b=null)},I=async()=>{const O=[],B=[];let L=new Map,D={};Object.keys(p.messages).forEach(Y=>{var G;const P=p.messages[Y],F=P.parentId?(((G=L.get(P.parentId))==null?void 0:G.level)??-1)+1:0;D[F]||(D[F]=0),L.set(Y,{id:P.id,level:F,position:D[F]++})}),Object.keys(p.messages).forEach(Y=>{const P=L.get(Y),F=P.position*250,G=P.level*150,K=F;O.push({id:P.id,type:"custom",data:{user:o,message:p.messages[Y],model:n.find(Q=>Q.id===p.messages[Y].model)},position:{x:K,y:G}});const X=p.messages[Y].parentId;X&&B.push({id:X+"-"+P.id,source:X,target:P.id,selectable:!1,class:" dark:fill-gray-300 fill-gray-300",type:"smoothstep",animated:p.currentId===Y||T(Y,p.currentId)})}),await g.set([...B]),await w.set([...O])},T=(O,B)=>{const j=p.messages[O];return j.childrenIds&&j.childrenIds.some(Z=>Z===B||T(Z,B))};kn(()=>{I(),d.subscribe(async O=>{O&&(await $e(),await f({nodes:[{id:p.currentId}]}))}),c.subscribe(O=>{O&&f({nodes:[{id:p.currentId}]})}),u.subscribe(O=>{O&&f({nodes:[{id:p.currentId}]})})}),ll(()=>{console.log("Overview destroyed"),w.set([]),g.set([])});const M=()=>{Gn.set(!1)},y=()=>{r("close"),Gn.set(!1)},H=O=>{console.log(O.detail.node.data),r("nodeclick",O.detail),t(0,b=O.detail.node.data.message.id),f({nodes:[{id:b}]})};return l.$$set=O=>{"history"in O&&t(9,p=O.history)},l.$$.update=()=>{l.$$.dirty&512&&p&&I(),l.$$.dirty&512&&p&&p.currentId&&k()},[b,s,i,r,a,f,w,g,v,p,M,y,H]}class Ra extends Re{constructor(e){super(),Ue(this,e,J0,q0,Fe,{history:9})}}function Q0(l){let e,t;return{c(){e=Te("svg"),t=Te("path"),this.h()},l(n){e=Ve(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=C(e);t=Ve(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){A(n,e,o),E(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:ye,o:ye,d(n){n&&_(e)}}}function x0(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="1.5"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class $0 extends Re{constructor(e){super(),Ue(this,e,x0,Q0,Fe,{className:0,strokeWidth:1})}}function Ei(l){let e;return{c(){e=V("div"),this.h()},l(t){e=z(t,"DIV",{class:!0}),C(e).forEach(_),this.h()},h(){m(e,"class","absolute top-0 left-0 right-0 bottom-0 z-10")},m(t,n){A(t,e,n)},d(t){t&&_(e)}}}function e_(l){let e,t=l[5].t("No HTML, CSS, or JavaScript content found.")+"",n;return{c(){e=V("div"),n=Ie(t),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=C(e);n=Se(s,t),s.forEach(_),this.h()},h(){m(e,"class","m-auto font-medium text-xs text-gray-900 dark:text-white")},m(o,s){A(o,e,s),E(e,n)},p(o,s){s&32&&t!==(t=o[5].t("No HTML, CSS, or JavaScript content found.")+"")&&Me(n,t)},i:ye,o:ye,d(o){o&&_(e)}}}function t_(l){let e,t,n,o;const s=[l_,n_],i=[];function r(a,c){return a[1][a[2]].type==="iframe"?0:a[1][a[2]].type==="svg"?1:-1}return~(t=r(l))&&(n=i[t]=s[t](l)),{c(){e=V("div"),n&&n.c(),this.h()},l(a){e=z(a,"DIV",{class:!0});var c=C(e);n&&n.l(c),c.forEach(_),this.h()},h(){m(e,"class","max-w-full w-full h-full")},m(a,c){A(a,e,c),~t&&i[t].m(e,null),o=!0},p(a,c){let u=t;t=r(a),t===u?~t&&i[t].p(a,c):(n&&(He(),N(i[u],1,1,()=>{i[u]=null}),Be()),~t?(n=i[t],n?n.p(a,c):(n=i[t]=s[t](a),n.c()),S(n,1),n.m(e,null)):n=null)},i(a){o||(S(n),o=!0)},o(a){N(n),o=!1},d(a){a&&_(e),~t&&i[t].d()}}}function n_(l){let e,t;return e=new xc({props:{className:" w-full h-full max-h-full overflow-hidden",svg:l[1][l[2]].content}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&6&&(s.svg=n[1][n[2]].content),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function l_(l){let e,t,n,o;return{c(){e=V("iframe"),this.h()},l(s){e=z(s,"IFRAME",{title:!0,srcdoc:!0,class:!0,sandbox:!0}),C(e).forEach(_),this.h()},h(){m(e,"title","Content"),m(e,"srcdoc",t=l[1][l[2]].content),m(e,"class","w-full border-0 h-full rounded-none"),m(e,"sandbox","allow-scripts allow-forms allow-same-origin")},m(s,i){A(s,e,i),l[14](e),n||(o=ke(e,"load",l[9]),n=!0)},p(s,i){i&6&&t!==(t=s[1][s[2]].content)&&m(e,"srcdoc",t)},i:ye,o:ye,d(s){s&&_(e),l[14](null),n=!1,o()}}}function Ii(l){let e,t,n,o,s,i,r,a,c,u=l[5].t("Version {{selectedVersion}} of {{totalVersions}}",{selectedVersion:l[2]+1,totalVersions:l[1].length})+"",f,h,d,p,b,w,g,v,k,I=(l[3]?l[5].t("Copied"):l[5].t("Copy"))+"",T,M,y,H,O,B=l[1][l[2]].type==="iframe"&&Si(l);return{c(){e=V("div"),t=V("div"),n=V("div"),o=V("button"),s=Te("svg"),i=Te("path"),a=ee(),c=V("div"),f=Ie(u),h=ee(),d=V("button"),p=Te("svg"),b=Te("path"),g=ee(),v=V("div"),k=V("button"),T=Ie(I),M=ee(),B&&B.c(),this.h()},l(j){e=z(j,"DIV",{class:!0});var Z=C(e);t=z(Z,"DIV",{class:!0});var L=C(t);n=z(L,"DIV",{class:!0,dir:!0});var D=C(n);o=z(D,"BUTTON",{class:!0});var Y=C(o);s=Ve(Y,"svg",{xmlns:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,class:!0});var P=C(s);i=Ve(P,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(i).forEach(_),P.forEach(_),Y.forEach(_),a=te(D),c=z(D,"DIV",{class:!0});var F=C(c);f=Se(F,u),F.forEach(_),h=te(D),d=z(D,"BUTTON",{class:!0});var G=C(d);p=Ve(G,"svg",{xmlns:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,class:!0});var K=C(p);b=Ve(K,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(b).forEach(_),K.forEach(_),G.forEach(_),D.forEach(_),L.forEach(_),g=te(Z),v=z(Z,"DIV",{class:!0});var X=C(v);k=z(X,"BUTTON",{class:!0});var Q=C(k);T=Se(Q,I),Q.forEach(_),M=te(X),B&&B.l(X),X.forEach(_),Z.forEach(_),this.h()},h(){m(i,"stroke-linecap","round"),m(i,"stroke-linejoin","round"),m(i,"d","M15.75 19.5 8.25 12l7.5-7.5"),m(s,"xmlns","http://www.w3.org/2000/svg"),m(s,"fill","none"),m(s,"viewBox","0 0 24 24"),m(s,"stroke","currentColor"),m(s,"stroke-width","2.5"),m(s,"class","size-3.5"),m(o,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition disabled:cursor-not-allowed"),o.disabled=r=l[1].length<=1,m(c,"class","text-xs self-center dark:text-gray-100 min-w-fit"),m(b,"stroke-linecap","round"),m(b,"stroke-linejoin","round"),m(b,"d","m8.25 4.5 7.5 7.5-7.5 7.5"),m(p,"xmlns","http://www.w3.org/2000/svg"),m(p,"fill","none"),m(p,"viewBox","0 0 24 24"),m(p,"stroke","currentColor"),m(p,"stroke-width","2.5"),m(p,"class","size-3.5"),m(d,"class","self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition disabled:cursor-not-allowed"),d.disabled=w=l[1].length<=1,m(n,"class","flex items-center gap-0.5 self-center min-w-fit"),m(n,"dir","ltr"),m(t,"class","flex items-center space-x-2"),m(k,"class","copy-code-button bg-none border-none text-xs bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-md px-1.5 py-0.5"),m(v,"class","flex items-center gap-1"),m(e,"class","flex justify-between items-center p-2.5 font-primar text-gray-900 dark:text-white")},m(j,Z){A(j,e,Z),E(e,t),E(t,n),E(n,o),E(o,s),E(s,i),E(n,a),E(n,c),E(c,f),E(n,h),E(n,d),E(d,p),E(p,b),E(e,g),E(e,v),E(v,k),E(k,T),E(v,M),B&&B.m(v,null),y=!0,H||(O=[ke(o,"click",l[15]),ke(d,"click",l[16]),ke(k,"click",l[17])],H=!0)},p(j,Z){(!y||Z&2&&r!==(r=j[1].length<=1))&&(o.disabled=r),(!y||Z&38)&&u!==(u=j[5].t("Version {{selectedVersion}} of {{totalVersions}}",{selectedVersion:j[2]+1,totalVersions:j[1].length})+"")&&Me(f,u),(!y||Z&2&&w!==(w=j[1].length<=1))&&(d.disabled=w),(!y||Z&40)&&I!==(I=(j[3]?j[5].t("Copied"):j[5].t("Copy"))+"")&&Me(T,I),j[1][j[2]].type==="iframe"?B?(B.p(j,Z),Z&6&&S(B,1)):(B=Si(j),B.c(),S(B,1),B.m(v,null)):B&&(He(),N(B,1,1,()=>{B=null}),Be())},i(j){y||(S(B),y=!0)},o(j){N(B),y=!1},d(j){j&&_(e),B&&B.d(),H=!1,on(O)}}}function Si(l){let e,t;return e=new Pt({props:{content:l[5].t("Open in full screen"),$$slots:{default:[o_]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&32&&(s.content=n[5].t("Open in full screen")),o&1048576&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function o_(l){let e,t,n,o,s;return t=new $0({props:{className:"size-3.5"}}),{c(){e=V("button"),ne(t.$$.fragment),this.h()},l(i){e=z(i,"BUTTON",{class:!0});var r=C(e);se(t.$$.fragment,r),r.forEach(_),this.h()},h(){m(e,"class","bg-none border-none text-xs bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-md p-0.5")},m(i,r){A(i,e,r),le(t,e,null),n=!0,o||(s=ke(e,"click",l[10]),o=!0)},p:ye,i(i){n||(S(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){i&&_(e),oe(t),o=!1,s()}}}function s_(l){let e,t,n,o,s,i,r,a,c,u,f,h,d,p,b,w,g,v,k,I=l[0]&&Ei();i=new La({props:{className:"size-3.5  text-gray-900 dark:text-white"}}),u=new So({props:{className:"size-3.5 text-gray-900 dark:text-white"}});const T=[t_,e_],M=[];function y(O,B){return O[1].length>0?0:1}p=y(l),b=M[p]=T[p](l);let H=l[1].length>0&&Ii(l);return{c(){e=V("div"),t=V("div"),I&&I.c(),n=ee(),o=V("div"),s=V("button"),ne(i.$$.fragment),r=ee(),a=V("div"),c=V("button"),ne(u.$$.fragment),f=ee(),h=V("div"),d=V("div"),b.c(),w=ee(),H&&H.c(),this.h()},l(O){e=z(O,"DIV",{class:!0});var B=C(e);t=z(B,"DIV",{class:!0});var j=C(t);I&&I.l(j),n=te(j),o=z(j,"DIV",{class:!0});var Z=C(o);s=z(Z,"BUTTON",{class:!0});var L=C(s);se(i.$$.fragment,L),L.forEach(_),Z.forEach(_),r=te(j),a=z(j,"DIV",{class:!0});var D=C(a);c=z(D,"BUTTON",{class:!0});var Y=C(c);se(u.$$.fragment,Y),Y.forEach(_),D.forEach(_),f=te(j),h=z(j,"DIV",{class:!0});var P=C(h);d=z(P,"DIV",{class:!0});var F=C(d);b.l(F),F.forEach(_),P.forEach(_),j.forEach(_),w=te(B),H&&H.l(B),B.forEach(_),this.h()},h(){m(s,"class","self-center pointer-events-auto p-1 rounded-full bg-white dark:bg-gray-850"),m(o,"class","absolute pointer-events-none z-50 w-full flex items-center justify-start p-4"),m(c,"class","self-center pointer-events-auto p-1 rounded-full bg-white dark:bg-gray-850"),m(a,"class","absolute pointer-events-none z-50 w-full flex items-center justify-end p-4"),m(d,"class","h-full flex flex-col"),m(h,"class","flex-1 w-full h-full"),m(t,"class","w-full h-full flex-1 relative"),m(e,"class","w-full h-full relative flex flex-col bg-gray-50 dark:bg-gray-850")},m(O,B){A(O,e,B),E(e,t),I&&I.m(t,null),E(t,n),E(t,o),E(o,s),le(i,s,null),E(t,r),E(t,a),E(a,c),le(u,c,null),E(t,f),E(t,h),E(h,d),M[p].m(d,null),E(e,w),H&&H.m(e,null),g=!0,v||(k=[ke(s,"click",l[12]),ke(c,"click",l[13])],v=!0)},p(O,[B]){O[0]?I||(I=Ei(),I.c(),I.m(t,n)):I&&(I.d(1),I=null);let j=p;p=y(O),p===j?M[p].p(O,B):(He(),N(M[j],1,1,()=>{M[j]=null}),Be(),b=M[p],b?b.p(O,B):(b=M[p]=T[p](O),b.c()),S(b,1),b.m(d,null)),O[1].length>0?H?(H.p(O,B),B&2&&S(H,1)):(H=Ii(O),H.c(),S(H,1),H.m(e,null)):H&&(He(),N(H,1,1,()=>{H=null}),Be())},i(O){g||(S(i.$$.fragment,O),S(u.$$.fragment,O),S(b),S(H),g=!0)},o(O){N(i.$$.fragment,O),N(u.$$.fragment,O),N(b),N(H),g=!1},d(O){O&&_(e),I&&I.d(),oe(i),oe(u),M[p].d(),H&&H.d(),v=!1,on(k)}}}function r_(l,e,t){let n;const o=jt("i18n");ae(l,o,y=>t(5,n=y));const s=un();let{overlay:i=!1}=e,{history:r}=e,a=[],c=[],u=0,f=!1,h;const d=()=>{t(1,c=[]),a.forEach(y=>{if((y==null?void 0:y.role)!=="user"&&(y!=null&&y.content)){const H=y.content.match(/```[\s\S]*?```/g);let O=[];H&&H.forEach(P=>{const F=P.split(`
`)[0].replace("```","").trim().toLowerCase(),G=P.replace(/```[\s\S]*?\n/,"").replace(/```$/,"");O.push({lang:F,code:G})});let B="",j="",Z="";O.forEach(P=>{const{lang:F,code:G}=P;F==="html"?B+=G+`
`:F==="css"?j+=G+`
`:(F==="javascript"||F==="js")&&(Z+=G+`
`)});const L=y.content.match(/<html>[\s\S]*?<\/html>/gi),D=y.content.match(/<style>[\s\S]*?<\/style>/gi),Y=y.content.match(/<script>[\s\S]*?<\/script>/gi);if(L&&L.forEach(P=>{const F=P.replace(/<\/?html>/gi,"");B+=F+`
`}),D&&D.forEach(P=>{const F=P.replace(/<\/?style>/gi,"");j+=F+`
`}),Y&&Y.forEach(P=>{const F=P.replace(/<\/?script>/gi,"");Z+=F+`
`}),B||j||Z){const P=`
                        <!DOCTYPE html>
                        <html lang="en">
                        <head>
                            <meta charset="UTF-8">
                            <meta name="viewport" content="width=device-width, initial-scale=1.0">
							<style>
								body {
									background-color: white; /* Ensure the iframe has a white background */
								}

								${j}
							</style>
                        </head>
                        <body>
                            ${B}

							<script>
                            	${Z}
							<\/script>
                        </body>
                        </html>
                    `;t(1,c=[...c,{type:"iframe",content:P}])}else for(const P of O)(P.lang==="svg"||P.lang==="xml"&&P.code.includes("<svg"))&&t(1,c=[...c,{type:"svg",content:P.code}])}}),c.length===0&&(Ft.set(!1),jn.set(!1)),t(2,u=c?c.length-1:0)};function p(y){console.log(u),t(2,u=y==="prev"?Math.max(u-1,0):Math.min(u+1,c.length-1)),console.log(u)}const b=()=>{h.contentWindow.addEventListener("click",function(y){const H=y.target.closest("a");if(H&&H.href){y.preventDefault();const O=new URL(H.href,h.baseURI);O.origin===window.location.origin?h.contentWindow.history.pushState(null,"",O.pathname+O.search+O.hash):console.log("External navigation blocked:",O.href)}},!0),h.contentWindow.addEventListener("mouseenter",function(y){y.preventDefault(),h.contentWindow.addEventListener("dragstart",H=>{H.preventDefault()})})},w=()=>{h.requestFullscreen?h.requestFullscreen():h.webkitRequestFullscreen?h.webkitRequestFullscreen():h.msRequestFullscreen&&h.msRequestFullscreen()};kn(()=>{});const g=()=>{jn.set(!1)},v=()=>{s("close"),Ft.set(!1),jn.set(!1)};function k(y){We[y?"unshift":"push"](()=>{h=y,t(4,h)})}const I=()=>p("prev"),T=()=>p("next"),M=()=>{$o(c[u].content),t(3,f=!0),setTimeout(()=>{t(3,f=!1)},2e3)};return l.$$set=y=>{"overlay"in y&&t(0,i=y.overlay),"history"in y&&t(11,r=y.history)},l.$$.update=()=>{l.$$.dirty&2048&&(r?(a=In(r,r.currentId),d()):(a=[],d()))},[i,c,u,f,h,n,o,s,p,b,w,r,g,v,k,I,T,M]}class Ua extends Re{constructor(e){super(),Ue(this,e,r_,s_,Fe,{overlay:0,history:11})}}function i_(l){let e,t,n,o,s=l[16]&&Ci(l);function i(a){l[37](a)}let r={defaultSize:0,onResize:l[35],onCollapse:l[36],collapsible:!0,class:"pt-8",$$slots:{default:[m_]},$$scope:{ctx:l}};return l[4]!==void 0&&(r.pane=l[4]),t=new ji({props:r}),We.push(()=>Je(t,"pane",i)),{c(){s&&s.c(),e=ee(),ne(t.$$.fragment)},l(a){s&&s.l(a),e=te(a),se(t.$$.fragment,a)},m(a,c){s&&s.m(a,c),A(a,e,c),le(t,a,c),o=!0},p(a,c){a[16]?s?c[0]&65536&&S(s,1):(s=Ci(a),s.c(),S(s,1),s.m(e.parentNode,e)):s&&(He(),N(s,1,1,()=>{s=null}),Be());const u={};c[0]&81936&&(u.onResize=a[35]),c[0]&503791|c[1]&4096&&(u.$$scope={dirty:c,ctx:a}),!n&&c[0]&16&&(n=!0,u.pane=a[4],qe(()=>n=!1)),t.$set(u)},i(a){o||(S(s),S(t.$$.fragment,a),o=!0)},o(a){N(s),N(t.$$.fragment,a),o=!1},d(a){a&&_(e),s&&s.d(a),oe(t,a)}}}function a_(l){let e,t,n=l[16]&&Mi(l);return{c(){n&&n.c(),e=Ae()},l(o){n&&n.l(o),e=Ae()},m(o,s){n&&n.m(o,s),A(o,e,s),t=!0},p(o,s){o[16]?n?(n.p(o,s),s[0]&65536&&S(n,1)):(n=Mi(o),n.c(),S(n,1),n.m(e.parentNode,e)):n&&(He(),N(n,1,1,()=>{n=null}),Be())},i(o){t||(S(n),t=!0)},o(o){N(n),t=!1},d(o){o&&_(e),n&&n.d(o)}}}function Ci(l){let e,t;return e=new Ga({props:{class:"relative flex w-2 items-center justify-center bg-background group",$$slots:{default:[c_]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function c_(l){let e,t,n;return t=new bu({props:{className:"size-4 invisible group-hover:visible"}}),{c(){e=V("div"),ne(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0});var s=C(e);se(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"class","z-10 flex h-7 w-5 items-center justify-center rounded-sm")},m(o,s){A(o,e,s),le(t,e,null),n=!0},p:ye,i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),oe(t)}}}function Di(l){let e,t,n,o,s,i;const r=[h_,d_,f_,u_],a=[];function c(u,f){return u[15]?0:u[18]?1:u[17]?2:3}return n=c(l),o=a[n]=r[n](l),{c(){e=V("div"),t=V("div"),o.c(),this.h()},l(u){e=z(u,"DIV",{class:!0});var f=C(e);t=z(f,"DIV",{class:!0});var h=C(t);o.l(h),h.forEach(_),f.forEach(_),this.h()},h(){m(t,"class",s="w-full "+((l[17]||l[18])&&!l[15]?" ":"px-4 py-4 bg-white dark:shadow-lg dark:bg-gray-850  border border-gray-50 dark:border-gray-850")+" rounded-xl z-40 pointer-events-auto overflow-y-auto scrollbar-hidden"),m(e,"class","pr-4 pb-8 flex max-h-full min-h-full")},m(u,f){A(u,e,f),E(e,t),a[n].m(t,null),i=!0},p(u,f){let h=n;n=c(u),n===h?a[n].p(u,f):(He(),N(a[h],1,1,()=>{a[h]=null}),Be(),o=a[n],o?o.p(u,f):(o=a[n]=r[n](u),o.c()),S(o,1),o.m(t,null)),(!i||f[0]&425984&&s!==(s="w-full "+((u[17]||u[18])&&!u[15]?" ":"px-4 py-4 bg-white dark:shadow-lg dark:bg-gray-850  border border-gray-50 dark:border-gray-850")+" rounded-xl z-40 pointer-events-auto overflow-y-auto scrollbar-hidden"))&&m(t,"class",s)},i(u){i||(S(o),i=!0)},o(u){N(o),i=!1},d(u){u&&_(e),a[n].d()}}}function u_(l){let e,t,n,o;function s(a){l[32](a)}function i(a){l[33](a)}let r={models:l[5]};return l[1]!==void 0&&(r.chatFiles=l[1]),l[2]!==void 0&&(r.params=l[2]),e=new Ba({props:r}),We.push(()=>Je(e,"chatFiles",s)),We.push(()=>Je(e,"params",i)),e.$on("close",l[34]),{c(){ne(e.$$.fragment)},l(a){se(e.$$.fragment,a)},m(a,c){le(e,a,c),o=!0},p(a,c){const u={};c[0]&32&&(u.models=a[5]),!t&&c[0]&2&&(t=!0,u.chatFiles=a[1],qe(()=>t=!1)),!n&&c[0]&4&&(n=!0,u.params=a[2],qe(()=>n=!1)),e.$set(u)},i(a){o||(S(e.$$.fragment,a),o=!0)},o(a){N(e.$$.fragment,a),o=!1},d(a){oe(e,a)}}}function f_(l){let e,t;return e=new Ra({props:{history:l[0]}}),e.$on("nodeclick",l[30]),e.$on("close",l[31]),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o[0]&1&&(s.history=n[0]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function d_(l){let e,t;return e=new Ua({props:{history:l[0],overlay:l[13]}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o[0]&1&&(s.history=n[0]),o[0]&8192&&(s.overlay=n[13]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function h_(l){let e,t,n,o;function s(r){l[28](r)}let i={submitPrompt:l[8],stopResponse:l[9],modelId:l[11],chatId:l[6],eventTarget:l[7]};return l[3]!==void 0&&(i.files=l[3]),t=new Aa({props:i}),We.push(()=>Je(t,"files",s)),t.$on("close",l[29]),{c(){e=V("div"),ne(t.$$.fragment),this.h()},l(r){e=z(r,"DIV",{class:!0});var a=C(e);se(t.$$.fragment,a),a.forEach(_),this.h()},h(){m(e,"class","w-full h-full flex justify-center")},m(r,a){A(r,e,a),le(t,e,null),o=!0},p(r,a){const c={};a[0]&256&&(c.submitPrompt=r[8]),a[0]&512&&(c.stopResponse=r[9]),a[0]&2048&&(c.modelId=r[11]),a[0]&64&&(c.chatId=r[6]),a[0]&128&&(c.eventTarget=r[7]),!n&&a[0]&8&&(n=!0,c.files=r[3],qe(()=>n=!1)),t.$set(c)},i(r){o||(S(t.$$.fragment,r),o=!0)},o(r){N(t.$$.fragment,r),o=!1},d(r){r&&_(e),oe(t)}}}function m_(l){let e,t,n=l[16]&&Di(l);return{c(){n&&n.c(),e=Ae()},l(o){n&&n.l(o),e=Ae()},m(o,s){n&&n.m(o,s),A(o,e,s),t=!0},p(o,s){o[16]?n?(n.p(o,s),s[0]&65536&&S(n,1)):(n=Di(o),n.c(),S(n,1),n.m(e.parentNode,e)):n&&(He(),N(n,1,1,()=>{n=null}),Be())},i(o){t||(S(n),t=!0)},o(o){N(n),t=!1},d(o){o&&_(e),n&&n.d(o)}}}function Mi(l){let e,t;return e=new pu({props:{show:l[16],$$slots:{default:[v_]},$$scope:{ctx:l}}}),e.$on("close",l[27]),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o[0]&65536&&(s.show=n[16]),o[0]&430063|o[1]&4096&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function g_(l){let e,t,n,o;function s(a){l[24](a)}function i(a){l[25](a)}let r={models:l[5]};return l[1]!==void 0&&(r.chatFiles=l[1]),l[2]!==void 0&&(r.params=l[2]),e=new Ba({props:r}),We.push(()=>Je(e,"chatFiles",s)),We.push(()=>Je(e,"params",i)),e.$on("close",l[26]),{c(){ne(e.$$.fragment)},l(a){se(e.$$.fragment,a)},m(a,c){le(e,a,c),o=!0},p(a,c){const u={};c[0]&32&&(u.models=a[5]),!t&&c[0]&2&&(t=!0,u.chatFiles=a[1],qe(()=>t=!1)),!n&&c[0]&4&&(n=!0,u.params=a[2],qe(()=>n=!1)),e.$set(u)},i(a){o||(S(e.$$.fragment,a),o=!0)},o(a){N(e.$$.fragment,a),o=!1},d(a){oe(e,a)}}}function __(l){let e,t;return e=new Ra({props:{history:l[0]}}),e.$on("nodeclick",l[22]),e.$on("close",l[23]),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o[0]&1&&(s.history=n[0]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function p_(l){let e,t;return e=new Ua({props:{history:l[0]}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o[0]&1&&(s.history=n[0]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function b_(l){let e,t,n,o;function s(r){l[20](r)}let i={submitPrompt:l[8],stopResponse:l[9],modelId:l[11],chatId:l[6],eventTarget:l[7]};return l[3]!==void 0&&(i.files=l[3]),t=new Aa({props:i}),We.push(()=>Je(t,"files",s)),t.$on("close",l[21]),{c(){e=V("div"),ne(t.$$.fragment),this.h()},l(r){e=z(r,"DIV",{class:!0});var a=C(e);se(t.$$.fragment,a),a.forEach(_),this.h()},h(){m(e,"class","h-full max-h-[100dvh] bg-white text-gray-700 dark:bg-black dark:text-gray-300 flex justify-center")},m(r,a){A(r,e,a),le(t,e,null),o=!0},p(r,a){const c={};a[0]&256&&(c.submitPrompt=r[8]),a[0]&512&&(c.stopResponse=r[9]),a[0]&2048&&(c.modelId=r[11]),a[0]&64&&(c.chatId=r[6]),a[0]&128&&(c.eventTarget=r[7]),!n&&a[0]&8&&(n=!0,c.files=r[3],qe(()=>n=!1)),t.$set(c)},i(r){o||(S(t.$$.fragment,r),o=!0)},o(r){N(t.$$.fragment,r),o=!1},d(r){r&&_(e),oe(t)}}}function v_(l){let e,t,n,o,s;const i=[b_,p_,__,g_],r=[];function a(c,u){return c[15]?0:c[18]?1:c[17]?2:3}return t=a(l),n=r[t]=i[t](l),{c(){e=V("div"),n.c(),this.h()},l(c){e=z(c,"DIV",{class:!0});var u=C(e);n.l(u),u.forEach(_),this.h()},h(){m(e,"class",o=(l[15]||l[17]||l[18]?" h-screen  w-full":"px-6 py-4")+" h-full")},m(c,u){A(c,e,u),r[t].m(e,null),s=!0},p(c,u){let f=t;t=a(c),t===f?r[t].p(c,u):(He(),N(r[f],1,1,()=>{r[f]=null}),Be(),n=r[t],n?n.p(c,u):(n=r[t]=i[t](c),n.c()),S(n,1),n.m(e,null)),(!s||u[0]&425984&&o!==(o=(c[15]||c[17]||c[18]?" h-screen  w-full":"px-6 py-4")+" h-full"))&&m(e,"class",o)},i(c){s||(S(n),s=!0)},o(c){N(n),s=!1},d(c){c&&_(e),r[t].d()}}}function w_(l){let e,t,n,o;const s=[a_,i_],i=[];function r(a,c){return a[12]?1:0}return e=r(l),t=i[e]=s[e](l),{c(){t.c(),n=Ae()},l(a){t.l(a),n=Ae()},m(a,c){i[e].m(a,c),A(a,n,c),o=!0},p(a,c){let u=e;e=r(a),e===u?i[e].p(a,c):(He(),N(i[u],1,1,()=>{i[u]=null}),Be(),t=i[e],t?t.p(a,c):(t=i[e]=s[e](a),t.c()),S(t,1),t.m(n.parentNode,n))},i(a){o||(S(t),o=!0)},o(a){N(t),o=!1},d(a){a&&_(n),i[e].d(a)}}}function k_(l){let e,t;return e=new r1({props:{$$slots:{default:[w_]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o[0]&524287|o[1]&4096&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function y_(l,e,t){let n,o,s,i;ae(l,Sn,ue=>t(15,n=ue)),ae(l,Ft,ue=>t(16,o=ue)),ae(l,Gn,ue=>t(17,s=ue)),ae(l,jn,ue=>t(18,i=ue));let{history:r}=e,{models:a=[]}=e,{chatId:c=null}=e,{chatFiles:u=[]}=e,{params:f={}}=e,{eventTarget:h}=e,{submitPrompt:d}=e,{stopResponse:p}=e,{showMessage:b}=e,{files:w}=e,{modelId:g}=e,{pane:v}=e,k,I=!1,T=!1,M=0;const y=()=>{parseInt(localStorage==null?void 0:localStorage.chatControlsSize)?v.resize(parseInt(localStorage==null?void 0:localStorage.chatControlsSize)):v.resize(M)},H=async ue=>{ue.matches?(t(12,I=!0),n&&(Sn.set(!1),await $e(),Sn.set(!0))):(t(12,I=!1),n&&(Sn.set(!1),await $e(),Sn.set(!0)),t(4,v=null))},O=ue=>{t(13,T=!0)},B=ue=>{t(13,T=!1)};kn(()=>{k=window.matchMedia("(min-width: 1024px)"),k.addEventListener("change",H),H(k);const ue=document.getElementById("chat-container");t(14,M=Math.floor(350/ue.clientWidth*100)),new ResizeObserver(Xe=>{for(let Ke of Xe){const lt=350/Ke.contentRect.width*100;t(14,M=Math.floor(lt)),o&&v&&v.isExpanded()&&v.getSize()<M&&v.resize(M)}}).observe(ue),document.addEventListener("mousedown",O),document.addEventListener("mouseup",B)}),ll(()=>{Ft.set(!1),k.removeEventListener("change",H),document.removeEventListener("mousedown",O),document.removeEventListener("mouseup",B)});const j=()=>{Ft.set(!1),Gn.set(!1),jn.set(!1),n&&Sn.set(!1)};function Z(ue){w=ue,t(3,w)}const L=()=>{Ft.set(!1)},D=ue=>{b(ue.detail.node.data.message)},Y=()=>{Ft.set(!1)};function P(ue){u=ue,t(1,u)}function F(ue){f=ue,t(2,f)}const G=()=>{Ft.set(!1)},K=()=>{Ft.set(!1)};function X(ue){w=ue,t(3,w)}const Q=()=>{Ft.set(!1)},W=ue=>{ue.detail.node.data.message.favorite?t(0,r.messages[ue.detail.node.data.message.id].favorite=!0,r):t(0,r.messages[ue.detail.node.data.message.id].favorite=null,r),b(ue.detail.node.data.message)},J=()=>{Ft.set(!1)};function q(ue){u=ue,t(1,u)}function ce(ue){f=ue,t(2,f)}const ge=()=>{Ft.set(!1)},re=ue=>{console.log("size",ue,M),o&&v.isExpanded()&&(ue<M&&v.resize(M),ue<M?localStorage.chatControlsSize=0:localStorage.chatControlsSize=ue)},Pe=()=>{Ft.set(!1)};function x(ue){v=ue,t(4,v)}return l.$$set=ue=>{"history"in ue&&t(0,r=ue.history),"models"in ue&&t(5,a=ue.models),"chatId"in ue&&t(6,c=ue.chatId),"chatFiles"in ue&&t(1,u=ue.chatFiles),"params"in ue&&t(2,f=ue.params),"eventTarget"in ue&&t(7,h=ue.eventTarget),"submitPrompt"in ue&&t(8,d=ue.submitPrompt),"stopResponse"in ue&&t(9,p=ue.stopResponse),"showMessage"in ue&&t(10,b=ue.showMessage),"files"in ue&&t(3,w=ue.files),"modelId"in ue&&t(11,g=ue.modelId),"pane"in ue&&t(4,v=ue.pane)},l.$$.update=()=>{l.$$.dirty[0]&64&&(c||j())},[r,u,f,w,v,a,c,h,d,p,b,g,I,T,M,n,o,s,i,y,Z,L,D,Y,P,F,G,K,X,Q,W,J,q,ce,ge,re,Pe,x]}class E_ extends Re{constructor(e){super(),Ue(this,e,y_,k_,Fe,{history:0,models:5,chatId:6,chatFiles:1,params:2,eventTarget:7,submitPrompt:8,stopResponse:9,showMessage:10,files:3,modelId:11,pane:4,openPane:19},null,[-1,-1])}get openPane(){return this.$$.ctx[19]}}function Ti(l,e,t){const n=l.slice();return n[35]=e[t],n[37]=t,n}function Vi(l){let e,t;return e=new Pt({props:{content:"This chat won't appear in history and your messages will not be saved.",className:"w-full flex justify-center mb-0.5",placement:"top",$$slots:{default:[I_]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function I_(l){let e,t,n,o;return t=new nu({props:{strokeWidth:"2.5",className:"size-5"}}),{c(){e=V("div"),ne(t.$$.fragment),n=Ie(" Temporary Chat"),this.h()},l(s){e=z(s,"DIV",{class:!0});var i=C(e);se(t.$$.fragment,i),n=Se(i," Temporary Chat"),i.forEach(_),this.h()},h(){m(e,"class","flex items-center gap-2 text-gray-500 font-medium text-lg my-2 w-fit")},m(s,i){A(s,e,i),le(t,e,null),E(e,n),o=!0},p:ye,i(s){o||(S(t.$$.fragment,s),o=!0)},o(s){N(t.$$.fragment,s),o=!1},d(s){s&&_(e),oe(t)}}}function S_(l){let e,t,n,o,s,i;function r(){return l[23](l[37])}return{c(){e=V("button"),t=V("img"),o=ee(),this.h()},l(a){e=z(a,"BUTTON",{});var c=C(e);t=z(c,"IMG",{crossorigin:!0,src:!0,class:!0,alt:!0,draggable:!0}),c.forEach(_),o=te(a),this.h()},h(){var a,c,u;m(t,"crossorigin","anonymous"),Qn(t.src,n=((u=(c=(a=l[35])==null?void 0:a.info)==null?void 0:c.meta)==null?void 0:u.profile_image_url)??(l[15].language==="dg-DG"?"/doge.png":`${Hl}/static/favicon.png`))||m(t,"src",n),m(t,"class","size-9 @sm:size-10 rounded-full border-[1px] border-gray-200 dark:border-none"),m(t,"alt","logo"),m(t,"draggable","false")},m(a,c){A(a,e,c),E(e,t),A(a,o,c),s||(i=ke(e,"click",r),s=!0)},p(a,c){var u,f,h;l=a,c[0]&40960&&!Qn(t.src,n=((h=(f=(u=l[35])==null?void 0:u.info)==null?void 0:f.meta)==null?void 0:h.profile_image_url)??(l[15].language==="dg-DG"?"/doge.png":`${Hl}/static/favicon.png`))&&m(t,"src",n)},d(a){a&&(_(e),_(o)),s=!1,i()}}}function zi(l){var n,o,s;let e,t;return e=new Pt({props:{content:(((s=(o=(n=l[13][l[37]])==null?void 0:n.info)==null?void 0:o.meta)==null?void 0:s.tags)??[]).map(Oi).join(", "),placement:"top",$$slots:{default:[S_]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,r){le(e,i,r),t=!0},p(i,r){var c,u,f;const a={};r[0]&8192&&(a.content=(((f=(u=(c=i[13][i[37]])==null?void 0:c.info)==null?void 0:u.meta)==null?void 0:f.tags)??[]).map(Oi).join(", ")),r[0]&57344|r[1]&128&&(a.$$scope={dirty:r,ctx:i}),e.$set(a)},i(i){t||(S(e.$$.fragment,i),t=!0)},o(i){N(e.$$.fragment,i),t=!1},d(i){oe(e,i)}}}function C_(l){let e=l[15].t("Hello, {{name}}",{name:l[17].name})+"",t;return{c(){t=Ie(e)},l(n){t=Se(n,e)},m(n,o){A(n,t,o)},p(n,o){o[0]&163840&&e!==(e=n[15].t("Hello, {{name}}",{name:n[17].name})+"")&&Me(t,e)},d(n){n&&_(t)}}}function D_(l){var n;let e=((n=l[13][l[14]])==null?void 0:n.name)+"",t;return{c(){t=Ie(e)},l(o){t=Se(o,e)},m(o,s){A(o,t,s)},p(o,s){var i;s[0]&24576&&e!==(e=((i=o[13][o[14]])==null?void 0:i.name)+"")&&Me(t,e)},d(o){o&&_(t)}}}function Ni(l){var i,r,a,c,u,f;let e,t,n,o;e=new Pt({props:{className:" w-fit",content:Sl.parse(co(((a=(r=(i=l[13][l[14]])==null?void 0:i.info)==null?void 0:r.meta)==null?void 0:a.description)??"")),placement:"top",$$slots:{default:[M_]},$$scope:{ctx:l}}});let s=((f=(u=(c=l[13][l[14]])==null?void 0:c.info)==null?void 0:u.meta)==null?void 0:f.user)&&Pi(l);return{c(){ne(e.$$.fragment),t=ee(),s&&s.c(),n=Ae()},l(h){se(e.$$.fragment,h),t=te(h),s&&s.l(h),n=Ae()},m(h,d){le(e,h,d),A(h,t,d),s&&s.m(h,d),A(h,n,d),o=!0},p(h,d){var b,w,g,v,k,I;const p={};d[0]&24576&&(p.content=Sl.parse(co(((g=(w=(b=h[13][h[14]])==null?void 0:b.info)==null?void 0:w.meta)==null?void 0:g.description)??""))),d[0]&24576|d[1]&128&&(p.$$scope={dirty:d,ctx:h}),e.$set(p),(I=(k=(v=h[13][h[14]])==null?void 0:v.info)==null?void 0:k.meta)!=null&&I.user?s?s.p(h,d):(s=Pi(h),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i(h){o||(S(e.$$.fragment,h),o=!0)},o(h){N(e.$$.fragment,h),o=!1},d(h){h&&(_(t),_(n)),oe(e,h),s&&s.d(h)}}}function M_(l){var o,s,i;let e,t,n=Sl.parse(co((i=(s=(o=l[13][l[14]])==null?void 0:o.info)==null?void 0:s.meta)==null?void 0:i.description))+"";return{c(){e=V("div"),t=new Ri(!1),this.h()},l(r){e=z(r,"DIV",{class:!0});var a=C(e);t=Ui(a,!1),a.forEach(_),this.h()},h(){t.a=null,m(e,"class","mt-0.5 px-2 text-sm font-normal text-gray-500 dark:text-gray-400 line-clamp-2 max-w-xl markdown")},m(r,a){A(r,e,a),t.m(n,e)},p(r,a){var c,u,f;a[0]&24576&&n!==(n=Sl.parse(co((f=(u=(c=r[13][r[14]])==null?void 0:c.info)==null?void 0:u.meta)==null?void 0:f.description))+"")&&t.p(n)},d(r){r&&_(e)}}}function Pi(l){let e,t;function n(i,r){var a,c,u;return(u=(c=(a=i[13][i[14]])==null?void 0:a.info)==null?void 0:c.meta)!=null&&u.user.community?V_:T_}let o=n(l),s=o(l);return{c(){e=V("div"),t=Ie(`By
								`),s.c(),this.h()},l(i){e=z(i,"DIV",{class:!0});var r=C(e);t=Se(r,`By
								`),s.l(r),r.forEach(_),this.h()},h(){m(e,"class","mt-0.5 text-sm font-normal text-gray-400 dark:text-gray-500")},m(i,r){A(i,e,r),E(e,t),s.m(e,null)},p(i,r){o===(o=n(i))&&s?s.p(i,r):(s.d(1),s=o(i),s&&(s.c(),s.m(e,null)))},d(i){i&&_(e),s.d()}}}function T_(l){var n,o,s;let e=((s=(o=(n=l[13][l[14]])==null?void 0:n.info)==null?void 0:o.meta)==null?void 0:s.user.name)+"",t;return{c(){t=Ie(e)},l(i){t=Se(i,e)},m(i,r){A(i,t,r)},p(i,r){var a,c,u;r[0]&24576&&e!==(e=((u=(c=(a=i[13][i[14]])==null?void 0:a.info)==null?void 0:c.meta)==null?void 0:u.user.name)+"")&&Me(t,e)},d(i){i&&_(t)}}}function V_(l){var s,i,r,a,c,u,f,h,d;let e,t=((r=(i=(s=l[13][l[14]])==null?void 0:s.info)==null?void 0:i.meta)!=null&&r.user.name?(u=(c=(a=l[13][l[14]])==null?void 0:a.info)==null?void 0:c.meta)==null?void 0:u.user.name:`@${(d=(h=(f=l[13][l[14]])==null?void 0:f.info)==null?void 0:h.meta)==null?void 0:d.user.username}`)+"",n,o;return{c(){e=V("a"),n=Ie(t),this.h()},l(p){e=z(p,"A",{href:!0});var b=C(e);n=Se(b,t),b.forEach(_),this.h()},h(){var p,b,w;m(e,"href",o="https://openwebui.com/m/"+((w=(b=(p=l[13][l[14]])==null?void 0:p.info)==null?void 0:b.meta)==null?void 0:w.user.username))},m(p,b){A(p,e,b),E(e,n)},p(p,b){var w,g,v,k,I,T,M,y,H,O,B,j;b[0]&24576&&t!==(t=((v=(g=(w=p[13][p[14]])==null?void 0:w.info)==null?void 0:g.meta)!=null&&v.user.name?(T=(I=(k=p[13][p[14]])==null?void 0:k.info)==null?void 0:I.meta)==null?void 0:T.user.name:`@${(H=(y=(M=p[13][p[14]])==null?void 0:M.info)==null?void 0:y.meta)==null?void 0:H.user.username}`)+"")&&Me(n,t),b[0]&24576&&o!==(o="https://openwebui.com/m/"+((j=(B=(O=p[13][p[14]])==null?void 0:O.info)==null?void 0:B.meta)==null?void 0:j.user.username))&&m(e,"href",o)},d(p){p&&_(e)}}}function z_(l){var lt,it,zt,Ct,Ht,wt,Ut;let e,t,n,o,s,i,r,a,c,u,f,h,d,p,b,w,g,v,k,I,T,M,y,H,O,B,j,Z,L,D,Y,P,F,G=l[16]&&Vi(l),K=vt(l[13]),X=[];for(let pe=0;pe<K.length;pe+=1)X[pe]=zi(Ti(l,K,pe));const Q=pe=>N(X[pe],1,1,()=>{X[pe]=null});function W(pe,Ye){var ot;return(ot=pe[13][pe[14]])!=null&&ot.name?D_:C_}let J=W(l),q=J(l),ce=(((zt=(it=(lt=l[13][l[14]])==null?void 0:lt.info)==null?void 0:it.meta)==null?void 0:zt.description)??null)&&Ni(l);function ge(pe){l[24](pe)}function re(pe){l[25](pe)}function Pe(pe){l[26](pe)}function x(pe){l[27](pe)}function ue(pe){l[28](pe)}function Ee(pe){l[29](pe)}function Xe(pe){l[30](pe)}function Ke(pe){l[31](pe)}let fe={history:l[12],selectedModels:l[11],transparentBackground:l[8],stopResponse:l[10],createMessagePair:l[9],placeholder:l[15].t("How can I help you today?")};return l[3]!==void 0&&(fe.files=l[3]),l[2]!==void 0&&(fe.prompt=l[2]),l[0]!==void 0&&(fe.autoScroll=l[0]),l[4]!==void 0&&(fe.selectedToolIds=l[4]),l[5]!==void 0&&(fe.imageGenerationEnabled=l[5]),l[6]!==void 0&&(fe.codeInterpreterEnabled=l[6]),l[7]!==void 0&&(fe.webSearchEnabled=l[7]),l[1]!==void 0&&(fe.atSelectedModel=l[1]),v=new na({props:fe}),We.push(()=>Je(v,"files",ge)),We.push(()=>Je(v,"prompt",re)),We.push(()=>Je(v,"autoScroll",Pe)),We.push(()=>Je(v,"selectedToolIds",x)),We.push(()=>Je(v,"imageGenerationEnabled",ue)),We.push(()=>Je(v,"codeInterpreterEnabled",Ee)),We.push(()=>Je(v,"webSearchEnabled",Xe)),We.push(()=>Je(v,"atSelectedModel",Ke)),v.$on("upload",l[32]),v.$on("submit",l[33]),Y=new tu({props:{suggestionPrompts:((wt=(Ht=(Ct=l[13][l[14]])==null?void 0:Ct.info)==null?void 0:Ht.meta)==null?void 0:wt.suggestion_prompts)??((Ut=l[18])==null?void 0:Ut.default_prompt_suggestions)??[],inputValue:l[2]}}),Y.$on("select",l[34]),{c(){e=V("div"),G&&G.c(),t=ee(),n=V("div"),o=V("div"),s=V("div"),i=V("div"),r=V("div");for(let pe=0;pe<X.length;pe+=1)X[pe].c();c=ee(),u=V("div"),q.c(),h=ee(),d=V("div"),p=V("div"),ce&&ce.c(),w=ee(),g=V("div"),ne(v.$$.fragment),Z=ee(),L=V("div"),D=V("div"),ne(Y.$$.fragment),this.h()},l(pe){e=z(pe,"DIV",{class:!0});var Ye=C(e);G&&G.l(Ye),t=te(Ye),n=z(Ye,"DIV",{class:!0});var ot=C(n);o=z(ot,"DIV",{class:!0});var he=C(o);s=z(he,"DIV",{class:!0});var kt=C(s);i=z(kt,"DIV",{class:!0});var ht=C(i);r=z(ht,"DIV",{class:!0});var bt=C(r);for(let Ge=0;Ge<X.length;Ge+=1)X[Ge].l(bt);bt.forEach(_),ht.forEach(_),c=te(kt),u=z(kt,"DIV",{class:!0});var De=C(u);q.l(De),De.forEach(_),kt.forEach(_),h=te(he),d=z(he,"DIV",{class:!0});var Nt=C(d);p=z(Nt,"DIV",{});var mt=C(p);ce&&ce.l(mt),mt.forEach(_),Nt.forEach(_),w=te(he),g=z(he,"DIV",{class:!0});var de=C(g);se(v.$$.fragment,de),de.forEach(_),he.forEach(_),ot.forEach(_),Z=te(Ye),L=z(Ye,"DIV",{class:!0});var Ce=C(L);D=z(Ce,"DIV",{class:!0});var ze=C(D);se(Y.$$.fragment,ze),ze.forEach(_),Ce.forEach(_),Ye.forEach(_),this.h()},h(){m(r,"class","flex -space-x-4 mb-0.5"),m(i,"class","flex flex-shrink-0 justify-center"),m(u,"class","text-3xl @sm:text-4xl line-clamp-1"),m(s,"class","flex flex-row justify-center gap-3 @sm:gap-3.5 w-fit px-5"),m(d,"class","flex mt-1 mb-2"),m(g,"class",j="text-base font-normal @md:max-w-3xl w-full py-3 "+(l[1]?"mt-2":"")),m(o,"class","w-full flex flex-col justify-center items-center"),m(n,"class","w-full text-3xl text-gray-800 dark:text-gray-100 font-medium text-center flex items-center gap-4 font-primary"),m(D,"class","mx-5"),m(L,"class","mx-auto max-w-2xl font-primary"),m(e,"class","m-auto w-full max-w-6xl px-2 @2xl:px-20 translate-y-6 py-24 text-center")},m(pe,Ye){A(pe,e,Ye),G&&G.m(e,null),E(e,t),E(e,n),E(n,o),E(o,s),E(s,i),E(i,r);for(let ot=0;ot<X.length;ot+=1)X[ot]&&X[ot].m(r,null);E(s,c),E(s,u),q.m(u,null),E(o,h),E(o,d),E(d,p),ce&&ce.m(p,null),E(o,w),E(o,g),le(v,g,null),E(e,Z),E(e,L),E(L,D),le(Y,D,null),F=!0},p(pe,Ye){var kt,ht,bt,De,Nt,mt,de;if(pe[16]?G?Ye[0]&65536&&S(G,1):(G=Vi(pe),G.c(),S(G,1),G.m(e,t)):G&&(He(),N(G,1,1,()=>{G=null}),Be()),Ye[0]&57344){K=vt(pe[13]);let Ce;for(Ce=0;Ce<K.length;Ce+=1){const ze=Ti(pe,K,Ce);X[Ce]?(X[Ce].p(ze,Ye),S(X[Ce],1)):(X[Ce]=zi(ze),X[Ce].c(),S(X[Ce],1),X[Ce].m(r,null))}for(He(),Ce=K.length;Ce<X.length;Ce+=1)Q(Ce);Be()}J===(J=W(pe))&&q?q.p(pe,Ye):(q.d(1),q=J(pe),q&&(q.c(),q.m(u,null))),((bt=(ht=(kt=pe[13][pe[14]])==null?void 0:kt.info)==null?void 0:ht.meta)==null?void 0:bt.description)??null?ce?(ce.p(pe,Ye),Ye[0]&24576&&S(ce,1)):(ce=Ni(pe),ce.c(),S(ce,1),ce.m(p,null)):ce&&(He(),N(ce,1,1,()=>{ce=null}),Be());const ot={};Ye[0]&4096&&(ot.history=pe[12]),Ye[0]&2048&&(ot.selectedModels=pe[11]),Ye[0]&256&&(ot.transparentBackground=pe[8]),Ye[0]&1024&&(ot.stopResponse=pe[10]),Ye[0]&512&&(ot.createMessagePair=pe[9]),Ye[0]&32768&&(ot.placeholder=pe[15].t("How can I help you today?")),!k&&Ye[0]&8&&(k=!0,ot.files=pe[3],qe(()=>k=!1)),!I&&Ye[0]&4&&(I=!0,ot.prompt=pe[2],qe(()=>I=!1)),!T&&Ye[0]&1&&(T=!0,ot.autoScroll=pe[0],qe(()=>T=!1)),!M&&Ye[0]&16&&(M=!0,ot.selectedToolIds=pe[4],qe(()=>M=!1)),!y&&Ye[0]&32&&(y=!0,ot.imageGenerationEnabled=pe[5],qe(()=>y=!1)),!H&&Ye[0]&64&&(H=!0,ot.codeInterpreterEnabled=pe[6],qe(()=>H=!1)),!O&&Ye[0]&128&&(O=!0,ot.webSearchEnabled=pe[7],qe(()=>O=!1)),!B&&Ye[0]&2&&(B=!0,ot.atSelectedModel=pe[1],qe(()=>B=!1)),v.$set(ot),(!F||Ye[0]&2&&j!==(j="text-base font-normal @md:max-w-3xl w-full py-3 "+(pe[1]?"mt-2":"")))&&m(g,"class",j);const he={};Ye[0]&286720&&(he.suggestionPrompts=((mt=(Nt=(De=pe[13][pe[14]])==null?void 0:De.info)==null?void 0:Nt.meta)==null?void 0:mt.suggestion_prompts)??((de=pe[18])==null?void 0:de.default_prompt_suggestions)??[]),Ye[0]&4&&(he.inputValue=pe[2]),Y.$set(he)},i(pe){if(!F){S(G);for(let Ye=0;Ye<K.length;Ye+=1)S(X[Ye]);pe&&(a||tl(()=>{a=xl(r,vl,{duration:100}),a.start()})),pe&&(f||tl(()=>{f=xl(u,vl,{duration:100}),f.start()})),S(ce),pe&&(b||tl(()=>{b=xl(p,vl,{duration:100,delay:50}),b.start()})),S(v.$$.fragment,pe),S(Y.$$.fragment,pe),pe&&(P||tl(()=>{P=xl(L,vl,{duration:200,delay:200}),P.start()})),F=!0}},o(pe){N(G),X=X.filter(Boolean);for(let Ye=0;Ye<X.length;Ye+=1)N(X[Ye]);N(ce),N(v.$$.fragment,pe),N(Y.$$.fragment,pe),F=!1},d(pe){pe&&_(e),G&&G.d(),Mn(X,pe),q.d(),ce&&ce.d(),oe(v),oe(Y)}}}const Oi=l=>l.name.toUpperCase();function N_(l,e,t){let n,o,s,i,r;ae(l,dl,W=>t(22,n=W)),ae(l,ko,W=>t(16,s=W)),ae(l,xn,W=>t(17,i=W)),ae(l,Yl,W=>t(18,r=W));const a=un(),c=jt("i18n");ae(l,c,W=>t(15,o=W));let{transparentBackground:u=!1}=e,{createMessagePair:f}=e,{stopResponse:h}=e,{autoScroll:d=!1}=e,{atSelectedModel:p}=e,{selectedModels:b}=e,{history:w}=e,{prompt:g=""}=e,{files:v=[]}=e,{selectedToolIds:k=[]}=e,{imageGenerationEnabled:I=!1}=e,{codeInterpreterEnabled:T=!1}=e,{webSearchEnabled:M=!1}=e,y=[];const H=async W=>{let J=W;if(W.includes("{{CLIPBOARD}}")){const ge=await navigator.clipboard.readText().catch(re=>(nt.error(o.t("Failed to read clipboard contents")),"{{CLIPBOARD}}"));J=W.replaceAll("{{CLIPBOARD}}",ge),console.log("Clipboard text:",ge,J)}t(2,g=J),console.log(g),await $e();const q=document.getElementById("chat-input-container"),ce=document.getElementById("chat-input");q&&(q.style.height="",q.style.height=Math.min(q.scrollHeight,200)+"px"),await $e(),ce&&(ce.focus(),ce.dispatchEvent(new Event("input"))),await $e()};let O=0;kn(()=>{});const B=W=>{t(14,O=W)};function j(W){v=W,t(3,v)}function Z(W){g=W,t(2,g)}function L(W){d=W,t(0,d)}function D(W){k=W,t(4,k)}function Y(W){I=W,t(5,I)}function P(W){T=W,t(6,T)}function F(W){M=W,t(7,M)}function G(W){p=W,t(1,p)}const K=W=>{a("upload",W.detail)},X=W=>{a("submit",W.detail)},Q=W=>{H(W.detail)};return l.$$set=W=>{"transparentBackground"in W&&t(8,u=W.transparentBackground),"createMessagePair"in W&&t(9,f=W.createMessagePair),"stopResponse"in W&&t(10,h=W.stopResponse),"autoScroll"in W&&t(0,d=W.autoScroll),"atSelectedModel"in W&&t(1,p=W.atSelectedModel),"selectedModels"in W&&t(11,b=W.selectedModels),"history"in W&&t(12,w=W.history),"prompt"in W&&t(2,g=W.prompt),"files"in W&&t(3,v=W.files),"selectedToolIds"in W&&t(4,k=W.selectedToolIds),"imageGenerationEnabled"in W&&t(5,I=W.imageGenerationEnabled),"codeInterpreterEnabled"in W&&t(6,T=W.codeInterpreterEnabled),"webSearchEnabled"in W&&t(7,M=W.webSearchEnabled)},l.$$.update=()=>{l.$$.dirty[0]&4196352&&t(13,y=b.map(W=>n.find(J=>J.id===W))),l.$$.dirty[0]&10240&&b.length>0&&t(14,O=y.length-1)},[d,p,g,v,k,I,T,M,u,f,h,b,w,y,O,o,s,i,r,a,c,H,n,B,j,Z,L,D,Y,P,F,G,K,X,Q]}class P_ extends Re{constructor(e){super(),Ue(this,e,N_,z_,Fe,{transparentBackground:8,createMessagePair:9,stopResponse:10,autoScroll:0,atSelectedModel:1,selectedModels:11,history:12,prompt:2,files:3,selectedToolIds:4,imageGenerationEnabled:5,codeInterpreterEnabled:6,webSearchEnabled:7},null,[-1,-1])}}const{document:Yo}=Fi;function Hi(l,e,t){const n=l.slice();return n[117]=e[t],n}function O_(l){let e,t,n,o;return n=new Io({}),{c(){e=V("div"),t=V("div"),ne(n.$$.fragment),this.h()},l(s){e=z(s,"DIV",{class:!0});var i=C(e);t=z(i,"DIV",{class:!0});var r=C(t);se(n.$$.fragment,r),r.forEach(_),i.forEach(_),this.h()},h(){m(t,"class","m-auto"),m(e,"class","flex items-center justify-center h-full w-full")},m(s,i){A(s,e,i),E(e,t),le(n,t,null),o=!0},p:ye,i(s){o||(S(n.$$.fragment,s),o=!0)},o(s){N(n.$$.fragment,s),o=!1},d(s){s&&_(e),oe(n)}}}function H_(l){var u;let e,t,n,o,s,i,r=(((u=l[27])==null?void 0:u.backgroundImageUrl)??null)&&Bi(l);function a(f){l[54](f)}let c={chat:{id:l[26],chat:{title:l[29],models:l[1],system:l[27].system??void 0,params:l[25],history:l[21],timestamp:Date.now()}},title:l[29],shareEnabled:!!l[21].currentId,initNewChat:l[39]};return l[1]!==void 0&&(c.selectedModels=l[1]),t=new rh({props:c}),l[53](t),We.push(()=>Je(t,"selectedModels",a)),s=new qa({props:{direction:"horizontal",class:"w-full h-full",$$slots:{default:[R_]},$$scope:{ctx:l}}}),{c(){r&&r.c(),e=ee(),ne(t.$$.fragment),o=ee(),ne(s.$$.fragment)},l(f){r&&r.l(f),e=te(f),se(t.$$.fragment,f),o=te(f),se(s.$$.fragment,f)},m(f,h){r&&r.m(f,h),A(f,e,h),le(t,f,h),A(f,o,h),le(s,f,h),i=!0},p(f,h){var b;((b=f[27])==null?void 0:b.backgroundImageUrl)??null?r?r.p(f,h):(r=Bi(f),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null);const d={};h[0]&773849090&&(d.chat={id:f[26],chat:{title:f[29],models:f[1],system:f[27].system??void 0,params:f[25],history:f[21],timestamp:Date.now()}}),h[0]&536870912&&(d.title=f[29]),h[0]&2097152&&(d.shareEnabled=!!f[21].currentId),!n&&h[0]&2&&(n=!0,d.selectedModels=f[1],qe(()=>n=!1)),t.$set(d);const p={};h[0]&536805622|h[1]&2|h[3]&134217728&&(p.$$scope={dirty:h,ctx:f}),s.$set(p)},i(f){i||(S(t.$$.fragment,f),S(s.$$.fragment,f),i=!0)},o(f){N(t.$$.fragment,f),N(s.$$.fragment,f),i=!1},d(f){f&&(_(e),_(o)),r&&r.d(f),l[53](null),oe(t,f),oe(s,f)}}}function Bi(l){let e,t,n,o;return{c(){e=V("div"),n=ee(),o=V("div"),this.h()},l(s){e=z(s,"DIV",{class:!0,style:!0}),C(e).forEach(_),n=te(s),o=z(s,"DIV",{class:!0}),C(o).forEach(_),this.h()},h(){m(e,"class",t="absolute "+(l[31]?"md:max-w-[calc(100%-260px)] md:translate-x-[260px]":"")+" top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat"),et(e,"background-image","url("+l[27].backgroundImageUrl+")"),m(o,"class","absolute top-0 left-0 w-full h-full bg-gradient-to-t from-white to-white/85 dark:from-gray-900 dark:to-[#171717]/90 z-0")},m(s,i){A(s,e,i),A(s,n,i),A(s,o,i)},p(s,i){i[1]&1&&t!==(t="absolute "+(s[31]?"md:max-w-[calc(100%-260px)] md:translate-x-[260px]":"")+" top-0 left-0 w-full h-full bg-cover bg-center bg-no-repeat")&&m(e,"class",t),i[0]&134217728&&et(e,"background-image","url("+s[27].backgroundImageUrl+")")},d(s){s&&(_(e),_(n),_(o))}}}function Ai(l){let e,t,n,o=vt(l[32].filter(l[55])),s=[];for(let r=0;r<o.length;r+=1)s[r]=Li(Hi(l,o,r));const i=r=>N(s[r],1,1,()=>{s[r]=null});return{c(){e=V("div"),t=V("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=z(r,"DIV",{class:!0});var a=C(e);t=z(a,"DIV",{class:!0});var c=C(t);for(let u=0;u<s.length;u+=1)s[u].l(c);c.forEach(_),a.forEach(_),this.h()},h(){m(t,"class","flex flex-col gap-1 w-full"),m(e,"class","absolute top-12 left-0 right-0 w-full z-30")},m(r,a){A(r,e,a),E(e,t);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(t,null);n=!0},p(r,a){if(a[1]&2){o=vt(r[32].filter(r[55]));let c;for(c=0;c<o.length;c+=1){const u=Hi(r,o,c);s[c]?(s[c].p(u,a),S(s[c],1)):(s[c]=Li(u),s[c].c(),S(s[c],1),s[c].m(t,null))}for(He(),c=o.length;c<s.length;c+=1)i(c);Be()}},i(r){if(!n){for(let a=0;a<o.length;a+=1)S(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)N(s[a]);n=!1},d(r){r&&_(e),Mn(s,r)}}}function Li(l){let e,t;return e=new Zu({props:{banner:l[117]}}),e.$on("dismiss",l[56]),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o[1]&2&&(s.banner=n[117]),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function B_(l){var T;let e,t,n,o,s,i,r,a,c,u,f;function h(M){l[73](M)}function d(M){l[74](M)}function p(M){l[75](M)}function b(M){l[76](M)}function w(M){l[77](M)}function g(M){l[78](M)}function v(M){l[79](M)}function k(M){l[80](M)}let I={history:l[21],selectedModels:l[1],transparentBackground:((T=l[27])==null?void 0:T.backgroundImageUrl)??!1,stopResponse:l[45],createMessagePair:l[41]};return l[24]!==void 0&&(I.files=l[24]),l[22]!==void 0&&(I.prompt=l[22]),l[6]!==void 0&&(I.autoScroll=l[6]),l[17]!==void 0&&(I.selectedToolIds=l[17]),l[18]!==void 0&&(I.imageGenerationEnabled=l[18]),l[20]!==void 0&&(I.codeInterpreterEnabled=l[20]),l[19]!==void 0&&(I.webSearchEnabled=l[19]),l[2]!==void 0&&(I.atSelectedModel=l[2]),t=new P_({props:I}),We.push(()=>Je(t,"files",h)),We.push(()=>Je(t,"prompt",d)),We.push(()=>Je(t,"autoScroll",p)),We.push(()=>Je(t,"selectedToolIds",b)),We.push(()=>Je(t,"imageGenerationEnabled",w)),We.push(()=>Je(t,"codeInterpreterEnabled",g)),We.push(()=>Je(t,"webSearchEnabled",v)),We.push(()=>Je(t,"atSelectedModel",k)),t.$on("upload",l[81]),t.$on("submit",l[82]),{c(){e=V("div"),ne(t.$$.fragment),this.h()},l(M){e=z(M,"DIV",{class:!0});var y=C(e);se(t.$$.fragment,y),y.forEach(_),this.h()},h(){m(e,"class","overflow-auto w-full h-full flex items-center")},m(M,y){A(M,e,y),le(t,e,null),f=!0},p(M,y){var O;const H={};y[0]&2097152&&(H.history=M[21]),y[0]&2&&(H.selectedModels=M[1]),y[0]&134217728&&(H.transparentBackground=((O=M[27])==null?void 0:O.backgroundImageUrl)??!1),!n&&y[0]&16777216&&(n=!0,H.files=M[24],qe(()=>n=!1)),!o&&y[0]&4194304&&(o=!0,H.prompt=M[22],qe(()=>o=!1)),!s&&y[0]&64&&(s=!0,H.autoScroll=M[6],qe(()=>s=!1)),!i&&y[0]&131072&&(i=!0,H.selectedToolIds=M[17],qe(()=>i=!1)),!r&&y[0]&262144&&(r=!0,H.imageGenerationEnabled=M[18],qe(()=>r=!1)),!a&&y[0]&1048576&&(a=!0,H.codeInterpreterEnabled=M[20],qe(()=>a=!1)),!c&&y[0]&524288&&(c=!0,H.webSearchEnabled=M[19],qe(()=>c=!1)),!u&&y[0]&4&&(u=!0,H.atSelectedModel=M[2],qe(()=>u=!1)),t.$set(H)},i(M){f||(S(t.$$.fragment,M),f=!0)},o(M){N(t.$$.fragment,M),f=!1},d(M){M&&_(e),oe(t)}}}function A_(l){var Q;let e,t,n,o,s,i,r,a,c,u,f,h,d,p,b,w,g,v,k,I="",T,M,y;function H(W){l[57](W)}function O(W){l[58](W)}function B(W){l[59](W)}let j={chatId:l[26],selectedModels:l[1],sendPrompt:l[44],showMessage:l[35],submitMessage:l[46],continueResponse:l[48],regenerateResponse:l[47],mergeResponses:l[49],chatActionHandler:l[40],addMessages:l[42],bottomPadding:l[24].length>0};l[21]!==void 0&&(j.history=l[21]),l[6]!==void 0&&(j.autoScroll=l[6]),l[22]!==void 0&&(j.prompt=l[22]),n=new lu({props:j}),We.push(()=>Je(n,"history",H)),We.push(()=>Je(n,"autoScroll",O)),We.push(()=>Je(n,"prompt",B));function Z(W){l[63](W)}function L(W){l[64](W)}function D(W){l[65](W)}function Y(W){l[66](W)}function P(W){l[67](W)}function F(W){l[68](W)}function G(W){l[69](W)}function K(W){l[70](W)}let X={history:l[21],selectedModels:l[1],transparentBackground:((Q=l[27])==null?void 0:Q.backgroundImageUrl)??!1,stopResponse:l[45],createMessagePair:l[41],onChange:l[62]};return l[24]!==void 0&&(X.files=l[24]),l[22]!==void 0&&(X.prompt=l[22]),l[6]!==void 0&&(X.autoScroll=l[6]),l[17]!==void 0&&(X.selectedToolIds=l[17]),l[18]!==void 0&&(X.imageGenerationEnabled=l[18]),l[20]!==void 0&&(X.codeInterpreterEnabled=l[20]),l[19]!==void 0&&(X.webSearchEnabled=l[19]),l[2]!==void 0&&(X.atSelectedModel=l[2]),c=new na({props:X}),We.push(()=>Je(c,"files",Z)),We.push(()=>Je(c,"prompt",L)),We.push(()=>Je(c,"autoScroll",D)),We.push(()=>Je(c,"selectedToolIds",Y)),We.push(()=>Je(c,"imageGenerationEnabled",P)),We.push(()=>Je(c,"codeInterpreterEnabled",F)),We.push(()=>Je(c,"webSearchEnabled",G)),We.push(()=>Je(c,"atSelectedModel",K)),c.$on("upload",l[71]),c.$on("submit",l[72]),{c(){e=V("div"),t=V("div"),ne(n.$$.fragment),r=ee(),a=V("div"),ne(c.$$.fragment),v=ee(),k=V("div"),k.innerHTML=I,this.h()},l(W){e=z(W,"DIV",{class:!0,id:!0});var J=C(e);t=z(J,"DIV",{class:!0});var q=C(t);se(n.$$.fragment,q),q.forEach(_),J.forEach(_),r=te(W),a=z(W,"DIV",{class:!0});var ce=C(a);se(c.$$.fragment,ce),v=te(ce),k=z(ce,"DIV",{class:!0,"data-svelte-h":!0}),ft(k)!=="svelte-1t2gtm5"&&(k.innerHTML=I),ce.forEach(_),this.h()},h(){m(t,"class","h-full w-full flex flex-col"),m(e,"class","pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0 max-w-full z-10 scrollbar-hidden"),m(e,"id","messages-container"),m(k,"class","absolute bottom-1 text-xs text-gray-500 text-center line-clamp-1 right-0 left-0"),m(a,"class","pb-[1rem]")},m(W,J){A(W,e,J),E(e,t),le(n,t,null),l[60](e),A(W,r,J),A(W,a,J),le(c,a,null),E(a,v),E(a,k),T=!0,M||(y=ke(e,"scroll",l[61]),M=!0)},p(W,J){var ge;const q={};J[0]&67108864&&(q.chatId=W[26]),J[0]&2&&(q.selectedModels=W[1]),J[0]&16777216&&(q.bottomPadding=W[24].length>0),!o&&J[0]&2097152&&(o=!0,q.history=W[21],qe(()=>o=!1)),!s&&J[0]&64&&(s=!0,q.autoScroll=W[6],qe(()=>s=!1)),!i&&J[0]&4194304&&(i=!0,q.prompt=W[22],qe(()=>i=!1)),n.$set(q);const ce={};J[0]&2097152&&(ce.history=W[21]),J[0]&2&&(ce.selectedModels=W[1]),J[0]&134217728&&(ce.transparentBackground=((ge=W[27])==null?void 0:ge.backgroundImageUrl)??!1),J[0]&67108864&&(ce.onChange=W[62]),!u&&J[0]&16777216&&(u=!0,ce.files=W[24],qe(()=>u=!1)),!f&&J[0]&4194304&&(f=!0,ce.prompt=W[22],qe(()=>f=!1)),!h&&J[0]&64&&(h=!0,ce.autoScroll=W[6],qe(()=>h=!1)),!d&&J[0]&131072&&(d=!0,ce.selectedToolIds=W[17],qe(()=>d=!1)),!p&&J[0]&262144&&(p=!0,ce.imageGenerationEnabled=W[18],qe(()=>p=!1)),!b&&J[0]&1048576&&(b=!0,ce.codeInterpreterEnabled=W[20],qe(()=>b=!1)),!w&&J[0]&524288&&(w=!0,ce.webSearchEnabled=W[19],qe(()=>w=!1)),!g&&J[0]&4&&(g=!0,ce.atSelectedModel=W[2],qe(()=>g=!1)),c.$set(ce)},i(W){T||(S(n.$$.fragment,W),S(c.$$.fragment,W),T=!0)},o(W){N(n.$$.fragment,W),N(c.$$.fragment,W),T=!1},d(W){W&&(_(e),_(r),_(a)),oe(n),l[60](null),oe(c),M=!1,y()}}}function L_(l){let e,t,n,o,s,i,r=l[32].length>0&&!l[21].currentId&&!l[26]&&l[1].length<=1&&Ai(l);const a=[A_,B_],c=[];function u(f,h){var d;return h[0]&136314880&&(n=null),n==null&&(n=((d=f[27])==null?void 0:d.landingPageMode)==="chat"||In(f[21],f[21].currentId).length>0),n?0:1}return o=u(l,[-1,-1,-1,-1]),s=c[o]=a[o](l),{c(){r&&r.c(),e=ee(),t=V("div"),s.c(),this.h()},l(f){r&&r.l(f),e=te(f),t=z(f,"DIV",{class:!0});var h=C(t);s.l(h),h.forEach(_),this.h()},h(){m(t,"class","flex flex-col flex-auto z-10 w-full @container")},m(f,h){r&&r.m(f,h),A(f,e,h),A(f,t,h),c[o].m(t,null),i=!0},p(f,h){f[32].length>0&&!f[21].currentId&&!f[26]&&f[1].length<=1?r?(r.p(f,h),h[0]&69206018|h[1]&2&&S(r,1)):(r=Ai(f),r.c(),S(r,1),r.m(e.parentNode,e)):r&&(He(),N(r,1,1,()=>{r=null}),Be());let d=o;o=u(f,h),o===d?c[o].p(f,h):(He(),N(c[d],1,1,()=>{c[d]=null}),Be(),s=c[o],s?s.p(f,h):(s=c[o]=a[o](f),s.c()),S(s,1),s.m(t,null))},i(f){i||(S(r),S(s),i=!0)},o(f){N(r),N(s),i=!1},d(f){f&&(_(e),_(t)),r&&r.d(f),c[o].d()}}}function R_(l){var w;let e,t,n,o,s,i,r,a,c;e=new ji({props:{defaultSize:50,class:"h-full flex w-full relative",$$slots:{default:[L_]},$$scope:{ctx:l}}});function u(g){l[85](g)}function f(g){l[86](g)}function h(g){l[87](g)}function d(g){l[88](g)}function p(g){l[89](g)}let b={chatId:l[26],modelId:((w=l[16])==null?void 0:w.at(0))??null,models:l[16].reduce(l[83],[]),submitPrompt:l[43],stopResponse:l[45],showMessage:l[35],eventTarget:l[34]};return l[21]!==void 0&&(b.history=l[21]),l[23]!==void 0&&(b.chatFiles=l[23]),l[25]!==void 0&&(b.params=l[25]),l[24]!==void 0&&(b.files=l[24]),l[4]!==void 0&&(b.pane=l[4]),n=new E_({props:b}),l[84](n),We.push(()=>Je(n,"history",u)),We.push(()=>Je(n,"chatFiles",f)),We.push(()=>Je(n,"params",h)),We.push(()=>Je(n,"files",d)),We.push(()=>Je(n,"pane",p)),{c(){ne(e.$$.fragment),t=ee(),ne(n.$$.fragment)},l(g){se(e.$$.fragment,g),t=te(g),se(n.$$.fragment,g)},m(g,v){le(e,g,v),A(g,t,v),le(n,g,v),c=!0},p(g,v){var T;const k={};v[0]&226361542|v[1]&2|v[3]&134217728&&(k.$$scope={dirty:v,ctx:g}),e.$set(k);const I={};v[0]&67108864&&(I.chatId=g[26]),v[0]&65536&&(I.modelId=((T=g[16])==null?void 0:T.at(0))??null),v[0]&268500992&&(I.models=g[16].reduce(g[83],[])),!o&&v[0]&2097152&&(o=!0,I.history=g[21],qe(()=>o=!1)),!s&&v[0]&8388608&&(s=!0,I.chatFiles=g[23],qe(()=>s=!1)),!i&&v[0]&33554432&&(i=!0,I.params=g[25],qe(()=>i=!1)),!r&&v[0]&16777216&&(r=!0,I.files=g[24],qe(()=>r=!1)),!a&&v[0]&16&&(a=!0,I.pane=g[4],qe(()=>a=!1)),n.$set(I)},i(g){c||(S(e.$$.fragment,g),S(n.$$.fragment,g),c=!0)},o(g){N(e.$$.fragment,g),N(n.$$.fragment,g),c=!1},d(g){g&&_(t),oe(e,g),l[84](null),oe(n,g)}}}function U_(l){let e,t,n,o,s,i,r,a,c,u,f,h,d;Yo.title=e=`
		`+(l[29]?`${l[29].length>30?`${l[29].slice(0,30)}...`:l[29]} | ${l[30]}`:`${l[30]}`)+`
	`;function p(k){l[50](k)}let b={title:l[10],message:l[11],input:l[12],inputPlaceholder:l[13],inputValue:l[14]};l[9]!==void 0&&(b.show=l[9]),i=new vu({props:b}),We.push(()=>Je(i,"show",p)),i.$on("confirm",l[51]),i.$on("cancel",l[52]);const w=[H_,O_],g=[];function v(k,I){return k[0]===""||!k[3]&&k[0]?0:k[3]?1:-1}return~(u=v(l))&&(f=g[u]=w[u](l)),{c(){t=ee(),n=V("audio"),s=ee(),ne(i.$$.fragment),a=ee(),c=V("div"),f&&f.c(),this.h()},l(k){Ya("svelte-8uu834",Yo.head).forEach(_),t=te(k),n=z(k,"AUDIO",{id:!0,src:!0,style:!0}),C(n).forEach(_),s=te(k),se(i.$$.fragment,k),a=te(k),c=z(k,"DIV",{class:!0,id:!0});var T=C(c);f&&f.l(T),T.forEach(_),this.h()},h(){m(n,"id","audioElement"),Qn(n.src,o="")||m(n,"src",o),et(n,"display","none"),m(c,"class",h="h-screen max-h-[100dvh] transition-width duration-200 ease-in-out "+(l[31]?"  md:max-w-[calc(100%-260px)]":" ")+" w-full max-w-full flex flex-col"),m(c,"id","chat-container")},m(k,I){A(k,t,I),A(k,n,I),A(k,s,I),le(i,k,I),A(k,a,I),A(k,c,I),~u&&g[u].m(c,null),d=!0},p(k,I){(!d||I[0]&1610612736)&&e!==(e=`
		`+(k[29]?`${k[29].length>30?`${k[29].slice(0,30)}...`:k[29]} | ${k[30]}`:`${k[30]}`)+`
	`)&&(Yo.title=e);const T={};I[0]&1024&&(T.title=k[10]),I[0]&2048&&(T.message=k[11]),I[0]&4096&&(T.input=k[12]),I[0]&8192&&(T.inputPlaceholder=k[13]),I[0]&16384&&(T.inputValue=k[14]),!r&&I[0]&512&&(r=!0,T.show=k[9],qe(()=>r=!1)),i.$set(T);let M=u;u=v(k),u===M?~u&&g[u].p(k,I):(f&&(He(),N(g[M],1,1,()=>{g[M]=null}),Be()),~u?(f=g[u],f?f.p(k,I):(f=g[u]=w[u](k),f.c()),S(f,1),f.m(c,null)):f=null),(!d||I[1]&1&&h!==(h="h-screen max-h-[100dvh] transition-width duration-200 ease-in-out "+(k[31]?"  md:max-w-[calc(100%-260px)]":" ")+" w-full max-w-full flex flex-col"))&&m(c,"class",h)},i(k){d||(S(i.$$.fragment,k),S(f),d=!0)},o(k){N(i.$$.fragment,k),N(f),d=!1},d(k){k&&(_(t),_(n),_(s),_(a),_(c)),oe(i,k),~u&&g[u].d()}}}function W_(l,e,t){let n,o,s,i,r,a,c,u,f,h,d,p,b,w,g,v,k;ae(l,il,R=>t(94,n=R)),ae(l,ko,R=>t(95,o=R)),ae(l,cl,R=>t(26,s=R)),ae(l,Zn,R=>t(27,i=R)),ae(l,dl,R=>t(28,a=R)),ae(l,ec,R=>t(97,c=R)),ae(l,xn,R=>t(98,u=R)),ae(l,Yl,R=>t(99,f=R)),ae(l,Sn,R=>t(100,h=R)),ae(l,Ja,R=>t(101,d=R)),ae(l,wo,R=>t(102,p=R)),ae(l,ul,R=>t(103,b=R)),ae(l,$l,R=>t(29,w=R)),ae(l,Ki,R=>t(30,g=R)),ae(l,Ko,R=>t(31,v=R)),ae(l,tc,R=>t(32,k=R));const I=jt("i18n");ae(l,I,R=>t(96,r=R));let{chatIdProp:T=""}=e,M=!1;const y=new EventTarget;let H,O,B=!0,j,Z,L=!1,D="",Y="",P=!1,F="",G="",K=null,X,Q=[""],W,J=[],q=[],ce=!1,ge=!1,re=!1,Pe=null,x={messages:{},currentId:null},ue=null,Ee="",Xe=[],Ke=[],fe={};const lt=()=>{Q.length===0||Q.length===1&&Q[0]===""||(sessionStorage.selectedModels=JSON.stringify(Q),console.log("saveSessionSelectedModels",Q,sessionStorage.selectedModels))},it=async()=>{var ie,be;if(b||ul.set(await es(localStorage.token)),Q.length!==1)return;const R=a.find(Oe=>Oe.id===Q[0]);R&&t(17,q=(((be=(ie=R==null?void 0:R.info)==null?void 0:ie.meta)==null?void 0:be.toolIds)??[]).filter(Oe=>b.find(_e=>_e.id===Oe)))},zt=async R=>{const ie=JSON.parse(JSON.stringify(s));let be=JSON.parse(JSON.stringify(R.id)),Oe=x.messages[be].childrenIds;for(;Oe.length!==0;)be=Oe.at(-1),Oe=x.messages[be].childrenIds;t(21,x.currentId=be,x),await $e(),await $e(),await $e();const _e=document.getElementById(`message-${R.id}`);_e&&_e.scrollIntoView({behavior:"smooth"}),await $e(),At(ie,x)},Ct=async(R,ie)=>{var be,Oe;if(console.log(R),R.chat_id===s){await $e();let _e=x.messages[R.message_id];if(_e){const we=((be=R==null?void 0:R.data)==null?void 0:be.type)??null,ve=((Oe=R==null?void 0:R.data)==null?void 0:Oe.data)??null;if(we==="status")_e!=null&&_e.statusHistory?_e.statusHistory.push(ve):_e.statusHistory=[ve];else if(we==="source"||we==="citation")if((ve==null?void 0:ve.type)==="code_execution"){_e!=null&&_e.code_executions||(_e.code_executions=[]);const Le=_e.code_executions.findIndex(tt=>tt.id===ve.id);Le!==-1?_e.code_executions[Le]=ve:_e.code_executions.push(ve),_e.code_executions=_e.code_executions}else _e!=null&&_e.sources?_e.sources.push(ve):_e.sources=[ve];else if(we==="chat:completion")mt(ve,_e,R.chat_id);else if(we==="chat:title")$l.set(ve),il.set(1),await al.set(await bl(localStorage.token,n));else if(we==="chat:tags")Pe=await Zo(localStorage.token,s),nc.set(await _c(localStorage.token));else if(we==="message")_e.content+=ve.content;else if(we==="replace")_e.content=ve.content;else if(we==="action"){if(ve.action==="continue"){const Le=document.getElementById("continue-response-button");Le&&Le.click()}}else if(we==="confirmation")t(15,K=ie),t(12,P=!1),t(9,L=!0),t(10,D=ve.title),t(11,Y=ve.message);else if(we==="execute"){t(15,K=ie);try{const tt=await new Function(`return (async () => { ${ve.code} })()`)();ie&&ie(tt)}catch(Le){console.error("Error executing code:",Le)}}else if(we==="input")t(15,K=ie),t(12,P=!0),t(9,L=!0),t(10,D=ve.title),t(11,Y=ve.message),t(13,F=ve.placeholder),t(14,G=(ve==null?void 0:ve.value)??"");else if(we==="notification"){const Le=(ve==null?void 0:ve.type)??"info",tt=(ve==null?void 0:ve.content)??"";Le==="success"?nt.success(tt):Le==="error"?nt.error(tt):Le==="warning"?nt.warning(tt):nt.info(tt)}else console.log("Unknown message type",ve);t(21,x.messages[R.message_id]=_e,x)}}},Ht=async R=>{if(R.origin===window.origin){if(R.data.type==="input:prompt"){console.debug(R.data.text);const ie=document.getElementById("chat-input");ie&&(t(22,Ee=R.data.text),ie.focus())}R.data.type==="action:submit"&&(console.debug(R.data.text),Ee!==""&&(await $e(),de(Ee))),R.data.type==="input:prompt:submit"&&(console.debug(R.data.text),Ee!==""&&(await $e(),de(R.data.text)))}};kn(async()=>{if(console.log("mounted"),window.addEventListener("message",Ht),c==null||c.on("chat-events",Ct),s?o&&await Po("/"):X=cl.subscribe(async ie=>{ie||await Ye()}),localStorage.getItem(`chat-input-${T}`))try{const ie=JSON.parse(localStorage.getItem(`chat-input-${T}`));t(22,Ee=ie.prompt),t(24,Ke=ie.files),t(17,q=ie.selectedToolIds),t(19,ge=ie.webSearchEnabled),t(18,ce=ie.imageGenerationEnabled)}catch{t(22,Ee=""),t(24,Ke=[]),t(17,q=[]),t(19,ge=!1),t(18,ce=!1)}Ft.subscribe(async ie=>{if(H&&!p)try{ie?O.openPane():H.collapse()}catch{}ie||(Sn.set(!1),Gn.set(!1),jn.set(!1))});const R=document.getElementById("chat-input");R==null||R.focus(),al.subscribe(()=>{})}),ll(()=>{X==null||X(),window.removeEventListener("message",Ht),c==null||c.off("chat-events",Ct)});const wt=async R=>{var Oe,_e;if(console.log("Starting uploadGoogleDriveFile with:",{id:R.id,name:R.name,url:R.url,headers:{Authorization:`Bearer ${token}`}}),!(R!=null&&R.id)||!(R!=null&&R.name)||!(R!=null&&R.url)||!((Oe=R==null?void 0:R.headers)!=null&&Oe.Authorization))throw new Error("Invalid file data provided");const ie=el(),be={type:"file",file:"",id:null,url:R.url,name:R.name,collection_name:"",status:"uploading",error:"",itemId:ie,size:0};try{t(24,Ke=[...Ke,be]),console.log("Processing web file with URL:",R.url);const we={headers:{Authorization:R.headers.Authorization,Accept:"*/*"},method:"GET"};console.log("Fetching file content from Google Drive...");const ve=await fetch(R.url,we);if(!ve.ok){const Vt=await ve.text();throw new Error(`Failed to fetch file (${ve.status}): ${Vt}`)}const Le=ve.headers.get("content-type")||"application/octet-stream";console.log("Response received with content-type:",Le),console.log("Converting response to blob...");const tt=await ve.blob();if(tt.size===0)throw new Error("Retrieved file is empty");console.log("Blob created:",{size:tt.size,type:tt.type||Le});const dt=new File([tt],R.name,{type:tt.type||Le});if(console.log("File object created:",{name:dt.name,size:dt.size,type:dt.type}),dt.size===0)throw new Error("Created file is empty");console.log("Uploading file to server...");const St=await uploadFile(localStorage.token,dt);if(!St)throw new Error("Server returned null response for file upload");console.log("File uploaded successfully:",St),be.status="uploaded",be.file=St,be.id=St.id,be.size=dt.size,be.collection_name=(_e=St==null?void 0:St.meta)==null?void 0:_e.collection_name,be.url=`${WEBUI_API_BASE_URL}/files/${St.id}`,t(24,Ke),t(0,T),nt.success(r.t("File uploaded successfully"))}catch(we){console.error("Error uploading file:",we),t(24,Ke=Ke.filter(ve=>ve.itemId!==ie)),nt.error(r.t("Error uploading file: {{error}}",{error:we.message||"Unknown error"}))}},Ut=async R=>{console.log(R);const ie={type:"doc",name:R,collection_name:"",status:"uploading",url:R,error:""};try{t(24,Ke=[...Ke,ie]);const be=await vc(localStorage.token,"",R);be&&(ie.status="uploaded",ie.collection_name=be.collection_name,ie.file={...be.file,...ie.file},t(24,Ke),t(0,T))}catch(be){t(24,Ke=Ke.filter(Oe=>Oe.name!==R)),nt.error(JSON.stringify(be))}},pe=async R=>{console.log(R);const ie={type:"doc",name:R,collection_name:"",status:"uploading",context:"full",url:R,error:""};try{t(24,Ke=[...Ke,ie]);const be=await wc(localStorage.token,R);be&&(ie.status="uploaded",ie.collection_name=be.collection_name,ie.file={...be.file,...ie.file},t(24,Ke),t(0,T))}catch(be){t(24,Ke=Ke.filter(Oe=>Oe.name!==R)),nt.error(`${be}`)}},Ye=async()=>{var be,Oe,_e,we;if(d.url.searchParams.get("models"))t(1,Q=(be=d.url.searchParams.get("models"))==null?void 0:be.split(","));else if(d.url.searchParams.get("model")){const ve=(Oe=d.url.searchParams.get("model"))==null?void 0:Oe.split(",");if(ve.length===1)if(a.find(tt=>tt.id===ve[0]))t(1,Q=ve);else{const tt=document.getElementById("model-selector-0-button");if(tt){tt.click(),await $e();const dt=document.getElementById("model-search-input");dt&&(dt.focus(),dt.value=ve[0],dt.dispatchEvent(new Event("input")))}}else t(1,Q=ve)}else sessionStorage.selectedModels?(t(1,Q=JSON.parse(sessionStorage.selectedModels)),sessionStorage.removeItem("selectedModels")):i!=null&&i.models?t(1,Q=i==null?void 0:i.models):f!=null&&f.default_models&&(console.log((f==null?void 0:f.default_models.split(","))??""),t(1,Q=f==null?void 0:f.default_models.split(",")));t(1,Q=Q.filter(ve=>a.map(Le=>Le.id).includes(ve))),(Q.length===0||Q.length===1&&Q[0]==="")&&(a.length>0?t(1,Q=[a[0].id]):t(1,Q=[""])),await Ft.set(!1),await Sn.set(!1),await Gn.set(!1),await jn.set(!1),d.url.pathname.includes("/c/")&&window.history.replaceState(x.state,"","/"),t(6,B=!0),await cl.set(""),await $l.set(""),t(21,x={messages:{},currentId:null}),t(23,Xe=[]),t(25,fe={}),d.url.searchParams.get("youtube")&&pe(`https://www.youtube.com/watch?v=${d.url.searchParams.get("youtube")}`),d.url.searchParams.get("web-search")==="true"&&t(19,ge=!0),d.url.searchParams.get("image-generation")==="true"&&t(18,ce=!0),d.url.searchParams.get("tools")?t(17,q=(_e=d.url.searchParams.get("tools"))==null?void 0:_e.split(",").map(ve=>ve.trim()).filter(ve=>ve)):d.url.searchParams.get("tool-ids")&&t(17,q=(we=d.url.searchParams.get("tool-ids"))==null?void 0:we.split(",").map(ve=>ve.trim()).filter(ve=>ve)),d.url.searchParams.get("call")==="true"&&(Sn.set(!0),Ft.set(!0)),d.url.searchParams.get("q")&&(t(22,Ee=d.url.searchParams.get("q")??""),Ee&&(await $e(),de(Ee))),t(1,Q=Q.map(ve=>a.map(Le=>Le.id).includes(ve)?ve:""));const R=await bs(localStorage.token);R?Zn.set(R.ui):Zn.set(JSON.parse(localStorage.getItem("settings")??"{}"));const ie=document.getElementById("chat-input");setTimeout(()=>ie==null?void 0:ie.focus(),0)},ot=async()=>{if(cl.set(T),Pe=await Zo(localStorage.token,s).catch(async R=>(await Po("/"),null)),Pe){await pc(localStorage.token,s).catch(async ie=>[]);const R=Pe.chat;if(R){console.log(R),t(1,Q=((R==null?void 0:R.models)??void 0)!==void 0?R.models:[R.models??""]),t(21,x=((R==null?void 0:R.history)??void 0)!==void 0?R.history:mc(R.messages)),$l.set(R.title);const ie=await bs(localStorage.token);return ie?await Zn.set(ie.ui):await Zn.set(JSON.parse(localStorage.getItem("settings")??"{}")),t(25,fe=(R==null?void 0:R.params)??{}),t(23,Xe=(R==null?void 0:R.files)??[]),t(6,B=!0),await $e(),x.currentId&&t(21,x.messages[x.currentId].done=!0,x),await $e(),!0}else return null}},he=async()=>{await $e(),j&&t(7,j.scrollTop=j.scrollHeight,j)},kt=async(R,ie,be,Oe)=>{const _e=await Oc(localStorage.token,{model:ie,messages:Oe.map(we=>({id:we.id,role:we.role,content:we.content,info:we.info?we.info:void 0,timestamp:we.timestamp,...we.sources?{sources:we.sources}:{}})),model_item:a.find(we=>we.id===ie),chat_id:R,session_id:c==null?void 0:c.id,id:be}).catch(we=>(nt.error(`${we}`),Oe.at(-1).error={content:we},null));if(_e!==null&&_e.messages)for(const we of _e.messages)we!=null&&we.id&&t(21,x.messages[we.id]={...x.messages[we.id],...x.messages[we.id].content!==we.content?{originalContent:x.messages[we.id].content}:{},...we},x);await $e(),s==R&&(o||(Pe=await Ho(localStorage.token,R,{models:Q,messages:Oe,history:x,params:fe,files:Xe}),il.set(1),await al.set(await bl(localStorage.token,n))))},ht=async(R,ie,be,Oe,_e=null)=>{const we=In(x,Oe),ve=await zc(localStorage.token,ie,{model:be,messages:we.map(Le=>({id:Le.id,role:Le.role,content:Le.content,info:Le.info?Le.info:void 0,timestamp:Le.timestamp,...Le.sources?{sources:Le.sources}:{}})),..._e?{event:_e}:{},model_item:a.find(Le=>Le.id===be),chat_id:R,session_id:c==null?void 0:c.id,id:Oe}).catch(Le=>(nt.error(`${Le}`),we.at(-1).error={content:Le},null));if(ve!==null&&ve.messages)for(const Le of ve.messages)t(21,x.messages[Le.id]={...x.messages[Le.id],...x.messages[Le.id].content!==Le.content?{originalContent:x.messages[Le.id].content}:{},...Le},x);s==R&&(o||(Pe=await Ho(localStorage.token,R,{models:Q,messages:we,history:x,params:fe,files:Xe}),il.set(1),await al.set(await bl(localStorage.token,n))))},bt=async(R,ie="")=>setInterval(()=>{c==null||c.emit("usage",{action:"chat",model:R,chat_id:ie})},1e3),De=async R=>{if(t(22,Ee=""),Q.length===0)nt.error(r.t("Model not selected"));else{const ie=Q[0],be=a.filter(dt=>dt.id===ie).at(0),Oe=In(x,x.currentId),_e=Oe.length!==0?Oe.at(-1):null,we=el(),ve=el(),Le={id:we,parentId:_e?_e.id:null,childrenIds:[ve],role:"user",content:R||`[PROMPT] ${we}`,timestamp:Math.floor(Date.now()/1e3)},tt={id:ve,parentId:we,childrenIds:[],role:"assistant",content:`[RESPONSE] ${ve}`,done:!0,model:ie,modelName:be.name??be.id,modelIdx:0,timestamp:Math.floor(Date.now()/1e3)};_e&&(_e.childrenIds.push(we),t(21,x.messages[_e.id]=_e,x)),t(21,x.messages[we]=Le,x),t(21,x.messages[ve]=tt,x),t(21,x.currentId=ve,x),await $e(),B&&he(),Oe.length===0?await Bt(x):await At(s,x)}},Nt=async({modelId:R,parentId:ie,messages:be})=>{const Oe=a.filter(ve=>ve.id===R).at(0);let _e=x.messages[ie],we=_e?_e.id:null;for(const ve of be){let Le=el();if(ve.role==="user"){const tt={id:Le,parentId:we,childrenIds:[],timestamp:Math.floor(Date.now()/1e3),...ve};_e&&(_e.childrenIds.push(Le),t(21,x.messages[_e.id]=_e,x)),t(21,x.messages[Le]=tt,x),_e=tt,we=Le}else{const tt={id:Le,parentId:we,childrenIds:[],done:!0,model:Oe.id,modelName:Oe.name??Oe.id,modelIdx:0,timestamp:Math.floor(Date.now()/1e3),...ve};_e&&(_e.childrenIds.push(Le),t(21,x.messages[_e.id]=_e,x)),t(21,x.messages[Le]=tt,x),_e=tt,we=Le}}t(21,x.currentId=we,x),await $e(),B&&he(),be.length===0?await Bt(x):await At(s,x)},mt=async(R,ie,be)=>{var Vt,pt,nn,mn,yn,Kn,zn,Un,En,gn,cn,_n,bn,Nn;const{id:Oe,done:_e,choices:we,content:ve,sources:Le,selected_model_id:tt,error:dt,usage:St}=R;if(dt&&await Ge(dt,ie),Le&&(ie.sources=Le),we)if((pt=(Vt=we[0])==null?void 0:Vt.message)!=null&&pt.content)ie.content+=(mn=(nn=we[0])==null?void 0:nn.message)==null?void 0:mn.content;else{let Rt=((Kn=(yn=we[0])==null?void 0:yn.delta)==null?void 0:Kn.content)??"";if(ie.content==""&&Rt==`
`)console.log("Empty response");else{ie.content+=Rt,navigator.vibrate&&((i==null?void 0:i.hapticFeedback)??!1)&&navigator.vibrate(5);const dn=Oo(ie.content,((Un=(zn=f==null?void 0:f.audio)==null?void 0:zn.tts)==null?void 0:Un.split_on)??"punctuation");dn.pop(),dn.length>0&&dn[dn.length-1]!==ie.lastSentence&&(ie.lastSentence=dn[dn.length-1],y.dispatchEvent(new CustomEvent("chat",{detail:{id:ie.id,content:dn[dn.length-1]}})))}}if(ve){ie.content=ve,navigator.vibrate&&((i==null?void 0:i.hapticFeedback)??!1)&&navigator.vibrate(5);const Rt=Oo(ie.content,((gn=(En=f==null?void 0:f.audio)==null?void 0:En.tts)==null?void 0:gn.split_on)??"punctuation");Rt.pop(),Rt.length>0&&Rt[Rt.length-1]!==ie.lastSentence&&(ie.lastSentence=Rt[Rt.length-1],y.dispatchEvent(new CustomEvent("chat",{detail:{id:ie.id,content:Rt[Rt.length-1]}})))}if(tt&&(ie.selectedModelId=tt,ie.arena=!0),St&&(ie.usage=St),t(21,x.messages[ie.id]=ie,x),_e){ie.done=!0,i.responseAutoCopy&&$o(ie.content),i.responseAutoPlayback&&!h&&(await $e(),(cn=document.getElementById(`speak-button-${ie.id}`))==null||cn.click());let Rt=((Nn=Oo(ie.content,((bn=(_n=f==null?void 0:f.audio)==null?void 0:_n.tts)==null?void 0:bn.split_on)??"punctuation"))==null?void 0:Nn.at(-1))??"";Rt&&y.dispatchEvent(new CustomEvent("chat",{detail:{id:ie.id,content:Rt}})),y.dispatchEvent(new CustomEvent("chat:finish",{detail:{id:ie.id,content:ie.content}})),t(21,x.messages[ie.id]=ie,x),await kt(be,ie.model,ie.id,In(x,ie.id))}console.log(R),B&&he()},de=async(R,{_raw:ie=!1}={})=>{var dt,St,Vt;console.log("submitPrompt",R,s);const be=In(x,x.currentId),Oe=Q.map(pt=>a.map(nn=>nn.id).includes(pt)?pt:"");if(JSON.stringify(Q)!==JSON.stringify(Oe)&&t(1,Q=Oe),R===""&&Ke.length===0){nt.error(r.t("Please enter a prompt"));return}if(Q.includes("")){nt.error(r.t("Model not selected"));return}if(be.length!=0&&be.at(-1).done!=!0)return;if(be.length!=0&&be.at(-1).error){nt.error(r.t("Oops! There was an error in the previous response."));return}if(Ke.length>0&&Ke.filter(pt=>pt.type!=="image"&&pt.status==="uploading").length>0){nt.error(r.t("Oops! There are files still uploading. Please wait for the upload to complete."));return}if((((dt=f==null?void 0:f.file)==null?void 0:dt.max_count)??null)!==null&&Ke.length+Xe.length>((St=f==null?void 0:f.file)==null?void 0:St.max_count)){nt.error(r.t("You can only chat with a maximum of {{maxCount}} file(s) at a time.",{maxCount:(Vt=f==null?void 0:f.file)==null?void 0:Vt.max_count}));return}t(22,Ee="");const _e=document.getElementById("chat-input");_e&&(_e.style.height="");const we=JSON.parse(JSON.stringify(Ke));Xe.push(...we.filter(pt=>["doc","file","collection"].includes(pt.type))),t(23,Xe=Xe.filter((pt,nn,mn)=>mn.findIndex(yn=>JSON.stringify(yn)===JSON.stringify(pt))===nn)),t(24,Ke=[]),t(22,Ee="");let ve=el(),Le={id:ve,parentId:be.length!==0?be.at(-1).id:null,childrenIds:[],role:"user",content:R,files:we.length>0?we:void 0,timestamp:Math.floor(Date.now()/1e3),models:Q};t(21,x.messages[ve]=Le,x),t(21,x.currentId=ve,x),be.length!==0&&x.messages[be.at(-1).id].childrenIds.push(ve);const tt=document.getElementById("chat-input");tt==null||tt.focus(),lt(),await Ce(x,R,ve,{newChat:!0})},Ce=async(R,ie,be,{modelId:Oe=null,modelIdx:_e=null,newChat:we=!1}={})=>{let ve=JSON.parse(JSON.stringify(s));R=JSON.parse(JSON.stringify(R));const Le={};let tt=Oe?[Oe]:W!==void 0?[W.id]:Q;for(const[dt,St]of tt.entries()){const Vt=a.filter(pt=>pt.id===St).at(0);if(Vt){let pt=el(),nn={parentId:be,id:pt,childrenIds:[],role:"assistant",content:"",model:Vt.id,modelName:Vt.name??Vt.id,modelIdx:_e||dt,userContext:null,timestamp:Math.floor(Date.now()/1e3)};t(21,x.messages[pt]=nn,x),t(21,x.currentId=pt,x),be!==null&&x.messages[be]&&t(21,x.messages[be].childrenIds=[...x.messages[be].childrenIds,pt],x),Le[`${St}-${_e||dt}`]=pt}}t(21,x),we&&R.messages[R.currentId].parentId===null&&(ve=await Bt(R)),await $e(),R=JSON.parse(JSON.stringify(x)),await At(ve,R),await Promise.all(tt.map(async(dt,St)=>{var pt,nn,mn;console.log("modelId",dt);const Vt=a.filter(yn=>yn.id===dt).at(0);if(Vt){In(R,be).some(cn=>{var _n;return(_n=cn.files)==null?void 0:_n.some(bn=>bn.type==="image")})&&!(((mn=(nn=(pt=Vt.info)==null?void 0:pt.meta)==null?void 0:nn.capabilities)==null?void 0:mn.vision)??!0)&&nt.error(r.t("Model {{modelName}} is not vision capable",{modelName:Vt.name??Vt.id}));let zn=Le[`${dt}-${_e||St}`],Un=R.messages[zn],En=null;if(((i==null?void 0:i.memory)??!1)&&En===null){const cn=await Dc(localStorage.token,ie).catch(_n=>(nt.error(`${_n}`),null));cn&&(cn.documents[0].length>0&&(En=cn.documents[0].reduce((_n,bn,Nn)=>{const Rt=cn.metadatas[0][Nn].created_at,dn=new Date(Rt*1e3).toISOString().split("T")[0];return`${_n}${Nn+1}. [${dn}]. ${bn}
`},"")),console.log(En))}Un.userContext=En;const gn=await bt(Vt.id,ve);he(),await ze(R,Vt,zn),gn&&clearInterval(gn)}else nt.error(r.t("Model {{modelId}} not found",{modelId:dt}))})),il.set(1),al.set(await bl(localStorage.token,n))},ze=async(R,ie,be,Oe)=>{var St,Vt,pt,nn,mn,yn,Kn,zn,Un,En,gn,cn,_n,bn,Nn,Rt,dn,rs,is;const _e=R.messages[be],we=R.messages[_e.parentId];let ve=JSON.parse(JSON.stringify(Xe));ve.push(...((we==null?void 0:we.files)??[]).filter(ct=>["doc","file","collection"].includes(ct.type)),...((_e==null?void 0:_e.files)??[]).filter(ct=>["web_search_results"].includes(ct.type))),ve=ve.filter((ct,zl,as)=>as.findIndex(Jl=>JSON.stringify(Jl)===JSON.stringify(ct))===zl),he(),y.dispatchEvent(new CustomEvent("chat:start",{detail:{id:be}})),await $e();const Le=((Vt=(St=ie==null?void 0:ie.info)==null?void 0:St.params)==null?void 0:Vt.stream_response)??((pt=i==null?void 0:i.params)==null?void 0:pt.stream_response)??(fe==null?void 0:fe.stream_response)??!0;let tt=[fe!=null&&fe.system||i.system||((_e==null?void 0:_e.userContext)??null)?{role:"system",content:`${fc((fe==null?void 0:fe.system)??(i==null?void 0:i.system)??"",u.name,i!=null&&i.userLocation?await vs(localStorage.token):void 0)}${(_e==null?void 0:_e.userContext)??null?`

User Context:
${(_e==null?void 0:_e.userContext)??""}`:""}`}:void 0,...In(R,be).map(ct=>({...ct,content:dc(ct.content,["reasoning","code_interpreter"])}))].filter(ct=>ct);tt=tt.map((ct,zl,as)=>{var Jl,cs,us;return{role:ct.role,...((Jl=ct.files)==null?void 0:Jl.filter(Nl=>Nl.type==="image").length)>0&&ct.role==="user"?{content:[{type:"text",text:((cs=ct==null?void 0:ct.merged)==null?void 0:cs.content)??ct.content},...ct.files.filter(Nl=>Nl.type==="image").map(Nl=>({type:"image_url",image_url:{url:Nl.url}}))]}:{content:((us=ct==null?void 0:ct.merged)==null?void 0:us.content)??ct.content}}}).filter(ct=>{var zl;return(ct==null?void 0:ct.role)==="user"||((zl=ct==null?void 0:ct.content)==null?void 0:zl.trim())});const dt=await bc(localStorage.token,{stream:Le,model:ie.id,messages:tt,params:{...i==null?void 0:i.params,...fe,format:i.requestFormat??void 0,keep_alive:i.keepAlive??void 0,stop:(fe==null?void 0:fe.stop)??((nn=i==null?void 0:i.params)==null?void 0:nn.stop)??void 0?((fe==null?void 0:fe.stop.split(",").map(ct=>ct.trim()))??i.params.stop).map(ct=>decodeURIComponent(JSON.parse('"'+ct.replace(/\"/g,'\\"')+'"'))):void 0},files:((ve==null?void 0:ve.length)??0)>0?ve:void 0,tool_ids:q.length>0?q:void 0,features:{image_generation:(mn=f==null?void 0:f.features)!=null&&mn.enable_image_generation&&(u.role==="admin"||(Kn=(yn=u==null?void 0:u.permissions)==null?void 0:yn.features)!=null&&Kn.image_generation)?ce:!1,code_interpreter:(zn=f==null?void 0:f.features)!=null&&zn.enable_code_interpreter&&(u.role==="admin"||(En=(Un=u==null?void 0:u.permissions)==null?void 0:Un.features)!=null&&En.code_interpreter)?re:!1,web_search:(gn=f==null?void 0:f.features)!=null&&gn.enable_web_search&&(u.role==="admin"||(_n=(cn=u==null?void 0:u.permissions)==null?void 0:cn.features)!=null&&_n.web_search)?ge||((i==null?void 0:i.webSearch)??!1)==="always":!1},variables:{...hc(u.name,i!=null&&i.userLocation?await vs(localStorage.token):void 0)},model_item:a.find(ct=>ct.id===ie.id),session_id:c==null?void 0:c.id,chat_id:s,id:be,...!o&&(tt.length==1||tt.length==2&&((bn=tt.at(0))==null?void 0:bn.role)==="system"&&((Nn=tt.at(1))==null?void 0:Nn.role)==="user")&&(Q[0]===ie.id||W!==void 0)?{background_tasks:{title_generation:((Rt=i==null?void 0:i.title)==null?void 0:Rt.auto)??!0,tags_generation:(i==null?void 0:i.autoTags)??!0}}:{},...Le&&(((is=(rs=(dn=ie.info)==null?void 0:dn.meta)==null?void 0:rs.capabilities)==null?void 0:is.usage)??!1)?{stream_options:{include_usage:!0}}:{}},`${Hl}/api`).catch(ct=>(nt.error(`${ct}`),_e.error={content:ct},_e.done=!0,t(21,x.messages[be]=_e,x),t(21,x.currentId=be,x),null));console.log(dt),dt&&(ue=dt.task_id),await $e(),he()},Ge=async(R,ie)=>{let be="",Oe;R&&(Oe=R),console.error(Oe),"detail"in Oe?(nt.error(Oe.detail),be=Oe.detail):"error"in Oe?"message"in Oe.error?(nt.error(Oe.error.message),be=Oe.error.message):(nt.error(Oe.error),be=Oe.error):"message"in Oe&&(nt.error(Oe.message),be=Oe.message),ie.error={content:r.t("Uh-oh! There was an issue with the response.")+`
`+be},ie.done=!0,ie.statusHistory&&(ie.statusHistory=ie.statusHistory.filter(_e=>_e.action!=="knowledge_search")),t(21,x.messages[ie.id]=ie,x)},It=()=>{if(ue&&Nc(localStorage.token,ue).catch(ie=>null)){ue=null;const ie=x.messages[x.currentId];ie.done=!0,t(21,x.messages[x.currentId]=ie,x),B&&he()}},yt=async(R,ie)=>{let be=ie,Oe=el(),_e={id:Oe,parentId:R,childrenIds:[],role:"user",content:be,models:Q};R!==null&&t(21,x.messages[R].childrenIds=[...x.messages[R].childrenIds,Oe],x),t(21,x.messages[Oe]=_e,x),t(21,x.currentId=Oe,x),await $e(),await Ce(x,be,Oe)},Dt=async R=>{if(console.log("regenerateResponse"),x.currentId){let ie=x.messages[R.parentId],be=ie.content;((ie==null?void 0:ie.models)??[...Q]).length==1?await Ce(x,be,ie.id):await Ce(x,be,ie.id,{modelId:R.model,modelIdx:R.modelIdx})}},Mt=async()=>{if(console.log("continueResponse"),JSON.parse(JSON.stringify(s)),x.currentId&&x.messages[x.currentId].done==!0){const R=x.messages[x.currentId];R.done=!1,await $e();const ie=a.filter(be=>be.id===((R==null?void 0:R.selectedModelId)??R.model)).at(0);ie&&await ze(x,ie,R.id)}},sn=async(R,ie,be)=>{console.log("mergeResponses",R,ie);const Oe=x.messages[R],_e={status:!0,content:""};Oe.merged=_e,t(21,x.messages[R]=Oe,x);try{const[we,ve]=await Pc(localStorage.token,Oe.model,x.messages[Oe.parentId].content,ie);if(we&&we.ok&&we.body){const Le=await Wu(we.body,i.splitLargeChunks);for await(const tt of Le){const{value:dt,done:St,sources:Vt,error:pt,usage:nn}=tt;if(pt||St)break;_e.content==""&&dt==`
`||(_e.content+=dt,t(21,x.messages[R]=Oe,x),B&&he())}await At(be,x)}else console.error(we)}catch(we){console.error(we)}},Bt=async R=>{let ie=s;return o?(ie="local",await cl.set("local")):(Pe=await gc(localStorage.token,{id:ie,title:r.t("New Chat"),models:Q,system:i.system??void 0,params:fe,history:R,messages:In(R,R.currentId),tags:[],timestamp:Date.now()}),ie=Pe.id,await cl.set(ie),await al.set(await bl(localStorage.token,n)),il.set(1),window.history.replaceState(R.state,"",`/c/${ie}`)),await $e(),ie},At=async(R,ie)=>{s==R&&(o||(Pe=await Ho(localStorage.token,R,{models:Q,history:ie,messages:In(ie,ie.currentId),params:fe,files:Xe}),il.set(1),await al.set(await bl(localStorage.token,n))))};function Kt(R){L=R,t(9,L)}const Gt=R=>{R.detail?K(R.detail):K(!0)},tn=()=>{K(!1)};function rn(R){We[R?"unshift":"push"](()=>{Z=R,t(8,Z)})}function Wt(R){Q=R,t(1,Q)}const _t=R=>R.dismissible?!JSON.parse(localStorage.getItem("dismissedBannerIds")??"[]").includes(R.id):!0,Jt=R=>{const ie=R.detail;localStorage.setItem("dismissedBannerIds",JSON.stringify([ie,...JSON.parse(localStorage.getItem("dismissedBannerIds")??"[]")].filter(be=>k.find(Oe=>Oe.id===be))))};function fn(R){x=R,t(21,x)}function U(R){B=R,t(6,B)}function Ne(R){Ee=R,t(22,Ee),t(0,T)}function Ze(R){We[R?"unshift":"push"](()=>{j=R,t(7,j)})}const xe=R=>{t(6,B=j.scrollHeight-j.scrollTop<=j.clientHeight+5)},je=R=>{R.prompt?localStorage.setItem(`chat-input-${s}`,JSON.stringify(R)):localStorage.removeItem(`chat-input-${s}`)};function at(R){Ke=R,t(24,Ke),t(0,T)}function hn(R){Ee=R,t(22,Ee),t(0,T)}function an(R){B=R,t(6,B)}function ut(R){q=R,t(17,q),t(0,T)}function Lt(R){ce=R,t(18,ce),t(0,T)}function Tn(R){re=R,t(20,re)}function An(R){ge=R,t(19,ge),t(0,T)}function pn(R){W=R,t(2,W)}const hl=async R=>{const{type:ie,data:be}=R.detail;ie==="web"?await Ut(be):ie==="youtube"?await pe(be):ie==="google-drive"&&await wt(be)},ol=async R=>{(R.detail||Ke.length>0)&&(await $e(),de((i==null?void 0:i.richTextInput)??!0?R.detail.replaceAll(`

`,`
`):R.detail))};function Cn(R){Ke=R,t(24,Ke),t(0,T)}function Ln(R){Ee=R,t(22,Ee),t(0,T)}function Xn(R){B=R,t(6,B)}function $n(R){q=R,t(17,q),t(0,T)}function sl(R){ce=R,t(18,ce),t(0,T)}function Vn(R){re=R,t(20,re)}function ml(R){ge=R,t(19,ge),t(0,T)}function rl(R){W=R,t(2,W)}const $=async R=>{const{type:ie,data:be}=R.detail;ie==="web"?await Ut(be):ie==="youtube"&&await pe(be)},Zt=async R=>{(R.detail||Ke.length>0)&&(await $e(),de((i==null?void 0:i.richTextInput)??!0?R.detail.replaceAll(`

`,`
`):R.detail))},Tt=(R,ie,be,Oe)=>{const _e=a.find(we=>we.id===ie);return _e?[...R,_e]:R};function gl(R){We[R?"unshift":"push"](()=>{O=R,t(5,O)})}function Gl(R){x=R,t(21,x)}function ql(R){Xe=R,t(23,Xe)}function _l(R){fe=R,t(25,fe)}function Rn(R){Ke=R,t(24,Ke),t(0,T)}function pl(R){H=R,t(4,H)}return l.$$set=R=>{"chatIdProp"in R&&t(0,T=R.chatIdProp)},l.$$.update=()=>{l.$$.dirty[0]&6&&t(16,J=W!==void 0?[W.id]:Q),l.$$.dirty[0]&1&&T&&(async()=>{if(t(3,M=!0),console.log(T),t(22,Ee=""),t(24,Ke=[]),t(17,q=[]),t(19,ge=!1),t(18,ce=!1),T&&await ot()){if(await $e(),t(3,M=!1),localStorage.getItem(`chat-input-${T}`))try{const ie=JSON.parse(localStorage.getItem(`chat-input-${T}`));t(22,Ee=ie.prompt),t(24,Ke=ie.files),t(17,q=ie.selectedToolIds),t(19,ge=ie.webSearchEnabled),t(18,ce=ie.imageGenerationEnabled)}catch{}window.setTimeout(()=>he(),0);const R=document.getElementById("chat-input");R==null||R.focus()}else await Po("/")})(),l.$$.dirty[0]&3&&Q&&T!==""&&lt(),l.$$.dirty[0]&2&&Q&&it()},[T,Q,W,M,H,O,B,j,Z,L,D,Y,P,F,G,K,J,q,ce,ge,re,x,Ee,Xe,Ke,fe,s,i,a,w,g,v,k,I,y,zt,wt,Ut,pe,Ye,ht,De,Nt,de,Ce,It,yt,Dt,Mt,sn,Kt,Gt,tn,rn,Wt,_t,Jt,fn,U,Ne,Ze,xe,je,at,hn,an,ut,Lt,Tn,An,pn,hl,ol,Cn,Ln,Xn,$n,sl,Vn,ml,rl,$,Zt,Tt,gl,Gl,ql,_l,Rn,pl]}class d2 extends Re{constructor(e){super(),Ue(this,e,W_,U_,Fe,{chatIdProp:0},null,[-1,-1,-1,-1])}}function F_(l){let e,t,n,o=l[1].t("Keyboard shortcuts")+"",s,i,r,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',c,u,f,h,d,p,b=l[1].t("Open new chat")+"",w,g,v,k='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">O</div>',I,T,M,y=l[1].t("Focus chat input")+"",H,O,B,j='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Esc</div>',Z,L,D,Y=l[1].t("Copy last code block")+"",P,F,G,K='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">;</div>',X,Q,W,J=l[1].t("Copy last response")+"",q,ce,ge,re='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">C</div>',Pe,x,ue,Ee,Xe=l[1].t("Toggle settings")+"",Ke,fe,lt,it='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">.</div>',zt,Ct,Ht,wt=l[1].t("Toggle sidebar")+"",Ut,pe,Ye,ot='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">S</div>',he,kt,ht,bt=l[1].t("Delete chat")+"",De,Nt,mt,de='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Shift</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">âŒ«/Delete</div>',Ce,ze,Ge,It=l[1].t("Show shortcuts")+"",yt,Dt,Mt,sn='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">Ctrl/âŒ˜</div> <div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">/</div>',Bt,At,Kt,Gt=l[1].t("Input commands")+"",tn,rn,Wt,_t,Jt,fn,U,Ne=l[1].t("Attach file")+"",Ze,xe,je,at='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">#</div>',hn,an,ut,Lt=l[1].t("Add custom prompt")+"",Tn,An,pn,hl='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">/</div>',ol,Cn,Ln,Xn=l[1].t("Select model")+"",$n,sl,Vn,ml='<div class="h-fit py-1 px-2 flex items-center justify-center rounded border border-black/10 capitalize text-gray-600 dark:border-white/10 dark:text-gray-300">@</div>',rl,$;return{c(){e=V("div"),t=V("div"),n=V("div"),s=Ie(o),i=ee(),r=V("button"),r.innerHTML=a,c=ee(),u=V("div"),f=V("div"),h=V("div"),d=V("div"),p=V("div"),w=Ie(b),g=ee(),v=V("div"),v.innerHTML=k,I=ee(),T=V("div"),M=V("div"),H=Ie(y),O=ee(),B=V("div"),B.innerHTML=j,Z=ee(),L=V("div"),D=V("div"),P=Ie(Y),F=ee(),G=V("div"),G.innerHTML=K,X=ee(),Q=V("div"),W=V("div"),q=Ie(J),ce=ee(),ge=V("div"),ge.innerHTML=re,Pe=ee(),x=V("div"),ue=V("div"),Ee=V("div"),Ke=Ie(Xe),fe=ee(),lt=V("div"),lt.innerHTML=it,zt=ee(),Ct=V("div"),Ht=V("div"),Ut=Ie(wt),pe=ee(),Ye=V("div"),Ye.innerHTML=ot,he=ee(),kt=V("div"),ht=V("div"),De=Ie(bt),Nt=ee(),mt=V("div"),mt.innerHTML=de,Ce=ee(),ze=V("div"),Ge=V("div"),yt=Ie(It),Dt=ee(),Mt=V("div"),Mt.innerHTML=sn,Bt=ee(),At=V("div"),Kt=V("div"),tn=Ie(Gt),rn=ee(),Wt=V("div"),_t=V("div"),Jt=V("div"),fn=V("div"),U=V("div"),Ze=Ie(Ne),xe=ee(),je=V("div"),je.innerHTML=at,hn=ee(),an=V("div"),ut=V("div"),Tn=Ie(Lt),An=ee(),pn=V("div"),pn.innerHTML=hl,ol=ee(),Cn=V("div"),Ln=V("div"),$n=Ie(Xn),sl=ee(),Vn=V("div"),Vn.innerHTML=ml,this.h()},l(Zt){e=z(Zt,"DIV",{class:!0});var Tt=C(e);t=z(Tt,"DIV",{class:!0});var gl=C(t);n=z(gl,"DIV",{class:!0});var Gl=C(n);s=Se(Gl,o),Gl.forEach(_),i=te(gl),r=z(gl,"BUTTON",{class:!0,"data-svelte-h":!0}),ft(r)!=="svelte-745w2y"&&(r.innerHTML=a),gl.forEach(_),c=te(Tt),u=z(Tt,"DIV",{class:!0});var ql=C(u);f=z(ql,"DIV",{class:!0});var _l=C(f);h=z(_l,"DIV",{class:!0});var Rn=C(h);d=z(Rn,"DIV",{class:!0});var pl=C(d);p=z(pl,"DIV",{class:!0});var R=C(p);w=Se(R,b),R.forEach(_),g=te(pl),v=z(pl,"DIV",{class:!0,"data-svelte-h":!0}),ft(v)!=="svelte-lcmjz9"&&(v.innerHTML=k),pl.forEach(_),I=te(Rn),T=z(Rn,"DIV",{class:!0});var ie=C(T);M=z(ie,"DIV",{class:!0});var be=C(M);H=Se(be,y),be.forEach(_),O=te(ie),B=z(ie,"DIV",{class:!0,"data-svelte-h":!0}),ft(B)!=="svelte-1c7wvdz"&&(B.innerHTML=j),ie.forEach(_),Z=te(Rn),L=z(Rn,"DIV",{class:!0});var Oe=C(L);D=z(Oe,"DIV",{class:!0});var _e=C(D);P=Se(_e,Y),_e.forEach(_),F=te(Oe),G=z(Oe,"DIV",{class:!0,"data-svelte-h":!0}),ft(G)!=="svelte-1vgtrzt"&&(G.innerHTML=K),Oe.forEach(_),X=te(Rn),Q=z(Rn,"DIV",{class:!0});var we=C(Q);W=z(we,"DIV",{class:!0});var ve=C(W);q=Se(ve,J),ve.forEach(_),ce=te(we),ge=z(we,"DIV",{class:!0,"data-svelte-h":!0}),ft(ge)!=="svelte-m149u9"&&(ge.innerHTML=re),we.forEach(_),Rn.forEach(_),Pe=te(_l),x=z(_l,"DIV",{class:!0});var Le=C(x);ue=z(Le,"DIV",{class:!0});var tt=C(ue);Ee=z(tt,"DIV",{class:!0});var dt=C(Ee);Ke=Se(dt,Xe),dt.forEach(_),fe=te(tt),lt=z(tt,"DIV",{class:!0,"data-svelte-h":!0}),ft(lt)!=="svelte-1lfzi34"&&(lt.innerHTML=it),tt.forEach(_),zt=te(Le),Ct=z(Le,"DIV",{class:!0});var St=C(Ct);Ht=z(St,"DIV",{class:!0});var Vt=C(Ht);Ut=Se(Vt,wt),Vt.forEach(_),pe=te(St),Ye=z(St,"DIV",{class:!0,"data-svelte-h":!0}),ft(Ye)!=="svelte-1egz3pd"&&(Ye.innerHTML=ot),St.forEach(_),he=te(Le),kt=z(Le,"DIV",{class:!0});var pt=C(kt);ht=z(pt,"DIV",{class:!0});var nn=C(ht);De=Se(nn,bt),nn.forEach(_),Nt=te(pt),mt=z(pt,"DIV",{class:!0,"data-svelte-h":!0}),ft(mt)!=="svelte-tx0rkx"&&(mt.innerHTML=de),pt.forEach(_),Ce=te(Le),ze=z(Le,"DIV",{class:!0});var mn=C(ze);Ge=z(mn,"DIV",{class:!0});var yn=C(Ge);yt=Se(yn,It),yn.forEach(_),Dt=te(mn),Mt=z(mn,"DIV",{class:!0,"data-svelte-h":!0}),ft(Mt)!=="svelte-714lzr"&&(Mt.innerHTML=sn),mn.forEach(_),Le.forEach(_),_l.forEach(_),ql.forEach(_),Bt=te(Tt),At=z(Tt,"DIV",{class:!0});var Kn=C(At);Kt=z(Kn,"DIV",{class:!0});var zn=C(Kt);tn=Se(zn,Gt),zn.forEach(_),Kn.forEach(_),rn=te(Tt),Wt=z(Tt,"DIV",{class:!0});var Un=C(Wt);_t=z(Un,"DIV",{class:!0});var En=C(_t);Jt=z(En,"DIV",{class:!0});var gn=C(Jt);fn=z(gn,"DIV",{class:!0});var cn=C(fn);U=z(cn,"DIV",{class:!0});var _n=C(U);Ze=Se(_n,Ne),_n.forEach(_),xe=te(cn),je=z(cn,"DIV",{class:!0,"data-svelte-h":!0}),ft(je)!=="svelte-11t0lmd"&&(je.innerHTML=at),cn.forEach(_),hn=te(gn),an=z(gn,"DIV",{class:!0});var bn=C(an);ut=z(bn,"DIV",{class:!0});var Nn=C(ut);Tn=Se(Nn,Lt),Nn.forEach(_),An=te(bn),pn=z(bn,"DIV",{class:!0,"data-svelte-h":!0}),ft(pn)!=="svelte-1s9pky1"&&(pn.innerHTML=hl),bn.forEach(_),ol=te(gn),Cn=z(gn,"DIV",{class:!0});var Rt=C(Cn);Ln=z(Rt,"DIV",{class:!0});var dn=C(Ln);$n=Se(dn,Xn),dn.forEach(_),sl=te(Rt),Vn=z(Rt,"DIV",{class:!0,"data-svelte-h":!0}),ft(Vn)!=="svelte-oivy56"&&(Vn.innerHTML=ml),Rt.forEach(_),gn.forEach(_),En.forEach(_),Un.forEach(_),Tt.forEach(_),this.h()},h(){m(n,"class","text-lg font-medium self-center"),m(r,"class","self-center"),m(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4"),m(p,"class","text-sm"),m(v,"class","flex space-x-1 text-xs"),m(d,"class","w-full flex justify-between items-center"),m(M,"class","text-sm"),m(B,"class","flex space-x-1 text-xs"),m(T,"class","w-full flex justify-between items-center"),m(D,"class","text-sm"),m(G,"class","flex space-x-1 text-xs"),m(L,"class","w-full flex justify-between items-center"),m(W,"class","text-sm"),m(ge,"class","flex space-x-1 text-xs"),m(Q,"class","w-full flex justify-between items-center"),m(h,"class","flex flex-col space-y-3 w-full self-start"),m(Ee,"class","text-sm"),m(lt,"class","flex space-x-1 text-xs"),m(ue,"class","w-full flex justify-between items-center"),m(Ht,"class","text-sm"),m(Ye,"class","flex space-x-1 text-xs"),m(Ct,"class","w-full flex justify-between items-center"),m(ht,"class","text-sm"),m(mt,"class","flex space-x-1 text-xs"),m(kt,"class","w-full flex justify-between items-center"),m(Ge,"class","text-sm"),m(Mt,"class","flex space-x-1 text-xs"),m(ze,"class","w-full flex justify-between items-center"),m(x,"class","flex flex-col space-y-3 w-full self-start"),m(f,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),m(u,"class","flex flex-col md:flex-row w-full p-5 md:space-x-4 dark:text-gray-200"),m(Kt,"class","text-lg font-medium self-center"),m(At,"class","flex justify-between dark:text-gray-300 px-5"),m(U,"class","text-sm"),m(je,"class","flex space-x-1 text-xs"),m(fn,"class","w-full flex justify-between items-center"),m(ut,"class","text-sm"),m(pn,"class","flex space-x-1 text-xs"),m(an,"class","w-full flex justify-between items-center"),m(Ln,"class","text-sm"),m(Vn,"class","flex space-x-1 text-xs"),m(Cn,"class","w-full flex justify-between items-center"),m(Jt,"class","flex flex-col space-y-3 w-full self-start"),m(_t,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),m(Wt,"class","flex flex-col md:flex-row w-full p-5 md:space-x-4 dark:text-gray-200"),m(e,"class","text-gray-700 dark:text-gray-100")},m(Zt,Tt){A(Zt,e,Tt),E(e,t),E(t,n),E(n,s),E(t,i),E(t,r),E(e,c),E(e,u),E(u,f),E(f,h),E(h,d),E(d,p),E(p,w),E(d,g),E(d,v),E(h,I),E(h,T),E(T,M),E(M,H),E(T,O),E(T,B),E(h,Z),E(h,L),E(L,D),E(D,P),E(L,F),E(L,G),E(h,X),E(h,Q),E(Q,W),E(W,q),E(Q,ce),E(Q,ge),E(f,Pe),E(f,x),E(x,ue),E(ue,Ee),E(Ee,Ke),E(ue,fe),E(ue,lt),E(x,zt),E(x,Ct),E(Ct,Ht),E(Ht,Ut),E(Ct,pe),E(Ct,Ye),E(x,he),E(x,kt),E(kt,ht),E(ht,De),E(kt,Nt),E(kt,mt),E(x,Ce),E(x,ze),E(ze,Ge),E(Ge,yt),E(ze,Dt),E(ze,Mt),E(e,Bt),E(e,At),E(At,Kt),E(Kt,tn),E(e,rn),E(e,Wt),E(Wt,_t),E(_t,Jt),E(Jt,fn),E(fn,U),E(U,Ze),E(fn,xe),E(fn,je),E(Jt,hn),E(Jt,an),E(an,ut),E(ut,Tn),E(an,An),E(an,pn),E(Jt,ol),E(Jt,Cn),E(Cn,Ln),E(Ln,$n),E(Cn,sl),E(Cn,Vn),rl||($=ke(r,"click",l[3]),rl=!0)},p(Zt,Tt){Tt&2&&o!==(o=Zt[1].t("Keyboard shortcuts")+"")&&Me(s,o),Tt&2&&b!==(b=Zt[1].t("Open new chat")+"")&&Me(w,b),Tt&2&&y!==(y=Zt[1].t("Focus chat input")+"")&&Me(H,y),Tt&2&&Y!==(Y=Zt[1].t("Copy last code block")+"")&&Me(P,Y),Tt&2&&J!==(J=Zt[1].t("Copy last response")+"")&&Me(q,J),Tt&2&&Xe!==(Xe=Zt[1].t("Toggle settings")+"")&&Me(Ke,Xe),Tt&2&&wt!==(wt=Zt[1].t("Toggle sidebar")+"")&&Me(Ut,wt),Tt&2&&bt!==(bt=Zt[1].t("Delete chat")+"")&&Me(De,bt),Tt&2&&It!==(It=Zt[1].t("Show shortcuts")+"")&&Me(yt,It),Tt&2&&Gt!==(Gt=Zt[1].t("Input commands")+"")&&Me(tn,Gt),Tt&2&&Ne!==(Ne=Zt[1].t("Attach file")+"")&&Me(Ze,Ne),Tt&2&&Lt!==(Lt=Zt[1].t("Add custom prompt")+"")&&Me(Tn,Lt),Tt&2&&Xn!==(Xn=Zt[1].t("Select model")+"")&&Me($n,Xn)},d(Zt){Zt&&_(e),rl=!1,$()}}}function j_(l){let e,t,n;function o(i){l[4](i)}let s={$$slots:{default:[F_]},$$scope:{ctx:l}};return l[0]!==void 0&&(s.show=l[0]),e=new cu({props:s}),We.push(()=>Je(e,"show",o)),{c(){ne(e.$$.fragment)},l(i){se(e.$$.fragment,i)},m(i,r){le(e,i,r),n=!0},p(i,[r]){const a={};r&35&&(a.$$scope={dirty:r,ctx:i}),!t&&r&1&&(t=!0,a.show=i[0],qe(()=>t=!1)),e.$set(a)},i(i){n||(S(e.$$.fragment,i),n=!0)},o(i){N(e.$$.fragment,i),n=!1},d(i){oe(e,i)}}}function Y_(l,e,t){let n;const o=jt("i18n");ae(l,o,a=>t(1,n=a));let{show:s=!1}=e;const i=()=>{t(0,s=!1)};function r(a){s=a,t(0,s)}return l.$$set=a=>{"show"in a&&t(0,s=a.show)},[s,n,o,i,r]}class X_ extends Re{constructor(e){super(),Ue(this,e,Y_,j_,Fe,{show:0})}}function K_(l){let e,t;return{c(){e=Te("svg"),t=Te("path"),this.h()},l(n){e=Ve(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var o=C(e);t=Ve(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"stroke-linecap","round"),m(t,"stroke-linejoin","round"),m(t,"d","M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(n,o){A(n,e,o),E(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:ye,o:ye,d(n){n&&_(e)}}}function Z_(l,e,t){let{className:n="w-4 h-4"}=e,{strokeWidth:o="2"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class G_ extends Re{constructor(e){super(),Ue(this,e,Z_,K_,Fe,{className:0,strokeWidth:1})}}function q_(l){let e,t;return{c(){e=Te("svg"),t=Te("path"),this.h()},l(n){e=Ve(n,"svg",{"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,class:!0});var o=C(e);t=Ve(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),C(t).forEach(_),o.forEach(_),this.h()},h(){m(t,"fill-rule","evenodd"),m(t,"d","M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7Zm5.01 1H5v2.01h2.01V8Zm3 0H8v2.01h2.01V8Zm3 0H11v2.01h2.01V8Zm3 0H14v2.01h2.01V8Zm3 0H17v2.01h2.01V8Zm-12 3H5v2.01h2.01V11Zm3 0H8v2.01h2.01V11Zm3 0H11v2.01h2.01V11Zm3 0H14v2.01h2.01V11Zm3 0H17v2.01h2.01V11Zm-12 3H5v2.01h2.01V14ZM8 14l-.001 2 8.011.01V14H8Zm11.01 0H17v2.01h2.01V14Z"),m(t,"clip-rule","evenodd"),m(e,"aria-hidden","true"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","currentColor"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"class",l[0])},m(n,o){A(n,e,o),E(e,t)},p(n,[o]){o&2&&m(e,"stroke-width",n[1]),o&1&&m(e,"class",n[0])},i:ye,o:ye,d(n){n&&_(e)}}}function J_(l,e,t){let{className:n="size-4"}=e,{strokeWidth:o="2"}=e;return l.$$set=s=>{"className"in s&&t(0,n=s.className),"strokeWidth"in s&&t(1,o=s.strokeWidth)},[n,o]}class Q_ extends Re{constructor(e){super(),Ue(this,e,J_,q_,Fe,{className:0,strokeWidth:1})}}function x_(l){let e;const t=l[5].default,n=Qt(t,l,l[9],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&512)&&xt(n,t,o,o[9],e?en(t,o[9],s,null):$t(o[9]),null)},i(o){e||(S(n,o),e=!0)},o(o){N(n,o),e=!1},d(o){n&&n.d(o)}}}function $_(l){let e,t,n,o=l[2].t("Documentation")+"",s,i;return e=new G_({props:{className:"size-5"}}),{c(){ne(e.$$.fragment),t=ee(),n=V("div"),s=Ie(o),this.h()},l(r){se(e.$$.fragment,r),t=te(r),n=z(r,"DIV",{class:!0});var a=C(n);s=Se(a,o),a.forEach(_),this.h()},h(){m(n,"class","flex items-center")},m(r,a){le(e,r,a),A(r,t,a),A(r,n,a),E(n,s),i=!0},p(r,a){(!i||a&4)&&o!==(o=r[2].t("Documentation")+"")&&Me(s,o)},i(r){i||(S(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){r&&(_(t),_(n)),oe(e,r)}}}function ep(l){let e,t,n,o=l[2].t("Keyboard shortcuts")+"",s,i;return e=new Q_({props:{className:"size-5"}}),{c(){ne(e.$$.fragment),t=ee(),n=V("div"),s=Ie(o),this.h()},l(r){se(e.$$.fragment,r),t=te(r),n=z(r,"DIV",{class:!0});var a=C(n);s=Se(a,o),a.forEach(_),this.h()},h(){m(n,"class","flex items-center")},m(r,a){le(e,r,a),A(r,t,a),A(r,n,a),E(n,s),i=!0},p(r,a){(!i||a&4)&&o!==(o=r[2].t("Keyboard shortcuts")+"")&&Me(s,o)},i(r){i||(S(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){r&&(_(t),_(n)),oe(e,r)}}}function tp(l){let e,t,n,o;return e=new wn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[$_]},$$scope:{ctx:l}}}),e.$on("click",l[6]),n=new wn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",id:"chat-share-button",$$slots:{default:[ep]},$$scope:{ctx:l}}}),n.$on("click",l[7]),{c(){ne(e.$$.fragment),t=ee(),ne(n.$$.fragment)},l(s){se(e.$$.fragment,s),t=te(s),se(n.$$.fragment,s)},m(s,i){le(e,s,i),A(s,t,i),le(n,s,i),o=!0},p(s,i){const r={};i&516&&(r.$$scope={dirty:i,ctx:s}),e.$set(r);const a={};i&516&&(a.$$scope={dirty:i,ctx:s}),n.$set(a)},i(s){o||(S(e.$$.fragment,s),S(n.$$.fragment,s),o=!0)},o(s){N(e.$$.fragment,s),N(n.$$.fragment,s),o=!1},d(s){s&&_(t),oe(e,s),oe(n,s)}}}function np(l){let e,t,n;return t=new Eo({props:{class:"w-full max-w-[200px] rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:4,side:"top",align:"end",transition:Xl,$$slots:{default:[tp]},$$scope:{ctx:l}}}),{c(){e=V("div"),ne(t.$$.fragment),this.h()},l(o){e=z(o,"DIV",{slot:!0});var s=C(e);se(t.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"slot","content")},m(o,s){A(o,e,s),le(t,e,null),n=!0},p(o,s){const i={};s&517&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){N(t.$$.fragment,o),n=!1},d(o){o&&_(e),oe(t)}}}function lp(l){let e,t;return e=new yo({props:{$$slots:{content:[np],default:[x_]},$$scope:{ctx:l}}}),e.$on("change",l[8]),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,[o]){const s={};o&517&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function op(l,e,t){let n,{$$slots:o={},$$scope:s}=e;const i=jt("i18n");ae(l,i,d=>t(2,n=d));let{showDocsHandler:r}=e,{showShortcutsHandler:a}=e,{onClose:c=()=>{}}=e;const u=()=>{window.open("https://docs.openwebui.com","_blank")},f=()=>{a()},h=d=>{d.detail===!1&&c()};return l.$$set=d=>{"showDocsHandler"in d&&t(4,r=d.showDocsHandler),"showShortcutsHandler"in d&&t(0,a=d.showShortcutsHandler),"onClose"in d&&t(1,c=d.onClose),"$$scope"in d&&t(9,s=d.$$scope)},[a,c,n,i,r,o,u,f,h,s]}class sp extends Re{constructor(e){super(),Ue(this,e,op,lp,Fe,{showDocsHandler:4,showShortcutsHandler:0,onClose:1})}}function rp(l){let e,t="?";return{c(){e=V("button"),e.textContent=t,this.h()},l(n){e=z(n,"BUTTON",{class:!0,"data-svelte-h":!0}),ft(e)!=="svelte-141cz2e"&&(e.textContent=t),this.h()},h(){m(e,"class","text-gray-600 dark:text-gray-300 bg-gray-300/20 size-4 flex items-center justify-center text-[0.7rem] rounded-full")},m(n,o){A(n,e,o)},p:ye,d(n){n&&_(e)}}}function ip(l){let e,t;return e=new Pt({props:{content:l[1].t("Help"),placement:"left",$$slots:{default:[rp]},$$scope:{ctx:l}}}),{c(){ne(e.$$.fragment)},l(n){se(e.$$.fragment,n)},m(n,o){le(e,n,o),t=!0},p(n,o){const s={};o&2&&(s.content=n[1].t("Help")),o&128&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(S(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function ap(l){let e,t,n,o,s,i,r,a,c,u;o=new sp({props:{showDocsHandler:l[4],showShortcutsHandler:l[5],$$slots:{default:[ip]},$$scope:{ctx:l}}});function f(d){l[6](d)}let h={};return l[0]!==void 0&&(h.show=l[0]),i=new X_({props:h}),We.push(()=>Je(i,"show",f)),{c(){e=V("div"),t=V("button"),n=ee(),ne(o.$$.fragment),s=ee(),ne(i.$$.fragment),this.h()},l(d){e=z(d,"DIV",{class:!0});var p=C(e);t=z(p,"BUTTON",{id:!0,class:!0}),C(t).forEach(_),n=te(p),se(o.$$.fragment,p),p.forEach(_),s=te(d),se(i.$$.fragment,d),this.h()},h(){m(t,"id","show-shortcuts-button"),m(t,"class","hidden"),m(e,"class","hidden lg:flex fixed bottom-0 right-0 px-1 py-1 z-20")},m(d,p){A(d,e,p),E(e,t),E(e,n),le(o,e,null),A(d,s,p),le(i,d,p),a=!0,c||(u=ke(t,"click",l[3]),c=!0)},p(d,[p]){const b={};p&1&&(b.showDocsHandler=d[4]),p&1&&(b.showShortcutsHandler=d[5]),p&130&&(b.$$scope={dirty:p,ctx:d}),o.$set(b);const w={};!r&&p&1&&(r=!0,w.show=d[0],qe(()=>r=!1)),i.$set(w)},i(d){a||(S(o.$$.fragment,d),S(i.$$.fragment,d),a=!0)},o(d){N(o.$$.fragment,d),N(i.$$.fragment,d),a=!1},d(d){d&&(_(e),_(s)),oe(o),oe(i,d),c=!1,u()}}}function cp(l,e,t){let n;const o=jt("i18n");ae(l,o,u=>t(1,n=u));let s=!1;const i=()=>{t(0,s=!s)},r=()=>{t(0,s=!s)},a=()=>{t(0,s=!s)};function c(u){s=u,t(0,s)}return[s,n,o,i,r,a,c]}class h2 extends Re{constructor(e){super(),Ue(this,e,cp,ap,Fe,{})}}export{d2 as C,h2 as H};
//# sourceMappingURL=Help.Dy8398LG.js.map
