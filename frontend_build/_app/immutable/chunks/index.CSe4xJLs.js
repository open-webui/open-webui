import{s as $,r as Y,v as Z,w as F,x as G,j as X,l as fe,i as B,d as m,U as ue,V as q,W as Pe,y as x,e as j,c as O,a as E,a2 as N,Y as ne,u as I,H as le,Q as _e,B as Xe,q as xe,E as ae,F as re,f as v,g as S,n as de,A as $e,p as et,t as P,k as R,b as W,o as J,I as tt,h as z}from"./scheduler.Dg_Xn4WQ.js";import{S as ee,i as te,t as M,a as V,g as me,c as ge,k as We,h as ze,j as we,b as be,d as ve,m as ke,e as ye,f as it}from"./index.gNonUo3Z.js";import{d as nt}from"./index.Dalr-O9q.js";import{s as lt,c as st,u as ot,d as at}from"./menu-trigger.qJyZyepX.js";import{g as se}from"./spread.CgU5AtxT.js";import{c as qe,d as rt}from"./updater.B0HmoELl.js";import{a as ft,b as ut,u as Te,d as Ie,e as dt,f as ce,s as ct,h as ht}from"./index.PGXp80Wq.js";import{q as Se,m as _t,e as mt,b as oe}from"./index.C2zJs1dP.js";import{T as gt}from"./Tags.DSRhrO-S.js";import{t as he}from"./Toaster.svelte_svelte_type_style_lang.CM0nbnqF.js";import{m as bt}from"./index.bquoJ5FE.js";import{M as vt}from"./Modal.DLh1UrlN.js";const kt=t=>({subIds:t&1}),Ee=t=>({subIds:t[0]});function yt(t){let e;const i=t[6].default,n=Y(i,t,t[5],Ee);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,f){n&&n.m(l,f),e=!0},p(l,[f]){n&&n.p&&(!e||f&33)&&Z(n,i,l,l[5],e?G(i,l[5],f,kt):F(l[5]),Ee)},i(l){e||(M(n,l),e=!0)},o(l){V(n,l),e=!1},d(l){n&&n.d(l)}}}function pt(t,e,i){let n,{$$slots:l={},$$scope:f}=e,{disabled:s=void 0}=e,{open:a=void 0}=e,{onOpenChange:o=void 0}=e;const{updateOption:u,ids:r,states:{subOpen:d}}=lt({disabled:s,onOpenChange:({next:_})=>(a!==_&&(o==null||o(_),i(2,a=_)),_)}),b=nt([r.menu,r.trigger],([_,y])=>({menu:_,trigger:y}));return X(t,b,_=>i(0,n=_)),t.$$set=_=>{"disabled"in _&&i(3,s=_.disabled),"open"in _&&i(2,a=_.open),"onOpenChange"in _&&i(4,o=_.onOpenChange),"$$scope"in _&&i(5,f=_.$$scope)},t.$$.update=()=>{t.$$.dirty&4&&a!==void 0&&d.set(a),t.$$.dirty&8&&u("disabled",s)},[n,b,a,s,o,f,l]}class _i extends ee{constructor(e){super(),te(this,e,pt,yt,$,{disabled:3,open:2,onOpenChange:4})}}const Ct=t=>({builder:t[0]&256}),Be=t=>({builder:t[8]}),wt=t=>({builder:t[0]&256}),je=t=>({builder:t[8]}),Tt=t=>({builder:t[0]&256}),Oe=t=>({builder:t[8]}),It=t=>({builder:t[0]&256}),Me=t=>({builder:t[8]}),St=t=>({builder:t[0]&256}),Ve=t=>({builder:t[8]}),Et=t=>({builder:t[0]&256}),Le=t=>({builder:t[8]});function Bt(t){let e,i,n,l;const f=t[28].default,s=Y(f,t,t[27],Be);let a=[t[8],t[13]],o={};for(let u=0;u<a.length;u+=1)o=q(o,a[u]);return{c(){e=j("div"),s&&s.c(),this.h()},l(u){e=O(u,"DIV",{});var r=E(e);s&&s.l(r),r.forEach(m),this.h()},h(){N(e,o)},m(u,r){B(u,e,r),s&&s.m(e,null),t[33](e),i=!0,n||(l=[ne(t[8].action(e)),I(e,"m-focusout",t[12]),I(e,"m-keydown",t[12]),I(e,"m-pointermove",t[12])],n=!0)},p(u,r){s&&s.p&&(!i||r[0]&134217984)&&Z(s,f,u,u[27],i?G(f,u[27],r,Ct):F(u[27]),Be),N(e,o=se(a,[r[0]&256&&u[8],r[0]&8192&&u[13]]))},i(u){i||(M(s,u),i=!0)},o(u){V(s,u),i=!1},d(u){u&&m(e),s&&s.d(u),t[33](null),n=!1,le(l)}}}function jt(t){let e,i,n,l,f;const s=t[28].default,a=Y(s,t,t[27],je);let o=[t[8],t[13]],u={};for(let r=0;r<o.length;r+=1)u=q(u,o[r]);return{c(){e=j("div"),a&&a.c(),this.h()},l(r){e=O(r,"DIV",{});var d=E(e);a&&a.l(d),d.forEach(m),this.h()},h(){N(e,u)},m(r,d){B(r,e,d),a&&a.m(e,null),t[32](e),n=!0,l||(f=[ne(t[8].action(e)),I(e,"m-focusout",t[12]),I(e,"m-keydown",t[12]),I(e,"m-pointermove",t[12])],l=!0)},p(r,d){t=r,a&&a.p&&(!n||d[0]&134217984)&&Z(a,s,t,t[27],n?G(s,t[27],d,wt):F(t[27]),je),N(e,u=se(o,[d[0]&256&&t[8],d[0]&8192&&t[13]]))},i(r){n||(M(a,r),i&&i.end(1),n=!0)},o(r){V(a,r),r&&(i=We(e,t[5],t[6])),n=!1},d(r){r&&m(e),a&&a.d(r),t[32](null),r&&i&&i.end(),l=!1,le(f)}}}function Ot(t){let e,i,n,l,f;const s=t[28].default,a=Y(s,t,t[27],Oe);let o=[t[8],t[13]],u={};for(let r=0;r<o.length;r+=1)u=q(u,o[r]);return{c(){e=j("div"),a&&a.c(),this.h()},l(r){e=O(r,"DIV",{});var d=E(e);a&&a.l(d),d.forEach(m),this.h()},h(){N(e,u)},m(r,d){B(r,e,d),a&&a.m(e,null),t[31](e),n=!0,l||(f=[ne(t[8].action(e)),I(e,"m-focusout",t[12]),I(e,"m-keydown",t[12]),I(e,"m-pointermove",t[12])],l=!0)},p(r,d){t=r,a&&a.p&&(!n||d[0]&134217984)&&Z(a,s,t,t[27],n?G(s,t[27],d,Tt):F(t[27]),Oe),N(e,u=se(o,[d[0]&256&&t[8],d[0]&8192&&t[13]]))},i(r){n||(M(a,r),r&&(i||_e(()=>{i=ze(e,t[3],t[4]),i.start()})),n=!0)},o(r){V(a,r),n=!1},d(r){r&&m(e),a&&a.d(r),t[31](null),l=!1,le(f)}}}function Mt(t){let e,i,n,l,f,s;const a=t[28].default,o=Y(a,t,t[27],Me);let u=[t[8],t[13]],r={};for(let d=0;d<u.length;d+=1)r=q(r,u[d]);return{c(){e=j("div"),o&&o.c(),this.h()},l(d){e=O(d,"DIV",{});var b=E(e);o&&o.l(b),b.forEach(m),this.h()},h(){N(e,r)},m(d,b){B(d,e,b),o&&o.m(e,null),t[30](e),l=!0,f||(s=[ne(t[8].action(e)),I(e,"m-focusout",t[12]),I(e,"m-keydown",t[12]),I(e,"m-pointermove",t[12])],f=!0)},p(d,b){t=d,o&&o.p&&(!l||b[0]&134217984)&&Z(o,a,t,t[27],l?G(a,t[27],b,It):F(t[27]),Me),N(e,r=se(u,[b[0]&256&&t[8],b[0]&8192&&t[13]]))},i(d){l||(M(o,d),d&&_e(()=>{l&&(n&&n.end(1),i=ze(e,t[3],t[4]),i.start())}),l=!0)},o(d){V(o,d),i&&i.invalidate(),d&&(n=We(e,t[5],t[6])),l=!1},d(d){d&&m(e),o&&o.d(d),t[30](null),d&&n&&n.end(),f=!1,le(s)}}}function Vt(t){let e,i,n,l,f;const s=t[28].default,a=Y(s,t,t[27],Ve);let o=[t[8],t[13]],u={};for(let r=0;r<o.length;r+=1)u=q(u,o[r]);return{c(){e=j("div"),a&&a.c(),this.h()},l(r){e=O(r,"DIV",{});var d=E(e);a&&a.l(d),d.forEach(m),this.h()},h(){N(e,u)},m(r,d){B(r,e,d),a&&a.m(e,null),t[29](e),n=!0,l||(f=[ne(t[8].action(e)),I(e,"m-focusout",t[12]),I(e,"m-keydown",t[12]),I(e,"m-pointermove",t[12])],l=!0)},p(r,d){t=r,a&&a.p&&(!n||d[0]&134217984)&&Z(a,s,t,t[27],n?G(s,t[27],d,St):F(t[27]),Ve),N(e,u=se(o,[d[0]&256&&t[8],d[0]&8192&&t[13]]))},i(r){n||(M(a,r),r&&_e(()=>{n&&(i||(i=we(e,t[1],t[2],!0)),i.run(1))}),n=!0)},o(r){V(a,r),r&&(i||(i=we(e,t[1],t[2],!1)),i.run(0)),n=!1},d(r){r&&m(e),a&&a.d(r),t[29](null),r&&i&&i.end(),l=!1,le(f)}}}function Lt(t){let e;const i=t[28].default,n=Y(i,t,t[27],Le);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,f){n&&n.m(l,f),e=!0},p(l,f){n&&n.p&&(!e||f[0]&134217984)&&Z(n,i,l,l[27],e?G(i,l[27],f,Et):F(l[27]),Le)},i(l){e||(M(n,l),e=!0)},o(l){V(n,l),e=!1},d(l){n&&n.d(l)}}}function At(t){let e,i,n,l;const f=[Lt,Vt,Mt,Ot,jt,Bt],s=[];function a(o,u){return o[7]&&o[9]?0:o[1]&&o[9]?1:o[3]&&o[5]&&o[9]?2:o[3]&&o[9]?3:o[5]&&o[9]?4:o[9]?5:-1}return~(e=a(t))&&(i=s[e]=f[e](t)),{c(){i&&i.c(),n=fe()},l(o){i&&i.l(o),n=fe()},m(o,u){~e&&s[e].m(o,u),B(o,n,u),l=!0},p(o,u){let r=e;e=a(o),e===r?~e&&s[e].p(o,u):(i&&(me(),V(s[r],1,1,()=>{s[r]=null}),ge()),~e?(i=s[e],i?i.p(o,u):(i=s[e]=f[e](o),i.c()),M(i,1),i.m(n.parentNode,n)):i=null)},i(o){l||(M(i),l=!0)},o(o){V(i),l=!1},d(o){o&&m(n),~e&&s[e].d(o)}}}function Ut(t,e,i){let n;const l=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","side","align","sideOffset","alignOffset","collisionPadding","avoidCollisions","collisionBoundary","sameWidth","fitViewport","strategy","overlap","el"];let f=ue(e,l),s,a,{$$slots:o={},$$scope:u}=e,{transition:r=void 0}=e,{transitionConfig:d=void 0}=e,{inTransition:b=void 0}=e,{inTransitionConfig:_=void 0}=e,{outTransition:y=void 0}=e,{outTransitionConfig:C=void 0}=e,{asChild:w=!1}=e,{id:p=void 0}=e,{side:A="right"}=e,{align:g="start"}=e,{sideOffset:T=0}=e,{alignOffset:L=0}=e,{collisionPadding:c=8}=e,{avoidCollisions:k=!0}=e,{collisionBoundary:U=void 0}=e,{sameWidth:H=!1}=e,{fitViewport:ie=!1}=e,{strategy:Q="absolute"}=e,{overlap:K=!1}=e,{el:D=void 0}=e;const{elements:{subMenu:pe},states:{subOpen:Ce},ids:He,getAttrs:Re}=st();X(t,pe,h=>i(26,s=h)),X(t,Ce,h=>i(9,a=h));const Je=qe(),Ye=Re("sub-content");function Ze(h){x[h?"unshift":"push"](()=>{D=h,i(0,D)})}function Fe(h){x[h?"unshift":"push"](()=>{D=h,i(0,D)})}function Ge(h){x[h?"unshift":"push"](()=>{D=h,i(0,D)})}function Qe(h){x[h?"unshift":"push"](()=>{D=h,i(0,D)})}function Ke(h){x[h?"unshift":"push"](()=>{D=h,i(0,D)})}return t.$$set=h=>{e=q(q({},e),Pe(h)),i(13,f=ue(e,l)),"transition"in h&&i(1,r=h.transition),"transitionConfig"in h&&i(2,d=h.transitionConfig),"inTransition"in h&&i(3,b=h.inTransition),"inTransitionConfig"in h&&i(4,_=h.inTransitionConfig),"outTransition"in h&&i(5,y=h.outTransition),"outTransitionConfig"in h&&i(6,C=h.outTransitionConfig),"asChild"in h&&i(7,w=h.asChild),"id"in h&&i(14,p=h.id),"side"in h&&i(15,A=h.side),"align"in h&&i(16,g=h.align),"sideOffset"in h&&i(17,T=h.sideOffset),"alignOffset"in h&&i(18,L=h.alignOffset),"collisionPadding"in h&&i(19,c=h.collisionPadding),"avoidCollisions"in h&&i(20,k=h.avoidCollisions),"collisionBoundary"in h&&i(21,U=h.collisionBoundary),"sameWidth"in h&&i(22,H=h.sameWidth),"fitViewport"in h&&i(23,ie=h.fitViewport),"strategy"in h&&i(24,Q=h.strategy),"overlap"in h&&i(25,K=h.overlap),"el"in h&&i(0,D=h.el),"$$scope"in h&&i(27,u=h.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&16384&&p&&He.menu.set(p),t.$$.dirty[0]&67108864&&i(8,n=s),t.$$.dirty[0]&256&&Object.assign(n,Ye),t.$$.dirty[0]&67076096&&ot({side:A,align:g,sideOffset:T,alignOffset:L,collisionPadding:c,avoidCollisions:k,collisionBoundary:U,sameWidth:H,fitViewport:ie,strategy:Q,overlap:K})},[D,r,d,b,_,y,C,w,n,a,pe,Ce,Je,f,p,A,g,T,L,c,k,U,H,ie,Q,K,s,u,o,Ze,Fe,Ge,Qe,Ke]}class mi extends ee{constructor(e){super(),te(this,e,Ut,At,$,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:14,side:15,align:16,sideOffset:17,alignOffset:18,collisionPadding:19,avoidCollisions:20,collisionBoundary:21,sameWidth:22,fitViewport:23,strategy:24,overlap:25,el:0},null,[-1,-1])}}const Dt=t=>({builder:t&4}),Ae=t=>({builder:t[2]}),Nt=t=>({builder:t&4}),Ue=t=>({builder:t[2]});function Pt(t){let e,i,n,l;const f=t[13].default,s=Y(f,t,t[12],Ae);let a=[t[2],t[6]],o={};for(let u=0;u<a.length;u+=1)o=q(o,a[u]);return{c(){e=j("div"),s&&s.c(),this.h()},l(u){e=O(u,"DIV",{});var r=E(e);s&&s.l(r),r.forEach(m),this.h()},h(){N(e,o)},m(u,r){B(u,e,r),s&&s.m(e,null),t[14](e),i=!0,n||(l=[ne(t[2].action(e)),I(e,"m-click",t[5]),I(e,"m-focusin",t[5]),I(e,"m-focusout",t[5]),I(e,"m-keydown",t[5]),I(e,"m-pointerleave",t[5]),I(e,"m-pointermove",t[5])],n=!0)},p(u,r){s&&s.p&&(!i||r&4100)&&Z(s,f,u,u[12],i?G(f,u[12],r,Dt):F(u[12]),Ae),N(e,o=se(a,[r&4&&u[2],r&64&&u[6]]))},i(u){i||(M(s,u),i=!0)},o(u){V(s,u),i=!1},d(u){u&&m(e),s&&s.d(u),t[14](null),n=!1,le(l)}}}function Wt(t){let e;const i=t[13].default,n=Y(i,t,t[12],Ue);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,f){n&&n.m(l,f),e=!0},p(l,f){n&&n.p&&(!e||f&4100)&&Z(n,i,l,l[12],e?G(i,l[12],f,Nt):F(l[12]),Ue)},i(l){e||(M(n,l),e=!0)},o(l){V(n,l),e=!1},d(l){n&&n.d(l)}}}function zt(t){let e,i,n,l;const f=[Wt,Pt],s=[];function a(o,u){return o[1]?0:1}return e=a(t),i=s[e]=f[e](t),{c(){i.c(),n=fe()},l(o){i.l(o),n=fe()},m(o,u){s[e].m(o,u),B(o,n,u),l=!0},p(o,[u]){let r=e;e=a(o),e===r?s[e].p(o,u):(me(),V(s[r],1,1,()=>{s[r]=null}),ge(),i=s[e],i?i.p(o,u):(i=s[e]=f[e](o),i.c()),M(i,1),i.m(n.parentNode,n))},i(o){l||(M(i),l=!0)},o(o){V(i),l=!1},d(o){o&&m(n),s[e].d(o)}}}function qt(t,e,i){let n,l;const f=["disabled","asChild","id","el"];let s=ue(e,f),a,o,{$$slots:u={},$$scope:r}=e,{disabled:d=!1}=e,{asChild:b=!1}=e,{id:_=void 0}=e,{el:y=void 0}=e;const{elements:{subTrigger:C},ids:w,getAttrs:p,options:A}=at();X(t,C,c=>i(11,o=c));const{disabled:g}=A;X(t,g,c=>i(10,a=c));const T=qe();function L(c){x[c?"unshift":"push"](()=>{y=c,i(0,y)})}return t.$$set=c=>{e=q(q({},e),Pe(c)),i(6,s=ue(e,f)),"disabled"in c&&i(7,d=c.disabled),"asChild"in c&&i(1,b=c.asChild),"id"in c&&i(8,_=c.id),"el"in c&&i(0,y=c.el),"$$scope"in c&&i(12,r=c.$$scope)},t.$$.update=()=>{t.$$.dirty&256&&_&&w.trigger.set(_),t.$$.dirty&2048&&i(2,n=o),t.$$.dirty&1152&&i(9,l={...p("sub-trigger"),...rt(d||a)}),t.$$.dirty&516&&Object.assign(n,l)},[y,b,n,C,g,T,s,d,_,l,a,o,r,u,L]}class gi extends ee{constructor(e){super(),te(this,e,qt,zt,$,{disabled:7,asChild:1,id:8,el:0})}}function Ht(t){let e,i;return e=new gt({props:{tags:t[0]}}),e.$on("delete",t[4]),e.$on("add",t[5]),{c(){be(e.$$.fragment)},l(n){ve(e.$$.fragment,n)},m(n,l){ke(e,n,l),i=!0},p(n,[l]){const f={};l&1&&(f.tags=n[0]),e.$set(f)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){V(e.$$.fragment,n),i=!1},d(n){ye(e,n)}}}function Rt(t,e,i){const n=Xe();let{chatId:l=""}=e,f=[];const s=async()=>await ft(localStorage.token,l).catch(async d=>[]),a=async d=>{await ut(localStorage.token,l,d).catch(async _=>(he.error(`${_}`),null))&&(i(0,f=await s()),await Te(localStorage.token,l,{tags:f}),await Se.set(await Ie(localStorage.token)),n("add",{name:d}))},o=async d=>{await dt(localStorage.token,l,d),i(0,f=await s()),await Te(localStorage.token,l,{tags:f}),await Se.set(await Ie(localStorage.token)),n("delete",{name:d})};xe(async()=>{l&&i(0,f=await s())});const u=d=>{o(d.detail)},r=d=>{a(d.detail)};return t.$$set=d=>{"chatId"in d&&i(3,l=d.chatId)},[f,a,o,l,u,r]}class bi extends ee{constructor(e){super(),te(this,e,Rt,Ht,$,{chatId:3})}}function Jt(t){let e,i,n;return{c(){e=ae("svg"),i=ae("path"),n=ae("path"),this.h()},l(l){e=re(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var f=E(e);i=re(f,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),E(i).forEach(m),n=re(f,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),E(n).forEach(m),f.forEach(m),this.h()},h(){v(i,"fill-rule","evenodd"),v(i,"d","M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z"),v(i,"clip-rule","evenodd"),v(n,"fill-rule","evenodd"),v(n,"d","M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z"),v(n,"clip-rule","evenodd"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"viewBox","0 0 16 16"),v(e,"fill","currentColor"),v(e,"class",t[0])},m(l,f){B(l,e,f),S(e,i),S(e,n)},p(l,[f]){f&1&&v(e,"class",l[0])},i:de,o:de,d(l){l&&m(e)}}}function Yt(t,e,i){let{className:n="w-4 h-4"}=e;return t.$$set=l=>{"className"in l&&i(0,n=l.className)},[n]}class Zt extends ee{constructor(e){super(),te(this,e,Yt,Jt,$,{className:0})}}function De(t){var L;let e,i,n,l,f,s,a,o,u,r,d,b,_;function y(c,k){return c[2].share_id?Gt:Ft}let C=y(t),w=C(t),p=((L=t[4])==null?void 0:L.features.enable_community_sharing)&&Ne(t);u=new Zt({});function A(c,k){return c[2].share_id?Kt:Qt}let g=A(t),T=g(t);return{c(){e=j("div"),i=j("div"),w.c(),n=R(),l=j("div"),f=j("div"),s=j("div"),p&&p.c(),a=R(),o=j("button"),be(u.$$.fragment),r=R(),T.c(),this.h()},l(c){e=O(c,"DIV",{class:!0});var k=E(e);i=O(k,"DIV",{class:!0});var U=E(i);w.l(U),U.forEach(m),n=J(k),l=O(k,"DIV",{class:!0});var H=E(l);f=O(H,"DIV",{class:!0});var ie=E(f);s=O(ie,"DIV",{class:!0});var Q=E(s);p&&p.l(Q),a=J(Q),o=O(Q,"BUTTON",{class:!0,type:!0,id:!0});var K=E(o);ve(u.$$.fragment,K),r=J(K),T.l(K),K.forEach(m),Q.forEach(m),ie.forEach(m),H.forEach(m),k.forEach(m),this.h()},h(){v(i,"class","text-sm dark:text-gray-300 mb-1"),v(o,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),v(o,"type","button"),v(o,"id","copy-and-share-chat-button"),v(s,"class","flex gap-1"),v(f,"class","flex flex-col items-end space-x-1 mt-3"),v(l,"class","flex justify-end"),v(e,"class","px-5 pt-4 pb-5 w-full flex flex-col justify-center")},m(c,k){B(c,e,k),S(e,i),w.m(i,null),S(e,n),S(e,l),S(l,f),S(f,s),p&&p.m(s,null),S(s,a),S(s,o),ke(u,o,null),S(o,r),T.m(o,null),d=!0,b||(_=I(o,"click",t[11]),b=!0)},p(c,k){var U;C===(C=y(c))&&w?w.p(c,k):(w.d(1),w=C(c),w&&(w.c(),w.m(i,null))),(U=c[4])!=null&&U.features.enable_community_sharing?p?p.p(c,k):(p=Ne(c),p.c(),p.m(s,a)):p&&(p.d(1),p=null),g===(g=A(c))&&T?T.p(c,k):(T.d(1),T=g(c),T&&(T.c(),T.m(o,null)))},i(c){d||(M(u.$$.fragment,c),d=!0)},o(c){V(u.$$.fragment,c),d=!1},d(c){c&&m(e),w.d(),p&&p.d(),ye(u),T.d(),b=!1,_()}}}function Ft(t){let e=t[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"",i;return{c(){i=P(e)},l(n){i=W(n,e)},m(n,l){B(n,i,l)},p(n,l){l&8&&e!==(e=n[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"")&&z(i,e)},d(n){n&&m(i)}}}function Gt(t){let e,i=t[3].t("You have shared this chat")+"",n,l,f,s=t[3].t("before")+"",a,o,u,r,d=t[3].t("Click here to")+"",b,_,y,C=t[3].t("delete this link")+"",w,p,A=t[3].t("and create a new shared link.")+"",g,T,L;return{c(){e=j("a"),n=P(i),l=R(),f=j("span"),a=P(s),o=P("."),r=R(),b=P(d),_=R(),y=j("button"),w=P(C),p=R(),g=P(A),this.h()},l(c){e=O(c,"A",{href:!0,target:!0});var k=E(e);n=W(k,i),l=J(k),f=O(k,"SPAN",{class:!0});var U=E(f);a=W(U,s),U.forEach(m),o=W(k,"."),k.forEach(m),r=J(c),b=W(c,d),_=J(c),y=O(c,"BUTTON",{class:!0});var H=E(y);w=W(H,C),H.forEach(m),p=J(c),g=W(c,A),this.h()},h(){v(f,"class","underline"),v(e,"href",u="/s/"+t[2].share_id),v(e,"target","_blank"),v(y,"class","underline")},m(c,k){B(c,e,k),S(e,n),S(e,l),S(e,f),S(f,a),S(e,o),B(c,r,k),B(c,b,k),B(c,_,k),B(c,y,k),S(y,w),B(c,p,k),B(c,g,k),T||(L=I(y,"click",t[9]),T=!0)},p(c,k){k&8&&i!==(i=c[3].t("You have shared this chat")+"")&&z(n,i),k&8&&s!==(s=c[3].t("before")+"")&&z(a,s),k&4&&u!==(u="/s/"+c[2].share_id)&&v(e,"href",u),k&8&&d!==(d=c[3].t("Click here to")+"")&&z(b,d),k&8&&C!==(C=c[3].t("delete this link")+"")&&z(w,C),k&8&&A!==(A=c[3].t("and create a new shared link.")+"")&&z(g,A)},d(c){c&&(m(e),m(r),m(b),m(_),m(y),m(p),m(g)),T=!1,L()}}}function Ne(t){let e,i=t[3].t("Share to OpenWebUI Community")+"",n,l,f;return{c(){e=j("button"),n=P(i),this.h()},l(s){e=O(s,"BUTTON",{class:!0,type:!0});var a=E(e);n=W(a,i),a.forEach(m),this.h()},h(){v(e,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:text-white dark:hover:bg-gray-800 transition rounded-full"),v(e,"type","button")},m(s,a){B(s,e,a),S(e,n),l||(f=I(e,"click",t[10]),l=!0)},p(s,a){a&8&&i!==(i=s[3].t("Share to OpenWebUI Community")+"")&&z(n,i)},d(s){s&&m(e),l=!1,f()}}}function Qt(t){let e=t[3].t("Copy Link")+"",i;return{c(){i=P(e)},l(n){i=W(n,e)},m(n,l){B(n,i,l)},p(n,l){l&8&&e!==(e=n[3].t("Copy Link")+"")&&z(i,e)},d(n){n&&m(i)}}}function Kt(t){let e=t[3].t("Update and Copy Link")+"",i;return{c(){i=P(e)},l(n){i=W(n,e)},m(n,l){B(n,i,l)},p(n,l){l&8&&e!==(e=n[3].t("Update and Copy Link")+"")&&z(i,e)},d(n){n&&m(i)}}}function Xt(t){let e,i,n,l=t[3].t("Share Chat")+"",f,s,a,o='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',u,r,d,b,_=t[2]&&De(t);return{c(){e=j("div"),i=j("div"),n=j("div"),f=P(l),s=R(),a=j("button"),a.innerHTML=o,u=R(),_&&_.c(),this.h()},l(y){e=O(y,"DIV",{});var C=E(e);i=O(C,"DIV",{class:!0});var w=E(i);n=O(w,"DIV",{class:!0});var p=E(n);f=W(p,l),p.forEach(m),s=J(w),a=O(w,"BUTTON",{class:!0,"data-svelte-h":!0}),tt(a)!=="svelte-745w2y"&&(a.innerHTML=o),w.forEach(m),u=J(C),_&&_.l(C),C.forEach(m),this.h()},h(){v(n,"class","text-lg font-medium self-center"),v(a,"class","self-center"),v(i,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5")},m(y,C){B(y,e,C),S(e,i),S(i,n),S(n,f),S(i,s),S(i,a),S(e,u),_&&_.m(e,null),r=!0,d||(b=I(a,"click",t[8]),d=!0)},p(y,C){(!r||C&8)&&l!==(l=y[3].t("Share Chat")+"")&&z(f,l),y[2]?_?(_.p(y,C),C&4&&M(_,1)):(_=De(y),_.c(),M(_,1),_.m(e,null)):_&&(me(),V(_,1,1,()=>{_=null}),ge())},i(y){r||(M(_),r=!0)},o(y){V(_),r=!1},d(y){y&&m(e),_&&_.d(),d=!1,b()}}}function xt(t){let e,i,n;function l(s){t[12](s)}let f={size:"md",$$slots:{default:[Xt]},$$scope:{ctx:t}};return t[0]!==void 0&&(f.show=t[0]),e=new vt({props:f}),x.push(()=>it(e,"show",l)),{c(){be(e.$$.fragment)},l(s){ve(e.$$.fragment,s)},m(s,a){ke(e,s,a),n=!0},p(s,[a]){const o={};a&65567&&(o.$$scope={dirty:a,ctx:s}),!i&&a&1&&(i=!0,o.show=s[0],$e(()=>i=!1)),e.$set(o)},i(s){n||(M(e.$$.fragment,s),n=!0)},o(s){V(e.$$.fragment,s),n=!1},d(s){ye(e,s)}}}function $t(t,e,i){let n,l,f;X(t,_t,g=>i(14,n=g)),X(t,mt,g=>i(4,f=g));let{chatId:s}=e,a=null,o=null;const u=et("i18n");X(t,u,g=>i(3,l=g));const r=async()=>{const g=await ct(localStorage.token,s);return o=`${window.location.origin}/s/${g.id}`,console.log(o),i(2,a=await ce(localStorage.token,s)),o},d=async()=>{const g=a.chat;console.log("share",g),he.success(l.t("Redirecting you to OpenWebUI Community"));const T="https://openwebui.com",L=await window.open(`${T}/chats/upload`,"_blank");window.addEventListener("message",c=>{c.origin===T&&c.data==="loaded"&&L.postMessage(JSON.stringify({chat:g,models:n.filter(k=>g.models.includes(k.id))}),"*")},!1)};let{show:b=!1}=e;const _=g=>a?g?a.id!==g.id||a.share_id!==g.share_id:!1:!0,y=()=>{i(0,b=!1)},C=async()=>{await ht(localStorage.token,s)&&i(2,a=await ce(localStorage.token,s))},w=()=>{d(),i(0,b=!1)},p=async()=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){console.log("isSafari");const T=async()=>{const L=await r();return new Blob([L],{type:"text/plain"})};navigator.clipboard.write([new ClipboardItem({"text/plain":T()})]).then(()=>(console.log("Async: Copying to clipboard was successful!"),!0)).catch(L=>(console.error("Async: Could not copy text: ",L),!1))}else bt(await r());he.success(l.t("Copied shared chat URL to clipboard!")),i(0,b=!1)};function A(g){b=g,i(0,b)}return t.$$set=g=>{"chatId"in g&&i(1,s=g.chatId),"show"in g&&i(0,b=g.show)},t.$$.update=()=>{t.$$.dirty&7&&b&&(async()=>{if(s){const g=await ce(localStorage.token,s);_(g)&&i(2,a=g)}else i(2,a=null),console.log(a)})()},[b,s,a,l,f,u,r,d,y,C,w,p,A]}class vi extends ee{constructor(e){super(),te(this,e,$t,xt,$,{chatId:1,show:0})}}function ei(t){let e,i;return{c(){e=ae("svg"),i=ae("path"),this.h()},l(n){e=re(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var l=E(e);i=re(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(i).forEach(m),l.forEach(m),this.h()},h(){v(i,"stroke-linecap","round"),v(i,"stroke-linejoin","round"),v(i,"d","m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"fill","none"),v(e,"viewBox","0 0 24 24"),v(e,"stroke-width",t[1]),v(e,"stroke","currentColor"),v(e,"class",t[0])},m(n,l){B(n,e,l),S(e,i)},p(n,[l]){l&2&&v(e,"stroke-width",n[1]),l&1&&v(e,"class",n[0])},i:de,o:de,d(n){n&&m(e)}}}function ti(t,e,i){let{className:n="size-4"}=e,{strokeWidth:l="1.5"}=e;return t.$$set=f=>{"className"in f&&i(0,n=f.className),"strokeWidth"in f&&i(1,l=f.strokeWidth)},[n,l]}class ki extends ee{constructor(e){super(),te(this,e,ti,ei,$,{className:0,strokeWidth:1})}}const yi=async t=>{let e=null;const i=await fetch(`${oe}/memories/`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${t}`}}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).catch(n=>(e=n.detail,console.log(n),null));if(e)throw e;return i},pi=async(t,e)=>{let i=null;const n=await fetch(`${oe}/memories/add`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${t}`},body:JSON.stringify({content:e})}).then(async l=>{if(!l.ok)throw await l.json();return l.json()}).catch(l=>(i=l.detail,console.log(l),null));if(i)throw i;return n},Ci=async(t,e,i)=>{let n=null;const l=await fetch(`${oe}/memories/${e}/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${t}`},body:JSON.stringify({content:i})}).then(async f=>{if(!f.ok)throw await f.json();return f.json()}).catch(f=>(n=f.detail,console.log(f),null));if(n)throw n;return l},wi=async(t,e)=>{let i=null;const n=await fetch(`${oe}/memories/query`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${t}`},body:JSON.stringify({content:e})}).then(async l=>{if(!l.ok)throw await l.json();return l.json()}).catch(l=>(i=l.detail,console.log(l),null));if(i)throw i;return n},Ti=async(t,e)=>{let i=null;const n=await fetch(`${oe}/memories/${e}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${t}`}}).then(async l=>{if(!l.ok)throw await l.json();return l.json()}).then(l=>l).catch(l=>(i=l.detail,console.log(l),null));if(i)throw i;return n},Ii=async t=>{let e=null;const i=await fetch(`${oe}/memories/delete/user`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${t}`}}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).then(n=>n).catch(n=>(e=n.detail,console.log(n),null));if(e)throw e;return i};export{_i as M,ki as P,vi as S,bi as T,gi as a,mi as b,pi as c,Ti as d,Ii as e,yi as g,wi as q,Ci as u};
//# sourceMappingURL=index.CSe4xJLs.js.map
