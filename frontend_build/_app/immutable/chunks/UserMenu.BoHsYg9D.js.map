{"version":3,"file":"UserMenu.BoHsYg9D.js","sources":["../../../../../../src/lib/components/icons/ArchiveBox.svelte","../../../../../../src/lib/components/layout/Sidebar/UserMenu.svelte"],"sourcesContent":["<script lang=\"ts\">\n\texport let className = 'size-3.5';\n\texport let strokeWidth = '2.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { createEventDispatcher, getContext, onMount } from 'svelte';\n\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport { goto } from '$app/navigation';\n\timport ArchiveBox from '$lib/components/icons/ArchiveBox.svelte';\n\timport { showSettings, activeUserIds, USAGE_POOL, mobile, showSidebar } from '$lib/stores';\n\timport { fade, slide } from 'svelte/transition';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport { userSignOut } from '$lib/apis/auths';\n\n\tconst i18n = getContext('i18n');\n\n\texport let show = false;\n\texport let role = '';\n\texport let className = 'max-w-[240px]';\n\n\tconst dispatch = createEventDispatcher();\n</script>\n\n<DropdownMenu.Root\n\tbind:open={show}\n\tonOpenChange={(state) => {\n\t\tdispatch('change', state);\n\t}}\n>\n\t<DropdownMenu.Trigger>\n\t\t<slot />\n\t</DropdownMenu.Trigger>\n\n\t<slot name=\"content\">\n\t\t<DropdownMenu.Content\n\t\t\tclass=\"w-full {className} text-sm rounded-xl px-1 py-1.5 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg font-primary\"\n\t\t\tsideOffset={8}\n\t\t\tside=\"bottom\"\n\t\t\talign=\"start\"\n\t\t\ttransition={(e) => fade(e, { duration: 100 })}\n\t\t>\n\t\t\t<button\n\t\t\t\tclass=\"flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\n\t\t\t\ton:click={async () => {\n\t\t\t\t\tawait showSettings.set(true);\n\t\t\t\t\tshow = false;\n\n\t\t\t\t\tif ($mobile) {\n\t\t\t\t\t\tshowSidebar.set(false);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div class=\" self-center mr-3\">\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\tstroke-width=\"1.5\"\n\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\tclass=\"w-5 h-5\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\td=\"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\td=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<div class=\" self-center truncate\">{$i18n.t('Settings')}</div>\n\t\t\t</button>\n\n\t\t\t<button\n\t\t\t\tclass=\"flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tdispatch('show', 'archived-chat');\n\t\t\t\t\tshow = false;\n\n\t\t\t\t\tif ($mobile) {\n\t\t\t\t\t\tshowSidebar.set(false);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div class=\" self-center mr-3\">\n\t\t\t\t\t<ArchiveBox className=\"size-5\" strokeWidth=\"1.5\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\" self-center truncate\">{$i18n.t('Archived Chats')}</div>\n\t\t\t</button>\n\n\t\t\t{#if role === 'admin'}\n\t\t\t\t<a\n\t\t\t\t\tclass=\"flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\n\t\t\t\t\thref=\"/playground\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tshow = false;\n\n\t\t\t\t\t\tif ($mobile) {\n\t\t\t\t\t\t\tshowSidebar.set(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\" self-center mr-3\">\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\tstroke-width=\"1.5\"\n\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\tclass=\"size-5\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\td=\"M14.25 9.75 16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25Z\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\" self-center truncate\">{$i18n.t('Playground')}</div>\n\t\t\t\t</a>\n\n\t\t\t\t<a\n\t\t\t\t\tclass=\"flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\n\t\t\t\t\thref=\"/admin\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tshow = false;\n\n\t\t\t\t\t\tif ($mobile) {\n\t\t\t\t\t\t\tshowSidebar.set(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\" self-center mr-3\">\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\tstroke-width=\"1.5\"\n\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\tclass=\"w-5 h-5\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\td=\"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\" self-center truncate\">{$i18n.t('Admin Panel')}</div>\n\t\t\t\t</a>\n\t\t\t{/if}\n\n\t\t\t<hr class=\" border-gray-50 dark:border-gray-850 my-1 p-0\" />\n\n\t\t\t<button\n\t\t\t\tclass=\"flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\n\t\t\t\ton:click={async () => {\n\t\t\t\t\tawait userSignOut();\n\t\t\t\t\tlocalStorage.removeItem('token');\n\t\t\t\t\tlocation.href = '/auth';\n\t\t\t\t\tshow = false;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div class=\" self-center mr-3\">\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\tclass=\"w-5 h-5\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\td=\"M3 4.25A2.25 2.25 0 015.25 2h5.5A2.25 2.25 0 0113 4.25v2a.75.75 0 01-1.5 0v-2a.75.75 0 00-.75-.75h-5.5a.75.75 0 00-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 00.75-.75v-2a.75.75 0 011.5 0v2A2.25 2.25 0 0110.75 18h-5.5A2.25 2.25 0 013 15.75V4.25z\"\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\td=\"M6 10a.75.75 0 01.75-.75h9.546l-1.048-.943a.75.75 0 111.004-1.114l2.5 2.25a.75.75 0 010 1.114l-2.5 2.25a.75.75 0 11-1.004-1.114l1.048-.943H6.75A.75.75 0 016 10z\"\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<div class=\" self-center truncate\">{$i18n.t('Sign Out')}</div>\n\t\t\t</button>\n\n\t\t\t{#if $activeUserIds?.length > 0}\n\t\t\t\t<hr class=\" border-gray-50 dark:border-gray-850 my-1 p-0\" />\n\n\t\t\t\t<Tooltip\n\t\t\t\t\tcontent={$USAGE_POOL && $USAGE_POOL.length > 0\n\t\t\t\t\t\t? `${$i18n.t('Running')}: ${$USAGE_POOL.join(', ')} âœ¨`\n\t\t\t\t\t\t: ''}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"flex rounded-md py-1.5 px-3 text-xs gap-2.5 items-center\">\n\t\t\t\t\t\t<div class=\" flex items-center\">\n\t\t\t\t\t\t\t<span class=\"relative flex size-2\">\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span class=\"relative inline-flex rounded-full size-2 bg-green-500\" />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\" \">\n\t\t\t\t\t\t\t<span class=\"\">\n\t\t\t\t\t\t\t\t{$i18n.t('Active Users')}:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class=\" font-semibold\">\n\t\t\t\t\t\t\t\t{$activeUserIds?.length}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Tooltip>\n\t\t\t{/if}\n\n\t\t\t<!-- <DropdownMenu.Item class=\"flex items-center px-3 py-2 text-sm \">\n\t\t\t\t<div class=\"flex items-center\">Profile</div>\n\t\t\t</DropdownMenu.Item> -->\n\t\t</DropdownMenu.Content>\n\t</slot>\n</DropdownMenu.Root>\n"],"names":["ctx","insert_hydration","target","svg","anchor","append_hydration","path","className","$$props","strokeWidth","a0","div0","div1","a1","div2","div3","set_data","t1","t1_value","t4","t4_value","hr","dirty","tooltip_changes","t5_value","_a","span3","span4","t2","t2_value","t5","if_block0","create_if_block_1","create_if_block","button0","button1","button2","div4","div5","t9","t9_value","i18n","getContext","show","role","dispatch","createEventDispatcher","showSettings","$$invalidate","$mobile","showSidebar","userSignOut","func","e","fade","state","value"],"mappings":"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"}