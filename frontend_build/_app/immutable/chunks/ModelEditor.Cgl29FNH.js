import{s as gt,j as ve,p as vt,B as Tn,q as sl,r as Cn,v as Sn,w as An,x as Nn,e as p,c as g,a as k,d,f as m,i as M,k as A,N as Me,o as N,g as f,C as Ne,u as x,l as $t,Q as ft,t as F,b as H,h as L,n as Ft,D as Mn,H as yl,y as $e,z as jn,A as Ye,P as On,O as Bs,R as Bn,T as Rl}from"./scheduler.CRl-z1y4.js";import{S as bt,i as kt,b as Z,d as J,m as W,t as C,a as B,e as Y,g as de,c as he,f as Ge}from"./index.Ci9MLlfz.js";import{e as fe}from"./each.Cd7EUOR7.js";import{n as Zl,m as Pn,t as Ps,f as $s}from"./index.iZ7GkiWf.js";import{A as $n}from"./AdvancedParams.CqEcd9qI.js";import{T as Fn}from"./Tags.Dr9qGsTG.js";import{F as Hn}from"./fuse.CU2r43ac.js";import"./updater.e7zyckLc.js";import{D as Ln,M as Un}from"./Dropdown.9uTl7bwK.js";import{b as zn}from"./menu-trigger.HLnuFu5_.js";import{f as Kn}from"./index.BFuekP1B.js";import{F as qn}from"./FileItem.Lzieq5vp.js";import{C as El}from"./Checkbox.CELb3As4.js";import{T as Jl}from"./Tooltip.DuavYtFf.js";import{m as Fs}from"./marked.esm._0_gBwjO.js";import{T as bn}from"./Textarea.ZjkPNBRh.js";import{g as Rn}from"./index.DFQ-xI8M.js";import{g as Zn}from"./index.9W4jP9JS.js";import{g as Jn}from"./index.J3n-LmoC.js";import{A as Wn}from"./AccessControl.SqwfbUSD.js";import"./postcss.BH1-te6V.js";import{t as Hs}from"./Toaster.svelte_svelte_type_style_lang.CQ9dEDgo.js";function Ls(n,e,t){const s=n.slice();return s[14]=e[t],s}function Yn(n){let e;const t=n[8].default,s=Cn(t,n,n[12],null);return{c(){s&&s.c()},l(l){s&&s.l(l)},m(l,a){s&&s.m(l,a),e=!0},p(l,a){s&&s.p&&(!e||a&4096)&&Sn(s,t,l,l[12],e?Nn(t,l[12],a,null):An(l[12]),null)},i(l){e||(C(s,l),e=!0)},o(l){B(s,l),e=!1},d(l){s&&s.d(l)}}}function Gn(n){let e,t,s=fe(n[2]),l=[];for(let r=0;r<s.length;r+=1)l[r]=Us(Ls(n,s,r));const a=r=>B(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=$t()},l(r){for(let i=0;i<l.length;i+=1)l[i].l(r);e=$t()},m(r,i){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(r,i);M(r,e,i),t=!0},p(r,i){if(i&36){s=fe(r[2]);let o;for(o=0;o<s.length;o+=1){const u=Ls(r,s,o);l[o]?(l[o].p(u,i),C(l[o],1)):(l[o]=Us(u),l[o].c(),C(l[o],1),l[o].m(e.parentNode,e))}for(de(),o=s.length;o<l.length;o+=1)a(o);he()}},i(r){if(!t){for(let i=0;i<s.length;i+=1)C(l[i]);t=!0}},o(r){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)B(l[i]);t=!1},d(r){r&&d(e),ft(l,r)}}}function Xn(n){let e,t=n[3].t("No knowledge found")+"",s;return{c(){e=p("div"),s=F(t),this.h()},l(l){e=g(l,"DIV",{class:!0});var a=k(e);s=H(a,t),a.forEach(d),this.h()},h(){m(e,"class","text-center text-sm text-gray-500 dark:text-gray-400")},m(l,a){M(l,e,a),f(e,s)},p(l,a){a&8&&t!==(t=l[3].t("No knowledge found")+"")&&L(s,t)},i:Ft,o:Ft,d(l){l&&d(e)}}}function Qn(n){let e,t="Collection";return{c(){e=p("div"),e.textContent=t,this.h()},l(s){e=g(s,"DIV",{class:!0,"data-svelte-h":!0}),Me(e)!=="svelte-13dseu7"&&(e.textContent=t),this.h()},h(){m(e,"class","bg-green-500/20 text-green-700 dark:text-green-200 rounded uppercase text-xs font-bold px-1")},m(s,l){M(s,e,l)},d(s){s&&d(e)}}}function xn(n){let e,t="Document";return{c(){e=p("div"),e.textContent=t,this.h()},l(s){e=g(s,"DIV",{class:!0,"data-svelte-h":!0}),Me(e)!=="svelte-1geke3w"&&(e.textContent=t),this.h()},h(){m(e,"class","bg-gray-500/20 text-gray-700 dark:text-gray-200 rounded uppercase text-xs font-bold px-1")},m(s,l){M(s,e,l)},d(s){s&&d(e)}}}function er(n){let e,t="Legacy";return{c(){e=p("div"),e.textContent=t,this.h()},l(s){e=g(s,"DIV",{class:!0,"data-svelte-h":!0}),Me(e)!=="svelte-alm5wq"&&(e.textContent=t),this.h()},h(){m(e,"class","bg-gray-500/20 text-gray-700 dark:text-gray-200 rounded uppercase text-xs font-bold px-1")},m(s,l){M(s,e,l)},d(s){s&&d(e)}}}function tr(n){let e,t,s,l,a,r=n[14].name+"",i,o;function u(v,_){var b,y;return v[14].legacy?er:(y=(b=v[14])==null?void 0:b.meta)!=null&&y.document?xn:Qn}let h=u(n),c=h(n);return{c(){e=p("div"),t=p("div"),s=p("div"),c.c(),l=A(),a=p("div"),i=F(r),o=A(),this.h()},l(v){e=g(v,"DIV",{class:!0});var _=k(e);t=g(_,"DIV",{class:!0});var b=k(t);s=g(b,"DIV",{class:!0});var y=k(s);c.l(y),y.forEach(d),l=N(b),a=g(b,"DIV",{class:!0});var I=k(a);i=H(I,r),I.forEach(d),b.forEach(d),_.forEach(d),o=N(v),this.h()},h(){m(s,"class","w-fit mb-0.5"),m(a,"class","line-clamp-1 font-medium pr-0.5"),m(t,"class","flex flex-col"),m(e,"class","flex items-center")},m(v,_){M(v,e,_),f(e,t),f(t,s),c.m(s,null),f(t,l),f(t,a),f(a,i),M(v,o,_)},p(v,_){h!==(h=u(v))&&(c.d(1),c=h(v),c&&(c.c(),c.m(s,null))),_&4&&r!==(r=v[14].name+"")&&L(i,r)},d(v){v&&(d(e),d(o)),c.d()}}}function Us(n){let e,t;function s(){return n[10](n[14])}return e=new Un({props:{class:"flex gap-2.5 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[tr]},$$scope:{ctx:n}}}),e.$on("click",s),{c(){Z(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,a){W(e,l,a),t=!0},p(l,a){n=l;const r={};a&4100&&(r.$$scope={dirty:a,ctx:n}),e.$set(r)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){Y(e,l)}}}function lr(n){let e,t,s,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg>',a,r,i,o,u,h,c,v,_,b,y,I;const V=[Xn,Gn],j=[];function S(T,P){return T[2].length===0?0:1}return v=S(n),_=j[v]=V[v](n),{c(){e=p("div"),t=p("div"),s=p("div"),s.innerHTML=l,a=A(),r=p("input"),o=A(),u=p("hr"),h=A(),c=p("div"),_.c(),this.h()},l(T){e=g(T,"DIV",{class:!0});var P=k(e);t=g(P,"DIV",{class:!0});var U=k(t);s=g(U,"DIV",{class:!0,"data-svelte-h":!0}),Me(s)!=="svelte-kinl2y"&&(s.innerHTML=l),a=N(U),r=g(U,"INPUT",{class:!0,placeholder:!0}),U.forEach(d),P.forEach(d),o=N(T),u=g(T,"HR",{class:!0}),h=N(T),c=g(T,"DIV",{class:!0});var E=k(c);_.l(E),E.forEach(d),this.h()},h(){m(s,"class","self-center ml-1 mr-3"),m(r,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-none bg-transparent"),m(r,"placeholder",i=n[3].t("Search Knowledge")),m(t,"class","flex flex-1"),m(e,"class","flex w-full space-x-2 py-0.5 px-2"),m(u,"class","border-gray-50 dark:border-gray-700 my-1.5"),m(c,"class","max-h-48 overflow-y-scroll")},m(T,P){M(T,e,P),f(e,t),f(t,s),f(t,a),f(t,r),Ne(r,n[1]),M(T,o,P),M(T,u,P),M(T,h,P),M(T,c,P),j[v].m(c,null),b=!0,y||(I=x(r,"input",n[9]),y=!0)},p(T,P){(!b||P&8&&i!==(i=T[3].t("Search Knowledge")))&&m(r,"placeholder",i),P&2&&r.value!==T[1]&&Ne(r,T[1]);let U=v;v=S(T),v===U?j[v].p(T,P):(de(),B(j[U],1,1,()=>{j[U]=null}),he(),_=j[v],_?_.p(T,P):(_=j[v]=V[v](T),_.c()),C(_,1),_.m(c,null))},i(T){b||(C(_),b=!0)},o(T){B(_),b=!1},d(T){T&&(d(e),d(o),d(u),d(h),d(c)),j[v].d(),y=!1,I()}}}function sr(n){let e,t,s;return t=new zn({props:{class:"w-full max-w-80 rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:8,side:"bottom",align:"start",transition:Kn,$$slots:{default:[lr]},$$scope:{ctx:n}}}),{c(){e=p("div"),Z(t.$$.fragment),this.h()},l(l){e=g(l,"DIV",{slot:!0});var a=k(e);J(t.$$.fragment,a),a.forEach(d),this.h()},h(){m(e,"slot","content")},m(l,a){M(l,e,a),W(t,e,null),s=!0},p(l,a){const r={};a&4110&&(r.$$scope={dirty:a,ctx:l}),t.$set(r)},i(l){s||(C(t.$$.fragment,l),s=!0)},o(l){B(t.$$.fragment,l),s=!1},d(l){l&&d(e),Y(t)}}}function nr(n){let e,t;return e=new Ln({props:{$$slots:{content:[sr],default:[Yn]},$$scope:{ctx:n}}}),e.$on("change",n[11]),{c(){Z(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,l){W(e,s,l),t=!0},p(s,[l]){const a={};l&4110&&(a.$$scope={dirty:l,ctx:s}),e.$set(a)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){B(e.$$.fragment,s),t=!1},d(s){Y(e,s)}}}function rr(n,e,t){let s,l;ve(n,Zl,V=>t(13,s=V));let{$$slots:a={},$$scope:r}=e;const i=vt("i18n");ve(n,i,V=>t(3,l=V));const o=Tn();let{onClose:u=()=>{}}=e,h="",c=[],v=[],_=null;sl(()=>{let V=s.filter(S=>{var T;return(T=S==null?void 0:S.meta)==null?void 0:T.document}),j=V.length>0?[{name:"All Documents",legacy:!0,type:"collection",description:"Deprecated (legacy collection), please create a new knowledge base.",title:l.t("All Documents"),collection_names:V.map(S=>S.id)},...V.reduce((S,T)=>{var P;return[...new Set([...S,...(((P=T==null?void 0:T.meta)==null?void 0:P.tags)??[]).map(U=>U.name)])]},[]).map(S=>({name:S,legacy:!0,type:"collection",description:"Deprecated (legacy collection), please create a new knowledge base.",collection_names:V.filter(T=>{var P;return(((P=T==null?void 0:T.meta)==null?void 0:P.tags)??[]).map(U=>U.name).includes(S)}).map(T=>T.id)}))]:[];t(6,c=[...s,...j].map(S=>{var T,P,U;return{...S,...S!=null&&S.legacy||(T=S==null?void 0:S.meta)!=null&&T.legacy||(P=S==null?void 0:S.meta)!=null&&P.document?{legacy:!0}:{},type:(U=S==null?void 0:S.meta)!=null&&U.document?"document":"collection"}})),t(7,_=new Hn(c,{keys:["name","description"]}))});function b(){h=this.value,t(1,h)}const y=V=>{o("select",V)},I=V=>{V.detail===!1&&(u(),t(1,h=""))};return n.$$set=V=>{"onClose"in V&&t(0,u=V.onClose),"$$scope"in V&&t(12,r=V.$$scope)},n.$$.update=()=>{n.$$.dirty&194&&_&&t(2,v=h?_.search(h).map(V=>V.item):c)},[u,h,v,l,i,o,c,_,a,b,y,I,r]}class ar extends bt{constructor(e){super(),kt(this,e,rr,nr,gt,{onClose:0})}}function zs(n,e,t){const s=n.slice();return s[6]=e[t],s[8]=t,s}function Ks(n){let e,t,s=fe(n[0]),l=[];for(let r=0;r<s.length;r+=1)l[r]=qs(zs(n,s,r));const a=r=>B(l[r],1,1,()=>{l[r]=null});return{c(){e=p("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=g(r,"DIV",{class:!0});var i=k(e);for(let o=0;o<l.length;o+=1)l[o].l(i);i.forEach(d),this.h()},h(){m(e,"class","flex flex-wrap items-center gap-2 mt-2")},m(r,i){M(r,e,i);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);t=!0},p(r,i){if(i&1){s=fe(r[0]);let o;for(o=0;o<s.length;o+=1){const u=zs(r,s,o);l[o]?(l[o].p(u,i),C(l[o],1)):(l[o]=qs(u),l[o].c(),C(l[o],1),l[o].m(e,null))}for(de(),o=s.length;o<l.length;o+=1)a(o);he()}},i(r){if(!t){for(let i=0;i<s.length;i+=1)C(l[i]);t=!0}},o(r){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)B(l[i]);t=!1},d(r){r&&d(e),ft(l,r)}}}function qs(n){var l,a;let e,t;function s(...r){return n[4](n[8],...r)}return e=new qn({props:{file:n[6],name:n[6].name,type:(l=n[6])!=null&&l.legacy?`Legacy${n[6].type?` ${n[6].type}`:""}`:((a=n[6])==null?void 0:a.type)??"Collection",dismissible:!0}}),e.$on("dismiss",s),{c(){Z(e.$$.fragment)},l(r){J(e.$$.fragment,r)},m(r,i){W(e,r,i),t=!0},p(r,i){var u,h;n=r;const o={};i&1&&(o.file=n[6]),i&1&&(o.name=n[6].name),i&1&&(o.type=(u=n[6])!=null&&u.legacy?`Legacy${n[6].type?` ${n[6].type}`:""}`:((h=n[6])==null?void 0:h.type)??"Collection"),e.$set(o)},i(r){t||(C(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){Y(e,r)}}}function or(n){let e,t=n[1].t("Select Knowledge")+"",s;return{c(){e=p("button"),s=F(t),this.h()},l(l){e=g(l,"BUTTON",{class:!0,type:!0});var a=k(e);s=H(a,t),a.forEach(d),this.h()},h(){m(e,"class","px-3.5 py-1.5 font-medium hover:bg-black/5 dark:hover:bg-white/5 outline outline-1 outline-gray-100 dark:outline-gray-850 rounded-3xl"),m(e,"type","button")},m(l,a){M(l,e,a),f(e,s)},p(l,a){a&2&&t!==(t=l[1].t("Select Knowledge")+"")&&L(s,t)},d(l){l&&d(e)}}}function ir(n){var V;let e,t,s,l=n[1].t("Knowledge")+"",a,r,i,o=n[1].t('To attach knowledge base here, add them to the "Knowledge" workspace first.')+"",u,h,c,v,_,b,y,I=((V=n[0])==null?void 0:V.length)>0&&Ks(n);return b=new ar({props:{$$slots:{default:[or]},$$scope:{ctx:n}}}),b.$on("select",n[5]),{c(){e=p("div"),t=p("div"),s=p("div"),a=F(l),r=A(),i=p("div"),u=F(o),h=A(),c=p("div"),I&&I.c(),v=A(),_=p("div"),Z(b.$$.fragment),this.h()},l(j){e=g(j,"DIV",{});var S=k(e);t=g(S,"DIV",{class:!0});var T=k(t);s=g(T,"DIV",{class:!0});var P=k(s);a=H(P,l),P.forEach(d),T.forEach(d),r=N(S),i=g(S,"DIV",{class:!0});var U=k(i);u=H(U,o),U.forEach(d),h=N(S),c=g(S,"DIV",{class:!0});var E=k(c);I&&I.l(E),v=N(E),_=g(E,"DIV",{class:!0});var z=k(_);J(b.$$.fragment,z),z.forEach(d),E.forEach(d),S.forEach(d),this.h()},h(){m(s,"class","self-center text-sm font-semibold"),m(t,"class","flex w-full justify-between mb-1"),m(i,"class","text-xs dark:text-gray-500"),m(_,"class","flex flex-wrap text-sm font-medium gap-1.5 mt-2"),m(c,"class","flex flex-col")},m(j,S){M(j,e,S),f(e,t),f(t,s),f(s,a),f(e,r),f(e,i),f(i,u),f(e,h),f(e,c),I&&I.m(c,null),f(c,v),f(c,_),W(b,_,null),y=!0},p(j,[S]){var P;(!y||S&2)&&l!==(l=j[1].t("Knowledge")+"")&&L(a,l),(!y||S&2)&&o!==(o=j[1].t('To attach knowledge base here, add them to the "Knowledge" workspace first.')+"")&&L(u,o),((P=j[0])==null?void 0:P.length)>0?I?(I.p(j,S),S&1&&C(I,1)):(I=Ks(j),I.c(),C(I,1),I.m(c,v)):I&&(de(),B(I,1,1,()=>{I=null}),he());const T={};S&514&&(T.$$scope={dirty:S,ctx:j}),b.$set(T)},i(j){y||(C(I),C(b.$$.fragment,j),y=!0)},o(j){B(I),B(b.$$.fragment,j),y=!1},d(j){j&&d(e),I&&I.d(),Y(b)}}}function cr(n,e,t){let s,{selectedKnowledge:l=[]}=e,{collections:a=[]}=e;const r=vt("i18n");ve(n,r,u=>t(1,s=u));const i=(u,h)=>{t(0,l=l.filter((c,v)=>v!==u))},o=u=>{const h=u.detail;l.find(c=>c.id===h.id)||t(0,l=[...l,{...h}])};return n.$$set=u=>{"selectedKnowledge"in u&&t(0,l=u.selectedKnowledge),"collections"in u&&t(3,a=u.collections)},[l,s,r,a,i,o]}class fr extends bt{constructor(e){super(),kt(this,e,cr,ir,gt,{selectedKnowledge:0,collections:3})}}function Rs(n,e,t){const s=n.slice();return s[6]=e[t],s[8]=t,s}function Zs(n){let e,t,s=fe(Object.keys(n[2])),l=[];for(let r=0;r<s.length;r+=1)l[r]=Js(Rs(n,s,r));const a=r=>B(l[r],1,1,()=>{l[r]=null});return{c(){e=p("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=g(r,"DIV",{class:!0});var i=k(e);for(let o=0;o<l.length;o+=1)l[o].l(i);i.forEach(d),this.h()},h(){m(e,"class","flex items-center mt-2 flex-wrap")},m(r,i){M(r,e,i);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);t=!0},p(r,i){if(i&5){s=fe(Object.keys(r[2]));let o;for(o=0;o<s.length;o+=1){const u=Rs(r,s,o);l[o]?(l[o].p(u,i),C(l[o],1)):(l[o]=Js(u),l[o].c(),C(l[o],1),l[o].m(e,null))}for(de(),o=s.length;o<l.length;o+=1)a(o);he()}},i(r){if(!t){for(let i=0;i<s.length;i+=1)C(l[i]);t=!0}},o(r){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)B(l[i]);t=!1},d(r){r&&d(e),ft(l,r)}}}function Js(n){let e,t,s,l,a,r=n[2][n[6]].name+"",i,o,u;function h(...c){return n[5](n[6],...c)}return s=new El({props:{state:n[2][n[6]].selected?"checked":"unchecked"}}),s.$on("change",h),{c(){e=p("div"),t=p("div"),Z(s.$$.fragment),l=A(),a=p("div"),i=F(r),o=A(),this.h()},l(c){e=g(c,"DIV",{class:!0});var v=k(e);t=g(v,"DIV",{class:!0});var _=k(t);J(s.$$.fragment,_),_.forEach(d),l=N(v),a=g(v,"DIV",{class:!0});var b=k(a);i=H(b,r),b.forEach(d),o=N(v),v.forEach(d),this.h()},h(){m(t,"class","self-center flex items-center"),m(a,"class","py-0.5 text-sm w-full capitalize font-medium"),m(e,"class","flex items-center gap-2 mr-3")},m(c,v){M(c,e,v),f(e,t),W(s,t,null),f(e,l),f(e,a),f(a,i),f(e,o),u=!0},p(c,v){n=c;const _={};v&4&&(_.state=n[2][n[6]].selected?"checked":"unchecked"),s.$set(_),(!u||v&4)&&r!==(r=n[2][n[6]].name+"")&&L(i,r)},i(c){u||(C(s.$$.fragment,c),u=!0)},o(c){B(s.$$.fragment,c),u=!1},d(c){c&&d(e),Y(s)}}}function ur(n){let e,t,s,l=n[3].t("Tools")+"",a,r,i,o=n[3].t('To select toolkits here, add them to the "Tools" workspace first.')+"",u,h,c,v,_=n[1].length>0&&Zs(n);return{c(){e=p("div"),t=p("div"),s=p("div"),a=F(l),r=A(),i=p("div"),u=F(o),h=A(),c=p("div"),_&&_.c(),this.h()},l(b){e=g(b,"DIV",{});var y=k(e);t=g(y,"DIV",{class:!0});var I=k(t);s=g(I,"DIV",{class:!0});var V=k(s);a=H(V,l),V.forEach(d),I.forEach(d),r=N(y),i=g(y,"DIV",{class:!0});var j=k(i);u=H(j,o),j.forEach(d),h=N(y),c=g(y,"DIV",{class:!0});var S=k(c);_&&_.l(S),S.forEach(d),y.forEach(d),this.h()},h(){m(s,"class","self-center text-sm font-semibold"),m(t,"class","flex w-full justify-between mb-1"),m(i,"class","text-xs dark:text-gray-500"),m(c,"class","flex flex-col")},m(b,y){M(b,e,y),f(e,t),f(t,s),f(s,a),f(e,r),f(e,i),f(i,u),f(e,h),f(e,c),_&&_.m(c,null),v=!0},p(b,[y]){(!v||y&8)&&l!==(l=b[3].t("Tools")+"")&&L(a,l),(!v||y&8)&&o!==(o=b[3].t('To select toolkits here, add them to the "Tools" workspace first.')+"")&&L(u,o),b[1].length>0?_?(_.p(b,y),y&2&&C(_,1)):(_=Zs(b),_.c(),C(_,1),_.m(c,null)):_&&(de(),B(_,1,1,()=>{_=null}),he())},i(b){v||(C(_),v=!0)},o(b){B(_),v=!1},d(b){b&&d(e),_&&_.d()}}}function dr(n,e,t){let s,{tools:l=[]}=e,a={},{selectedToolIds:r=[]}=e;const i=vt("i18n");ve(n,i,u=>t(3,s=u)),sl(()=>{t(2,a=l.reduce((u,h)=>(u[h.id]={...h,selected:r.includes(h.id)},u),{}))});const o=(u,h)=>{t(2,a[u].selected=h.detail==="checked",a),t(0,r=Object.keys(a).filter(c=>a[c].selected))};return n.$$set=u=>{"tools"in u&&t(1,l=u.tools),"selectedToolIds"in u&&t(0,r=u.selectedToolIds)},[r,l,a,s,i,o]}class hr extends bt{constructor(e){super(),kt(this,e,dr,ur,gt,{tools:1,selectedToolIds:0})}}function Ws(n,e,t){const s=n.slice();return s[6]=e[t],s[8]=t,s}function Ys(n){let e,t,s=fe(Object.keys(n[2])),l=[];for(let r=0;r<s.length;r+=1)l[r]=Gs(Ws(n,s,r));const a=r=>B(l[r],1,1,()=>{l[r]=null});return{c(){e=p("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=g(r,"DIV",{class:!0});var i=k(e);for(let o=0;o<l.length;o+=1)l[o].l(i);i.forEach(d),this.h()},h(){m(e,"class","flex items-center mt-2 flex-wrap")},m(r,i){M(r,e,i);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);t=!0},p(r,i){if(i&5){s=fe(Object.keys(r[2]));let o;for(o=0;o<s.length;o+=1){const u=Ws(r,s,o);l[o]?(l[o].p(u,i),C(l[o],1)):(l[o]=Gs(u),l[o].c(),C(l[o],1),l[o].m(e,null))}for(de(),o=s.length;o<l.length;o+=1)a(o);he()}},i(r){if(!t){for(let i=0;i<s.length;i+=1)C(l[i]);t=!0}},o(r){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)B(l[i]);t=!1},d(r){r&&d(e),ft(l,r)}}}function _r(n){let e=n[2][n[6]].name+"",t;return{c(){t=F(e)},l(s){t=H(s,e)},m(s,l){M(s,t,l)},p(s,l){l&4&&e!==(e=s[2][s[6]].name+"")&&L(t,e)},d(s){s&&d(t)}}}function Gs(n){let e,t,s,l,a,r,i,o;function u(...h){return n[5](n[6],...h)}return s=new El({props:{state:n[2][n[6]].selected?"checked":"unchecked"}}),s.$on("change",u),r=new Jl({props:{content:n[2][n[6]].meta.description,$$slots:{default:[_r]},$$scope:{ctx:n}}}),{c(){e=p("div"),t=p("div"),Z(s.$$.fragment),l=A(),a=p("div"),Z(r.$$.fragment),i=A(),this.h()},l(h){e=g(h,"DIV",{class:!0});var c=k(e);t=g(c,"DIV",{class:!0});var v=k(t);J(s.$$.fragment,v),v.forEach(d),l=N(c),a=g(c,"DIV",{class:!0});var _=k(a);J(r.$$.fragment,_),_.forEach(d),i=N(c),c.forEach(d),this.h()},h(){m(t,"class","self-center flex items-center"),m(a,"class","py-0.5 text-sm w-full capitalize font-medium"),m(e,"class","flex items-center gap-2 mr-3")},m(h,c){M(h,e,c),f(e,t),W(s,t,null),f(e,l),f(e,a),W(r,a,null),f(e,i),o=!0},p(h,c){n=h;const v={};c&4&&(v.state=n[2][n[6]].selected?"checked":"unchecked"),s.$set(v);const _={};c&4&&(_.content=n[2][n[6]].meta.description),c&516&&(_.$$scope={dirty:c,ctx:n}),r.$set(_)},i(h){o||(C(s.$$.fragment,h),C(r.$$.fragment,h),o=!0)},o(h){B(s.$$.fragment,h),B(r.$$.fragment,h),o=!1},d(h){h&&d(e),Y(s),Y(r)}}}function mr(n){let e,t,s,l=n[3].t("Filters")+"",a,r,i,o=n[3].t('To select filters here, add them to the "Functions" workspace first.')+"",u,h,c,v,_=n[1].length>0&&Ys(n);return{c(){e=p("div"),t=p("div"),s=p("div"),a=F(l),r=A(),i=p("div"),u=F(o),h=A(),c=p("div"),_&&_.c(),this.h()},l(b){e=g(b,"DIV",{});var y=k(e);t=g(y,"DIV",{class:!0});var I=k(t);s=g(I,"DIV",{class:!0});var V=k(s);a=H(V,l),V.forEach(d),I.forEach(d),r=N(y),i=g(y,"DIV",{class:!0});var j=k(i);u=H(j,o),j.forEach(d),h=N(y),c=g(y,"DIV",{class:!0});var S=k(c);_&&_.l(S),S.forEach(d),y.forEach(d),this.h()},h(){m(s,"class","self-center text-sm font-semibold"),m(t,"class","flex w-full justify-between mb-1"),m(i,"class","text-xs dark:text-gray-500"),m(c,"class","flex flex-col")},m(b,y){M(b,e,y),f(e,t),f(t,s),f(s,a),f(e,r),f(e,i),f(i,u),f(e,h),f(e,c),_&&_.m(c,null),v=!0},p(b,[y]){(!v||y&8)&&l!==(l=b[3].t("Filters")+"")&&L(a,l),(!v||y&8)&&o!==(o=b[3].t('To select filters here, add them to the "Functions" workspace first.')+"")&&L(u,o),b[1].length>0?_?(_.p(b,y),y&2&&C(_,1)):(_=Ys(b),_.c(),C(_,1),_.m(c,null)):_&&(de(),B(_,1,1,()=>{_=null}),he())},i(b){v||(C(_),v=!0)},o(b){B(_),v=!1},d(b){b&&d(e),_&&_.d()}}}function pr(n,e,t){let s;const l=vt("i18n");ve(n,l,u=>t(3,s=u));let{filters:a=[]}=e,{selectedFilterIds:r=[]}=e,i={};sl(()=>{t(2,i=a.reduce((u,h)=>(u[h.id]={...h,selected:r.includes(h.id)},u),{}))});const o=(u,h)=>{t(2,i[u].selected=h.detail==="checked",i),t(0,r=Object.keys(i).filter(c=>i[c].selected))};return n.$$set=u=>{"filters"in u&&t(1,a=u.filters),"selectedFilterIds"in u&&t(0,r=u.selectedFilterIds)},[r,a,i,s,l,o]}class gr extends bt{constructor(e){super(),kt(this,e,pr,mr,gt,{filters:1,selectedFilterIds:0})}}function Xs(n,e,t){const s=n.slice();return s[6]=e[t],s[8]=t,s}function Qs(n){let e,t,s=fe(Object.keys(n[2])),l=[];for(let r=0;r<s.length;r+=1)l[r]=xs(Xs(n,s,r));const a=r=>B(l[r],1,1,()=>{l[r]=null});return{c(){e=p("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=g(r,"DIV",{class:!0});var i=k(e);for(let o=0;o<l.length;o+=1)l[o].l(i);i.forEach(d),this.h()},h(){m(e,"class","flex items-center mt-2 flex-wrap")},m(r,i){M(r,e,i);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);t=!0},p(r,i){if(i&5){s=fe(Object.keys(r[2]));let o;for(o=0;o<s.length;o+=1){const u=Xs(r,s,o);l[o]?(l[o].p(u,i),C(l[o],1)):(l[o]=xs(u),l[o].c(),C(l[o],1),l[o].m(e,null))}for(de(),o=s.length;o<l.length;o+=1)a(o);he()}},i(r){if(!t){for(let i=0;i<s.length;i+=1)C(l[i]);t=!0}},o(r){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)B(l[i]);t=!1},d(r){r&&d(e),ft(l,r)}}}function vr(n){let e=n[2][n[6]].name+"",t;return{c(){t=F(e)},l(s){t=H(s,e)},m(s,l){M(s,t,l)},p(s,l){l&4&&e!==(e=s[2][s[6]].name+"")&&L(t,e)},d(s){s&&d(t)}}}function xs(n){let e,t,s,l,a,r,i,o;function u(...h){return n[5](n[6],...h)}return s=new El({props:{state:n[2][n[6]].selected?"checked":"unchecked"}}),s.$on("change",u),r=new Jl({props:{content:n[2][n[6]].meta.description,$$slots:{default:[vr]},$$scope:{ctx:n}}}),{c(){e=p("div"),t=p("div"),Z(s.$$.fragment),l=A(),a=p("div"),Z(r.$$.fragment),i=A(),this.h()},l(h){e=g(h,"DIV",{class:!0});var c=k(e);t=g(c,"DIV",{class:!0});var v=k(t);J(s.$$.fragment,v),v.forEach(d),l=N(c),a=g(c,"DIV",{class:!0});var _=k(a);J(r.$$.fragment,_),_.forEach(d),i=N(c),c.forEach(d),this.h()},h(){m(t,"class","self-center flex items-center"),m(a,"class","py-0.5 text-sm w-full capitalize font-medium"),m(e,"class","flex items-center gap-2 mr-3")},m(h,c){M(h,e,c),f(e,t),W(s,t,null),f(e,l),f(e,a),W(r,a,null),f(e,i),o=!0},p(h,c){n=h;const v={};c&4&&(v.state=n[2][n[6]].selected?"checked":"unchecked"),s.$set(v);const _={};c&4&&(_.content=n[2][n[6]].meta.description),c&516&&(_.$$scope={dirty:c,ctx:n}),r.$set(_)},i(h){o||(C(s.$$.fragment,h),C(r.$$.fragment,h),o=!0)},o(h){B(s.$$.fragment,h),B(r.$$.fragment,h),o=!1},d(h){h&&d(e),Y(s),Y(r)}}}function br(n){let e,t,s,l=n[3].t("Actions")+"",a,r,i,o=n[3].t('To select actions here, add them to the "Functions" workspace first.')+"",u,h,c,v,_=n[1].length>0&&Qs(n);return{c(){e=p("div"),t=p("div"),s=p("div"),a=F(l),r=A(),i=p("div"),u=F(o),h=A(),c=p("div"),_&&_.c(),this.h()},l(b){e=g(b,"DIV",{});var y=k(e);t=g(y,"DIV",{class:!0});var I=k(t);s=g(I,"DIV",{class:!0});var V=k(s);a=H(V,l),V.forEach(d),I.forEach(d),r=N(y),i=g(y,"DIV",{class:!0});var j=k(i);u=H(j,o),j.forEach(d),h=N(y),c=g(y,"DIV",{class:!0});var S=k(c);_&&_.l(S),S.forEach(d),y.forEach(d),this.h()},h(){m(s,"class","self-center text-sm font-semibold"),m(t,"class","flex w-full justify-between mb-1"),m(i,"class","text-xs dark:text-gray-500"),m(c,"class","flex flex-col")},m(b,y){M(b,e,y),f(e,t),f(t,s),f(s,a),f(e,r),f(e,i),f(i,u),f(e,h),f(e,c),_&&_.m(c,null),v=!0},p(b,[y]){(!v||y&8)&&l!==(l=b[3].t("Actions")+"")&&L(a,l),(!v||y&8)&&o!==(o=b[3].t('To select actions here, add them to the "Functions" workspace first.')+"")&&L(u,o),b[1].length>0?_?(_.p(b,y),y&2&&C(_,1)):(_=Qs(b),_.c(),C(_,1),_.m(c,null)):_&&(de(),B(_,1,1,()=>{_=null}),he())},i(b){v||(C(_),v=!0)},o(b){B(_),v=!1},d(b){b&&d(e),_&&_.d()}}}function kr(n,e,t){let s;const l=vt("i18n");ve(n,l,u=>t(3,s=u));let{actions:a=[]}=e,{selectedActionIds:r=[]}=e,i={};sl(()=>{t(2,i=a.reduce((u,h)=>(u[h.id]={...h,selected:r.includes(h.id)},u),{}))});const o=(u,h)=>{t(2,i[u].selected=h.detail==="checked",i),t(0,r=Object.keys(i).filter(c=>i[c].selected))};return n.$$set=u=>{"actions"in u&&t(1,a=u.actions),"selectedActionIds"in u&&t(0,r=u.selectedActionIds)},[r,a,i,s,l,o]}class wr extends bt{constructor(e){super(),kt(this,e,kr,br,gt,{actions:1,selectedActionIds:0})}}function en(n,e,t){const s=n.slice();return s[5]=e[t],s}function Ir(n){let e=n[1].t(n[5])+"",t;return{c(){t=F(e)},l(s){t=H(s,e)},m(s,l){M(s,t,l)},p(s,l){l&3&&e!==(e=s[1].t(s[5])+"")&&L(t,e)},d(s){s&&d(t)}}}function tn(n){let e,t,s,l,a,r,i;function o(...u){return n[4](n[5],...u)}return t=new El({props:{state:n[0][n[5]]?"checked":"unchecked"}}),t.$on("change",o),a=new Jl({props:{content:Fs.parse(n[3][n[5]]),$$slots:{default:[Ir]},$$scope:{ctx:n}}}),{c(){e=p("div"),Z(t.$$.fragment),s=A(),l=p("div"),Z(a.$$.fragment),r=A(),this.h()},l(u){e=g(u,"DIV",{class:!0});var h=k(e);J(t.$$.fragment,h),s=N(h),l=g(h,"DIV",{class:!0});var c=k(l);J(a.$$.fragment,c),c.forEach(d),r=N(h),h.forEach(d),this.h()},h(){m(l,"class","py-0.5 text-sm capitalize"),m(e,"class","flex items-center gap-2 mr-3")},m(u,h){M(u,e,h),W(t,e,null),f(e,s),f(e,l),W(a,l,null),f(e,r),i=!0},p(u,h){n=u;const c={};h&1&&(c.state=n[0][n[5]]?"checked":"unchecked"),t.$set(c);const v={};h&1&&(v.content=Fs.parse(n[3][n[5]])),h&259&&(v.$$scope={dirty:h,ctx:n}),a.$set(v)},i(u){i||(C(t.$$.fragment,u),C(a.$$.fragment,u),i=!0)},o(u){B(t.$$.fragment,u),B(a.$$.fragment,u),i=!1},d(u){u&&d(e),Y(t),Y(a)}}}function yr(n){let e,t,s,l=n[1].t("Capabilities")+"",a,r,i,o,u=fe(Object.keys(n[0])),h=[];for(let v=0;v<u.length;v+=1)h[v]=tn(en(n,u,v));const c=v=>B(h[v],1,1,()=>{h[v]=null});return{c(){e=p("div"),t=p("div"),s=p("div"),a=F(l),r=A(),i=p("div");for(let v=0;v<h.length;v+=1)h[v].c();this.h()},l(v){e=g(v,"DIV",{});var _=k(e);t=g(_,"DIV",{class:!0});var b=k(t);s=g(b,"DIV",{class:!0});var y=k(s);a=H(y,l),y.forEach(d),b.forEach(d),r=N(_),i=g(_,"DIV",{class:!0});var I=k(i);for(let V=0;V<h.length;V+=1)h[V].l(I);I.forEach(d),_.forEach(d),this.h()},h(){m(s,"class","self-center text-sm font-semibold"),m(t,"class","flex w-full justify-between mb-1"),m(i,"class","flex")},m(v,_){M(v,e,_),f(e,t),f(t,s),f(s,a),f(e,r),f(e,i);for(let b=0;b<h.length;b+=1)h[b]&&h[b].m(i,null);o=!0},p(v,[_]){if((!o||_&2)&&l!==(l=v[1].t("Capabilities")+"")&&L(a,l),_&11){u=fe(Object.keys(v[0]));let b;for(b=0;b<u.length;b+=1){const y=en(v,u,b);h[b]?(h[b].p(y,_),C(h[b],1)):(h[b]=tn(y),h[b].c(),C(h[b],1),h[b].m(i,null))}for(de(),b=u.length;b<h.length;b+=1)c(b);he()}},i(v){if(!o){for(let _=0;_<u.length;_+=1)C(h[_]);o=!0}},o(v){h=h.filter(Boolean);for(let _=0;_<h.length;_+=1)B(h[_]);o=!1},d(v){v&&d(e),ft(h,v)}}}function Er(n,e,t){let s;const l=vt("i18n");ve(n,l,o=>t(1,s=o));const a={vision:s.t("Model accepts image inputs"),usage:s.t("Sends `stream_options: { include_usage: true }` in the request.\nSupported providers will return token usage information in the response when set."),citations:s.t("Displays citations in the response")};let{capabilities:r={}}=e;const i=(o,u)=>{t(0,r[o]=u.detail==="checked",r)};return n.$$set=o=>{"capabilities"in o&&t(0,r=o.capabilities)},[r,s,l,a,i]}class Dr extends bt{constructor(e){super(),kt(this,e,Er,yr,gt,{capabilities:0})}}function ln(n,e,t){const s=n.slice();return s[62]=e[t],s[63]=e,s[64]=t,s}function sn(n,e,t){const s=n.slice();return s[0]=e[t],s}function nn(n){let e,t,s,l,a,r,i,o=n[1]&&rn(n),u=(!n[2]||n[2]&&n[0])&&an(n);return{c(){o&&o.c(),e=A(),t=p("div"),s=p("input"),l=A(),u&&u.c(),this.h()},l(h){o&&o.l(h),e=N(h),t=g(h,"DIV",{class:!0});var c=k(t);s=g(c,"INPUT",{type:!0,accept:!0}),l=N(c),u&&u.l(c),c.forEach(d),this.h()},h(){m(s,"type","file"),s.hidden=!0,m(s,"accept","image/*"),m(t,"class","w-full max-h-full flex justify-center")},m(h,c){o&&o.m(h,c),M(h,e,c),M(h,t,c),f(t,s),n[31](s),f(t,l),u&&u.m(t,null),a=!0,r||(i=[x(s,"change",n[32]),x(s,"change",n[33])],r=!0)},p(h,c){h[1]?o?o.p(h,c):(o=rn(h),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),!h[2]||h[2]&&h[0]?u?(u.p(h,c),c[0]&5&&C(u,1)):(u=an(h),u.c(),C(u,1),u.m(t,null)):u&&(de(),B(u,1,1,()=>{u=null}),he())},i(h){a||(C(u),a=!0)},o(h){B(u),a=!1},d(h){h&&(d(e),d(t)),o&&o.d(h),n[31](null),u&&u.d(),r=!1,yl(i)}}}function rn(n){let e,t,s='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-4 w-4"><path fill-rule="evenodd" d="M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z" clip-rule="evenodd"></path></svg>',l,a,r="Back",i,o,u;return{c(){e=p("button"),t=p("div"),t.innerHTML=s,l=A(),a=p("div"),i=F(r),this.h()},l(h){e=g(h,"BUTTON",{class:!0});var c=k(e);t=g(c,"DIV",{class:!0,"data-svelte-h":!0}),Me(t)!=="svelte-fdogea"&&(t.innerHTML=s),l=N(c),a=g(c,"DIV",{class:!0});var v=k(a);i=H(v,r),v.forEach(d),c.forEach(d),this.h()},h(){m(t,"class","self-center"),m(a,"class","self-center text-sm font-medium"),m(e,"class","flex space-x-1")},m(h,c){M(h,e,c),f(e,t),f(e,l),f(e,a),f(a,i),o||(u=x(e,"click",n[30]),o=!0)},p:Ft,d(h){h&&d(e),o=!1,u()}}}function an(n){var is,cs,fs,us,ds,hs;let e,t,s,l,a,r,i='<div class="m-1.5"><div class="shadow-xl p-1 rounded-full border-2 border-white bg-gray-800 text-white group-hover:bg-gray-600 transition dark:border-black dark:bg-white dark:group-hover:bg-gray-200 dark:text-black"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-5"><path fill-rule="evenodd" d="M2 4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4Zm10.5 5.707a.5.5 0 0 0-.146-.353l-1-1a.5.5 0 0 0-.708 0L9.354 9.646a.5.5 0 0 1-.708 0L6.354 7.354a.5.5 0 0 0-.708 0l-2 2a.5.5 0 0 0-.146.353V12a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5V9.707ZM12 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z" clip-rule="evenodd"></path></svg></div></div>',o,u,h,c,v,_,b="Reset Image",y,I,V,j,S,T,P,U,E,z,q,be,je,ke,le,se,Fe,Xe=n[22].t("Description")+"",wt,Ht,we,Lt,Ut,Qe,xe,ge,zt,et,tt,Ie,Kt,qt,It,Rt,Oe,lt,st,ut=n[22].t("Model Params")+"",yt,Zt,me,Be,nt,dt=n[22].t("System Prompt")+"",Et,Jt,ht,ye,Wt,D,K,Q,ee=n[22].t("Advanced Params")+"",_e,rt,ne,R,te,Dt,Yt,Ee,He,at,Vt,Gt=n[22].t("Prompt suggestions")+"",nl,Dl,Le,Vl,Tl,Cl,rl,Sl,Tt,Ue,Al,Nl,Ct,ze,Ml,jl,St,Ke,Ol,Bl,At,qe,Pl,$l,Nt,Re,Fl,Hl,Ze,ot,Mt,Xt=n[22].t("JSON Preview")+"",al,Ll,Je,Ul,zl,jt,pe,_t,Kl,ol,re,ql,Wl;function Yl(w,O){return w[13].meta.profile_image_url?Tr:Vr}let il=Yl(n),De=il(n),ae=n[3]&&on(n);function Gl(w,O){return w[12]?Cr:Sr}let cl=Gl(n),Ve=cl(n),G=n[12]&&fn(n);ge=new Fn({props:{tags:((cs=(is=n[13])==null?void 0:is.meta)==null?void 0:cs.tags)??[]}}),ge.$on("delete",n[43]),ge.$on("add",n[44]);function kn(w){n[45](w)}let Xl={accessRoles:["read","write"]};n[20]!==void 0&&(Xl.accessControl=n[20]),Ie=new Wn({props:Xl}),$e.push(()=>Ge(Ie,"accessControl",kn));function wn(w){n[46](w)}let Ql={className:" text-sm w-full bg-transparent outline-none resize-none overflow-y-hidden ",placeholder:`Write your model system prompt content here
e.g.) You are Mario from Super Mario Bros, acting as an assistant.`,rows:4};n[13].params.system!==void 0&&(Ql.value=n[13].params.system),ye=new bn({props:Ql}),$e.push(()=>Ge(ye,"value",wn));function xl(w,O){return w[8]?Nr:Ar}let fl=xl(n),Te=fl(n),X=n[8]&&un(n);function es(w,O){var it,Pe;return(((Pe=(it=w[13])==null?void 0:it.meta)==null?void 0:Pe.suggestion_prompts)??null)===null?jr:Mr}let ul=es(n),Ce=ul(n),oe=(((us=(fs=n[13])==null?void 0:fs.meta)==null?void 0:us.suggestion_prompts)??null)!==null&&dn(n),ie=((hs=(ds=n[13])==null?void 0:ds.meta)==null?void 0:hs.suggestion_prompts)&&hn(n);function In(w){n[54](w)}let ts={collections:n[23]};n[16]!==void 0&&(ts.selectedKnowledge=n[16]),Ue=new fr({props:ts}),$e.push(()=>Ge(Ue,"selectedKnowledge",In));function yn(w){n[55](w)}let ls={tools:n[24]};n[17]!==void 0&&(ls.selectedToolIds=n[17]),ze=new hr({props:ls}),$e.push(()=>Ge(ze,"selectedToolIds",yn));function En(w){n[56](w)}let ss={filters:n[25].filter(gn)};n[18]!==void 0&&(ss.selectedFilterIds=n[18]),Ke=new gr({props:ss}),$e.push(()=>Ge(Ke,"selectedFilterIds",En));function Dn(w){n[57](w)}let ns={actions:n[25].filter(vn)};n[19]!==void 0&&(ns.selectedActionIds=n[19]),qe=new wr({props:ns}),$e.push(()=>Ge(qe,"selectedActionIds",Dn));function Vn(w){n[58](w)}let rs={};n[15]!==void 0&&(rs.capabilities=n[15]),Re=new Dr({props:rs}),$e.push(()=>Ge(Re,"capabilities",Vn));function as(w,O){return w[9]?$r:Pr}let dl=as(n),Se=dl(n),ce=n[9]&&mn(n);function os(w,O){return w[2]?Hr:Fr}let hl=os(n),Ae=hl(n),ue=n[5]&&pn();return{c(){e=p("form"),t=p("div"),s=p("div"),l=p("button"),De.c(),a=A(),r=p("div"),r.innerHTML=i,o=A(),u=p("div"),c=A(),v=p("div"),_=p("button"),_.textContent=b,y=A(),I=p("div"),V=p("div"),j=p("div"),S=p("div"),T=p("input"),U=A(),E=p("div"),z=p("div"),q=p("input"),je=A(),ae&&ae.c(),ke=A(),le=p("div"),se=p("div"),Fe=p("div"),wt=F(Xe),Ht=A(),we=p("button"),Ve.c(),Lt=A(),G&&G.c(),Ut=A(),Qe=p("div"),xe=p("div"),Z(ge.$$.fragment),zt=A(),et=p("div"),tt=p("div"),Z(Ie.$$.fragment),qt=A(),It=p("hr"),Rt=A(),Oe=p("div"),lt=p("div"),st=p("div"),yt=F(ut),Zt=A(),me=p("div"),Be=p("div"),nt=p("div"),Et=F(dt),Jt=A(),ht=p("div"),Z(ye.$$.fragment),D=A(),K=p("div"),Q=p("div"),_e=F(ee),rt=A(),ne=p("button"),Te.c(),R=A(),X&&X.c(),te=A(),Dt=p("hr"),Yt=A(),Ee=p("div"),He=p("div"),at=p("div"),Vt=p("div"),nl=F(Gt),Dl=A(),Le=p("button"),Ce.c(),Vl=A(),oe&&oe.c(),Tl=A(),ie&&ie.c(),Cl=A(),rl=p("hr"),Sl=A(),Tt=p("div"),Z(Ue.$$.fragment),Nl=A(),Ct=p("div"),Z(ze.$$.fragment),jl=A(),St=p("div"),Z(Ke.$$.fragment),Bl=A(),At=p("div"),Z(qe.$$.fragment),$l=A(),Nt=p("div"),Z(Re.$$.fragment),Hl=A(),Ze=p("div"),ot=p("div"),Mt=p("div"),al=F(Xt),Ll=A(),Je=p("button"),Se.c(),Ul=A(),ce&&ce.c(),zl=A(),jt=p("div"),pe=p("button"),_t=p("div"),Ae.c(),Kl=A(),ue&&ue.c(),this.h()},l(w){e=g(w,"FORM",{class:!0});var O=k(e);t=g(O,"DIV",{class:!0});var it=k(t);s=g(it,"DIV",{class:!0});var Pe=k(s);l=g(Pe,"BUTTON",{class:!0,type:!0});var We=k(l);De.l(We),a=N(We),r=g(We,"DIV",{class:!0,"data-svelte-h":!0}),Me(r)!=="svelte-tn89fj"&&(r.innerHTML=i),o=N(We),u=g(We,"DIV",{class:!0}),k(u).forEach(d),We.forEach(d),c=N(Pe),v=g(Pe,"DIV",{class:!0});var Ot=k(v);_=g(Ot,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Me(_)!=="svelte-oem7vb"&&(_.textContent=b),Ot.forEach(d),Pe.forEach(d),it.forEach(d),y=N(O),I=g(O,"DIV",{class:!0});var $=k(I);V=g($,"DIV",{class:!0});var ct=k(V);j=g(ct,"DIV",{class:!0});var Bt=k(j);S=g(Bt,"DIV",{});var Qt=k(S);T=g(Qt,"INPUT",{class:!0,placeholder:!0}),Qt.forEach(d),Bt.forEach(d),U=N(ct),E=g(ct,"DIV",{class:!0});var xt=k(E);z=g(xt,"DIV",{});var el=k(z);q=g(el,"INPUT",{class:!0,placeholder:!0}),el.forEach(d),xt.forEach(d),ct.forEach(d),je=N($),ae&&ae.l($),ke=N($),le=g($,"DIV",{class:!0});var mt=k(le);se=g(mt,"DIV",{class:!0});var pt=k(se);Fe=g(pt,"DIV",{class:!0});var tl=k(Fe);wt=H(tl,Xe),tl.forEach(d),Ht=N(pt),we=g(pt,"BUTTON",{class:!0,type:!0});var ll=k(we);Ve.l(ll),ll.forEach(d),pt.forEach(d),Lt=N(mt),G&&G.l(mt),mt.forEach(d),Ut=N($),Qe=g($,"DIV",{class:!0});var _s=k(Qe);xe=g(_s,"DIV",{class:!0});var ms=k(xe);J(ge.$$.fragment,ms),ms.forEach(d),_s.forEach(d),zt=N($),et=g($,"DIV",{class:!0});var ps=k(et);tt=g(ps,"DIV",{class:!0});var gs=k(tt);J(Ie.$$.fragment,gs),gs.forEach(d),ps.forEach(d),qt=N($),It=g($,"HR",{class:!0}),Rt=N($),Oe=g($,"DIV",{class:!0});var _l=k(Oe);lt=g(_l,"DIV",{class:!0});var vs=k(lt);st=g(vs,"DIV",{class:!0});var bs=k(st);yt=H(bs,ut),bs.forEach(d),vs.forEach(d),Zt=N(_l),me=g(_l,"DIV",{class:!0});var Pt=k(me);Be=g(Pt,"DIV",{class:!0});var ml=k(Be);nt=g(ml,"DIV",{class:!0});var ks=k(nt);Et=H(ks,dt),ks.forEach(d),Jt=N(ml),ht=g(ml,"DIV",{});var ws=k(ht);J(ye.$$.fragment,ws),ws.forEach(d),ml.forEach(d),D=N(Pt),K=g(Pt,"DIV",{class:!0});var pl=k(K);Q=g(pl,"DIV",{class:!0});var Is=k(Q);_e=H(Is,ee),Is.forEach(d),rt=N(pl),ne=g(pl,"BUTTON",{class:!0,type:!0});var ys=k(ne);Te.l(ys),ys.forEach(d),pl.forEach(d),R=N(Pt),X&&X.l(Pt),Pt.forEach(d),_l.forEach(d),te=N($),Dt=g($,"HR",{class:!0}),Yt=N($),Ee=g($,"DIV",{class:!0});var gl=k(Ee);He=g(gl,"DIV",{class:!0});var vl=k(He);at=g(vl,"DIV",{class:!0});var bl=k(at);Vt=g(bl,"DIV",{class:!0});var Es=k(Vt);nl=H(Es,Gt),Es.forEach(d),Dl=N(bl),Le=g(bl,"BUTTON",{class:!0,type:!0});var Ds=k(Le);Ce.l(Ds),Ds.forEach(d),bl.forEach(d),Vl=N(vl),oe&&oe.l(vl),vl.forEach(d),Tl=N(gl),ie&&ie.l(gl),gl.forEach(d),Cl=N($),rl=g($,"HR",{class:!0}),Sl=N($),Tt=g($,"DIV",{class:!0});var Vs=k(Tt);J(Ue.$$.fragment,Vs),Vs.forEach(d),Nl=N($),Ct=g($,"DIV",{class:!0});var Ts=k(Ct);J(ze.$$.fragment,Ts),Ts.forEach(d),jl=N($),St=g($,"DIV",{class:!0});var Cs=k(St);J(Ke.$$.fragment,Cs),Cs.forEach(d),Bl=N($),At=g($,"DIV",{class:!0});var Ss=k(At);J(qe.$$.fragment,Ss),Ss.forEach(d),$l=N($),Nt=g($,"DIV",{class:!0});var As=k(Nt);J(Re.$$.fragment,As),As.forEach(d),Hl=N($),Ze=g($,"DIV",{class:!0});var kl=k(Ze);ot=g(kl,"DIV",{class:!0});var wl=k(ot);Mt=g(wl,"DIV",{class:!0});var Ns=k(Mt);al=H(Ns,Xt),Ns.forEach(d),Ll=N(wl),Je=g(wl,"BUTTON",{class:!0,type:!0});var Ms=k(Je);Se.l(Ms),Ms.forEach(d),wl.forEach(d),Ul=N(kl),ce&&ce.l(kl),kl.forEach(d),zl=N($),jt=g($,"DIV",{class:!0});var js=k(jt);pe=g(js,"BUTTON",{class:!0,type:!0});var Il=k(pe);_t=g(Il,"DIV",{class:!0});var Os=k(_t);Ae.l(Os),Os.forEach(d),Kl=N(Il),ue&&ue.l(Il),Il.forEach(d),js.forEach(d),$.forEach(d),O.forEach(d),this.h()},h(){m(r,"class","absolute bottom-0 right-0 z-10"),m(u,"class","absolute top-0 bottom-0 left-0 right-0 bg-white dark:bg-black rounded-lg opacity-0 group-hover:opacity-20 transition"),m(l,"class",h="rounded-xl flex flex-shrink-0 items-center "+(n[13].meta.profile_image_url!=="/static/favicon.png"?"bg-transparent":"bg-white")+" shadow-xl group relative"),m(l,"type","button"),m(_,"class","px-2 py-1 text-gray-500 rounded-lg text-xs"),m(_,"type","button"),m(v,"class","flex w-full mt-1 justify-end"),m(s,"class","self-center"),m(t,"class","self-center md:self-start flex justify-center my-2 flex-shrink-0"),m(T,"class","text-3xl font-semibold w-full bg-transparent outline-none"),m(T,"placeholder",P=n[22].t("Model Name")),T.required=!0,m(j,"class","flex-1"),m(q,"class","text-xs w-full bg-transparent text-gray-500 outline-none"),m(q,"placeholder",be=n[22].t("Model ID")),q.disabled=n[2],q.required=!0,m(E,"class","flex-1"),m(V,"class","mt-2 my-2 flex flex-col"),m(Fe,"class","self-center text-sm font-semibold"),m(we,"class","p-1 text-xs flex rounded transition"),m(we,"type","button"),m(se,"class","mb-1 flex w-full justify-between items-center"),m(le,"class","my-1"),m(xe,"class",""),m(Qe,"class","mt-2 my-1"),m(tt,"class","px-3 py-2 bg-gray-50 dark:bg-gray-950 rounded-lg"),m(et,"class","my-2"),m(It,"class","border-gray-50 dark:border-gray-850 my-1.5"),m(st,"class","self-center text-sm font-semibold"),m(lt,"class","flex w-full justify-between"),m(nt,"class","text-xs font-semibold mb-2"),m(Be,"class","my-1"),m(Q,"class","self-center text-xs font-semibold"),m(ne,"class","p-1 px-3 text-xs flex rounded transition"),m(ne,"type","button"),m(K,"class","flex w-full justify-between"),m(me,"class","mt-2"),m(Oe,"class","my-2"),m(Dt,"class","border-gray-50 dark:border-gray-850 my-1"),m(Vt,"class","self-center text-sm font-semibold"),m(Le,"class","p-1 text-xs flex rounded transition"),m(Le,"type","button"),m(at,"class","flex w-full justify-between items-center"),m(He,"class","flex w-full justify-between items-center"),m(Ee,"class","my-2"),m(rl,"class","border-gray-50 dark:border-gray-850 my-1.5"),m(Tt,"class","my-2"),m(Ct,"class","my-2"),m(St,"class","my-2"),m(At,"class","my-2"),m(Nt,"class","my-2"),m(Mt,"class","self-center text-sm font-semibold"),m(Je,"class","p-1 px-3 text-xs flex rounded transition"),m(Je,"type","button"),m(ot,"class","flex w-full justify-between mb-2"),m(Ze,"class","my-2 text-gray-300 dark:text-gray-700"),m(_t,"class","self-center font-medium"),m(pe,"class",ol="text-sm px-3 py-2 transition rounded-lg "+(n[5]?" cursor-not-allowed bg-black hover:bg-gray-900 text-white dark:bg-white dark:hover:bg-gray-100 dark:text-black":"bg-black hover:bg-gray-900 text-white dark:bg-white dark:hover:bg-gray-100 dark:text-black")+" flex w-full justify-center"),m(pe,"type","submit"),pe.disabled=n[5],m(jt,"class","my-2 flex justify-end pb-20"),m(I,"class","w-full"),m(e,"class","flex flex-col md:flex-row w-full gap-3 md:gap-6")},m(w,O){M(w,e,O),f(e,t),f(t,s),f(s,l),De.m(l,null),f(l,a),f(l,r),f(l,o),f(l,u),f(s,c),f(s,v),f(v,_),f(e,y),f(e,I),f(I,V),f(V,j),f(j,S),f(S,T),Ne(T,n[4]),f(V,U),f(V,E),f(E,z),f(z,q),Ne(q,n[11]),f(I,je),ae&&ae.m(I,null),f(I,ke),f(I,le),f(le,se),f(se,Fe),f(Fe,wt),f(se,Ht),f(se,we),Ve.m(we,null),f(le,Lt),G&&G.m(le,null),f(I,Ut),f(I,Qe),f(Qe,xe),W(ge,xe,null),f(I,zt),f(I,et),f(et,tt),W(Ie,tt,null),f(I,qt),f(I,It),f(I,Rt),f(I,Oe),f(Oe,lt),f(lt,st),f(st,yt),f(Oe,Zt),f(Oe,me),f(me,Be),f(Be,nt),f(nt,Et),f(Be,Jt),f(Be,ht),W(ye,ht,null),f(me,D),f(me,K),f(K,Q),f(Q,_e),f(K,rt),f(K,ne),Te.m(ne,null),f(me,R),X&&X.m(me,null),f(I,te),f(I,Dt),f(I,Yt),f(I,Ee),f(Ee,He),f(He,at),f(at,Vt),f(Vt,nl),f(at,Dl),f(at,Le),Ce.m(Le,null),f(He,Vl),oe&&oe.m(He,null),f(Ee,Tl),ie&&ie.m(Ee,null),f(I,Cl),f(I,rl),f(I,Sl),f(I,Tt),W(Ue,Tt,null),f(I,Nl),f(I,Ct),W(ze,Ct,null),f(I,jl),f(I,St),W(Ke,St,null),f(I,Bl),f(I,At),W(qe,At,null),f(I,$l),f(I,Nt),W(Re,Nt,null),f(I,Hl),f(I,Ze),f(Ze,ot),f(ot,Mt),f(Mt,al),f(ot,Ll),f(ot,Je),Se.m(Je,null),f(Ze,Ul),ce&&ce.m(Ze,null),f(I,zl),f(I,jt),f(jt,pe),f(pe,_t),Ae.m(_t,null),f(pe,Kl),ue&&ue.m(pe,null),re=!0,ql||(Wl=[x(l,"click",n[34]),x(_,"click",n[35]),x(T,"input",n[36]),x(q,"input",n[37]),x(we,"click",n[41]),x(ne,"click",n[47]),x(Le,"click",n[50]),x(Je,"click",n[59]),x(e,"submit",jn(n[60]))],ql=!0)},p(w,O){var xt,el,mt,pt,tl,ll;il===(il=Yl(w))&&De?De.p(w,O):(De.d(1),De=il(w),De&&(De.c(),De.m(l,a))),(!re||O[0]&2105344&&h!==(h="rounded-xl flex flex-shrink-0 items-center "+(w[13].meta.profile_image_url!=="/static/favicon.png"?"bg-transparent":"bg-white")+" shadow-xl group relative"))&&m(l,"class",h),(!re||O[0]&4194304&&P!==(P=w[22].t("Model Name")))&&m(T,"placeholder",P),O[0]&16&&T.value!==w[4]&&Ne(T,w[4]),(!re||O[0]&4194304&&be!==(be=w[22].t("Model ID")))&&m(q,"placeholder",be),(!re||O[0]&4)&&(q.disabled=w[2]),O[0]&2048&&q.value!==w[11]&&Ne(q,w[11]),w[3]?ae?ae.p(w,O):(ae=on(w),ae.c(),ae.m(I,ke)):ae&&(ae.d(1),ae=null),(!re||O[0]&4194304)&&Xe!==(Xe=w[22].t("Description")+"")&&L(wt,Xe),cl===(cl=Gl(w))&&Ve?Ve.p(w,O):(Ve.d(1),Ve=cl(w),Ve&&(Ve.c(),Ve.m(we,null))),w[12]?G?(G.p(w,O),O[0]&4096&&C(G,1)):(G=fn(w),G.c(),C(G,1),G.m(le,null)):G&&(de(),B(G,1,1,()=>{G=null}),he());const it={};O[0]&8192&&(it.tags=((el=(xt=w[13])==null?void 0:xt.meta)==null?void 0:el.tags)??[]),ge.$set(it);const Pe={};!Kt&&O[0]&1048576&&(Kt=!0,Pe.accessControl=w[20],Ye(()=>Kt=!1)),Ie.$set(Pe),(!re||O[0]&4194304)&&ut!==(ut=w[22].t("Model Params")+"")&&L(yt,ut),(!re||O[0]&4194304)&&dt!==(dt=w[22].t("System Prompt")+"")&&L(Et,dt);const We={};!Wt&&O[0]&8192&&(Wt=!0,We.value=w[13].params.system,Ye(()=>Wt=!1)),ye.$set(We),(!re||O[0]&4194304)&&ee!==(ee=w[22].t("Advanced Params")+"")&&L(_e,ee),fl===(fl=xl(w))&&Te?Te.p(w,O):(Te.d(1),Te=fl(w),Te&&(Te.c(),Te.m(ne,null))),w[8]?X?(X.p(w,O),O[0]&256&&C(X,1)):(X=un(w),X.c(),C(X,1),X.m(me,null)):X&&(de(),B(X,1,1,()=>{X=null}),he()),(!re||O[0]&4194304)&&Gt!==(Gt=w[22].t("Prompt suggestions")+"")&&L(nl,Gt),ul===(ul=es(w))&&Ce?Ce.p(w,O):(Ce.d(1),Ce=ul(w),Ce&&(Ce.c(),Ce.m(Le,null))),(((pt=(mt=w[13])==null?void 0:mt.meta)==null?void 0:pt.suggestion_prompts)??null)!==null?oe?oe.p(w,O):(oe=dn(w),oe.c(),oe.m(He,null)):oe&&(oe.d(1),oe=null),(ll=(tl=w[13])==null?void 0:tl.meta)!=null&&ll.suggestion_prompts?ie?ie.p(w,O):(ie=hn(w),ie.c(),ie.m(Ee,null)):ie&&(ie.d(1),ie=null);const Ot={};O[0]&8388608&&(Ot.collections=w[23]),!Al&&O[0]&65536&&(Al=!0,Ot.selectedKnowledge=w[16],Ye(()=>Al=!1)),Ue.$set(Ot);const $={};O[0]&16777216&&($.tools=w[24]),!Ml&&O[0]&131072&&(Ml=!0,$.selectedToolIds=w[17],Ye(()=>Ml=!1)),ze.$set($);const ct={};O[0]&33554432&&(ct.filters=w[25].filter(gn)),!Ol&&O[0]&262144&&(Ol=!0,ct.selectedFilterIds=w[18],Ye(()=>Ol=!1)),Ke.$set(ct);const Bt={};O[0]&33554432&&(Bt.actions=w[25].filter(vn)),!Pl&&O[0]&524288&&(Pl=!0,Bt.selectedActionIds=w[19],Ye(()=>Pl=!1)),qe.$set(Bt);const Qt={};!Fl&&O[0]&32768&&(Fl=!0,Qt.capabilities=w[15],Ye(()=>Fl=!1)),Re.$set(Qt),(!re||O[0]&4194304)&&Xt!==(Xt=w[22].t("JSON Preview")+"")&&L(al,Xt),dl===(dl=as(w))&&Se?Se.p(w,O):(Se.d(1),Se=dl(w),Se&&(Se.c(),Se.m(Je,null))),w[9]?ce?ce.p(w,O):(ce=mn(w),ce.c(),ce.m(Ze,null)):ce&&(ce.d(1),ce=null),hl===(hl=os(w))&&Ae?Ae.p(w,O):(Ae.d(1),Ae=hl(w),Ae&&(Ae.c(),Ae.m(_t,null))),w[5]?ue||(ue=pn(),ue.c(),ue.m(pe,null)):ue&&(ue.d(1),ue=null),(!re||O[0]&32&&ol!==(ol="text-sm px-3 py-2 transition rounded-lg "+(w[5]?" cursor-not-allowed bg-black hover:bg-gray-900 text-white dark:bg-white dark:hover:bg-gray-100 dark:text-black":"bg-black hover:bg-gray-900 text-white dark:bg-white dark:hover:bg-gray-100 dark:text-black")+" flex w-full justify-center"))&&m(pe,"class",ol),(!re||O[0]&32)&&(pe.disabled=w[5])},i(w){re||(C(G),C(ge.$$.fragment,w),C(Ie.$$.fragment,w),C(ye.$$.fragment,w),C(X),C(Ue.$$.fragment,w),C(ze.$$.fragment,w),C(Ke.$$.fragment,w),C(qe.$$.fragment,w),C(Re.$$.fragment,w),re=!0)},o(w){B(G),B(ge.$$.fragment,w),B(Ie.$$.fragment,w),B(ye.$$.fragment,w),B(X),B(Ue.$$.fragment,w),B(ze.$$.fragment,w),B(Ke.$$.fragment,w),B(qe.$$.fragment,w),B(Re.$$.fragment,w),re=!1},d(w){w&&d(e),De.d(),ae&&ae.d(),Ve.d(),G&&G.d(),Y(ge),Y(Ie),Y(ye),Te.d(),X&&X.d(),Ce.d(),oe&&oe.d(),ie&&ie.d(),Y(Ue),Y(ze),Y(Ke),Y(qe),Y(Re),Se.d(),ce&&ce.d(),Ae.d(),ue&&ue.d(),ql=!1,yl(Wl)}}}function Vr(n){let e,t;return{c(){e=p("img"),this.h()},l(s){e=g(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Rl(e.src,t="/static/favicon.png")||m(e,"src",t),m(e,"alt","model profile"),m(e,"class","rounded-xl size-72 md:size-60 object-cover shrink-0")},m(s,l){M(s,e,l)},p:Ft,d(s){s&&d(e)}}}function Tr(n){let e,t;return{c(){e=p("img"),this.h()},l(s){e=g(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Rl(e.src,t=n[13].meta.profile_image_url)||m(e,"src",t),m(e,"alt","model profile"),m(e,"class","rounded-xl size-72 md:size-60 object-cover shrink-0")},m(s,l){M(s,e,l)},p(s,l){l[0]&2105344&&!Rl(e.src,t=s[13].meta.profile_image_url)&&m(e,"src",t)},d(s){s&&d(e)}}}function on(n){let e,t,s=n[22].t("Base Model (From)")+"",l,a,r,i,o,u=n[22].t("Select a base model")+"",h,c,v,_=fe(n[21].filter(n[38])),b=[];for(let y=0;y<_.length;y+=1)b[y]=cn(sn(n,_,y));return{c(){e=p("div"),t=p("div"),l=F(s),a=A(),r=p("div"),i=p("select"),o=p("option"),h=F(u);for(let y=0;y<b.length;y+=1)b[y].c();this.h()},l(y){e=g(y,"DIV",{class:!0});var I=k(e);t=g(I,"DIV",{class:!0});var V=k(t);l=H(V,s),V.forEach(d),a=N(I),r=g(I,"DIV",{});var j=k(r);i=g(j,"SELECT",{class:!0,placeholder:!0});var S=k(i);o=g(S,"OPTION",{class:!0});var T=k(o);h=H(T,u),T.forEach(d);for(let P=0;P<b.length;P+=1)b[P].l(S);S.forEach(d),j.forEach(d),I.forEach(d),this.h()},h(){m(t,"class","text-sm font-semibold mb-1"),o.__value=null,Ne(o,o.__value),m(o,"class","text-gray-900"),m(i,"class","text-sm w-full bg-transparent outline-none"),m(i,"placeholder","Select a base model (e.g. llama3, gpt-4o)"),i.required=!0,n[13].base_model_id===void 0&&On(()=>n[39].call(i)),m(e,"class","my-1")},m(y,I){M(y,e,I),f(e,t),f(t,l),f(e,a),f(e,r),f(r,i),f(i,o),f(o,h);for(let V=0;V<b.length;V+=1)b[V]&&b[V].m(i,null);Bs(i,n[13].base_model_id,!0),c||(v=[x(i,"change",n[39]),x(i,"change",n[40])],c=!0)},p(y,I){if(I[0]&4194304&&s!==(s=y[22].t("Base Model (From)")+"")&&L(l,s),I[0]&4194304&&u!==(u=y[22].t("Select a base model")+"")&&L(h,u),I[0]&2097153){_=fe(y[21].filter(y[38]));let V;for(V=0;V<_.length;V+=1){const j=sn(y,_,V);b[V]?b[V].p(j,I):(b[V]=cn(j),b[V].c(),b[V].m(i,null))}for(;V<b.length;V+=1)b[V].d(1);b.length=_.length}I[0]&2105344&&Bs(i,y[13].base_model_id)},d(y){y&&d(e),ft(b,y),c=!1,yl(v)}}}function cn(n){let e,t=n[0].name+"",s,l;return{c(){e=p("option"),s=F(t),this.h()},l(a){e=g(a,"OPTION",{class:!0});var r=k(e);s=H(r,t),r.forEach(d),this.h()},h(){e.__value=l=n[0].id,Ne(e,e.__value),m(e,"class","text-gray-900")},m(a,r){M(a,e,r),f(e,s)},p(a,r){r[0]&2097153&&t!==(t=a[0].name+"")&&L(s,t),r[0]&2097153&&l!==(l=a[0].id)&&(e.__value=l,Ne(e,e.__value))},d(a){a&&d(e)}}}function Cr(n){let e,t=n[22].t("Custom")+"",s;return{c(){e=p("span"),s=F(t),this.h()},l(l){e=g(l,"SPAN",{class:!0});var a=k(e);s=H(a,t),a.forEach(d),this.h()},h(){m(e,"class","ml-2 self-center")},m(l,a){M(l,e,a),f(e,s)},p(l,a){a[0]&4194304&&t!==(t=l[22].t("Custom")+"")&&L(s,t)},d(l){l&&d(e)}}}function Sr(n){let e,t=n[22].t("Default")+"",s;return{c(){e=p("span"),s=F(t),this.h()},l(l){e=g(l,"SPAN",{class:!0});var a=k(e);s=H(a,t),a.forEach(d),this.h()},h(){m(e,"class","ml-2 self-center")},m(l,a){M(l,e,a),f(e,s)},p(l,a){a[0]&4194304&&t!==(t=l[22].t("Default")+"")&&L(s,t)},d(l){l&&d(e)}}}function fn(n){let e,t,s;function l(r){n[42](r)}let a={className:" text-sm w-full bg-transparent outline-none resize-none overflow-y-hidden ",placeholder:n[22].t("Add a short description about what this model does")};return n[13].meta.description!==void 0&&(a.value=n[13].meta.description),e=new bn({props:a}),$e.push(()=>Ge(e,"value",l)),{c(){Z(e.$$.fragment)},l(r){J(e.$$.fragment,r)},m(r,i){W(e,r,i),s=!0},p(r,i){const o={};i[0]&4194304&&(o.placeholder=r[22].t("Add a short description about what this model does")),!t&&i[0]&8192&&(t=!0,o.value=r[13].meta.description,Ye(()=>t=!1)),e.$set(o)},i(r){s||(C(e.$$.fragment,r),s=!0)},o(r){B(e.$$.fragment,r),s=!1},d(r){Y(e,r)}}}function Ar(n){let e,t=n[22].t("Show")+"",s;return{c(){e=p("span"),s=F(t),this.h()},l(l){e=g(l,"SPAN",{class:!0});var a=k(e);s=H(a,t),a.forEach(d),this.h()},h(){m(e,"class","ml-2 self-center")},m(l,a){M(l,e,a),f(e,s)},p(l,a){a[0]&4194304&&t!==(t=l[22].t("Show")+"")&&L(s,t)},d(l){l&&d(e)}}}function Nr(n){let e,t=n[22].t("Hide")+"",s;return{c(){e=p("span"),s=F(t),this.h()},l(l){e=g(l,"SPAN",{class:!0});var a=k(e);s=H(a,t),a.forEach(d),this.h()},h(){m(e,"class","ml-2 self-center")},m(l,a){M(l,e,a),f(e,s)},p(l,a){a[0]&4194304&&t!==(t=l[22].t("Hide")+"")&&L(s,t)},d(l){l&&d(e)}}}function un(n){let e,t,s,l;function a(i){n[48](i)}let r={admin:!0};return n[14]!==void 0&&(r.params=n[14]),t=new $n({props:r}),$e.push(()=>Ge(t,"params",a)),t.$on("change",n[49]),{c(){e=p("div"),Z(t.$$.fragment),this.h()},l(i){e=g(i,"DIV",{class:!0});var o=k(e);J(t.$$.fragment,o),o.forEach(d),this.h()},h(){m(e,"class","my-2")},m(i,o){M(i,e,o),W(t,e,null),l=!0},p(i,o){const u={};!s&&o[0]&16384&&(s=!0,u.params=i[14],Ye(()=>s=!1)),t.$set(u)},i(i){l||(C(t.$$.fragment,i),l=!0)},o(i){B(t.$$.fragment,i),l=!1},d(i){i&&d(e),Y(t)}}}function Mr(n){let e,t=n[22].t("Custom")+"",s;return{c(){e=p("span"),s=F(t),this.h()},l(l){e=g(l,"SPAN",{class:!0});var a=k(e);s=H(a,t),a.forEach(d),this.h()},h(){m(e,"class","ml-2 self-center")},m(l,a){M(l,e,a),f(e,s)},p(l,a){a[0]&4194304&&t!==(t=l[22].t("Custom")+"")&&L(s,t)},d(l){l&&d(e)}}}function jr(n){let e,t=n[22].t("Default")+"",s;return{c(){e=p("span"),s=F(t),this.h()},l(l){e=g(l,"SPAN",{class:!0});var a=k(e);s=H(a,t),a.forEach(d),this.h()},h(){m(e,"class","ml-2 self-center")},m(l,a){M(l,e,a),f(e,s)},p(l,a){a[0]&4194304&&t!==(t=l[22].t("Default")+"")&&L(s,t)},d(l){l&&d(e)}}}function dn(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"></path></svg>',s,l;return{c(){e=p("button"),e.innerHTML=t,this.h()},l(a){e=g(a,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Me(e)!=="svelte-twr6nu"&&(e.innerHTML=t),this.h()},h(){m(e,"class","p-1 px-2 text-xs flex rounded transition"),m(e,"type","button")},m(a,r){M(a,e,r),s||(l=x(e,"click",n[51]),s=!0)},p:Ft,d(a){a&&d(e),s=!1,l()}}}function hn(n){let e;function t(a,r){return a[13].meta.suggestion_prompts.length>0?Br:Or}let s=t(n),l=s(n);return{c(){e=p("div"),l.c(),this.h()},l(a){e=g(a,"DIV",{class:!0});var r=k(e);l.l(r),r.forEach(d),this.h()},h(){m(e,"class","flex flex-col space-y-1 mt-1 mb-3")},m(a,r){M(a,e,r),l.m(e,null)},p(a,r){s===(s=t(a))&&l?l.p(a,r):(l.d(1),l=s(a),l&&(l.c(),l.m(e,null)))},d(a){a&&d(e),l.d()}}}function Or(n){let e,t="No suggestion prompts";return{c(){e=p("div"),e.textContent=t,this.h()},l(s){e=g(s,"DIV",{class:!0,"data-svelte-h":!0}),Me(e)!=="svelte-18dnedh"&&(e.textContent=t),this.h()},h(){m(e,"class","text-xs text-center")},m(s,l){M(s,e,l)},p:Ft,d(s){s&&d(e)}}}function Br(n){let e,t=fe(n[13].meta.suggestion_prompts),s=[];for(let l=0;l<t.length;l+=1)s[l]=_n(ln(n,t,l));return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=$t()},l(l){for(let a=0;a<s.length;a+=1)s[a].l(l);e=$t()},m(l,a){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(l,a);M(l,e,a)},p(l,a){if(a[0]&4202496){t=fe(l[13].meta.suggestion_prompts);let r;for(r=0;r<t.length;r+=1){const i=ln(l,t,r);s[r]?s[r].p(i,a):(s[r]=_n(i),s[r].c(),s[r].m(e.parentNode,e))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(l){l&&d(e),ft(s,l)}}}function _n(n){let e,t,s,l,a,r='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',i,o,u;function h(){n[52].call(t,n[63],n[64])}function c(){return n[53](n[64])}return{c(){e=p("div"),t=p("input"),l=A(),a=p("button"),a.innerHTML=r,i=A(),this.h()},l(v){e=g(v,"DIV",{class:!0});var _=k(e);t=g(_,"INPUT",{class:!0,placeholder:!0}),l=N(_),a=g(_,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Me(a)!=="svelte-1jlemba"&&(a.innerHTML=r),i=N(_),_.forEach(d),this.h()},h(){m(t,"class","text-sm w-full bg-transparent outline-none border-r border-gray-50 dark:border-gray-850"),m(t,"placeholder",s=n[22].t("Write a prompt suggestion (e.g. Who are you?)")),m(a,"class","px-2"),m(a,"type","button"),m(e,"class","flex rounded-lg")},m(v,_){M(v,e,_),f(e,t),Ne(t,n[62].content),f(e,l),f(e,a),f(e,i),o||(u=[x(t,"input",h),x(a,"click",c)],o=!0)},p(v,_){n=v,_[0]&4194304&&s!==(s=n[22].t("Write a prompt suggestion (e.g. Who are you?)"))&&m(t,"placeholder",s),_[0]&2105344&&t.value!==n[62].content&&Ne(t,n[62].content)},d(v){v&&d(e),o=!1,yl(u)}}}function Pr(n){let e,t=n[22].t("Show")+"",s;return{c(){e=p("span"),s=F(t),this.h()},l(l){e=g(l,"SPAN",{class:!0});var a=k(e);s=H(a,t),a.forEach(d),this.h()},h(){m(e,"class","ml-2 self-center")},m(l,a){M(l,e,a),f(e,s)},p(l,a){a[0]&4194304&&t!==(t=l[22].t("Show")+"")&&L(s,t)},d(l){l&&d(e)}}}function $r(n){let e,t=n[22].t("Hide")+"",s;return{c(){e=p("span"),s=F(t),this.h()},l(l){e=g(l,"SPAN",{class:!0});var a=k(e);s=H(a,t),a.forEach(d),this.h()},h(){m(e,"class","ml-2 self-center")},m(l,a){M(l,e,a),f(e,s)},p(l,a){a[0]&4194304&&t!==(t=l[22].t("Hide")+"")&&L(s,t)},d(l){l&&d(e)}}}function mn(n){let e,t,s;return{c(){e=p("div"),t=p("textarea"),this.h()},l(l){e=g(l,"DIV",{});var a=k(e);t=g(a,"TEXTAREA",{class:!0,rows:!0}),k(t).forEach(d),a.forEach(d),this.h()},h(){m(t,"class","text-sm w-full bg-transparent outline-none resize-none"),m(t,"rows","10"),t.value=s=JSON.stringify(n[13],null,2),t.disabled=!0,t.readOnly=!0},m(l,a){M(l,e,a),f(e,t)},p(l,a){a[0]&2105344&&s!==(s=JSON.stringify(l[13],null,2))&&(t.value=s)},d(l){l&&d(e)}}}function Fr(n){let e=n[22].t("Save & Create")+"",t;return{c(){t=F(e)},l(s){t=H(s,e)},m(s,l){M(s,t,l)},p(s,l){l[0]&4194304&&e!==(e=s[22].t("Save & Create")+"")&&L(t,e)},d(s){s&&d(t)}}}function Hr(n){let e=n[22].t("Save & Update")+"",t;return{c(){t=F(e)},l(s){t=H(s,e)},m(s,l){M(s,t,l)},p(s,l){l[0]&4194304&&e!==(e=s[22].t("Save & Update")+"")&&L(t,e)},d(s){s&&d(t)}}}function pn(n){let e,t=`<svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><style>.spinner_ajPY {
												transform-origin: center;
												animation: spinner_AtaB 0.75s infinite linear;
											}
											@keyframes spinner_AtaB {
												100% {
													transform: rotate(360deg);
												}
											}
										</style><path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"></path><path d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"></path></svg>`;return{c(){e=p("div"),e.innerHTML=t,this.h()},l(s){e=g(s,"DIV",{class:!0,"data-svelte-h":!0}),Me(e)!=="svelte-1bpzrva"&&(e.innerHTML=t),this.h()},h(){m(e,"class","ml-1.5 self-center")},m(s,l){M(s,e,l)},d(s){s&&d(e)}}}function Lr(n){let e,t,s=n[10]&&nn(n);return{c(){s&&s.c(),e=$t()},l(l){s&&s.l(l),e=$t()},m(l,a){s&&s.m(l,a),M(l,e,a),t=!0},p(l,a){l[10]?s?(s.p(l,a),a[0]&1024&&C(s,1)):(s=nn(l),s.c(),C(s,1),s.m(e.parentNode,e)):s&&(de(),B(s,1,1,()=>{s=null}),he())},i(l){t||(C(s),t=!0)},o(l){B(s),t=!1},d(l){l&&d(e),s&&s.d(l)}}}const gn=n=>n.type==="filter",vn=n=>n.type==="action";function Ur(n,e,t){let s,l,a,r,i;ve(n,Pn,D=>t(21,s=D)),ve(n,Zl,D=>t(23,a=D)),ve(n,Ps,D=>t(24,r=D)),ve(n,$s,D=>t(25,i=D));const o=vt("i18n");ve(n,o,D=>t(22,l=D));let{onSubmit:u}=e,{onBack:h=null}=e,{model:c=null}=e,{edit:v=!1}=e,{preset:_=!0}=e,b=!1,y,I,V=!1,j=!1,S=!1,T="",P="",U=!0,E={id:"",base_model_id:null,name:"",meta:{profile_image_url:"/static/favicon.png",description:"",suggestion_prompts:null,tags:[]},params:{system:""}},z={system:""},q={vision:!0,usage:void 0,citations:!0},be=[],je=[],ke=[],le=[],se={};const Fe=D=>{var Q,ee;const K=s.find(_e=>_e.id===D);K&&(K.owned_by==="openai"?t(15,q.usage=((ee=(Q=K==null?void 0:K.meta)==null?void 0:Q.capabilities)==null?void 0:ee.usage)??!1,q):delete q.usage,t(15,q))},Xe=async()=>{t(5,b=!0),t(13,E.id=T,E),t(13,E.name=P,E),T===""&&Hs.error("Model ID is required."),P===""&&Hs.error("Model Name is required."),t(13,E.access_control=se,E),t(13,E.meta.capabilities=q,E),U?t(13,E.meta.description=E.meta.description.trim()===""?null:E.meta.description,E):t(13,E.meta.description=null,E),be.length>0?t(13,E.meta.knowledge=be,E):E.meta.knowledge&&delete E.meta.knowledge,je.length>0?t(13,E.meta.toolIds=je,E):E.meta.toolIds&&delete E.meta.toolIds,ke.length>0?t(13,E.meta.filterIds=ke,E):E.meta.filterIds&&delete E.meta.filterIds,le.length>0?t(13,E.meta.actionIds=le,E):E.meta.actionIds&&delete E.meta.actionIds,t(13,E.params.stop=z.stop?z.stop.split(",").filter(D=>D.trim()):null,E),Object.keys(E.params).forEach(D=>{(E.params[D]===""||E.params[D]===null)&&delete E.params[D]}),await u(E),t(5,b=!1)};sl(async()=>{var K,Q,ee,_e,rt,ne;await Ps.set(await Rn(localStorage.token)),await $s.set(await Zn(localStorage.token)),await Zl.set(await Jn(localStorage.token));const D=document.getElementById("workspace-container");if(D&&(D.scrollTop=0),c){if(console.log(c),t(4,P=c.name),await Mn(),t(11,T=c.id),t(12,U=((K=c==null?void 0:c.meta)==null?void 0:K.description)!==null),c.base_model_id){const R=s.filter(te=>!(te!=null&&te.preset)&&!((te==null?void 0:te.arena)??!1)).find(te=>[c.base_model_id,`${c.base_model_id}:latest`].includes(te.id));console.log("base_model",R),R?t(0,c.base_model_id=R.id,c):t(0,c.base_model_id=null,c)}t(14,z={...z,...c==null?void 0:c.params}),t(14,z.stop=z!=null&&z.stop?(typeof z.stop=="string"?z.stop.split(","):(z==null?void 0:z.stop)??[]).join(","):null,z),t(17,je=((Q=c==null?void 0:c.meta)==null?void 0:Q.toolIds)??[]),t(18,ke=((ee=c==null?void 0:c.meta)==null?void 0:ee.filterIds)??[]),t(19,le=((_e=c==null?void 0:c.meta)==null?void 0:_e.actionIds)??[]),t(16,be=(((rt=c==null?void 0:c.meta)==null?void 0:rt.knowledge)??[]).map(R=>R!=null&&R.collection_name?{id:R.collection_name,name:R.name,legacy:!0}:R!=null&&R.collection_names?{name:R.name,type:"collection",collection_names:R.collection_names,legacy:!0}:R)),t(15,q={...q,...((ne=c==null?void 0:c.meta)==null?void 0:ne.capabilities)??{}}),"access_control"in c?t(20,se=c.access_control):t(20,se={}),console.log(c==null?void 0:c.access_control),console.log(se),t(13,E={...E,...JSON.parse(JSON.stringify(c||{id:c.id,name:c.name}))}),console.log(c)}t(10,S=!0)});const wt=()=>{h()};function Ht(D){$e[D?"unshift":"push"](()=>{y=D,t(6,y)})}function we(){I=this.files,t(7,I)}const Lt=()=>{let D=new FileReader;D.onload=K=>{let Q=`${K.target.result}`;const ee=new Image;ee.src=Q,ee.onload=function(){const _e=document.createElement("canvas"),rt=_e.getContext("2d"),ne=ee.width/ee.height;let R,te;ne>1?(R=250*ne,te=250):(R=250,te=250/ne),_e.width=250,_e.height=250;const Dt=(250-R)/2,Yt=(250-te)/2;rt.drawImage(ee,Dt,Yt,R,te);const Ee=_e.toDataURL();t(13,E.meta.profile_image_url=Ee,E),t(7,I=null),t(6,y.value="",y)}},I&&I.length>0&&["image/gif","image/webp","image/jpeg","image/png","image/svg+xml"].includes(I[0].type)?D.readAsDataURL(I[0]):(console.log(`Unsupported File Type '${I[0].type}'.`),t(7,I=null))},Ut=()=>{y.click()},Qe=()=>{t(13,E.meta.profile_image_url="/static/favicon.png",E)};function xe(){P=this.value,t(4,P)}function ge(){T=this.value,t(11,T),t(2,v),t(4,P)}const zt=D=>(c?D.id!==c.id:!0)&&!(D!=null&&D.preset)&&(D==null?void 0:D.owned_by)!=="arena";function et(){E.base_model_id=Bn(this),t(13,E)}const tt=D=>{Fe(D.target.value)},Ie=()=>{t(12,U=!U)};function Kt(D){n.$$.not_equal(E.meta.description,D)&&(E.meta.description=D,t(13,E))}const qt=D=>{const K=D.detail;t(13,E.meta.tags=E.meta.tags.filter(Q=>Q.name!==K),E)},It=D=>{var Q;const K=D.detail;((Q=E==null?void 0:E.meta)==null?void 0:Q.tags)??null?t(13,E.meta.tags=[...E.meta.tags,{name:K}],E):t(13,E.meta.tags=[{name:K}],E)};function Rt(D){se=D,t(20,se)}function Oe(D){n.$$.not_equal(E.params.system,D)&&(E.params.system=D,t(13,E))}const lt=()=>{t(8,V=!V)};function st(D){z=D,t(14,z)}const ut=D=>{t(13,E.params={...E.params,...z},E)},yt=()=>{var D;(((D=E==null?void 0:E.meta)==null?void 0:D.suggestion_prompts)??null)===null?t(13,E.meta.suggestion_prompts=[{content:""}],E):t(13,E.meta.suggestion_prompts=null,E)},Zt=()=>{(E.meta.suggestion_prompts.length===0||E.meta.suggestion_prompts.at(-1).content!=="")&&t(13,E.meta.suggestion_prompts=[...E.meta.suggestion_prompts,{content:""}],E)};function me(D,K){D[K].content=this.value,t(13,E)}const Be=D=>{E.meta.suggestion_prompts.splice(D,1),t(13,E)};function nt(D){be=D,t(16,be)}function dt(D){je=D,t(17,je)}function Et(D){ke=D,t(18,ke)}function Jt(D){le=D,t(19,le)}function ht(D){q=D,t(15,q)}const ye=()=>{t(9,j=!j)},Wt=()=>{Xe()};return n.$$set=D=>{"onSubmit"in D&&t(29,u=D.onSubmit),"onBack"in D&&t(1,h=D.onBack),"model"in D&&t(0,c=D.model),"edit"in D&&t(2,v=D.edit),"preset"in D&&t(3,_=D.preset)},n.$$.update=()=>{n.$$.dirty[0]&20&&(v||P&&t(11,T=P.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").toLowerCase()))},[c,h,v,_,P,b,y,I,V,j,S,T,U,E,z,q,be,je,ke,le,se,s,l,a,r,i,o,Fe,Xe,u,wt,Ht,we,Lt,Ut,Qe,xe,ge,zt,et,tt,Ie,Kt,qt,It,Rt,Oe,lt,st,ut,yt,Zt,me,Be,nt,dt,Et,Jt,ht,ye,Wt]}class fa extends bt{constructor(e){super(),kt(this,e,Ur,Lr,gt,{onSubmit:29,onBack:1,model:0,edit:2,preset:3},null,[-1,-1,-1])}}export{fa as M};
//# sourceMappingURL=ModelEditor.Cgl29FNH.js.map
